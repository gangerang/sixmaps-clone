//>>built
(function(m,p){var f,l=function(){return"undefined"!==typeof x&&"function"!==typeof x?x:"undefined"!==typeof window?window:"undefined"!==typeof self?self:this}(),k=function(){},h=function(b){for(var c in b)return 0;return 1},q={}.toString,g=function(b){return"[object Function]"==q.call(b)},e=function(b){return"[object String]"==q.call(b)},c=function(b){return"[object Array]"==q.call(b)},b=function(b,c){if(b)for(var d=0;d<b.length;)c(b[d++])},d=function(b,c){for(var d in c)b[d]=c[d];return b},r=function(b,
c){return d(Error(b),{src:"dojoLoader",info:c})},v=1,u=function(){return"_"+v++},t=function(b,c,d){return ba(b,c,d,0,t)},x=l,w=x.document,y=w&&w.createElement("DiV"),z=t.has=function(b){return g(B[b])?B[b]=B[b](x,w,y):B[b]},B=z.cache=p.hasCache;g(m)&&(m=m(l));z.add=function(b,c,d,e){(void 0===B[b]||e)&&(B[b]=c);return d&&z(b)};z.add("host-webworker","undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope);z("host-webworker")&&(d(p.hasCache,{"host-browser":0,dom:0,"dojo-dom-ready-api":0,
"dojo-sniff":0,"dojo-inject-api":1,"host-webworker":1,"dojo-guarantee-console":0}),p.loaderPatch={injectUrl:function(b,c){try{importScripts(b),c()}catch(pb){}}});for(var A in m.has)z.add(A,m.has[A],0,1);var C=0,F=[],E=0,H=k,D=k,G;t.isXdUrl=k;t.initSyncLoader=function(b,c,d){E||(E=b,H=c,D=d);return{sync:"sync",requested:1,arrived:2,nonmodule:3,executing:4,executed:5,syncExecStack:F,modules:ha,execQ:Ca,getModule:Ua,injectModule:X,setArrived:La,signal:J,finishExec:sa,execModule:Va,dojoRequirePlugin:E,
getLegacyMode:function(){return C},guardCheckComplete:$a}};var I=location.protocol,P=location.host;t.isXdUrl=function(b){return/^\./.test(b)?!1:/^\/\//.test(b)?!0:(b=b.match(/^([^\/\:]+\:)\/+([^\/]+)/))&&(b[1]!=I||P&&b[2]!=P)};z.add("dojo-force-activex-xhr",!w.addEventListener&&"file:"==window.location.protocol);z.add("native-xhr","undefined"!=typeof XMLHttpRequest);if(z("native-xhr")&&!z("dojo-force-activex-xhr"))G=function(){return new XMLHttpRequest};else{var Q=["Msxml2.XMLHTTP","Microsoft.XMLHTTP",
"Msxml2.XMLHTTP.4.0"],O;for(f=0;3>f;)try{O=Q[f++];new ActiveXObject(O);break}catch(nb){}G=function(){return new ActiveXObject(O)}}t.getXhr=G;z.add("dojo-gettext-api",1);t.getText=function(b,c,d){var e=G();e.open("GET",Ia(b),!1);e.send(null);if(200==e.status||!location.host&&!e.status)d&&d(e.responseText,c);else throw r("xhrFailed",e.status);return e.responseText};var N=z("csp-restrictions")?function(){}:new Function("return eval(arguments[0]);");t.eval=function(b,c){return N(b+"\r\n//# sourceURL\x3d"+
c)};var M={},J=t.signal=function(d,e){d=M[d];b(d&&d.slice(0),function(b){b.apply(null,c(e)?e:[e])})},K=t.on=function(b,c){var d=M[b]||(M[b]=[]);d.push(c);return{remove:function(){for(var b=0;b<d.length;b++)if(d[b]===c){d.splice(b,1);break}}}},U=[],R={},Y=[],aa={},S=t.map={},ma=[],ha={},la="",ca={},ia={},fa={},ea=0;if(!z("foreign-loader"))var pa=function(b,c){c=!1!==c;var d,e,r,g;for(d in ia)e=ia[d],(r=d.match(/^url\:(.+)/))?ca["url:"+W(r[1],b)]=e:"*now"==d?g=e:"*noref"!=d&&(r=Sa(d,b,!0),ca[r.mid]=
ca["url:"+r.url]=e);g&&g(Ta(b));c&&(ia={})};var ka=function(b){return b.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(b){return"\\"+b})},na=function(b,c){c.splice(0,c.length);for(var d in b)c.push([d,b[d],new RegExp("^"+ka(d)+"(/|$)"),d.length]);c.sort(function(b,c){return c[3]-b[3]});return c},ja=function(c,d){b(c,function(b){d.push([e(b[0])?new RegExp("^"+ka(b[0])+"$"):b[0],b[1]])})},Fa=function(b){var c=b.name;c||(c=b,b={name:c});b=d({main:"main"},b);b.location=b.location?b.location:c;b.packageMap&&
(S[c]=b.packageMap);b.main.indexOf("./")||(b.main=b.main.substring(2));aa[c]=b},Ga=[],ga=function(c,r,g){for(var u in c){"waitSeconds"==u&&(t.waitms=1E3*(c[u]||0));"cacheBust"==u&&(la=c[u]?e(c[u])?c[u]:(new Date).getTime()+"":"");if("baseUrl"==u||"combo"==u)t[u]=c[u];if("async"==u){var h=c[u];t.legacyMode=C=e(h)&&/sync|legacyAsync/.test(h)?h:h?!1:"sync";t.async=!C}c[u]!==B&&(t.rawConfig[u]=c[u],"has"!=u&&z.add("config-"+u,c[u],0,r))}t.baseUrl||(t.baseUrl="./");/\/$/.test(t.baseUrl)||(t.baseUrl+="/");
for(u in c.has)z.add(u,c.has[u],0,r);b(c.packages,Fa);for(var f in c.packagePaths)b(c.packagePaths[f],function(b){var c=f+"/"+b;e(b)&&(b={name:b});b.location=c;Fa(b)});na(d(S,c.map),ma);b(ma,function(b){b[1]=na(b[1],[]);"*"==b[0]&&(ma.star=b)});na(d(R,c.paths),Y);ja(c.aliases,U);if(!z("foreign-loader")){if(r)Ga.push({config:c.config});else for(u in c.config)r=Ua(u,g),r.config=d(r.config||{},c.config[u]);c.cache&&(pa(),ia=c.cache,pa(0,!!c.cache["*noref"]))}J("config",[c,t.rawConfig])};z("dojo-cdn");
var va=w.getElementsByTagName("script");f=0;for(var ra,qa,Ma,ya;f<va.length;)if(ra=va[f++],(Ma=ra.getAttribute("src"))&&(ya=Ma.match(/(((.*)\/)|^)dojo\.js(\W|$)/i))&&(qa=ya[3]||"",p.baseUrl=p.baseUrl||qa,ea=ra),Ma=ra.getAttribute("data-dojo-config")||ra.getAttribute("djConfig"))fa=t.eval("({ "+Ma+" })","data-dojo-config"),ea=ra;t.rawConfig={};ga(p,1);z("dojo-cdn")&&((aa.dojo.location=qa)&&(qa+="/"),aa.dijit.location=qa+"../dijit/",aa.dojox.location=qa+"../dojox/");ga(m,1);ga(fa,1);if(!z("foreign-loader"))var Ja=
function(c){$a(function(){b(c.deps,X)})},ba=function(b,g,h,f,v){var q;if(e(b)){if((q=Ua(b,f,!0))&&q.executed)return q.result;throw r("undefinedModule",b);}c(b)||(ga(b,0,f),b=g,g=h);if(c(b))if(b.length){h="require*"+u();for(var x,l=[],y=0;y<b.length;)x=b[y++],l.push(Ua(x,f));q=d(Xa("",h,0,""),{injected:2,deps:l,def:g||k,require:f?f.require:t,gc:1});ha[q.mid]=q;Ja(q);var w=Qa&&"sync"!=C;$a(function(){Va(q,w)});q.executed||Ca.push(q);ab()}else g&&g();return v},Ta=function(b){if(!b)return t;var c=b.require;
c||(c=function(d,e,r){return ba(d,e,r,b,c)},b.require=d(c,t),c.module=b,c.toUrl=function(c){return W(c,b)},c.toAbsMid=function(c){return bb(c,b)},z("dojo-undef-api")&&(c.undef=function(c){t.undef(c,b)}),c.syncLoadNls=function(c){c=Sa(c,b);var d=ha[c.mid];if(!d||!d.executed)if(Ra=ca[c.mid]||ca["url:"+c.url])Z(Ra),d=ha[c.mid];return d&&d.executed&&d.result});return c},Ca=[],Ha=[],oa={},Da=function(b){b.injected=1;oa[b.mid]=1;b.url&&(oa[b.url]=b.pack||1);cb()},La=function(b){b.injected=2;delete oa[b.mid];
b.url&&delete oa[b.url];h(oa)&&(Oa(),"xd"==C&&(C="sync"))},Ba=t.idle=function(){return!Ha.length&&h(oa)&&!Ca.length&&!Qa};var Na=function(b,c){if(c)for(var d=0;d<c.length;d++)if(c[d][2].test(b))return c[d];return 0},Ka=function(b){var c=[],d,e;for(b=b.replace(/\\/g,"/").split("/");b.length;)d=b.shift(),".."==d&&c.length&&".."!=e?(c.pop(),e=c[c.length-1]):"."!=d&&c.push(e=d);return c.join("/")},Xa=function(b,c,d,e){var r=t.isXdUrl(e);return{pid:b,mid:c,pack:d,url:e,executed:0,def:0,isXd:r,isAmd:!!(r||
aa[b]&&aa[b].isAmd)}},Za=function(c,d,e,t,u,h,f,v,k,q){var x,l,y,w;w=/^\./.test(c);if(/(^\/)|(\:)|(\.js$)/.test(c)||w&&!d)return Xa(0,c,0,c);c=Ka(w?d.mid+"/../"+c:c);if(/^\./.test(c))throw r("irrationalPath",c);q||w||!h.star||(y=Na(c,h.star[1]));!y&&d&&(y=(y=Na(d.mid,h))&&Na(c,y[1]));y&&(c=y[1]+c.substring(y[3]));d=(ya=c.match(/^([^\/]+)(\/(.+))?$/))?ya[1]:"";(x=e[d])?c=d+"/"+(l=ya[3]||x.main):d="";var C=0;b(v,function(b){var d=c.match(b[0]);d&&0<d.length&&(C=g(b[1])?c.replace(b[0],b[1]):b[1])});
if(C)return Za(C,0,e,t,u,h,f,v,k);if(e=t[c])return k?Xa(e.pid,e.mid,e.pack,e.url):t[c];t=(y=Na(c,f))?y[1]+c.substring(y[3]):d?("/"===x.location.slice(-1)?x.location.slice(0,-1):x.location)+"/"+l:z("config-tlmSiblingOfDojo")?"../"+c:c;/(^\/)|(\:)/.test(t)||(t=u+t);return Xa(d,c,x,Ka(t+".js"))},Sa=function(b,c,d){return Za(b,c,aa,ha,t.baseUrl,ma,Y,U,void 0,d)};if(!z("foreign-loader"))var Pa=function(b,c,d){return b.normalize?b.normalize(c,function(b){return bb(b,d)}):bb(c,d)},db=0,Ua=function(b,c,d){var e,
r;(e=b.match(/^(.+?)\!(.*)$/))?(r=Ua(e[1],c,d),"sync"!=C||r.executed||(X(r),2!==r.injected||r.executed||$a(function(){Va(r)}),r.executed?ta(r):Ca.unshift(r)),5!==r.executed||r.load||ta(r),r.load?(e=Pa(r,e[2],c),b=r.mid+"!"+(r.dynamic?++db+"!":"")+e):(e=e[2],b=r.mid+"!"+ ++db+"!waitingForPlugin"),b={plugin:r,mid:b,req:Ta(c),prid:e}):b=Sa(b,c);return ha[b.mid]||!d&&(ha[b.mid]=b)};var bb=t.toAbsMid=function(b,c){return Sa(b,c).mid},W=t.toUrl=function(b,c){c=Sa(b+"/x",c);var d=c.url;return Ia(0===c.pid?
b:d.substring(0,d.length-5))};if(!z("foreign-loader"))var Wa={injected:2,executed:5,def:3,result:3},hb=function(b){return ha[b]=d({mid:b},Wa)},da=hb("require"),gb=hb("exports"),ua=hb("module"),Ea={},V=0,ta=function(b){var c=b.result;b.dynamic=c.dynamic;b.normalize=c.normalize;b.load=c.load;return b},L=function(c){var e={};b(c.loadQ,function(b){var r=Pa(c,b.prid,b.req.module),g=c.dynamic?b.mid.replace(/waitingForPlugin$/,r):c.mid+"!"+r,r=d(d({},b),{mid:g,prid:r,injected:0});ha[g]&&ha[g].injected||
eb(ha[g]=r);e[b.mid]=ha[g];La(b);delete ha[b.mid]});c.loadQ=0;var r=function(b){for(var c=b.deps||[],d=0;d<c.length;d++)(b=e[c[d].mid])&&(c[d]=b)},g;for(g in ha)r(ha[g]);b(Ca,r)},sa=function(c){t.trace("loader-finish-exec",[c.mid]);c.executed=5;c.defOrder=V++;b(c.provides,function(b){b()});c.loadQ&&(ta(c),L(c));for(f=0;f<Ca.length;)Ca[f]===c?Ca.splice(f,1):f++;/^require\*/.test(c.mid)&&delete ha[c.mid]},wa=[],Va=function(b,c){if(4===b.executed)return t.trace("loader-circular-dependency",[wa.concat(b.mid).join("-\x3e")]),
!b.def||c?Ea:b.cjs&&b.cjs.exports;if(!b.executed){if(!b.def)return Ea;var d=b.mid,e=b.deps||[],u,h=[],f=0;for(b.executed=4;u=e[f++];){u=u===da?Ta(b):u===gb?b.cjs.exports:u===ua?b.cjs:Va(u,c);if(u===Ea)return b.executed=0,t.trace("loader-exec-module",["abort",d]),Ea;h.push(u)}t.trace("loader-run-factory",[b.mid]);c=b.def;var v;F.unshift(b);if(z("config-dojo-loader-catches"))try{v=g(c)?c.apply(null,h):c}catch(rb){J("error",b.result=r("factoryThrew",[b,rb]))}else v=g(c)?c.apply(null,h):c;b.result=void 0===
v&&b.cjs?b.cjs.exports:v;F.shift(b);sa(b)}return b.result},Qa=0,$a=function(b){try{Qa++,b()}catch(jb){throw jb;}finally{Qa--}Ba()&&J("idle",[])},ab=function(){Qa||$a(function(){H();for(var b,c,d=0;d<Ca.length;)b=V,c=Ca[d],Va(c),b!=V?(H(),d=0):d++})};var Ia="function"==typeof m.fixupUrl?m.fixupUrl:function(b){b+="";return b+(la?(/\?/.test(b)?"\x26":"?")+la:"")};z("dojo-undef-api")&&(t.undef=function(b,c){b=Ua(b,c);La(b);d(b,{def:0,executed:0,injected:0,node:0,load:0})});void 0===z("dojo-loader-eval-hint-url")&&
z.add("dojo-loader-eval-hint-url",1);var eb=function(b){var c=b.plugin;5!==c.executed||c.load||ta(c);var d=function(c){b.result=c;La(b);sa(b);ab()};c.load?c.load(b.prid,b.req,d):c.loadQ?c.loadQ.push(b):(c.loadQ=[b],Ca.unshift(c),X(c))},Ra=0,Ya=0,Aa=0,Z=function(b,c){z("config-stripStrict")&&(b=b.replace(/(["'])use strict\1/g,""));Aa=1;if(z("config-dojo-loader-catches"))try{b===Ra?Ra.call(null):t.eval(b,z("dojo-loader-eval-hint-url")?c.url:c.mid)}catch(pb){J("error",r("evalModuleThrew",c))}else b===
Ra?Ra.call(null):t.eval(b,z("dojo-loader-eval-hint-url")?c.url:c.mid);Aa=0},X=function(c){var e=c.mid,g=c.url;if(!(c.executed||c.injected||oa[e]||c.url&&(c.pack&&oa[c.url]===c.pack||1==oa[c.url])))if(Da(c),c.plugin)eb(c);else{var u=function(){za(c);if(2!==c.injected){if(z("dojo-enforceDefine")){J("error",r("noDefine",c));return}La(c);d(c,Wa);t.trace("loader-define-nonmodule",[c.url])}C?!F.length&&ab():ab()};if(Ra=ca[e]||ca["url:"+c.url])t.trace("loader-inject",["cache",c.mid,g]),Z(Ra,c),u();else{if(C)if(c.isXd)"sync"==
C&&(C="xd");else if(!c.isAmd||"sync"==C){var h=function(d){if("sync"==C){F.unshift(c);Z(d,c);F.shift();za(c);c.cjs||(La(c),sa(c));if(c.finish){d=e+"*finish";var r=c.finish;delete c.finish;ib(d,["dojo",("dojo/require!"+r.join(",")).replace(/\./g,"/")],function(c){b(r,function(b){c.require(b)})});Ca.unshift(Ua(d))}u()}else(d=D(c,d))?(Z(d,c),u()):(Ya=c,t.injectUrl(Ia(g),u,c),Ya=0)};t.trace("loader-inject",["xhr",c.mid,g,"sync"!=C]);if(z("config-dojo-loader-catches"))try{t.getText(g,"sync"!=C,h)}catch(qb){J("error",
r("xhrInjectFailed",[c,qb]))}else t.getText(g,"sync"!=C,h);return}t.trace("loader-inject",["script",c.mid,g]);Ya=c;t.injectUrl(Ia(g),u,c);Ya=0}}},T=function(b,c,e){t.trace("loader-define-module",[b.mid,c]);var u=b.mid;if(2===b.injected)return J("error",r("multipleDefine",b)),b;d(b,{deps:c,def:e,cjs:{id:b.mid,uri:b.url,exports:b.result={},setExports:function(c){b.cjs.exports=c},config:function(){return b.config}}});for(var h=0;c[h];h++)c[h]=Ua(c[h],b);C&&!oa[u]&&(Ja(b),Ca.push(b),ab());La(b);g(e)||
c.length||(b.result=e,sa(b));return b},za=function(c,d){for(var e=[],r,g;Ha.length;)g=Ha.shift(),d&&(g[0]=d.shift()),r=g[0]&&Ua(g[0])||c,e.push([r,g[1],g[2]]);pa(c);b(e,function(b){Ja(T.apply(null,b))})},xa=0,Oa=k,cb=k,Oa=function(){xa&&clearTimeout(xa);xa=0},cb=function(){Oa();t.waitms&&(xa=x.setTimeout(function(){Oa();J("error",r("timeout",oa))},t.waitms))};z.add("ie-event-behavior",w.attachEvent&&"undefined"===typeof Windows&&("undefined"===typeof opera||"[object Opera]"!=opera.toString()));var kb=
function(b,c,d,e){if(z("ie-event-behavior"))return b.attachEvent(d,e),function(){b.detachEvent(d,e)};b.addEventListener(c,e,!1);return function(){b.removeEventListener(c,e,!1)}},mb=kb(window,"load","onload",function(){t.pageLoaded=1;try{"complete"!=w.readyState&&(w.readyState="complete")}catch(nb){}mb()}),va=w.getElementsByTagName("script");for(f=0;!ea;)/^dojo/.test((ra=va[f++])&&ra.type)||(ea=ra);t.injectUrl=function(b,c,d){d=d.node=w.createElement("script");var e=kb(d,"load","onreadystatechange",
function(b){b=b||window.event;var d=b.target||b.srcElement;if("load"===b.type||/complete|loaded/.test(d.readyState))e(),g(),c&&c()}),g=kb(d,"error","onerror",function(c){e();g();J("error",r("scriptError: "+b,[b,c]))});d.type="text/javascript";d.charset="utf-8";d.src=b;ea&&ea.parentNode?ea.parentNode.insertBefore(d,ea):(w.head||w.getElementsByTagName("head")[0]||w.body).appendChild(d);return d};t.log=function(){try{for(var b=0;b<arguments.length;b++);}catch(jb){}};t.trace=k;if(z("foreign-loader"))ib=k;else{var ib=function(b,c,d){var u=arguments.length,h=["require","exports","module"],
f=[0,b,c];1==u?f=[0,g(b)?h:[],b]:2==u&&e(b)?f=[b,g(c)?h:[],c]:3==u&&(f=[b,c,d]);t.trace("loader-define",f.slice(0,2));if((u=f[0]&&Ua(f[0]))&&!oa[u.mid])Ja(T(u,f[1],f[2]));else if(!z("ie-event-behavior")||Aa)Ha.push(f);else{u=u||Ya;if(!u)for(b in oa)if((h=ha[b])&&h.node&&"interactive"===h.node.readyState){u=h;break}u?(pa(u),Ja(T(u,f[1],f[2]))):J("error",r("ieDefineFailed",f[0]));ab()}};ib.amd={vendor:"dojotoolkit.org"}}d(d(t,p.loaderPatch),m.loaderPatch);K("error",function(b){try{if(b instanceof Error)for(var c in b);
}catch(pb){}});d(t,{uid:u,cache:ca,packs:aa});if(x.define)J("error",r("defineAlreadyDefined",0));else if(x.define=ib,x.require=t,!z("foreign-loader")){b(Ga,function(b){ga(b)});var lb=fa.deps||m.deps||p.deps,fb=fa.callback||m.callback||p.callback;t.boot=lb||fb?[lb||[],fb]:0}})(function(m){return m.dojoConfig||m.djConfig||m.require||{}},{async:0,baseUrl:"https://[HOSTNAME_AND_PATH_TO_JSAPI]dojo",hasCache:{"config-selectorEngine":"acme","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-has-api":1,"dojo-loader":1,
"dojo-undef-api":0,dom:1,"extend-esri":1,"host-browser":1},packages:[{location:"../dijit",name:"dijit"},{location:"../dojox",name:"dojox"},{location:"../put-selector",main:"put",name:"put-selector"},{location:"../xstyle",name:"xstyle"},{location:"../dgrid",main:"OnDemandGrid",name:"dgrid"},{location:"../dgrid1",main:"OnDemandGrid",name:"dgrid1"},{location:"../dstore",main:"Store",name:"dstore"},{location:"../moment",main:"moment",name:"moment"},{location:"../esri",name:"esri"},{location:".",name:"dojo"}]});
require({cache:{"dojo/loadInit":function(){define(["./_base/loader"],function(m){return{dynamic:0,normalize:function(m){return m},load:m.loadInit}})},"dojo/_base/loader":function(){define("./kernel ../has require module ../json ./lang ./array".split(" "),function(m,p,f,l,k,h,q){var g=function(b){return b.replace(/\./g,"/")},e=/\/\/>>built/,c=[],b=[],d=function(d,e,g){c.push(g);q.forEach(d.split(","),function(c){c=G(c,e.module);b.push(c);I(c)});r()},r=function(){var b,d;for(d in H)if(b=H[d],void 0===
b.noReqPluginCheck&&(b.noReqPluginCheck=/loadInit\!/.test(d)||/require\!/.test(d)?1:0),!b.executed&&!b.noReqPluginCheck&&b.injected==z)return;J(function(){var b=c;c=[];q.forEach(b,function(b){b(1)})})},v=/\/\/.*|\/\*[\s\S]*?\*\/|("(?:\\.|[^"])*"|'(?:\\.|[^'])*'|`(?:\\.|[^`])*`)/mg,u=/(^|\s)dojo\.(loadInit|require|provide|requireLocalization|requireIf|requireAfterIf|platformRequire)\s*\(/mg,t=/(^|\s)(require|define)\s*\(/m,x=function(b,c){var d,e,r,g=[],h=[];d=[];for(c=c||b.replace(v,"$1");d=u.exec(c);){e=
u.lastIndex;r=e-d[0].length;var f=c,k=/\(|\)/g,q=1,x=void 0;for(k.lastIndex=e;(x=k.exec(f))&&(q=")"==x[0]?q-1:q+1,0!=q););if(0!=q)throw"unmatched paren around character "+k.lastIndex+" in: "+f;e=[m.trim(f.substring(r,k.lastIndex))+";\n",k.lastIndex];"loadInit"==d[2]?g.push(e[0]):h.push(e[0]);u.lastIndex=e[1]}d=g.concat(h);return d.length||!t.test(c)?[b.replace(/(^|\s)dojo\.loadInit\s*\(/g,"\n0 \x26\x26 dojo.loadInit("),d.join(""),d]:0},w=f.initSyncLoader(d,r,function(b,c){var d,r=[],g=[];if(e.test(c)||
!(d=x(c)))return 0;c=b.mid+"-*loadInit";for(var t in G("dojo",b).result.scopeMap)r.push(t),g.push('"'+t+'"');return"// xdomain rewrite of "+b.mid+"\ndefine('"+c+"',{\n\tnames:"+k.stringify(r)+",\n\tdef:function("+r.join(",")+"){"+d[1]+"}});\n\ndefine("+k.stringify(r.concat(["dojo/loadInit!"+c]))+", function("+r.join(",")+"){\n"+d[0]+"});"}),y=w.sync,z=w.requested,B=w.arrived,A=w.nonmodule,C=w.executing,F=w.executed,E=w.syncExecStack,H=w.modules,D=w.execQ,G=w.getModule,I=w.injectModule,P=w.setArrived,
Q=w.signal,O=w.finishExec,N=w.execModule,M=w.getLegacyMode,J=w.guardCheckComplete,d=w.dojoRequirePlugin;m.provide=function(b){var c=E[0],d=h.mixin(G(g(b),f.module),{executed:C,result:h.getObject(b,!0)});P(d);c&&(c.provides||(c.provides=[])).push(function(){d.result=h.getObject(b);delete d.provides;d.executed!==F&&O(d)});return d.result};p.add("config-publishRequireResult",1,0,0);m.require=function(b,c){c=function(b,c){var d=G(g(b),f.module);if(E.length&&E[0].finish)E[0].finish.push(b);else{if(d.executed)return d.result;
c&&(d.result=A);c=M();I(d);c=M();d.executed!==F&&d.injected===B&&w.guardCheckComplete(function(){N(d)});if(d.executed)return d.result;c==y?d.cjs?D.unshift(d):E.length&&(E[0].finish=[b]):D.push(d)}}(b,c);p("config-publishRequireResult")&&!h.exists(b)&&void 0!==c&&h.setObject(b,c);return c};m.loadInit=function(b){b()};m.registerModulePath=function(b,c){var d={};d[b.replace(/\./g,"/")]=c;f({paths:d})};m.platformRequire=function(b){b=(b.common||[]).concat(b[m._name]||b["default"]||[]);for(var c;b.length;)h.isArray(c=
b.shift())?m.require.apply(m,c):m.require(c)};m.requireIf=m.requireAfterIf=function(b,c,d){b&&m.require(c,d)};m.requireLocalization=function(b,c,d){f(["../i18n"],function(e){e.getLocalization(b,c,d)})};return{extractLegacyApiApplications:x,require:d,loadInit:function(b,c,e){c([b],function(b){c(b.names,function(){for(var r="",t=[],u=0;u<arguments.length;u++)r+="var "+b.names[u]+"\x3d arguments["+u+"]; ",t.push(arguments[u]);eval(r);var h=c.module,f=[],v,r={provide:function(b){b=g(b);b=G(b,h);b!==h&&
P(b)},require:function(b,c){b=g(b);c&&(G(b,h).result=A);f.push(b)},requireLocalization:function(b,c,d){v||(v=["dojo/i18n"]);d=(d||m.locale).toLowerCase();b=g(b)+"/nls/"+(/root/i.test(d)?"":d+"/")+g(c);G(b,h).isXd&&v.push("dojo/i18n!"+b)},loadInit:function(b){b()}},u={},k;try{for(k in r)u[k]=m[k],m[k]=r[k];b.def.apply(null,t)}catch(fa){Q("error",[{src:l.id,id:"failedDojoLoadInit"},fa])}finally{for(k in r)m[k]=u[k]}v&&(f=f.concat(v));f.length?d(f.join(","),c,e):e()})})}}})},"dojo/_base/kernel":function(){define(["../global",
"../has","./config","require","module"],function(m,p,f,l,k){var h,q={},g={},e={config:f,global:m,dijit:q,dojox:g},q={dojo:["dojo",e],dijit:["dijit",q],dojox:["dojox",g]};k=l.map&&l.map[k.id.match(/[^\/]+/)[0]];for(h in k)q[h]?q[h][0]=k[h]:q[h]=[k[h],{}];for(h in q)k=q[h],k[1]._scopeName=k[0],f.noGlobals||(m[k[0]]=k[1]);e.scopeMap=q;e.baseUrl=e.config.baseUrl=l.baseUrl;e.isAsync=l.async;e.locale=f.locale;m="$Rev: d6e8ff38 $".match(/[0-9a-f]{7,}/);e.version={major:1,minor:14,patch:2,flag:"",revision:m?
m[0]:NaN,toString:function(){var b=e.version;return b.major+"."+b.minor+"."+b.patch+b.flag+" ("+b.revision+")"}};p("csp-restrictions")||Function("d","d.eval \x3d function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(e);e.exit=function(){};p("host-webworker");p.add("console-as-object",function(){return Function.prototype.bind&&console&&"object"===typeof console.log});"undefined"!=typeof console||(console={});k="assert count debug dir dirxml error group groupEnd info profile profileEnd time timeEnd trace warn log".split(" ");
var c;for(m=0;c=k[m++];)console[c]?p("console-as-object")&&(console[c]=Function.prototype.bind.call(console[c],console)):function(){var b=c+"";console[b]="log"in console?function(){Array.prototype.slice.call(arguments).unshift(b+":")}:function(){};console[b]._fake=!0}();p.add("dojo-debug-messages",!!f.isDebug);e.deprecated=e.experimental=function(){};p("dojo-debug-messages")&&(e.deprecated=function(b,c,e){},e.experimental=function(b,c){});if(f.modulePaths){e.deprecated("dojo.modulePaths","use paths configuration");
p={};for(h in f.modulePaths)p[h.replace(/\./g,"/")]=f.modulePaths[h];l({paths:p})}e.moduleUrl=function(b,c){e.deprecated("dojo.moduleUrl()","use require.toUrl","2.0");var d=null;b&&(d=l.toUrl(b.replace(/\./g,"/")+(c?"/"+c:"")+"/*.*").replace(/\/\*\.\*/,"")+(c?"":"/"));return d};e._hasResource={};return e})},"dojo/global":function(){define(function(){return"undefined"!==typeof global&&"function"!==typeof global?global:"undefined"!==typeof window?window:"undefined"!==typeof self?self:this})},"dojo/has":function(){define(["./global",
"require","module"],function(m,p,f){var l=p.has||function(){};if(!l("dojo-has-api")){var k="undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location==location&&window.document==document&&document,h=k&&k.createElement("DiV"),q=f.config&&f.config()||{},l=function(g){return"function"==typeof q[g]?q[g]=q[g](m,k,h):q[g]};l.cache=q;l.add=function(g,e,c,b){("undefined"==typeof q[g]||b)&&(q[g]=e);return c&&l(g)}}l.add("dom-addeventlistener",!!document.addEventListener);
l.add("touch","ontouchstart"in document||"onpointerdown"in document&&0<navigator.maxTouchPoints||window.navigator.msMaxTouchPoints);l.add("touch-events","ontouchstart"in document);l.add("pointer-events","pointerEnabled"in window.navigator?window.navigator.pointerEnabled:"PointerEvent"in window);l.add("MSPointer",window.navigator.msPointerEnabled);l.add("touch-action",l("touch")&&l("pointer-events"));l.add("device-width",screen.availWidth||innerWidth);p=document.createElement("form");l.add("dom-attributes-explicit",
0==p.attributes.length);l.add("dom-attributes-specified-flag",0<p.attributes.length&&40>p.attributes.length);l.clearElement=function(g){g.innerHTML="";return g};l.normalize=function(g,e){var c=g.match(/[\?:]|[^:\?]*/g),b=0,d=function(e){var r=c[b++];if(":"==r)return 0;if("?"==c[b++]){if(!e&&l(r))return d();d(!0);return d(e)}return r||0};return(g=d())&&e(g)};l.load=function(g,e,c){g?e([g],c):c()};return l})},"dojo/_base/config":function(){define(["../global","../has","require"],function(m,p,f){m={};
f=f.rawConfig;for(var l in f)m[l]=f[l];!m.locale&&"undefined"!=typeof navigator&&(l=navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language||navigator.userLanguage)&&(m.locale=l.toLowerCase());return m})},"dojo/json":function(){define(["./has"],function(m){var p="undefined"!=typeof JSON;m.add("json-parse",p);m.add("json-stringify",p&&'{"a":1}'==JSON.stringify({a:0},function(f,k){return k||1}));if(m("json-stringify"))return JSON;var f=function(f){return('"'+f.replace(/(["\\])/g,
"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")};return{parse:m("json-parse")?JSON.parse:function(f,k){if(k&&!/^([\s\[\{]*(?:"(?:\\.|[^"])*"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(f))throw new SyntaxError("Invalid characters in JSON");return eval("("+f+")")},stringify:function(l,k,h){function q(e,c,b){k&&(e=k(b,e));var d;d=typeof e;if("number"==d)return isFinite(e)?e+"":"null";if("boolean"==
d)return e+"";if(null===e)return"null";if("string"==typeof e)return f(e);if("function"==d||"undefined"==d)return g;if("function"==typeof e.toJSON)return q(e.toJSON(b),c,b);if(e instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(b,c,d){b=e["getUTC"+c]()+(d?1:0);return 10>b?"0"+b:b});if(e.valueOf()!==e)return q(e.valueOf(),c,b);var r=h?c+h:"",v=h?" ":"",u=h?"\n":"";if(e instanceof Array){var v=e.length,t=[];for(b=0;b<v;b++)d=q(e[b],r,
b),"string"!=typeof d&&(d="null"),t.push(u+r+d);return"["+t.join(",")+u+c+"]"}t=[];for(b in e){var x;if(e.hasOwnProperty(b)){if("number"==typeof b)x='"'+b+'"';else if("string"==typeof b)x=f(b);else continue;d=q(e[b],r,b);"string"==typeof d&&t.push(u+r+x+":"+v+d)}}return"{"+t.join(",")+u+c+"}"}var g;"string"==typeof k&&(h=k,k=null);return q(l,"","")}}})},"dojo/_base/lang":function(){define(["./kernel","../has","../sniff"],function(m,p){p.add("bug-for-in-skips-shadowed",function(){for(var c in{toString:1})return 0;
return 1});var f=p("bug-for-in-skips-shadowed")?"hasOwnProperty valueOf isPrototypeOf propertyIsEnumerable toLocaleString toString constructor".split(" "):[],l=f.length,k=function(c,b,d){d||(d=c[0]&&m.scopeMap[c[0]]?m.scopeMap[c.shift()][1]:m.global);try{for(var e=0;e<c.length;e++){var g=c[e];if(!(g in d))if(b)d[g]={};else return;d=d[g]}return d}catch(u){}},h=Object.prototype.toString,q=function(c,b,d){return(d||[]).concat(Array.prototype.slice.call(c,b||0))},g=/\{([^\}]+)\}/g,e={_extraNames:f,_mixin:function(c,
b,d){var e,g,u,t={};for(e in b)g=b[e],e in c&&(c[e]===g||e in t&&t[e]===g)||(c[e]=d?d(g):g);if(p("bug-for-in-skips-shadowed")&&b)for(u=0;u<l;++u)e=f[u],g=b[e],e in c&&(c[e]===g||e in t&&t[e]===g)||(c[e]=d?d(g):g);return c},mixin:function(c,b){c||(c={});for(var d=1,r=arguments.length;d<r;d++)e._mixin(c,arguments[d]);return c},setObject:function(c,b,d){var e=c.split(".");c=e.pop();return(d=k(e,!0,d))&&c?d[c]=b:void 0},getObject:function(c,b,d){return c?k(c.split("."),b,d):d},exists:function(c,b){return void 0!==
e.getObject(c,!1,b)},isString:function(c){return"string"==typeof c||c instanceof String},isArray:Array.isArray||function(c){return"[object Array]"==h.call(c)},isFunction:function(c){return"[object Function]"===h.call(c)},isObject:function(c){return void 0!==c&&(null===c||"object"==typeof c||e.isArray(c)||e.isFunction(c))},isArrayLike:function(c){return!!c&&!e.isString(c)&&!e.isFunction(c)&&!(c.tagName&&"form"==c.tagName.toLowerCase())&&(e.isArray(c)||isFinite(c.length))},isAlien:function(c){return c&&
!e.isFunction(c)&&/\{\s*\[native code\]\s*\}/.test(String(c))},extend:function(c,b){for(var d=1,r=arguments.length;d<r;d++)e._mixin(c.prototype,arguments[d]);return c},_hitchArgs:function(c,b){var d=e._toArray(arguments,2),r=e.isString(b);return function(){var g=e._toArray(arguments),u=r?(c||m.global)[b]:b;return u&&u.apply(c||this,d.concat(g))}},hitch:function(c,b){if(2<arguments.length)return e._hitchArgs.apply(m,arguments);b||(b=c,c=null);if(e.isString(b)){c=c||m.global;if(!c[b])throw['lang.hitch: scope["',
b,'"] is null (scope\x3d"',c,'")'].join("");return function(){return c[b].apply(c,arguments||[])}}return c?function(){return b.apply(c,arguments||[])}:b},delegate:function(){function c(){}return function(b,d){c.prototype=b;b=new c;c.prototype=null;d&&e._mixin(b,d);return b}}(),_toArray:p("ie")?function(){function c(b,c,e){e=e||[];for(c=c||0;c<b.length;c++)e.push(b[c]);return e}return function(b){return(b.item?c:q).apply(this,arguments)}}():q,partial:function(c){return e.hitch.apply(m,[null].concat(e._toArray(arguments)))},
clone:function(c){if(!c||"object"!=typeof c||e.isFunction(c))return c;if(c.nodeType&&"cloneNode"in c)return c.cloneNode(!0);if(c instanceof Date)return new Date(c.getTime());if(c instanceof RegExp)return new RegExp(c);var b,d,r;if(e.isArray(c))for(b=[],d=0,r=c.length;d<r;++d)d in c&&(b[d]=e.clone(c[d]));else b=c.constructor?new c.constructor:{};return e._mixin(b,c,e.clone)},trim:String.prototype.trim?function(c){return c.trim()}:function(c){return c.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(c,
b,d){return c.replace(d||g,e.isFunction(b)?b:function(c,d){return e.getObject(d,!1,b)})}};e.mixin(m,e);return e})},"dojo/sniff":function(){define(["./has"],function(m){var p=navigator,f=p.userAgent,p=p.appVersion,l=parseFloat(p);m.add("air",0<=f.indexOf("AdobeAIR"));m.add("wp",parseFloat(f.split("Windows Phone")[1])||void 0);m.add("msapp",parseFloat(f.split("MSAppHost/")[1])||void 0);m.add("khtml",0<=p.indexOf("Konqueror")?l:void 0);m.add("edge",parseFloat(f.split("Edge/")[1])||void 0);m.add("opr",
parseFloat(f.split("OPR/")[1])||void 0);m.add("webkit",!m("wp")&&!m("edge")&&parseFloat(f.split("WebKit/")[1])||void 0);m.add("chrome",!m("edge")&&!m("opr")&&parseFloat(f.split("Chrome/")[1])||void 0);m.add("android",!m("wp")&&parseFloat(f.split("Android ")[1])||void 0);m.add("safari",!(0<=p.indexOf("Safari"))||m("wp")||m("chrome")||m("android")||m("edge")||m("opr")?void 0:parseFloat(p.split("Version/")[1]));m.add("mac",0<=p.indexOf("Macintosh"));m.add("quirks","BackCompat"==document.compatMode);
if(!m("wp")&&f.match(/(iPhone|iPod|iPad)/)){var k=RegExp.$1.replace(/P/,"p"),h=f.match(/OS ([\d_]+)/)?RegExp.$1:"1",h=parseFloat(h.replace(/_/,".").replace(/_/g,""));m.add(k,h);m.add("ios",h)}m.add("bb",(0<=f.indexOf("BlackBerry")||0<=f.indexOf("BB10"))&&parseFloat(f.split("Version/")[1])||void 0);m.add("trident",parseFloat(p.split("Trident/")[1])||void 0);m.add("svg","undefined"!==typeof SVGAngle);m("webkit")||(0<=f.indexOf("Opera")&&m.add("opera",9.8<=l?parseFloat(f.split("Version/")[1])||l:l),
!(0<=f.indexOf("Gecko"))||m("wp")||m("khtml")||m("trident")||m("edge")||m.add("mozilla",l),m("mozilla")&&m.add("ff",parseFloat(f.split("Firefox/")[1]||f.split("Minefield/")[1])||void 0),document.all&&!m("opera")&&(f=parseFloat(p.split("MSIE ")[1])||void 0,(p=document.documentMode)&&5!=p&&Math.floor(f)!=p&&(f=p),m.add("ie",f)),m.add("wii","undefined"!=typeof opera&&opera.wiiremote));return m})},"dojo/_base/array":function(){define(["./kernel","../has","./lang"],function(m,p,f){function l(c){return q[c]=
new Function("item","index","array",c)}function k(c){var b=!c;return function(d,e,g){var r=0,t=d&&d.length||0,h;t&&"string"==typeof d&&(d=d.split(""));"string"==typeof e&&(e=q[e]||l(e));if(g)for(;r<t;++r){if(h=!e.call(g,d[r],r,d),c^h)return!h}else for(;r<t;++r)if(h=!e(d[r],r,d),c^h)return!h;return b}}function h(c){var b=1,d=0,r=0;c||(b=d=r=-1);return function(h,u,t,f){if(f&&0<b)return e.lastIndexOf(h,u,t);f=h&&h.length||0;var v=c?f+r:d;t===g?t=c?d:f+r:0>t?(t=f+t,0>t&&(t=d)):t=t>=f?f+r:t;for(f&&"string"==
typeof h&&(h=h.split(""));t!=v;t+=b)if(h[t]==u)return t;return-1}}var q={},g,e={every:k(!1),some:k(!0),indexOf:h(!0),lastIndexOf:h(!1),forEach:function(c,b,d){var e=0,g=c&&c.length||0;g&&"string"==typeof c&&(c=c.split(""));"string"==typeof b&&(b=q[b]||l(b));if(d)for(;e<g;++e)b.call(d,c[e],e,c);else for(;e<g;++e)b(c[e],e,c)},map:function(c,b,d,e){var r=0,g=c&&c.length||0;e=new (e||Array)(g);g&&"string"==typeof c&&(c=c.split(""));"string"==typeof b&&(b=q[b]||l(b));if(d)for(;r<g;++r)e[r]=b.call(d,c[r],
r,c);else for(;r<g;++r)e[r]=b(c[r],r,c);return e},filter:function(c,b,d){var e=0,g=c&&c.length||0,u=[],t;g&&"string"==typeof c&&(c=c.split(""));"string"==typeof b&&(b=q[b]||l(b));if(d)for(;e<g;++e)t=c[e],b.call(d,t,e,c)&&u.push(t);else for(;e<g;++e)t=c[e],b(t,e,c)&&u.push(t);return u},clearCache:function(){q={}}};f.mixin(m,e);return e})},"dojo/require":function(){define(["./_base/loader"],function(m){return{dynamic:0,normalize:function(m){return m},load:m.require}})},"dojo/text":function(){define(["./_base/kernel",
"require","./has","./request"],function(m,p,f,l){var k;k=function(c,b,d){l(c,{sync:!!b,headers:{"X-Requested-With":null}}).then(d)};var h={},q=function(c){if(c){c=c.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var b=c.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);b&&(c=b[1])}else c="";return c},g={},e={};m.cache=function(c,b,d){var e;"string"==typeof c?/\//.test(c)?(e=c,d=b):e=p.toUrl(c.replace(/\./g,"/")+(b?"/"+b:"")):(e=c+"",d=b);c=void 0!=d&&"string"!=typeof d?d.value:
d;d=d&&d.sanitize;if("string"==typeof c)return h[e]=c,d?q(c):c;if(null===c)return delete h[e],null;e in h||k(e,!0,function(b){h[e]=b});return d?q(h[e]):h[e]};return{dynamic:!0,normalize:function(c,b){c=c.split("!");var d=c[0];return(/^\./.test(d)?b(d):d)+(c[1]?"!"+c[1]:"")},load:function(c,b,d){c=c.split("!");var r=1<c.length,f=c[0],u=b.toUrl(c[0]);c="url:"+u;var t=g,x=function(b){d(r?q(b):b)};f in h?t=h[f]:b.cache&&c in b.cache?t=b.cache[c]:u in h&&(t=h[u]);if(t===g)if(e[u])e[u].push(x);else{var l=
e[u]=[x];k(u,!b.async,function(b){h[f]=h[u]=b;for(var c=0;c<l.length;)l[c++](b);delete e[u]})}else x(t)}}})},"dojo/request":function(){define(["./request/default!"],function(m){return m})},"dojo/request/default":function(){define(["exports","require","../has"],function(m,p,f){var l=f("config-requestProvider");l||(l="./xhr");m.getPlatformDefaultId=function(){return"./xhr"};m.load=function(f,h,q,g){p(["platform"==f?"./xhr":l],function(e){q(e)})}})},"dojo/i18n":function(){define("./_base/kernel require ./has ./_base/array ./_base/config ./_base/lang ./_base/xhr ./json module".split(" "),
function(m,p,f,l,k,h,q,g,e){f.add("dojo-preload-i18n-Api",1);var c=m.i18n={},b=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,d=function(b,c,d,e){var r=[d+e];c=c.split("-");for(var g="",t=0;t<c.length;t++)if(g+=(g?"-":"")+c[t],!b||b[g])r.push(d+g+"/"+e),r.specificity=g;return r},r={},v=function(b,c,d){d=d?d.toLowerCase():m.locale;b=b.replace(/\./g,"/");c=c.replace(/\./g,"/");return/root/i.test(d)?b+"/nls/"+c:b+"/nls/"+d+"/"+c},u=m.getL10nName=function(b,c,d){return b=e.id+"!"+v(b,c,d)},t=function(b,c,
e,g,t,u){b([c],function(f){var k=h.clone(f.root||f.ROOT),v=d(!f._v1x&&f,t,e,g);b(v,function(){for(var b=1;b<v.length;b++)k=h.mixin(h.clone(k),arguments[b]);r[c+"/"+t]=k;k.$locale=v.specificity;u()})})},x=function(b){var c=k.extraLocale||[],c=h.isArray(c)?c:[c];c.push(b);return c},w=function(c,d,e){var u=b.exec(c),k=u[1]+"/",v=u[5]||u[4],q=k+v,y=(u=u[5]&&u[4])||m.locale||"",w=q+"/"+y,u=u?[y]:x(y),p=u.length,F=function(){--p||e(h.delegate(r[w]))},y=c.split("*"),G="preload"==y[1];if(f("dojo-preload-i18n-Api")){if(G&&
(r[c]||(r[c]=1,A(y[2],g.parse(y[3]),1,d)),e(1)),(y=G)||(z&&B.push([c,d,e]),y=z&&!r[w]),y)return}else if(G){e(1);return}l.forEach(u,function(b){var c=q+"/"+b;f("dojo-preload-i18n-Api")&&C(c);r[c]?F():t(d,q,k,v,b,F)})};f("dojo-preload-i18n-Api");var y=c.normalizeLocale=function(b){b=b?b.toLowerCase():m.locale;return"root"==b?"ROOT":b},z=0,B=[],A=c._preloadLocalizations=function(b,c,d,e){function g(b,c){e.isXdUrl(p.toUrl(b+".js"))||d?e([b],c):D([b],c,e)}function t(b,c){for(b=b.split("-");b.length;){if(c(b.join("-")))return;
b.pop()}c("ROOT")}function u(){for(--z;!z&&B.length;)w.apply(null,B.shift())}function f(d){d=y(d);t(d,function(f){if(0<=l.indexOf(c,f)){var k=b.replace(/\./g,"/")+"_"+f;z++;g(k,function(b){for(var c in b){var g=b[c],k=c.match(/(.+)\/([^\/]+)$/),v;if(k&&(v=k[2],k=k[1]+"/",g._localized)){var q;if("ROOT"===f){var x=q=g._localized;delete g._localized;x.root=g;r[p.toAbsMid(c)]=x}else q=g._localized,r[p.toAbsMid(k+v+"/"+f)]=g;f!==d&&function(b,c,g,f){var k=[],v=[];t(d,function(d){f[d]&&(k.push(p.toAbsMid(b+
d+"/"+c)),v.push(p.toAbsMid(b+c+"/"+d)))});k.length?(z++,e(k,function(){for(var e=k.length-1;0<=e;e--)g=h.mixin(h.clone(g),arguments[e]),r[v[e]]=g;r[p.toAbsMid(b+c+"/"+d)]=h.clone(g);u()})):r[p.toAbsMid(b+c+"/"+d)]=g}(k,v,g,q)}}u()});return!0}return!1})}e=e||p;f();l.forEach(m.config.extraLocale,f)},C=function(){},F={},E={},H,D=function(b,c,d){var e=[];l.forEach(b,function(b){function c(c){H||(H=new Function("__bundle","__checkForLegacyModules","__mid","__amdValue","var define \x3d function(mid, factory){define.called \x3d 1; __amdValue.result \x3d factory || mid;},\t   require \x3d function(){define.called \x3d 1;};try{define.called \x3d 0;eval(__bundle);if(define.called\x3d\x3d1)return __amdValue;if((__checkForLegacyModules \x3d __checkForLegacyModules(__mid)))return __checkForLegacyModules;}catch(e){}try{return eval('('+__bundle+')');}catch(e){return e;}"));
c=H(c,C,b,F);c===F?e.push(r[g]=F.result):(c instanceof Error&&(c={}),e.push(r[g]=/nls\/[^\/]+\/[^\/]+$/.test(g)?c:{root:c,_v1x:1}))}var g=d.toUrl(b+".js");if(r[g])e.push(r[g]);else{var t=d.syncLoadNls(b);t||(t=C(b.replace(/nls\/([^\/]*)\/([^\/]*)$/,"nls/$2/$1")));if(t)e.push(t);else if(q)q.get({url:g,sync:!0,load:c,error:function(){e.push(r[g]={})}});else try{d.getText(g,!0,c)}catch(K){e.push(r[g]={})}}});c&&c.apply(null,e)},C=function(b){for(var c,d=b.split("/"),e=m.global[d[0]],g=1;e&&g<d.length-
1;e=e[d[g++]]);e&&((c=e[d[g]])||(c=e[d[g].replace(/-/g,"_")]),c&&(r[b]=c));return c};c.getLocalization=function(b,c,d){var e,g=v(b,c,d);if(E[g])return E[g];w(g,p.isXdUrl(p.toUrl(g+".js"))?p:function(b,c){D(b,c,p)},function(b){e=E[g]=b});return e};return h.mixin(c,{dynamic:!0,normalize:function(b,c){return/^\./.test(b)?c(b):b},load:w,cache:r,getL10nName:u})})},"dojo/_base/xhr":function(){define("./kernel ./sniff require ../io-query ../dom ../dom-form ./Deferred ./config ./json ./lang ./array ../on ../aspect ../request/watch ../request/xhr ../request/util".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t){m._xhrObj=u._create;var x=m.config;m.objectToQuery=l.objectToQuery;m.queryToObject=l.queryToObject;m.fieldToObject=h.fieldToObject;m.formToObject=h.toObject;m.formToQuery=h.toQuery;m.formToJson=h.toJson;m._blockAsync=!1;p.add("native-xhr2-blob",function(){if(p("native-xhr2")){var b=new XMLHttpRequest;b.open("GET","/",!0);b.responseType="blob";var c=b.responseType;b.abort();return"blob"===c}});var w=m._contentHandlers=m.contentHandlers={text:function(b){return b.responseText},
json:function(b){return e.fromJson(b.responseText||null)},"json-comment-filtered":function(b){b=b.responseText;var c=b.indexOf("/*"),d=b.lastIndexOf("*/");if(-1==c||-1==d)throw Error("JSON was not comment filtered");return e.fromJson(b.substring(c+2,d))},javascript:function(b){return m.eval(b.responseText)},xml:function(c){var d=c.responseXML;d&&p("dom-qsa2.1")&&!d.querySelectorAll&&p("dom-parser")&&(d=(new DOMParser).parseFromString(c.responseText,"application/xml"));if(p("ie")&&(!d||!d.documentElement)){var e=
function(b){return"MSXML"+b+".DOMDocument"},e=["Microsoft.XMLDOM",e(6),e(4),e(3),e(2)];b.some(e,function(b){try{var e=new ActiveXObject(b);e.async=!1;e.loadXML(c.responseText);d=e}catch(G){return!1}return!0})}return d},"json-comment-optional":function(b){return b.responseText&&/^[^{\[]*\/\*/.test(b.responseText)?w["json-comment-filtered"](b):w.json(b)}};p("native-xhr2")&&(w.arraybuffer=w.blob=w.document=function(b,c){return"blob"!==c.args.handleAs||p("native-xhr2-blob")?b.response:new Blob([b.response],
{type:b.getResponseHeader("Content-Type")})});m._ioSetArgs=function(b,d,e,g){var r={args:b,url:b.url},t=null;if(b.form){var t=k.byId(b.form),u=t.getAttributeNode("action");r.url=r.url||(u?u.value:m.doc?m.doc.URL:null);t=h.toObject(t)}u={};t&&c.mixin(u,t);b.content&&c.mixin(u,b.content);b.preventCache&&(u["dojo.preventCache"]=(new Date).valueOf());r.query=l.objectToQuery(u);r.handleAs=b.handleAs||"text";var f=new q(function(b){b.canceled=!0;d&&d(b);var c=b.ioArgs.error;c||(c=Error("request cancelled"),
c.dojoType="cancel",b.ioArgs.error=c);return c});f.addCallback(e);var v=b.load;v&&c.isFunction(v)&&f.addCallback(function(c){return v.call(b,c,r)});var y=b.error;y&&c.isFunction(y)&&f.addErrback(function(c){return y.call(b,c,r)});var w=b.handle;w&&c.isFunction(w)&&f.addBoth(function(c){return w.call(b,c,r)});f.addErrback(function(b){return g(b,f)});x.ioPublish&&m.publish&&!1!==r.args.ioPublish&&(f.addCallbacks(function(b){m.publish("/dojo/io/load",[f,b]);return b},function(b){m.publish("/dojo/io/error",
[f,b]);return b}),f.addBoth(function(b){m.publish("/dojo/io/done",[f,b]);return b}));f.ioArgs=r;return f};var y=function(b){b=w[b.ioArgs.handleAs](b.ioArgs.xhr,b.ioArgs);return void 0===b?null:b},z=function(b,c){return b},B=function(b){0>=A&&(A=0,x.ioPublish&&m.publish&&(!b||b&&!1!==b.ioArgs.args.ioPublish)&&m.publish("/dojo/io/stop"))},A=0;r.after(v,"_onAction",function(){--A});r.after(v,"_onInFlight",B);m._ioCancelAll=v.cancelAll;m._ioNotifyStart=function(b){x.ioPublish&&m.publish&&!1!==b.ioArgs.args.ioPublish&&
(A||m.publish("/dojo/io/start"),A+=1,m.publish("/dojo/io/send",[b]))};m._ioWatch=function(b,d,e,g){b.ioArgs.options=b.ioArgs.args;c.mixin(b,{response:b.ioArgs,isValid:function(c){return d(b)},isReady:function(c){return e(b)},handleResponse:function(c){return g(b)}});v(b);B(b)};m._ioAddQueryToUrl=function(b){b.query.length&&(b.url+=(-1==b.url.indexOf("?")?"?":"\x26")+b.query,b.query=null)};m.xhr=function(b,c,d){var e,g=m._ioSetArgs(c,function(b){e&&e.cancel()},y,z),r=g.ioArgs;"postData"in c?r.query=
c.postData:"putData"in c?r.query=c.putData:"rawBody"in c?r.query=c.rawBody:(2<arguments.length&&!d||-1==="POST|PUT".indexOf(b.toUpperCase()))&&m._ioAddQueryToUrl(r);var t;p("native-xhr2")&&(t={arraybuffer:1,blob:1,document:1});t=t[c.handleAs]?c.handleAs:"text";"blob"!==t||p("native-xhr2-blob")||(t="arraybuffer");t={method:b,handleAs:t,responseType:c.responseType,timeout:c.timeout,withCredentials:c.withCredentials,ioArgs:r};"undefined"!==typeof c.headers&&(t.headers=c.headers);"undefined"!==typeof c.contentType&&
(t.headers||(t.headers={}),t.headers["Content-Type"]=c.contentType);"undefined"!==typeof r.query&&(t.data=r.query);"undefined"!==typeof c.sync&&(t.sync=c.sync);m._ioNotifyStart(g);try{e=u(r.url,t,!0)}catch(P){return g.cancel(),g}g.ioArgs.xhr=e.response.xhr;e.then(function(){g.resolve(g)}).otherwise(function(b){r.error=b;b.response&&(b.status=b.response.status,b.responseText=b.response.text,b.xhr=b.response.xhr);g.reject(b)});return g};m.xhrGet=function(b){return m.xhr("GET",b)};m.rawXhrPost=m.xhrPost=
function(b){return m.xhr("POST",b,!0)};m.rawXhrPut=m.xhrPut=function(b){return m.xhr("PUT",b,!0)};m.xhrDelete=function(b){return m.xhr("DELETE",b)};m._isDocumentOk=function(b){return t.checkStatus(b.status)};m._getText=function(b){var c;m.xhrGet({url:b,sync:!0,load:function(b){c=b}});return c};c.mixin(m.xhr,{_xhrObj:m._xhrObj,fieldToObject:h.fieldToObject,formToObject:h.toObject,objectToQuery:l.objectToQuery,formToQuery:h.toQuery,formToJson:h.toJson,queryToObject:l.queryToObject,contentHandlers:w,
_ioSetArgs:m._ioSetArgs,_ioCancelAll:m._ioCancelAll,_ioNotifyStart:m._ioNotifyStart,_ioWatch:m._ioWatch,_ioAddQueryToUrl:m._ioAddQueryToUrl,_isDocumentOk:m._isDocumentOk,_getText:m._getText,get:m.xhrGet,post:m.xhrPost,put:m.xhrPut,del:m.xhrDelete});return m.xhr})},"dojo/_base/sniff":function(){define(["./kernel","./lang","../sniff"],function(m,p,f){m._name="browser";p.mixin(m,{isBrowser:!0,isFF:f("ff"),isIE:f("ie"),isKhtml:f("khtml"),isWebKit:f("webkit"),isMozilla:f("mozilla"),isMoz:f("mozilla"),
isOpera:f("opera"),isSafari:f("safari"),isChrome:f("chrome"),isMac:f("mac"),isIos:f("ios"),isAndroid:f("android"),isWii:f("wii"),isQuirks:f("quirks"),isAir:f("air")});return f})},"dojo/io-query":function(){define(["./_base/lang"],function(m){var p={};return{objectToQuery:function(f){var l=encodeURIComponent,k=[],h;for(h in f){var q=f[h];if(q!=p[h]){var g=l(h)+"\x3d";if(m.isArray(q))for(var e=0,c=q.length;e<c;++e)k.push(g+l(q[e]));else k.push(g+l(q))}}return k.join("\x26")},queryToObject:function(f){var l=
decodeURIComponent;f=f.split("\x26");for(var k={},h,q,g=0,e=f.length;g<e;++g)if(q=f[g],q.length){var c=q.indexOf("\x3d");0>c?(h=l(q),q=""):(h=l(q.slice(0,c)),q=l(q.slice(c+1)));"string"==typeof k[h]&&(k[h]=[k[h]]);m.isArray(k[h])?k[h].push(q):k[h]=q}return k}}})},"dojo/dom":function(){define(["./sniff","./_base/window","./_base/kernel"],function(m,p,f){if(7>=m("ie"))try{document.execCommand("BackgroundImageCache",!1,!0)}catch(h){}var l={};m("ie")?l.byId=function(h,f){if("string"!=typeof h)return h;
var g=f||p.doc;f=h&&g.getElementById(h);if(!f||f.attributes.id.value!=h&&f.id!=h){g=g.all[h];if(!g||g.nodeName)g=[g];for(var e=0;f=g[e++];)if(f.attributes&&f.attributes.id&&f.attributes.id.value==h||f.id==h)return f}else return f}:l.byId=function(h,f){return("string"==typeof h?(f||p.doc).getElementById(h):h)||null};f=f.global.document||null;m.add("dom-contains",!(!f||!f.contains));l.isDescendant=m("dom-contains")?function(h,f){return!(!(f=l.byId(f))||!f.contains(l.byId(h)))}:function(h,f){try{for(h=
l.byId(h),f=l.byId(f);h;){if(h==f)return!0;h=h.parentNode}}catch(g){}return!1};m.add("css-user-select",function(h,f,g){if(!g)return!1;h=g.style;f=["Khtml","O","Moz","Webkit"];g=f.length;var e="userSelect";do if("undefined"!==typeof h[e])return e;while(g--&&(e=f[g]+"UserSelect"));return!1});var k=m("css-user-select");l.setSelectable=k?function(h,f){l.byId(h).style[k]=f?"":"none"}:function(h,f){h=l.byId(h);var g=h.getElementsByTagName("*"),e=g.length;if(f)for(h.removeAttribute("unselectable");e--;)g[e].removeAttribute("unselectable");
else for(h.setAttribute("unselectable","on");e--;)g[e].setAttribute("unselectable","on")};return l})},"dojo/_base/window":function(){define(["./kernel","./lang","../sniff"],function(m,p,f){var l={global:m.global,doc:m.global.document||null,body:function(f){f=f||m.doc;return f.body||f.getElementsByTagName("body")[0]},setContext:function(f,h){m.global=l.global=f;m.doc=l.doc=h},withGlobal:function(f,h,q,g){var e=m.global;try{return m.global=l.global=f,l.withDoc.call(null,f.document,h,q,g)}finally{m.global=
l.global=e}},withDoc:function(k,h,q,g){var e=l.doc,c=f("quirks"),b=f("ie"),d,r,v;try{return m.doc=l.doc=k,m.isQuirks=f.add("quirks","BackCompat"==m.doc.compatMode,!0,!0),f("ie")&&(v=k.parentWindow)&&v.navigator&&(d=parseFloat(v.navigator.appVersion.split("MSIE ")[1])||void 0,(r=k.documentMode)&&5!=r&&Math.floor(d)!=r&&(d=r),m.isIE=f.add("ie",d,!0,!0)),q&&"string"==typeof h&&(h=q[h]),h.apply(q,g||[])}finally{m.doc=l.doc=e,m.isQuirks=f.add("quirks",c,!0,!0),m.isIE=f.add("ie",b,!0,!0)}}};p.mixin(m,l);
return l})},"dojo/dom-form":function(){define(["./_base/lang","./dom","./io-query","./json"],function(m,p,f,l){var k={fieldToObject:function(h){var f=null;if(h=p.byId(h)){var g=h.name,e=(h.type||"").toLowerCase();if(g&&e&&!h.disabled)if("radio"==e||"checkbox"==e)h.checked&&(f=h.value);else if(h.multiple)for(f=[],h=[h.firstChild];h.length;)for(g=h.pop();g;g=g.nextSibling)if(1==g.nodeType&&"option"==g.tagName.toLowerCase())g.selected&&f.push(g.value);else{g.nextSibling&&h.push(g.nextSibling);g.firstChild&&
h.push(g.firstChild);break}else f=h.value}return f},toObject:function(h){var f={};h=p.byId(h).elements;for(var g=0,e=h.length;g<e;++g){var c=h[g],b=c.name,d=(c.type||"").toLowerCase();if(b&&d&&0>"file|submit|image|reset|button".indexOf(d)&&!c.disabled){var r=f,v=b,c=k.fieldToObject(c);if(null!==c){var u=r[v];"string"==typeof u?r[v]=[u,c]:m.isArray(u)?u.push(c):r[v]=c}"image"==d&&(f[b+".x"]=f[b+".y"]=f[b].x=f[b].y=0)}}return f},toQuery:function(h){return f.objectToQuery(k.toObject(h))},toJson:function(h,
f){return l.stringify(k.toObject(h),null,f?4:0)}};return k})},"dojo/_base/Deferred":function(){define("./kernel ../Deferred ../promise/Promise ../errors/CancelError ../has ./lang ../when".split(" "),function(m,p,f,l,k,h,q){var g=function(){},e=Object.freeze||function(){},c=m.Deferred=function(b){function d(b){if(u)throw Error("This deferred has already been resolved");v=b;u=!0;r()}function r(){for(var b;!b&&m;){var c=m;m=m.next;if(b=c.progress==g)u=!1;var d=w?c.error:c.resolved;k("config-useDeferredInstrumentation")&&
w&&p.instrumentRejected&&p.instrumentRejected(v,!!d);if(d)try{var e=d(v);e&&"function"===typeof e.then?e.then(h.hitch(c.deferred,"resolve"),h.hitch(c.deferred,"reject"),h.hitch(c.deferred,"progress")):(d=b&&void 0===e,b&&!d&&(w=e instanceof Error),c.deferred[d&&w?"reject":"resolve"](d?v:e))}catch(D){c.deferred.reject(D)}else w?c.deferred.reject(v):c.deferred.resolve(v)}}var v,u,t,q,w,y,m,B=this.promise=new f;this.isResolved=B.isResolved=function(){return 0==q};this.isRejected=B.isRejected=function(){return 1==
q};this.isFulfilled=B.isFulfilled=function(){return 0<=q};this.isCanceled=B.isCanceled=function(){return t};this.resolve=this.callback=function(b){this.fired=q=0;this.results=[b,null];d(b)};this.reject=this.errback=function(b){w=!0;this.fired=q=1;k("config-useDeferredInstrumentation")&&p.instrumentRejected&&p.instrumentRejected(b,!!m);d(b);this.results=[null,b]};this.progress=function(b){for(var c=m;c;){var d=c.progress;d&&d(b);c=c.next}};this.addCallbacks=function(b,c){this.then(b,c,g);return this};
B.then=this.then=function(b,d,e){var t=e==g?this:new c(B.cancel);b={resolved:b,error:d,progress:e,deferred:t};m?y=y.next=b:m=y=b;u&&r();return t.promise};var A=this;B.cancel=this.cancel=function(){if(!u){var c=b&&b(A);u||(c instanceof Error||(c=new l(c)),c.log=!1,A.reject(c))}t=!0};e(B)};h.extend(c,{addCallback:function(b){return this.addCallbacks(h.hitch.apply(m,arguments))},addErrback:function(b){return this.addCallbacks(null,h.hitch.apply(m,arguments))},addBoth:function(b){var c=h.hitch.apply(m,
arguments);return this.addCallbacks(c,c)},fired:-1});c.when=m.when=q;return c})},"dojo/Deferred":function(){define(["./has","./_base/lang","./errors/CancelError","./promise/Promise","./promise/instrumentation"],function(m,p,f,l,k){var h=Object.freeze||function(){},q=function(c,e,h,u,t){2===e&&b.instrumentRejected&&0===c.length&&b.instrumentRejected(h,!1,u,t);for(t=0;t<c.length;t++)g(c[t],e,h,u)},g=function(d,g,h,u){var r=d[g],f=d.deferred;if(r)try{var k=r(h);if(0===g)"undefined"!==typeof k&&c(f,g,
k);else{if(k&&"function"===typeof k.then){d.cancel=k.cancel;k.then(e(f,1),e(f,2),e(f,0));return}c(f,1,k)}}catch(y){c(f,2,y)}else c(f,g,h);2===g&&b.instrumentRejected&&b.instrumentRejected(h,!!r,u,f.promise)},e=function(b,e){return function(d){c(b,e,d)}},c=function(b,c,e){if(!b.isCanceled())switch(c){case 0:b.progress(e);break;case 1:b.resolve(e);break;case 2:b.reject(e)}},b=function(c){var d=this.promise=new l,e=this,u,t,k,w=!1,y=[];Error.captureStackTrace&&(Error.captureStackTrace(e,b),Error.captureStackTrace(d,
b));this.isResolved=d.isResolved=function(){return 1===u};this.isRejected=d.isRejected=function(){return 2===u};this.isFulfilled=d.isFulfilled=function(){return!!u};this.isCanceled=d.isCanceled=function(){return w};this.progress=function(b,c){if(u){if(!0===c)throw Error("This deferred has already been fulfilled.");return d}q(y,0,b,null,e);return d};this.resolve=function(b,c){if(u){if(!0===c)throw Error("This deferred has already been fulfilled.");return d}q(y,u=1,t=b,null,e);y=null;return d};var m=
this.reject=function(b,c){if(u){if(!0===c)throw Error("This deferred has already been fulfilled.");return d}Error.captureStackTrace&&Error.captureStackTrace(k={},m);q(y,u=2,t=b,k,e);y=null;return d};this.then=d.then=function(c,e,r){var h=[r,c,e];h.cancel=d.cancel;h.deferred=new b(function(b){return h.cancel&&h.cancel(b)});u&&!y?g(h,u,t,k):y.push(h);return h.deferred.promise};this.cancel=d.cancel=function(b,d){if(!u){c&&(d=c(b),b="undefined"===typeof d?b:d);w=!0;if(!u)return"undefined"===typeof b&&
(b=new f),m(b),b;if(2===u&&t===b)return b}else if(!0===d)throw Error("This deferred has already been fulfilled.");};h(d)};b.prototype.toString=function(){return"[object Deferred]"};k&&k(b);return b})},"dojo/errors/CancelError":function(){define(["./create"],function(m){return m("CancelError",null,null,{dojoType:"cancel",log:!1})})},"dojo/errors/create":function(){define(["../_base/lang"],function(m){return function(p,f,l,k){l=l||Error;var h=function(k){if(l===Error){Error.captureStackTrace&&Error.captureStackTrace(this,
h);var g=Error.call(this,k),e;for(e in g)g.hasOwnProperty(e)&&(this[e]=g[e]);this.message=k;this.stack=g.stack}else l.apply(this,arguments);f&&f.apply(this,arguments)};h.prototype=m.delegate(l.prototype,k);h.prototype.name=p;return h.prototype.constructor=h}})},"dojo/promise/Promise":function(){define(["../_base/lang"],function(m){function p(){throw new TypeError("abstract");}return m.extend(function(){},{then:function(f,l,k){p()},cancel:function(f,l){p()},isResolved:function(){p()},isRejected:function(){p()},
isFulfilled:function(){p()},isCanceled:function(){p()},"finally":function(f){return this.then(function(l){var k=f();return k&&"function"===typeof k.then?k.then(function(){return l}):l},function(l){var k=f();if(k&&"function"===typeof k.then)return k.then(function(){throw l;});throw l;})},always:function(f){return this.then(f,f)},"catch":function(f){return this.then(null,f)},otherwise:function(f){return this.then(null,f)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})})},
"dojo/promise/instrumentation":function(){define(["./tracer","../has","../_base/lang","../_base/array"],function(m,p,f,l){function k(b,c,e){if(!b||!1!==b.log){var d="";b&&b.stack&&(d+=b.stack);c&&c.stack&&(d+="\n    ----------------------------------------\n    rejected"+c.stack.split("\n").slice(1).join("\n").replace(/^\s+/," "));e&&e.stack&&(d+="\n    ----------------------------------------\n"+e.stack)}}function h(b,c,e,g){c||k(b,e,g)}function q(d,r,h,u){l.some(e,function(b){if(b.error===d)return r&&
(b.handled=!0),!0})||e.push({error:d,rejection:h,handled:r,deferred:u,timestamp:(new Date).getTime()});c||(c=setTimeout(g,b))}function g(){var d=(new Date).getTime(),r=d-b;e=l.filter(e,function(b){return b.timestamp<r?(b.handled||k(b.error,b.rejection,b.deferred),!1):!0});c=e.length?setTimeout(g,e[0].timestamp+b-d):!1}p.add("config-useDeferredInstrumentation","report-unhandled-rejections");var e=[],c=!1,b=1E3;return function(c){var d=p("config-useDeferredInstrumentation");if(d){m.on("resolved",f.hitch(console,
"log","resolved"));m.on("rejected",f.hitch(console,"log","rejected"));m.on("progress",f.hitch(console,"log","progress"));var e=[];"string"===typeof d&&(e=d.split(","),d=e.shift());if("report-rejections"===d)c.instrumentRejected=h;else if("report-unhandled-rejections"===d||!0===d||1===d)c.instrumentRejected=q,b=parseInt(e[0],10)||b;else throw Error("Unsupported instrumentation usage \x3c"+d+"\x3e");}}})},"dojo/promise/tracer":function(){define(["../_base/lang","./Promise","../Evented"],function(m,
p,f){function l(f){setTimeout(function(){h.apply(k,f)},0)}var k=new f,h=k.emit;k.emit=null;p.prototype.trace=function(){var h=m._toArray(arguments);this.then(function(g){l(["resolved",g].concat(h))},function(g){l(["rejected",g].concat(h))},function(g){l(["progress",g].concat(h))});return this};p.prototype.traceRejected=function(){var h=m._toArray(arguments);this.otherwise(function(g){l(["rejected",g].concat(h))});return this};return k})},"dojo/Evented":function(){define(["./aspect","./on"],function(m,
p){function f(){}var l=m.after;f.prototype={on:function(f,h){return p.parse(this,f,h,function(f,g){return l(f,"on"+g,h,!0)})},emit:function(f,h){var k=[this];k.push.apply(k,arguments);return p.emit.apply(p,k)}};return f})},"dojo/aspect":function(){define([],function(){function m(h,g,e,c){var b=h[g],d="around"==g,r;if(d){var f=e(function(){return b.advice(this,arguments)});r={remove:function(){f&&(f=h=e=null)},advice:function(c,d){return f?f.apply(c,d):b.advice(c,d)}}}else r={remove:function(){if(r.advice){var b=
r.previous,c=r.next;c||b?(b?b.next=c:h[g]=c,c&&(c.previous=b)):delete h[g];h=e=r.advice=null}},id:h.nextId++,advice:e,receiveArguments:c};if(b&&!d)if("after"==g){for(;b.next&&(b=b.next););b.next=r;r.previous=b}else"before"==g&&(h[g]=r,r.next=b,b.previous=r);else h[g]=r;return r}function p(h){return function(g,e,c,b){var d=g[e],r;d&&d.target==g||(g[e]=r=function(){for(var b=r.nextId,c=arguments,d=r.before;d;)d.advice&&(c=d.advice.apply(this,c)||c),d=d.next;if(r.around)var e=r.around.advice(this,c);
for(d=r.after;d&&d.id<b;){if(d.advice)if(d.receiveArguments)var g=d.advice.apply(this,c),e=g===f?e:g;else e=d.advice.call(this,e,c);d=d.next}return e},d&&(r.around={advice:function(b,c){return d.apply(b,c)}}),r.target=g,r.nextId=r.nextId||0);g=m(r||d,h,c,b);c=null;return g}}var f,l=p("after"),k=p("before"),h=p("around");return{before:k,around:h,after:l}})},"dojo/on":function(){define(["./has!dom-addeventlistener?:./aspect","./_base/kernel","./sniff"],function(m,p,f){function l(b,c,r,t,h){if(t=c.match(/(.*):(.*)/))return c=
t[2],t=t[1],g.selector(t,c).call(h,b,r);f("touch")&&(e.test(c)&&(r=C(r)),f("event-orientationchange")||"orientationchange"!=c||(c="resize",b=window,r=C(r)));v&&(r=v(r));if(b.addEventListener){var u=c in d,k=u?d[c]:c;b.addEventListener(k,r,u);return{remove:function(){b.removeEventListener(k,r,u)}}}if(w&&b.attachEvent)return w(b,"on"+c,r);throw Error("Target must be an event emitter");}function k(){this.cancelable=!1;this.defaultPrevented=!0}function h(){this.bubbles=!1}var q=window.ScriptEngineMajorVersion;
f.add("jscript",q&&q()+ScriptEngineMinorVersion()/10);f.add("event-orientationchange",f("touch")&&!f("android"));f.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation);f.add("event-focusin",function(b,c,d){return"onfocusin"in d});f("touch")&&f.add("touch-can-modify-event-delegate",function(){var b=function(){};b.prototype=document.createEvent("MouseEvents");try{var c=new b;c.target=null;return null===c.target}catch(H){return!1}});
var g=function(b,c,d,e){return"function"!=typeof b.on||"function"==typeof c||b.nodeType?g.parse(b,c,d,l,e,this):b.on(c,d)};g.pausable=function(b,c,d,e){var r;b=g(b,c,function(){if(!r)return d.apply(this,arguments)},e);b.pause=function(){r=!0};b.resume=function(){r=!1};return b};g.once=function(b,c,d,e){var r=g(b,c,function(){r.remove();return d.apply(this,arguments)});return r};g.parse=function(b,c,d,e,r,t){var h;if(c.call)return c.call(t,b,d);c instanceof Array?h=c:-1<c.indexOf(",")&&(h=c.split(/\s*,\s*/));
if(h){var u=[];c=0;for(var f;f=h[c++];)u.push(g.parse(b,f,d,e,r,t));u.remove=function(){for(var b=0;b<u.length;b++)u[b].remove()};return u}return e(b,c,d,r,t)};var e=/^touch/;g.matches=function(b,c,d,e,g){g=g&&"function"==typeof g.matches?g:p.query;e=!1!==e;for(1!=b.nodeType&&(b=b.parentNode);!g.matches(b,c,d);)if(b==d||!1===e||!(b=b.parentNode)||1!=b.nodeType)return!1;return b};g.selector=function(b,c,d){return function(e,r){function t(c){return g.matches(c,b,e,d,h)}var h="function"==typeof b?{matches:b}:
this,u=c.bubble;return u?g(e,u(t),r):g(e,c,function(b){var c=t(b.target);if(c)return b.selectorTarget=c,r.call(c,b)})}};var c=[].slice,b=g.emit=function(b,d,e){var g=c.call(arguments,2),r="on"+d;if("parentNode"in b){var t=g[0]={},u;for(u in e)t[u]=e[u];t.preventDefault=k;t.stopPropagation=h;t.target=b;t.type=d;e=t}do b[r]&&b[r].apply(b,g);while(e&&e.bubbles&&(b=b.parentNode));return e&&e.cancelable&&e},d=f("event-focusin")?{}:{focusin:"focus",focusout:"blur"};if(!f("event-stopimmediatepropagation"))var r=
function(){this.modified=this.immediatelyStopped=!0},v=function(b){return function(c){if(!c.immediatelyStopped)return c.stopImmediatePropagation=r,b.apply(this,arguments)}};if(f("dom-addeventlistener"))g.emit=function(c,d,e){if(c.dispatchEvent&&document.createEvent){var r=(c.ownerDocument||document).createEvent("HTMLEvents");r.initEvent(d,!!e.bubbles,!!e.cancelable);for(var t in e)t in r||(r[t]=e[t]);return c.dispatchEvent(r)&&r}return b.apply(g,arguments)};else{g._fixEvent=function(b,c){b||(b=(c&&
(c.ownerDocument||c.document||c).parentWindow||window).event);if(!b)return b;try{u&&b.type==u.type&&b.srcElement==u.target&&(b=u)}catch(H){}if(!b.target)switch(b.target=b.srcElement,b.currentTarget=c||b.srcElement,"mouseover"==b.type&&(b.relatedTarget=b.fromElement),"mouseout"==b.type&&(b.relatedTarget=b.toElement),b.stopPropagation||(b.stopPropagation=y,b.preventDefault=z),b.type){case "keypress":c="charCode"in b?b.charCode:b.keyCode,10==c?(c=0,b.keyCode=13):13==c||27==c?c=0:3==c&&(c=99),b.charCode=
c,c=b,c.keyChar=c.charCode?String.fromCharCode(c.charCode):"",c.charOrCode=c.keyChar||c.keyCode}return b};var u,t=function(b){this.handle=b};t.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};var x=function(b){return function(c){c=g._fixEvent(c,this);var d=b.call(this,c);c.modified&&(u||setTimeout(function(){u=null}),u=c);return d}},w=function(b,c,d){d=x(d);if(((b.ownerDocument?b.ownerDocument.parentWindow:b.parentWindow||b.window||window)!=top||5.8>f("jscript"))&&!f("config-_allow_leaks")){"undefined"==
typeof _dojoIEListeners_&&(_dojoIEListeners_=[]);var e=b[c];if(!e||!e.listeners){var g=e,e=Function("event","var callee \x3d arguments.callee; for(var i \x3d 0; i\x3ccallee.listeners.length; i++){var listener \x3d _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}");e.listeners=[];b[c]=e;e.global=this;g&&e.listeners.push(_dojoIEListeners_.push(g)-1)}e.listeners.push(b=e.global._dojoIEListeners_.push(d)-1);return new t(b)}return m.after(b,c,d,!0)},y=function(){this.cancelBubble=
!0},z=g._preventDefault=function(){this.bubbledKeyCode=this.keyCode;if(this.ctrlKey)try{this.keyCode=0}catch(F){}this.defaultPrevented=!0;this.returnValue=!1;this.modified=!0}}if(f("touch"))var B=function(){},A=window.orientation,C=function(b){return function(c){var d=c.corrected;if(!d){var e=c.type;try{delete c.type}catch(P){}if(c.type){if(f("touch-can-modify-event-delegate"))B.prototype=c,d=new B;else{var d={},g;for(g in c)d[g]=c[g]}d.preventDefault=function(){c.preventDefault()};d.stopPropagation=
function(){c.stopPropagation()}}else d=c,d.type=e;c.corrected=d;if("resize"==e){if(A==window.orientation)return null;A=window.orientation;d.type="orientationchange";return b.call(this,d)}"rotation"in d||(d.rotation=0,d.scale=1);if(window.TouchEvent&&c instanceof TouchEvent){var e=d.changedTouches[0],r;for(r in e)delete d[r],d[r]=e[r]}}return b.call(this,d)}};return g})},"dojo/when":function(){define(["./Deferred","./promise/Promise"],function(m,p){return function(f,l,k,h){var q=f&&"function"===typeof f.then,
g=q&&f instanceof p;if(!q)return 1<arguments.length?l?l(f):f:(new m).resolve(f);g||(q=new m(f.cancel),f.then(q.resolve,q.reject,q.progress),f=q.promise);return l||k||h?f.then(l,k,h):f}})},"dojo/_base/json":function(){define(["./kernel","../json"],function(m,p){m.fromJson=function(f){return eval("("+f+")")};m._escapeString=p.stringify;m.toJsonIndentStr="\t";m.toJson=function(f,l){return p.stringify(f,function(f,h){return h&&(f=h.__json__||h.json,"function"==typeof f)?f.call(h):h},l&&m.toJsonIndentStr)};
return m})},"dojo/request/watch":function(){define("./util ../errors/RequestTimeoutError ../errors/CancelError ../_base/array ../_base/window ../has!host-browser?dom-addeventlistener?:../on:".split(" "),function(m,p,f,l,k,h){function q(){for(var b=+new Date,d=0,r;d<c.length&&(r=c[d]);d++){var h=r.response,u=h.options;r.isCanceled&&r.isCanceled()||r.isValid&&!r.isValid(h)?(c.splice(d--,1),g._onAction&&g._onAction()):r.isReady&&r.isReady(h)?(c.splice(d--,1),r.handleResponse(h),g._onAction&&g._onAction()):
r.startTime&&r.startTime+(u.timeout||0)<b&&(c.splice(d--,1),r.cancel(new p("Timeout exceeded",h)),g._onAction&&g._onAction())}g._onInFlight&&g._onInFlight(r);c.length||(clearInterval(e),e=null)}function g(b){b.response.options.timeout&&(b.startTime=+new Date);b.isFulfilled()||(c.push(b),e||(e=setInterval(q,50)),b.response.options.sync&&q())}var e=null,c=[];g.cancelAll=function(){try{l.forEach(c,function(b){try{b.cancel(new f("All requests canceled."))}catch(d){}})}catch(b){}};k&&h&&k.doc.attachEvent&&
h(k.global,"unload",function(){g.cancelAll()});return g})},"dojo/request/util":function(){define("exports ../errors/RequestError ../errors/CancelError ../Deferred ../io-query ../_base/array ../_base/lang ../promise/Promise ../has".split(" "),function(m,p,f,l,k,h,q,g,e){function c(b){return d(b)}function b(b){return void 0!==b.data?b.data:b.text}m.deepCopy=function(b,c){for(var d in c){var e=b[d],g=c[d];e!==g&&(e&&"object"===typeof e&&g&&"object"===typeof g?g instanceof Date?b[d]=new Date(g):m.deepCopy(e,
g):b[d]=g)}return b};m.deepCreate=function(b,c){c=c||{};var d=q.delegate(b),e,g;for(e in b)(g=b[e])&&"object"===typeof g&&(d[e]=m.deepCreate(g,c[e]));return m.deepCopy(d,c)};var d=Object.freeze||function(b){return b};m.deferred=function(e,h,u,t,k,w){var r=new l(function(b){h&&h(r,e);return b&&(b instanceof p||b instanceof f)?b:new f("Request canceled",e)});r.response=e;r.isValid=u;r.isReady=t;r.handleResponse=k;u=r.then(c).otherwise(function(b){b.response=e;throw b;});m.notify&&u.then(q.hitch(m.notify,
"emit","load"),q.hitch(m.notify,"emit","error"));t=u.then(b);k=new g;for(var v in t)t.hasOwnProperty(v)&&(k[v]=t[v]);k.response=u;d(k);w&&r.then(function(b){w.call(r,b)},function(b){w.call(r,e,b)});r.promise=k;r.then=k.then;return r};m.addCommonMethods=function(b,c){h.forEach(c||["GET","POST","PUT","DELETE"],function(c){b[("DELETE"===c?"DEL":c).toLowerCase()]=function(d,e){e=q.delegate(e||{});e.method=c;return b(d,e)}})};m.parseArgs=function(b,c,d){var g=c.data,r=c.query;!g||d||"object"!==typeof g||
e("native-xhr2")&&(g instanceof ArrayBuffer||g instanceof Blob)||(c.data=k.objectToQuery(g));r?("object"===typeof r&&(r=k.objectToQuery(r)),c.preventCache&&(r+=(r?"\x26":"")+"request.preventCache\x3d"+ +new Date)):c.preventCache&&(r="request.preventCache\x3d"+ +new Date);b&&r&&(b+=(~b.indexOf("?")?"\x26":"?")+r);return{url:b,options:c,getHeader:function(b){return null}}};m.checkStatus=function(b){b=b||0;return 200<=b&&300>b||304===b||1223===b||!b}})},"dojo/errors/RequestError":function(){define(["./create"],
function(m){return m("RequestError",function(m,f){this.response=f})})},"dojo/errors/RequestTimeoutError":function(){define(["./create","./RequestError"],function(m,p){return m("RequestTimeoutError",null,p,{dojoType:"timeout"})})},"dojo/request/xhr":function(){define(["../errors/RequestError","./watch","./handlers","./util","../has"],function(m,p,f,l,k){function h(b,c){var d=b.xhr;b.status=b.xhr.status;try{b.text=d.responseText}catch(z){}"xml"===b.options.handleAs&&(b.data=d.responseXML);var e;if(c)this.reject(c);
else{try{f(b)}catch(z){e=z}l.checkStatus(d.status)?e?this.reject(e):this.resolve(b):(c=e?new m("Unable to load "+b.url+" status: "+d.status+" and an error in handleAs: transformation of response",b):new m("Unable to load "+b.url+" status: "+d.status,b),this.reject(c))}}function q(b){return this.xhr.getResponseHeader(b)}function g(t,f,w){var x=k("native-formdata")&&f&&f.data&&f.data instanceof FormData,z=l.parseArgs(t,l.deepCreate(u,f),x);t=z.url;f=z.options;var B=!f.data&&"POST"!==f.method&&"PUT"!==
f.method;10>=k("ie")&&(t=t.split("#")[0]);var A,C=l.deferred(z,r,c,b,h,function(){A&&A()}),F=z.xhr=g._create();if(!F)return C.cancel(new m("XHR was not created")),w?C:C.promise;z.getHeader=q;d&&(A=d(F,C,z,f.uploadProgress));var E="undefined"===typeof f.data?null:f.data,H=!f.sync,D=f.method;try{F.open(D,t,H,f.user||v,f.password||v);f.withCredentials&&(F.withCredentials=f.withCredentials);k("native-response-type")&&f.handleAs in e&&(F.responseType=e[f.handleAs]);var G=f.headers;t=x||B?!1:"application/x-www-form-urlencoded";
if(G)for(var I in G)"content-type"===I.toLowerCase()?t=G[I]:G[I]&&F.setRequestHeader(I,G[I]);t&&!1!==t&&F.setRequestHeader("Content-Type",t);G&&"X-Requested-With"in G||F.setRequestHeader("X-Requested-With","XMLHttpRequest");l.notify&&l.notify.emit("send",z,C.promise.cancel);F.send(E)}catch(P){C.reject(P)}p(C);F=null;return w?C:C.promise}k.add("native-xhr",function(){return"undefined"!==typeof XMLHttpRequest});k.add("dojo-force-activex-xhr",function(){return k("activex")&&"file:"===window.location.protocol});
k.add("native-xhr2",function(){if(k("native-xhr")&&!k("dojo-force-activex-xhr")){var b=new XMLHttpRequest;return"undefined"!==typeof b.addEventListener&&("undefined"===typeof opera||"undefined"!==typeof b.upload)}});k.add("native-formdata",function(){return"undefined"!==typeof FormData});k.add("native-response-type",function(){return k("native-xhr")&&"undefined"!==typeof(new XMLHttpRequest).responseType});k.add("native-xhr2-blob",function(){if(k("native-response-type")){var b=new XMLHttpRequest;b.open("GET",
"https://dojotoolkit.org/",!0);b.responseType="blob";var c=b.responseType;b.abort();return"blob"===c}});var e={blob:k("native-xhr2-blob")?"blob":"arraybuffer",document:"document",arraybuffer:"arraybuffer"},c,b,d,r;k("native-xhr2")?(c=function(b){return!this.isFulfilled()},r=function(b,c){c.xhr.abort()},d=function(b,c,d,e){function g(b){c.handleResponse(d)}function r(b){b=new m("Unable to load "+d.url+" status: "+b.target.status,d);c.handleResponse(d,b)}function t(b,e){d.transferType=b;e.lengthComputable?
(d.loaded=e.loaded,d.total=e.total,c.progress(d)):3===d.xhr.readyState&&(d.loaded="loaded"in e?e.loaded:e.position,c.progress(d))}function h(b){return t("download",b)}function u(b){return t("upload",b)}b.addEventListener("load",g,!1);b.addEventListener("error",r,!1);b.addEventListener("progress",h,!1);e&&b.upload&&b.upload.addEventListener("progress",u,!1);return function(){b.removeEventListener("load",g,!1);b.removeEventListener("error",r,!1);b.removeEventListener("progress",h,!1);b.upload.removeEventListener("progress",
u,!1);b=null}}):(c=function(b){return b.xhr.readyState},b=function(b){return 4===b.xhr.readyState},r=function(b,c){b=c.xhr;c=typeof b.abort;"function"!==c&&"object"!==c&&"unknown"!==c||b.abort()});var v,u={data:null,query:null,sync:!1,method:"GET"};g._create=function(){throw Error("XMLHTTP not available");};if(k("native-xhr")&&!k("dojo-force-activex-xhr"))g._create=function(){return new XMLHttpRequest};else if(k("activex"))try{new ActiveXObject("Msxml2.XMLHTTP"),g._create=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}catch(t){try{new ActiveXObject("Microsoft.XMLHTTP"),
g._create=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}catch(x){}}l.addCommonMethods(g);return g})},"dojo/request/handlers":function(){define(["../json","../_base/kernel","../_base/array","../has","../selector/_loader"],function(m,p,f,l){function k(b){var d=c[b.options.handleAs];b.data=d?d(b):b.data||b.text;return b}l.add("activex","undefined"!==typeof ActiveXObject);l.add("dom-parser",function(b){return"DOMParser"in b});var h;if(l("activex")){var q=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.4.0",
"MSXML2.DOMDocument.3.0","MSXML.DOMDocument"],g;h=function(b){function c(b){try{var c=new ActiveXObject(b);c.async=!1;c.loadXML(h);e=c;g=b}catch(x){return!1}return!0}var e=b.data,h=b.text;e&&l("dom-qsa2.1")&&!e.querySelectorAll&&l("dom-parser")&&(e=(new DOMParser).parseFromString(h,"application/xml"));e&&e.documentElement||g&&c(g)||f.some(q,c);return e}}var e=function(b){return l("native-xhr2-blob")||"blob"!==b.options.handleAs||"undefined"===typeof Blob?b.xhr.response:new Blob([b.xhr.response],{type:b.xhr.getResponseHeader("Content-Type")})},
c={javascript:function(b){return p.eval(b.text||"")},json:function(b){return m.parse(b.text||null)},xml:h,blob:e,arraybuffer:e,document:e};k.register=function(b,d){c[b]=d};return k})},"dojo/selector/_loader":function(){define(["../has","require"],function(m,p){if("undefined"!==typeof document){var f=document.createElement("div");m.add("dom-qsa2.1",!!f.querySelectorAll);m.add("dom-qsa3",function(){try{return f.innerHTML="\x3cp class\x3d'TEST'\x3e\x3c/p\x3e",1==f.querySelectorAll(".TEST:empty").length}catch(k){}})}var l;
return{load:function(f,h,q,g){if(g&&g.isBuild)q();else{g=p;f="default"==f?m("config-selectorEngine")||"css3":f;f="css2"==f||"lite"==f?"./lite":"css2.1"==f?m("dom-qsa2.1")?"./lite":"./acme":"css3"==f?m("dom-qsa3")?"./lite":"./acme":"acme"==f?"./acme":(g=h)&&f;if("?"==f.charAt(f.length-1)){f=f.substring(0,f.length-1);var e=!0}if(e&&(m("dom-compliant-qsa")||l))return q(l);g([f],function(c){"./lite"!=f&&(l=c);q(c)})}}}})},"dojo/request/script":function(){define("module ./watch ./util ../_base/kernel ../_base/array ../_base/lang ../on ../dom ../dom-construct ../has ../_base/window".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b){function d(b,c){b.canDelete&&x._remove(b.id,c.options.frameDoc,!0)}function r(b){C&&C.length&&(k.forEach(C,function(b){x._remove(b.id,b.frameDoc);b.frameDoc=null}),C=[]);return b.options.jsonp?!b.data:!0}function v(b){return!!this.scriptLoaded}function u(b){return(b=b.options.checkString)&&eval("typeof("+b+') !\x3d\x3d "undefined"')}function t(b,c){if(this.canDelete){var d=this.response.options;C.push({id:this.id,frameDoc:d.ioArgs?d.ioArgs.frameDoc:d.frameDoc});d.ioArgs&&
(d.ioArgs.frameDoc=null);d.frameDoc=null}c?this.reject(c):this.resolve(b)}function x(b,c,e){var g=f.parseArgs(b,f.deepCopy({},c));b=g.url;c=g.options;var k=f.deferred(g,d,r,c.jsonp?null:c.checkString?u:v,t);h.mixin(k,{id:w+y++,canDelete:!1});c.jsonp&&((new RegExp("[?\x26]"+c.jsonp+"\x3d")).test(b)||(b+=(~b.indexOf("?")?"\x26":"?")+c.jsonp+"\x3d"+(c.frameDoc?"parent.":"")+w+"_callbacks."+k.id),k.canDelete=!0,A[k.id]=function(b){g.data=b;k.handleResponse(g)});f.notify&&f.notify.emit("send",g,k.promise.cancel);
if(!c.canAttach||c.canAttach(k)){var l=x._attach(k.id,b,c.frameDoc,function(b){if(!(b instanceof Error)){var d=Error("Error loading "+(b.target?b.target.src:"script"));d.source=b;b=d}k.reject(b);x._remove(k.id,c.frameDoc,!0)});if(!c.jsonp&&!c.checkString)var C=q(l,z,function(b){if("load"===b.type||B.test(l.readyState))C.remove(),k.scriptLoaded=b})}p(k);return e?k:k.promise}c.add("script-readystatechange",function(b,c){return"undefined"!==typeof c.createElement("script").onreadystatechange&&("undefined"===
typeof b.opera||"[object Opera]"!==b.opera.toString())});var w=m.id.replace(/[\/\.\-]/g,"_"),y=0,z=c("script-readystatechange")?"readystatechange":"load",B=/complete|loaded/,A=l.global[w+"_callbacks"]={},C=[];x.get=x;x._attach=function(c,d,e,g){e=e||b.doc;var r=e.createElement("script");if(g)q.once(r,"error",g);r.type="text/javascript";try{r.src=d}catch(I){g&&g(r)}r.id=c;r.async=!0;r.charset="utf-8";return e.getElementsByTagName("head")[0].appendChild(r)};x._remove=function(b,c,d){e.destroy(g.byId(b,
c));A[b]&&(d?A[b]=function(){delete A[b]}:delete A[b])};x._callbacksProperty=w+"_callbacks";return x})},"dojo/dom-construct":function(){define("exports ./_base/kernel ./sniff ./_base/window ./dom ./dom-attr".split(" "),function(m,p,f,l,k,h){function q(b,c){var d=c.parentNode;d&&d.insertBefore(b,c)}function g(b){if("innerHTML"in b)try{b.innerHTML="";return}catch(z){}for(var c;c=b.lastChild;)b.removeChild(c)}var e={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],
td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},c=/<\s*([\w\:]+)/,b={},d=0,r="__"+p._scopeName+"ToDomId",v;for(v in e)e.hasOwnProperty(v)&&(p=e[v],p.pre="option"==v?'\x3cselect multiple\x3d"multiple"\x3e':"\x3c"+p.join("\x3e\x3c")+"\x3e",p.post="\x3c/"+p.reverse().join("\x3e\x3c/")+"\x3e");var u;8>=f("ie")&&(u=function(b){b.__dojo_html5_tested="yes";var c=t("div",{innerHTML:"\x3cnav\x3ea\x3c/nav\x3e",
style:{visibility:"hidden"}},b.body);1!==c.childNodes.length&&"abbr article aside audio canvas details figcaption figure footer header hgroup mark meter nav output progress section summary time video".replace(/\b\w+\b/g,function(c){b.createElement(c)});x(c)});m.toDom=function(g,t){t=t||l.doc;var h=t[r];h||(t[r]=h=++d+"",b[h]=t.createElement("div"));8>=f("ie")&&!t.__dojo_html5_tested&&t.body&&u(t);g+="";var k=g.match(c),v=k?k[1].toLowerCase():"",h=b[h];if(k&&e[v])for(k=e[v],h.innerHTML=k.pre+g+k.post,
g=k.length;g;--g)h=h.firstChild;else h.innerHTML=g;if(1==h.childNodes.length)return h.removeChild(h.firstChild);for(g=t.createDocumentFragment();t=h.firstChild;)g.appendChild(t);return g};m.place=function(b,c,d){c=k.byId(c);"string"==typeof b&&(b=/^\s*</.test(b)?m.toDom(b,c.ownerDocument):k.byId(b));if("number"==typeof d){var e=c.childNodes;!e.length||e.length<=d?c.appendChild(b):q(b,e[0>d?0:d])}else switch(d){case "before":q(b,c);break;case "after":d=b;(e=c.parentNode)&&(e.lastChild==c?e.appendChild(d):
e.insertBefore(d,c.nextSibling));break;case "replace":c.parentNode.replaceChild(b,c);break;case "only":m.empty(c);c.appendChild(b);break;case "first":if(c.firstChild){q(b,c.firstChild);break}default:c.appendChild(b)}return b};var t=m.create=function(b,c,d,e){var g=l.doc;d&&(d=k.byId(d),g=d.ownerDocument);"string"==typeof b&&(b=g.createElement(b));c&&h.set(b,c);d&&m.place(b,d,e);return b};m.empty=function(b){g(k.byId(b))};var x=m.destroy=function(b){if(b=k.byId(b)){var c=b;b=b.parentNode;c.firstChild&&
g(c);b&&(f("ie")&&b.canHaveChildren&&"removeNode"in c?c.removeNode(!1):b.removeChild(c))}}})},"dojo/dom-attr":function(){define("exports ./sniff ./_base/lang ./dom ./dom-style ./dom-prop".split(" "),function(m,p,f,l,k,h){function q(c,b){c=c.getAttributeNode&&c.getAttributeNode(b);return!!c&&c.specified}var g={innerHTML:1,textContent:1,className:1,htmlFor:p("ie"),value:1},e={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};m.has=function(c,b){var d=b.toLowerCase();return g[h.names[d]||
b]||q(l.byId(c),e[d]||b)};m.get=function(c,b){c=l.byId(c);var d=b.toLowerCase(),r=h.names[d]||b,k=c[r];if(g[r]&&"undefined"!=typeof k)return k;if("textContent"==r)return h.get(c,r);if("href"!=r&&("boolean"==typeof k||f.isFunction(k)))return k;b=e[d]||b;return q(c,b)?c.getAttribute(b):null};m.set=function(c,b,d){c=l.byId(c);if(2==arguments.length){for(var r in b)m.set(c,r,b[r]);return c}r=b.toLowerCase();var v=h.names[r]||b,u=g[v];if("style"==v&&"string"!=typeof d)return k.set(c,d),c;if(u||"boolean"==
typeof d||f.isFunction(d))return h.set(c,b,d);c.setAttribute(e[r]||b,d);return c};m.remove=function(c,b){l.byId(c).removeAttribute(e[b.toLowerCase()]||b)};m.getNodeProp=function(c,b){c=l.byId(c);var d=b.toLowerCase(),g=h.names[d]||b;if(g in c&&"href"!=g)return c[g];b=e[d]||b;return q(c,b)?c.getAttribute(b):null}})},"dojo/dom-style":function(){define(["./sniff","./dom","./_base/window"],function(m,p,f){function l(c,e,g){e=e.toLowerCase();if("auto"==g){if("height"==e)return c.offsetHeight;if("width"==
e)return c.offsetWidth}if("fontweight"==e)switch(g){case 700:return"bold";default:return"normal"}e in b||(b[e]=d.test(e));return b[e]?q(c,g):g}var k,h={};k=m("webkit")?function(b){var c;if(1==b.nodeType){var d=b.ownerDocument.defaultView;c=d.getComputedStyle(b,null);!c&&b.style&&(b.style.display="",c=d.getComputedStyle(b,null))}return c||{}}:m("ie")&&(9>m("ie")||m("quirks"))?function(b){return 1==b.nodeType&&b.currentStyle?b.currentStyle:{}}:function(b){if(1===b.nodeType){var c=b.ownerDocument.defaultView;
return(c.opener?c:f.global.window).getComputedStyle(b,null)}return{}};h.getComputedStyle=k;var q;q=m("ie")?function(b,c){if(!c)return 0;if("medium"==c)return 4;if(c.slice&&"px"==c.slice(-2))return parseFloat(c);var d=b.style,e=b.runtimeStyle,g=d.left,r=e.left;e.left=b.currentStyle.left;try{d.left=c,c=d.pixelLeft}catch(z){c=0}d.left=g;e.left=r;return c}:function(b,c){return parseFloat(c)||0};h.toPixelValue=q;var g=function(b,c){try{return b.filters.item("DXImageTransform.Microsoft.Alpha")}catch(t){return c?
{}:null}},e=9>m("ie")||10>m("ie")&&m("quirks")?function(b){try{return g(b).Opacity/100}catch(u){return 1}}:function(b){return k(b).opacity},c=9>m("ie")||10>m("ie")&&m("quirks")?function(b,d){""===d&&(d=1);var e=100*d;1===d?(b.style.zoom="",g(b)&&(b.style.filter=b.style.filter.replace(/\s*progid:DXImageTransform.Microsoft.Alpha\([^\)]+?\)/i,""))):(b.style.zoom=1,g(b)?g(b,1).Opacity=e:b.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity\x3d"+e+")",g(b,1).Enabled=!0);if("tr"==b.tagName.toLowerCase())for(b=
b.firstChild;b;b=b.nextSibling)"td"==b.tagName.toLowerCase()&&c(b,d);return d}:function(b,c){return b.style.opacity=c},b={left:!0,top:!0},d=/margin|padding|width|height|max|min|offset/,r={cssFloat:1,styleFloat:1,"float":1};h.get=function(b,c){var d=p.byId(b),g=arguments.length;if(2==g&&"opacity"==c)return e(d);c=r[c]?"cssFloat"in d.style?"cssFloat":"styleFloat":c;var f=h.getComputedStyle(d);return 1==g?f:l(d,c,f[c]||d.style[c])};h.set=function(b,d,e){var g=p.byId(b),t=arguments.length,f="opacity"==
d;d=r[d]?"cssFloat"in g.style?"cssFloat":"styleFloat":d;if(3==t)return f?c(g,e):g.style[d]=e;for(var u in d)h.set(b,u,d[u]);return h.getComputedStyle(g)};return h})},"dojo/dom-prop":function(){define("exports ./_base/kernel ./sniff ./_base/lang ./dom ./dom-style ./dom-construct ./_base/connect".split(" "),function(m,p,f,l,k,h,q,g){function e(b){var c="";b=b.childNodes;for(var d=0,g;g=b[d];d++)8!=g.nodeType&&(c=1==g.nodeType?c+e(g):c+g.nodeValue);return c}var c={},b=1,d=p._scopeName+"attrid";f.add("dom-textContent",
function(b,c,d){return"textContent"in d});m.names={"class":"className","for":"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",textcontent:"textContent",valuetype:"valueType"};m.get=function(b,c){b=k.byId(b);var d=c.toLowerCase();c=m.names[d]||c;return"textContent"!=c||f("dom-textContent")?b[c]:e(b)};m.set=function(e,v,u){e=k.byId(e);if(2==arguments.length&&"string"!=typeof v){for(var r in v)m.set(e,r,v[r]);return e}r=v.toLowerCase();r=
m.names[r]||v;if("style"==r&&"string"!=typeof u)return h.set(e,u),e;if("innerHTML"==r)return f("ie")&&e.tagName.toLowerCase()in{col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}?(q.empty(e),e.appendChild(q.toDom(u,e.ownerDocument))):e[r]=u,e;if("textContent"==r&&!f("dom-textContent"))return q.empty(e),e.appendChild(e.ownerDocument.createTextNode(u)),e;if(l.isFunction(u)){var x=e[d];x||(x=b++,e[d]=x);c[x]||(c[x]={});var w=c[x][r];if(w)g.disconnect(w);else try{delete e[r]}catch(y){}u?c[x][r]=
g.connect(e,r,u):e[r]=null;return e}e[r]=u;return e}})},"dojo/_base/connect":function(){define("./kernel ../on ../topic ../aspect ./event ../mouse ./sniff ./lang ../keys".split(" "),function(m,p,f,l,k,h,q,g){function e(b,c,d,e,r){e=g.hitch(d,e);if(!b||!b.addEventListener&&!b.attachEvent)return l.after(b||m.global,c,e,!0);"string"==typeof c&&"on"==c.substring(0,2)&&(c=c.substring(2));b||(b=m.global);if(!r)switch(c){case "keypress":c=v;break;case "mouseenter":c=h.enter;break;case "mouseleave":c=h.leave}return p(b,
c,e,r)}function c(b){b.keyChar=b.charCode?String.fromCharCode(b.charCode):"";b.charOrCode=b.keyChar||b.keyCode}q.add("events-keypress-typed",function(){var b={charCode:0};try{b=document.createEvent("KeyboardEvent"),(b.initKeyboardEvent||b.initKeyEvent).call(b,"keypress",!0,!0,null,!1,!1,!1,!1,9,3)}catch(x){}return 0==b.charCode&&!q("opera")});var b={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113},d=q("mac")?"metaKey":"ctrlKey",r=function(b,d){d=
g.mixin({},b,d);c(d);d.preventDefault=function(){b.preventDefault()};d.stopPropagation=function(){b.stopPropagation()};return d},v;v=q("events-keypress-typed")?function(c,d){var e=p(c,"keydown",function(c){var e=c.keyCode,g=13!=e&&32!=e&&(27!=e||!q("ie"))&&(48>e||90<e)&&(96>e||111<e)&&(186>e||192<e)&&(219>e||222<e)&&229!=e;if(g||c.ctrlKey){g=g?0:e;if(c.ctrlKey){if(3==e||13==e)return d.call(c.currentTarget,c);g=95<g&&106>g?g-48:!c.shiftKey&&65<=g&&90>=g?g+32:b[g]||g}e=r(c,{type:"keypress",faux:!0,
charCode:g});d.call(c.currentTarget,e);if(q("ie"))try{c.keyCode=e.keyCode}catch(C){}}}),g=p(c,"keypress",function(b){var c=b.charCode;b=r(b,{charCode:32<=c?c:0,faux:!0});return d.call(this,b)});return{remove:function(){e.remove();g.remove()}}}:q("opera")?function(b,c){return p(b,"keypress",function(b){var d=b.which;3==d&&(d=99);d=32>d&&!b.shiftKey?0:d;b.ctrlKey&&!b.shiftKey&&65<=d&&90>=d&&(d+=32);return c.call(this,r(b,{charCode:d}))})}:function(b,d){return p(b,"keypress",function(b){c(b);return d.call(this,
b)})};var u={_keypress:v,connect:function(b,c,d,g,r){var h=arguments,f=[],t=0;f.push("string"==typeof h[0]?null:h[t++],h[t++]);var u=h[t+1];f.push("string"==typeof u||"function"==typeof u?h[t++]:null,h[t++]);for(u=h.length;t<u;t++)f.push(h[t]);return e.apply(this,f)},disconnect:function(b){b&&b.remove()},subscribe:function(b,c,d){return f.subscribe(b,g.hitch(c,d))},publish:function(b,c){return f.publish.apply(f,[b].concat(c))},connectPublisher:function(b,c,d){var e=function(){u.publish(b,arguments)};
return d?u.connect(c,d,e):u.connect(c,e)},isCopyKey:function(b){return b[d]}};u.unsubscribe=u.disconnect;g.mixin(m,u);return u})},"dojo/topic":function(){define(["./Evented"],function(m){var p=new m;return{publish:function(f,l){return p.emit.apply(p,arguments)},subscribe:function(f,l){return p.on.apply(p,arguments)}}})},"dojo/_base/event":function(){define(["./kernel","../on","../has","../dom-geometry"],function(m,p,f,l){if(p._fixEvent){var k=p._fixEvent;p._fixEvent=function(h,g){(h=k(h,g))&&l.normalizeEvent(h);
return h}}var h={fix:function(h,g){return p._fixEvent?p._fixEvent(h,g):h},stop:function(h){f("dom-addeventlistener")||h&&h.preventDefault?(h.preventDefault(),h.stopPropagation()):(h=h||window.event,h.cancelBubble=!0,p._preventDefault.call(h))}};m.fixEvent=h.fix;m.stopEvent=h.stop;return h})},"dojo/dom-geometry":function(){define(["./sniff","./_base/window","./dom","./dom-style"],function(m,p,f,l){function k(c,b,d,e,g,h){h=h||"px";c=c.style;isNaN(b)||(c.left=b+h);isNaN(d)||(c.top=d+h);0<=e&&(c.width=
e+h);0<=g&&(c.height=g+h)}function h(c){return"button"==c.tagName.toLowerCase()||"input"==c.tagName.toLowerCase()&&"button"==(c.getAttribute("type")||"").toLowerCase()}function q(c){return"border-box"==g.boxModel||"table"==c.tagName.toLowerCase()||h(c)}var g={boxModel:"content-box"};m("ie")&&(g.boxModel="BackCompat"==document.compatMode?"border-box":"content-box");g.getPadExtents=function(c,b){c=f.byId(c);var d=b||l.getComputedStyle(c),e=l.toPixelValue;b=e(c,d.paddingLeft);var g=e(c,d.paddingTop),
h=e(c,d.paddingRight);c=e(c,d.paddingBottom);return{l:b,t:g,r:h,b:c,w:b+h,h:g+c}};g.getBorderExtents=function(c,b){c=f.byId(c);var d=l.toPixelValue,e=b||l.getComputedStyle(c);b="none"!=e.borderLeftStyle?d(c,e.borderLeftWidth):0;var g="none"!=e.borderTopStyle?d(c,e.borderTopWidth):0,h="none"!=e.borderRightStyle?d(c,e.borderRightWidth):0;c="none"!=e.borderBottomStyle?d(c,e.borderBottomWidth):0;return{l:b,t:g,r:h,b:c,w:b+h,h:g+c}};g.getPadBorderExtents=function(c,b){c=f.byId(c);var d=b||l.getComputedStyle(c);
b=g.getPadExtents(c,d);c=g.getBorderExtents(c,d);return{l:b.l+c.l,t:b.t+c.t,r:b.r+c.r,b:b.b+c.b,w:b.w+c.w,h:b.h+c.h}};g.getMarginExtents=function(c,b){c=f.byId(c);var d=b||l.getComputedStyle(c),e=l.toPixelValue;b=e(c,d.marginLeft);var g=e(c,d.marginTop),h=e(c,d.marginRight);c=e(c,d.marginBottom);return{l:b,t:g,r:h,b:c,w:b+h,h:g+c}};g.getMarginBox=function(c,b){c=f.byId(c);b=b||l.getComputedStyle(c);b=g.getMarginExtents(c,b);var d=c.offsetLeft-b.l,e=c.offsetTop-b.t,h=c.parentNode,u=l.toPixelValue;
8==m("ie")&&!m("quirks")&&h&&(h=l.getComputedStyle(h),d-="none"!=h.borderLeftStyle?u(c,h.borderLeftWidth):0,e-="none"!=h.borderTopStyle?u(c,h.borderTopWidth):0);return{l:d,t:e,w:c.offsetWidth+b.w,h:c.offsetHeight+b.h}};g.getContentBox=function(c,b){c=f.byId(c);var d=b||l.getComputedStyle(c);b=c.clientWidth;var e,h=g.getPadExtents(c,d);e=g.getBorderExtents(c,d);var d=c.offsetLeft+h.l+e.l,u=c.offsetTop+h.t+e.t;b?e=c.clientHeight:(b=c.offsetWidth-e.w,e=c.offsetHeight-e.h);if(8==m("ie")&&!m("quirks")){var t=
c.parentNode,k=l.toPixelValue;t&&(t=l.getComputedStyle(t),d-="none"!=t.borderLeftStyle?k(c,t.borderLeftWidth):0,u-="none"!=t.borderTopStyle?k(c,t.borderTopWidth):0)}return{l:d,t:u,w:b-h.w,h:e-h.h}};g.setContentSize=function(c,b,d){c=f.byId(c);var e=b.w;b=b.h;q(c)&&(d=g.getPadBorderExtents(c,d),0<=e&&(e+=d.w),0<=b&&(b+=d.h));k(c,NaN,NaN,e,b)};var e={l:0,t:0,w:0,h:0};g.setMarginBox=function(c,b,d){c=f.byId(c);var r=d||l.getComputedStyle(c);d=b.w;var v=b.h,u=q(c)?e:g.getPadBorderExtents(c,r),r=g.getMarginExtents(c,
r);if(m("webkit")&&h(c)){var t=c.style;0<=d&&!t.width&&(t.width="4px");0<=v&&!t.height&&(t.height="4px")}0<=d&&(d=Math.max(d-u.w-r.w,0));0<=v&&(v=Math.max(v-u.h-r.h,0));k(c,b.l,b.t,d,v)};g.isBodyLtr=function(c){c=c||p.doc;return"ltr"==(p.body(c).dir||c.documentElement.dir||"ltr").toLowerCase()};g.docScroll=function(c){c=c||p.doc;var b=p.doc.parentWindow||p.doc.defaultView;return"pageXOffset"in b?{x:b.pageXOffset,y:b.pageYOffset}:(b=m("quirks")?p.body(c):c.documentElement)&&{x:g.fixIeBiDiScrollLeft(b.scrollLeft||
0,c),y:b.scrollTop||0}};g.getIeDocumentElementOffset=function(c){return{x:0,y:0}};g.fixIeBiDiScrollLeft=function(c,b){b=b||p.doc;var d=m("ie");if(d&&!g.isBodyLtr(b)){var e=m("quirks");b=e?p.body(b):b.documentElement;var h=p.global;6==d&&!e&&h.frameElement&&b.scrollHeight>b.clientHeight&&(c+=b.clientLeft);return 8>d||e?c+b.clientWidth-b.scrollWidth:-c}return c};g.position=function(c,b){c=f.byId(c);var d=p.body(c.ownerDocument),e=c.getBoundingClientRect(),e={x:e.left,y:e.top,w:e.right-e.left,h:e.bottom-
e.top};9>m("ie")&&(e.x-=m("quirks")?d.clientLeft+d.offsetLeft:0,e.y-=m("quirks")?d.clientTop+d.offsetTop:0);b&&(c=g.docScroll(c.ownerDocument),e.x+=c.x,e.y+=c.y);return e};g.getMarginSize=function(c,b){c=f.byId(c);b=g.getMarginExtents(c,b||l.getComputedStyle(c));c=c.getBoundingClientRect();return{w:c.right-c.left+b.w,h:c.bottom-c.top+b.h}};g.normalizeEvent=function(c){"layerX"in c||(c.layerX=c.offsetX,c.layerY=c.offsetY);if(!("pageX"in c)){var b=c.target,b=b&&b.ownerDocument||document,d=m("quirks")?
b.body:b.documentElement;c.pageX=c.clientX+g.fixIeBiDiScrollLeft(d.scrollLeft||0,b);c.pageY=c.clientY+(d.scrollTop||0)}};return g})},"dojo/mouse":function(){define(["./_base/kernel","./on","./has","./dom","./_base/window"],function(m,p,f,l,k){function h(f,g){var e=function(c,b){return p(c,f,function(d){if(g)return g(d,b);if(!l.isDescendant(d.relatedTarget,c))return b.call(this,d)})};e.bubble=function(c){return h(f,function(b,d){var e=c(b.target),g=b.relatedTarget;if(e&&e!=(g&&1==g.nodeType&&c(g)))return d.call(e,
b)})};return e}f.add("dom-quirks",k.doc&&"BackCompat"==k.doc.compatMode);f.add("events-mouseenter",k.doc&&"onmouseenter"in k.doc.createElement("div"));f.add("events-mousewheel",k.doc&&"onmousewheel"in k.doc);k=f("dom-quirks")&&f("ie")||!f("dom-addeventlistener")?{LEFT:1,MIDDLE:4,RIGHT:2,isButton:function(h,g){return h.button&g},isLeft:function(h){return h.button&1},isMiddle:function(h){return h.button&4},isRight:function(h){return h.button&2}}:{LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(h,g){return h.button==
g},isLeft:function(h){return 0==h.button},isMiddle:function(h){return 1==h.button},isRight:function(h){return 2==h.button}};m.mouseButtons=k;m=f("events-mousewheel")?"mousewheel":function(h,g){return p(h,"DOMMouseScroll",function(e){e.wheelDelta=-e.detail;g.call(this,e)})};return{_eventHandler:h,enter:h("mouseover"),leave:h("mouseout"),wheel:m,isLeft:k.isLeft,isMiddle:k.isMiddle,isRight:k.isRight}})},"dojo/keys":function(){define(["./_base/kernel","./sniff"],function(m,p){return m.keys={BACKSPACE:8,
TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:p("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,
F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:p("mac")&&!p("air")?p("safari")?91:224:17}})},"dojo/main":function(){define("./_base/kernel ./has require ./sniff ./_base/lang ./_base/array ./_base/config ./ready ./_base/declare ./_base/connect ./_base/Deferred ./_base/json ./_base/Color ./has!dojo-firebug?./_firebug/firebug ./_base/browser ./_base/loader".split(" "),
function(m,p,f,l,k,h,q,g){q.isDebug&&f(["./_firebug/firebug"]);var e=q.require;e&&(e=h.map(k.isArray(e)?e:[e],function(c){return c.replace(/\./g,"/")}),m.isAsync?f(e):g(1,function(){f(e)}));return m})},"dojo/ready":function(){define(["./_base/kernel","./has","require","./domReady","./_base/lang"],function(m,p,f,l,k){var h=0,q=[],g=0;p=function(){h=1;m._postLoad=m.config.afterOnLoad=!0;e()};var e=function(){if(!g){for(g=1;h&&(!l||0==l._Q.length)&&(f.idle?f.idle():1)&&q.length;){var b=q.shift();try{b()}catch(r){if(r.info=
r.message,f.signal)f.signal("error",r);else throw r;}}g=0}};f.on&&f.on("idle",e);l&&(l._onQEmpty=e);var c=m.ready=m.addOnLoad=function(b,c,g){var d=k._toArray(arguments);"number"!=typeof b?(g=c,c=b,b=1E3):d.shift();g=g?k.hitch.apply(m,d):function(){c()};g.priority=b;for(d=0;d<q.length&&b>=q[d].priority;d++);q.splice(d,0,g);e()},b=m.config.addOnLoad;if(b)c[k.isArray(b)?"apply":"call"](m,b);m.config.parseOnLoad&&!m.isAsync&&c(99,function(){m.parser||(m.deprecated("Add explicit require(['dojo/parser']);",
"","2.0"),f(["dojo/parser"]))});l?l(p):p();return c})},"dojo/domReady":function(){define(["./global","./has"],function(m,p){function f(b){e.push(b);g&&l()}function l(){if(!c){for(c=!0;e.length;)try{e.shift()(k)}catch(t){}c=!1;f._onQEmpty()}}var k=document,h={loaded:1,complete:1},q="string"!=typeof k.readyState,g=!!h[k.readyState],e=[],c;f.load=function(b,c,d){f(d)};f._Q=e;f._onQEmpty=function(){};q&&(k.readyState="loading");if(!g){var b=[],d=function(b){b=b||m.event;g||"readystatechange"==b.type&&
!h[k.readyState]||(q&&(k.readyState="complete"),g=1,l())},r=function(b,c){b.addEventListener(c,d,!1);e.push(function(){b.removeEventListener(c,d,!1)})};if(!p("dom-addeventlistener")){var r=function(b,c){c="on"+c;b.attachEvent(c,d);e.push(function(){b.detachEvent(c,d)})},v=k.createElement("div");try{v.doScroll&&null===m.frameElement&&b.push(function(){try{return v.doScroll("left"),1}catch(t){}})}catch(t){}}r(k,"DOMContentLoaded");r(m,"load");"onreadystatechange"in k?r(k,"readystatechange"):q||b.push(function(){return h[k.readyState]});
if(b.length){var u=function(){if(!g){for(var c=b.length;c--;)if(b[c]()){d("poller");return}setTimeout(u,30)}};u()}}return f})},"dojo/_base/declare":function(){define(["./kernel","../has","./lang"],function(m,p,f){function l(b,c){throw Error("declare"+(c?" "+c:"")+": "+b);}function k(b,c){for(var d=[],e=[{cls:0,refs:[]}],g={},r=1,h=b.length,f=0,t,u,k,q,v;f<h;++f){(t=b[f])?"[object Function]"!=A.call(t)&&l("mixin #"+f+" is not a callable constructor.",c):l("mixin #"+f+" is unknown. Did you use dojo.require to pull it in?",
c);u=t._meta?t._meta.bases:[t];k=0;for(t=u.length-1;0<=t;--t)q=u[t].prototype,q.hasOwnProperty("declaredClass")||(q.declaredClass="uniqName_"+F++),q=q.declaredClass,g.hasOwnProperty(q)||(g[q]={count:0,refs:[],cls:u[t]},++r),q=g[q],k&&k!==q&&(q.refs.push(k),++k.count),k=q;++k.count;e[0].refs.push(k)}for(;e.length;){k=e.pop();d.push(k.cls);for(--r;v=k.refs,1==v.length;){k=v[0];if(!k||--k.count){k=0;break}d.push(k.cls);--r}if(k)for(f=0,h=v.length;f<h;++f)k=v[f],--k.count||e.push(k)}r&&l("can't build consistent linearization",
c);t=b[0];d[0]=t?t._meta&&t===d[d.length-t._meta.bases.length]?t._meta.bases.length:1:0;return d}function h(b,c,d,e){var g,r,h,f,t,u,k=this._inherited=this._inherited||{};"string"===typeof b&&(g=b,b=c,c=d,d=e);if("function"===typeof b)h=b,b=c,c=d;else try{h=b.callee}catch(U){if(U instanceof TypeError)l("strict mode inherited() requires the caller function to be passed before arguments",this.declaredClass);else throw U;}(g=g||h.nom)||l("can't deduce a name to call inherited()",this.declaredClass);
d=e=0;f=this.constructor._meta;e=f.bases;u=k.p;if("constructor"!=g){if(k.c!==h&&(u=0,t=e[0],f=t._meta,f.hidden[g]!==h)){(r=f.chains)&&"string"==typeof r[g]&&l("calling chained method with inherited: "+g,this.declaredClass);do if(f=t._meta,r=t.prototype,f&&(r[g]===h&&r.hasOwnProperty(g)||f.hidden[g]===h))break;while(t=e[++u]);u=t?u:-1}if(t=e[++u])if(r=t.prototype,t._meta&&r.hasOwnProperty(g))d=r[g];else{h=B[g];do if(r=t.prototype,(d=r[g])&&(t._meta?r.hasOwnProperty(g):d!==h))break;while(t=e[++u])}d=
t&&d||B[g]}else{if(k.c!==h&&(u=0,(f=e[0]._meta)&&f.ctor!==h)){for((r=f.chains)&&"manual"===r.constructor||l("calling chained constructor with inherited",this.declaredClass);(t=e[++u])&&(!(f=t._meta)||f.ctor!==h););u=t?u:-1}for(;(t=e[++u])&&!(d=(f=t._meta)?f.ctor:t););d=t&&d}k.c=d;k.p=u;if(d)return!0===c?d:d.apply(this,c||b)}function q(b,c,d){return"string"===typeof b?"function"===typeof c?this.__inherited(b,c,d,!0):this.__inherited(b,c,!0):"function"===typeof b?this.__inherited(b,c,!0):this.__inherited(b,
!0)}function g(b,c,d,e){var g=this.getInherited(b,c,d);if(g)return g.apply(this,e||d||c||b)}function e(b){for(var c=this.constructor._meta.bases,d=0,e=c.length;d<e;++d)if(c[d]===b)return!0;return this instanceof b}function c(b,c){for(var d in c)"constructor"!=d&&c.hasOwnProperty(d)&&(b[d]=c[d]);if(p("bug-for-in-skips-shadowed"))for(var e=f._extraNames,g=e.length;g;)d=e[--g],"constructor"!=d&&c.hasOwnProperty(d)&&(b[d]=c[d])}function b(b){y.safeMixin(this.prototype,b);return this}function d(b,c){b instanceof
Array||"function"===typeof b||(c=b,b=void 0);c=c||{};b=b||[];return y([this].concat(b),c)}function r(b,c){return function(){var d=arguments,e=d,g=d[0],r,h;h=b.length;var f;if(!(this instanceof d.callee))return w(d);if(c&&(g&&g.preamble||this.preamble))for(f=Array(b.length),f[0]=d,r=0;;){(g=d[0])&&(g=g.preamble)&&(d=g.apply(this,d)||d);g=b[r].prototype;(g=g.hasOwnProperty("preamble")&&g.preamble)&&(d=g.apply(this,d)||d);if(++r==h)break;f[r]=d}for(r=h-1;0<=r;--r)g=b[r],(g=(h=g._meta)?h.ctor:g)&&g.apply(this,
f?f[r]:d);(g=this.postscript)&&g.apply(this,e)}}function v(b,c){return function(){var d=arguments,e=d,g=d[0];if(!(this instanceof d.callee))return w(d);c&&(g&&(g=g.preamble)&&(e=g.apply(this,e)||e),(g=this.preamble)&&g.apply(this,e));b&&b.apply(this,d);(g=this.postscript)&&g.apply(this,d)}}function u(b){return function(){var c=arguments,d=0,e,g;if(!(this instanceof c.callee))return w(c);for(;e=b[d];++d)if(e=(g=e._meta)?g.ctor:e){e.apply(this,c);break}(e=this.postscript)&&e.apply(this,c)}}function t(b,
c,d){return function(){var e,g,r=0,h=1;for(d&&(r=c.length-1,h=-1);e=c[r];r+=h)g=e._meta,(e=(g?g.hidden:e.prototype)[b])&&e.apply(this,arguments)}}function x(b){C.prototype=b.prototype;b=new C;C.prototype=null;return b}function w(b){var c=b.callee,d=x(c);c.apply(d,b);return d}function y(g,w,C){"string"!=typeof g&&(C=w,w=g,g="");C=C||{};var m,F,G,H,D,M,J,K=1,U=w;"[object Array]"==A.call(w)?(M=k(w,g),G=M[0],K=M.length-G,w=M[K]):(M=[0],w?"[object Function]"==A.call(w)?(G=w._meta,M=M.concat(G?G.bases:
w)):l("base class is not a callable constructor.",g):null!==w&&l("unknown base class. Did you use dojo.require to pull it in?",g));if(w)for(F=K-1;;--F){m=x(w);if(!F)break;G=M[F];(G._meta?c:z)(m,G.prototype);H=p("csp-restrictions")?function(){}:new Function;H.superclass=w;H.prototype=m;w=m.constructor=H}else m={};y.safeMixin(m,C);G=C.constructor;G!==B.constructor&&(G.nom="constructor",m.constructor=G);for(F=K-1;F;--F)(G=M[F]._meta)&&G.chains&&(J=z(J||{},G.chains));m["-chains-"]&&(J=z(J||{},m["-chains-"]));
w&&w.prototype&&w.prototype["-chains-"]&&(J=z(J||{},w.prototype["-chains-"]));G=!J||!J.hasOwnProperty("constructor");M[0]=H=J&&"manual"===J.constructor?u(M):1==M.length?v(C.constructor,G):r(M,G);H._meta={bases:M,hidden:C,chains:J,parents:U,ctor:C.constructor};H.superclass=w&&w.prototype;H.extend=b;H.createSubclass=d;H.prototype=m;m.constructor=H;m.getInherited=q;m.isInstanceOf=e;m.inherited=E;m.__inherited=h;g&&(m.declaredClass=g,f.setObject(g,H));if(J)for(D in J)m[D]&&"string"==typeof J[D]&&"constructor"!=
D&&(G=m[D]=t(D,M,"after"===J[D]),G.nom=D);return H}var z=f.mixin,B=Object.prototype,A=B.toString,C,F=0;C=p("csp-restrictions")?function(){}:new Function;var E=m.config.isDebug?g:h;m.safeMixin=y.safeMixin=function(b,c){var d,e;for(d in c)e=c[d],e===B[d]&&d in B||"constructor"==d||("[object Function]"==A.call(e)&&(e.nom=d),b[d]=e);if(p("bug-for-in-skips-shadowed")&&c)for(var g=f._extraNames,r=g.length;r;)d=g[--r],e=c[d],e===B[d]&&d in B||"constructor"==d||("[object Function]"==A.call(e)&&(e.nom=d),
b[d]=e);return b};return m.declare=y})},"dojo/_base/Color":function(){define(["./kernel","./lang","./array","./config"],function(m,p,f,l){var k=m.Color=function(h){h&&this.setColor(h)};k.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:l.transparentColor||
[0,0,0,0]};p.extend(k,{r:255,g:255,b:255,a:1,_set:function(h,f,g,e){this.r=h;this.g=f;this.b=g;this.a=e},setColor:function(h){p.isString(h)?k.fromString(h,this):p.isArray(h)?k.fromArray(h,this):(this._set(h.r,h.g,h.b,h.a),h instanceof k||this.sanitize());return this},sanitize:function(){return this},toRgb:function(){return[this.r,this.g,this.b]},toRgba:function(){return[this.r,this.g,this.b,this.a]},toHex:function(){return"#"+f.map(["r","g","b"],function(h){h=this[h].toString(16);return 2>h.length?
"0"+h:h},this).join("")},toCss:function(h){var f=this.r+", "+this.g+", "+this.b;return(h?"rgba("+f+", "+this.a:"rgb("+f)+")"},toString:function(){return this.toCss(!0)}});k.blendColors=m.blendColors=function(h,f,g,e){e=e||new k;e.r=Math.round(h.r+(f.r-h.r)*g);e.g=Math.round(h.g+(f.g-h.g)*g);e.b=Math.round(h.b+(f.b-h.b)*g);e.a=h.a+(f.a-h.a)*g;return e.sanitize()};k.fromRgb=m.colorFromRgb=function(h,f){return(h=h.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/))&&k.fromArray(h[1].split(/\s*,\s*/),f)};
k.fromHex=m.colorFromHex=function(h,q){var g=q||new k,e=4==h.length?4:8,c=(1<<e)-1;h=Number("0x"+h.substr(1));if(isNaN(h))return null;f.forEach(["b","g","r"],function(b){var d=h&c;h>>=e;g[b]=4==e?17*d:d});g.a=1;return g};k.fromArray=m.colorFromArray=function(h,f){f=f||new k;f._set(Number(h[0]),Number(h[1]),Number(h[2]),Number(h[3]));isNaN(f.a)&&(f.a=1);return f.sanitize()};k.fromString=m.colorFromString=function(h,f){var g=k.named[h];return g&&k.fromArray(g,f)||k.fromRgb(h,f)||k.fromHex(h,f)};return k})},
"dojo/_base/browser":function(){require.has&&require.has.add("config-selectorEngine","acme");define("../ready ./kernel ./connect ./unload ./window ./event ./html ./NodeList ../query ./xhr ./fx".split(" "),function(m){return m})},"dojo/_base/unload":function(){define(["./kernel","./lang","../on"],function(m,p,f){var l=window,k={addOnWindowUnload:function(h,k){m.windowUnloaded||f(l,"unload",m.windowUnloaded=function(){});f(l,"unload",p.hitch(h,k))},addOnUnload:function(h,k){f(l,"beforeunload",p.hitch(h,
k))}};m.addOnWindowUnload=k.addOnWindowUnload;m.addOnUnload=k.addOnUnload;return k})},"dojo/_base/html":function(){define("./kernel ../dom ../dom-style ../dom-attr ../dom-prop ../dom-class ../dom-construct ../dom-geometry".split(" "),function(m,p,f,l,k,h,q,g){m.byId=p.byId;m.isDescendant=p.isDescendant;m.setSelectable=p.setSelectable;m.getAttr=l.get;m.setAttr=l.set;m.hasAttr=l.has;m.removeAttr=l.remove;m.getNodeProp=l.getNodeProp;m.attr=function(e,c,b){return 2==arguments.length?l["string"==typeof c?
"get":"set"](e,c):l.set(e,c,b)};m.hasClass=h.contains;m.addClass=h.add;m.removeClass=h.remove;m.toggleClass=h.toggle;m.replaceClass=h.replace;m._toDom=m.toDom=q.toDom;m.place=q.place;m.create=q.create;m.empty=function(e){q.empty(e)};m._destroyElement=m.destroy=function(e){q.destroy(e)};m._getPadExtents=m.getPadExtents=g.getPadExtents;m._getBorderExtents=m.getBorderExtents=g.getBorderExtents;m._getPadBorderExtents=m.getPadBorderExtents=g.getPadBorderExtents;m._getMarginExtents=m.getMarginExtents=g.getMarginExtents;
m._getMarginSize=m.getMarginSize=g.getMarginSize;m._getMarginBox=m.getMarginBox=g.getMarginBox;m.setMarginBox=g.setMarginBox;m._getContentBox=m.getContentBox=g.getContentBox;m.setContentSize=g.setContentSize;m._isBodyLtr=m.isBodyLtr=g.isBodyLtr;m._docScroll=m.docScroll=g.docScroll;m._getIeDocumentElementOffset=m.getIeDocumentElementOffset=g.getIeDocumentElementOffset;m._fixIeBiDiScrollLeft=m.fixIeBiDiScrollLeft=g.fixIeBiDiScrollLeft;m.position=g.position;m.marginBox=function(e,c){return c?g.setMarginBox(e,
c):g.getMarginBox(e)};m.contentBox=function(e,c){return c?g.setContentSize(e,c):g.getContentBox(e)};m.coords=function(e,c){m.deprecated("dojo.coords()","Use dojo.position() or dojo.marginBox().");e=p.byId(e);var b=f.getComputedStyle(e),b=g.getMarginBox(e,b);e=g.position(e,c);b.x=e.x;b.y=e.y;return b};m.getProp=k.get;m.setProp=k.set;m.prop=function(e,c,b){return 2==arguments.length?k["string"==typeof c?"get":"set"](e,c):k.set(e,c,b)};m.getStyle=f.get;m.setStyle=f.set;m.getComputedStyle=f.getComputedStyle;
m.__toPixelValue=m.toPixelValue=f.toPixelValue;m.style=function(e,c,b){switch(arguments.length){case 1:return f.get(e);case 2:return f["string"==typeof c?"get":"set"](e,c)}return f.set(e,c,b)};return m})},"dojo/dom-class":function(){define(["./_base/lang","./_base/array","./dom"],function(m,p,f){function l(e){if("string"==typeof e||e instanceof String){if(e&&!h.test(e))return q[0]=e,q;e=e.split(h);e.length&&!e[0]&&e.shift();e.length&&!e[e.length-1]&&e.pop();return e}return e?p.filter(e,function(c){return c}):
[]}var k,h=/\s+/,q=[""],g={};return k={contains:function(e,c){return 0<=(" "+f.byId(e).className+" ").indexOf(" "+c+" ")},add:function(e,c){e=f.byId(e);c=l(c);var b=e.className,d,b=b?" "+b+" ":" ";d=b.length;for(var g=0,h=c.length,u;g<h;++g)(u=c[g])&&0>b.indexOf(" "+u+" ")&&(b+=u+" ");d<b.length&&(e.className=b.substr(1,b.length-2))},remove:function(e,c){e=f.byId(e);var b;if(void 0!==c){c=l(c);b=" "+e.className+" ";for(var d=0,g=c.length;d<g;++d)b=b.replace(" "+c[d]+" "," ");b=m.trim(b)}else b="";
e.className!=b&&(e.className=b)},replace:function(e,c,b){e=f.byId(e);g.className=e.className;k.remove(g,b);k.add(g,c);e.className!==g.className&&(e.className=g.className)},toggle:function(e,c,b){e=f.byId(e);if(void 0===b){c=l(c);for(var d=0,g=c.length,h;d<g;++d)h=c[d],k[k.contains(e,h)?"remove":"add"](e,h)}else k[b?"add":"remove"](e,c);return b}}})},"dojo/_base/NodeList":function(){define(["./kernel","../query","./array","./html","../NodeList-dom"],function(m,p,f){p=p.NodeList;var l=p.prototype;l.connect=
p._adaptAsForEach(function(){return m.connect.apply(this,arguments)});l.coords=p._adaptAsMap(m.coords);p.events="blur focus change click error keydown keypress keyup load mousedown mouseenter mouseleave mousemove mouseout mouseover mouseup submit".split(" ");f.forEach(p.events,function(f){var h="on"+f;l[h]=function(f,g){return this.connect(h,f,g)}});return m.NodeList=p})},"dojo/query":function(){define("./_base/kernel ./has ./dom ./on ./_base/array ./_base/lang ./selector/_loader ./selector/_loader!default".split(" "),
function(m,p,f,l,k,h,q,g){function e(b,c){var d=function(d,e){if("string"==typeof e&&(e=f.byId(e),!e))return new c([]);d="string"==typeof d?b(d,e):d?d.end&&d.on?d:[d]:[];return d.end&&d.on?d:new c(d)};d.matches=b.match||function(b,c,e){return 0<d.filter([b],c,e).length};d.filter=b.filter||function(b,c,e){return d(c,e).filter(function(c){return-1<k.indexOf(b,c)})};if("function"!=typeof b){var e=b.search;b=function(b,c){return e(c||document,b)}}return d}p.add("array-extensible",function(){return 1==
h.delegate([],{length:1}).length&&!p("bug-for-in-skips-shadowed")});var c=Array.prototype,b=c.slice,d=c.concat,r=k.forEach,v=function(c,d,e){d=[0].concat(b.call(d,0));e=e||m.global;return function(b){d[0]=b;return c.apply(e,d)}},u=function(b){var c=this instanceof t&&p("array-extensible");"number"==typeof b&&(b=Array(b));var d=b&&"length"in b?b:arguments;if(c||!d.sort){for(var e=c?this:[],g=e.length=d.length,r=0;r<g;r++)e[r]=d[r];if(c)return e;d=e}h._mixin(d,x);d._NodeListCtor=function(b){return t(b)};
return d},t=u,x=t.prototype=p("array-extensible")?[]:{};t._wrap=x._wrap=function(b,c,d){b=new (d||this._NodeListCtor||t)(b);return c?b._stash(c):b};t._adaptAsMap=function(b,c){return function(){return this.map(v(b,arguments,c))}};t._adaptAsForEach=function(b,c){return function(){this.forEach(v(b,arguments,c));return this}};t._adaptAsFilter=function(b,c){return function(){return this.filter(v(b,arguments,c))}};t._adaptWithCondition=function(b,c,d){return function(){var e=arguments,g=v(b,e,d);if(c.call(d||
m.global,e))return this.map(g);this.forEach(g);return this}};r(["slice","splice"],function(b){var d=c[b];x[b]=function(){return this._wrap(d.apply(this,arguments),"slice"==b?this:null)}});r(["indexOf","lastIndexOf","every","some"],function(c){var d=k[c];x[c]=function(){return d.apply(m,[this].concat(b.call(arguments,0)))}});h.extend(u,{constructor:t,_NodeListCtor:t,toString:function(){return this.join(",")},_stash:function(b){this._parent=b;return this},on:function(b,c){var d=this.map(function(d){return l(d,
b,c)});d.remove=function(){for(var b=0;b<d.length;b++)d[b].remove()};return d},end:function(){return this._parent?this._parent:new this._NodeListCtor(0)},concat:function(c){var e=b.call(this,0),g=k.map(arguments,function(c){return b.call(c,0)});return this._wrap(d.apply(e,g),this)},map:function(b,c){return this._wrap(k.map(this,b,c),this)},forEach:function(b,c){r(this,b,c);return this},filter:function(b){var c=arguments,d=this,e=0;if("string"==typeof b){d=w._filterResult(this,c[0]);if(1==c.length)return d._stash(this);
e=1}return this._wrap(k.filter(d,c[e],c[e+1]),this)},instantiate:function(b,c){var d=h.isFunction(b)?b:h.getObject(b);c=c||{};return this.forEach(function(b){new d(c,b)})},at:function(){var b=new this._NodeListCtor(0);r(arguments,function(c){0>c&&(c=this.length+c);this[c]&&b.push(this[c])},this);return b._stash(this)}});var w=e(g,u);m.query=e(g,function(b){return u(b)});w.load=function(b,c,d){q.load(b,c,function(b){d(e(b,u))})};m._filterQueryResult=w._filterResult=function(b,c,d){return new u(w.filter(b,
c,d))};m.NodeList=w.NodeList=u;return w})},"dojo/selector/acme":function(){define(["../dom","../sniff","../_base/array","../_base/lang","../_base/window"],function(m,p,f,l,k){var h=l.trim,q=f.forEach,g="BackCompat"==k.doc.compatMode,e=!1,c=function(){return!0},b=function(b){b=0<="\x3e~+".indexOf(b.slice(-1))?b+" * ":b+" ";for(var c=function(c,d){return h(b.slice(c,d))},d=[],g=-1,r=-1,f=-1,t=-1,u=-1,k=-1,q=-1,v,l="",x="",w,y=0,C=b.length,m=null,B=null,A=function(){0<=k&&(m.id=c(k,y).replace(/\\/g,
""),k=-1);if(0<=q){var b=q==y?null:c(q,y);m[0>"\x3e~+".indexOf(b)?"tag":"oper"]=b;q=-1}0<=u&&(m.classes.push(c(u+1,y).replace(/\\/g,"")),u=-1)};l=x,x=b.charAt(y),y<C;y++)"\\"!=l&&(m||(w=y,m={query:null,pseudos:[],attrs:[],classes:[],tag:null,oper:null,id:null,getTag:function(){return e?this.otag:this.tag}},q=y),v?x==v&&(v=null):"'"==x||'"'==x?v=x:0<=g?"]"==x?(B.attr?B.matchFor=c(f||g+1,y):B.attr=c(g+1,y),!(g=B.matchFor)||'"'!=g.charAt(0)&&"'"!=g.charAt(0)||(B.matchFor=g.slice(1,-1)),B.matchFor&&(B.matchFor=
B.matchFor.replace(/\\/g,"")),m.attrs.push(B),B=null,g=f=-1):"\x3d"==x&&(f=0<="|~^$*".indexOf(l)?l:"",B.type=f+x,B.attr=c(g+1,y-f.length),f=y+1):0<=r?")"==x&&(0<=t&&(B.value=c(r+1,y)),t=r=-1):"#"==x?(A(),k=y+1):"."==x?(A(),u=y):":"==x?(A(),t=y):"["==x?(A(),g=y,B={}):"("==x?(0<=t&&(B={name:c(t+1,y),value:null},m.pseudos.push(B)),r=y):" "==x&&l!=x&&(A(),0<=t&&m.pseudos.push({name:c(t+1,y)}),m.loops=m.pseudos.length||m.attrs.length||m.classes.length,m.oquery=m.query=c(w,y),m.otag=m.tag=m.oper?null:m.tag||
"*",m.tag&&(m.tag=m.tag.toUpperCase()),d.length&&d[d.length-1].oper&&(m.infixOper=d.pop(),m.query=m.infixOper.query+" "+m.query),d.push(m),m=null));return d},d=function(b,c){return b?c?function(){return b.apply(window,arguments)&&c.apply(window,arguments)}:b:c},r=function(b,c){c=c||[];b&&c.push(b);return c},v=function(b){return 1==b.nodeType},u=function(b,c){return b?"class"==c?b.className||"":"for"==c?b.htmlFor||"":"style"==c?b.style.cssText||"":(e?b.getAttribute(c):b.getAttribute(c,2))||"":""},
t={"*\x3d":function(b,c){return function(d){return 0<=u(d,b).indexOf(c)}},"^\x3d":function(b,c){return function(d){return 0==u(d,b).indexOf(c)}},"$\x3d":function(b,c){return function(d){d=" "+u(d,b);var e=d.lastIndexOf(c);return-1<e&&e==d.length-c.length}},"~\x3d":function(b,c){var d=" "+c+" ";return function(c){return 0<=(" "+u(c,b)+" ").indexOf(d)}},"|\x3d":function(b,c){var d=c+"-";return function(e){e=u(e,b);return e==c||0==e.indexOf(d)}},"\x3d":function(b,c){return function(d){return u(d,b)==
c}}};l=k.doc.documentElement;var x=!(l.nextElementSibling||"nextElementSibling"in l),w=x?"nextSibling":"nextElementSibling",y=x?"previousSibling":"previousElementSibling",z=x?v:c,B=function(b){for(;b=b[y];)if(z(b))return!1;return!0},A=function(b){for(;b=b[w];)if(z(b))return!1;return!0},C=function(b){var c=b.parentNode,c=7!=c.nodeType?c:c.nextSibling,d=0,e=c.children||c.childNodes,g=b._i||b.getAttribute("_i")||-1,r=c._l||("undefined"!==typeof c.getAttribute?c.getAttribute("_l"):-1);if(!e)return-1;
e=e.length;if(r==e&&0<=g&&0<=r)return g;p("ie")&&"undefined"!==typeof c.setAttribute?c.setAttribute("_l",e):c._l=e;g=-1;for(c=c.firstElementChild||c.firstChild;c;c=c[w])z(c)&&(p("ie")?c.setAttribute("_i",++d):c._i=++d,b===c&&(g=d));return g},F=function(b){return!(C(b)%2)},E=function(b){return C(b)%2},H={checked:function(b,c){return function(b){return!("checked"in b?!b.checked:!b.selected)}},disabled:function(b,c){return function(b){return b.disabled}},enabled:function(b,c){return function(b){return!b.disabled}},
"first-child":function(){return B},"last-child":function(){return A},"only-child":function(b,c){return function(b){return B(b)&&A(b)}},empty:function(b,c){return function(b){var c=b.childNodes;for(b=b.childNodes.length-1;0<=b;b--){var d=c[b].nodeType;if(1===d||3==d)return!1}return!0}},contains:function(b,c){b=c.charAt(0);if('"'==b||"'"==b)c=c.slice(1,-1);return function(b){return 0<=b.innerHTML.indexOf(c)}},not:function(c,d){c=b(d)[0];d={el:1};"*"!=c.tag&&(d.tag=1);c.classes.length||(d.classes=1);
var e=G(c,d);return function(b){return!e(b)}},"nth-child":function(b,c){b=parseInt;if("odd"==c)return E;if("even"==c)return F;if(-1!=c.indexOf("n")){c=c.split("n",2);var d=c[0]?"-"==c[0]?-1:b(c[0]):1,e=c[1]?b(c[1]):0,g=0,r=-1;0<d?0>e?e=e%d&&d+e%d:0<e&&(e>=d&&(g=e-e%d),e%=d):0>d&&(d*=-1,0<e&&(r=e,e%=d));if(0<d)return function(b){b=C(b);return b>=g&&(0>r||b<=r)&&b%d==e};c=e}var h=b(c);return function(b){return C(b)==h}}},D=9>p("ie")||9==p("ie")&&p("quirks")?function(b){var c=b.toLowerCase();"class"==
c&&(b="className");return function(d){return e?d.getAttribute(b):d[b]||d[c]}}:function(b){return function(c){return c&&c.getAttribute&&c.hasAttribute(b)}},G=function(b,g){if(!b)return c;g=g||{};var r=null;"el"in g||(r=d(r,v));"tag"in g||"*"!=b.tag&&(r=d(r,function(c){return c&&(e?c.tagName:c.tagName.toUpperCase())==b.getTag()}));"classes"in g||q(b.classes,function(b,c,e){var g=new RegExp("(?:^|\\s)"+b+"(?:\\s|$)");r=d(r,function(b){return g.test(b.className)});r.count=c});"pseudos"in g||q(b.pseudos,
function(b){var c=b.name;H[c]&&(r=d(r,H[c](c,b.value)))});"attrs"in g||q(b.attrs,function(b){var c,e=b.attr;b.type&&t[b.type]?c=t[b.type](e,b.matchFor):e.length&&(c=D(e));c&&(r=d(r,c))});"id"in g||b.id&&(r=d(r,function(c){return!!c&&c.id==b.id}));r||"default"in g||(r=c);return r},I=function(b){return function(c,d,e){for(;c=c[w];)if(!x||v(c)){e&&!fa(c,e)||!b(c)||d.push(c);break}return d}},P=function(b){return function(c,d,e){for(c=c[w];c;){if(z(c)){if(e&&!fa(c,e))break;b(c)&&d.push(c)}c=c[w]}return d}},
Q=function(b,d){var e=function(b){var c=[];try{c=Array.prototype.slice.call(b)}catch(ra){for(var d=0,e=b.length;d<e;d++)c.push(b[d])}return c};b=b||c;return function(c,g,r){var h=0,t=[],t=e(c.children||c.childNodes);for(d&&f.forEach(t,function(b){1===b.nodeType&&(t=t.concat(e(b.getElementsByTagName("*"))))});c=t[h++];)z(c)&&(!r||fa(c,r))&&b(c,h)&&g.push(c);return g}},O=function(b,c){for(b=b.parentNode;b&&b!=c;)b=b.parentNode;return!!b},N={},M=function(b){var d=N[b.query];if(d)return d;var e=b.infixOper,
e=e?e.oper:"",h=G(b,{el:1}),t="*"==b.tag,u=k.doc.getElementsByClassName;if(e)u={el:1},t&&(u.tag=1),h=G(b,u),"+"==e?d=I(h):"~"==e?d=P(h):"\x3e"==e&&(d=Q(h));else if(b.id)h=!b.loops&&t?c:G(b,{el:1,id:1}),d=function(c,d){var e=m.byId(b.id,c.ownerDocument||c);c.ownerDocument&&!O(c,c.ownerDocument)&&f.some(11===c.nodeType?c.childNodes:[c],function(c){c=Q(function(c){return c.id===b.id},!0)(c,[]);if(c.length)return e=c[0],!1});if(e&&h(e)&&(9==c.nodeType||O(e,c)))return r(e,d)};else if(u&&/\{\s*\[native code\]\s*\}/.test(String(u))&&
b.classes.length&&!g)var h=G(b,{el:1,classes:1,id:1}),q=b.classes.join(" "),d=function(b,c,d){c=r(0,c);for(var e,g=0,f=b.getElementsByClassName(q);e=f[g++];)h(e,b)&&fa(e,d)&&c.push(e);return c};else t||b.loops?(h=G(b,{el:1,tag:1,id:1}),d=function(c,d,e){d=r(0,d);for(var g,f=0,t=(g=b.getTag())?c.getElementsByTagName(g):[];g=t[f++];)h(g,c)&&fa(g,e)&&d.push(g);return d}):d=function(c,d,e){d=r(0,d);for(var g=0,h=b.getTag(),h=h?c.getElementsByTagName(h):[];c=h[g++];)fa(c,e)&&d.push(c);return d};return N[b.query]=
d},J={},K={},U=function(c){var d=b(h(c));if(1==d.length){var e=M(d[0]);return function(b){if(b=e(b,[]))b.nozip=!0;return b}}return function(b){b=r(b);for(var c,e,g=d.length,h,f,t=0;t<g;t++){f=[];c=d[t];e=b.length-1;0<e&&(h={},f.nozip=!0);e=M(c);for(var u=0;c=b[u];u++)e(c,f,h);if(!f.length)break;b=f}return f}},R=p("ie")?"commentStrip":"nozip",Y=!!k.doc.querySelectorAll,aa=/\\[>~+]|n\+\d|([^ \\])?([>~+])([^ =])?/g,S=function(b,c,d,e){return d?(c?c+" ":"")+d+(e?" "+e:""):b},ma=/([^[]*)([^\]]*])?/g,ha=
function(b,c,d){return c.replace(aa,S)+(d||"")},la=function(b,c){b=b.replace(ma,ha);if(Y){var d=K[b];if(d&&!c)return d}if(d=J[b])return d;var d=b.charAt(0),e=-1==b.indexOf(" ");0<=b.indexOf("#")&&e&&(c=!0);if(!Y||c||-1!="\x3e~+".indexOf(d)||p("ie")&&-1!=b.indexOf(":")||g&&0<=b.indexOf(".")||-1!=b.indexOf(":contains")||-1!=b.indexOf(":checked")||-1!=b.indexOf("|\x3d")){var r=b.match(/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g);return J[b]=2>r.length?U(b):function(b){for(var c=0,d=[],e;e=r[c++];)d=
d.concat(U(e)(b));return d}}var h=0<="\x3e~+".indexOf(b.charAt(b.length-1))?b+" *":b;return K[b]=function(c){if(9==c.nodeType||e)try{var d=c.querySelectorAll(h);d[R]=!0;return d}catch(qa){}return la(b,!0)(c)}},ca=0,ia=p("ie")?function(b){return e?b.getAttribute("_uid")||b.setAttribute("_uid",++ca)||ca:b.uniqueID}:function(b){return b._uid||(b._uid=++ca)},fa=function(b,c){if(!c)return 1;b=ia(b);return c[b]?0:c[b]=1},ea=function(b){if(b&&b.nozip)return b;if(!b||!b.length)return[];if(2>b.length)return[b[0]];
var c=[];ca++;var d,g;if(p("ie")&&e){var r=ca+"";for(d=0;d<b.length;d++)(g=b[d])&&g.getAttribute("_zipIdx")!=r&&(c.push(g),g.setAttribute("_zipIdx",r))}else if(p("ie")&&b.commentStrip)try{for(d=0;d<b.length;d++)(g=b[d])&&v(g)&&c.push(g)}catch(ga){}else for(d=0;d<b.length;d++)(g=b[d])&&g._zipIdx!=ca&&(c.push(g),g._zipIdx=ca);return c},pa=function(b,c){c=c||k.doc;e="div"===(c.ownerDocument||c).createElement("div").tagName;return(b=la(b)(c))&&b.nozip?b:ea(b)};pa.filter=function(c,d,e){for(var g=[],r=
b(d),r=1!=r.length||/[^\w#\.]/.test(d)?function(b){return-1!=f.indexOf(pa(d,m.byId(e)),b)}:G(r[0]),h=0,t;t=c[h];h++)r(t)&&g.push(t);return g};return pa})},"dojo/NodeList-dom":function(){define("./_base/kernel ./query ./_base/array ./_base/lang ./dom-class ./dom-construct ./dom-geometry ./dom-attr ./dom-style".split(" "),function(m,p,f,l,k,h,q,g,e){function c(b){return function(c,d,e){return 2==arguments.length?b["string"==typeof d?"get":"set"](c,d):b.set(c,d,e)}}var b=function(b){return 1==b.length&&
"string"==typeof b[0]},d=function(b){var c=b.parentNode;c&&c.removeChild(b)},r=p.NodeList,v=r._adaptWithCondition,u=r._adaptAsForEach,t=r._adaptAsMap;l.extend(r,{_normalize:function(b,c){var d=!0===b.parse;if("string"==typeof b.template){var e=b.templateFunc||m.string&&m.string.substitute;b=e?e(b.template,b):b}e=typeof b;"string"==e||"number"==e?(b=h.toDom(b,c&&c.ownerDocument),b=11==b.nodeType?l._toArray(b.childNodes):[b]):l.isArrayLike(b)?l.isArray(b)||(b=l._toArray(b)):b=[b];d&&(b._runParse=!0);
return b},_cloneNode:function(b){return b.cloneNode(!0)},_place:function(b,c,d,e){if(1==c.nodeType||"only"!=d)for(var g,r=b.length,f=r-1;0<=f;f--){var t=e?this._cloneNode(b[f]):b[f];if(b._runParse&&m.parser&&m.parser.parse)for(g||(g=c.ownerDocument.createElement("div")),g.appendChild(t),m.parser.parse(g),t=g.firstChild;g.firstChild;)g.removeChild(g.firstChild);f==r-1?h.place(t,c,d):c.parentNode.insertBefore(t,c);c=t}},position:t(q.position),attr:v(c(g),b),style:v(c(e),b),addClass:u(k.add),removeClass:u(k.remove),
toggleClass:u(k.toggle),replaceClass:u(k.replace),empty:u(h.empty),removeAttr:u(g.remove),marginBox:t(q.getMarginBox),place:function(b,c){var d=p(b)[0];return this.forEach(function(b){h.place(b,d,c)})},orphan:function(b){return(b?p._filterResult(this,b):this).forEach(d)},adopt:function(b,c){return p(b).place(this[0],c)._stash(this)},query:function(b){if(!b)return this;var c=new r;this.map(function(d){p(b,d).forEach(function(b){void 0!==b&&c.push(b)})});return c._stash(this)},filter:function(b){var c=
arguments,d=this,e=0;if("string"==typeof b){d=p._filterResult(this,c[0]);if(1==c.length)return d._stash(this);e=1}return this._wrap(f.filter(d,c[e],c[e+1]),this)},addContent:function(b,c){b=this._normalize(b,this[0]);for(var d=0,e;e=this[d];d++)b.length?this._place(b,e,c,0<d):h.empty(e);return this}});return r})},"dojo/_base/fx":function(){define("./kernel ./config ./lang ../Evented ./Color ../aspect ../sniff ../dom ../dom-style".split(" "),function(m,p,f,l,k,h,q,g,e){var c=f.mixin,b={},d=b._Line=
function(b,c){this.start=b;this.end=c};d.prototype.getValue=function(b){return(this.end-this.start)*b+this.start};var r=b.Animation=function(b){c(this,b);f.isArray(this.curve)&&(this.curve=new d(this.curve[0],this.curve[1]))};r.prototype=new l;f.extend(r,{duration:350,repeat:0,rate:20,_percent:0,_startRepeatCount:0,_getStep:function(){var b=this._percent,c=this.easing;return c?c(b):b},_fire:function(b,c){c=c||[];if(this[b])if(p.debugAtAllCosts)this[b].apply(this,c);else try{this[b].apply(this,c)}catch(B){}return this},
play:function(b,c){this._delayTimer&&this._clearTimer();if(c)this._stopTimer(),this._active=this._paused=!1,this._percent=0;else if(this._active&&!this._paused)return this;this._fire("beforeBegin",[this.node]);b=b||this.delay;c=f.hitch(this,"_play",c);if(0<b)return this._delayTimer=setTimeout(c,b),this;c();return this},_play:function(b){this._delayTimer&&this._clearTimer();this._startTime=(new Date).valueOf();this._paused&&(this._startTime-=this.duration*this._percent);this._active=!0;this._paused=
!1;b=this.curve.getValue(this._getStep());this._percent||(this._startRepeatCount||(this._startRepeatCount=this.repeat),this._fire("onBegin",[b]));this._fire("onPlay",[b]);this._cycle();return this},pause:function(){this._delayTimer&&this._clearTimer();this._stopTimer();if(!this._active)return this;this._paused=!0;this._fire("onPause",[this.curve.getValue(this._getStep())]);return this},gotoPercent:function(b,c){this._stopTimer();this._active=this._paused=!0;this._percent=b;c&&this.play();return this},
stop:function(b){this._delayTimer&&this._clearTimer();if(!this._timer)return this;this._stopTimer();b&&(this._percent=1);this._fire("onStop",[this.curve.getValue(this._getStep())]);this._active=this._paused=!1;return this},destroy:function(){this.stop()},status:function(){return this._active?this._paused?"paused":"playing":"stopped"},_cycle:function(){if(this._active){var b=(new Date).valueOf(),b=0===this.duration?1:(b-this._startTime)/this.duration;1<=b&&(b=1);this._percent=b;this.easing&&(b=this.easing(b));
this._fire("onAnimate",[this.curve.getValue(b)]);1>this._percent?this._startTimer():(this._active=!1,0<this.repeat?(this.repeat--,this.play(null,!0)):-1==this.repeat?this.play(null,!0):this._startRepeatCount&&(this.repeat=this._startRepeatCount,this._startRepeatCount=0),this._percent=0,this._fire("onEnd",[this.node]),!this.repeat&&this._stopTimer())}return this},_clearTimer:function(){clearTimeout(this._delayTimer);delete this._delayTimer}});var v=0,u=null,t={run:function(){}};f.extend(r,{_startTimer:function(){this._timer||
(this._timer=h.after(t,"run",f.hitch(this,"_cycle"),!0),v++);u||(u=setInterval(f.hitch(t,"run"),this.rate))},_stopTimer:function(){this._timer&&(this._timer.remove(),this._timer=null,v--);0>=v&&(clearInterval(u),u=null,v=0)}});var x=q("ie")?function(b){var c=b.style;c.width.length||"auto"!=e.get(b,"width")||(c.width="auto")}:function(){};b._fade=function(d){d.node=g.byId(d.node);var r=c({properties:{}},d);d=r.properties.opacity={};d.start="start"in r?r.start:function(){return+e.get(r.node,"opacity")||
0};d.end=r.end;d=b.animateProperty(r);h.after(d,"beforeBegin",f.partial(x,r.node),!0);return d};b.fadeIn=function(d){return b._fade(c({end:1},d))};b.fadeOut=function(d){return b._fade(c({end:0},d))};b._defaultEasing=function(b){return.5+Math.sin((b+1.5)*Math.PI)/2};var w=function(b){this._properties=b;for(var c in b){var d=b[c];d.start instanceof k&&(d.tempColor=new k)}};w.prototype.getValue=function(b){var c={},d;for(d in this._properties){var e=this._properties[d],g=e.start;g instanceof k?c[d]=
k.blendColors(g,e.end,b,e.tempColor).toCss():f.isArray(g)||(c[d]=(e.end-g)*b+g+("opacity"!=d?e.units||"px":0))}return c};b.animateProperty=function(b){var d=b.node=g.byId(b.node);b.easing||(b.easing=m._defaultEasing);b=new r(b);h.after(b,"beforeBegin",f.hitch(b,function(){var b={},g;for(g in this.properties){var r=function(b,c){var d={height:b.offsetHeight,width:b.offsetWidth}[c];if(void 0!==d)return d;d=e.get(b,c);return"opacity"==c?+d:t?d:parseFloat(d)};if("width"==g||"height"==g)this.node.display=
"block";var h=this.properties[g];f.isFunction(h)&&(h=h(d));h=b[g]=c({},f.isObject(h)?h:{end:h});f.isFunction(h.start)&&(h.start=h.start(d));f.isFunction(h.end)&&(h.end=h.end(d));var t=0<=g.toLowerCase().indexOf("color");"end"in h?"start"in h||(h.start=r(d,g)):h.end=r(d,g);t?(h.start=new k(h.start),h.end=new k(h.end)):h.start="opacity"==g?+h.start:parseFloat(h.start)}this.curve=new w(b)}),!0);h.after(b,"onAnimate",f.hitch(e,"set",b.node),!0);return b};b.anim=function(c,d,e,g,h,f){return b.animateProperty({node:c,
duration:e||r.prototype.duration,properties:d,easing:g,onEnd:h}).play(f||0)};c(m,b);m._Animation=r;return b})},"*noref":1}});(function(){var m=this.require;m({cache:{}});!m.async&&m(["dojo"]);m.boot&&m.apply(null,m.boot)})();(function(m){return m.dojoConfig||m.djConfig||m.require||{}});
({async:0,hasCache:{"config-selectorEngine":"lite","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-loader":1,dom:1,"host-browser":1},packages:[{location:".",name:"dojo"},{location:"../dijit",name:"dijit"},{location:"../dojox",name:"dojox"},{location:"../esri",name:"esri"},{location:"../channels",name:"channels"},{location:"../sixmaps",name:"sixmaps"}]});
require({cache:{"dojo/main":function(){define("dojo/main","./_base/kernel ./has require ./sniff ./_base/lang ./_base/array ./_base/config ./ready ./_base/declare ./_base/connect ./_base/Deferred ./_base/json ./_base/Color ./has!dojo-firebug?./_firebug/firebug ./_base/browser ./_base/loader".split(" "),function(m,p,f,l,k,h,q,g){q.isDebug&&f(["./_firebug/firebug"]);var e=q.require;e&&(e=h.map(k.isArray(e)?e:[e],function(c){return c.replace(/\./g,"/")}),m.isAsync?f(e):g(1,function(){f(e)}));return m})},
"dojo/_base/kernel":function(){define("dojo/_base/kernel",["../global","../has","./config","require","module"],function(m,p,f,l,k){var h,q={},g={},e={config:f,global:m,dijit:q,dojox:g},q={dojo:["dojo",e],dijit:["dijit",q],dojox:["dojox",g]};k=l.map&&l.map[k.id.match(/[^\/]+/)[0]];for(h in k)q[h]?q[h][0]=k[h]:q[h]=[k[h],{}];for(h in q)k=q[h],k[1]._scopeName=k[0],f.noGlobals||(m[k[0]]=k[1]);e.scopeMap=q;e.baseUrl=e.config.baseUrl=l.baseUrl;e.isAsync=l.async;e.locale=f.locale;m="$Rev: d6e8ff38 $".match(/[0-9a-f]{7,}/);
e.version={major:1,minor:14,patch:2,flag:"",revision:m?m[0]:NaN,toString:function(){var b=e.version;return b.major+"."+b.minor+"."+b.patch+b.flag+" ("+b.revision+")"}};p("csp-restrictions")||Function("d","d.eval \x3d function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(e);e.exit=function(){};p("host-webworker");p.add("console-as-object",function(){return Function.prototype.bind&&console&&"object"===typeof console.log});"undefined"!=typeof console||(console={});k=
"assert count debug dir dirxml error group groupEnd info profile profileEnd time timeEnd trace warn log".split(" ");var c;for(m=0;c=k[m++];)console[c]?p("console-as-object")&&(console[c]=Function.prototype.bind.call(console[c],console)):function(){var b=c+"";console[b]="log"in console?function(){Array.prototype.slice.call(arguments).unshift(b+":")}:function(){};console[b]._fake=!0}();p.add("dojo-debug-messages",!!f.isDebug);e.deprecated=e.experimental=function(){};p("dojo-debug-messages")&&(e.deprecated=
function(b,c,e){},e.experimental=function(b,c){});if(f.modulePaths){e.deprecated("dojo.modulePaths","use paths configuration");p={};for(h in f.modulePaths)p[h.replace(/\./g,"/")]=f.modulePaths[h];l({paths:p})}e.moduleUrl=function(b,c){e.deprecated("dojo.moduleUrl()","use require.toUrl","2.0");var d=null;b&&(d=l.toUrl(b.replace(/\./g,"/")+(c?"/"+c:"")+"/*.*").replace(/\/\*\.\*/,"")+(c?"":"/"));return d};e._hasResource={};return e})},"dojo/global":function(){define("dojo/global",function(){return"undefined"!==
typeof global&&"function"!==typeof global?global:"undefined"!==typeof window?window:"undefined"!==typeof self?self:this})},"dojo/has":function(){define("dojo/has",["./global","require","module"],function(m,p,f){var l=p.has||function(){};if(!l("dojo-has-api")){var k="undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location==location&&window.document==document&&document,h=k&&k.createElement("DiV"),q=f.config&&f.config()||{},l=function(g){return"function"==
typeof q[g]?q[g]=q[g](m,k,h):q[g]};l.cache=q;l.add=function(g,e,c,b){("undefined"==typeof q[g]||b)&&(q[g]=e);return c&&l(g)}}l.add("dom-addeventlistener",!!document.addEventListener);l.add("touch","ontouchstart"in document||"onpointerdown"in document&&0<navigator.maxTouchPoints||window.navigator.msMaxTouchPoints);l.add("touch-events","ontouchstart"in document);l.add("pointer-events","pointerEnabled"in window.navigator?window.navigator.pointerEnabled:"PointerEvent"in window);l.add("MSPointer",window.navigator.msPointerEnabled);
l.add("touch-action",l("touch")&&l("pointer-events"));l.add("device-width",screen.availWidth||innerWidth);p=document.createElement("form");l.add("dom-attributes-explicit",0==p.attributes.length);l.add("dom-attributes-specified-flag",0<p.attributes.length&&40>p.attributes.length);l.clearElement=function(g){g.innerHTML="";return g};l.normalize=function(g,e){var c=g.match(/[\?:]|[^:\?]*/g),b=0,d=function(e){var g=c[b++];if(":"==g)return 0;if("?"==c[b++]){if(!e&&l(g))return d();d(!0);return d(e)}return g||
0};return(g=d())&&e(g)};l.load=function(g,e,c){g?e([g],c):c()};return l})},"dojo/_base/config":function(){define("dojo/_base/config",["../global","../has","require"],function(m,p,f){m={};f=f.rawConfig;for(var l in f)m[l]=f[l];!m.locale&&"undefined"!=typeof navigator&&(l=navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language||navigator.userLanguage)&&(m.locale=l.toLowerCase());return m})},"dojo/sniff":function(){define("dojo/sniff",["./has"],function(m){var p=navigator,
f=p.userAgent,p=p.appVersion,l=parseFloat(p);m.add("air",0<=f.indexOf("AdobeAIR"));m.add("wp",parseFloat(f.split("Windows Phone")[1])||void 0);m.add("msapp",parseFloat(f.split("MSAppHost/")[1])||void 0);m.add("khtml",0<=p.indexOf("Konqueror")?l:void 0);m.add("edge",parseFloat(f.split("Edge/")[1])||void 0);m.add("opr",parseFloat(f.split("OPR/")[1])||void 0);m.add("webkit",!m("wp")&&!m("edge")&&parseFloat(f.split("WebKit/")[1])||void 0);m.add("chrome",!m("edge")&&!m("opr")&&parseFloat(f.split("Chrome/")[1])||
void 0);m.add("android",!m("wp")&&parseFloat(f.split("Android ")[1])||void 0);m.add("safari",!(0<=p.indexOf("Safari"))||m("wp")||m("chrome")||m("android")||m("edge")||m("opr")?void 0:parseFloat(p.split("Version/")[1]));m.add("mac",0<=p.indexOf("Macintosh"));m.add("quirks","BackCompat"==document.compatMode);if(!m("wp")&&f.match(/(iPhone|iPod|iPad)/)){var k=RegExp.$1.replace(/P/,"p"),h=f.match(/OS ([\d_]+)/)?RegExp.$1:"1",h=parseFloat(h.replace(/_/,".").replace(/_/g,""));m.add(k,h);m.add("ios",h)}m.add("bb",
(0<=f.indexOf("BlackBerry")||0<=f.indexOf("BB10"))&&parseFloat(f.split("Version/")[1])||void 0);m.add("trident",parseFloat(p.split("Trident/")[1])||void 0);m.add("svg","undefined"!==typeof SVGAngle);m("webkit")||(0<=f.indexOf("Opera")&&m.add("opera",9.8<=l?parseFloat(f.split("Version/")[1])||l:l),!(0<=f.indexOf("Gecko"))||m("wp")||m("khtml")||m("trident")||m("edge")||m.add("mozilla",l),m("mozilla")&&m.add("ff",parseFloat(f.split("Firefox/")[1]||f.split("Minefield/")[1])||void 0),document.all&&!m("opera")&&
(f=parseFloat(p.split("MSIE ")[1])||void 0,(p=document.documentMode)&&5!=p&&Math.floor(f)!=p&&(f=p),m.add("ie",f)),m.add("wii","undefined"!=typeof opera&&opera.wiiremote));return m})},"dojo/_base/lang":function(){define("dojo/_base/lang",["./kernel","../has","../sniff"],function(m,p){p.add("bug-for-in-skips-shadowed",function(){for(var c in{toString:1})return 0;return 1});var f=p("bug-for-in-skips-shadowed")?"hasOwnProperty valueOf isPrototypeOf propertyIsEnumerable toLocaleString toString constructor".split(" "):
[],l=f.length,k=function(c,b,d){d||(d=c[0]&&m.scopeMap[c[0]]?m.scopeMap[c.shift()][1]:m.global);try{for(var e=0;e<c.length;e++){var g=c[e];if(!(g in d))if(b)d[g]={};else return;d=d[g]}return d}catch(u){}},h=Object.prototype.toString,q=function(c,b,d){return(d||[]).concat(Array.prototype.slice.call(c,b||0))},g=/\{([^\}]+)\}/g,e={_extraNames:f,_mixin:function(c,b,d){var e,g,h,t={};for(e in b)g=b[e],e in c&&(c[e]===g||e in t&&t[e]===g)||(c[e]=d?d(g):g);if(p("bug-for-in-skips-shadowed")&&b)for(h=0;h<
l;++h)e=f[h],g=b[e],e in c&&(c[e]===g||e in t&&t[e]===g)||(c[e]=d?d(g):g);return c},mixin:function(c,b){c||(c={});for(var d=1,g=arguments.length;d<g;d++)e._mixin(c,arguments[d]);return c},setObject:function(c,b,d){var e=c.split(".");c=e.pop();return(d=k(e,!0,d))&&c?d[c]=b:void 0},getObject:function(c,b,d){return c?k(c.split("."),b,d):d},exists:function(c,b){return void 0!==e.getObject(c,!1,b)},isString:function(c){return"string"==typeof c||c instanceof String},isArray:Array.isArray||function(c){return"[object Array]"==
h.call(c)},isFunction:function(c){return"[object Function]"===h.call(c)},isObject:function(c){return void 0!==c&&(null===c||"object"==typeof c||e.isArray(c)||e.isFunction(c))},isArrayLike:function(c){return!!c&&!e.isString(c)&&!e.isFunction(c)&&!(c.tagName&&"form"==c.tagName.toLowerCase())&&(e.isArray(c)||isFinite(c.length))},isAlien:function(c){return c&&!e.isFunction(c)&&/\{\s*\[native code\]\s*\}/.test(String(c))},extend:function(c,b){for(var d=1,g=arguments.length;d<g;d++)e._mixin(c.prototype,
arguments[d]);return c},_hitchArgs:function(c,b){var d=e._toArray(arguments,2),g=e.isString(b);return function(){var r=e._toArray(arguments),h=g?(c||m.global)[b]:b;return h&&h.apply(c||this,d.concat(r))}},hitch:function(c,b){if(2<arguments.length)return e._hitchArgs.apply(m,arguments);b||(b=c,c=null);if(e.isString(b)){c=c||m.global;if(!c[b])throw['lang.hitch: scope["',b,'"] is null (scope\x3d"',c,'")'].join("");return function(){return c[b].apply(c,arguments||[])}}return c?function(){return b.apply(c,
arguments||[])}:b},delegate:function(){function c(){}return function(b,d){c.prototype=b;b=new c;c.prototype=null;d&&e._mixin(b,d);return b}}(),_toArray:p("ie")?function(){function c(b,c,e){e=e||[];for(c=c||0;c<b.length;c++)e.push(b[c]);return e}return function(b){return(b.item?c:q).apply(this,arguments)}}():q,partial:function(c){return e.hitch.apply(m,[null].concat(e._toArray(arguments)))},clone:function(c){if(!c||"object"!=typeof c||e.isFunction(c))return c;if(c.nodeType&&"cloneNode"in c)return c.cloneNode(!0);
if(c instanceof Date)return new Date(c.getTime());if(c instanceof RegExp)return new RegExp(c);var b,d,g;if(e.isArray(c))for(b=[],d=0,g=c.length;d<g;++d)d in c&&(b[d]=e.clone(c[d]));else b=c.constructor?new c.constructor:{};return e._mixin(b,c,e.clone)},trim:String.prototype.trim?function(c){return c.trim()}:function(c){return c.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(c,b,d){return c.replace(d||g,e.isFunction(b)?b:function(c,d){return e.getObject(d,!1,b)})}};e.mixin(m,e);return e})},
"dojo/_base/array":function(){define("dojo/_base/array",["./kernel","../has","./lang"],function(m,p,f){function l(c){return q[c]=new Function("item","index","array",c)}function k(c){var b=!c;return function(d,e,g){var r=0,h=d&&d.length||0,f;h&&"string"==typeof d&&(d=d.split(""));"string"==typeof e&&(e=q[e]||l(e));if(g)for(;r<h;++r){if(f=!e.call(g,d[r],r,d),c^f)return!f}else for(;r<h;++r)if(f=!e(d[r],r,d),c^f)return!f;return b}}function h(c){var b=1,d=0,r=0;c||(b=d=r=-1);return function(h,f,t,k){if(k&&
0<b)return e.lastIndexOf(h,f,t);k=h&&h.length||0;var u=c?k+r:d;t===g?t=c?d:k+r:0>t?(t=k+t,0>t&&(t=d)):t=t>=k?k+r:t;for(k&&"string"==typeof h&&(h=h.split(""));t!=u;t+=b)if(h[t]==f)return t;return-1}}var q={},g,e={every:k(!1),some:k(!0),indexOf:h(!0),lastIndexOf:h(!1),forEach:function(c,b,d){var e=0,g=c&&c.length||0;g&&"string"==typeof c&&(c=c.split(""));"string"==typeof b&&(b=q[b]||l(b));if(d)for(;e<g;++e)b.call(d,c[e],e,c);else for(;e<g;++e)b(c[e],e,c)},map:function(c,b,d,e){var g=0,r=c&&c.length||
0;e=new (e||Array)(r);r&&"string"==typeof c&&(c=c.split(""));"string"==typeof b&&(b=q[b]||l(b));if(d)for(;g<r;++g)e[g]=b.call(d,c[g],g,c);else for(;g<r;++g)e[g]=b(c[g],g,c);return e},filter:function(c,b,d){var e=0,g=c&&c.length||0,h=[],f;g&&"string"==typeof c&&(c=c.split(""));"string"==typeof b&&(b=q[b]||l(b));if(d)for(;e<g;++e)f=c[e],b.call(d,f,e,c)&&h.push(f);else for(;e<g;++e)f=c[e],b(f,e,c)&&h.push(f);return h},clearCache:function(){q={}}};f.mixin(m,e);return e})},"dojo/ready":function(){define("dojo/ready",
["./_base/kernel","./has","require","./domReady","./_base/lang"],function(m,p,f,l,k){var h=0,q=[],g=0;p=function(){h=1;m._postLoad=m.config.afterOnLoad=!0;e()};var e=function(){if(!g){for(g=1;h&&(!l||0==l._Q.length)&&(f.idle?f.idle():1)&&q.length;){var b=q.shift();try{b()}catch(r){if(r.info=r.message,f.signal)f.signal("error",r);else throw r;}}g=0}};f.on&&f.on("idle",e);l&&(l._onQEmpty=e);var c=m.ready=m.addOnLoad=function(b,c,g){var d=k._toArray(arguments);"number"!=typeof b?(g=c,c=b,b=1E3):d.shift();
g=g?k.hitch.apply(m,d):function(){c()};g.priority=b;for(d=0;d<q.length&&b>=q[d].priority;d++);q.splice(d,0,g);e()},b=m.config.addOnLoad;if(b)c[k.isArray(b)?"apply":"call"](m,b);m.config.parseOnLoad&&!m.isAsync&&c(99,function(){m.parser||(m.deprecated("Add explicit require(['dojo/parser']);","","2.0"),f(["dojo/parser"]))});l?l(p):p();return c})},"dojo/domReady":function(){define("dojo/domReady",["./global","./has"],function(m,p){function f(b){e.push(b);g&&l()}function l(){if(!c){for(c=!0;e.length;)try{e.shift()(k)}catch(t){}c=
!1;f._onQEmpty()}}var k=document,h={loaded:1,complete:1},q="string"!=typeof k.readyState,g=!!h[k.readyState],e=[],c;f.load=function(b,c,d){f(d)};f._Q=e;f._onQEmpty=function(){};q&&(k.readyState="loading");if(!g){var b=[],d=function(b){b=b||m.event;g||"readystatechange"==b.type&&!h[k.readyState]||(q&&(k.readyState="complete"),g=1,l())},r=function(b,c){b.addEventListener(c,d,!1);e.push(function(){b.removeEventListener(c,d,!1)})};if(!p("dom-addeventlistener")){var r=function(b,c){c="on"+c;b.attachEvent(c,
d);e.push(function(){b.detachEvent(c,d)})},v=k.createElement("div");try{v.doScroll&&null===m.frameElement&&b.push(function(){try{return v.doScroll("left"),1}catch(t){}})}catch(t){}}r(k,"DOMContentLoaded");r(m,"load");"onreadystatechange"in k?r(k,"readystatechange"):q||b.push(function(){return h[k.readyState]});if(b.length){var u=function(){if(!g){for(var c=b.length;c--;)if(b[c]()){d("poller");return}setTimeout(u,30)}};u()}}return f})},"dojo/_base/declare":function(){define("dojo/_base/declare",["./kernel",
"../has","./lang"],function(m,p,f){function l(b,c){throw Error("declare"+(c?" "+c:"")+": "+b);}function k(b,c){for(var d=[],e=[{cls:0,refs:[]}],g={},r=1,h=b.length,f=0,t,u,k,q,v;f<h;++f){(t=b[f])?"[object Function]"!=A.call(t)&&l("mixin #"+f+" is not a callable constructor.",c):l("mixin #"+f+" is unknown. Did you use dojo.require to pull it in?",c);u=t._meta?t._meta.bases:[t];k=0;for(t=u.length-1;0<=t;--t)q=u[t].prototype,q.hasOwnProperty("declaredClass")||(q.declaredClass="uniqName_"+F++),q=q.declaredClass,
g.hasOwnProperty(q)||(g[q]={count:0,refs:[],cls:u[t]},++r),q=g[q],k&&k!==q&&(q.refs.push(k),++k.count),k=q;++k.count;e[0].refs.push(k)}for(;e.length;){k=e.pop();d.push(k.cls);for(--r;v=k.refs,1==v.length;){k=v[0];if(!k||--k.count){k=0;break}d.push(k.cls);--r}if(k)for(f=0,h=v.length;f<h;++f)k=v[f],--k.count||e.push(k)}r&&l("can't build consistent linearization",c);t=b[0];d[0]=t?t._meta&&t===d[d.length-t._meta.bases.length]?t._meta.bases.length:1:0;return d}function h(b,c,d,e){var g,r,h,f,t,u,k=this._inherited=
this._inherited||{};"string"===typeof b&&(g=b,b=c,c=d,d=e);if("function"===typeof b)h=b,b=c,c=d;else try{h=b.callee}catch(U){if(U instanceof TypeError)l("strict mode inherited() requires the caller function to be passed before arguments",this.declaredClass);else throw U;}(g=g||h.nom)||l("can't deduce a name to call inherited()",this.declaredClass);d=e=0;f=this.constructor._meta;e=f.bases;u=k.p;if("constructor"!=g){if(k.c!==h&&(u=0,t=e[0],f=t._meta,f.hidden[g]!==h)){(r=f.chains)&&"string"==typeof r[g]&&
l("calling chained method with inherited: "+g,this.declaredClass);do if(f=t._meta,r=t.prototype,f&&(r[g]===h&&r.hasOwnProperty(g)||f.hidden[g]===h))break;while(t=e[++u]);u=t?u:-1}if(t=e[++u])if(r=t.prototype,t._meta&&r.hasOwnProperty(g))d=r[g];else{h=B[g];do if(r=t.prototype,(d=r[g])&&(t._meta?r.hasOwnProperty(g):d!==h))break;while(t=e[++u])}d=t&&d||B[g]}else{if(k.c!==h&&(u=0,(f=e[0]._meta)&&f.ctor!==h)){for((r=f.chains)&&"manual"===r.constructor||l("calling chained constructor with inherited",this.declaredClass);(t=
e[++u])&&(!(f=t._meta)||f.ctor!==h););u=t?u:-1}for(;(t=e[++u])&&!(d=(f=t._meta)?f.ctor:t););d=t&&d}k.c=d;k.p=u;if(d)return!0===c?d:d.apply(this,c||b)}function q(b,c,d){return"string"===typeof b?"function"===typeof c?this.__inherited(b,c,d,!0):this.__inherited(b,c,!0):"function"===typeof b?this.__inherited(b,c,!0):this.__inherited(b,!0)}function g(b,c,d,e){var g=this.getInherited(b,c,d);if(g)return g.apply(this,e||d||c||b)}function e(b){for(var c=this.constructor._meta.bases,d=0,e=c.length;d<e;++d)if(c[d]===
b)return!0;return this instanceof b}function c(b,c){for(var d in c)"constructor"!=d&&c.hasOwnProperty(d)&&(b[d]=c[d]);if(p("bug-for-in-skips-shadowed"))for(var e=f._extraNames,g=e.length;g;)d=e[--g],"constructor"!=d&&c.hasOwnProperty(d)&&(b[d]=c[d])}function b(b){y.safeMixin(this.prototype,b);return this}function d(b,c){b instanceof Array||"function"===typeof b||(c=b,b=void 0);c=c||{};b=b||[];return y([this].concat(b),c)}function r(b,c){return function(){var d=arguments,e=d,g=d[0],r,h;h=b.length;
var f;if(!(this instanceof d.callee))return w(d);if(c&&(g&&g.preamble||this.preamble))for(f=Array(b.length),f[0]=d,r=0;;){(g=d[0])&&(g=g.preamble)&&(d=g.apply(this,d)||d);g=b[r].prototype;(g=g.hasOwnProperty("preamble")&&g.preamble)&&(d=g.apply(this,d)||d);if(++r==h)break;f[r]=d}for(r=h-1;0<=r;--r)g=b[r],(g=(h=g._meta)?h.ctor:g)&&g.apply(this,f?f[r]:d);(g=this.postscript)&&g.apply(this,e)}}function v(b,c){return function(){var d=arguments,e=d,g=d[0];if(!(this instanceof d.callee))return w(d);c&&(g&&
(g=g.preamble)&&(e=g.apply(this,e)||e),(g=this.preamble)&&g.apply(this,e));b&&b.apply(this,d);(g=this.postscript)&&g.apply(this,d)}}function u(b){return function(){var c=arguments,d=0,e,g;if(!(this instanceof c.callee))return w(c);for(;e=b[d];++d)if(e=(g=e._meta)?g.ctor:e){e.apply(this,c);break}(e=this.postscript)&&e.apply(this,c)}}function t(b,c,d){return function(){var e,g,r=0,h=1;for(d&&(r=c.length-1,h=-1);e=c[r];r+=h)g=e._meta,(e=(g?g.hidden:e.prototype)[b])&&e.apply(this,arguments)}}function x(b){C.prototype=
b.prototype;b=new C;C.prototype=null;return b}function w(b){var c=b.callee,d=x(c);c.apply(d,b);return d}function y(g,w,C){"string"!=typeof g&&(C=w,w=g,g="");C=C||{};var m,F,G,H,D,M,J,K=1,U=w;"[object Array]"==A.call(w)?(M=k(w,g),G=M[0],K=M.length-G,w=M[K]):(M=[0],w?"[object Function]"==A.call(w)?(G=w._meta,M=M.concat(G?G.bases:w)):l("base class is not a callable constructor.",g):null!==w&&l("unknown base class. Did you use dojo.require to pull it in?",g));if(w)for(F=K-1;;--F){m=x(w);if(!F)break;G=
M[F];(G._meta?c:z)(m,G.prototype);H=p("csp-restrictions")?function(){}:new Function;H.superclass=w;H.prototype=m;w=m.constructor=H}else m={};y.safeMixin(m,C);G=C.constructor;G!==B.constructor&&(G.nom="constructor",m.constructor=G);for(F=K-1;F;--F)(G=M[F]._meta)&&G.chains&&(J=z(J||{},G.chains));m["-chains-"]&&(J=z(J||{},m["-chains-"]));w&&w.prototype&&w.prototype["-chains-"]&&(J=z(J||{},w.prototype["-chains-"]));G=!J||!J.hasOwnProperty("constructor");M[0]=H=J&&"manual"===J.constructor?u(M):1==M.length?
v(C.constructor,G):r(M,G);H._meta={bases:M,hidden:C,chains:J,parents:U,ctor:C.constructor};H.superclass=w&&w.prototype;H.extend=b;H.createSubclass=d;H.prototype=m;m.constructor=H;m.getInherited=q;m.isInstanceOf=e;m.inherited=E;m.__inherited=h;g&&(m.declaredClass=g,f.setObject(g,H));if(J)for(D in J)m[D]&&"string"==typeof J[D]&&"constructor"!=D&&(G=m[D]=t(D,M,"after"===J[D]),G.nom=D);return H}var z=f.mixin,B=Object.prototype,A=B.toString,C,F=0;C=p("csp-restrictions")?function(){}:new Function;var E=
m.config.isDebug?g:h;m.safeMixin=y.safeMixin=function(b,c){var d,e;for(d in c)e=c[d],e===B[d]&&d in B||"constructor"==d||("[object Function]"==A.call(e)&&(e.nom=d),b[d]=e);if(p("bug-for-in-skips-shadowed")&&c)for(var g=f._extraNames,r=g.length;r;)d=g[--r],e=c[d],e===B[d]&&d in B||"constructor"==d||("[object Function]"==A.call(e)&&(e.nom=d),b[d]=e);return b};return m.declare=y})},"dojo/_base/connect":function(){define("dojo/_base/connect","./kernel ../on ../topic ../aspect ./event ../mouse ./sniff ./lang ../keys".split(" "),
function(m,p,f,l,k,h,q,g){function e(b,c,d,e,r){e=g.hitch(d,e);if(!b||!b.addEventListener&&!b.attachEvent)return l.after(b||m.global,c,e,!0);"string"==typeof c&&"on"==c.substring(0,2)&&(c=c.substring(2));b||(b=m.global);if(!r)switch(c){case "keypress":c=v;break;case "mouseenter":c=h.enter;break;case "mouseleave":c=h.leave}return p(b,c,e,r)}function c(b){b.keyChar=b.charCode?String.fromCharCode(b.charCode):"";b.charOrCode=b.keyChar||b.keyCode}q.add("events-keypress-typed",function(){var b={charCode:0};
try{b=document.createEvent("KeyboardEvent"),(b.initKeyboardEvent||b.initKeyEvent).call(b,"keypress",!0,!0,null,!1,!1,!1,!1,9,3)}catch(x){}return 0==b.charCode&&!q("opera")});var b={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113},d=q("mac")?"metaKey":"ctrlKey",r=function(b,d){d=g.mixin({},b,d);c(d);d.preventDefault=function(){b.preventDefault()};d.stopPropagation=function(){b.stopPropagation()};return d},v;v=q("events-keypress-typed")?function(c,
d){var e=p(c,"keydown",function(c){var e=c.keyCode,g=13!=e&&32!=e&&(27!=e||!q("ie"))&&(48>e||90<e)&&(96>e||111<e)&&(186>e||192<e)&&(219>e||222<e)&&229!=e;if(g||c.ctrlKey){g=g?0:e;if(c.ctrlKey){if(3==e||13==e)return d.call(c.currentTarget,c);g=95<g&&106>g?g-48:!c.shiftKey&&65<=g&&90>=g?g+32:b[g]||g}e=r(c,{type:"keypress",faux:!0,charCode:g});d.call(c.currentTarget,e);if(q("ie"))try{c.keyCode=e.keyCode}catch(C){}}}),g=p(c,"keypress",function(b){var c=b.charCode;b=r(b,{charCode:32<=c?c:0,faux:!0});return d.call(this,
b)});return{remove:function(){e.remove();g.remove()}}}:q("opera")?function(b,c){return p(b,"keypress",function(b){var d=b.which;3==d&&(d=99);d=32>d&&!b.shiftKey?0:d;b.ctrlKey&&!b.shiftKey&&65<=d&&90>=d&&(d+=32);return c.call(this,r(b,{charCode:d}))})}:function(b,d){return p(b,"keypress",function(b){c(b);return d.call(this,b)})};var u={_keypress:v,connect:function(b,c,d,g,r){var h=arguments,f=[],t=0;f.push("string"==typeof h[0]?null:h[t++],h[t++]);var u=h[t+1];f.push("string"==typeof u||"function"==
typeof u?h[t++]:null,h[t++]);for(u=h.length;t<u;t++)f.push(h[t]);return e.apply(this,f)},disconnect:function(b){b&&b.remove()},subscribe:function(b,c,d){return f.subscribe(b,g.hitch(c,d))},publish:function(b,c){return f.publish.apply(f,[b].concat(c))},connectPublisher:function(b,c,d){var e=function(){u.publish(b,arguments)};return d?u.connect(c,d,e):u.connect(c,e)},isCopyKey:function(b){return b[d]}};u.unsubscribe=u.disconnect;g.mixin(m,u);return u})},"dojo/on":function(){define("dojo/on",["./has!dom-addeventlistener?:./aspect",
"./_base/kernel","./sniff"],function(m,p,f){function l(b,c,r,h,t){if(h=c.match(/(.*):(.*)/))return c=h[2],h=h[1],g.selector(h,c).call(t,b,r);f("touch")&&(e.test(c)&&(r=C(r)),f("event-orientationchange")||"orientationchange"!=c||(c="resize",b=window,r=C(r)));v&&(r=v(r));if(b.addEventListener){var u=c in d,k=u?d[c]:c;b.addEventListener(k,r,u);return{remove:function(){b.removeEventListener(k,r,u)}}}if(w&&b.attachEvent)return w(b,"on"+c,r);throw Error("Target must be an event emitter");}function k(){this.cancelable=
!1;this.defaultPrevented=!0}function h(){this.bubbles=!1}var q=window.ScriptEngineMajorVersion;f.add("jscript",q&&q()+ScriptEngineMinorVersion()/10);f.add("event-orientationchange",f("touch")&&!f("android"));f.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation);f.add("event-focusin",function(b,c,d){return"onfocusin"in d});f("touch")&&f.add("touch-can-modify-event-delegate",function(){var b=function(){};b.prototype=document.createEvent("MouseEvents");
try{var c=new b;c.target=null;return null===c.target}catch(H){return!1}});var g=function(b,c,d,e){return"function"!=typeof b.on||"function"==typeof c||b.nodeType?g.parse(b,c,d,l,e,this):b.on(c,d)};g.pausable=function(b,c,d,e){var r;b=g(b,c,function(){if(!r)return d.apply(this,arguments)},e);b.pause=function(){r=!0};b.resume=function(){r=!1};return b};g.once=function(b,c,d,e){var r=g(b,c,function(){r.remove();return d.apply(this,arguments)});return r};g.parse=function(b,c,d,e,r,h){var f;if(c.call)return c.call(h,
b,d);c instanceof Array?f=c:-1<c.indexOf(",")&&(f=c.split(/\s*,\s*/));if(f){var t=[];c=0;for(var u;u=f[c++];)t.push(g.parse(b,u,d,e,r,h));t.remove=function(){for(var b=0;b<t.length;b++)t[b].remove()};return t}return e(b,c,d,r,h)};var e=/^touch/;g.matches=function(b,c,d,e,g){g=g&&"function"==typeof g.matches?g:p.query;e=!1!==e;for(1!=b.nodeType&&(b=b.parentNode);!g.matches(b,c,d);)if(b==d||!1===e||!(b=b.parentNode)||1!=b.nodeType)return!1;return b};g.selector=function(b,c,d){return function(e,r){function h(c){return g.matches(c,
b,e,d,f)}var f="function"==typeof b?{matches:b}:this,t=c.bubble;return t?g(e,t(h),r):g(e,c,function(b){var c=h(b.target);if(c)return b.selectorTarget=c,r.call(c,b)})}};var c=[].slice,b=g.emit=function(b,d,e){var g=c.call(arguments,2),r="on"+d;if("parentNode"in b){var f=g[0]={},t;for(t in e)f[t]=e[t];f.preventDefault=k;f.stopPropagation=h;f.target=b;f.type=d;e=f}do b[r]&&b[r].apply(b,g);while(e&&e.bubbles&&(b=b.parentNode));return e&&e.cancelable&&e},d=f("event-focusin")?{}:{focusin:"focus",focusout:"blur"};
if(!f("event-stopimmediatepropagation"))var r=function(){this.modified=this.immediatelyStopped=!0},v=function(b){return function(c){if(!c.immediatelyStopped)return c.stopImmediatePropagation=r,b.apply(this,arguments)}};if(f("dom-addeventlistener"))g.emit=function(c,d,e){if(c.dispatchEvent&&document.createEvent){var r=(c.ownerDocument||document).createEvent("HTMLEvents");r.initEvent(d,!!e.bubbles,!!e.cancelable);for(var h in e)h in r||(r[h]=e[h]);return c.dispatchEvent(r)&&r}return b.apply(g,arguments)};
else{g._fixEvent=function(b,c){b||(b=(c&&(c.ownerDocument||c.document||c).parentWindow||window).event);if(!b)return b;try{u&&b.type==u.type&&b.srcElement==u.target&&(b=u)}catch(H){}if(!b.target)switch(b.target=b.srcElement,b.currentTarget=c||b.srcElement,"mouseover"==b.type&&(b.relatedTarget=b.fromElement),"mouseout"==b.type&&(b.relatedTarget=b.toElement),b.stopPropagation||(b.stopPropagation=y,b.preventDefault=z),b.type){case "keypress":c="charCode"in b?b.charCode:b.keyCode,10==c?(c=0,b.keyCode=
13):13==c||27==c?c=0:3==c&&(c=99),b.charCode=c,c=b,c.keyChar=c.charCode?String.fromCharCode(c.charCode):"",c.charOrCode=c.keyChar||c.keyCode}return b};var u,t=function(b){this.handle=b};t.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};var x=function(b){return function(c){c=g._fixEvent(c,this);var d=b.call(this,c);c.modified&&(u||setTimeout(function(){u=null}),u=c);return d}},w=function(b,c,d){d=x(d);if(((b.ownerDocument?b.ownerDocument.parentWindow:b.parentWindow||b.window||window)!=
top||5.8>f("jscript"))&&!f("config-_allow_leaks")){"undefined"==typeof _dojoIEListeners_&&(_dojoIEListeners_=[]);var e=b[c];if(!e||!e.listeners){var g=e,e=Function("event","var callee \x3d arguments.callee; for(var i \x3d 0; i\x3ccallee.listeners.length; i++){var listener \x3d _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}");e.listeners=[];b[c]=e;e.global=this;g&&e.listeners.push(_dojoIEListeners_.push(g)-1)}e.listeners.push(b=e.global._dojoIEListeners_.push(d)-
1);return new t(b)}return m.after(b,c,d,!0)},y=function(){this.cancelBubble=!0},z=g._preventDefault=function(){this.bubbledKeyCode=this.keyCode;if(this.ctrlKey)try{this.keyCode=0}catch(F){}this.defaultPrevented=!0;this.returnValue=!1;this.modified=!0}}if(f("touch"))var B=function(){},A=window.orientation,C=function(b){return function(c){var d=c.corrected;if(!d){var e=c.type;try{delete c.type}catch(P){}if(c.type){if(f("touch-can-modify-event-delegate"))B.prototype=c,d=new B;else{var d={},g;for(g in c)d[g]=
c[g]}d.preventDefault=function(){c.preventDefault()};d.stopPropagation=function(){c.stopPropagation()}}else d=c,d.type=e;c.corrected=d;if("resize"==e){if(A==window.orientation)return null;A=window.orientation;d.type="orientationchange";return b.call(this,d)}"rotation"in d||(d.rotation=0,d.scale=1);if(window.TouchEvent&&c instanceof TouchEvent){var e=d.changedTouches[0],r;for(r in e)delete d[r],d[r]=e[r]}}return b.call(this,d)}};return g})},"dojo/topic":function(){define("dojo/topic",["./Evented"],
function(m){var p=new m;return{publish:function(f,l){return p.emit.apply(p,arguments)},subscribe:function(f,l){return p.on.apply(p,arguments)}}})},"dojo/Evented":function(){define("dojo/Evented",["./aspect","./on"],function(m,p){function f(){}var l=m.after;f.prototype={on:function(f,h){return p.parse(this,f,h,function(f,g){return l(f,"on"+g,h,!0)})},emit:function(f,h){var k=[this];k.push.apply(k,arguments);return p.emit.apply(p,k)}};return f})},"dojo/aspect":function(){define("dojo/aspect",[],function(){function m(h,
f,g,e){var c=h[f],b="around"==f,d;if(b){var r=g(function(){return c.advice(this,arguments)});d={remove:function(){r&&(r=h=g=null)},advice:function(b,d){return r?r.apply(b,d):c.advice(b,d)}}}else d={remove:function(){if(d.advice){var b=d.previous,c=d.next;c||b?(b?b.next=c:h[f]=c,c&&(c.previous=b)):delete h[f];h=g=d.advice=null}},id:h.nextId++,advice:g,receiveArguments:e};if(c&&!b)if("after"==f){for(;c.next&&(c=c.next););c.next=d;d.previous=c}else"before"==f&&(h[f]=d,d.next=c,c.previous=d);else h[f]=
d;return d}function p(h){return function(f,g,e,c){var b=f[g],d;b&&b.target==f||(f[g]=d=function(){for(var b=d.nextId,c=arguments,e=d.before;e;)e.advice&&(c=e.advice.apply(this,c)||c),e=e.next;if(d.around)var g=d.around.advice(this,c);for(e=d.after;e&&e.id<b;){if(e.advice)if(e.receiveArguments)var h=e.advice.apply(this,c),g=void 0===h?g:h;else g=e.advice.call(this,g,c);e=e.next}return g},b&&(d.around={advice:function(c,d){return b.apply(c,d)}}),d.target=f,d.nextId=d.nextId||0);f=m(d||b,h,e,c);e=null;
return f}}var f=p("after"),l=p("before"),k=p("around");return{before:l,around:k,after:f}})},"dojo/_base/event":function(){define("dojo/_base/event",["./kernel","../on","../has","../dom-geometry"],function(m,p,f,l){if(p._fixEvent){var k=p._fixEvent;p._fixEvent=function(h,g){(h=k(h,g))&&l.normalizeEvent(h);return h}}var h={fix:function(h,g){return p._fixEvent?p._fixEvent(h,g):h},stop:function(h){f("dom-addeventlistener")||h&&h.preventDefault?(h.preventDefault(),h.stopPropagation()):(h=h||window.event,
h.cancelBubble=!0,p._preventDefault.call(h))}};m.fixEvent=h.fix;m.stopEvent=h.stop;return h})},"dojo/dom-geometry":function(){define("dojo/dom-geometry",["./sniff","./_base/window","./dom","./dom-style"],function(m,p,f,l){function k(c,b,d,e,g,h){h=h||"px";c=c.style;isNaN(b)||(c.left=b+h);isNaN(d)||(c.top=d+h);0<=e&&(c.width=e+h);0<=g&&(c.height=g+h)}function h(c){return"button"==c.tagName.toLowerCase()||"input"==c.tagName.toLowerCase()&&"button"==(c.getAttribute("type")||"").toLowerCase()}function q(c){return"border-box"==
g.boxModel||"table"==c.tagName.toLowerCase()||h(c)}var g={boxModel:"content-box"};m("ie")&&(g.boxModel="BackCompat"==document.compatMode?"border-box":"content-box");g.getPadExtents=function(c,b){c=f.byId(c);var d=b||l.getComputedStyle(c),e=l.toPixelValue;b=e(c,d.paddingLeft);var g=e(c,d.paddingTop),h=e(c,d.paddingRight);c=e(c,d.paddingBottom);return{l:b,t:g,r:h,b:c,w:b+h,h:g+c}};g.getBorderExtents=function(c,b){c=f.byId(c);var d=l.toPixelValue,e=b||l.getComputedStyle(c);b="none"!=e.borderLeftStyle?
d(c,e.borderLeftWidth):0;var g="none"!=e.borderTopStyle?d(c,e.borderTopWidth):0,h="none"!=e.borderRightStyle?d(c,e.borderRightWidth):0;c="none"!=e.borderBottomStyle?d(c,e.borderBottomWidth):0;return{l:b,t:g,r:h,b:c,w:b+h,h:g+c}};g.getPadBorderExtents=function(c,b){c=f.byId(c);var d=b||l.getComputedStyle(c);b=g.getPadExtents(c,d);c=g.getBorderExtents(c,d);return{l:b.l+c.l,t:b.t+c.t,r:b.r+c.r,b:b.b+c.b,w:b.w+c.w,h:b.h+c.h}};g.getMarginExtents=function(c,b){c=f.byId(c);var d=b||l.getComputedStyle(c),
e=l.toPixelValue;b=e(c,d.marginLeft);var g=e(c,d.marginTop),h=e(c,d.marginRight);c=e(c,d.marginBottom);return{l:b,t:g,r:h,b:c,w:b+h,h:g+c}};g.getMarginBox=function(c,b){c=f.byId(c);b=b||l.getComputedStyle(c);b=g.getMarginExtents(c,b);var d=c.offsetLeft-b.l,e=c.offsetTop-b.t,h=c.parentNode,u=l.toPixelValue;8==m("ie")&&!m("quirks")&&h&&(h=l.getComputedStyle(h),d-="none"!=h.borderLeftStyle?u(c,h.borderLeftWidth):0,e-="none"!=h.borderTopStyle?u(c,h.borderTopWidth):0);return{l:d,t:e,w:c.offsetWidth+b.w,
h:c.offsetHeight+b.h}};g.getContentBox=function(c,b){c=f.byId(c);var d=b||l.getComputedStyle(c);b=c.clientWidth;var e,h=g.getPadExtents(c,d);e=g.getBorderExtents(c,d);var d=c.offsetLeft+h.l+e.l,u=c.offsetTop+h.t+e.t;b?e=c.clientHeight:(b=c.offsetWidth-e.w,e=c.offsetHeight-e.h);if(8==m("ie")&&!m("quirks")){var t=c.parentNode,k=l.toPixelValue;t&&(t=l.getComputedStyle(t),d-="none"!=t.borderLeftStyle?k(c,t.borderLeftWidth):0,u-="none"!=t.borderTopStyle?k(c,t.borderTopWidth):0)}return{l:d,t:u,w:b-h.w,
h:e-h.h}};g.setContentSize=function(c,b,d){c=f.byId(c);var e=b.w;b=b.h;q(c)&&(d=g.getPadBorderExtents(c,d),0<=e&&(e+=d.w),0<=b&&(b+=d.h));k(c,NaN,NaN,e,b)};var e={l:0,t:0,w:0,h:0};g.setMarginBox=function(c,b,d){c=f.byId(c);var r=d||l.getComputedStyle(c);d=b.w;var v=b.h,u=q(c)?e:g.getPadBorderExtents(c,r),r=g.getMarginExtents(c,r);if(m("webkit")&&h(c)){var t=c.style;0<=d&&!t.width&&(t.width="4px");0<=v&&!t.height&&(t.height="4px")}0<=d&&(d=Math.max(d-u.w-r.w,0));0<=v&&(v=Math.max(v-u.h-r.h,0));k(c,
b.l,b.t,d,v)};g.isBodyLtr=function(c){c=c||p.doc;return"ltr"==(p.body(c).dir||c.documentElement.dir||"ltr").toLowerCase()};g.docScroll=function(c){c=c||p.doc;var b=p.doc.parentWindow||p.doc.defaultView;return"pageXOffset"in b?{x:b.pageXOffset,y:b.pageYOffset}:(b=m("quirks")?p.body(c):c.documentElement)&&{x:g.fixIeBiDiScrollLeft(b.scrollLeft||0,c),y:b.scrollTop||0}};g.getIeDocumentElementOffset=function(c){return{x:0,y:0}};g.fixIeBiDiScrollLeft=function(c,b){b=b||p.doc;var d=m("ie");if(d&&!g.isBodyLtr(b)){var e=
m("quirks");b=e?p.body(b):b.documentElement;var h=p.global;6==d&&!e&&h.frameElement&&b.scrollHeight>b.clientHeight&&(c+=b.clientLeft);return 8>d||e?c+b.clientWidth-b.scrollWidth:-c}return c};g.position=function(c,b){c=f.byId(c);var d=p.body(c.ownerDocument),e=c.getBoundingClientRect(),e={x:e.left,y:e.top,w:e.right-e.left,h:e.bottom-e.top};9>m("ie")&&(e.x-=m("quirks")?d.clientLeft+d.offsetLeft:0,e.y-=m("quirks")?d.clientTop+d.offsetTop:0);b&&(c=g.docScroll(c.ownerDocument),e.x+=c.x,e.y+=c.y);return e};
g.getMarginSize=function(c,b){c=f.byId(c);b=g.getMarginExtents(c,b||l.getComputedStyle(c));c=c.getBoundingClientRect();return{w:c.right-c.left+b.w,h:c.bottom-c.top+b.h}};g.normalizeEvent=function(c){"layerX"in c||(c.layerX=c.offsetX,c.layerY=c.offsetY);if(!("pageX"in c)){var b=c.target,b=b&&b.ownerDocument||document,d=m("quirks")?b.body:b.documentElement;c.pageX=c.clientX+g.fixIeBiDiScrollLeft(d.scrollLeft||0,b);c.pageY=c.clientY+(d.scrollTop||0)}};return g})},"dojo/_base/window":function(){define("dojo/_base/window",
["./kernel","./lang","../sniff"],function(m,p,f){var l={global:m.global,doc:m.global.document||null,body:function(f){f=f||m.doc;return f.body||f.getElementsByTagName("body")[0]},setContext:function(f,h){m.global=l.global=f;m.doc=l.doc=h},withGlobal:function(f,h,q,g){var e=m.global;try{return m.global=l.global=f,l.withDoc.call(null,f.document,h,q,g)}finally{m.global=l.global=e}},withDoc:function(k,h,q,g){var e=l.doc,c=f("quirks"),b=f("ie"),d,r,v;try{return m.doc=l.doc=k,m.isQuirks=f.add("quirks","BackCompat"==
m.doc.compatMode,!0,!0),f("ie")&&(v=k.parentWindow)&&v.navigator&&(d=parseFloat(v.navigator.appVersion.split("MSIE ")[1])||void 0,(r=k.documentMode)&&5!=r&&Math.floor(d)!=r&&(d=r),m.isIE=f.add("ie",d,!0,!0)),q&&"string"==typeof h&&(h=q[h]),h.apply(q,g||[])}finally{m.doc=l.doc=e,m.isQuirks=f.add("quirks",c,!0,!0),m.isIE=f.add("ie",b,!0,!0)}}};p.mixin(m,l);return l})},"dojo/dom":function(){define("dojo/dom",["./sniff","./_base/window","./_base/kernel"],function(m,p,f){if(7>=m("ie"))try{document.execCommand("BackgroundImageCache",
!1,!0)}catch(h){}var l={};m("ie")?l.byId=function(h,f){if("string"!=typeof h)return h;var g=f||p.doc;f=h&&g.getElementById(h);if(!f||f.attributes.id.value!=h&&f.id!=h){g=g.all[h];if(!g||g.nodeName)g=[g];for(var e=0;f=g[e++];)if(f.attributes&&f.attributes.id&&f.attributes.id.value==h||f.id==h)return f}else return f}:l.byId=function(h,f){return("string"==typeof h?(f||p.doc).getElementById(h):h)||null};f=f.global.document||null;m.add("dom-contains",!(!f||!f.contains));l.isDescendant=m("dom-contains")?
function(h,f){return!(!(f=l.byId(f))||!f.contains(l.byId(h)))}:function(h,f){try{for(h=l.byId(h),f=l.byId(f);h;){if(h==f)return!0;h=h.parentNode}}catch(g){}return!1};m.add("css-user-select",function(h,f,g){if(!g)return!1;h=g.style;f=["Khtml","O","Moz","Webkit"];g=f.length;var e="userSelect";do if("undefined"!==typeof h[e])return e;while(g--&&(e=f[g]+"UserSelect"));return!1});var k=m("css-user-select");l.setSelectable=k?function(h,f){l.byId(h).style[k]=f?"":"none"}:function(h,f){h=l.byId(h);var g=
h.getElementsByTagName("*"),e=g.length;if(f)for(h.removeAttribute("unselectable");e--;)g[e].removeAttribute("unselectable");else for(h.setAttribute("unselectable","on");e--;)g[e].setAttribute("unselectable","on")};return l})},"dojo/dom-style":function(){define("dojo/dom-style",["./sniff","./dom","./_base/window"],function(m,p,f){function l(c,e,g){e=e.toLowerCase();if("auto"==g){if("height"==e)return c.offsetHeight;if("width"==e)return c.offsetWidth}if("fontweight"==e)switch(g){case 700:return"bold";
default:return"normal"}e in b||(b[e]=d.test(e));return b[e]?q(c,g):g}var k,h={};k=m("webkit")?function(b){var c;if(1==b.nodeType){var d=b.ownerDocument.defaultView;c=d.getComputedStyle(b,null);!c&&b.style&&(b.style.display="",c=d.getComputedStyle(b,null))}return c||{}}:m("ie")&&(9>m("ie")||m("quirks"))?function(b){return 1==b.nodeType&&b.currentStyle?b.currentStyle:{}}:function(b){if(1===b.nodeType){var c=b.ownerDocument.defaultView;return(c.opener?c:f.global.window).getComputedStyle(b,null)}return{}};
h.getComputedStyle=k;var q;q=m("ie")?function(b,c){if(!c)return 0;if("medium"==c)return 4;if(c.slice&&"px"==c.slice(-2))return parseFloat(c);var d=b.style,e=b.runtimeStyle,g=d.left,h=e.left;e.left=b.currentStyle.left;try{d.left=c,c=d.pixelLeft}catch(z){c=0}d.left=g;e.left=h;return c}:function(b,c){return parseFloat(c)||0};h.toPixelValue=q;var g=function(b,c){try{return b.filters.item("DXImageTransform.Microsoft.Alpha")}catch(t){return c?{}:null}},e=9>m("ie")||10>m("ie")&&m("quirks")?function(b){try{return g(b).Opacity/
100}catch(u){return 1}}:function(b){return k(b).opacity},c=9>m("ie")||10>m("ie")&&m("quirks")?function(b,d){""===d&&(d=1);var e=100*d;1===d?(b.style.zoom="",g(b)&&(b.style.filter=b.style.filter.replace(/\s*progid:DXImageTransform.Microsoft.Alpha\([^\)]+?\)/i,""))):(b.style.zoom=1,g(b)?g(b,1).Opacity=e:b.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity\x3d"+e+")",g(b,1).Enabled=!0);if("tr"==b.tagName.toLowerCase())for(b=b.firstChild;b;b=b.nextSibling)"td"==b.tagName.toLowerCase()&&c(b,
d);return d}:function(b,c){return b.style.opacity=c},b={left:!0,top:!0},d=/margin|padding|width|height|max|min|offset/,r={cssFloat:1,styleFloat:1,"float":1};h.get=function(b,c){var d=p.byId(b),g=arguments.length;if(2==g&&"opacity"==c)return e(d);c=r[c]?"cssFloat"in d.style?"cssFloat":"styleFloat":c;var f=h.getComputedStyle(d);return 1==g?f:l(d,c,f[c]||d.style[c])};h.set=function(b,d,e){var g=p.byId(b),f=arguments.length,t="opacity"==d;d=r[d]?"cssFloat"in g.style?"cssFloat":"styleFloat":d;if(3==f)return t?
c(g,e):g.style[d]=e;for(var k in d)h.set(b,k,d[k]);return h.getComputedStyle(g)};return h})},"dojo/mouse":function(){define("dojo/mouse",["./_base/kernel","./on","./has","./dom","./_base/window"],function(m,p,f,l,k){function h(f,g){var e=function(c,b){return p(c,f,function(d){if(g)return g(d,b);if(!l.isDescendant(d.relatedTarget,c))return b.call(this,d)})};e.bubble=function(c){return h(f,function(b,d){var e=c(b.target),g=b.relatedTarget;if(e&&e!=(g&&1==g.nodeType&&c(g)))return d.call(e,b)})};return e}
f.add("dom-quirks",k.doc&&"BackCompat"==k.doc.compatMode);f.add("events-mouseenter",k.doc&&"onmouseenter"in k.doc.createElement("div"));f.add("events-mousewheel",k.doc&&"onmousewheel"in k.doc);k=f("dom-quirks")&&f("ie")||!f("dom-addeventlistener")?{LEFT:1,MIDDLE:4,RIGHT:2,isButton:function(h,g){return h.button&g},isLeft:function(h){return h.button&1},isMiddle:function(h){return h.button&4},isRight:function(h){return h.button&2}}:{LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(h,g){return h.button==g},
isLeft:function(h){return 0==h.button},isMiddle:function(h){return 1==h.button},isRight:function(h){return 2==h.button}};m.mouseButtons=k;m=f("events-mousewheel")?"mousewheel":function(h,g){return p(h,"DOMMouseScroll",function(e){e.wheelDelta=-e.detail;g.call(this,e)})};return{_eventHandler:h,enter:h("mouseover"),leave:h("mouseout"),wheel:m,isLeft:k.isLeft,isMiddle:k.isMiddle,isRight:k.isRight}})},"dojo/_base/sniff":function(){define("dojo/_base/sniff",["./kernel","./lang","../sniff"],function(m,
p,f){m._name="browser";p.mixin(m,{isBrowser:!0,isFF:f("ff"),isIE:f("ie"),isKhtml:f("khtml"),isWebKit:f("webkit"),isMozilla:f("mozilla"),isMoz:f("mozilla"),isOpera:f("opera"),isSafari:f("safari"),isChrome:f("chrome"),isMac:f("mac"),isIos:f("ios"),isAndroid:f("android"),isWii:f("wii"),isQuirks:f("quirks"),isAir:f("air")});return f})},"dojo/keys":function(){define("dojo/keys",["./_base/kernel","./sniff"],function(m,p){return m.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:p("webkit")?
91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,
F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:p("mac")&&!p("air")?p("safari")?91:224:17}})},"dojo/_base/Deferred":function(){define("dojo/_base/Deferred","./kernel ../Deferred ../promise/Promise ../errors/CancelError ../has ./lang ../when".split(" "),function(m,p,f,l,k,h,q){var g=function(){},e=Object.freeze||function(){},c=m.Deferred=function(b){function d(b){if(u)throw Error("This deferred has already been resolved");
q=b;u=!0;r()}function r(){for(var b;!b&&m;){var c=m;m=m.next;if(b=c.progress==g)u=!1;var d=w?c.error:c.resolved;k("config-useDeferredInstrumentation")&&w&&p.instrumentRejected&&p.instrumentRejected(q,!!d);if(d)try{var e=d(q);e&&"function"===typeof e.then?e.then(h.hitch(c.deferred,"resolve"),h.hitch(c.deferred,"reject"),h.hitch(c.deferred,"progress")):(d=b&&void 0===e,b&&!d&&(w=e instanceof Error),c.deferred[d&&w?"reject":"resolve"](d?q:e))}catch(D){c.deferred.reject(D)}else w?c.deferred.reject(q):
c.deferred.resolve(q)}}var q,u,t,x,w,y,m,B=this.promise=new f;this.isResolved=B.isResolved=function(){return 0==x};this.isRejected=B.isRejected=function(){return 1==x};this.isFulfilled=B.isFulfilled=function(){return 0<=x};this.isCanceled=B.isCanceled=function(){return t};this.resolve=this.callback=function(b){this.fired=x=0;this.results=[b,null];d(b)};this.reject=this.errback=function(b){w=!0;this.fired=x=1;k("config-useDeferredInstrumentation")&&p.instrumentRejected&&p.instrumentRejected(b,!!m);
d(b);this.results=[null,b]};this.progress=function(b){for(var c=m;c;){var d=c.progress;d&&d(b);c=c.next}};this.addCallbacks=function(b,c){this.then(b,c,g);return this};B.then=this.then=function(b,d,e){var h=e==g?this:new c(B.cancel);b={resolved:b,error:d,progress:e,deferred:h};m?y=y.next=b:m=y=b;u&&r();return h.promise};var A=this;B.cancel=this.cancel=function(){if(!u){var c=b&&b(A);u||(c instanceof Error||(c=new l(c)),c.log=!1,A.reject(c))}t=!0};e(B)};h.extend(c,{addCallback:function(b){return this.addCallbacks(h.hitch.apply(m,
arguments))},addErrback:function(b){return this.addCallbacks(null,h.hitch.apply(m,arguments))},addBoth:function(b){var c=h.hitch.apply(m,arguments);return this.addCallbacks(c,c)},fired:-1});c.when=m.when=q;return c})},"dojo/Deferred":function(){define("dojo/Deferred",["./has","./_base/lang","./errors/CancelError","./promise/Promise","./promise/instrumentation"],function(m,p,f,l,k){var h=Object.freeze||function(){},q=function(c,e,h,f,t){2===e&&b.instrumentRejected&&0===c.length&&b.instrumentRejected(h,
!1,f,t);for(t=0;t<c.length;t++)g(c[t],e,h,f)},g=function(d,g,h,f){var r=d[g],k=d.deferred;if(r)try{var u=r(h);if(0===g)"undefined"!==typeof u&&c(k,g,u);else{if(u&&"function"===typeof u.then){d.cancel=u.cancel;u.then(e(k,1),e(k,2),e(k,0));return}c(k,1,u)}}catch(y){c(k,2,y)}else c(k,g,h);2===g&&b.instrumentRejected&&b.instrumentRejected(h,!!r,f,k.promise)},e=function(b,e){return function(d){c(b,e,d)}},c=function(b,c,e){if(!b.isCanceled())switch(c){case 0:b.progress(e);break;case 1:b.resolve(e);break;
case 2:b.reject(e)}},b=function(c){var d=this.promise=new l,e=this,k,t,x,w=!1,y=[];Error.captureStackTrace&&(Error.captureStackTrace(e,b),Error.captureStackTrace(d,b));this.isResolved=d.isResolved=function(){return 1===k};this.isRejected=d.isRejected=function(){return 2===k};this.isFulfilled=d.isFulfilled=function(){return!!k};this.isCanceled=d.isCanceled=function(){return w};this.progress=function(b,c){if(k){if(!0===c)throw Error("This deferred has already been fulfilled.");return d}q(y,0,b,null,
e);return d};this.resolve=function(b,c){if(k){if(!0===c)throw Error("This deferred has already been fulfilled.");return d}q(y,k=1,t=b,null,e);y=null;return d};var m=this.reject=function(b,c){if(k){if(!0===c)throw Error("This deferred has already been fulfilled.");return d}Error.captureStackTrace&&Error.captureStackTrace(x={},m);q(y,k=2,t=b,x,e);y=null;return d};this.then=d.then=function(c,e,h){var r=[h,c,e];r.cancel=d.cancel;r.deferred=new b(function(b){return r.cancel&&r.cancel(b)});k&&!y?g(r,k,
t,x):y.push(r);return r.deferred.promise};this.cancel=d.cancel=function(b,d){if(!k){c&&(d=c(b),b="undefined"===typeof d?b:d);w=!0;if(!k)return"undefined"===typeof b&&(b=new f),m(b),b;if(2===k&&t===b)return b}else if(!0===d)throw Error("This deferred has already been fulfilled.");};h(d)};b.prototype.toString=function(){return"[object Deferred]"};k&&k(b);return b})},"dojo/errors/CancelError":function(){define("dojo/errors/CancelError",["./create"],function(m){return m("CancelError",null,null,{dojoType:"cancel",
log:!1})})},"dojo/errors/create":function(){define("dojo/errors/create",["../_base/lang"],function(m){return function(p,f,l,k){l=l||Error;var h=function(k){if(l===Error){Error.captureStackTrace&&Error.captureStackTrace(this,h);var g=Error.call(this,k),e;for(e in g)g.hasOwnProperty(e)&&(this[e]=g[e]);this.message=k;this.stack=g.stack}else l.apply(this,arguments);f&&f.apply(this,arguments)};h.prototype=m.delegate(l.prototype,k);h.prototype.name=p;return h.prototype.constructor=h}})},"dojo/promise/Promise":function(){define("dojo/promise/Promise",
["../_base/lang"],function(m){function p(){throw new TypeError("abstract");}return m.extend(function(){},{then:function(f,l,k){p()},cancel:function(f,l){p()},isResolved:function(){p()},isRejected:function(){p()},isFulfilled:function(){p()},isCanceled:function(){p()},"finally":function(f){return this.then(function(l){var k=f();return k&&"function"===typeof k.then?k.then(function(){return l}):l},function(l){var k=f();if(k&&"function"===typeof k.then)return k.then(function(){throw l;});throw l;})},always:function(f){return this.then(f,
f)},"catch":function(f){return this.then(null,f)},otherwise:function(f){return this.then(null,f)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})})},"dojo/promise/instrumentation":function(){define("dojo/promise/instrumentation",["./tracer","../has","../_base/lang","../_base/array"],function(m,p,f,l){function k(b,c,e){if(!b||!1!==b.log){var d="";b&&b.stack&&(d+=b.stack);c&&c.stack&&(d+="\n    ----------------------------------------\n    rejected"+
c.stack.split("\n").slice(1).join("\n").replace(/^\s+/," "));e&&e.stack&&(d+="\n    ----------------------------------------\n"+e.stack)}}function h(b,c,e,g){c||k(b,e,g)}function q(d,h,f,k){l.some(e,function(b){if(b.error===d)return h&&(b.handled=!0),!0})||e.push({error:d,rejection:f,handled:h,deferred:k,timestamp:(new Date).getTime()});c||(c=setTimeout(g,b))}function g(){var d=(new Date).getTime(),h=d-b;e=l.filter(e,function(b){return b.timestamp<h?(b.handled||k(b.error,b.rejection,b.deferred),!1):
!0});c=e.length?setTimeout(g,e[0].timestamp+b-d):!1}p.add("config-useDeferredInstrumentation","report-unhandled-rejections");var e=[],c=!1,b=1E3;return function(c){var d=p("config-useDeferredInstrumentation");if(d){m.on("resolved",f.hitch(console,"log","resolved"));m.on("rejected",f.hitch(console,"log","rejected"));m.on("progress",f.hitch(console,"log","progress"));var e=[];"string"===typeof d&&(e=d.split(","),d=e.shift());if("report-rejections"===d)c.instrumentRejected=h;else if("report-unhandled-rejections"===
d||!0===d||1===d)c.instrumentRejected=q,b=parseInt(e[0],10)||b;else throw Error("Unsupported instrumentation usage \x3c"+d+"\x3e");}}})},"dojo/promise/tracer":function(){define("dojo/promise/tracer",["../_base/lang","./Promise","../Evented"],function(m,p,f){function l(f){setTimeout(function(){h.apply(k,f)},0)}var k=new f,h=k.emit;k.emit=null;p.prototype.trace=function(){var h=m._toArray(arguments);this.then(function(g){l(["resolved",g].concat(h))},function(g){l(["rejected",g].concat(h))},function(g){l(["progress",
g].concat(h))});return this};p.prototype.traceRejected=function(){var h=m._toArray(arguments);this.otherwise(function(g){l(["rejected",g].concat(h))});return this};return k})},"dojo/when":function(){define("dojo/when",["./Deferred","./promise/Promise"],function(m,p){return function(f,l,k,h){var q=f&&"function"===typeof f.then,g=q&&f instanceof p;if(!q)return 1<arguments.length?l?l(f):f:(new m).resolve(f);g||(q=new m(f.cancel),f.then(q.resolve,q.reject,q.progress),f=q.promise);return l||k||h?f.then(l,
k,h):f}})},"dojo/_base/json":function(){define("dojo/_base/json",["./kernel","../json"],function(m,p){m.fromJson=function(f){return eval("("+f+")")};m._escapeString=p.stringify;m.toJsonIndentStr="\t";m.toJson=function(f,l){return p.stringify(f,function(f,h){return h&&(f=h.__json__||h.json,"function"==typeof f)?f.call(h):h},l&&m.toJsonIndentStr)};return m})},"dojo/json":function(){define("dojo/json",["./has"],function(m){var p="undefined"!=typeof JSON;m.add("json-parse",p);m.add("json-stringify",p&&
'{"a":1}'==JSON.stringify({a:0},function(f,k){return k||1}));if(m("json-stringify"))return JSON;var f=function(f){return('"'+f.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")};return{parse:m("json-parse")?JSON.parse:function(f,k){if(k&&!/^([\s\[\{]*(?:"(?:\\.|[^"])*"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(f))throw new SyntaxError("Invalid characters in JSON");return eval("("+
f+")")},stringify:function(l,k,h){function q(e,c,b){k&&(e=k(b,e));var d;d=typeof e;if("number"==d)return isFinite(e)?e+"":"null";if("boolean"==d)return e+"";if(null===e)return"null";if("string"==typeof e)return f(e);if("function"==d||"undefined"==d)return g;if("function"==typeof e.toJSON)return q(e.toJSON(b),c,b);if(e instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(b,c,d){b=e["getUTC"+c]()+(d?1:0);return 10>b?"0"+b:b});if(e.valueOf()!==
e)return q(e.valueOf(),c,b);var r=h?c+h:"",v=h?" ":"",u=h?"\n":"";if(e instanceof Array){var v=e.length,t=[];for(b=0;b<v;b++)d=q(e[b],r,b),"string"!=typeof d&&(d="null"),t.push(u+r+d);return"["+t.join(",")+u+c+"]"}t=[];for(b in e){var l;if(e.hasOwnProperty(b)){if("number"==typeof b)l='"'+b+'"';else if("string"==typeof b)l=f(b);else continue;d=q(e[b],r,b);"string"==typeof d&&t.push(u+r+l+":"+v+d)}}return"{"+t.join(",")+u+c+"}"}var g;"string"==typeof k&&(h=k,k=null);return q(l,"","")}}})},"dojo/_base/Color":function(){define("dojo/_base/Color",
["./kernel","./lang","./array","./config"],function(m,p,f,l){var k=m.Color=function(h){h&&this.setColor(h)};k.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:l.transparentColor||[0,0,0,0]};p.extend(k,{r:255,g:255,b:255,a:1,_set:function(h,f,g,e){this.r=h;
this.g=f;this.b=g;this.a=e},setColor:function(h){p.isString(h)?k.fromString(h,this):p.isArray(h)?k.fromArray(h,this):(this._set(h.r,h.g,h.b,h.a),h instanceof k||this.sanitize());return this},sanitize:function(){return this},toRgb:function(){return[this.r,this.g,this.b]},toRgba:function(){return[this.r,this.g,this.b,this.a]},toHex:function(){return"#"+f.map(["r","g","b"],function(h){h=this[h].toString(16);return 2>h.length?"0"+h:h},this).join("")},toCss:function(h){var f=this.r+", "+this.g+", "+this.b;
return(h?"rgba("+f+", "+this.a:"rgb("+f)+")"},toString:function(){return this.toCss(!0)}});k.blendColors=m.blendColors=function(h,f,g,e){e=e||new k;e.r=Math.round(h.r+(f.r-h.r)*g);e.g=Math.round(h.g+(f.g-h.g)*g);e.b=Math.round(h.b+(f.b-h.b)*g);e.a=h.a+(f.a-h.a)*g;return e.sanitize()};k.fromRgb=m.colorFromRgb=function(h,f){return(h=h.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/))&&k.fromArray(h[1].split(/\s*,\s*/),f)};k.fromHex=m.colorFromHex=function(h,q){var g=q||new k,e=4==h.length?4:8,c=(1<<e)-
1;h=Number("0x"+h.substr(1));if(isNaN(h))return null;f.forEach(["b","g","r"],function(b){var d=h&c;h>>=e;g[b]=4==e?17*d:d});g.a=1;return g};k.fromArray=m.colorFromArray=function(h,f){f=f||new k;f._set(Number(h[0]),Number(h[1]),Number(h[2]),Number(h[3]));isNaN(f.a)&&(f.a=1);return f.sanitize()};k.fromString=m.colorFromString=function(h,f){var g=k.named[h];return g&&k.fromArray(g,f)||k.fromRgb(h,f)||k.fromHex(h,f)};return k})},"dojo/_base/browser":function(){require.has&&require.has.add("config-selectorEngine",
"acme");define("dojo/_base/browser","../ready ./kernel ./connect ./unload ./window ./event ./html ./NodeList ../query ./xhr ./fx".split(" "),function(m){return m})},"dojo/_base/unload":function(){define("dojo/_base/unload",["./kernel","./lang","../on"],function(m,p,f){var l=window,k={addOnWindowUnload:function(h,k){m.windowUnloaded||f(l,"unload",m.windowUnloaded=function(){});f(l,"unload",p.hitch(h,k))},addOnUnload:function(h,k){f(l,"beforeunload",p.hitch(h,k))}};m.addOnWindowUnload=k.addOnWindowUnload;
m.addOnUnload=k.addOnUnload;return k})},"dojo/_base/html":function(){define("dojo/_base/html","./kernel ../dom ../dom-style ../dom-attr ../dom-prop ../dom-class ../dom-construct ../dom-geometry".split(" "),function(m,p,f,l,k,h,q,g){m.byId=p.byId;m.isDescendant=p.isDescendant;m.setSelectable=p.setSelectable;m.getAttr=l.get;m.setAttr=l.set;m.hasAttr=l.has;m.removeAttr=l.remove;m.getNodeProp=l.getNodeProp;m.attr=function(e,c,b){return 2==arguments.length?l["string"==typeof c?"get":"set"](e,c):l.set(e,
c,b)};m.hasClass=h.contains;m.addClass=h.add;m.removeClass=h.remove;m.toggleClass=h.toggle;m.replaceClass=h.replace;m._toDom=m.toDom=q.toDom;m.place=q.place;m.create=q.create;m.empty=function(e){q.empty(e)};m._destroyElement=m.destroy=function(e){q.destroy(e)};m._getPadExtents=m.getPadExtents=g.getPadExtents;m._getBorderExtents=m.getBorderExtents=g.getBorderExtents;m._getPadBorderExtents=m.getPadBorderExtents=g.getPadBorderExtents;m._getMarginExtents=m.getMarginExtents=g.getMarginExtents;m._getMarginSize=
m.getMarginSize=g.getMarginSize;m._getMarginBox=m.getMarginBox=g.getMarginBox;m.setMarginBox=g.setMarginBox;m._getContentBox=m.getContentBox=g.getContentBox;m.setContentSize=g.setContentSize;m._isBodyLtr=m.isBodyLtr=g.isBodyLtr;m._docScroll=m.docScroll=g.docScroll;m._getIeDocumentElementOffset=m.getIeDocumentElementOffset=g.getIeDocumentElementOffset;m._fixIeBiDiScrollLeft=m.fixIeBiDiScrollLeft=g.fixIeBiDiScrollLeft;m.position=g.position;m.marginBox=function(e,c){return c?g.setMarginBox(e,c):g.getMarginBox(e)};
m.contentBox=function(e,c){return c?g.setContentSize(e,c):g.getContentBox(e)};m.coords=function(e,c){m.deprecated("dojo.coords()","Use dojo.position() or dojo.marginBox().");e=p.byId(e);var b=f.getComputedStyle(e),b=g.getMarginBox(e,b);e=g.position(e,c);b.x=e.x;b.y=e.y;return b};m.getProp=k.get;m.setProp=k.set;m.prop=function(e,c,b){return 2==arguments.length?k["string"==typeof c?"get":"set"](e,c):k.set(e,c,b)};m.getStyle=f.get;m.setStyle=f.set;m.getComputedStyle=f.getComputedStyle;m.__toPixelValue=
m.toPixelValue=f.toPixelValue;m.style=function(e,c,b){switch(arguments.length){case 1:return f.get(e);case 2:return f["string"==typeof c?"get":"set"](e,c)}return f.set(e,c,b)};return m})},"dojo/dom-attr":function(){define("dojo/dom-attr","exports ./sniff ./_base/lang ./dom ./dom-style ./dom-prop".split(" "),function(m,p,f,l,k,h){function q(c,b){c=c.getAttributeNode&&c.getAttributeNode(b);return!!c&&c.specified}var g={innerHTML:1,textContent:1,className:1,htmlFor:p("ie"),value:1},e={classname:"class",
htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};m.has=function(c,b){var d=b.toLowerCase();return g[h.names[d]||b]||q(l.byId(c),e[d]||b)};m.get=function(c,b){c=l.byId(c);var d=b.toLowerCase(),r=h.names[d]||b,k=c[r];if(g[r]&&"undefined"!=typeof k)return k;if("textContent"==r)return h.get(c,r);if("href"!=r&&("boolean"==typeof k||f.isFunction(k)))return k;b=e[d]||b;return q(c,b)?c.getAttribute(b):null};m.set=function(c,b,d){c=l.byId(c);if(2==arguments.length){for(var r in b)m.set(c,r,b[r]);return c}r=
b.toLowerCase();var q=h.names[r]||b,u=g[q];if("style"==q&&"string"!=typeof d)return k.set(c,d),c;if(u||"boolean"==typeof d||f.isFunction(d))return h.set(c,b,d);c.setAttribute(e[r]||b,d);return c};m.remove=function(c,b){l.byId(c).removeAttribute(e[b.toLowerCase()]||b)};m.getNodeProp=function(c,b){c=l.byId(c);var d=b.toLowerCase(),g=h.names[d]||b;if(g in c&&"href"!=g)return c[g];b=e[d]||b;return q(c,b)?c.getAttribute(b):null}})},"dojo/dom-prop":function(){define("dojo/dom-prop","exports ./_base/kernel ./sniff ./_base/lang ./dom ./dom-style ./dom-construct ./_base/connect".split(" "),
function(m,p,f,l,k,h,q,g){function e(b){var c="";b=b.childNodes;for(var d=0,g;g=b[d];d++)8!=g.nodeType&&(c=1==g.nodeType?c+e(g):c+g.nodeValue);return c}var c={},b=1,d=p._scopeName+"attrid";f.add("dom-textContent",function(b,c,d){return"textContent"in d});m.names={"class":"className","for":"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",textcontent:"textContent",valuetype:"valueType"};m.get=function(b,c){b=k.byId(b);var d=c.toLowerCase();
c=m.names[d]||c;return"textContent"!=c||f("dom-textContent")?b[c]:e(b)};m.set=function(e,v,u){e=k.byId(e);if(2==arguments.length&&"string"!=typeof v){for(var r in v)m.set(e,r,v[r]);return e}r=v.toLowerCase();r=m.names[r]||v;if("style"==r&&"string"!=typeof u)return h.set(e,u),e;if("innerHTML"==r)return f("ie")&&e.tagName.toLowerCase()in{col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}?(q.empty(e),e.appendChild(q.toDom(u,e.ownerDocument))):e[r]=u,e;if("textContent"==r&&!f("dom-textContent"))return q.empty(e),
e.appendChild(e.ownerDocument.createTextNode(u)),e;if(l.isFunction(u)){var x=e[d];x||(x=b++,e[d]=x);c[x]||(c[x]={});var w=c[x][r];if(w)g.disconnect(w);else try{delete e[r]}catch(y){}u?c[x][r]=g.connect(e,r,u):e[r]=null;return e}e[r]=u;return e}})},"dojo/dom-construct":function(){define("dojo/dom-construct","exports ./_base/kernel ./sniff ./_base/window ./dom ./dom-attr".split(" "),function(m,p,f,l,k,h){function q(b,c){var d=c.parentNode;d&&d.insertBefore(b,c)}function g(b){if("innerHTML"in b)try{b.innerHTML=
"";return}catch(z){}for(var c;c=b.lastChild;)b.removeChild(c)}var e={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},c=/<\s*([\w\:]+)/,b={},d=0,r="__"+p._scopeName+"ToDomId",v;for(v in e)e.hasOwnProperty(v)&&(p=e[v],p.pre="option"==v?'\x3cselect multiple\x3d"multiple"\x3e':"\x3c"+p.join("\x3e\x3c")+"\x3e",p.post="\x3c/"+
p.reverse().join("\x3e\x3c/")+"\x3e");var u;8>=f("ie")&&(u=function(b){b.__dojo_html5_tested="yes";var c=t("div",{innerHTML:"\x3cnav\x3ea\x3c/nav\x3e",style:{visibility:"hidden"}},b.body);1!==c.childNodes.length&&"abbr article aside audio canvas details figcaption figure footer header hgroup mark meter nav output progress section summary time video".replace(/\b\w+\b/g,function(c){b.createElement(c)});x(c)});m.toDom=function(g,h){h=h||l.doc;var t=h[r];t||(h[r]=t=++d+"",b[t]=h.createElement("div"));
8>=f("ie")&&!h.__dojo_html5_tested&&h.body&&u(h);g+="";var k=g.match(c),q=k?k[1].toLowerCase():"",t=b[t];if(k&&e[q])for(k=e[q],t.innerHTML=k.pre+g+k.post,g=k.length;g;--g)t=t.firstChild;else t.innerHTML=g;if(1==t.childNodes.length)return t.removeChild(t.firstChild);for(g=h.createDocumentFragment();h=t.firstChild;)g.appendChild(h);return g};m.place=function(b,c,d){c=k.byId(c);"string"==typeof b&&(b=/^\s*</.test(b)?m.toDom(b,c.ownerDocument):k.byId(b));if("number"==typeof d){var e=c.childNodes;!e.length||
e.length<=d?c.appendChild(b):q(b,e[0>d?0:d])}else switch(d){case "before":q(b,c);break;case "after":d=b;(e=c.parentNode)&&(e.lastChild==c?e.appendChild(d):e.insertBefore(d,c.nextSibling));break;case "replace":c.parentNode.replaceChild(b,c);break;case "only":m.empty(c);c.appendChild(b);break;case "first":if(c.firstChild){q(b,c.firstChild);break}default:c.appendChild(b)}return b};var t=m.create=function(b,c,d,e){var g=l.doc;d&&(d=k.byId(d),g=d.ownerDocument);"string"==typeof b&&(b=g.createElement(b));
c&&h.set(b,c);d&&m.place(b,d,e);return b};m.empty=function(b){g(k.byId(b))};var x=m.destroy=function(b){if(b=k.byId(b)){var c=b;b=b.parentNode;c.firstChild&&g(c);b&&(f("ie")&&b.canHaveChildren&&"removeNode"in c?c.removeNode(!1):b.removeChild(c))}}})},"dojo/dom-class":function(){define("dojo/dom-class",["./_base/lang","./_base/array","./dom"],function(m,p,f){function l(e){if("string"==typeof e||e instanceof String){if(e&&!h.test(e))return q[0]=e,q;e=e.split(h);e.length&&!e[0]&&e.shift();e.length&&
!e[e.length-1]&&e.pop();return e}return e?p.filter(e,function(c){return c}):[]}var k,h=/\s+/,q=[""],g={};return k={contains:function(e,c){return 0<=(" "+f.byId(e).className+" ").indexOf(" "+c+" ")},add:function(e,c){e=f.byId(e);c=l(c);var b=e.className,d,b=b?" "+b+" ":" ";d=b.length;for(var g=0,h=c.length,k;g<h;++g)(k=c[g])&&0>b.indexOf(" "+k+" ")&&(b+=k+" ");d<b.length&&(e.className=b.substr(1,b.length-2))},remove:function(e,c){e=f.byId(e);var b;if(void 0!==c){c=l(c);b=" "+e.className+" ";for(var d=
0,g=c.length;d<g;++d)b=b.replace(" "+c[d]+" "," ");b=m.trim(b)}else b="";e.className!=b&&(e.className=b)},replace:function(e,c,b){e=f.byId(e);g.className=e.className;k.remove(g,b);k.add(g,c);e.className!==g.className&&(e.className=g.className)},toggle:function(e,c,b){e=f.byId(e);if(void 0===b){c=l(c);for(var d=0,g=c.length,h;d<g;++d)h=c[d],k[k.contains(e,h)?"remove":"add"](e,h)}else k[b?"add":"remove"](e,c);return b}}})},"dojo/_base/NodeList":function(){define("dojo/_base/NodeList",["./kernel","../query",
"./array","./html","../NodeList-dom"],function(m,p,f){p=p.NodeList;var l=p.prototype;l.connect=p._adaptAsForEach(function(){return m.connect.apply(this,arguments)});l.coords=p._adaptAsMap(m.coords);p.events="blur focus change click error keydown keypress keyup load mousedown mouseenter mouseleave mousemove mouseout mouseover mouseup submit".split(" ");f.forEach(p.events,function(f){var h="on"+f;l[h]=function(f,g){return this.connect(h,f,g)}});return m.NodeList=p})},"dojo/query":function(){define("dojo/query",
"./_base/kernel ./has ./dom ./on ./_base/array ./_base/lang ./selector/_loader ./selector/_loader!default".split(" "),function(m,p,f,l,k,h,q,g){function e(b,c){var d=function(d,e){if("string"==typeof e&&(e=f.byId(e),!e))return new c([]);d="string"==typeof d?b(d,e):d?d.end&&d.on?d:[d]:[];return d.end&&d.on?d:new c(d)};d.matches=b.match||function(b,c,e){return 0<d.filter([b],c,e).length};d.filter=b.filter||function(b,c,e){return d(c,e).filter(function(c){return-1<k.indexOf(b,c)})};if("function"!=typeof b){var e=
b.search;b=function(b,c){return e(c||document,b)}}return d}p.add("array-extensible",function(){return 1==h.delegate([],{length:1}).length&&!p("bug-for-in-skips-shadowed")});var c=Array.prototype,b=c.slice,d=c.concat,r=k.forEach,v=function(c,d,e){d=[0].concat(b.call(d,0));e=e||m.global;return function(b){d[0]=b;return c.apply(e,d)}},u=function(b){var c=this instanceof t&&p("array-extensible");"number"==typeof b&&(b=Array(b));var d=b&&"length"in b?b:arguments;if(c||!d.sort){for(var e=c?this:[],g=e.length=
d.length,f=0;f<g;f++)e[f]=d[f];if(c)return e;d=e}h._mixin(d,x);d._NodeListCtor=function(b){return t(b)};return d},t=u,x=t.prototype=p("array-extensible")?[]:{};t._wrap=x._wrap=function(b,c,d){b=new (d||this._NodeListCtor||t)(b);return c?b._stash(c):b};t._adaptAsMap=function(b,c){return function(){return this.map(v(b,arguments,c))}};t._adaptAsForEach=function(b,c){return function(){this.forEach(v(b,arguments,c));return this}};t._adaptAsFilter=function(b,c){return function(){return this.filter(v(b,
arguments,c))}};t._adaptWithCondition=function(b,c,d){return function(){var e=arguments,g=v(b,e,d);if(c.call(d||m.global,e))return this.map(g);this.forEach(g);return this}};r(["slice","splice"],function(b){var d=c[b];x[b]=function(){return this._wrap(d.apply(this,arguments),"slice"==b?this:null)}});r(["indexOf","lastIndexOf","every","some"],function(c){var d=k[c];x[c]=function(){return d.apply(m,[this].concat(b.call(arguments,0)))}});h.extend(u,{constructor:t,_NodeListCtor:t,toString:function(){return this.join(",")},
_stash:function(b){this._parent=b;return this},on:function(b,c){var d=this.map(function(d){return l(d,b,c)});d.remove=function(){for(var b=0;b<d.length;b++)d[b].remove()};return d},end:function(){return this._parent?this._parent:new this._NodeListCtor(0)},concat:function(c){var e=b.call(this,0),g=k.map(arguments,function(c){return b.call(c,0)});return this._wrap(d.apply(e,g),this)},map:function(b,c){return this._wrap(k.map(this,b,c),this)},forEach:function(b,c){r(this,b,c);return this},filter:function(b){var c=
arguments,d=this,e=0;if("string"==typeof b){d=w._filterResult(this,c[0]);if(1==c.length)return d._stash(this);e=1}return this._wrap(k.filter(d,c[e],c[e+1]),this)},instantiate:function(b,c){var d=h.isFunction(b)?b:h.getObject(b);c=c||{};return this.forEach(function(b){new d(c,b)})},at:function(){var b=new this._NodeListCtor(0);r(arguments,function(c){0>c&&(c=this.length+c);this[c]&&b.push(this[c])},this);return b._stash(this)}});var w=e(g,u);m.query=e(g,function(b){return u(b)});w.load=function(b,
c,d){q.load(b,c,function(b){d(e(b,u))})};m._filterQueryResult=w._filterResult=function(b,c,d){return new u(w.filter(b,c,d))};m.NodeList=w.NodeList=u;return w})},"dojo/selector/_loader":function(){define("dojo/selector/_loader",["../has","require"],function(m,p){if("undefined"!==typeof document){var f=document.createElement("div");m.add("dom-qsa2.1",!!f.querySelectorAll);m.add("dom-qsa3",function(){try{return f.innerHTML="\x3cp class\x3d'TEST'\x3e\x3c/p\x3e",1==f.querySelectorAll(".TEST:empty").length}catch(k){}})}var l;
return{load:function(f,h,q,g){if(g&&g.isBuild)q();else{g=p;f="default"==f?m("config-selectorEngine")||"css3":f;f="css2"==f||"lite"==f?"./lite":"css2.1"==f?m("dom-qsa2.1")?"./lite":"./acme":"css3"==f?m("dom-qsa3")?"./lite":"./acme":"acme"==f?"./acme":(g=h)&&f;if("?"==f.charAt(f.length-1)){f=f.substring(0,f.length-1);var e=!0}if(e&&(m("dom-compliant-qsa")||l))return q(l);g([f],function(c){"./lite"!=f&&(l=c);q(c)})}}}})},"dojo/selector/lite":function(){define("dojo/selector/lite",["../has","../_base/kernel"],
function(m,p){var f=document.createElement("div"),l=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.msMatchesSelector||f.oMatchesSelector,k=f.querySelectorAll,h=/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g;m.add("dom-matches-selector",!!l);m.add("dom-qsa",!!k);var q=function(b,d){if(c&&-1<b.indexOf(","))return c(b,d);var h=d?d.ownerDocument||d:p.doc||document,f=(k?/^([\w]*)#([\w\-]+$)|^(\.)([\w\-\*]+$)|^(\w+$)/:/^([\w]*)#([\w\-]+)(?:\s+(.*))?$|(?:^|(>|.+\s+))([\w\-\*]+)(\S*$)/).exec(b);
d=d||h;if(f){var u=8===m("ie")&&m("quirks")?d.nodeType===h.nodeType:null!==d.parentNode&&9!==d.nodeType&&d.parentNode===h;if(f[2]&&u){var t=p.byId?p.byId(f[2],h):h.getElementById(f[2]);if(!t||f[1]&&f[1]!=t.tagName.toLowerCase())return[];if(d!=h)for(b=t;b!=d;)if(b=b.parentNode,!b)return[];return f[3]?q(f[3],t):[t]}if(f[3]&&d.getElementsByClassName)return d.getElementsByClassName(f[4]);if(f[5])if(t=d.getElementsByTagName(f[5]),f[4]||f[6])b=(f[4]||"")+f[6];else return t}if(k)return 1===d.nodeType&&"object"!==
d.nodeName.toLowerCase()?g(d,b,d.querySelectorAll):d.querySelectorAll(b);t||(t=d.getElementsByTagName("*"));f=[];h=0;for(u=t.length;h<u;h++){var l=t[h];1==l.nodeType&&e(l,b,d)&&f.push(l)}return f},g=function(b,c,e){var d=b,g=b.getAttribute("id"),f=g||"__dojo__",r=b.parentNode,k=/^\s*[+~]/.test(c);if(k&&!r)return[];g?f=f.replace(/'/g,"\\$\x26"):b.setAttribute("id",f);k&&r&&(b=b.parentNode);c=c.match(h);for(r=0;r<c.length;r++)c[r]="[id\x3d'"+f+"'] "+c[r];c=c.join(",");try{return e.call(b,c)}finally{g||
d.removeAttribute("id")}};if(!m("dom-matches-selector"))var e=function(){function b(b,c,d){var e=c.charAt(0);if('"'==e||"'"==e)c=c.slice(1,-1);c=c.replace(/\\/g,"");var g=k[d||""];return function(d){return(d=d.getAttribute(b))&&g(d,c)}}function c(b){return function(c,d){for(;(c=c.parentNode)!=d;)if(b(c,d))return!0}}function e(b){return function(c,d){c=c.parentNode;return b?c!=d&&b(c,d):c==d}}function g(b,c){return b?function(d,e){return c(d)&&b(d,e)}:c}var h="div"==f.tagName?"toLowerCase":"toUpperCase",
t={"":function(b){b=b[h]();return function(c){return c.tagName==b}},".":function(b){var c=" "+b+" ";return function(d){return-1<d.className.indexOf(b)&&-1<(" "+d.className+" ").indexOf(c)}},"#":function(b){return function(c){return c.id==b}}},k={"^\x3d":function(b,c){return 0==b.indexOf(c)},"*\x3d":function(b,c){return-1<b.indexOf(c)},"$\x3d":function(b,c){return b.substring(b.length-c.length,b.length)==c},"~\x3d":function(b,c){return-1<(" "+b+" ").indexOf(" "+c+" ")},"|\x3d":function(b,c){return 0==
(b+"-").indexOf(c+"-")},"\x3d":function(b,c){return b==c},"":function(b,c){return!0}},q={};return function(d,h,f){var r=q[h];if(!r){if(h.replace(/(?:\s*([> ])\s*)|(#|\.)?((?:\\.|[\w-])+)|\[\s*([\w-]+)\s*(.?=)?\s*("(?:\\.|[^"])+"|'(?:\\.|[^'])+'|(?:\\.|[^\]])*)\s*\]/g,function(d,h,f,k,u,q,v){k?r=g(r,t[f||""](k.replace(/\\/g,""))):h?r=(" "==h?c:e)(r):u&&(r=g(r,b(u,v,q)));return""}))throw Error("Syntax error in query");if(!r)return!0;q[h]=r}return r(d,f)}}();if(!m("dom-qsa"))var c=function(b,c){for(var d=
b.match(h),e=[],g=0;g<d.length;g++){b=new String(d[g].replace(/\s*$/,""));b.indexOf=escape;b=q(b,c);for(var f=0,k=b.length;f<k;f++){var l=b[f];e[l.sourceIndex]=l}}c=[];for(g in e)c.push(e[g]);return c};q.match=l?function(b,c,e){return e&&9!=e.nodeType?g(e,c,function(c){return l.call(b,c)}):l.call(b,c)}:e;return q})},"dojo/NodeList-dom":function(){define("dojo/NodeList-dom","./_base/kernel ./query ./_base/array ./_base/lang ./dom-class ./dom-construct ./dom-geometry ./dom-attr ./dom-style".split(" "),
function(m,p,f,l,k,h,q,g,e){function c(b){return function(c,d,e){return 2==arguments.length?b["string"==typeof d?"get":"set"](c,d):b.set(c,d,e)}}var b=function(b){return 1==b.length&&"string"==typeof b[0]},d=function(b){var c=b.parentNode;c&&c.removeChild(b)},r=p.NodeList,v=r._adaptWithCondition,u=r._adaptAsForEach,t=r._adaptAsMap;l.extend(r,{_normalize:function(b,c){var d=!0===b.parse;if("string"==typeof b.template){var e=b.templateFunc||m.string&&m.string.substitute;b=e?e(b.template,b):b}e=typeof b;
"string"==e||"number"==e?(b=h.toDom(b,c&&c.ownerDocument),b=11==b.nodeType?l._toArray(b.childNodes):[b]):l.isArrayLike(b)?l.isArray(b)||(b=l._toArray(b)):b=[b];d&&(b._runParse=!0);return b},_cloneNode:function(b){return b.cloneNode(!0)},_place:function(b,c,d,e){if(1==c.nodeType||"only"!=d)for(var g,f=b.length,r=f-1;0<=r;r--){var t=e?this._cloneNode(b[r]):b[r];if(b._runParse&&m.parser&&m.parser.parse)for(g||(g=c.ownerDocument.createElement("div")),g.appendChild(t),m.parser.parse(g),t=g.firstChild;g.firstChild;)g.removeChild(g.firstChild);
r==f-1?h.place(t,c,d):c.parentNode.insertBefore(t,c);c=t}},position:t(q.position),attr:v(c(g),b),style:v(c(e),b),addClass:u(k.add),removeClass:u(k.remove),toggleClass:u(k.toggle),replaceClass:u(k.replace),empty:u(h.empty),removeAttr:u(g.remove),marginBox:t(q.getMarginBox),place:function(b,c){var d=p(b)[0];return this.forEach(function(b){h.place(b,d,c)})},orphan:function(b){return(b?p._filterResult(this,b):this).forEach(d)},adopt:function(b,c){return p(b).place(this[0],c)._stash(this)},query:function(b){if(!b)return this;
var c=new r;this.map(function(d){p(b,d).forEach(function(b){void 0!==b&&c.push(b)})});return c._stash(this)},filter:function(b){var c=arguments,d=this,e=0;if("string"==typeof b){d=p._filterResult(this,c[0]);if(1==c.length)return d._stash(this);e=1}return this._wrap(f.filter(d,c[e],c[e+1]),this)},addContent:function(b,c){b=this._normalize(b,this[0]);for(var d=0,e;e=this[d];d++)b.length?this._place(b,e,c,0<d):h.empty(e);return this}});return r})},"dojo/_base/xhr":function(){define("dojo/_base/xhr",
"./kernel ./sniff require ../io-query ../dom ../dom-form ./Deferred ./config ./json ./lang ./array ../on ../aspect ../request/watch ../request/xhr ../request/util".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t){m._xhrObj=u._create;var x=m.config;m.objectToQuery=l.objectToQuery;m.queryToObject=l.queryToObject;m.fieldToObject=h.fieldToObject;m.formToObject=h.toObject;m.formToQuery=h.toQuery;m.formToJson=h.toJson;m._blockAsync=!1;p.add("native-xhr2-blob",function(){if(p("native-xhr2")){var b=new XMLHttpRequest;
b.open("GET","/",!0);b.responseType="blob";var c=b.responseType;b.abort();return"blob"===c}});var w=m._contentHandlers=m.contentHandlers={text:function(b){return b.responseText},json:function(b){return e.fromJson(b.responseText||null)},"json-comment-filtered":function(b){b=b.responseText;var c=b.indexOf("/*"),d=b.lastIndexOf("*/");if(-1==c||-1==d)throw Error("JSON was not comment filtered");return e.fromJson(b.substring(c+2,d))},javascript:function(b){return m.eval(b.responseText)},xml:function(c){var d=
c.responseXML;d&&p("dom-qsa2.1")&&!d.querySelectorAll&&p("dom-parser")&&(d=(new DOMParser).parseFromString(c.responseText,"application/xml"));if(p("ie")&&(!d||!d.documentElement)){var e=function(b){return"MSXML"+b+".DOMDocument"},e=["Microsoft.XMLDOM",e(6),e(4),e(3),e(2)];b.some(e,function(b){try{var e=new ActiveXObject(b);e.async=!1;e.loadXML(c.responseText);d=e}catch(G){return!1}return!0})}return d},"json-comment-optional":function(b){return b.responseText&&/^[^{\[]*\/\*/.test(b.responseText)?w["json-comment-filtered"](b):
w.json(b)}};p("native-xhr2")&&(w.arraybuffer=w.blob=w.document=function(b,c){return"blob"!==c.args.handleAs||p("native-xhr2-blob")?b.response:new Blob([b.response],{type:b.getResponseHeader("Content-Type")})});m._ioSetArgs=function(b,d,e,g){var f={args:b,url:b.url},r=null;if(b.form){var r=k.byId(b.form),t=r.getAttributeNode("action");f.url=f.url||(t?t.value:m.doc?m.doc.URL:null);r=h.toObject(r)}t={};r&&c.mixin(t,r);b.content&&c.mixin(t,b.content);b.preventCache&&(t["dojo.preventCache"]=(new Date).valueOf());
f.query=l.objectToQuery(t);f.handleAs=b.handleAs||"text";var u=new q(function(b){b.canceled=!0;d&&d(b);var c=b.ioArgs.error;c||(c=Error("request cancelled"),c.dojoType="cancel",b.ioArgs.error=c);return c});u.addCallback(e);var v=b.load;v&&c.isFunction(v)&&u.addCallback(function(c){return v.call(b,c,f)});var w=b.error;w&&c.isFunction(w)&&u.addErrback(function(c){return w.call(b,c,f)});var C=b.handle;C&&c.isFunction(C)&&u.addBoth(function(c){return C.call(b,c,f)});u.addErrback(function(b){return g(b,
u)});x.ioPublish&&m.publish&&!1!==f.args.ioPublish&&(u.addCallbacks(function(b){m.publish("/dojo/io/load",[u,b]);return b},function(b){m.publish("/dojo/io/error",[u,b]);return b}),u.addBoth(function(b){m.publish("/dojo/io/done",[u,b]);return b}));u.ioArgs=f;return u};var y=function(b){b=w[b.ioArgs.handleAs](b.ioArgs.xhr,b.ioArgs);return void 0===b?null:b},z=function(b,c){return b},B=function(b){0>=A&&(A=0,x.ioPublish&&m.publish&&(!b||b&&!1!==b.ioArgs.args.ioPublish)&&m.publish("/dojo/io/stop"))},
A=0;r.after(v,"_onAction",function(){--A});r.after(v,"_onInFlight",B);m._ioCancelAll=v.cancelAll;m._ioNotifyStart=function(b){x.ioPublish&&m.publish&&!1!==b.ioArgs.args.ioPublish&&(A||m.publish("/dojo/io/start"),A+=1,m.publish("/dojo/io/send",[b]))};m._ioWatch=function(b,d,e,g){b.ioArgs.options=b.ioArgs.args;c.mixin(b,{response:b.ioArgs,isValid:function(c){return d(b)},isReady:function(c){return e(b)},handleResponse:function(c){return g(b)}});v(b);B(b)};m._ioAddQueryToUrl=function(b){b.query.length&&
(b.url+=(-1==b.url.indexOf("?")?"?":"\x26")+b.query,b.query=null)};m.xhr=function(b,c,d){var e,g=m._ioSetArgs(c,function(b){e&&e.cancel()},y,z),h=g.ioArgs;"postData"in c?h.query=c.postData:"putData"in c?h.query=c.putData:"rawBody"in c?h.query=c.rawBody:(2<arguments.length&&!d||-1==="POST|PUT".indexOf(b.toUpperCase()))&&m._ioAddQueryToUrl(h);var f;p("native-xhr2")&&(f={arraybuffer:1,blob:1,document:1});f=f[c.handleAs]?c.handleAs:"text";"blob"!==f||p("native-xhr2-blob")||(f="arraybuffer");f={method:b,
handleAs:f,responseType:c.responseType,timeout:c.timeout,withCredentials:c.withCredentials,ioArgs:h};"undefined"!==typeof c.headers&&(f.headers=c.headers);"undefined"!==typeof c.contentType&&(f.headers||(f.headers={}),f.headers["Content-Type"]=c.contentType);"undefined"!==typeof h.query&&(f.data=h.query);"undefined"!==typeof c.sync&&(f.sync=c.sync);m._ioNotifyStart(g);try{e=u(h.url,f,!0)}catch(P){return g.cancel(),g}g.ioArgs.xhr=e.response.xhr;e.then(function(){g.resolve(g)}).otherwise(function(b){h.error=
b;b.response&&(b.status=b.response.status,b.responseText=b.response.text,b.xhr=b.response.xhr);g.reject(b)});return g};m.xhrGet=function(b){return m.xhr("GET",b)};m.rawXhrPost=m.xhrPost=function(b){return m.xhr("POST",b,!0)};m.rawXhrPut=m.xhrPut=function(b){return m.xhr("PUT",b,!0)};m.xhrDelete=function(b){return m.xhr("DELETE",b)};m._isDocumentOk=function(b){return t.checkStatus(b.status)};m._getText=function(b){var c;m.xhrGet({url:b,sync:!0,load:function(b){c=b}});return c};c.mixin(m.xhr,{_xhrObj:m._xhrObj,
fieldToObject:h.fieldToObject,formToObject:h.toObject,objectToQuery:l.objectToQuery,formToQuery:h.toQuery,formToJson:h.toJson,queryToObject:l.queryToObject,contentHandlers:w,_ioSetArgs:m._ioSetArgs,_ioCancelAll:m._ioCancelAll,_ioNotifyStart:m._ioNotifyStart,_ioWatch:m._ioWatch,_ioAddQueryToUrl:m._ioAddQueryToUrl,_isDocumentOk:m._isDocumentOk,_getText:m._getText,get:m.xhrGet,post:m.xhrPost,put:m.xhrPut,del:m.xhrDelete});return m.xhr})},"dojo/io-query":function(){define("dojo/io-query",["./_base/lang"],
function(m){var p={};return{objectToQuery:function(f){var l=encodeURIComponent,k=[],h;for(h in f){var q=f[h];if(q!=p[h]){var g=l(h)+"\x3d";if(m.isArray(q))for(var e=0,c=q.length;e<c;++e)k.push(g+l(q[e]));else k.push(g+l(q))}}return k.join("\x26")},queryToObject:function(f){var l=decodeURIComponent;f=f.split("\x26");for(var k={},h,q,g=0,e=f.length;g<e;++g)if(q=f[g],q.length){var c=q.indexOf("\x3d");0>c?(h=l(q),q=""):(h=l(q.slice(0,c)),q=l(q.slice(c+1)));"string"==typeof k[h]&&(k[h]=[k[h]]);m.isArray(k[h])?
k[h].push(q):k[h]=q}return k}}})},"dojo/dom-form":function(){define("dojo/dom-form",["./_base/lang","./dom","./io-query","./json"],function(m,p,f,l){var k={fieldToObject:function(h){var f=null;if(h=p.byId(h)){var g=h.name,e=(h.type||"").toLowerCase();if(g&&e&&!h.disabled)if("radio"==e||"checkbox"==e)h.checked&&(f=h.value);else if(h.multiple)for(f=[],h=[h.firstChild];h.length;)for(g=h.pop();g;g=g.nextSibling)if(1==g.nodeType&&"option"==g.tagName.toLowerCase())g.selected&&f.push(g.value);else{g.nextSibling&&
h.push(g.nextSibling);g.firstChild&&h.push(g.firstChild);break}else f=h.value}return f},toObject:function(h){var f={};h=p.byId(h).elements;for(var g=0,e=h.length;g<e;++g){var c=h[g],b=c.name,d=(c.type||"").toLowerCase();if(b&&d&&0>"file|submit|image|reset|button".indexOf(d)&&!c.disabled){var r=f,v=b,c=k.fieldToObject(c);if(null!==c){var u=r[v];"string"==typeof u?r[v]=[u,c]:m.isArray(u)?u.push(c):r[v]=c}"image"==d&&(f[b+".x"]=f[b+".y"]=f[b].x=f[b].y=0)}}return f},toQuery:function(h){return f.objectToQuery(k.toObject(h))},
toJson:function(h,f){return l.stringify(k.toObject(h),null,f?4:0)}};return k})},"dojo/request/watch":function(){define("dojo/request/watch","./util ../errors/RequestTimeoutError ../errors/CancelError ../_base/array ../_base/window ../has!host-browser?dom-addeventlistener?:../on:".split(" "),function(m,p,f,l,k,h){function q(){for(var b=+new Date,d=0,h;d<c.length&&(h=c[d]);d++){var f=h.response,k=f.options;h.isCanceled&&h.isCanceled()||h.isValid&&!h.isValid(f)?(c.splice(d--,1),g._onAction&&g._onAction()):
h.isReady&&h.isReady(f)?(c.splice(d--,1),h.handleResponse(f),g._onAction&&g._onAction()):h.startTime&&h.startTime+(k.timeout||0)<b&&(c.splice(d--,1),h.cancel(new p("Timeout exceeded",f)),g._onAction&&g._onAction())}g._onInFlight&&g._onInFlight(h);c.length||(clearInterval(e),e=null)}function g(b){b.response.options.timeout&&(b.startTime=+new Date);b.isFulfilled()||(c.push(b),e||(e=setInterval(q,50)),b.response.options.sync&&q())}var e=null,c=[];g.cancelAll=function(){try{l.forEach(c,function(b){try{b.cancel(new f("All requests canceled."))}catch(d){}})}catch(b){}};
k&&h&&k.doc.attachEvent&&h(k.global,"unload",function(){g.cancelAll()});return g})},"dojo/request/util":function(){define("dojo/request/util","exports ../errors/RequestError ../errors/CancelError ../Deferred ../io-query ../_base/array ../_base/lang ../promise/Promise ../has".split(" "),function(m,p,f,l,k,h,q,g,e){function c(b){return d(b)}function b(b){return void 0!==b.data?b.data:b.text}m.deepCopy=function(b,c){for(var d in c){var e=b[d],g=c[d];e!==g&&(e&&"object"===typeof e&&g&&"object"===typeof g?
g instanceof Date?b[d]=new Date(g):m.deepCopy(e,g):b[d]=g)}return b};m.deepCreate=function(b,c){c=c||{};var d=q.delegate(b),e,g;for(e in b)(g=b[e])&&"object"===typeof g&&(d[e]=m.deepCreate(g,c[e]));return m.deepCopy(d,c)};var d=Object.freeze||function(b){return b};m.deferred=function(e,h,k,t,x,w){var r=new l(function(b){h&&h(r,e);return b&&(b instanceof p||b instanceof f)?b:new f("Request canceled",e)});r.response=e;r.isValid=k;r.isReady=t;r.handleResponse=x;k=r.then(c).otherwise(function(b){b.response=
e;throw b;});m.notify&&k.then(q.hitch(m.notify,"emit","load"),q.hitch(m.notify,"emit","error"));t=k.then(b);x=new g;for(var u in t)t.hasOwnProperty(u)&&(x[u]=t[u]);x.response=k;d(x);w&&r.then(function(b){w.call(r,b)},function(b){w.call(r,e,b)});r.promise=x;r.then=x.then;return r};m.addCommonMethods=function(b,c){h.forEach(c||["GET","POST","PUT","DELETE"],function(c){b[("DELETE"===c?"DEL":c).toLowerCase()]=function(d,e){e=q.delegate(e||{});e.method=c;return b(d,e)}})};m.parseArgs=function(b,c,d){var g=
c.data,h=c.query;!g||d||"object"!==typeof g||e("native-xhr2")&&(g instanceof ArrayBuffer||g instanceof Blob)||(c.data=k.objectToQuery(g));h?("object"===typeof h&&(h=k.objectToQuery(h)),c.preventCache&&(h+=(h?"\x26":"")+"request.preventCache\x3d"+ +new Date)):c.preventCache&&(h="request.preventCache\x3d"+ +new Date);b&&h&&(b+=(~b.indexOf("?")?"\x26":"?")+h);return{url:b,options:c,getHeader:function(b){return null}}};m.checkStatus=function(b){b=b||0;return 200<=b&&300>b||304===b||1223===b||!b}})},"dojo/errors/RequestError":function(){define("dojo/errors/RequestError",
["./create"],function(m){return m("RequestError",function(m,f){this.response=f})})},"dojo/errors/RequestTimeoutError":function(){define("dojo/errors/RequestTimeoutError",["./create","./RequestError"],function(m,p){return m("RequestTimeoutError",null,p,{dojoType:"timeout"})})},"dojo/request/xhr":function(){define("dojo/request/xhr",["../errors/RequestError","./watch","./handlers","./util","../has"],function(m,p,f,l,k){function h(b,c){var d=b.xhr;b.status=b.xhr.status;try{b.text=d.responseText}catch(y){}"xml"===
b.options.handleAs&&(b.data=d.responseXML);var e;if(c)this.reject(c);else{try{f(b)}catch(y){e=y}l.checkStatus(d.status)?e?this.reject(e):this.resolve(b):(c=e?new m("Unable to load "+b.url+" status: "+d.status+" and an error in handleAs: transformation of response",b):new m("Unable to load "+b.url+" status: "+d.status,b),this.reject(c))}}function q(b){return this.xhr.getResponseHeader(b)}function g(f,t,x){var u=k("native-formdata")&&t&&t.data&&t.data instanceof FormData,y=l.parseArgs(f,l.deepCreate(v,
t),u);f=y.url;t=y.options;var z=!t.data&&"POST"!==t.method&&"PUT"!==t.method;10>=k("ie")&&(f=f.split("#")[0]);var B,A=l.deferred(y,r,c,b,h,function(){B&&B()}),C=y.xhr=g._create();if(!C)return A.cancel(new m("XHR was not created")),x?A:A.promise;y.getHeader=q;d&&(B=d(C,A,y,t.uploadProgress));var F="undefined"===typeof t.data?null:t.data,E=!t.sync,H=t.method;try{C.open(H,f,E,t.user||void 0,t.password||void 0);t.withCredentials&&(C.withCredentials=t.withCredentials);k("native-response-type")&&t.handleAs in
e&&(C.responseType=e[t.handleAs]);var D=t.headers;f=u||z?!1:"application/x-www-form-urlencoded";if(D)for(var G in D)"content-type"===G.toLowerCase()?f=D[G]:D[G]&&C.setRequestHeader(G,D[G]);f&&!1!==f&&C.setRequestHeader("Content-Type",f);D&&"X-Requested-With"in D||C.setRequestHeader("X-Requested-With","XMLHttpRequest");l.notify&&l.notify.emit("send",y,A.promise.cancel);C.send(F)}catch(I){A.reject(I)}p(A);C=null;return x?A:A.promise}k.add("native-xhr",function(){return"undefined"!==typeof XMLHttpRequest});
k.add("dojo-force-activex-xhr",function(){return k("activex")&&"file:"===window.location.protocol});k.add("native-xhr2",function(){if(k("native-xhr")&&!k("dojo-force-activex-xhr")){var b=new XMLHttpRequest;return"undefined"!==typeof b.addEventListener&&("undefined"===typeof opera||"undefined"!==typeof b.upload)}});k.add("native-formdata",function(){return"undefined"!==typeof FormData});k.add("native-response-type",function(){return k("native-xhr")&&"undefined"!==typeof(new XMLHttpRequest).responseType});
k.add("native-xhr2-blob",function(){if(k("native-response-type")){var b=new XMLHttpRequest;b.open("GET","https://dojotoolkit.org/",!0);b.responseType="blob";var c=b.responseType;b.abort();return"blob"===c}});var e={blob:k("native-xhr2-blob")?"blob":"arraybuffer",document:"document",arraybuffer:"arraybuffer"},c,b,d,r;k("native-xhr2")?(c=function(b){return!this.isFulfilled()},r=function(b,c){c.xhr.abort()},d=function(b,c,d,e){function g(b){c.handleResponse(d)}function h(b){b=new m("Unable to load "+
d.url+" status: "+b.target.status,d);c.handleResponse(d,b)}function f(b,e){d.transferType=b;e.lengthComputable?(d.loaded=e.loaded,d.total=e.total,c.progress(d)):3===d.xhr.readyState&&(d.loaded="loaded"in e?e.loaded:e.position,c.progress(d))}function r(b){return f("download",b)}function t(b){return f("upload",b)}b.addEventListener("load",g,!1);b.addEventListener("error",h,!1);b.addEventListener("progress",r,!1);e&&b.upload&&b.upload.addEventListener("progress",t,!1);return function(){b.removeEventListener("load",
g,!1);b.removeEventListener("error",h,!1);b.removeEventListener("progress",r,!1);b.upload.removeEventListener("progress",t,!1);b=null}}):(c=function(b){return b.xhr.readyState},b=function(b){return 4===b.xhr.readyState},r=function(b,c){b=c.xhr;c=typeof b.abort;"function"!==c&&"object"!==c&&"unknown"!==c||b.abort()});var v={data:null,query:null,sync:!1,method:"GET"};g._create=function(){throw Error("XMLHTTP not available");};if(k("native-xhr")&&!k("dojo-force-activex-xhr"))g._create=function(){return new XMLHttpRequest};
else if(k("activex"))try{new ActiveXObject("Msxml2.XMLHTTP"),g._create=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}catch(u){try{new ActiveXObject("Microsoft.XMLHTTP"),g._create=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}catch(t){}}l.addCommonMethods(g);return g})},"dojo/request/handlers":function(){define("dojo/request/handlers",["../json","../_base/kernel","../_base/array","../has","../selector/_loader"],function(m,p,f,l){function k(b){var d=c[b.options.handleAs];b.data=
d?d(b):b.data||b.text;return b}l.add("activex","undefined"!==typeof ActiveXObject);l.add("dom-parser",function(b){return"DOMParser"in b});var h;if(l("activex")){var q=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML.DOMDocument"],g;h=function(b){function c(b){try{var c=new ActiveXObject(b);c.async=!1;c.loadXML(h);e=c;g=b}catch(x){return!1}return!0}var e=b.data,h=b.text;e&&l("dom-qsa2.1")&&!e.querySelectorAll&&l("dom-parser")&&(e=(new DOMParser).parseFromString(h,
"application/xml"));e&&e.documentElement||g&&c(g)||f.some(q,c);return e}}var e=function(b){return l("native-xhr2-blob")||"blob"!==b.options.handleAs||"undefined"===typeof Blob?b.xhr.response:new Blob([b.xhr.response],{type:b.xhr.getResponseHeader("Content-Type")})},c={javascript:function(b){return p.eval(b.text||"")},json:function(b){return m.parse(b.text||null)},xml:h,blob:e,arraybuffer:e,document:e};k.register=function(b,d){c[b]=d};return k})},"dojo/_base/fx":function(){define("dojo/_base/fx","./kernel ./config ./lang ../Evented ./Color ../aspect ../sniff ../dom ../dom-style".split(" "),
function(m,p,f,l,k,h,q,g,e){var c=f.mixin,b={},d=b._Line=function(b,c){this.start=b;this.end=c};d.prototype.getValue=function(b){return(this.end-this.start)*b+this.start};var r=b.Animation=function(b){c(this,b);f.isArray(this.curve)&&(this.curve=new d(this.curve[0],this.curve[1]))};r.prototype=new l;f.extend(r,{duration:350,repeat:0,rate:20,_percent:0,_startRepeatCount:0,_getStep:function(){var b=this._percent,c=this.easing;return c?c(b):b},_fire:function(b,c){c=c||[];if(this[b])if(p.debugAtAllCosts)this[b].apply(this,
c);else try{this[b].apply(this,c)}catch(B){}return this},play:function(b,c){this._delayTimer&&this._clearTimer();if(c)this._stopTimer(),this._active=this._paused=!1,this._percent=0;else if(this._active&&!this._paused)return this;this._fire("beforeBegin",[this.node]);b=b||this.delay;c=f.hitch(this,"_play",c);if(0<b)return this._delayTimer=setTimeout(c,b),this;c();return this},_play:function(b){this._delayTimer&&this._clearTimer();this._startTime=(new Date).valueOf();this._paused&&(this._startTime-=
this.duration*this._percent);this._active=!0;this._paused=!1;b=this.curve.getValue(this._getStep());this._percent||(this._startRepeatCount||(this._startRepeatCount=this.repeat),this._fire("onBegin",[b]));this._fire("onPlay",[b]);this._cycle();return this},pause:function(){this._delayTimer&&this._clearTimer();this._stopTimer();if(!this._active)return this;this._paused=!0;this._fire("onPause",[this.curve.getValue(this._getStep())]);return this},gotoPercent:function(b,c){this._stopTimer();this._active=
this._paused=!0;this._percent=b;c&&this.play();return this},stop:function(b){this._delayTimer&&this._clearTimer();if(!this._timer)return this;this._stopTimer();b&&(this._percent=1);this._fire("onStop",[this.curve.getValue(this._getStep())]);this._active=this._paused=!1;return this},destroy:function(){this.stop()},status:function(){return this._active?this._paused?"paused":"playing":"stopped"},_cycle:function(){if(this._active){var b=(new Date).valueOf(),b=0===this.duration?1:(b-this._startTime)/this.duration;
1<=b&&(b=1);this._percent=b;this.easing&&(b=this.easing(b));this._fire("onAnimate",[this.curve.getValue(b)]);1>this._percent?this._startTimer():(this._active=!1,0<this.repeat?(this.repeat--,this.play(null,!0)):-1==this.repeat?this.play(null,!0):this._startRepeatCount&&(this.repeat=this._startRepeatCount,this._startRepeatCount=0),this._percent=0,this._fire("onEnd",[this.node]),!this.repeat&&this._stopTimer())}return this},_clearTimer:function(){clearTimeout(this._delayTimer);delete this._delayTimer}});
var v=0,u=null,t={run:function(){}};f.extend(r,{_startTimer:function(){this._timer||(this._timer=h.after(t,"run",f.hitch(this,"_cycle"),!0),v++);u||(u=setInterval(f.hitch(t,"run"),this.rate))},_stopTimer:function(){this._timer&&(this._timer.remove(),this._timer=null,v--);0>=v&&(clearInterval(u),u=null,v=0)}});var x=q("ie")?function(b){var c=b.style;c.width.length||"auto"!=e.get(b,"width")||(c.width="auto")}:function(){};b._fade=function(d){d.node=g.byId(d.node);var r=c({properties:{}},d);d=r.properties.opacity=
{};d.start="start"in r?r.start:function(){return+e.get(r.node,"opacity")||0};d.end=r.end;d=b.animateProperty(r);h.after(d,"beforeBegin",f.partial(x,r.node),!0);return d};b.fadeIn=function(d){return b._fade(c({end:1},d))};b.fadeOut=function(d){return b._fade(c({end:0},d))};b._defaultEasing=function(b){return.5+Math.sin((b+1.5)*Math.PI)/2};var w=function(b){this._properties=b;for(var c in b){var d=b[c];d.start instanceof k&&(d.tempColor=new k)}};w.prototype.getValue=function(b){var c={},d;for(d in this._properties){var e=
this._properties[d],g=e.start;g instanceof k?c[d]=k.blendColors(g,e.end,b,e.tempColor).toCss():f.isArray(g)||(c[d]=(e.end-g)*b+g+("opacity"!=d?e.units||"px":0))}return c};b.animateProperty=function(b){var d=b.node=g.byId(b.node);b.easing||(b.easing=m._defaultEasing);b=new r(b);h.after(b,"beforeBegin",f.hitch(b,function(){var b={},g;for(g in this.properties){var h=function(b,c){var d={height:b.offsetHeight,width:b.offsetWidth}[c];if(void 0!==d)return d;d=e.get(b,c);return"opacity"==c?+d:t?d:parseFloat(d)};
if("width"==g||"height"==g)this.node.display="block";var r=this.properties[g];f.isFunction(r)&&(r=r(d));r=b[g]=c({},f.isObject(r)?r:{end:r});f.isFunction(r.start)&&(r.start=r.start(d));f.isFunction(r.end)&&(r.end=r.end(d));var t=0<=g.toLowerCase().indexOf("color");"end"in r?"start"in r||(r.start=h(d,g)):r.end=h(d,g);t?(r.start=new k(r.start),r.end=new k(r.end)):r.start="opacity"==g?+r.start:parseFloat(r.start)}this.curve=new w(b)}),!0);h.after(b,"onAnimate",f.hitch(e,"set",b.node),!0);return b};b.anim=
function(c,d,e,g,h,f){return b.animateProperty({node:c,duration:e||r.prototype.duration,properties:d,easing:g,onEnd:h}).play(f||0)};c(m,b);m._Animation=r;return b})},"dojo/_base/loader":function(){define("dojo/_base/loader","./kernel ../has require module ../json ./lang ./array".split(" "),function(m,p,f,l,k,h,q){var g=function(b){return b.replace(/\./g,"/")},e=/\/\/>>built/,c=[],b=[],d=function(d,e,g){c.push(g);q.forEach(d.split(","),function(c){c=G(c,e.module);b.push(c);I(c)});r()},r=function(){var b,
d;for(d in H)if(b=H[d],void 0===b.noReqPluginCheck&&(b.noReqPluginCheck=/loadInit\!/.test(d)||/require\!/.test(d)?1:0),!b.executed&&!b.noReqPluginCheck&&b.injected==z)return;J(function(){var b=c;c=[];q.forEach(b,function(b){b(1)})})},v=/\/\/.*|\/\*[\s\S]*?\*\/|("(?:\\.|[^"])*"|'(?:\\.|[^'])*'|`(?:\\.|[^`])*`)/mg,u=/(^|\s)dojo\.(loadInit|require|provide|requireLocalization|requireIf|requireAfterIf|platformRequire)\s*\(/mg,t=/(^|\s)(require|define)\s*\(/m,x=function(b,c){var d,e,g,h=[],f=[];d=[];for(c=
c||b.replace(v,"$1");d=u.exec(c);){e=u.lastIndex;g=e-d[0].length;var r=c,k=/\(|\)/g,q=1,l=void 0;for(k.lastIndex=e;(l=k.exec(r))&&(q=")"==l[0]?q-1:q+1,0!=q););if(0!=q)throw"unmatched paren around character "+k.lastIndex+" in: "+r;e=[m.trim(r.substring(g,k.lastIndex))+";\n",k.lastIndex];"loadInit"==d[2]?h.push(e[0]):f.push(e[0]);u.lastIndex=e[1]}d=h.concat(f);return d.length||!t.test(c)?[b.replace(/(^|\s)dojo\.loadInit\s*\(/g,"\n0 \x26\x26 dojo.loadInit("),d.join(""),d]:0},w=f.initSyncLoader(d,r,function(b,
c){var d,g=[],h=[];if(e.test(c)||!(d=x(c)))return 0;c=b.mid+"-*loadInit";for(var f in G("dojo",b).result.scopeMap)g.push(f),h.push('"'+f+'"');return"// xdomain rewrite of "+b.mid+"\ndefine('"+c+"',{\n\tnames:"+k.stringify(g)+",\n\tdef:function("+g.join(",")+"){"+d[1]+"}});\n\ndefine("+k.stringify(g.concat(["dojo/loadInit!"+c]))+", function("+g.join(",")+"){\n"+d[0]+"});"}),y=w.sync,z=w.requested,B=w.arrived,A=w.nonmodule,C=w.executing,F=w.executed,E=w.syncExecStack,H=w.modules,D=w.execQ,G=w.getModule,
I=w.injectModule,P=w.setArrived,Q=w.signal,O=w.finishExec,N=w.execModule,M=w.getLegacyMode,J=w.guardCheckComplete,d=w.dojoRequirePlugin;m.provide=function(b){var c=E[0],d=h.mixin(G(g(b),f.module),{executed:C,result:h.getObject(b,!0)});P(d);c&&(c.provides||(c.provides=[])).push(function(){d.result=h.getObject(b);delete d.provides;d.executed!==F&&O(d)});return d.result};p.add("config-publishRequireResult",1,0,0);m.require=function(b,c){c=function(b,c){var d=G(g(b),f.module);if(E.length&&E[0].finish)E[0].finish.push(b);
else{if(d.executed)return d.result;c&&(d.result=A);c=M();I(d);c=M();d.executed!==F&&d.injected===B&&w.guardCheckComplete(function(){N(d)});if(d.executed)return d.result;c==y?d.cjs?D.unshift(d):E.length&&(E[0].finish=[b]):D.push(d)}}(b,c);p("config-publishRequireResult")&&!h.exists(b)&&void 0!==c&&h.setObject(b,c);return c};m.loadInit=function(b){b()};m.registerModulePath=function(b,c){var d={};d[b.replace(/\./g,"/")]=c;f({paths:d})};m.platformRequire=function(b){b=(b.common||[]).concat(b[m._name]||
b["default"]||[]);for(var c;b.length;)h.isArray(c=b.shift())?m.require.apply(m,c):m.require(c)};m.requireIf=m.requireAfterIf=function(b,c,d){b&&m.require(c,d)};m.requireLocalization=function(b,c,d){f(["../i18n"],function(e){e.getLocalization(b,c,d)})};return{extractLegacyApiApplications:x,require:d,loadInit:function(b,c,e){c([b],function(b){c(b.names,function(){for(var h="",f=[],r=0;r<arguments.length;r++)h+="var "+b.names[r]+"\x3d arguments["+r+"]; ",f.push(arguments[r]);eval(h);var t=c.module,k=
[],u,h={provide:function(b){b=g(b);b=G(b,t);b!==t&&P(b)},require:function(b,c){b=g(b);c&&(G(b,t).result=A);k.push(b)},requireLocalization:function(b,c,d){u||(u=["dojo/i18n"]);d=(d||m.locale).toLowerCase();b=g(b)+"/nls/"+(/root/i.test(d)?"":d+"/")+g(c);G(b,t).isXd&&u.push("dojo/i18n!"+b)},loadInit:function(b){b()}},r={},q;try{for(q in h)r[q]=m[q],m[q]=h[q];b.def.apply(null,f)}catch(fa){Q("error",[{src:l.id,id:"failedDojoLoadInit"},fa])}finally{for(q in h)m[q]=r[q]}u&&(k=k.concat(u));k.length?d(k.join(","),
c,e):e()})})}}})}}});
require({cache:{"sixmaps/main":function(){define([],1)},"sixmaps/app/App":function(){define("dojo/_base/array dojo/_base/Color dojo/_base/declare dojo/_base/fx dojo/_base/json dojo/_base/lang dojo/promise/all dojo/request/xhr dojo/aspect dojo/Deferred dojo/dom dojo/dom-class dojo/dom-construct dojo/dom-style dojo/hash dojo/html dojo/io-query dojo/number dojo/on dojo/query dojo/ready dojo/sniff dojo/text!sixmaps/app/App.html dojo/topic dojo/when dijit/form/ToggleButton dijit/layout/ContentPane dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dijit/popup dijit/registry dojox/secure/fromJson esri/arcgis/utils esri/dijit/Popup esri/dijit/Scalebar esri/geometry/Extent esri/geometry/jsonUtils esri/geometry/scaleUtils esri/IdentityManager esri/toolbars/draw esri/toolbars/navigation esri/config esri/graphic esri/InfoTemplate esri/map esri/SpatialReference esri/symbols/SimpleFillSymbol esri/symbols/SimpleLineSymbol sixmaps/app/SplashPane sixmaps/app/SplashTool sixmaps/app/TermsAndConditions sixmaps/dijits/takeMeTo/SingleFieldTakeMeTo sixmaps/dijits/takeMeTo/TakeMeToContainer sixmaps/dijits/takeMeTo/TakeMeToSearch sixmaps/dijits/tools/Toggle sixmaps/dijits/BasemapLayer sixmaps/dijits/BasemapMenu sixmaps/dijits/DockEye sixmaps/dijits/HelpTopic sixmaps/dijits/Legend sixmaps/dijits/MiniHelp sixmaps/dijits/TableOfContents sixmaps/dijits/TitlePane sixmaps/dijits/Toolbar sixmaps/map/Graphics sixmaps/map/layers/Json sixmaps/util/dnd/Moveable sixmaps/util/IdentityStore sixmaps/util/LocalStore sixmaps/util/Require sixmaps/util/Sanitiser sixmaps/util/alertify/js/alertify sixmaps/util/WidgetCreator sixmaps/util/Analytics".split(" "),function(m,
p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x,w,y,z,B,A,C,F,E,H,D,G,I,P,Q,O,N,M,J,K,U,R,Y,aa,S,ma,ha,la,ca,ia,fa,ea,pa,ka,na,ja,Fa,Ga,ga,va,ra,qa,Ma,ya,Ja,ba,Ta,Ca,Ha,oa,Da,La,Ba,Na,Ka,Xa,Za,Sa,Pa){var db=new Date;if(7>=A("ie")||3.5>=A("ff")||4>=A("safari")||1>=A("chrome"))u=require.toUrl("sixmaps/app/unsupported/")+"unsupported.html",Pa("send","SIXMaps App","Unsupported Browser",{nonInteraction:!0}),confirm("Your browser is not supported, or is in compatibility mode. \nSIX Maps may not be fully functional. Continue anyway?")||
(window.location=u);return f("sixmaps.app.App",[I,G,P],{templateString:C,widgetsInTemplate:!0,dependenciesLoaded:null,config:"sixmaps",parameters:null,spreadUrls:null,localStore:null,queryParams:null,toolParams:null,defaultPaneParams:null,started:!1,constructor:function(b,d){var g=this;Pa("init",b.analyticsKey);g.localStore=new Na;g.parameters={arcGISServerUrl:"/arcgis/rest/services",apiUrl:require.toUrl("sixmaps//").toString().replace(/sixmaps\/\/$/,"")};b.parameters&&(b.parameters=h.mixin(g.parameters,
b.parameters));if(b.readQueryStringParams){g.queryParams=h.mixin(b.queryParams||{},x.queryToObject(window.location.search.slice(1)),x.queryToObject(window.location.hash.slice(1)));for(var r in g.queryParams){var t=g.queryParams[r];if("string"==typeof t&&t.match(/^\{|\[/))try{t=N(t)}catch(da){(console.warn||console.debug)(g.declaredClass+" - Could not parse queryParam "+r+"\x3d"+t+"\nError:\n",da),delete g.queryParams[r]}t="string"==typeof t?Xa.sanitise(t):h.isArray(t)?g.mergeIn([],t,!0):g.mergeIn({},
t,!0);g.queryParams[r]=t}}else g.queryParams={};r=window.location.hostname;window.location.port&&(r+=":"+window.location.port);r=g.queryParams&&g.queryParams.tileHost||r;r={tileServerUrl1:"//"+r.replace(/(maps[dq]?)(\.|:|$)/,function(b,c,d){return c+1+d}),tileServerUrl2:"//"+r.replace(/(maps[dq]?)(\.|:|$)/,function(b,c,d){return c+2+d}),tileServerUrl3:"//"+r.replace(/(maps[dq]?)(\.|:|$)/,function(b,c,d){return c+3+d}),tileServerUrl4:"//"+r.replace(/(maps[dq]?)(\.|:|$)/,function(b,c,d){return c+4+
d})};h.mixin(g.parameters,r);g.identityStore=new Ba;g.params=b;g.catalogLoaded=g.loadCatalog("sixmaps");g.dependenciesLoaded=new c;g.appLoaded=new c;g.appLoaded.then(function(){g.queryParams.actions&&m.forEach(g.queryParams.actions,function(b){g.doAction(b)});b.actions&&m.forEach(b.actions,function(b){g.doAction(b)});for(var c in g.queryParams)c in g&&"function"==typeof g[c]&&g.doAction(c,g.queryParams[c]);g.stats.timers.appLoaded=new Date-db});g.baseUrl=require.toUrl(g.declaredClass)+"../";g.spreadUrls=
{"^http[s]?://maps[./]":{replace:"maps",servers:4},"^http[s]?://mapsd[./]":{replace:"mapsd",servers:4},"^http[s]?://mapsq[./]":{replace:"mapsq",servers:4}};b&&f.safeMixin(g,b);Ka.requireCss(require.toUrl("esri/css/")+"esri.css");Ka.requireCss(require.toUrl("dijit/themes/claro/")+"claro.css");Ka.requireCss(require.toUrl("dojox/grid/resources/")+"Grid.css");Ka.requireCss(require.toUrl("dojox/grid/resources/")+"claroGrid.css");Ka.requireCss(require.toUrl("esri/dijit/css/")+"Popup.css");Ka.requireCss(require.toUrl("sixmaps/app/css/")+
"sixmaps.css");Ka.requireCss(require.toUrl("sixmaps/app/css/font-awesome/css/")+"font-awesome.css");Ka.requireCss(require.toUrl("sixmaps/util/alertify/css/")+"alertify.css");g.printCss=Ka.requireCss(require.toUrl("sixmaps/app/css/")+"print.css",{media:"print"});g.stats={clicks:0,timers:{constructor:new Date-db}};g.allowedActions="displayPrintPreview search highlight clearHighlight addLayer xy".split(" ");e.after(window,"beforeunload",h.hitch(g,"destroy"))},postCreate:function(){var b=this;this.inherited(arguments);
b.loadNode=b.params.parameters&&b.params.parameters.loadNode?b.params.parameters.loadNode:r.place('\x3cdiv id\x3d"loadNode" class\x3d"loadNode"\x3e\x3cimg src\x3d"images/SixMapsLogo.png"\x3e\x3cdiv\x3e\x3cimg src\x3d"images/loadingAnimation.gif"\x3e\x3c/div\x3e\x3c/div\x3e',b.domNode,"first");y(b.domNode,"click",function(){b.stats.clicks++})},destroy:function(){this.inherited(arguments)},sanitise:function(b){b=b.replace(/</g,"\x26lt;");b=b.replace(/&lt;div>/g,"\x3cdiv\x3e");b=b.replace(/&lt;\/div>/g,
"\x3c/div\x3e");b=b.replace(/&lt;b>/g,"\x3cb\x3e");return b=b.replace(/&lt;\/b>/g,"\x3c/b\x3e")},loadCatalog:function(b,d){var e=this,h=new c;!1!==d&&(d=!0);g(require.toUrl("sixmaps/app/")+b+"Catalog.js",{preventCache:!0,handleAs:"text",method:"GET"}).then(function(b){!1!==d?h.resolve(N(b)):h.resolve(k.fromJson(b))},function(c){e.loadNode.innerHTML+="\x3cfont style\x3d 'font-size:12px;'\x3e\x3cbr/\x3eCould not load the catalog file:\x3cbr/\x3e\x3c/font\x3e\x3cfont style\x3d 'font-size: 13px; font-style: italic; color:black;'\x3e"+
b+"\x3c/font\x3e";Pa("send","event","SIXMaps App","Load Catalog failed",b,{nonInteraction:!0});h.reject(c)});return h},doAction:function(b,c){var d=this;"object"==typeof b&&(c=b.params,b=b.action);E(d.appLoaded,function(){var e=d[b];if("function"==typeof e&&m.some(d.allowedActions,function(c){return b==c}))Pa("send","event","SIXMaps App","Query String Action",b,{nonInteraction:!0}),e.apply(d,[c]);else throw Pa("send","event","SIXMaps App","Query String Invalid Action",b,{nonInteraction:!0}),"Invalid action: "+
b;})},displayPrintPreview:function(){this.printCss.media="all";v.set(this.printPreviewNode,"display",A("ie")?"block":"")},closePrintPreview:function(){this.printCss.media="print";v.set(this.printPreviewNode,"display","none");this.toolbar.reposition()},highlight:function(b){var d=new c;this.highlightGraphics||(this.highlightGraphics=new oa({map:this.map,showGraphicsLayerInToc:!0,name:"Highlights"}));b.infoTemplate&&this.highlightGraphics.graphicsLayer.setInfoTemplate(new ca(b.infoTemplate));if(b.url&&
b.where){var e=new ga({layerUrl:b.url}),g=this.highlightGraphics;g.clear();e.search({},{where:b.where,maxAllowableOffset:b.maxAllowableOffset,outFields:b.outFields}).then(function(c){"zoomTo"in b&&0==b.zoomTo||g.zoomToFeatures(c.result.features);g.add(c.result);d.resolve(c.result)})}return d},clearHighlight:function(){this.highlightGraphics&&this.highlightGraphics.clear()},search:function(b){var c=this;"string"==typeof b?B(function(){c.singleSearch.search(b)}):b.name&&b.fields&&m.some(c.searchContainer.getChildren(),
function(c){if(c.realTitle==b.name||c.title==b.name)return B(function(){c.search(b.fields,b.queryParams,b.resultsParams)}),!0})},xy:function(b){var c=this;c.xyGraphics?c.xyGraphics.clear():(c.xyGraphics=new oa({map:c.map}),c.xyGraphics.graphicsLayer.showInToc=!0,c.xyGraphics.graphicsLayer.name=b.layerTitle||"Markers");b.features||(b={features:h.isArray(b)?b:[b],zoomParams:c.queryParams.zoomParams||b.zoomParams||b});var d=[];m.forEach(b.features,function(b){var e=new la(b);e.geometry||e.setGeometry(R.fromJson(b));
e.geometry&&!e.geometry.spatialReference&&e.geometry.setSpatialReference(new fa({wkid:4326}));e.attributes||(e.attributes=b);if(!e.symbol)switch(e.geometry.type){case "point":case "multipoint":e.symbol=c.xyGraphics.highlightSymbolPoint;break;case "polyline":e.symbol=c.xyGraphics.highlightSymbolLine;break;case "extent":case "polygon":e.symbol=c.xyGraphics.highlightSymbolPolygon}d.push(e)});h.getObject("map.spatialReference",!1,c);c.xyGraphics.zoomToFeatures(d,b.zoomParams);c.xyGraphics.add(d)},loadConfig:function(b){var d=
this,f=new c;if("undefined"==typeof b.length||"string"==typeof b)b=[b];var r=[];m.forEach(b,function(b){"string"==typeof b?r=r.concat(b.split(",")):r.push(b)});b=r;var t=new c;t.counter=0;t.allConfigs=[];e.after(t,"progress",h.hitch(t,function(c){this.counter++;if(this.counter==b.length){var e={};m.forEach(this.allConfigs,function(b){d.mergeIn(e,b)});this.resolve(e)}}),!0);m.forEach(b,function(b){var c={};t.allConfigs.push(c);if("string"==typeof b){var e;e=b.match(/^@(.*)/)?b.substring(1):"configs/"+
b+"Config.js";g(e,{preventCache:!0,handleAs:"text",method:"GET"}).then(function(b){h.mixin(c,N(b));t.progress(c)},function(c){d.loadNode.innerHTML+="\x3cfont style\x3d 'font-size:12px;'\x3e\x3cbr/\x3eCould not load the following configuration file:\x3cbr/\x3e\x3c/font\x3e\x3cfont style\x3d 'font-size: 13px; font-style: italic; color:black;'\x3e"+b+"\x3c/font\x3e";Pa("send","event","SIXMaps App","Load Config failed",b,{nonInteraction:!0});t.reject(c)})}else h.mixin(c,b),t.progress(c)});d.catalogLoaded.then(function(b){d.loadCatalog("sixmapsFunctions",
!1).then(function(c){t.then(function(e){d.parameters.config=e;d.parameters.catalog=b;e.formatters&&m.forEach(e.formatters,function(b){c[b.name]=function(c){b.substitutes&&m.forEach(b.substitutes,function(b){if("replace"==b.method&&c==b["in"])return c=b.out;if("prefix"==b.method)return c=b.prefix+c;if("suffix"==b.method)return c+=b.suffix;if("trim"==b.method){var d=b.amount;if(d>=c.length)return c;if("start"==b.trimPoint)return c=c.slice(0,d);if("end"==b.trimPoint)return c=c.slice(0,-d)}});return c}});
d.parameters.functionCatalog=c;d.replaceLinks(e,d.parameters,!0).then(function(){f.resolve(e)})},f.reject,f.progress)})});return f},replaceLinks:function(b,d,e){function f(b,c){e&&!1!==b._fillSubstitutes&&r.fillSubstitutes(b,c,!1);t.resolve(b)}var r=this,t=new c;if(!b)return t.resolve(),t;if(!1===b._replaceLinks)return t.resolve(b),t;if("object"!=typeof b||h.isArray(b))if(h.isArray(b)){var k=[];m.forEach(b,function(b){k.push(r.replaceLinks(b,d))});q(k).then(function(){f(b)})}else f(b);else{var u=
new c;b.type&&(b.type=b.type.replace(/\//g,"."));if(b.link&&"string"==typeof b.link){var v=new c;b.link.match(/^@/)?g.get(b.link.substring(1),{handleAs:"json",withCredentials:!0}).then(function(b){v.resolve(b)}):v.resolve(h.clone(h.getObject(b.link,!1,d)));v.then(function(c){b._link=b.link;delete b.link;r.replaceLinks(c,d).then(function(){"object"==typeof c&&h.mixin(b,r.mergeIn(c,b));u.resolve()})})}else u.resolve();u.then(function(){var c=[],e;for(e in b)"_link"!=e&&c.push(r.replaceLinks(b[e],d));
q(c).then(function(){f(b)})})}return t},mergeIn:function(b,c,d){for(var e in c){var g=c[e];!1!==d&&"string"==typeof g&&(g=Xa.sanitise(g,function(b){return b}));var f=e.match(/([a-z_]+)\/([0-9]+)/i);if(f){var r=f[1],f=f[2];b[r]&&(b[r][f]=this.mergeIn(b[r][f],g,d))}else e.match(/^!/)||"string"==typeof g||"number"==typeof g||"boolean"==typeof g?(b[e.replace(/^!/,"")]=g,delete c[e]):b[e]?h.isArray(g)?h.isArray(b[e])?b[e]=b[e].concat(g):b[e]=g:g&&"object"==typeof g&&("object"==typeof b[e]?this.mergeIn(b[e],
g,d):b[e]=g):d?k.isArray(g)?b[e]=this.mergeIn([],g,d):b[e]=this.mergeIn({},g,d):b[e]=g}return b},substitute:function(b,c){var d=/\$\{([^{]*)}/,e=d.exec(b);if(e&&e[0].length==b.length&&e[1])return h.getObject(e[1],!1,c);for(;null!=e;){var g=h.getObject(e[1],!1,c);b=b.substring(0,e.index)+g+b.substring(e.index+e[0].length,b.length);e=d.exec(b)}return b},fillSubstitutes:function(b,c,d){var e=this;!c&&(c=e.parameters);if("object"==typeof b)for(var g in b){var f=b[g];"string"==typeof f&&f.match(/\$\{.*\}/)?
(f=f.replace(/\$\$/g,"_~~_"),d&&e.replaceLinks(b,e.parameters),f=e.substitute(f,c),(f="string"==typeof f?e.fillSubstitutes(f,c,d):f)&&f.replace&&(f=f.replace(/_~~_/g,"$")),b[g]=f):e.fillSubstitutes(f,c,d)}else h.isArray(b)?m.forEach(b,function(b){e.fillSubstitutes(b,c,d)}):"string"==typeof b&&b.match(/\$\{.*\}/)&&(b=e.substitute(b,c));return b},_setConfigAttr:function(b){var c=this;c.queryParams.localConf&&(b=c.localStore.get(c.queryParams.localConf));c.loadConfig(b).then(function(b){c.config=b;"mini"==
b.mode&&(Ka.requireCss(require.toUrl("sixmaps/app/css/")+"sixmapsmini.css"),d.add(c.domNode,"sixmaps_mini"));if(c.config.mapOnly||c.queryParams.mapOnly)c.printCss.media="all";var g="";1==c.config.showSIXLogo&&(g+='\x3cimg class\x3d"brandingSixLogo" "style\x3d"filter: progid : DXImageTransform.Microsoft.Alpha ( opacity \x3d 0 );"src\x3d"'+c.baseUrl+'images/SixMapsLogo.png" border\x3d"0" style\x3d"left: 12px; position: relative; width:100px; height:53px;"/\x3e');var f={src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3QUXBQcvhQEscgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAQoElEQVRo3u1aeXRUVZr/3bfUXpXKvhIgQBKWBBCVAIKgskQIsniAaRRUFBHaIy1ia9vSI6Me11F7tBsQ0XZDxRFoAYkiCCKSACoQRAiLIQtZqpJUpda33fkj9yUvlUQ5Tp/5a94597yq+9699e3f7/tuAf/ii1JKjPfe5v5VF/nfEtrLnqSHvalhdF1ACP0/ZcBAPA+AM+zDsSH0sLcGQGV3zcCUPvebGCG/UeIEgAjABMBsYERgcyL7Tg3vqwAkALKBaAVAhM0rv0Ur5AoJ14cubR6AFYALQBwACyPewhgys3fDjBmBESgxgqPsewiAD4CfzakGbV2RVoQrJF40SJZnn50AUgAkA7Cx7zpjIgC0vLjxYfvcqbtM/fpUMIIkACEKuAhQxwhvYAwHDdqRdK1QSskvMcFdgZZERmASgAwA2QByAAwCMABAv8DHnz1aP+mO1+RLtaPZ8z5Kk6cwuHajq3nxnxYAyALQB0BGqHT//LpB055RGprGGfYZBKA/W5sOIJ5pk/814rgreC4yU0lnP9gfQD4bOQD6+J99Y7By+iLqh85eGD5YPhZAnHf52nmwmqGcuohQ6dczQWmid/WzD3rn//F6GoggerRiIoBMAAMBDAaQxxjpxzRr1y3kl8Iv15PZsKFHFBNjIJVKcr5nxdotkQNHZjOppmrhSKpW62l3KLsV3pkrR6qtPre87ztmpDyaFz+WEf2pMj/89k4QixmgFME3t+YBSACQooUjI33Pb3qi7d3tqxlTyQAcBpPVaSK9+oDhIccW8cw245j5pKp1jfmh1z9B+P3Pii3zJxe7H1ryOZ+UEGYbACAwTRtDWx59eRoEg/YlFUJSUh2xWQpoOEqgadA8rRRAkv+Vt0f6nliXRQQeQn7fPs7bbsllDt3KggBhvqEAUCmlXRw71ol1oq1s2Jk0sgCkUVAnOB7EbEJ0237Ub/58imXhZGRU79nfWLJ8nHK4Qkj4r0eP1vebfg3sls5dTQKan3hlmm1RiRTc8LHJtnRO0HHn3NN1w2aWaI0tICaxPfTIMiiom4CkswhFATSzz2E2JCMTQky00aNLEoBE5kzJzP6TIcl2wndaHbGaoRw9q0hHKuLTdm34PLD3wBj5Qm0mbOZuthp97wsktxzaZV80fSQNyk2cyw7N6we4zv1oNAKoqgu8kMaItwPwMCa8bGhMI900oDtsHIs2mcyZ4pk9OsARU9fcSmEakQ/P3AcL+YzEwtSD737RcPPSySA9+JzAI/RteQEnWpqbblp6dfzrfznLZSapWk1Th62pZ+uAiGSGXYhjAo0HUMt8kBi0oOhJUohJanocd0eOnJjYuvLZReA5EFEEF+9C/F8f3dctxt40igvv+ApqdSMuF94yOf2HrYdrc6cXEVntmjFT4sHbnK1NE+8aRSxmyI0NuZzbJWvVTbyeTvn8LETPVw33r36pH1VkaFEJfE4Gkt946jEimloMCZJ00QAhhFJKqQEOiHJ5xTXKuWp0SJNSUH8gm6pq52oCiP2zmqiqphLCg/rCqB+/qCh194bTjZPuHNxhHnYLMiu276p2F91MrO2+Ib27B1yyS2sXZPuOfLwbkbJjbunYj9CDgHK8EsrTnjQxK0OHLMQICLle4ILZXDzuBA2GO0WoqNDCUSlWA3x8QhuC0U6rqmmE74WNg13PPNAEAJBVpHy+oaJmUHEH8QCgqTI4q1XrEtNtdmj+UJc5cfI1ELMymplguVgIxPWAiwgAzpTT95zjgd9F2sMjQCmFEmrry2UmdmXA4dAI1zWdRHcdgjgiz8c57TDNGEdD2/YMQSDcNd+EIzAtmsrr+4MAnMMOufSIFSxQ0HAU8Y/dtwNGNcUmMoP0dfPRkaU5/smV2+GwgphEGrd2hd927VXlfLzbIB4BRBR83bYmBJ7rlwxM2rvhdNL6td+2Pfl6t4SphULg3XGBjglVg1hc5Et6/7mfrHeVSCCAY9XtfvOoYTUG/xR0Teh5SzBI3cQwj4PhEBGERLPOl34UPXkm1zv3DyNC/9xb5Hhosce38vmkdvNQoPrb4jXQbimd2K2Qzl5Ik46fSSPm7mGVT0qEVHbCpguWhqJwzplSXptz82RzyVikfbflW87t8hrQrYOFeJuOXCnt/F3BkHUT2N0cPVZRVJs3Y17TxLtGaP4glFMXLdZJo6toq0FwbX6Vi3P0jAKTk4OtK56O7+kZn+SGvO+7DsPgC3MQKj04AooK6dNDuJxXMqZp2eMzVG9rEiPazWhzMWFziAlJJhZCbZo/kN04f+WypslLc6mvDRDbFUUjUUTKjg8QxhV01FPh9VtziGjqTqGqQczJrqdtoR6Zsy6c1qx6WgQQAmgUjqW3tgbWf+zUEyWxWSCXlqMu84aS1tfeWUI1LZElNoshGnVUTR04SJMimXVDZ94t7f8eYCm+wyxEAYFn37TGPXTHBWgUIIDi82vCNfndKVQUyBWVLiKIPWtnQI5X+7mhHQlEJdhnTzmlHK+0xCZB4nYi8B8b7d57Hn+U1QgkNgp1WcGZLM2mcSPRER1i6bpQYxbHFCpckgsgBHLFWd4284aWbtFhxAAqna9KB9c9eNC2MIT8fj5KKKBR2B9eGG1b/1EBZKXnwioUgXly0T6GFKhR6JxhQq+YfCkfvPjnpD3ryqimARrt1ltoGndHbvqJbTuoPwjtcrNgHjWsgUpdUwTncoIqirNH81lUjNY1LxdC1SAUDIRz6YIzgRf+4eqCYAHQqAxxeC4yft692bmgZKcBlXZ0N3SMLTIvT2VVUUdlpNTWj/Nv3XVN6NUtoLXeduQo8DDdPFpN+MsDRy+Pu220kJasJe989XB9wdyx4BkREQlJ2//6k2feqvwuZsHzSK/45Ou67KnjhZGDkPrlpgOX80om0EAIkBRQSYYwNAeuvyz92XrjdWWc1VLNAF0tgCoA1QzUhQBoOgPGwiUJQBobKR1RSdOcVFFsSkvLMO1CPWSvJ1OuqXHEL1v833JNXW6o7NgIZ/FNe/zvbR0bemmzTb3UgPRzO3/0LFg9RD72I7jsVLif+4PHPm3i/uCuL2+0Tbn+gBaNZof2HhwhON1n+YwURczJqgTPBwjPR0BIG4AWRnwjgHpWP3tZ/SwRQrp0zHjm4U5GdKLhngggXr5YndM05/5b+ZRkEFGkpt9NAnTQRgggKzAPHXKSt1gIl5ZAhLTUk6Cg8pkLw7VQWFNamofIVdUcBK4DzajHKqFUVoOGI4TLSuZS3n1xIyPYw4aXMdLKRhvrbKiEEBoL5nTnEAyVUIBpSBH6pFPHsgVngqVfDVa+PgGp7ASIKMCyfC6EhISgWDjogpCVDD4u/gdiEki7vVIIfdK+oxqFEE2rJyoylJrGgkj5UUjbDgGKCsoRkKgM94p/O8eI9rOhdyr0PGWKDTyxGnAw289ipmSPWahryU0lyQlCRCIIFISohv20mHYiDIIhBgfkoWkilWUBHKcSno+C43S838ZGQK/C2Pc6Zkp+3YSEHsrJOACpXx0+M/+7H2sngkJ4cMnE1wHOZygmwhBF8wsb9y4WBE7JSHZJ82eM2gaAhkOR1Bc37bvxQPk5ISfTjfz8bPn3C4o+E8xmzxffnJ5acbY+WZZVsvLOiR+ZREElZrO6rfT7Wy7WtVojEZl/cMkNb5tNAgcA6zYfXBMKS6JZIKb7Fk54iOP5NmZS6K0iMzNHdh88ej7/pXfLHATAG58cvf/Uzoc3AWhi9gdVo/y//+1L0WIWxWuHZYnzZ4zijnx/flzx8rdzmFni+0ov6L5zwtMb9s2ZNTFXum36CM+T67+yglJcd/WAkWOv6n8MAFY9/5ndF4iaW9uiuHPutUlpKW4NQN4Lm/YntAYkzLlxCDieDxk6gFwsnDbWxHYAcTzPiRwh4DiChuYQZt674Ta2gYu9Y+IIgf6OJKvWqUvfzOEIgVXkUTx2AIbnpyESlUA1YHheenjC2CF7BI6A5zmc+LGqgIXv9IikmDmOIN5lwZGKmkIA1oYmn8Pri0DTKMaO7FcWi4GMiSy2YWsFYCGkM3hzBPjmeK1p2eMf3sueO0n7vcPAW1r8AxVWX/39senq2y/cvmXPm8s+qDmwZusji4uwYtGkT1kZrQHA37ccBUBth8pOjY5KakcgO3W6KgeA+Np73wzhCIEkKZg2Pu+cwVo0YyLjeujrCwBEYvB0RVXBcwQflp6yfLDt21kGx+5Y6HDaf45K7eXmkrU7+DX/+elUqqr93U5rYNWyaW+xH+bvnl2oUkpRVduCYFgWN/3zpIUQQFUpCIDNu08BgL3yYoOT4wiyUx1IS46LsGikd7K13jpzpIdOHQ6/f19tICRBFDjc/9zutPIfzhfQmJ6S3WqS7rplGGRVA6UUf/voqCv7hqdGl9yzfp7H05qrt0Jm3jTiEgBICiDJkqv8eJVAKcHT9xYBBDhT1YwWX1A8ed5jowBunVoQBSGNLIAEdQb0vlBvvdEuACh3QEb1K48Ue9slTDBj+TuFp87U5seipJfXzN/+1tpZ1Q4zB0lREZE0HK64bB5c8tLYxavfuYNSyo25KucHUMBhE7F778kiT2tEkFUVM2eM/SI53gaLWcTpc/U3NDUHIMkari7sd5h1rNsMeaFXDXQcA9GuTNB7Foz/cs2y8bIkt6+d+ft/5JrFLuCLmk1C6JapV+2v3PPnbYfeu2/vqtuvhSQpIIRg+74zfKPHlw0gYrOZNABYu/6ASdEoopKC5ARHNCvFKYsCj4WrN5s0SgCq4dqhma3MdNoMYRy/xIDG+vJGBhQA0VV3T3l//Ki+IIQgHFHA812W088Pnh5VVd04kOc5/7C8zKZHlt/84Y51d1YCAC/wuFTTmAgAy29t9wOvr73Qn3ldfwgCr84vLowoqoZgRAEhwJiCDKSlJdQwybcxAKd2a6vEnFdFAUQo1U9LCNhcG4DAlldu3zwgK64LwKQA6uqbk25b/UHu1fNeLZq94s05mz/5esKRHy4UPvf63r4AoGka8gf1OQ5AmjFp+E+dhRvFjElDGwEEp1yXf0oUOqPkyGF9PewERz/FkQynOF0SmbEeCAJo0zRNMRAZYBhFtZhNgZ3r7/4ofcJT81wOs84IbfD409MSbahpCuGb76sc+8ovOjSqpZvF9qpx+viBcNgtHgDa0MHZhziOFFAKyLKKq4fnlAEIZaYnVlgtYlE4IiMYjmLa+LzDjHgvE6AEgPbWndYMkvZmJtld1w9P1wm8yPC4BMAR73aEvnrr7tJn15VO5TgOg/q6xZHD+n15YscfDz6z7otppytr+u3+9hI0SuCw8Jg1ueDCS3+atY1JUQPAzZqQA29rCKpG0SfdXcOeKbMn5NCaBh+hGkVBbtoFAzINGnuiPYE5gWW7DAbmrJ3PwROCALNBKwN6bkOfRogp9zgAWZFwhFqslhADYUHmhCrLIzSmpaNf+jmZyghuBHAJwGW2h2rUgJEBTm/ssjrAbkhuClscMTDqYoSIhi4BZwCFOkMSM0HdCTXDySXXS8dNP6WMMBPysPVRQojWY+IyaMESA6GN/qEYJGaO6eQZGRAM5ikz0wwbYjhvYJrEQG7jib7KmAjHJrDeGDCevhuloxkY6emEPvbvBZwhwhlP6NWY92PpoL2F9Vjn/SXocKWn9+RXnunFDYlJkuhB6r19pr/p/xQ9/dPkNzL5/9evXf8DOGs/k6f1J7cAAAAASUVORK5CYII\x3d",
width:"44px",height:"48px"};h.mixin(f,c.config.brandingLogo||{});g+='\x3cimg class\x3d"brandingWaratahLogo" style\x3d"width: '+f.width+"; height: "+f.height+';filter: progid : DXImageTransform.Microsoft.Alpha ( opacity \x3d 0 );"src\x3d'+f.src+' border\x3d"0" style\x3d"position:absolute; width:'+f.width+"; height:"+f.height+';"/\x3e';c.brandingLogoPane.innerHTML=g;b.title?(document.title="SIX Maps | "+b.title,c.channelNameNode.innerHTML=b.title,v.set(c.brandingLogoPane,"bottom","-5px")):v.set(c.channelNameNode,
"display","none");g=[];b.requires&&(g=g.concat(m.map(b.requires,function(b){return{type:b}})));b.operationalLayers&&(g=g.concat(b.operationalLayers));b.tools&&(g=g.concat(b.tools));b.widgets&&(g=g.concat(b.widgets));b.searches&&(g=g.concat(b.searches));b.basemaps&&(g=g.concat(b.basemaps));b.searchPane&&g.push(b.searchPane);var r=[];m.forEach(g,function(b){b.type&&"undefined"==typeof h.getObject(b.type)&&r.push(b.type.replace(/\./g,"/"))});require(r,function(){c.dependenciesLoaded.resolve();b.connections&&
c.appLoaded.then(function(){B(function(){m.forEach(b.connections,function(b){var c="string"==typeof b.sourceId?O.byId(b.sourceId):b.sourceId,d="string"==typeof b.targetId?O.byId(b.targetId):b.targetId;!d[b.targetMethod]&&d.widgetNode&&(d=d.widgetNode);c&&!c[b.sourceMethod]&&c.widgetNode&&(c=c.widgetNode);c&&d&&c[b.sourceMethod]&&d[b.targetMethod]&&e.after(c,b.sourceMethod,h.hitch(d,b.targetMethod))})})})})})},startup:function(){var b=this;b.inherited(arguments);var d=!1,e=new c,g=setInterval(function(){100<
b.domNode.clientHeight&&(clearInterval(g),d=!0,e.resolve())},10);setTimeout(function(){d||(clearInterval(g),e.resolve())},5E3);e.then(function(){b.started||(b.started=!0,E(b.dependenciesLoaded,h.hitch(b,"initMapReady")))});return e},addTool:function(b){var c=this,g=h.getObject(b.type),f={},t;for(t in c.toolParams)"undefined"!=typeof g.prototype[t]&&(f[t]=c.toolParams[t]);(t=b.graphicsParams)&&(!t.shareGraphics||t.filter||t.highlightFilter)&&(b.params.mapGraphics=new oa(h.mixin({},t,{map:c.map})));
var k=c.toolbar.addTool(new g(h.mixin(f,b.params)));if(k.widgetNode){var g=h.mixin(h.mixin({},c.defaultPaneParams),b.paneParams||{}),u=new Ca(h.mixin({},b.params,{id:null},g));d.add(u.domNode,"resultsPane");v.set(u.domNode,g.position);g.size&&v.set(u.domNode,g.size);r.place(u.domNode,c.mainWindowNode);k.isInstanceOf&&k.isInstanceOf(H)&&(k.watch&&k.watch("title",function(b,c,d){u.set("title",d)}),k.helpNode&&u.set("helpContent",k.helpNode),k.settingsNode&&u.set("settingsContent",k.settingsNode),k.watch("settingsNode",
function(b,c,d){u.set("settingsContent",d)}),k.onSaveSettings&&e.after(k,"onSaveSettings",function(){u.toggleSettings(!0)}),k.loaded?E(k.loaded,function(){k.helpNode&&c.helpBox.addTopic(k.title,k.id,k.helpNode)}):k.helpNode&&c.helpBox.addTopic(k.title,k.id,k.helpNode),u.set("content",k.widgetNode),"undefined"==typeof b.paneClass&&(b.paneClass="toolPaneContainer"),b.paneClass&&d.add(k.widgetNode.domNode||k.widgetNode,b.paneClass),k.widgetNode&&k.widgetNode.tabContainer&&e.after(u,"toggle",h.hitch(k.widgetNode.tabContainer,
"resize")),k.widgetNode&&k.widgetNode.reset&&(u.set("reset",!0),e.after(u,"resetPane",h.hitch(k.widgetNode,"reset"))),k.onWidgetNodeChange&&e.after(k,"onWidgetNodeChange",function(){u.set("open",!0);u.set("visible",!0)}),e.after(k,"onActivate",function(){u.set("open",!0);u.moveable&&u.moveable.checkPosition();u.set("visible",!0)}),k.widgetNode&&e.after(k.widgetNode,"onResize",function(){u.moveable&&u.moveable.checkPosition()}),e.after(k,"onDeactivate",function(){u.set("visible",!1)}),e.after(u,"onClosePane",
function(){k.set("checked",!1)}))}},addLayer:function(b){var d=this,e=new c;"string"==typeof b&&b.match(/@/)?d.addLayer({link:b}):d.replaceLinks(b,d.parameters,!0).then(function(b){!h.isArray(b)&&(b=[b]);var c=[];m.forEach(b,function(b){b=Da.fromJson(b,h.hitch(d,d.spreadUrl));c.push(d.map.addLayer(b))});q(c).then(e.resolve)});return e},initMapReady:function(){var g=this,f=g.config,k=require.toUrl("sixmaps/dijits/");9>A("ie")&&Ka.requireCss(k+"ie8/ie.css");var u=new U(f.extent);g.popup=new J({fillSymbol:new ea(ea.STYLE_SOLID,
new pa(pa.STYLE_SOLID,new p([255,0,0]),2),new p([255,255,0,.25]))},r.create("div"));var C=f.lods||[{level:0,resolution:156543.03392800014,scale:5.91657527591555E8},{level:1,resolution:78271.51696399994,scale:2.95828763795777E8},{level:2,resolution:39135.75848200009,scale:1.47914381897889E8},{level:3,resolution:19567.87924099992,scale:7.3957190948944E7},{level:4,resolution:9783.93962049996,scale:3.6978595474472E7},{level:5,resolution:4891.96981024998,scale:1.8489297737236E7},{level:6,resolution:2445.98490512499,
scale:9244648.868618},{level:7,resolution:1222.992452562495,scale:4622324.434309},{level:8,resolution:611.4962262813797,scale:2311162.217155},{level:9,resolution:305.74811314055756,scale:1155581.108577},{level:10,resolution:152.87405657041106,scale:577790.554289},{level:11,resolution:76.43702828507324,scale:288895.277144},{level:12,resolution:38.21851414253662,scale:144447.638572},{level:13,resolution:19.10925707126831,scale:72223.819286},{level:14,resolution:9.554628535634155,scale:36111.909643},
{level:15,resolution:4.77731426794937,scale:18055.954822},{level:16,resolution:2.388657133974685,scale:9027.977411},{level:17,resolution:1.1943285668550503,scale:4513.988705},{level:18,resolution:.5971642835598172,scale:2256.994353},{level:19,resolution:.29858214164761665,scale:1128.497176},{level:20,resolution:.14929107082380833,scale:564.248588},{level:21,resolution:.07464553541190416,scale:282.124294}],k=null;if(g.queryParams.extent)try{k=R.fromJson(g.queryParams.extent)}catch(Ea){}var B=new c,
G={infoWindow:g.popup,lods:C,logo:!1,wrapAround180:!0,extent:k||u,showAttribution:!1,showLabels:!0,sliderStyle:"large",navigationMode:"classic"};if(g.queryParams.webmap||g.queryParams.appid){var E=function(b,c){esri.arcgis.utils.getItem(b).then(function(b){b=g.mergeIn({},b,!0);v.set(g.mapNode,"display","none");esri.arcgis.utils.createMap(b,g.mapNode.id,G).then(function(d){m.forEach(d.itemInfo.itemData.baseMap.baseMapLayers,function(b){d.map.removeLayer(d.map.getLayer(b.id))});var e={type:"esri.dijit.Basemap",
params:{title:b.itemData.baseMap.title,id:b.itemData.baseMap.title+Math.floor(10*Math.random()+1),layers:b.itemData.baseMap.baseMapLayers,thumbnailUrl:"http://www.arcgis.com/sharing/rest/content/items/"+b.item.id+"/info/"+b.item.thumbnail},selected:!0};v.set(g.mapNode,{display:"",height:"100%",width:"100%"});g.resizeMap();f.basemapMenu.basemaps.push(e);f.basemapMenu.params.activeBasemaps.foreground=e.params.id;if(c){var h=g.parameters.catalog.defaultTools,r=[];for(att in c)c[att]&&(att.match("searches:")&&
r.push({link:att.split("searches:")[1]}),att.match("tools:")&&h.push({link:att.split("tools:")[1]}));r.length||(r=g.parameters.catalog.defaultSearches);var t=[];m.forEach(h,function(b){t.push(g.replaceLinks(b,g.parameters))});m.forEach(r,function(b){t.push(g.replaceLinks(b,g.parameters))});q(t).then(function(){f.searches=r;f.tools=h;g.map=d.map;B.resolve(g.map)})}else g.map=d.map,B.resolve(g.map)})})};Pa("send","event","SIXMaps App","ArcGIS Online Webmap",{nonInteraction:!0});g.queryParams.appid?
esri.request({url:esri.arcgis.utils.arcgisUrl+"/"+g.queryParams.appid+"/data",content:{f:"json"},load:function(b){E(b.values.webmap,b.values)}}):E(g.queryParams.webmap)}else g.map=new ia(g.mapNode.id,G),B.resolve(g.map);g.mapLoaded=new c;B.then(function(){function c(){Pa("send","event","SIXMaps App","Show Legend");H.ensureLayer();I.set("open",!0);I.moveable&&I.moveable.checkPosition();I.set("visible",!0)}function k(b){q();v.set(b,"display","block")}function q(){A("ie")?(v.set(g.miniSearchPane,"display",
"block"),v.set(g.miniDockEyeClose,"display","none"),v.set(g.miniDockEyeOpen,"display","block"),v.set(g.singleSearch.domNode,"display","none"),v.set(ra.domNode,"display","none"),v.set(g.toolbar.domNode,"display","none")):(v.set(g.miniSearchPane,"display",""),v.set(g.miniDockEyeClose,"display",""),v.set(g.miniDockEyeOpen,"display",""),v.set(g.singleSearch.domNode,"display",""),v.set(ra.domNode,"display",""),v.set(g.toolbar.domNode,"display",""))}function B(b){ra.autoClose&&(Na&&Na.remove(),Na=y(document,
"mousedown",function(c){var d;c.target?d=c.target:c.srcElement&&(d=c.srcElement);3==d.nodeType&&(d=d.parentNode);var e=b();z(".dijitToggleButton *",ra.domNode).forEach(function(b,c,d){e.push(b)});m.some(e,function(b){return d==b})||(ra.deactivate(),Q.close(),Na.remove())}))}function p(){m.forEach(qa.containerNode.children,function(b){qa.containerNode.removeChild(b)})}g.map.loaded?g.mapLoaded.resolve():e.after(g.map,"onLoad",function(){g.map.lods=C;g.mapLoaded.resolve(g.map)});g.mapLoaded.then(function(){g.map.hideZoomSlider();
y(window,"resize",function(){g.resizeMap();g.toolbar&&g.toolbar.reposition()});r.place(g.popup.domNode,g.mainWindowNode);F.subscribe("/dojo/hashchange",function(b){b=x.queryToObject(b);for(var c in b){var d=b[c];if("string"==typeof d&&d.match(/^\{|\[/))try{d=N(d)}catch(ob){(console.warn||console.debug)(g.declaredClass+" - Could not parse queryParam "+c+"\x3d"+d+"\nError:\n",ob),delete b[c]}d="string"==typeof d?Xa.sanitise(d):h.isArray(d)?g.mergeIn([],d,!0):g.mergeIn({},d,!0);b[c]=d;g.doAction(c,d)}b.extent&&
g.setExtentJson(b.extent);b.layers&&g.setLayersJson(b.layers)})});var G=new oa({map:g.map});g.parameters.map=g.map;var E={map:g.map,title:"Legend"},G="sixmaps.dijits.Legend";g.config.legendParams&&(E=h.mixin(E,g.config.legendParams),g.config.legendParams.type&&(G=g.config.legendParams.type));var E=Sa.createWidget(G,E),H=null,I=null,P=[],G={position:{bottom:"100px",left:"20px"},title:"Legend"},I=new Ca(G);d.add(I.domNode,"resultsPane");v.set(I.domNode,G.position);r.place(I.domNode,g.mainWindowNode);
E.then(function(b){H=b;I.set("content",H);e.after(H,"setLayer",function(){c()},!0);e.after(g,"showLegend",function(){c()},!0);m.forEach(P,function(b){H.addLayer(b)})});var M=l.fadeIn({node:g.mapUpdatingNode,duration:3E3}).play();e.after(g.map,"onUpdateStart",function(){M.play()});e.after(g.map,"onUpdateEnd",function(){M.stop();v.set(g.mapUpdatingNode,"opacity",0)});y(g.mapUpdatingNode,"mouseover",function(){var b=g.map.layerIds.concat(g.map.graphicsLayerIds),c=[];m.forEach(b,function(b){b=g.map.getLayer(b);
b.updating&&c.push(b.name)});0==c.length?g.mapUpdatingNode.title="":(b="Loading: "+c.join(", "),g.mapUpdatingNode.title=b)});ha.defaults.map.slider=f.slider;ha.defaults.map.sliderLabel=f.slider.sliderLabel;ha.defaults.io.proxyUrl="/SIXREST/AGSProxy";g.map.extent.getWidth();e.after(g.map,"onExtentChange",function(){var b=Y.getScale(g.map);g.mapScaleNode.innerHTML="1:"+w.format(b,{places:0})});v.set(g.mapScaleNode,"zIndex",100);g.addLayers=function(){m.forEach(f.operationalLayers.reverse(),h.hitch(g,
"addLayer"))};var J=A("android")||A("ios")?!0:!1,E=new S(g.map);g.isDrawing=!1;e.after(E,"onActivate",function(){g.isDrawing=!0;m.forEach(g.map.graphicsLayerIds,function(b){g.map.getLayer(b).disableMouseEvents()})});e.after(E,"onDeactivate",function(){g.isDrawing=!1;m.forEach(g.map.graphicsLayerIds,function(b){g.map.getLayer(b).enableMouseEvents()})});G=function(b){return function(){!g.isDrawing&&b.apply(g.map.infoWindow,arguments)}};e.around(g.map.infoWindow,"setFeatures",G);e.around(g.map.infoWindow,
"show",G);var G=new sixmaps.map.Graphics({map:g.map}),K=new ma(g.map);g.toolbar=new Ma({mode:J||A("ie")?"static":null,relPath:require.toUrl("sixmaps//"),showToolTitles:!J,disabled:J||A("ie")||!1===f.dockeyeZoom,style:{visibility:"hidden"}},g.dockeyeNode);var U=new ka(h.mixin({localStore:g.localStore,map:g.map,appToolbar:g.toolbar,setExtent:!g.queryParams.search&&!g.queryParams.xy&&!g.queryParams.extent&&!g.queryParams.highlight},f.splash));e.after(U,"onHide",function(){(!1===f.dockeyeZoom||J)&&g.toolbar.set("disabled",
!0)});var aa=g.helpBox=U.helpNode;if(f.serviceNotification){if(f.serviceNotification.alert){var na=r.create("div"),ga=r.create("div",{style:"display:inline-block;padding:15px 0px 15px 15px;",onclick:function(){f.serviceNotification.message&&U.show()}},na);r.create("span",{"class":"icon-warning-sign",style:"color:orange;margin-right:10px;"},ga);ga=r.create("span",{},ga);r.create("span",{"class":"icon-remove-sign",style:"margin-left:15px;margin-right:15px;"},na);t.set(ga,f.serviceNotification.alert,
{cleanContent:!0});setTimeout(function(){Za.log(na,"",0)},1E3)}f.serviceNotification.message&&(t.set(aa.serviceNotification,f.serviceNotification.message,{cleanContent:!0}),v.set(aa.serviceNotification,"display",""))}U.show();var la=e.after(U,"onHide",function(){g.singleSearch.inputWidget&&g.singleSearch.inputWidget.displayMessage(f.searchTip||"Search for a location here, eg Lot/Plan, Address or Point of Interest");la.remove()});f.helpTopics&&m.forEach(f.helpTopics,function(b){var c=new ya({templateString:b.html,
"class":"helpTopic",imagesUrl:require.toUrl("sixmaps/dijits/tools/Help/Images/"),baseUrl:require.toUrl("sixmaps//")});g.helpBox.addTopic(b.title,c.id,c)});f.contributors&&g.helpBox.addContributor(f.contributors,"last");g.terms=new ja({localStore:g.localStore,termsParams:f.termsParams});g.terms.startup();(!g.localStore.get("showTerms")||g.alwaysCheckTerms||f.alwaysCheckTerms)&&g.terms.show();e.after(aa.loadTermsAndConditions,"onclick",function(){g.terms.show()});var R,ga={map:g.map,listLayers:!1,apiUrl:g.parameters.apiUrl};
h.mixin(ga,f.tocParams);R=new Ta(ga);d.add(R.domNode,"tocPane glassPane");R.helpNode&&aa.addTopic("Map Contents",R.helpNode.id,R.helpNode);(new D({title:"Map Contents",content:R,doLayout:!1})).placeAt(g.tocContainerNode);R.generateTOC();e.after(g.map,"addLayer",h.hitch(R,"addToTOC"),!0);e.after(g.map,"removeLayer",h.hitch(R,"removeFromTOC"),!0);e.after(R,"onLegendSelected",function(b){H.setLayer(b)},!0);e.after(R,"addLayerToLegend",function(b){H&&H.addLayer?H.addLayer(b):P.push(b)},!0);e.after(R,
"updateVisibility",function(){H&&H.refresh&&H.refresh()},!0);var ca=[];m.forEach(f.basemapMenu.basemaps,function(b){var c=[];m.forEach(b.params.layers,function(b){b.layerType&&(b={type:"sixmaps.dijits.BasemapLayer",layerParams:{url:b.url,type:b.layerObject.declaredClass,maxScale:565}});c.push((new h.getObject(b.type))(b.layerParams))});b.params.layers=c;var d=(new h.getObject(b.type))(b.params);d.metadataUrl=b.params&&b.params.metadataUrl;d.selected=b.selected;ca.push(d)});ga={basemaps:ca,map:g.map,
activeBasemaps:f.basemapMenu.params.activeBasemaps};f.basemapMenu.params.sliderPos&&(ga.sliderPos=f.basemapMenu.params.sliderPos);var Ba=(new h.getObject(f.basemapMenu.type))(ga).placeAt(g.baseMapContainerNode);g.basemapGallery=Ba.basemapGallery;d.add(Ba.containerNode,"baseMapPane glassPane");e.after(Ba.basemapGallery,"onLoad",function(){m.forEach(ca,function(b){b.selected&&Ba.basemapGallery.select(b.id)})});Ba.helpNode&&aa.addTopic("Basemaps",Ba.helpNode.id,Ba.helpNode);d.add(Ba.domNode,"noFade");
g.queryParams.layers?g.setLayersJson(g.queryParams.layers):g.addLayers();var cb={app:g,mapGraphics:G,map:g.map};f.widgets&&m.forEach(f.widgets,function(b){var c=h.getObject(b.type),d;for(d in cb)"undefined"!=typeof c.prototype[d]&&(b.params[d]=cb[d]);b=new c(b.params);b.helpNode&&aa.addTopic(b.title,b.helpNode.id,b.helpNode)});var Ha={map:g.map,app:g,arcGISServerUrl:g.parameters.arcGISServerUrl};g.searchContainer=new Ga({app:g,appParams:g.parameters});g.searchContainer.on("rowAction",function(b){g.rowAction(b)});
var pa=[];m.forEach(f.searches,function(b){var c=h.getObject(b.type),d;for(d in Ha)"undefined"!=typeof c.prototype[d]&&(b.params[d]=Ha[d]);b=g.searchContainer.addChild(new c(b.params));b.searchOrder=b.searchOrder||100;(b.singleFieldSearch||b.singleSearches)&&pa.push(b)});pa.sort(function(b,c){return b.searchOrder-c.searchOrder});g.singleSearch=(new Fa({title:"Search",searches:pa,style:"visibility:hidden;",fieldParams:[{name:"_singleField_",alias:"",widgetType:"dijit.form.ValidationTextBox",style:"font-size:11px;width:125px;border:1px solid #4D6895;",
placeHolder:"Search for a location"}]})).placeAt(g.singleTakeMeToNode);ga=(new h.getObject(f.searchPane.type))(h.mixin({visible:!1},f.searchPane.params,{searchContainer:g.searchContainer,singleSearch:g.singleSearch,mapGraphics:G}));v.set(g.miniSearchPane,"visibility","visible");v.set(g.miniDockEyeOpen,"visibility","visible");v.set(g.miniSidebar,"visibility","visible");v.set(g.miniMapSlider,"visibility","visible");y(g.miniSearchPane,"click",function(){k(g.singleSearch.domNode);v.set(g.miniSearchPane,
"display","none")});y(g.miniDockEyeOpen,"click",function(){k(g.toolbar.domNode);g.toolbar.reposition();v.set(g.miniDockEyeClose,"display","block");v.set(g.miniDockEyeOpen,"display","none");g.toolbar.initDock()});y(g.miniDockEyeClose,"click",function(){v.set(g.miniDockEyeClose,"display","");q()});y(g.miniMapContents,"click",function(){ia.onActivate();g.sideBarMenuNode.setActiveTool(ia);q()});y(g.miniBasemaps,"click",function(){fa.onActivate();g.sideBarMenuNode.setActiveTool(fa);q()});y(g.miniMapSliderUp,
"click",function(){g.map.setLevel(g.map.getLevel()+1)});y(g.miniMapSliderDown,"click",function(){g.map.setLevel(g.map.getLevel()-1)});e.after(g.singleSearch,"onBeforeSearch",h.hitch(g.searchContainer,"reset"));e.after(g.singleSearch,"onClear",h.hitch(g.searchContainer,"reset"));d.add(ga.domNode,"resultsPaneNode");v.set(ga.domNode,f.searchPane.paneParams.position);r.place(ga.domNode,g.mainWindowNode);aa.addTopic(ga.title,ga.id,ga.helpContent);g.toolParams={app:g,drawToolbar:E,mapGraphics:G,navToolbar:K,
appToolbar:g.toolbar,map:g.map,extent:u,arcGISServerUrl:g.parameters.arcGISServerUrl,splashPane:U};g.defaultPaneParams={position:{bottom:"100px",left:"20px"}};m.forEach(f.tools,function(b){g.addTool(b)});f.splash&&g.addTool(f.splash);var ra=g.sideBarMenuNode,ia=new va({label:"Map Contents",style:"padding-right:4px",onActivate:function(){v.set(g.tocContainerNode,"visibility","visible")},onDeactivate:function(){v.set(g.tocContainerNode,"visibility","hidden")}}),fa=new va({label:"Basemaps",onActivate:function(){v.set(g.baseMapContainerNode,
"visibility","visible")},onDeactivate:function(){v.set(g.baseMapContainerNode,"visibility","hidden");Ba.currentPopup&&Q.close(Ba.currentPopup)}});ra.addChild(ia);ra.addChild(fa);var Na;e.after(fa,"onActivate",function(){B(function(){return Ba.getChildNodes()})});e.after(ia,"onActivate",function(){Q.close();B(function(){var b=R.getChildNodes();z("*",I.domNode).forEach(function(c){b.push(c)});return b})});g.mapLoaded.then(function(){g.addScalebar();e.after(g.map,"_createSlider",function(){var c=b.byId(g.map.id+
"_zoom_slider");d.add(c,"mapSlider noPrint");z(".dijitSliderIncrementIconV").forEach(function(b){b.title="Zoom In"});z(".dijitSliderDecrementIconV").forEach(function(b){b.title="Zoom Out"})})});9>A("ie")?(d.add(g.toolbar.domNode,"dockeyeToolbarIE glassPane noFade"),d.add(g.singleSearch.domNode,"leftToolbarIE glassPane noFade"),d.add(g.sideBarMenuNode.domNode,"rightToolbarIE glassPane noFade"),v.set(fa.domNode,{height:"17px",paddingTop:"2px"}),v.set(ia.domNode,{height:"17px",paddingTop:"2px"}),g.resizeMap()):
(d.add(g.singleSearch.domNode,"singleSearchPane glassPane noFade"),d.add(g.singleTakeMeToNode,"noFade"),d.add(g.sideBarMenuNode.domNode,"sideBarMenu glassPane noFade"),d.add(g.toolbar.domNode,"dockeyeToolbar noFade"));v.set(g.singleSearch.domNode,"visibility","visible");d.add(g.singleSearch.domNode,"noPrint");d.add(g.sideBarMenuNode.domNode,"noPrint");d.add(g.toolbar.domNode,"noPrint");E=z("\x3e*:not(.noFade)",g.mainWindowNode);9>A("ie")||A("chrome")||E.onmouseenter(function(){this.anim&&this.anim.stop();
v.set(this,{opacity:.9})});9>A("ie")||A("chrome")||E.onmouseleave(function(){this.anim=l.animateProperty({delay:3E3,duration:2E3,node:this,properties:{opacity:.7}}).play()});var jb=[],qa=g.toolHelpPaneNode;z(".dijitTitlePane",g.mainWindowNode).forEach(function(b){A("chrome")&&v.set(b,"opacity",1);!A("chrome")&&O.byNode(b).watch("visible",function(c,d,e){e&&v.set(b,"opacity",.9)});var c=O.byId(b.id);if(c.helpContent){var r=new ba({});d.add(r.domNode,"toolPaneContainer");d.add(r.helpContent,"toolHelpContent");
e.after(c,"toggleHelp",function(){c.helpOpen||qa.visible||(c.set("helpOpen",!1),c.toggleHelp());p();r.placeAt(qa.containerNode);if(c.helpOpen){var b=c.title+" Help",d=c.helpContent;Pa("send","event","SIXMaps App","Pane Show Help",b);qa.set("open",!0);qa.moveable&&qa.moveable.checkPosition();qa.set("visible",!0);qa.set("title",b);d.placeAt(r.helpContent.domNode)}!c.helpOpen&&qa.set("visible",!1)});e.after(r,"showHelpTopics",function(){U.show();aa.embeddedTabContainer.selectChild(aa.helpTab);aa.setTopic(c.helpContent.topicId)});
e.after(r,"showToolFeedback",function(){U.show();aa.embeddedTabContainer.selectChild(aa.feedbackTab);aa.subject.set("value",c.title+" feedback")});e.after(c,"onClosePane",function(){qa.set("visible",!1);g.toolbar.reposition()})}var t=new La(b,{handle:c.titleBarNode,minTop:60,windowNode:g.domNode});c.moveable=t;J||!1===f.dockeyeZoom||(e.after(t,"onMoveStart",function(){g.toolbar.disabled=!0}),e.after(t,"onMoveStop",function(){g.toolbar.disabled=!1}));c.bringToTop=function(){if(!(2>jb.length)){var b=
m.filter(jb,function(b){return b!==this},this);b.sort(function(b,c){return b.domNode.style.zIndex-c.domNode.style.zIndex});b.push(this);m.forEach(b,function(b,c){b.domNode.style.zIndex=c})}};e.after(g.map,"enableKeyboardNavigation",function(){g.map.disableKeyboardNavigation()});y(document,"keydown",h.hitch(g,"trapKey"));e.after(t,"onMouseDown",h.hitch(c,"bringToTop"),!0);e.after(c,"onClick",h.hitch(c,"bringToTop"),!0);e.after(c,"onShowPane",function(){setTimeout(h.hitch(c,"bringToTop"),0)});e.after(c,
"toggleSettings",h.hitch(t,"checkPosition"));y(window,"onresize",h.hitch(t,"checkPosition"));jb.push(c)});A("ie")?setTimeout(function(){v.set(g.loadNode,"display","none")},0):(E=l.fadeOut({node:g.loadNode,duration:2500}).play(),y(E,"onEnd",function(){v.set(g.loadNode,"display","none");v.set(g.mapUpdatingNode,"display","block")}),setTimeout(function(){v.set(g.loadNode,"display","none");v.set(g.mapUpdatingNode,"display","block")},3000),g.toolbar.reposition(),l.fadeIn({node:g.toolbar.domNode,duration:2500}).play());setTimeout(function(){g.toolbar.initDock()},500);g.appLoaded.resolve()})},spreadUrl:function(b){if(b.match(/\/_.*\//))return b;
for(var c=0,d=0;d<b.length;d++)c+=b.charCodeAt(d);for(var e in this.spreadUrls){var d=this.spreadUrls[e],g=c%d.servers+1;b.match(e)&&(b=b.replace(d.replace,d.replace+g))}return b},resizeMap:function(){var b=this,c;clearTimeout(c);c=setTimeout(function(){b.map.resize();b.map.reposition();b.toolbar.reposition();800>b.domNode.clientWidth?(b.toolbar.set("disabled",!0),9>A("ie")&&(z(".sixmaps_app_App_mainWindow .rightToolbarIE").style("display","none"),z(".sixmaps_app_App_mainWindow .leftToolbarIE").style("display",
"none"),z(".dockeyeToolbarIE").style("display","none"),z(".mapSlider").style("display","none"),z(".sixmaps_app_App_mainWindow .miniSearchPane").style("display","block"),z(".sixmaps_app_App_mainWindow .miniSidebar").style("display","block"),z(".sixmaps_app_App_mainWindow .miniDockEye").style("display","block"),z(".sixmaps_app_App_mainWindow .miniMapSlider").style("display","block"),z(".sixmaps_app_App_mainWindow .miniDockEyeClose").style("display","none"))):(b.toolbar.set("disabled",!1),9>A("ie")&&
(z(".sixmaps_app_App_mainWindow .rightToolbarIE").style("display",""),z(".sixmaps_app_App_mainWindow .leftToolbarIE").style("display",""),z(".dockeyeToolbarIE").style("display",""),z(".mapSlider").style("display",""),z(".sixmaps_app_App_mainWindow .miniSearchPane").style("display","none"),z(".sixmaps_app_App_mainWindow .miniSidebar").style("display","none"),z(".sixmaps_app_App_mainWindow .miniDockEye").style("display","none"),z(".sixmaps_app_App_mainWindow .miniMapSlider").style("display","none"),
z(".sixmaps_app_App_mainWindow .miniDockEyeClose").style("display","none")))},500)},onRowAction:function(b){},addScalebar:function(){new K({map:this.map,scalebarUnit:"metric"})},showLegend:function(){},trapKey:function(b){b=b?b:event?event:null;if(void 0==(b.target?b.target:b.srcElement?b.srcElement:null).type){if(40==b.keyCode)return this.map.panDown(),!1;if(39==b.keyCode)return this.map.panRight(),!1;if(38==b.keyCode)return this.map.panUp(),!1;if(37==b.keyCode)return this.map.panLeft(),!1;if(107==
b.keyCode)return this.map.setLevel(this.map.getLevel()+1),!1;if(109==b.keyCode)return this.map.setLevel(this.map.getLevel()-1),!1}else return!0},toJson:function(){var b=this,c=[];m.forEach(b.map.graphicsLayerIds,function(d){(d=b.map.getLayer(d))&&!1!==d.showInToc&&!d.isBaseMapLayer&&c.push(d)});m.forEach(b.map.layerIds,function(d){(d=b.map.getLayer(d))&&!1!==d.showInToc&&!d.isBaseMapLayer&&c.push(d)});return{layers:m.map(c,function(b){return Da.toJson(b)}),extent:b.map.extent.toJson()}},setLayersJson:function(b){var c=
this,d=[];m.forEach(c.map.graphicsLayerIds,function(b){(b=c.map.getLayer(b))&&!1!==b.showInToc&&!b.isBaseMapLayer&&d.push(b)});m.forEach(c.map.layerIds,function(b){(b=c.map.getLayer(b))&&!1!==b.showInToc&&!b.isBaseMapLayer&&d.push(b)});m.forEach(d,function(b){c.map.removeLayer(b)});m.forEach(b.reverse(),function(b){b=Da.fromJson(b);c.map.addLayer(b)})},setExtentJson:function(b){this.map.setExtent(R.fromJson(b))},fromJson:function(b){b.extent&&this.setExtentJson(b.extent);b.layers&&this.setLayersJson(b.layers)},
generateAppUrl:function(){var b=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,c=this.toJson(),c={extent:k.toJson(c.extent),layers:k.toJson(c.layers.reverse())},c=x.objectToQuery(c);return b+"#"+c},launchInNewWindow:function(b){window.open(this.generateAppUrl(),b||"_blank")}})})},"dojo/promise/all":function(){define("dojo/promise/all",["../_base/array","../_base/lang","../Deferred","../when"],function(m,p,f,l){var k=m.some;return function(h){var q,
g;p.isArray(h)?g=h:h&&"object"===typeof h&&(q=h);var e,c=[];if(q){g=[];for(var b in q)Object.hasOwnProperty.call(q,b)&&(c.push(b),g.push(q[b]));e={}}else g&&(e=[]);if(!g||!g.length)return(new f).resolve(e);var d=new f;d.promise.always(function(){e=c=null});var r=g.length;k(g,function(b,g){q||c.push(g);l(b,function(b){d.isFulfilled()||(e[c[g]]=b,0===--r&&d.resolve(e))},d.reject);return d.isFulfilled()});return d.promise}})},"dojo/hash":function(){define("dojo/hash","./_base/kernel require ./_base/config ./aspect ./_base/lang ./topic ./domReady ./sniff".split(" "),
function(m,p,f,l,k,h,q,g){function e(b,c){c=b.indexOf(c);return 0<=c?b.substring(c+1):""}function c(){return e(location.href,"#")}function b(){h.publish("/dojo/hashchange",c())}function d(){c()!==u&&(u=c(),b())}function r(b){if(t)if(t.isTransitioning())setTimeout(k.hitch(null,r,b),w);else{var c=t.iframe.location.href,e=c.indexOf("?");t.iframe.location.replace(c.substring(0,e)+"?"+b)}else c=location.href.replace(/#.*/,""),location.replace(c+"#"+b),!x&&d()}function v(){function d(){u=c();r=l?u:e(x.href,
"?");t=!1;q=null}var g=document.createElement("iframe"),h=f.dojoBlankHtmlUrl||p.toUrl("./resources/blank.html");g.id="dojo-hash-iframe";g.src=h+"?"+c();g.style.display="none";document.body.appendChild(g);this.iframe=m.global["dojo-hash-iframe"];var r,t,q,v,l,x=this.iframe.location;this.isTransitioning=function(){return t};this.pollLocation=function(){if(!l)try{var f=e(x.href,"?");document.title!=v&&(v=this.iframe.document.title=document.title)}catch(P){l=!0}var m=c();if(t&&u===m)if(l||f===q)d(),b();
else{setTimeout(k.hitch(this,this.pollLocation),0);return}else if(u!==m||!l&&r!==f){if(u!==m){u=m;t=!0;q=m;g.src=h+"?"+q;l=!1;setTimeout(k.hitch(this,this.pollLocation),0);return}l||(location.href="#"+x.search.substring(1),d(),b())}setTimeout(k.hitch(this,this.pollLocation),w)};d();setTimeout(k.hitch(this,this.pollLocation),w)}m.hash=function(b,d){if(!arguments.length)return c();"#"==b.charAt(0)&&(b=b.substring(1));d?r(b):location.hash="#"+b;return b};var u,t,x,w=f.hashPollFrequency||100;q(function(){"onhashchange"in
m.global&&(!g("ie")||8<=g("ie")&&"BackCompat"!=document.compatMode)?x=l.after(m.global,"onhashchange",b,!0):document.addEventListener?(u=c(),setInterval(d,w)):document.attachEvent&&(t=new v)});return m.hash})},"dojo/html":function(){define("dojo/html","./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "),function(m,p,f,l,k,h,q){var g=0,e={_secureForInnerHtml:function(c){return c.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")},
_emptyNode:h.empty,_setNodeContent:function(c,b){h.empty(c);if(b)if("number"==typeof b&&(b=b.toString()),"string"==typeof b&&(b=h.toDom(b,c.ownerDocument)),!b.nodeType&&p.isArrayLike(b))for(var d=b.length,e=0;e<b.length;e=d==b.length?e+1:0)h.place(b[e],c,"last");else h.place(b,c,"last");return c},_ContentSetter:l("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:m._scopeName,startup:!0,constructor:function(c,b){p.mixin(this,c||
{});b=this.node=k.byId(this.node||b);this.id||(this.id=["Setter",b?b.id||b.tagName:"",g++].join("_"))},set:function(c,b){void 0!==c&&(this.content=c);"number"==typeof c&&(c=c.toString());b&&this._mixin(b);this.onBegin();this.setContent();return(c=this.onEnd())&&c.then?c:this.node},setContent:function(){var c=this.node;if(!c)throw Error(this.declaredClass+": setContent given no node");try{c=e._setNodeContent(c,this.content)}catch(d){var b=this.onContentError(d);try{c.innerHTML=b}catch(r){}}this.node=
c},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(f.forEach(this.parseResults,function(c){c.destroy&&c.destroy()}),delete this.parseResults);h.empty(this.node)},onBegin:function(){var c=this.content;if(p.isString(c)&&(this.cleanContent&&(c=e._secureForInnerHtml(c)),this.extractContent)){var b=c.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);b&&(c=b[1])}this.empty();this.content=
c;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(c){return"Error occurred setting content: "+c},onExecError:function(c){return"Error occurred executing scripts: "+c},_mixin:function(c){var b={},d;for(d in c)d in b||(this[d]=c[d])},_parse:function(){var c=this.node;try{var b={};f.forEach(["dir","lang","textDir"],function(c){this[c]&&
(b[c]=this[c])},this);var d=this;this.parseDeferred=q.parse({rootNode:c,noStart:!this.startup,inherited:b,scope:this.parserScope}).then(function(b){return d.parseResults=b},function(b){d._onError("Content",b,"Error parsing in _ContentSetter#"+d.id)})}catch(r){this._onError("Content",r,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(c,b,d){c=this["on"+c+"Error"].call(this,b);d||c&&e._setNodeContent(this.node,c,!0)}}),set:function(c,b,d){void 0==b&&(b="");"number"==typeof b&&(b=b.toString());
return d?(new e._ContentSetter(p.mixin(d,{content:b,node:c}))).set():e._setNodeContent(c,b,!0)}};p.setObject("dojo.html",e);return e})},"dojo/parser":function(){define("dojo/parser","require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t){function x(b){return eval("("+b+")")}function w(b){var c=b._nameCaseMap,d=b.prototype;if(!c||
c._extendCnt<z){var c=b._nameCaseMap={},e;for(e in d)"_"!==e.charAt(0)&&(c[e.toLowerCase()]=e);c._extendCnt=z}return c}function y(b,c){c||(c=m);var d=c._dojoParserCtorMap||(c._dojoParserCtorMap={}),e=b.join();if(!d[e]){for(var g=[],h=0,r=b.length;h<r;h++){var t=b[h];g[g.length]=d[t]=d[t]||f.getObject(t)||~t.indexOf("/")&&c(t)}b=g.shift();d[e]=g.length?b.createSubclass?b.createSubclass(g):b.extend.apply(b,g):b}return d[e]}new Date("X");var z=0;e.after(f,"extend",function(){z++},!0);var B={_clearCache:function(){z++;
_ctorMap={}},_functionFromScript:function(b,c){var d="",e="",g=b.getAttribute(c+"args")||b.getAttribute("args");c=b.getAttribute("with");g=(g||"").split(/\s*,\s*/);c&&c.length&&l.forEach(c.split(/\s*,\s*/),function(b){d+="with("+b+"){";e+="}"});return new Function(g,d+b.innerHTML+e)},instantiate:function(b,c,d){c=c||{};d=d||{};var e=(d.scope||p._scopeName)+"Type",g="data-"+(d.scope||p._scopeName)+"-",f=g+"type",h=g+"mixins",r=[];l.forEach(b,function(b){var d=e in c?c[e]:b.getAttribute(f)||b.getAttribute(e);
if(d){var g=b.getAttribute(h),d=g?[d].concat(g.split(/\s*,\s*/)):[d];r.push({node:b,types:d})}});return this._instantiate(r,c,d)},_instantiate:function(b,d,e,g){function f(b){d._started||e.noStart||l.forEach(b,function(b){"function"!==typeof b.startup||b._started||b.startup()});return b}b=l.map(b,function(b){var c=b.ctor||y(b.types,e.contextRequire);if(!c)throw Error("Unable to resolve constructor for: '"+b.types.join()+"'");return this.construct(c,b.node,d,e,b.scripts,b.inherited)},this);return g?
c(b).then(f):f(b)},construct:function(c,d,h,t,k,q){function m(b){H&&f.setObject(H,b);for(E=0;E<aa.length;E++)e[aa[E].advice||"after"](b,aa[E].method,f.hitch(b,aa[E].func),!0);for(E=0;E<S.length;E++)S[E].call(b);for(E=0;E<ma.length;E++)b.watch(ma[E].prop,ma[E].func);for(E=0;E<ha.length;E++)u(b,ha[E].event,ha[E].func);return b}var C=c&&c.prototype;t=t||{};var y={};t.defaults&&f.mixin(y,t.defaults);q&&f.mixin(y,q);var B;r("dom-attributes-explicit")?B=d.attributes:r("dom-attributes-specified-flag")?B=
l.filter(d.attributes,function(b){return b.specified}):(q=(/^input$|^img$/i.test(d.nodeName)?d:d.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),B=l.map(q.split(/\s+/),function(b){var c=b.toLowerCase();return{name:b,value:"LI"==d.nodeName&&"value"==b||"enctype"==c?d.getAttribute(c):d.getAttributeNode(c).value}}));var A=t.scope||p._scopeName;q="data-"+A+"-";var z={};"dojo"!==A&&(z[q+"props"]="data-dojo-props",z[q+"type"]=
"data-dojo-type",z[q+"mixins"]="data-dojo-mixins",z[A+"type"]="dojotype",z[q+"id"]="data-dojo-id");for(var E=0,F,A=[],H,D;F=B[E++];){var R=F.name,Y=R.toLowerCase();F=F.value;switch(z[Y]||Y){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":D=F;break;case "data-dojo-id":case "jsid":H=F;break;case "data-dojo-attach-point":case "dojoattachpoint":y.dojoAttachPoint=F;break;case "data-dojo-attach-event":case "dojoattachevent":y.dojoAttachEvent=F;break;case "class":y["class"]=
d.className;break;case "style":y.style=d.style&&d.style.cssText;break;default:if(R in C||(R=w(c)[Y]||R),R in C)switch(typeof C[R]){case "string":y[R]=F;break;case "number":y[R]=F.length?Number(F):NaN;break;case "boolean":y[R]="false"!=F.toLowerCase();break;case "function":""===F||-1!=F.search(/[^\w\.]+/i)?y[R]=new Function(F):y[R]=f.getObject(F,!1)||new Function(F);A.push(R);break;default:Y=C[R],y[R]=Y&&"length"in Y?F?F.split(/\s*,\s*/):[]:Y instanceof Date?""==F?new Date(""):"now"==F?new Date:b.fromISOString(F):
Y instanceof g?p.baseUrl+F:x(F)}else y[R]=F}}for(B=0;B<A.length;B++)z=A[B].toLowerCase(),d.removeAttribute(z),d[z]=null;if(D)try{D=x.call(t.propsThis,"{"+D+"}"),f.mixin(y,D)}catch(la){throw Error(la.toString()+" in data-dojo-props\x3d'"+D+"'");}f.mixin(y,h);k||(k=c&&(c._noScript||C._noScript)?[]:v("\x3e script[type^\x3d'dojo/']",d));var aa=[],S=[],ma=[],ha=[];if(k)for(E=0;E<k.length;E++)z=k[E],d.removeChild(z),h=z.getAttribute(q+"event")||z.getAttribute("event"),t=z.getAttribute(q+"prop"),D=z.getAttribute(q+
"method"),A=z.getAttribute(q+"advice"),B=z.getAttribute("type"),z=this._functionFromScript(z,q),h?"dojo/connect"==B?aa.push({method:h,func:z}):"dojo/on"==B?ha.push({event:h,func:z}):y[h]=z:"dojo/aspect"==B?aa.push({method:D,advice:A,func:z}):"dojo/watch"==B?ma.push({prop:t,func:z}):S.push(z);c=(k=c.markupFactory||C.markupFactory)?k(y,d,c):new c(y,d);return c.then?c.then(m):m(c)},scan:function(b,c){function e(b){if(!b.inherited){b.inherited={};var c=b.node,d=e(b.parent),c={dir:c.getAttribute("dir")||
d.dir,lang:c.getAttribute("lang")||d.lang,textDir:c.getAttribute(q)||d.textDir},g;for(g in c)c[g]&&(b.inherited[g]=c[g])}return b.inherited}var g=[],f=[],h={},t=(c.scope||p._scopeName)+"Type",k="data-"+(c.scope||p._scopeName)+"-",u=k+"type",q=k+"textdir",k=k+"mixins",v=b.firstChild,x=c.inherited;if(!x){var w=function(b,c){return b.getAttribute&&b.getAttribute(c)||b.parentNode&&w(b.parentNode,c)},x={dir:w(b,"dir"),lang:w(b,"lang"),textDir:w(b,q)},C;for(C in x)x[C]||delete x[C]}C={inherited:x};for(var B,
A;;)if(v)if(1!=v.nodeType)v=v.nextSibling;else if(B&&"script"==v.nodeName.toLowerCase())(x=v.getAttribute("type"))&&/^dojo\/\w/i.test(x)&&B.push(v),v=v.nextSibling;else if(A)v=v.nextSibling;else if(x=v.getAttribute(u)||v.getAttribute(t),b=v.firstChild,x||b&&(3!=b.nodeType||b.nextSibling)){A=null;if(x){var z=v.getAttribute(k);B=z?[x].concat(z.split(/\s*,\s*/)):[x];try{A=y(B,c.contextRequire)}catch(aa){}A||l.forEach(B,function(b){~b.indexOf("/")&&!h[b]&&(h[b]=!0,f[f.length]=b)});z=A&&!A.prototype._noScript?
[]:null;C={types:B,ctor:A,parent:C,node:v,scripts:z};C.inherited=e(C);g.push(C)}else C={node:v,scripts:B,parent:C};B=z;A=v.stopParser||A&&A.prototype.stopParser&&!c.template;v=b}else v=v.nextSibling;else{if(!C||!C.node)break;v=C.node.nextSibling;A=!1;C=C.parent;B=C.scripts}var Y=new d;f.length?(r("dojo-debug-messages"),(c.contextRequire||m)(f,function(){Y.resolve(l.filter(g,function(b){if(!b.ctor)try{b.ctor=y(b.types,c.contextRequire)}catch(ha){}for(var d=b.parent;d&&!d.types;)d=d.parent;var e=b.ctor&&
b.ctor.prototype;b.instantiateChildren=!(e&&e.stopParser&&!c.template);b.instantiate=!d||d.instantiate&&d.instantiateChildren;return b.instantiate}))})):Y.resolve(g);return Y.promise},_require:function(b,c){b=x("{"+b.innerHTML+"}");var e=[],g=[],h=new d;c=c&&c.contextRequire||m;for(var r in b)e.push(r),g.push(b[r]);c(g,function(){for(var b=0;b<e.length;b++)f.setObject(e[b],arguments[b]);h.resolve(arguments)});return h.promise},_scanAmd:function(b,c){var e=new d,g=e.promise;e.resolve(!0);var f=this;
v("script[type\x3d'dojo/require']",b).forEach(function(b){g=g.then(function(){return f._require(b,c)});b.parentNode.removeChild(b)});return g},parse:function(b,c){!b||"string"==typeof b||"nodeType"in b||(c=b,b=c.rootNode);var d=b?h.byId(b):q.body();c=c||{};var e=c.template?{template:!0}:{},g=[],r=this;b=this._scanAmd(d,c).then(function(){return r.scan(d,c)}).then(function(b){return r._instantiate(b,e,c,!0)}).then(function(b){return g=g.concat(b)}).otherwise(function(b){throw b;});f.mixin(g,b);return g}};
p.parser=B;k.parseOnLoad&&t(100,B,"parse");return B})},"dojo/_base/url":function(){define("dojo/_base/url",["./kernel"],function(m){var p=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,f=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,l=function(){for(var k=arguments,h=[k[0]],q=1;q<k.length;q++)if(k[q]){var g=new l(k[q]+""),h=new l(h[0]+"");if(""==g.path&&!g.scheme&&!g.authority&&!g.query)null!=g.fragment&&(h.fragment=g.fragment),g=h;else if(!g.scheme&&(g.scheme=h.scheme,
!g.authority&&(g.authority=h.authority,"/"!=g.path.charAt(0)))){for(var h=(h.path.substring(0,h.path.lastIndexOf("/")+1)+g.path).split("/"),e=0;e<h.length;e++)"."==h[e]?e==h.length-1?h[e]="":(h.splice(e,1),e--):0<e&&(1!=e||""!=h[0])&&".."==h[e]&&".."!=h[e-1]&&(e==h.length-1?(h.splice(e,1),h[e-1]=""):(h.splice(e-1,2),e-=2));g.path=h.join("/")}h=[];g.scheme&&h.push(g.scheme,":");g.authority&&h.push("//",g.authority);h.push(g.path);g.query&&h.push("?",g.query);g.fragment&&h.push("#",g.fragment)}this.uri=
h.join("");k=this.uri.match(p);this.scheme=k[2]||(k[1]?"":null);this.authority=k[4]||(k[3]?"":null);this.path=k[5];this.query=k[7]||(k[6]?"":null);this.fragment=k[9]||(k[8]?"":null);null!=this.authority&&(k=this.authority.match(f),this.user=k[3]||null,this.password=k[4]||null,this.host=k[6]||k[7],this.port=k[9]||null)};l.prototype.toString=function(){return this.uri};return m._Url=l})},"dojo/date/stamp":function(){define("dojo/date/stamp",["../_base/lang","../_base/array"],function(m,p){var f={};
m.setObject("dojo.date.stamp",f);f.fromISOString=function(l,k){f._isoRegExp||(f._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var h=f._isoRegExp.exec(l);l=null;if(h){h.shift();h[1]&&h[1]--;h[6]&&(h[6]*=1E3);k&&(k=new Date(k),p.forEach(p.map("FullYear Month Date Hours Minutes Seconds Milliseconds".split(" "),function(e){return k["get"+e]()}),function(e,c){h[c]=h[c]||e}));l=new Date(h[0]||1970,h[1]||0,h[2]||1,h[3]||0,h[4]||
0,h[5]||0,h[6]||0);100>h[0]&&l.setFullYear(h[0]||1970);var q=0,g=h[7]&&h[7].charAt(0);"Z"!=g&&(q=60*(h[8]||0)+(Number(h[9])||0),"-"!=g&&(q*=-1));g&&(q-=l.getTimezoneOffset());q&&l.setTime(l.getTime()+6E4*q)}return l};f.toISOString=function(f,k){var h=function(c){return 10>c?"0"+c:c};k=k||{};var q=[],g=k.zulu?"getUTC":"get",e="";"time"!=k.selector&&(e=f[g+"FullYear"](),e=["0000".substr((e+"").length)+e,h(f[g+"Month"]()+1),h(f[g+"Date"]())].join("-"));q.push(e);"date"!=k.selector&&(e=[h(f[g+"Hours"]()),
h(f[g+"Minutes"]()),h(f[g+"Seconds"]())].join(":"),g=f[g+"Milliseconds"](),k.milliseconds&&(e+="."+(100>g?"0":"")+h(g)),k.zulu?e+="Z":"time"!=k.selector&&(f=f.getTimezoneOffset(),k=Math.abs(f),e+=(0<f?"-":"+")+h(Math.floor(k/60))+":"+h(k%60)),q.push(e));return q.join("T")};return f})},"dojo/number":function(){define("dojo/number",["./_base/lang","./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(m,p,f,l,k){var h={};m.setObject("dojo.number",h);h.format=function(g,e){e=m.mixin({},
e||{});var c=p.normalizeLocale(e.locale),c=p.getLocalization("dojo.cldr","number",c);e.customs=c;c=e.pattern||c[(e.type||"decimal")+"Format"];return isNaN(g)||Infinity==Math.abs(g)?null:h._applyPattern(g,c,e)};h._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;h._applyPattern=function(g,e,c){c=c||{};var b=c.customs.group,d=c.customs.decimal;e=e.split(";");var f=e[0];e=e[0>g?1:0]||"-"+f;if(-1!=e.indexOf("%"))g*=100;else if(-1!=e.indexOf("\u2030"))g*=1E3;else if(-1!=e.indexOf("\u00a4"))b=c.customs.currencyGroup||
b,d=c.customs.currencyDecimal||d,e=e.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/,function(b,d,e,g){return(b=c[["symbol","currency","displayName"][e.length-1]]||c.currency||"")?d+b+g:""});else if(-1!=e.indexOf("E"))throw Error("exponential notation not supported");var k=h._numberPatternRE,f=f.match(k);if(!f)throw Error("unable to find a number expression in pattern: "+e);!1===c.fractional&&(c.places=0);return e.replace(k,h._formatAbsolute(g,f[0],{decimal:d,group:b,places:c.places,round:c.round}))};
h.round=function(g,e,c){c=10/(c||10);return(c*+g).toFixed(e)/c};if(0==(.9).toFixed()){var q=h.round;h.round=function(g,e,c){var b=Math.pow(10,-e||0),d=Math.abs(g);if(!g||d>=b)b=0;else if(d/=b,.5>d||.95<=d)b=0;return q(g,e,c)+(0<g?b:-b)}}h._formatAbsolute=function(g,e,c){c=c||{};!0===c.places&&(c.places=0);Infinity===c.places&&(c.places=6);e=e.split(".");var b="string"==typeof c.places&&c.places.indexOf(","),d=c.places;b?d=c.places.substring(b+1):0<=d||(d=(e[1]||[]).length);0>c.round||(g=h.round(g,
d,c.round));g=String(Math.abs(g)).split(".");var f=g[1]||"";e[1]||c.places?(b&&(c.places=c.places.substring(0,b)),b=void 0!==c.places?c.places:e[1]&&e[1].lastIndexOf("0")+1,b>f.length&&(g[1]=l.pad(f,b,"0",!0)),d<f.length&&(g[1]=f.substr(0,d))):g[1]&&g.pop();d=e[0].replace(",","");b=d.indexOf("0");-1!=b&&(b=d.length-b,b>g[0].length&&(g[0]=l.pad(g[0],b)),-1==d.indexOf("#")&&(g[0]=g[0].substr(g[0].length-b)));var d=e[0].lastIndexOf(","),k,u;-1!=d&&(k=e[0].length-d-1,e=e[0].substr(0,d),d=e.lastIndexOf(","),
-1!=d&&(u=e.length-d-1));e=[];for(d=g[0];d;)b=d.length-k,e.push(0<b?d.substr(b):d),d=0<b?d.slice(0,b):"",u&&(k=u,u=void 0);g[0]=e.reverse().join(c.group||",");return g.join(c.decimal||".")};h.regexp=function(g){return h._parseInfo(g).regexp};h._parseInfo=function(g){g=g||{};var e=p.normalizeLocale(g.locale),e=p.getLocalization("dojo.cldr","number",e),c=g.pattern||e[(g.type||"decimal")+"Format"],b=e.group,d=e.decimal,f=1;if(-1!=c.indexOf("%"))f/=100;else if(-1!=c.indexOf("\u2030"))f/=1E3;else{var q=
-1!=c.indexOf("\u00a4");q&&(b=e.currencyGroup||b,d=e.currencyDecimal||d)}e=c.split(";");1==e.length&&e.push("-"+e[0]);e=k.buildGroupRE(e,function(c){c="(?:"+k.escapeString(c,".")+")";return c.replace(h._numberPatternRE,function(c){var e={signed:!1,separator:g.strict?b:[b,""],fractional:g.fractional,decimal:d,exponent:!1};c=c.split(".");var r=g.places;1==c.length&&1!=f&&(c[1]="###");1==c.length||0===r?e.fractional=!1:(void 0===r&&(r=g.pattern?c[1].lastIndexOf("0")+1:Infinity),r&&void 0==g.fractional&&
(e.fractional=!0),!g.places&&r<c[1].length&&(r+=","+c[1].length),e.places=r);c=c[0].split(",");1<c.length&&(e.groupSize=c.pop().length,1<c.length&&(e.groupSize2=c.pop().length));return"("+h._realNumberRegexp(e)+")"})},!0);q&&(e=e.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(b,c,d,e){b=k.escapeString(g[["symbol","currency","displayName"][d.length-1]]||g.currency||"");if(!b)return"";c=c?"[\\s\\xa0]":"";e=e?"[\\s\\xa0]":"";return g.strict?c+b+e:(c&&(c+="*"),e&&(e+="*"),"(?:"+c+b+e+")?")}));
return{regexp:e.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:b,decimal:d,factor:f}};h.parse=function(g,e){e=h._parseInfo(e);g=(new RegExp("^"+e.regexp+"$")).exec(g);if(!g)return NaN;var c=g[1];if(!g[1]){if(!g[2])return NaN;c=g[2];e.factor*=-1}c=c.replace(new RegExp("["+e.group+"\\s\\xa0]","g"),"").replace(e.decimal,".");return c*e.factor};h._realNumberRegexp=function(g){g=g||{};"places"in g||(g.places=Infinity);"string"!=typeof g.decimal&&(g.decimal=".");"fractional"in g&&!/^0/.test(g.places)||(g.fractional=
[!0,!1]);"exponent"in g||(g.exponent=[!0,!1]);"eSigned"in g||(g.eSigned=[!0,!1]);var e=h._integerRegexp(g),c=k.buildGroupRE(g.fractional,function(b){var c="";b&&0!==g.places&&(c="\\"+g.decimal,c=Infinity==g.places?"(?:"+c+"\\d+)?":c+("\\d{"+g.places+"}"));return c},!0),b=k.buildGroupRE(g.exponent,function(b){return b?"([eE]"+h._integerRegexp({signed:g.eSigned})+")":""}),e=e+c;c&&(e="(?:(?:"+e+")|(?:"+c+"))");return e+b};h._integerRegexp=function(g){g=g||{};"signed"in g||(g.signed=[!0,!1]);"separator"in
g?"groupSize"in g||(g.groupSize=3):g.separator="";var e=k.buildGroupRE(g.signed,function(b){return b?"[-+]":""},!0),c=k.buildGroupRE(g.separator,function(b){if(!b)return"(?:\\d+)";b=k.escapeString(b);" "==b?b="\\s":"\u00a0"==b&&(b="\\s\\xa0");var c=g.groupSize,e=g.groupSize2;return e?(b="(?:0|[1-9]\\d{0,"+(e-1)+"}(?:["+b+"]\\d{"+e+"})*["+b+"]\\d{"+c+"})",0<c-e?"(?:"+b+"|(?:0|[1-9]\\d{0,"+(c-1)+"}))":b):"(?:0|[1-9]\\d{0,"+(c-1)+"}(?:["+b+"]\\d{"+c+"})*)"},!0);return e+c};return h})},"dojo/i18n":function(){define("dojo/i18n",
"./_base/kernel require ./has ./_base/array ./_base/config ./_base/lang ./_base/xhr ./json module".split(" "),function(m,p,f,l,k,h,q,g,e){f.add("dojo-preload-i18n-Api",1);var c=m.i18n={},b=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,d=function(b,c,d,e){var g=[d+e];c=c.split("-");for(var f="",h=0;h<c.length;h++)if(f+=(f?"-":"")+c[h],!b||b[f])g.push(d+f+"/"+e),g.specificity=f;return g},r={},v=function(b,c,d){d=d?d.toLowerCase():m.locale;b=b.replace(/\./g,"/");c=c.replace(/\./g,"/");return/root/i.test(d)?
b+"/nls/"+c:b+"/nls/"+d+"/"+c},u=m.getL10nName=function(b,c,d){return b=e.id+"!"+v(b,c,d)},t=function(b,c,e,g,f,t){b([c],function(k){var u=h.clone(k.root||k.ROOT),q=d(!k._v1x&&k,f,e,g);b(q,function(){for(var b=1;b<q.length;b++)u=h.mixin(h.clone(u),arguments[b]);r[c+"/"+f]=u;u.$locale=q.specificity;t()})})},x=function(b){var c=k.extraLocale||[],c=h.isArray(c)?c:[c];c.push(b);return c},w=function(c,d,e){var k=b.exec(c),u=k[1]+"/",q=k[5]||k[4],v=u+q,w=(k=k[5]&&k[4])||m.locale||"",y=v+"/"+w,k=k?[w]:x(w),
p=k.length,G=function(){--p||e(h.delegate(r[y]))},w=c.split("*"),E="preload"==w[1];if(f("dojo-preload-i18n-Api")){if(E&&(r[c]||(r[c]=1,A(w[2],g.parse(w[3]),1,d)),e(1)),(w=E)||(z&&B.push([c,d,e]),w=z&&!r[y]),w)return}else if(E){e(1);return}l.forEach(k,function(b){var c=v+"/"+b;f("dojo-preload-i18n-Api")&&C(c);r[c]?G():t(d,v,u,q,b,G)})};f("dojo-preload-i18n-Api");var y=c.normalizeLocale=function(b){b=b?b.toLowerCase():m.locale;return"root"==b?"ROOT":b},z=0,B=[],A=c._preloadLocalizations=function(b,
c,d,e){function g(b,c){e.isXdUrl(p.toUrl(b+".js"))||d?e([b],c):D([b],c,e)}function f(b,c){for(b=b.split("-");b.length;){if(c(b.join("-")))return;b.pop()}c("ROOT")}function t(){for(--z;!z&&B.length;)w.apply(null,B.shift())}function k(d){d=y(d);f(d,function(k){if(0<=l.indexOf(c,k)){var u=b.replace(/\./g,"/")+"_"+k;z++;g(u,function(b){for(var c in b){var g=b[c],u=c.match(/(.+)\/([^\/]+)$/),q;if(u&&(q=u[2],u=u[1]+"/",g._localized)){var v;if("ROOT"===k){var l=v=g._localized;delete g._localized;l.root=
g;r[p.toAbsMid(c)]=l}else v=g._localized,r[p.toAbsMid(u+q+"/"+k)]=g;k!==d&&function(b,c,g,k){var u=[],q=[];f(d,function(d){k[d]&&(u.push(p.toAbsMid(b+d+"/"+c)),q.push(p.toAbsMid(b+c+"/"+d)))});u.length?(z++,e(u,function(){for(var e=u.length-1;0<=e;e--)g=h.mixin(h.clone(g),arguments[e]),r[q[e]]=g;r[p.toAbsMid(b+c+"/"+d)]=h.clone(g);t()})):r[p.toAbsMid(b+c+"/"+d)]=g}(u,q,g,v)}}t()});return!0}return!1})}e=e||p;k();l.forEach(m.config.extraLocale,k)},C=function(){},F={},E={},H,D=function(b,c,d){var e=
[];l.forEach(b,function(b){function c(c){H||(H=new Function("__bundle","__checkForLegacyModules","__mid","__amdValue","var define \x3d function(mid, factory){define.called \x3d 1; __amdValue.result \x3d factory || mid;},\t   require \x3d function(){define.called \x3d 1;};try{define.called \x3d 0;eval(__bundle);if(define.called\x3d\x3d1)return __amdValue;if((__checkForLegacyModules \x3d __checkForLegacyModules(__mid)))return __checkForLegacyModules;}catch(e){}try{return eval('('+__bundle+')');}catch(e){return e;}"));
c=H(c,C,b,F);c===F?e.push(r[g]=F.result):(c instanceof Error&&(c={}),e.push(r[g]=/nls\/[^\/]+\/[^\/]+$/.test(g)?c:{root:c,_v1x:1}))}var g=d.toUrl(b+".js");if(r[g])e.push(r[g]);else{var f=d.syncLoadNls(b);f||(f=C(b.replace(/nls\/([^\/]*)\/([^\/]*)$/,"nls/$2/$1")));if(f)e.push(f);else if(q)q.get({url:g,sync:!0,load:c,error:function(){e.push(r[g]={})}});else try{d.getText(g,!0,c)}catch(K){e.push(r[g]={})}}});c&&c.apply(null,e)},C=function(b){for(var c,d=b.split("/"),e=m.global[d[0]],g=1;e&&g<d.length-
1;e=e[d[g++]]);e&&((c=e[d[g]])||(c=e[d[g].replace(/-/g,"_")]),c&&(r[b]=c));return c};c.getLocalization=function(b,c,d){var e,g=v(b,c,d);if(E[g])return E[g];w(g,p.isXdUrl(p.toUrl(g+".js"))?p:function(b,c){D(b,c,p)},function(b){e=E[g]=b});return e};return h.mixin(c,{dynamic:!0,normalize:function(b,c){return/^\./.test(b)?c(b):b},load:w,cache:r,getL10nName:u})})},"dojo/string":function(){define("dojo/string",["./_base/kernel","./_base/lang"],function(m,p){var f=/[&<>'"\/]/g,l={"\x26":"\x26amp;","\x3c":"\x26lt;",
"\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;","/":"\x26#x2F;"},k={};p.setObject("dojo.string",k);k.escape=function(h){return h?h.replace(f,function(f){return l[f]}):""};k.rep=function(f,k){if(0>=k||!f)return"";for(var g=[];;){k&1&&g.push(f);if(!(k>>=1))break;f+=f}return g.join("")};k.pad=function(f,q,g,e){g||(g="0");f=String(f);q=k.rep(g,Math.ceil((q-f.length)/g.length));return e?f+q:q+f};k.substitute=function(f,k,g,e){e=e||m.global;g=g?p.hitch(e,g):function(c){return c};return f.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,
function(c,b,d){if(""==b)return"$";c=p.getObject(b,!1,k);d&&(c=p.getObject(d,!1,e).call(e,c,b));d=g(c,b);if("undefined"===typeof d)throw Error('string.substitute could not find key "'+b+'" in template');return d.toString()})};k.trim=String.prototype.trim?p.trim:function(f){f=f.replace(/^\s+/,"");for(var h=f.length-1;0<=h;h--)if(/\S/.test(f.charAt(h))){f=f.substring(0,h+1);break}return f};return k})},"dojo/regexp":function(){define("dojo/regexp",["./_base/kernel","./_base/lang"],function(m,p){var f=
{};p.setObject("dojo.regexp",f);f.escapeString=function(f,k){return f.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,function(f){return k&&-1!=k.indexOf(f)?f:"\\"+f})};f.buildGroupRE=function(l,k,h){if(!(l instanceof Array))return k(l);for(var q=[],g=0;g<l.length;g++)q.push(k(l[g]));return f.group(q.join("|"),h)};f.group=function(f,k){return"("+(k?"?:":"")+f+")"};return f})},"dojo/text":function(){define("dojo/text",["./_base/kernel","require","./has","./request"],function(m,p,f,l){var k;k=function(c,b,
d){l(c,{sync:!!b,headers:{"X-Requested-With":null}}).then(d)};var h={},q=function(c){if(c){c=c.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var b=c.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);b&&(c=b[1])}else c="";return c},g={},e={};m.cache=function(c,b,d){var e;"string"==typeof c?/\//.test(c)?(e=c,d=b):e=p.toUrl(c.replace(/\./g,"/")+(b?"/"+b:"")):(e=c+"",d=b);c=void 0!=d&&"string"!=typeof d?d.value:d;d=d&&d.sanitize;if("string"==typeof c)return h[e]=c,d?q(c):c;if(null===
c)return delete h[e],null;e in h||k(e,!0,function(b){h[e]=b});return d?q(h[e]):h[e]};return{dynamic:!0,normalize:function(c,b){c=c.split("!");var d=c[0];return(/^\./.test(d)?b(d):d)+(c[1]?"!"+c[1]:"")},load:function(c,b,d){c=c.split("!");var f=1<c.length,v=c[0],u=b.toUrl(c[0]);c="url:"+u;var t=g,l=function(b){d(f?q(b):b)};v in h?t=h[v]:b.cache&&c in b.cache?t=b.cache[c]:u in h&&(t=h[u]);if(t===g)if(e[u])e[u].push(l);else{var m=e[u]=[l];k(u,!b.async,function(b){h[v]=h[u]=b;for(var c=0;c<m.length;)m[c++](b);
delete e[u]})}else l(t)}}})},"dojo/request":function(){define("dojo/request",["./request/default!"],function(m){return m})},"dojo/request/default":function(){define("dojo/request/default",["exports","require","../has"],function(m,p,f){var l=f("config-requestProvider");l||(l="./xhr");m.getPlatformDefaultId=function(){return"./xhr"};m.load=function(f,h,q,g){p(["platform"==f?"./xhr":l],function(e){q(e)})}})},"dijit/form/ToggleButton":function(){define("dijit/form/ToggleButton",["dojo/_base/declare",
"dojo/_base/kernel","./Button","./_ToggleButtonMixin"],function(m,p,f,l){return m("dijit.form.ToggleButton",[f,l],{baseClass:"dijitToggleButton",setChecked:function(f){p.deprecated("setChecked("+f+") is deprecated. Use set('checked',"+f+") instead.","","2.0");this.set("checked",f)}})})},"dijit/form/Button":function(){require({cache:{"url:dijit/form/templates/Button.html":'\x3cspan class\x3d"dijit dijitReset dijitInline" role\x3d"presentation"\r\n\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonNode"\r\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" role\x3d"presentation"\r\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode,focusNode"\r\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitToggleButtonIconChar"\x3e\x26#x25CF;\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tid\x3d"${id}_label"\r\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\x3e\x3c/span\r\n\t\x3e\x3c/span\r\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen"\r\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick"\r\n\t\ttabIndex\x3d"-1" aria-hidden\x3d"true" data-dojo-attach-point\x3d"valueNode"\r\n/\x3e\x3c/span\x3e\r\n'}});
define("dijit/form/Button","require dojo/_base/declare dojo/dom-class dojo/has dojo/_base/kernel dojo/_base/lang dojo/ready ./_FormWidget ./_ButtonMixin dojo/text!./templates/Button.html ../a11yclick".split(" "),function(m,p,f,l,k,h,q,g,e,c){l("dijit-legacy-requires")&&q(0,function(){m(["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"])});q=p("dijit.form.Button"+(l("dojo-bidi")?"_NoBidi":""),[g,e],{showLabel:!0,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",
type:"class"},baseClass:"dijitButton",templateString:c,_setValueAttr:"valueNode",_setNameAttr:function(b){this.valueNode&&this.valueNode.setAttribute("name",b)},postCreate:function(){this.inherited(arguments);this._setLabelFromContainer()},_setLabelFromContainer:function(){this.containerNode&&!this.label&&(this.label=h.trim(this.containerNode.innerHTML),this.onLabelSet())},_setShowLabelAttr:function(b){this.containerNode&&f.toggle(this.containerNode,"dijitDisplayNone",!b);this._set("showLabel",b)},
setLabel:function(b){k.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",b)},onLabelSet:function(){this.inherited(arguments);this.showLabel||"title"in this.params||(this.titleNode.title=h.trim(this.containerNode.innerText||this.containerNode.textContent||""))}});l("dojo-bidi")&&(q=p("dijit.form.Button",q,{onLabelSet:function(){this.inherited(arguments);this.titleNode.title&&this.applyTextDir(this.titleNode,this.titleNode.title)},_setTextDirAttr:function(b){this._created&&
this.textDir!=b&&(this._set("textDir",b),this._setLabelAttr(this.label))}}));return q})},"dijit/form/_FormWidget":function(){define("dijit/form/_FormWidget","dojo/_base/declare dojo/sniff dojo/_base/kernel dojo/ready ../_Widget ../_CssStateMixin ../_TemplatedMixin ./_FormWidgetMixin".split(" "),function(m,p,f,l,k,h,q,g){p("dijit-legacy-requires")&&l(0,function(){require(["dijit/form/_FormValueWidget"])});return m("dijit.form._FormWidget",[k,q,h,g],{setDisabled:function(e){f.deprecated("setDisabled("+
e+") is deprecated. Use set('disabled',"+e+") instead.","","2.0");this.set("disabled",e)},setValue:function(e){f.deprecated("dijit.form._FormWidget:setValue("+e+") is deprecated.  Use set('value',"+e+") instead.","","2.0");this.set("value",e)},getValue:function(){f.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},postMixInProperties:function(){this.nameAttrSetting=this.name&&!p("msapp")?'name\x3d"'+this.name.replace(/"/g,"\x26quot;")+
'"':"";this.inherited(arguments)}})})},"dijit/_Widget":function(){define("dijit/_Widget","dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/has dojo/_base/kernel dojo/_base/lang dojo/query dojo/ready ./registry ./_WidgetBase ./_OnDijitClickMixin ./_FocusMixin dojo/uacss ./hccss".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d,r){function v(){}function u(b){return function(c,d,e,g){return c&&"string"==typeof d&&c[d]==v?c.on(d.substring(2).toLowerCase(),q.hitch(e,g)):b.apply(f,arguments)}}
m.around(f,"connect",u);h.connect&&m.around(h,"connect",u);m=l("dijit._Widget",[b,d,r],{onClick:v,onDblClick:v,onKeyDown:v,onKeyPress:v,onKeyUp:v,onMouseDown:v,onMouseMove:v,onMouseOut:v,onMouseOver:v,onMouseLeave:v,onMouseEnter:v,onMouseUp:v,constructor:function(b){this._toConnect={};for(var c in b)this[c]===v&&(this._toConnect[c.replace(/^on/,"").toLowerCase()]=b[c],delete b[c])},postCreate:function(){this.inherited(arguments);for(var b in this._toConnect)this.on(b,this._toConnect[b]);delete this._toConnect},
on:function(b,c){return this[this._onMap(b)]===v?f.connect(this.domNode,b.toLowerCase(),this,c):this.inherited(arguments)},_setFocusedAttr:function(b){this._focused=b;this._set("focused",b)},setAttribute:function(b,c){h.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(b,c)},attr:function(b,c){return 2<=arguments.length||"object"===typeof b?this.set.apply(this,arguments):this.get(b)},getDescendants:function(){h.deprecated(this.declaredClass+
"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?g("[widgetId]",this.containerNode).map(c.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});k("dijit-legacy-requires")&&e(0,function(){require(["dijit/_base"])});return m})},"dijit/registry":function(){define("dijit/registry",["dojo/_base/array","dojo/_base/window","./main"],function(m,p,f){var l={},k={},h={length:0,add:function(f){if(k[f.id])throw Error("Tried to register widget with id\x3d\x3d"+
f.id+" but that id is already registered");k[f.id]=f;this.length++},remove:function(f){k[f]&&(delete k[f],this.length--)},byId:function(f){return"string"==typeof f?k[f]:f},byNode:function(f){return k[f.getAttribute("widgetId")]},toArray:function(){var f=[],g;for(g in k)f.push(k[g]);return f},getUniqueId:function(h){var g;do g=h+"_"+(h in l?++l[h]:l[h]=0);while(k[g]);return"dijit"==f._scopeName?g:f._scopeName+"_"+g},findWidgets:function(f,g){function e(b){for(b=b.firstChild;b;b=b.nextSibling)if(1==
b.nodeType){var d=b.getAttribute("widgetId");d?(d=k[d])&&c.push(d):b!==g&&e(b)}}var c=[];e(f);return c},_destroyAll:function(){f._curFocus=null;f._prevFocus=null;f._activeStack=[];m.forEach(h.findWidgets(p.body()),function(f){f._destroyed||(f.destroyRecursive?f.destroyRecursive():f.destroy&&f.destroy())})},getEnclosingWidget:function(f){for(;f;){var g=1==f.nodeType&&f.getAttribute("widgetId");if(g)return k[g];f=f.parentNode}return null},_hash:k};return f.registry=h})},"dijit/main":function(){define("dijit/main",
["dojo/_base/kernel"],function(m){return m.dijit})},"dijit/_WidgetBase":function(){define("dijit/_WidgetBase","require dojo/_base/array dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/_base/kernel dojo/_base/lang dojo/on dojo/ready dojo/Stateful dojo/topic dojo/_base/window ./Destroyable dojo/has!dojo-bidi?./_BidiMixin ./registry".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d,
r,v,u,t,x,w,y,z,B,A,C){function F(b){return function(c){g[c?"set":"remove"](this.domNode,b,c);this._set(b,c)}}r.add("dijit-legacy-requires",!v.isAsync);r.add("dojo-bidi",!1);r("dijit-legacy-requires")&&x(0,function(){m(["dijit/_base/manager"])});var E={};l=h("dijit._WidgetBase",[w,B],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:F("lang"),dir:"",_setDirAttr:F("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},_setTypeAttr:null,style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,
domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(b){this._set("ownerDocument",b)},attributeMap:{},_blankGif:l.blankGif||m.toUrl("dojo/resources/blank.gif"),textDir:"",_introspect:function(){var b=this.constructor;if(!b._setterAttrs){var c=b.prototype,d=b._setterAttrs=[],b=b._onMap={},e;for(e in c.attributeMap)d.push(e);for(e in c)/^on/.test(e)&&(b[e.substring(2).toLowerCase()]=e),/^_set[A-Z](.*)Attr$/.test(e)&&(e=e.charAt(4).toLowerCase()+e.substr(5,e.length-9),c.attributeMap&&
e in c.attributeMap||d.push(e))}},postscript:function(b,c){this.create(b,c)},create:function(b,c){this._introspect();this.srcNodeRef=q.byId(c);this._connects=[];this._supportingWidgets=[];this.srcNodeRef&&this.srcNodeRef.id&&"string"==typeof this.srcNodeRef.id&&(this.id=this.srcNodeRef.id);b&&(this.params=b,u.mixin(this,b));this.postMixInProperties();this.id||(this.id=C.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id);this.ownerDocument=this.ownerDocument||(this.srcNodeRef?
this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=z.body(this.ownerDocument);C.add(this);this.buildRendering();var d;this.domNode&&(this._applyAttributes(),(b=this.srcNodeRef)&&b.parentNode&&this.domNode!==b&&(b.parentNode.replaceChild(this.domNode,b),d=!0),this.domNode.setAttribute("widgetId",this.id));this.postCreate();d&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var b={},c;for(c in this.params||{})b[c]=this._get(c);p.forEach(this.constructor._setterAttrs,
function(c){if(!(c in b)){var d=this._get(c);d&&this.set(c,d)}},this);for(c in b)this.set(c,b[c])},postMixInProperties:function(){},buildRendering:function(){this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div"));if(this.baseClass){var b=this.baseClass.split(" ");this.isLeftToRight()||(b=b.concat(p.map(b,function(b){return b+"Rtl"})));e.add(this.domNode,b)}},postCreate:function(){},startup:function(){this._started||(this._started=!0,p.forEach(this.getChildren(),function(b){b._started||
b._destroyed||!u.isFunction(b.startup)||(b.startup(),b._started=!0)}))},destroyRecursive:function(b){this._beingDestroyed=!0;this.destroyDescendants(b);this.destroy(b)},destroy:function(b){function c(c){c.destroyRecursive?c.destroyRecursive(b):c.destroy&&c.destroy(b)}this._beingDestroyed=!0;this.uninitialize();p.forEach(this._connects,u.hitch(this,"disconnect"));p.forEach(this._supportingWidgets,c);this.domNode&&p.forEach(C.findWidgets(this.domNode,this.containerNode),c);this.destroyRendering(b);
C.remove(this.id);this._destroyed=!0},destroyRendering:function(b){this.bgIframe&&(this.bgIframe.destroy(b),delete this.bgIframe);this.domNode&&(b?g.remove(this.domNode,"widgetId"):c.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(b||c.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(b){p.forEach(this.getChildren(),function(c){c.destroyRecursive&&c.destroyRecursive(b)})},uninitialize:function(){return!1},_setStyleAttr:function(b){var c=this.domNode;u.isObject(b)?
d.set(c,b):c.style.cssText=c.style.cssText?c.style.cssText+("; "+b):b;this._set("style",b)},_attrToDom:function(b,c,d){d=3<=arguments.length?d:this.attributeMap[b];p.forEach(u.isArray(d)?d:[d],function(d){var f=this[d.node||d||"domNode"];switch(d.type||"attribute"){case "attribute":u.isFunction(c)&&(c=u.hitch(this,c));d=d.attribute?d.attribute:/^on[A-Z][a-zA-Z]*$/.test(b)?b.toLowerCase():b;f.tagName?g.set(f,d,c):f.set(d,c);break;case "innerText":f.innerHTML="";f.appendChild(this.ownerDocument.createTextNode(c));
break;case "textContent":f.textContent=c;break;case "innerHTML":f.innerHTML=c;break;case "class":e.replace(f,c,this[b]);break;case "toggleClass":e.toggle(f,d.className||b,c)}},this)},get:function(b){var c=this._getAttrNames(b);return this[c.g]?this[c.g]():this._get(b)},set:function(b,c){if("object"===typeof b){for(var d in b)this.set(d,b[d]);return this}d=this._getAttrNames(b);var e=this[d.s];if(u.isFunction(e))var g=e.apply(this,Array.prototype.slice.call(arguments,1));else{var e=this.focusNode&&
!u.isFunction(this.focusNode)?"focusNode":"domNode",f=this[e]&&this[e].tagName,h;if((h=f)&&!(h=E[f])){h=this[e];var r={},k;for(k in h)r[k.toLowerCase()]=!0;h=E[f]=r}k=h;d=b in this.attributeMap?this.attributeMap[b]:d.s in this?this[d.s]:k&&d.l in k&&"function"!=typeof c||/^aria-|^data-|^role$/.test(b)?e:null;null!=d&&this._attrToDom(b,c,d);this._set(b,c)}return g||this},_attrPairNames:{},_getAttrNames:function(b){var c=this._attrPairNames;if(c[b])return c[b];var d=b.replace(/^[a-z]|-[a-zA-Z]/g,function(b){return b.charAt(b.length-
1).toUpperCase()});return c[b]={n:b+"Node",s:"_set"+d+"Attr",g:"_get"+d+"Attr",l:d.toLowerCase()}},_set:function(b,c){var d=this[b];this[b]=c;!this._created||d===c||d!==d&&c!==c||(this._watchCallbacks&&this._watchCallbacks(b,d,c),this.emit("attrmodified-"+b,{detail:{prevValue:d,newValue:c}}))},_get:function(b){return this[b]},emit:function(b,c,d){c=c||{};void 0===c.bubbles&&(c.bubbles=!0);void 0===c.cancelable&&(c.cancelable=!0);c.detail||(c.detail={});c.detail.widget=this;var e,g=this["on"+b];g&&
(e=g.apply(this,d?d:[c]));this._started&&!this._beingDestroyed&&t.emit(this.domNode,b.toLowerCase(),c);return e},on:function(b,c){var d=this._onMap(b);return d?f.after(this,d,c,!0):this.own(t(this.domNode,b,c))[0]},_onMap:function(b){var c=this.constructor,d=c._onMap;if(!d){var d=c._onMap={},e;for(e in c.prototype)/^on/.test(e)&&(d[e.replace(/^on/,"").toLowerCase()]=e)}return d["string"==typeof b&&b.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},
getChildren:function(){return this.containerNode?C.findWidgets(this.containerNode):[]},getParent:function(){return C.getEnclosingWidget(this.domNode.parentNode)},connect:function(b,c,d){return this.own(k.connect(b,c,this,d))[0]},disconnect:function(b){b.remove()},subscribe:function(b,c){return this.own(y.subscribe(b,u.hitch(this,c)))[0]},unsubscribe:function(b){b.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir.toLowerCase():b.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&
"none"!=d.get(this.domNode,"display")},placeAt:function(b,d){var e=!b.tagName&&C.byId(b);!e||!e.addChild||d&&"number"!==typeof d?(b=e&&"domNode"in e?e.containerNode&&!/after|before|replace/.test(d||"")?e.containerNode:e.domNode:q.byId(b,this.ownerDocument),c.place(this.domNode,b,d),!this._started&&(this.getParent()||{})._started&&this.startup()):e.addChild(this,d);return this},defer:function(b,c){var d=setTimeout(u.hitch(this,function(){d&&(d=null,this._destroyed||u.hitch(this,b)())}),c||0);return{remove:function(){d&&
(clearTimeout(d),d=null);return null}}}});r("dojo-bidi")&&l.extend(A);return l})},"dojo/Stateful":function(){define("dojo/Stateful",["./_base/declare","./_base/lang","./_base/array","./when"],function(m,p,f,l){return m("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(f){var h=this._attrPairNames;return h[f]?h[f]:h[f]={s:"_"+f+"Setter",g:"_"+f+"Getter"}},postscript:function(f){f&&this.set(f)},_get:function(f,h){return"function"===typeof this[h.g]?this[h.g]():this[f]},get:function(f){return this._get(f,
this._getAttrNames(f))},set:function(f,h){if("object"===typeof f){for(var k in f)f.hasOwnProperty(k)&&"_watchCallbacks"!=k&&this.set(k,f[k]);return this}k=this._getAttrNames(f);var g=this._get(f,k);k=this[k.s];var e;"function"===typeof k?e=k.apply(this,Array.prototype.slice.call(arguments,1)):this[f]=h;if(this._watchCallbacks){var c=this;l(e,function(){c._watchCallbacks(f,g,h)})}return this},_changeAttrValue:function(f,h){var k=this.get(f);this[f]=h;this._watchCallbacks&&this._watchCallbacks(f,k,
h);return this},watch:function(k,h){var q=this._watchCallbacks;if(!q)var g=this,q=this._watchCallbacks=function(c,b,d,e){var f=function(e){if(e){e=e.slice();for(var f=0,h=e.length;f<h;f++)e[f].call(g,c,b,d)}};f(q["_"+c]);e||f(q["*"])};h||"function"!==typeof k?k="_"+k:(h=k,k="*");var e=q[k];"object"!==typeof e&&(e=q[k]=[]);e.push(h);k={};k.unwatch=k.remove=function(){var c=f.indexOf(e,h);-1<c&&e.splice(c,1)};return k}})})},"dijit/Destroyable":function(){define("dijit/Destroyable",["dojo/_base/array",
"dojo/aspect","dojo/_base/declare"],function(m,p,f){return f("dijit.Destroyable",null,{destroy:function(f){this._destroyed=!0},own:function(){var f=["destroyRecursive","destroy","remove"];m.forEach(arguments,function(k){function h(){g.remove();m.forEach(e,function(c){c.remove()})}var q,g=p.before(this,"destroy",function(c){k[q](c)}),e=[];k.then?(q="cancel",k.then(h,h)):m.forEach(f,function(c){"function"===typeof k[c]&&(q||(q=c),e.push(p.after(k,c,h,!0)))})},this);return arguments}})})},"dijit/_OnDijitClickMixin":function(){define("dijit/_OnDijitClickMixin",
"dojo/on dojo/_base/array dojo/keys dojo/_base/declare dojo/has ./a11yclick".split(" "),function(m,p,f,l,k,h){m=l("dijit._OnDijitClickMixin",null,{connect:function(f,g,e){return this.inherited(arguments,[f,"ondijitclick"==g?h:g,e])}});m.a11yclick=h;return m})},"dijit/a11yclick":function(){define("dijit/a11yclick",["dojo/keys","dojo/mouse","dojo/on","dojo/touch"],function(m,p,f,l){function k(g){if((g.keyCode===m.ENTER||g.keyCode===m.SPACE)&&!/input|button|textarea/i.test(g.target.nodeName))for(g=g.target;g;g=
g.parentNode)if(g.dojoClick)return!0}var h;f(document,"keydown",function(g){k(g)?(h=g.target,g.preventDefault()):h=null});f(document,"keyup",function(g){k(g)&&g.target==h&&(h=null,f.emit(g.target,"click",{cancelable:!0,bubbles:!0,ctrlKey:g.ctrlKey,shiftKey:g.shiftKey,metaKey:g.metaKey,altKey:g.altKey,_origType:g.type}))});var q=function(g,e){g.dojoClick=!0;return f(g,"click",e)};q.click=q;q.press=function(g,e){var c=f(g,l.press,function(b){("mousedown"!=b.type||p.isLeft(b))&&e(b)}),b=f(g,"keydown",
function(b){b.keyCode!==m.ENTER&&b.keyCode!==m.SPACE||e(b)});return{remove:function(){c.remove();b.remove()}}};q.release=function(g,e){var c=f(g,l.release,function(b){("mouseup"!=b.type||p.isLeft(b))&&e(b)}),b=f(g,"keyup",function(b){b.keyCode!==m.ENTER&&b.keyCode!==m.SPACE||e(b)});return{remove:function(){c.remove();b.remove()}}};q.move=l.move;return q})},"dojo/touch":function(){define("dojo/touch","./_base/kernel ./aspect ./dom ./dom-class ./_base/lang ./on ./has ./mouse ./domReady ./_base/window".split(" "),
function(m,p,f,l,k,h,q,g,e,c){function b(b,c,d){return u&&d?function(b,c){return h(b,d,c)}:x?function(d,e){var g=h(d,c,function(b){e.call(this,b);D=(new Date).getTime()}),f=h(d,b,function(b){(!D||(new Date).getTime()>D+1E3)&&e.call(this,b)});return{remove:function(){g.remove();f.remove()}}}:function(c,d){return h(c,b,d)}}function d(b){do if(void 0!==b.dojoClick)return b;while(b=b.parentNode)}function r(b,e,r){if(!g.isRight(b)){var k=d(b.target);if(y=!b.target.disabled&&k&&k.dojoClick)if(B=(z="useTarget"==
y)?k:b.target,z&&b.preventDefault(),A=b.changedTouches?b.changedTouches[0].pageX-c.global.pageXOffset:b.clientX,C=b.changedTouches?b.changedTouches[0].pageY-c.global.pageYOffset:b.clientY,F=("object"==typeof y?y.x:"number"==typeof y?y:0)||4,E=("object"==typeof y?y.y:"number"==typeof y?y:0)||4,!w){b=function(b){c.doc.addEventListener(b,function(c){var d=c.target;y&&!c._dojo_click&&(new Date).getTime()<=H+1E3&&("INPUT"!=d.tagName||!l.contains(d,"dijitOffScreen"))&&(c.stopPropagation(),c.stopImmediatePropagation&&
c.stopImmediatePropagation(),"click"==b&&("INPUT"!=d.tagName||"radio"==d.type&&(l.contains(d,"dijitCheckBoxInput")||l.contains(d,"mblRadioButton"))||"checkbox"==d.type&&(l.contains(d,"dijitCheckBoxInput")||l.contains(d,"mblCheckBox")))&&"TEXTAREA"!=d.tagName&&"AUDIO"!=d.tagName&&"VIDEO"!=d.tagName&&c.preventDefault())},!0)};var t=function(b){y=z?f.isDescendant(c.doc.elementFromPoint(b.changedTouches?b.changedTouches[0].pageX-c.global.pageXOffset:b.clientX,b.changedTouches?b.changedTouches[0].pageY-
c.global.pageYOffset:b.clientY),B):y&&(b.changedTouches?b.changedTouches[0].target:b.target)==B&&Math.abs((b.changedTouches?b.changedTouches[0].pageX-c.global.pageXOffset:b.clientX)-A)<=F&&Math.abs((b.changedTouches?b.changedTouches[0].pageY-c.global.pageYOffset:b.clientY)-C)<=E};w=!0;c.doc.addEventListener(e,function(b){g.isRight(b)||(t(b),z&&b.preventDefault())},!0);c.doc.addEventListener(r,function(b){if(!g.isRight(b)&&(t(b),y)){var c=function(c){var d=document.createEvent("MouseEvents");d._dojo_click=
!0;d.initMouseEvent(c,!0,!0,b.view,b.detail,e.screenX,e.screenY,e.clientX,e.clientY,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,0,null);return d};H=(new Date).getTime();var d=z?B:b.target;"LABEL"===d.tagName&&(d=f.byId(d.getAttribute("for"))||d);var e=b.changedTouches?b.changedTouches[0]:b,r=c("mousedown"),k=c("mouseup"),u=c("click");setTimeout(function(){h.emit(d,"mousedown",r);h.emit(d,"mouseup",k);h.emit(d,"click",u);H=(new Date).getTime()},0)}},!0);b("click");b("mousedown");b("mouseup")}}}var v=5>
q("ios"),u=q("pointer-events")||q("MSPointer"),t=function(){var b={},c;for(c in{down:1,move:1,up:1,cancel:1,over:1,out:1})b[c]=q("MSPointer")?"MSPointer"+c.charAt(0).toUpperCase()+c.slice(1):"pointer"+c;return b}(),x=q("touch-events"),w,y,z=!1,B,A,C,F,E,H,D,G;q("touch")&&(u?e(function(){c.doc.addEventListener(t.down,function(b){r(b,t.move,t.up)},!0)}):e(function(){function b(b){var c=k.delegate(b,{bubbles:!0});6<=q("ios")&&(c.touches=b.touches,c.altKey=b.altKey,c.changedTouches=b.changedTouches,c.ctrlKey=
b.ctrlKey,c.metaKey=b.metaKey,c.shiftKey=b.shiftKey,c.targetTouches=b.targetTouches);return c}G=c.body();c.doc.addEventListener("touchstart",function(b){D=(new Date).getTime();var c=G;G=b.target;h.emit(c,"dojotouchout",{relatedTarget:G,bubbles:!0});h.emit(G,"dojotouchover",{relatedTarget:c,bubbles:!0});r(b,"touchmove","touchend")},!0);h(c.doc,"touchmove",function(d){D=(new Date).getTime();var e=c.doc.elementFromPoint(d.pageX-(v?0:c.global.pageXOffset),d.pageY-(v?0:c.global.pageYOffset));e&&(G!==e&&
(h.emit(G,"dojotouchout",{relatedTarget:e,bubbles:!0}),h.emit(e,"dojotouchover",{relatedTarget:G,bubbles:!0}),G=e),h.emit(e,"dojotouchmove",b(d))||d.preventDefault())});h(c.doc,"touchend",function(d){D=(new Date).getTime();var e=c.doc.elementFromPoint(d.pageX-(v?0:c.global.pageXOffset),d.pageY-(v?0:c.global.pageYOffset))||c.body();h.emit(e,"dojotouchend",b(d))})}));p={press:b("mousedown","touchstart",t.down),move:b("mousemove","dojotouchmove",t.move),release:b("mouseup","dojotouchend",t.up),cancel:b(g.leave,
"touchcancel",u?t.cancel:null),over:b("mouseover","dojotouchover",t.over),out:b("mouseout","dojotouchout",t.out),enter:g._eventHandler(b("mouseover","dojotouchover",t.over)),leave:g._eventHandler(b("mouseout","dojotouchout",t.out))};return m.touch=p})},"dijit/_FocusMixin":function(){define("dijit/_FocusMixin",["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(m,p,f,l){l.extend(p,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});
return f("dijit._FocusMixin",null,{_focusManager:m})})},"dijit/focus":function(){define("dijit/focus","dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/Evented dojo/_base/lang dojo/on dojo/domReady dojo/sniff dojo/Stateful dojo/_base/window dojo/window ./a11y ./registry ./main".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x){var w,y,z=new (p([d,q],{curNode:null,activeStack:[],constructor:function(){var b=g.hitch(this,function(b){f.isDescendant(this.curNode,
b)&&this.set("curNode",null);f.isDescendant(this.prevNode,b)&&this.set("prevNode",null)});m.before(h,"empty",b);m.before(h,"destroy",b)},registerIframe:function(b){return this.registerWin(b.contentWindow,b)},registerWin:function(c,d){var g=this,f=c.document&&c.document.body;if(f){var h=b("pointer-events")?"pointerdown":b("MSPointer")?"MSPointerDown":b("touch-events")?"mousedown, touchstart":"mousedown",r=e(c.document,h,function(b){b&&b.target&&null==b.target.parentNode||g._onTouchNode(d||b.target,
"mouse")}),k=e(f,"focusin",function(b){if(b.target.tagName){var c=b.target.tagName.toLowerCase();"#document"!=c&&"body"!=c&&(u.isFocusable(b.target)?g._onFocusNode(d||b.target):g._onTouchNode(d||b.target))}}),t=e(f,"focusout",function(b){g._onBlurNode(d||b.target)});return{remove:function(){r.remove();k.remove();t.remove();f=r=k=t=null}}}},_onBlurNode:function(b){b=(new Date).getTime();b<w+100||(this._clearFocusTimer&&clearTimeout(this._clearFocusTimer),this._clearFocusTimer=setTimeout(g.hitch(this,
function(){this.set("prevNode",this.curNode);this.set("curNode",null)}),0),this._clearActiveWidgetsTimer&&clearTimeout(this._clearActiveWidgetsTimer),b<y+100||(this._clearActiveWidgetsTimer=setTimeout(g.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([])}),0)))},_onTouchNode:function(b,c){y=(new Date).getTime();this._clearActiveWidgetsTimer&&(clearTimeout(this._clearActiveWidgetsTimer),delete this._clearActiveWidgetsTimer);k.contains(b,"dijitPopup")&&(b=b.firstChild);var d=
[];try{for(;b;){var e=l.get(b,"dijitPopupParent");if(e)b=t.byId(e).domNode;else if(b.tagName&&"body"==b.tagName.toLowerCase()){if(b===r.body())break;b=v.get(b.ownerDocument).frameElement}else{var g=b.getAttribute&&b.getAttribute("widgetId"),f=g&&t.byId(g);!f||"mouse"==c&&f.get("disabled")||d.unshift(g);b=b.parentNode}}}catch(G){}this._setStack(d,c)},_onFocusNode:function(b){b&&9!=b.nodeType&&(w=(new Date).getTime(),this._clearFocusTimer&&(clearTimeout(this._clearFocusTimer),delete this._clearFocusTimer),
this._onTouchNode(b),b!=this.curNode&&(this.set("prevNode",this.curNode),this.set("curNode",b)))},_setStack:function(b,c){var d=this.activeStack,e=d.length-1,g=b.length-1;if(b[g]!=d[e]){this.set("activeStack",b);var f;for(f=e;0<=f&&d[f]!=b[f];f--)if(e=t.byId(d[f]))e._hasBeenBlurred=!0,e.set("focused",!1),e._focusManager==this&&e._onBlur(c),this.emit("widget-blur",e,c);for(f++;f<=g;f++)if(e=t.byId(b[f]))e.set("focused",!0),e._focusManager==this&&e._onFocus(c),this.emit("widget-focus",e,c)}},focus:function(b){if(b)try{b.focus()}catch(C){}}}));
c(function(){var c=z.registerWin(v.get(document));b("ie")&&e(window,"unload",function(){c&&(c.remove(),c=null)})});x.focus=function(b){z.focus(b)};for(var B in z)/^_/.test(B)||(x.focus[B]="function"==typeof z[B]?g.hitch(z,B):z[B]);z.watch(function(b,c,d){x.focus[b]=d});return z})},"dojo/window":function(){define("dojo/window","./_base/lang ./sniff ./_base/window ./dom ./dom-geometry ./dom-style ./dom-construct".split(" "),function(m,p,f,l,k,h,q){p.add("rtl-adjust-position-for-verticalScrollBar",function(e,
c){e=f.body(c);c=q.create("div",{style:{overflow:"scroll",overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",left:"0",top:"0",width:"64px",height:"64px"}},e,"last");var b=q.create("div",{style:{overflow:"hidden",direction:"ltr"}},c,"last"),d=0!=k.position(b).x;c.removeChild(b);e.removeChild(c);return d});p.add("position-fixed-support",function(e,c){e=f.body(c);c=q.create("span",{style:{visibility:"hidden",position:"fixed",left:"1px",top:"1px"}},e,"last");var b=q.create("span",
{style:{position:"fixed",left:"0",top:"0"}},c,"last"),d=k.position(b).x!=k.position(c).x;c.removeChild(b);e.removeChild(c);return d});var g={getBox:function(e){e=e||f.doc;var c="BackCompat"==e.compatMode?f.body(e):e.documentElement,b=k.docScroll(e);if(p("touch")){var d=g.get(e);e=d.innerWidth||c.clientWidth;c=d.innerHeight||c.clientHeight}else e=c.clientWidth,c=c.clientHeight;return{l:b.x,t:b.y,w:e,h:c}},get:function(e){if(p("ie")&&g!==document.parentWindow){e.parentWindow.execScript("document._parentWindow \x3d window;",
"Javascript");var c=e._parentWindow;e._parentWindow=null;return c}return e.parentWindow||e.defaultView},scrollIntoView:function(e,c){try{e=l.byId(e);var b=e.ownerDocument||f.doc,d=f.body(b),g=b.documentElement||d.parentNode,q=p("ie")||p("trident"),u=p("webkit");if(e!=d&&e!=g)if(!(p("mozilla")||q||u||p("opera")||p("trident")||p("edge"))&&"scrollIntoView"in e)e.scrollIntoView(!1);else{var t="BackCompat"==b.compatMode,x=Math.min(d.clientWidth||g.clientWidth,g.clientWidth||d.clientWidth),m=Math.min(d.clientHeight||
g.clientHeight,g.clientHeight||d.clientHeight),b=u||t?d:g,y=c||k.position(e),z=e.parentNode;c=function(b){return 6>=q||7==q&&t?!1:p("position-fixed-support")&&"fixed"==h.get(b,"position").toLowerCase()};var B=this,u=function(b,c,d){"BODY"==b.tagName||"HTML"==b.tagName?B.get(b.ownerDocument).scrollBy(c,d):(c&&(b.scrollLeft+=c),d&&(b.scrollTop+=d))};if(!c(e))for(;z;){z==d&&(z=b);var A=k.position(z),C=c(z),F="rtl"==h.getComputedStyle(z).direction.toLowerCase();if(z==b)A.w=x,A.h=m,b==g&&(q||p("trident"))&&
F&&(A.x+=b.offsetWidth-A.w),A.x=0,A.y=0;else{var E=k.getPadBorderExtents(z);A.w-=E.w;A.h-=E.h;A.x+=E.l;A.y+=E.t;var H=z.clientWidth,D=A.w-H;0<H&&0<D&&(F&&p("rtl-adjust-position-for-verticalScrollBar")&&(A.x+=D),A.w=H);H=z.clientHeight;D=A.h-H;0<H&&0<D&&(A.h=H)}C&&(0>A.y&&(A.h+=A.y,A.y=0),0>A.x&&(A.w+=A.x,A.x=0),A.y+A.h>m&&(A.h=m-A.y),A.x+A.w>x&&(A.w=x-A.x));var G=y.x-A.x,I=y.y-A.y,P=G+y.w-A.w,Q=I+y.h-A.h,O,N;0<P*G&&(z.scrollLeft||z==b||z.scrollWidth>z.offsetHeight)&&(O=Math[0>G?"max":"min"](G,P),
F&&(8==q&&!t||5<=p("trident"))&&(O=-O),N=z.scrollLeft,u(z,O,0),O=z.scrollLeft-N,y.x-=O);0<Q*I&&(z.scrollTop||z==b||z.scrollHeight>z.offsetHeight)&&(O=Math.ceil(Math[0>I?"max":"min"](I,Q)),N=z.scrollTop,u(z,0,O),O=z.scrollTop-N,y.y-=O);z=z!=b&&!C&&z.parentNode}}}catch(M){e.scrollIntoView(!1)}}};m.setObject("dojo.window",g);return g})},"dijit/a11y":function(){define("dijit/a11y","dojo/_base/array dojo/dom dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/sniff ./main".split(" "),function(m,p,f,l,k,
h,q){var g={_isElementShown:function(e){var c=l.get(e);return"hidden"!=c.visibility&&"collapsed"!=c.visibility&&"none"!=c.display&&"hidden"!=f.get(e,"type")},hasDefaultTabStop:function(e){switch(e.nodeName.toLowerCase()){case "a":return f.has(e,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return!0;case "iframe":var c;try{var b=e.contentDocument;if("designMode"in b&&"on"==b.designMode)return!0;c=b.body}catch(d){try{c=e.contentWindow.document.body}catch(r){return!1}}return c&&
("true"==c.contentEditable||c.firstChild&&"true"==c.firstChild.contentEditable);default:return"true"==e.contentEditable}},effectiveTabIndex:function(e){if(!f.get(e,"disabled"))return f.has(e,"tabIndex")?+f.get(e,"tabIndex"):g.hasDefaultTabStop(e)?0:void 0},isTabNavigable:function(e){return 0<=g.effectiveTabIndex(e)},isFocusable:function(e){return-1<=g.effectiveTabIndex(e)},_getTabNavigable:function(e){function c(b){return b&&"input"==b.tagName.toLowerCase()&&b.type&&"radio"==b.type.toLowerCase()&&
b.name&&b.name.toLowerCase()}function b(b){return l[c(b)]||b}var d,r,k,u,t,q,l={},m=g._isElementShown,p=g.effectiveTabIndex,B=function(b){for(b=b.firstChild;b;b=b.nextSibling)if(!(1!=b.nodeType||9>=h("ie")&&"HTML"!==b.scopeName)&&m(b)){var e=p(b);if(0<=e){if(0==e)d||(d=b),r=b;else if(0<e){if(!k||e<u)u=e,k=b;if(!t||e>=q)q=e,t=b}e=c(b);f.get(b,"checked")&&e&&(l[e]=b)}"SELECT"!=b.nodeName.toUpperCase()&&B(b)}};m(e)&&B(e);return{first:b(d),last:b(r),lowest:b(k),highest:b(t)}},getFirstInTabbingOrder:function(e,
c){e=g._getTabNavigable(p.byId(e,c));return e.lowest?e.lowest:e.first},getLastInTabbingOrder:function(e,c){e=g._getTabNavigable(p.byId(e,c));return e.last?e.last:e.highest}};k.mixin(q,g);return g})},"dojo/uacss":function(){define("dojo/uacss",["./dom-geometry","./_base/lang","./domReady","./sniff","./_base/window"],function(m,p,f,l,k){var h=k.doc.documentElement;k=l("ie");var q=l("trident"),g=l("opera"),e=Math.floor,c=l("ff"),b=m.boxModel.replace(/-/,""),g={dj_quirks:l("quirks"),dj_opera:g,dj_khtml:l("khtml"),
dj_webkit:l("webkit"),dj_safari:l("safari"),dj_chrome:l("chrome"),dj_edge:l("edge"),dj_gecko:l("mozilla"),dj_ios:l("ios"),dj_android:l("android")};k&&(g.dj_ie=!0,g["dj_ie"+e(k)]=!0,g.dj_iequirks=l("quirks"));q&&(g.dj_trident=!0,g["dj_trident"+e(q)]=!0);c&&(g["dj_ff"+e(c)]=!0);g["dj_"+b]=!0;var d="",r;for(r in g)g[r]&&(d+=r+" ");h.className=p.trim(h.className+" "+d);f(function(){if(!m.isBodyLtr()){var b="dj_rtl dijitRtl "+d.replace(/ /g,"-rtl ");h.className=p.trim(h.className+" "+b+"dj_rtl dijitRtl "+
d.replace(/ /g,"-rtl "))}});return l})},"dijit/hccss":function(){define("dijit/hccss",["dojo/dom-class","dojo/hccss","dojo/domReady","dojo/_base/window"],function(m,p,f,l){f(function(){p("highcontrast")&&m.add(l.body(),"dijit_a11y")});return p})},"dojo/hccss":function(){define("dojo/hccss","require ./_base/config ./dom-class ./dom-style ./has ./domReady ./_base/window".split(" "),function(m,p,f,l,k,h,q){k.add("highcontrast",function(){var g=q.doc.createElement("div");try{g.style.cssText='border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("'+
(p.blankGif||m.toUrl("./resources/blank.gif"))+'");';q.body().appendChild(g);var e=l.getComputedStyle(g),c=e.backgroundImage;return e.borderTopColor==e.borderRightColor||c&&("none"==c||"url(invalid-url:)"==c)}catch(b){return!1}finally{8>=k("ie")?g.outerHTML="":q.body().removeChild(g)}});h(function(){k("highcontrast")&&f.add(q.body(),"dj_a11y")});return k})},"dijit/_CssStateMixin":function(){define("dijit/_CssStateMixin","dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-class dojo/has dojo/_base/lang dojo/on dojo/domReady dojo/touch dojo/_base/window ./a11yclick ./registry".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d){p=p("dijit._CssStateMixin",[],{hovering:!1,active:!1,_applyAttributes:function(){this.inherited(arguments);m.forEach("disabled readOnly checked selected focused state hovering active _opened".split(" "),function(b){this.watch(b,h.hitch(this,"_setStateClass"))},this);for(var b in this.cssStateNodes||{})this._trackMouseState(this[b],this.cssStateNodes[b]);this._trackMouseState(this.domNode,this.baseClass);this._setStateClass()},_cssMouseEvent:function(b){if(!this.disabled)switch(b.type){case "mouseover":case "MSPointerOver":case "pointerover":this._set("hovering",
!0);this._set("active",this._mouseDown);break;case "mouseout":case "MSPointerOut":case "pointerout":this._set("hovering",!1);this._set("active",!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":this._set("active",!0);break;case "mouseup":case "dojotouchend":case "MSPointerUp":case "pointerup":case "keyup":this._set("active",!1)}},_setStateClass:function(){function b(b){c=c.concat(m.map(c,function(c){return c+b}),"dijit"+b)}var c=this.baseClass.split(" ");
this.isLeftToRight()||b("Rtl");var d="mixed"==this.checked?"Mixed":this.checked?"Checked":"";this.checked&&b(d);this.state&&b(this.state);this.selected&&b("Selected");this._opened&&b("Opened");this.disabled?b("Disabled"):this.readOnly?b("ReadOnly"):this.active?b("Active"):this.hovering&&b("Hover");this.focused&&b("Focused");var d=this.stateNode||this.domNode,e={};m.forEach(d.className.split(" "),function(b){e[b]=!0});"_stateClasses"in this&&m.forEach(this._stateClasses,function(b){delete e[b]});m.forEach(c,
function(b){e[b]=!0});var g=[],f;for(f in e)g.push(f);d.className=g.join(" ");this._stateClasses=c},_subnodeCssMouseEvent:function(b,c,d){function e(d){l.toggle(b,c+"Active",d)}if(!this.disabled&&!this.readOnly)switch(d.type){case "mouseover":case "MSPointerOver":case "pointerover":l.toggle(b,c+"Hover",!0);break;case "mouseout":case "MSPointerOut":case "pointerout":l.toggle(b,c+"Hover",!1);e(!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":e(!0);
break;case "mouseup":case "MSPointerUp":case "pointerup":case "dojotouchend":case "keyup":e(!1);break;case "focus":case "focusin":l.toggle(b,c+"Focused",!0);break;case "blur":case "focusout":l.toggle(b,c+"Focused",!1)}},_trackMouseState:function(b,c){b._cssState=c}});g(function(){function g(b,c,e){if(!e||!f.isDescendant(e,c))for(;c&&c!=e;c=c.parentNode)if(c._cssState){var g=d.getEnclosingWidget(c);g&&(c==g.domNode?g._cssMouseEvent(b):g._subnodeCssMouseEvent(c,c._cssState,b))}}var h=c.body(),k;q(h,
e.over,function(b){g(b,b.target,b.relatedTarget)});q(h,e.out,function(b){g(b,b.target,b.relatedTarget)});q(h,b.press,function(b){k=b.target;g(b,k)});q(h,b.release,function(b){g(b,k);k=null});q(h,"focusin, focusout",function(b){var c=b.target;if(c._cssState&&!c.getAttribute("widgetId")){var e=d.getEnclosingWidget(c);e&&e._subnodeCssMouseEvent(c,c._cssState,b)}})});return p})},"dijit/_TemplatedMixin":function(){define("dijit/_TemplatedMixin","dojo/cache dojo/_base/declare dojo/dom-construct dojo/_base/lang dojo/on dojo/sniff dojo/string ./_AttachMixin".split(" "),
function(m,p,f,l,k,h,q,g){var e=p("dijit._TemplatedMixin",g,{templateString:null,templatePath:null,_skipNodeCache:!1,searchContainerNode:!0,_stringRepl:function(c){var b=this.declaredClass,d=this;return q.substitute(c,this,function(c,e){"!"==e.charAt(0)&&(c=l.getObject(e.substr(1),!1,d));if("undefined"==typeof c)throw Error(b+" template:"+e);return null==c?"":"!"==e.charAt(0)?c:this._escapeValue(""+c)},this)},_escapeValue:function(c){return c.replace(/["'<>&]/g,function(b){return{"\x26":"\x26amp;",
"\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;"}[b]})},buildRendering:function(){if(!this._rendered){this.templateString||(this.templateString=m(this.templatePath,{sanitize:!0}));var c=e.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument),b;if(l.isString(c)){if(b=f.toDom(this._stringRepl(c),this.ownerDocument),1!=b.nodeType)throw Error("Invalid template: "+c);}else b=c.cloneNode(!0);this.domNode=b}this.inherited(arguments);this._rendered||this._fillContent(this.srcNodeRef);
this._rendered=!0},_fillContent:function(c){var b=this.containerNode;if(c&&b)for(;c.hasChildNodes();)b.appendChild(c.firstChild)}});e._templateCache={};e.getCachedTemplate=function(c,b,d){var g=e._templateCache,h=c,k=g[h];if(k){try{if(!k.ownerDocument||k.ownerDocument==(d||document))return k}catch(t){}f.destroy(k)}c=q.trim(c);if(b||c.match(/\$\{([^\}]+)\}/g))return g[h]=c;b=f.toDom(c,d);if(1!=b.nodeType)throw Error("Invalid template: "+c);return g[h]=b};h("ie")&&k(window,"unload",function(){var c=
e._templateCache,b;for(b in c){var d=c[b];"object"==typeof d&&f.destroy(d);delete c[b]}});return e})},"dojo/cache":function(){define("dojo/cache",["./_base/kernel","./text"],function(m){return m.cache})},"dijit/_AttachMixin":function(){define("dijit/_AttachMixin","require dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/lang dojo/mouse dojo/on dojo/touch ./_WidgetBase".split(" "),function(m,p,f,l,k,h,q,g,e){var c=k.delegate(g,{mouseenter:h.enter,mouseleave:h.leave,keypress:f._keypress}),
b;f=l("dijit._AttachMixin",null,{constructor:function(){this._attachPoints=[];this._attachEvents=[]},buildRendering:function(){this.inherited(arguments);this._attachTemplateNodes(this.domNode);this._beforeFillContent()},_beforeFillContent:function(){},_attachTemplateNodes:function(b){for(var c=b;;)if(1==c.nodeType&&(this._processTemplateNode(c,function(b,c){return b.getAttribute(c)},this._attach)||this.searchContainerNode)&&c.firstChild)c=c.firstChild;else{if(c==b)break;for(;!c.nextSibling;)if(c=
c.parentNode,c==b)return;c=c.nextSibling}},_processTemplateNode:function(b,c,e){var d=!0,g=this.attachScope||this,f=c(b,"dojoAttachPoint")||c(b,"data-dojo-attach-point");if(f)for(var h=f.split(/\s*,\s*/);f=h.shift();)k.isArray(g[f])?g[f].push(b):g[f]=b,d="containerNode"!=f,this._attachPoints.push(f);if(c=c(b,"dojoAttachEvent")||c(b,"data-dojo-attach-event"))for(f=c.split(/\s*,\s*/),h=k.trim;c=f.shift();)if(c){var r=null;-1!=c.indexOf(":")?(r=c.split(":"),c=h(r[0]),r=h(r[1])):c=h(c);r||(r=c);this._attachEvents.push(e(b,
c,k.hitch(g,r)))}return d},_attach:function(d,e,g){e=e.replace(/^on/,"").toLowerCase();e="dijitclick"==e?b||(b=m("./a11yclick")):c[e]||e;return q(d,e,g)},_detachTemplateNodes:function(){var b=this.attachScope||this;p.forEach(this._attachPoints,function(c){delete b[c]});this._attachPoints=[];p.forEach(this._attachEvents,function(b){b.remove()});this._attachEvents=[]},destroyRendering:function(){this._detachTemplateNodes();this.inherited(arguments)}});k.extend(e,{dojoAttachEvent:"",dojoAttachPoint:""});
return f})},"dijit/form/_FormWidgetMixin":function(){define("dijit/form/_FormWidgetMixin","dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff dojo/window ../a11y".split(" "),function(m,p,f,l,k,h,q,g,e,c){return p("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,intermediateChanges:!1,scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(b){this._set("disabled",
b);/^(button|input|select|textarea|optgroup|option|fieldset)$/i.test(this.focusNode.tagName)?(f.set(this.focusNode,"disabled",b),g("trident")&&"readOnly"in this&&f.set(this.focusNode,"readonly",b||this.readOnly)):this.focusNode.setAttribute("aria-disabled",b?"true":"false");this.valueNode&&f.set(this.valueNode,"disabled",b);b?(this._set("hovering",!1),this._set("active",!1),b="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:"_setTabIndexAttr"in this?this._setTabIndexAttr:"focusNode",m.forEach(k.isArray(b)?
b:[b],function(b){b=this[b];g("webkit")||c.hasDefaultTabStop(b)?b.setAttribute("tabIndex","-1"):b.removeAttribute("tabIndex")},this)):""!=this.tabIndex&&this.set("tabIndex",this.tabIndex)},_onFocus:function(b){if("mouse"==b&&this.isFocusable())var c=this.own(q(this.focusNode,"focus",function(){h.remove();c.remove()}))[0],f=g("pointer-events")?"pointerup":g("MSPointer")?"MSPointerUp":g("touch-events")?"touchend, mouseup":"mouseup",h=this.own(q(this.ownerDocumentBody,f,k.hitch(this,function(b){h.remove();
c.remove();this.focused&&("touchend"==b.type?this.defer("focus"):this.focus())})))[0];this.scrollOnFocus&&this.defer(function(){e.scrollIntoView(this.domNode)});this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&"none"!=l.get(this.domNode,"display")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(b){}},compare:function(b,c){return"number"==typeof b&&"number"==typeof c?isNaN(b)&&isNaN(c)?0:b-c:b>c?1:b<c?-1:0},onChange:function(){},
_onChangeActive:!1,_handleOnChange:function(b,c){void 0!=this._lastValueReported||null!==c&&this._onChangeActive||(this._resetValue=this._lastValueReported=b);this._pendingOnChange=this._pendingOnChange||typeof b!=typeof this._lastValueReported||0!=this.compare(b,this._lastValueReported);(this.intermediateChanges||c||void 0===c)&&this._pendingOnChange&&(this._lastValueReported=b,this._pendingOnChange=!1,this._onChangeActive&&(this._onChangeHandle&&this._onChangeHandle.remove(),this._onChangeHandle=
this.defer(function(){this._onChangeHandle=null;this.onChange(b)})))},create:function(){this.inherited(arguments);this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(this._onChangeHandle.remove(),this.onChange(this._lastValueReported));this.inherited(arguments)}})})},"dijit/form/_ButtonMixin":function(){define("dijit/form/_ButtonMixin",["dojo/_base/declare","dojo/dom","dojo/has","../registry"],function(m,p,f,l){var k=m("dijit.form._ButtonMixin"+(f("dojo-bidi")?"_NoBidi":""),null,{label:"",
type:"button",__onClick:function(f){f.stopPropagation();f.preventDefault();this.disabled||this.valueNode.click(f);return!1},_onClick:function(f){if(this.disabled)return f.stopPropagation(),f.preventDefault(),!1;!1===this.onClick(f)&&f.preventDefault();var h=f.defaultPrevented;if(!h&&"submit"==this.type&&!(this.valueNode||this.focusNode).form)for(var g=this.domNode;g.parentNode;g=g.parentNode){var e=l.byNode(g);if(e&&"function"==typeof e._onSubmit){e._onSubmit(f);f.preventDefault();h=!0;break}}return!h},
postCreate:function(){this.inherited(arguments);p.setSelectable(this.focusNode,!1)},onClick:function(){return!0},_setLabelAttr:function(f){this._set("label",f);(this.containerNode||this.focusNode).innerHTML=f;this.onLabelSet()},onLabelSet:function(){}});f("dojo-bidi")&&(k=m("dijit.form._ButtonMixin",k,{onLabelSet:function(){this.inherited(arguments);this.applyTextDir(this.containerNode||this.focusNode)}}));return k})},"dijit/form/_ToggleButtonMixin":function(){define("dijit/form/_ToggleButtonMixin",
["dojo/_base/declare","dojo/dom-attr"],function(m,p){return m("dijit.form._ToggleButtonMixin",null,{checked:!1,_aria_attr:"aria-pressed",_onClick:function(f){var l=this.checked;this._set("checked",!l);var k=this.inherited(arguments);this.set("checked",k?this.checked:l);return k},_setCheckedAttr:function(f,l){this._set("checked",f);var k=this.focusNode||this.domNode;this._created&&p.get(k,"checked")!=!!f&&p.set(k,"checked",!!f);k.setAttribute(this._aria_attr,String(f));this._handleOnChange(f,l)},postCreate:function(){this.inherited(arguments);
var f=this.focusNode||this.domNode;this.checked&&f.setAttribute("checked","checked");void 0===this._resetValue&&(this._lastValueReported=this._resetValue=this.checked)},reset:function(){this._hasBeenBlurred=!1;this.set("checked",this.params.checked||!1)}})})},"dijit/layout/ContentPane":function(){define("dijit/layout/ContentPane","dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when dojo/i18n!../nls/loading".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t){return e("dijit.layout.ContentPane",[f,l,k],{href:"",content:"",extractContent:!1,parseOnLoad:!0,parserScope:m._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"\x3cspan class\x3d'dijitContentPaneLoading'\x3e\x3cspan class\x3d'dijitInline dijitIconLoading'\x3e\x3c/span\x3e${loadingState}\x3c/span\x3e",errorMessage:"\x3cspan class\x3d'dijitContentPaneError'\x3e\x3cspan class\x3d'dijitInline dijitIconError'\x3e\x3c/span\x3e${errorState}\x3c/span\x3e",
isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(b,c,d){var e=new d(b,c);return!e.href&&e._contentSetter&&e._contentSetter.parseDeferred&&!e._contentSetter.parseDeferred.isFulfilled()?e._contentSetter.parseDeferred.then(function(){return e}):e},create:function(c,d){if(!(c&&c.template||!d||"href"in c||"content"in c)){d=b.byId(d);for(var e=d.ownerDocument.createDocumentFragment();d.firstChild;)e.appendChild(d.firstChild);
c=p.delegate(c,{content:e})}this.inherited(arguments,[c,d])},postMixInProperties:function(){this.inherited(arguments);var b=u.getLocalization("dijit","loading",this.lang);this.loadingMessage=h.substitute(this.loadingMessage,b);this.errorMessage=h.substitute(this.errorMessage,b)},buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode);this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);this._contentSetter&&g.forEach(this._contentSetter.parseResults,
function(b){b._started||b._destroyed||!p.isFunction(b.startup)||(b.startup(),b._started=!0)},this)},_startChildren:function(){g.forEach(this.getChildren(),function(b){b._started||b._destroyed||!p.isFunction(b.startup)||(b.startup(),b._started=!0)});this._contentSetter&&g.forEach(this._contentSetter.parseResults,function(b){b._started||b._destroyed||!p.isFunction(b.startup)||(b.startup(),b._started=!0)},this)},setHref:function(b){m.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.",
"","2.0");return this.set("href",b)},_setHrefAttr:function(b){this.cancel();this.onLoadDeferred=new c(p.hitch(this,"cancel"));this.onLoadDeferred.then(p.hitch(this,"onLoad"));this._set("href",b);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(b){m.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",b)},_setContentAttr:function(b){this._set("href",
"");this.cancel();this.onLoadDeferred=new c(p.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(p.hitch(this,"onLoad"));this._setContent(b||"");this._isDownloaded=!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(b){this._beingDestroyed||
this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},refresh:function(){this.cancel();this.onLoadDeferred=new c(p.hitch(this,"cancel"));this.onLoadDeferred.then(p.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var b=this,c={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};
p.isObject(this.ioArgs)&&p.mixin(c,this.ioArgs);var d=this._xhrDfd=(this.ioMethod||v.get)(c),e;d.then(function(c){e=c;try{return b._isDownloaded=!0,b._setContent(c,!1)}catch(A){b._onError("Content",A)}},function(c){d.canceled||b._onError("Download",c);delete b._xhrDfd;return c}).then(function(){b.onDownloadEnd();delete b._xhrDfd;return e});delete this._hrefChanged},_onLoadHandler:function(b){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(b)}catch(w){}},_onUnloadHandler:function(){this._set("isLoaded",
!1);try{this.onUnload()}catch(x){}},destroyDescendants:function(b){this.isLoaded&&this._onUnloadHandler();var c=this._contentSetter;g.forEach(this.getChildren(),function(c){c.destroyRecursive?c.destroyRecursive(b):c.destroy&&c.destroy(b);c._destroyed=!0});c&&(g.forEach(c.parseResults,function(c){c._destroyed||(c.destroyRecursive?c.destroyRecursive(b):c.destroy&&c.destroy(b),c._destroyed=!0)}),delete c.parseResults);b||r.empty(this.containerNode);delete this._singleChild},_setContent:function(b,c){b=
this.preprocessContent(b);this.destroyDescendants();var d=this._contentSetter;d&&d instanceof q._ContentSetter||(d=this._contentSetter=new q._ContentSetter({node:this.containerNode,_onError:p.hitch(this,this._onError),onContentError:p.hitch(this,function(b){b=this.onContentError(b);try{this.containerNode.innerHTML=b}catch(C){}})}));var e=p.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!b.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,
lang:this.lang,textDir:this.textDir},this._contentSetterParams||{}),e=d.set(p.isObject(b)&&b.domNode?b.domNode:b,e),g=this;return t(e&&e.then?e:d.parseDeferred,function(){delete g._contentSetterParams;c||(g._started&&(g._startChildren(),g._scheduleLayout()),g._onLoadHandler(b))})},preprocessContent:function(b){return b},_onError:function(b,c,d){this.onLoadDeferred.reject(c);b=this["on"+b+"Error"].call(this,c);d||b&&this._setContent(b,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},
onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/_Container":function(){define("dijit/_Container",["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/_base/kernel"],function(m,p,f,l){return p("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode)},addChild:function(k,h){var q=this.containerNode;if(0<h){for(q=q.firstChild;0<h;)1==q.nodeType&&
h--,q=q.nextSibling;q?h="before":(q=this.containerNode,h="last")}f.place(k.domNode,q,h);this._started&&!k._started&&k.startup()},removeChild:function(f){"number"==typeof f&&(f=this.getChildren()[f]);f&&(f=f.domNode)&&f.parentNode&&f.parentNode.removeChild(f)},hasChildren:function(){return 0<this.getChildren().length},_getSiblingOfChild:function(f,h){var k=this.getChildren();f=m.indexOf(k,f);return k[f+h]},getIndexOfChild:function(f){return m.indexOf(this.getChildren(),f)}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dijit/layout/_ContentPaneResizeMixin",
"dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query ../registry ../Viewport ./utils".split(" "),function(m,p,f,l,k,h,q,g,e,c){return p("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var b=this.getParent();this._childOfLayoutWidget=b&&b.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._isShown()&&this._onShow();this._childOfLayoutWidget||
this.own(e.on("resize",h.hitch(this,"resize")))}},_checkIfSingleChild:function(){if(this.doLayout){var b=[],c=!1;q("\x3e *",this.containerNode).some(function(d){var e=g.byNode(d);e&&e.resize?b.push(e):!/script|link|style/i.test(d.nodeName)&&d.offsetHeight&&(c=!0)});this._singleChild=1!=b.length||c?null:b[0];f.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)}},resize:function(b,c){this._resizeCalled=!0;this._scheduleLayout(b,c)},_scheduleLayout:function(b,c){this._isShown()?
this._layout(b,c):(this._needLayout=!0,this._changeSize=b,this._resultSize=c)},_layout:function(b,d){delete this._needLayout;this._wasShown||!1===this.open||this._onShow();b&&l.setMarginBox(this.domNode,b);var e=this.containerNode;e===this.domNode?(d=d||{},h.mixin(d,b||{}),"h"in d&&"w"in d||(d=h.mixin(l.getMarginBox(e),d)),this._contentBox=c.marginBox2contentBox(e,d)):this._contentBox=l.getContentBox(e);this._layoutChildren()},_layoutChildren:function(){this._checkIfSingleChild();if(this._singleChild&&
this._singleChild.resize){var b=this._contentBox||l.getContentBox(this.containerNode);this._singleChild.resize({w:b.w,h:b.h})}else for(var b=this.getChildren(),c,e=0;c=b[e++];)c.resize&&c.resize()},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var b=this.domNode,c=this.domNode.parentNode;return"none"!=b.style.display&&"hidden"!=b.style.visibility&&!f.contains(b,"dijitHidden")&&c&&c.style&&"none"!=
c.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"dijit/Viewport":function(){define("dijit/Viewport",["dojo/Evented","dojo/on","dojo/domReady","dojo/sniff","dojo/window"],function(m,p,f,l,k){var h=new m,q;f(function(){var g=k.getBox();h._rlh=p(window,"resize",function(){var c=k.getBox();if(g.h!=c.h||g.w!=c.w)g=c,h.emit("resize")});if(8==l("ie")){var e=screen.deviceXDPI;setInterval(function(){screen.deviceXDPI!=
e&&(e=screen.deviceXDPI,h.emit("resize"))},500)}l("ios")&&(p(document,"focusin",function(c){q=c.target}),p(document,"focusout",function(c){q=null}))});h.getEffectiveBox=function(g){g=k.getBox(g);var e=q&&q.tagName&&q.tagName.toLowerCase();l("ios")&&q&&!q.readOnly&&("textarea"==e||"input"==e&&/^(color|email|number|password|search|tel|text|url)$/.test(q.type))&&(g.h*=0==orientation||180==orientation?.66:.4,e=q.getBoundingClientRect(),g.h=Math.max(g.h,e.top+e.height));return g};return h})},"dijit/layout/utils":function(){define("dijit/layout/utils",
["dojo/_base/array","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(m,p,f,l,k){function h(e){return e.substring(0,1).toUpperCase()+e.substring(1)}function q(e,c){var b=e.resize?e.resize(c):f.setMarginBox(e.domNode,c);b?k.mixin(e,b):(k.mixin(e,f.getMarginBox(e.domNode)),k.mixin(e,c))}var g={marginBox2contentBox:function(e,c){var b=l.getComputedStyle(e),d=f.getMarginExtents(e,b),g=f.getPadBorderExtents(e,b);return{l:l.toPixelValue(e,b.paddingLeft),t:l.toPixelValue(e,
b.paddingTop),w:c.w-(d.w+g.w),h:c.h-(d.h+g.h)}},layoutChildren:function(e,c,b,d,g){c=k.mixin({},c);p.add(e,"dijitLayoutContainer");b=m.filter(b,function(b){return"center"!=b.region&&"client"!=b.layoutAlign}).concat(m.filter(b,function(b){return"center"==b.region||"client"==b.layoutAlign}));m.forEach(b,function(b){var e=b.domNode,f=b.region||b.layoutAlign;if(!f)throw Error("No region setting for "+b.id);var r=e.style;r.left=c.l+"px";r.top=c.t+"px";r.position="absolute";p.add(e,"dijitAlign"+h(f));e=
{};d&&d==b.id&&(e["top"==b.region||"bottom"==b.region?"h":"w"]=g);"leading"==f&&(f=b.isLeftToRight()?"left":"right");"trailing"==f&&(f=b.isLeftToRight()?"right":"left");"top"==f||"bottom"==f?(e.w=c.w,q(b,e),c.h-=b.h,"top"==f?c.t+=b.h:r.top=c.t+c.h+"px"):"left"==f||"right"==f?(e.h=c.h,q(b,e),c.w-=b.w,"left"==f?c.l+=b.w:r.left=c.l+c.w+"px"):"client"!=f&&"center"!=f||q(b,c)})}};k.setObject("dijit.layout.utils",g);return g})},"dijit/_WidgetsInTemplateMixin":function(){define("dijit/_WidgetsInTemplateMixin",
["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(m,p,f,l,k){return f("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:!1,contextRequire:null,_beforeFillContent:function(){if(/dojoType|data-dojo-type/i.test(this.domNode.innerHTML)){var f=this.domNode;this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=!0);k.parse(f,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},
propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(l.hitch(this,function(f){this._startupWidgets=f;for(var g=0;g<f.length;g++)this._processTemplateNode(f[g],function(e,c){return e[c]},function(e,c,b){return c in e?e.connect(e,c,b):e.on(c,b,!0)});this.containerNode&&this.containerNode.stopParser&&delete this.containerNode.stopParser}));if(!this._startupWidgets)throw Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");
}},_processTemplateNode:function(f,k,g){return k(f,"dojoType")||k(f,"data-dojo-type")?!0:this.inherited(arguments)},startup:function(){m.forEach(this._startupWidgets,function(f){f&&!f._started&&f.startup&&f.startup()});this._startupWidgets=null;this.inherited(arguments)}})})},"dijit/popup":function(){define("dijit/popup","dojo/_base/array dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on ./place ./BackgroundIframe ./Viewport ./main dojo/touch".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t){function x(){this._popupWrapper&&(h.destroy(this._popupWrapper),delete this._popupWrapper)}f=f(null,{_stack:[],_beginZIndex:1E3,_idGen:1,_repositionAll:function(){if(this._firstAroundNode){var c=this._firstAroundPosition,d=q.position(this._firstAroundNode,!0),e=d.x-c.x,c=d.y-c.y;if(e||c)for(this._firstAroundPosition=d,d=0;d<this._stack.length;d++){var g=this._stack[d].wrapper.style;g.top=parseFloat(g.top)+c+"px";"auto"==g.right?g.left=parseFloat(g.left)+e+
"px":g.right=parseFloat(g.right)-e+"px"}this._aroundMoveListener=setTimeout(b.hitch(this,"_repositionAll"),e||c?10:50)}},_createWrapper:function(b){var c=b._popupWrapper,e=b.domNode;c||(c=h.create("div",{"class":"dijitPopup",style:{display:"none"},role:"region","aria-label":b["aria-label"]||b.label||b.name||b.id},b.ownerDocumentBody),c.appendChild(e),e=e.style,e.display="",e.visibility="",e.position="",e.top="0px",b._popupWrapper=c,p.after(b,"destroy",x,!0),"ontouchend"in document&&d(c,"touchend",
function(b){/^(input|button|textarea)$/i.test(b.target.tagName)||b.preventDefault()}),c.dojoClick=!0);return c},moveOffScreen:function(b){var c=this._createWrapper(b);b=q.isBodyLtr(b.ownerDocument);var d={visibility:"hidden",top:"-9999px",display:""};d[b?"left":"right"]="-9999px";d[b?"right":"left"]="auto";g.set(c,d);return c},hide:function(b){var c=this._createWrapper(b);g.set(c,{display:"none",height:"auto",overflowY:"visible",border:""});b=b.domNode;"_originalStyle"in b&&(b.style.cssText=b._originalStyle)},
getTopPopup:function(){for(var b=this._stack,c=b.length-1;0<c&&b[c].parent===b[c-1].widget;c--);return b[c]},open:function(f){for(var h=this._stack,t=f.popup,x=t.domNode,m=f.orient||["below","below-alt","above","above-alt"],w=f.parent?f.parent.isLeftToRight():q.isBodyLtr(t.ownerDocument),p=f.around,E=f.around&&f.around.id?f.around.id+"_dropdown":"popup_"+this._idGen++;h.length&&(!f.parent||!l.isDescendant(f.parent.domNode,h[h.length-1].widget.domNode));)this.close(h[h.length-1].widget);var H=this.moveOffScreen(t);
t.startup&&!t._started&&t.startup();var D,G=q.position(x);if("maxHeight"in f&&-1!=f.maxHeight)D=f.maxHeight||Infinity;else{D=u.getEffectiveBox(this.ownerDocument);var I=p?q.position(p,!1):{y:f.y-(f.padding||0),h:2*(f.padding||0)};D=Math.floor(Math.max(I.y,D.h-(I.y+I.h)))}G.h>D&&(G=g.getComputedStyle(x),g.set(H,{overflowY:"scroll",height:D+"px",border:G.borderLeftWidth+" "+G.borderLeftStyle+" "+G.borderLeftColor}),x._originalStyle=x.style.cssText,x.style.border="none");k.set(H,{id:E,style:{zIndex:this._beginZIndex+
h.length},"class":"dijitPopup "+(t.baseClass||t["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:f.parent?f.parent.id:""});0==h.length&&p&&(this._firstAroundNode=p,this._firstAroundPosition=q.position(p,!0),this._aroundMoveListener=setTimeout(b.hitch(this,"_repositionAll"),50));e("config-bgIframe")&&!t.bgIframe&&(t.bgIframe=new v(H));E=t.orient?b.hitch(t,"orient"):null;m=p?r.around(H,p,m,w,E):r.at(H,f,"R"==m?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],f.padding,E);H.style.visibility="visible";
x.style.visibility="visible";x=[];x.push(d(H,"keydown",b.hitch(this,function(b){if(b.keyCode==c.ESCAPE&&f.onCancel)b.stopPropagation(),b.preventDefault(),f.onCancel();else if(b.keyCode==c.TAB&&(b.stopPropagation(),b.preventDefault(),(b=this.getTopPopup())&&b.onCancel))b.onCancel()})));t.onCancel&&f.onCancel&&x.push(t.on("cancel",f.onCancel));x.push(t.on(t.onExecute?"execute":"change",b.hitch(this,function(){var b=this.getTopPopup();if(b&&b.onExecute)b.onExecute()})));h.push({widget:t,wrapper:H,parent:f.parent,
onExecute:f.onExecute,onCancel:f.onCancel,onClose:f.onClose,handlers:x});if(t.onOpen)t.onOpen(m);return m},close:function(b){for(var c=this._stack;b&&m.some(c,function(c){return c.widget==b})||!b&&c.length;){var d=c.pop(),e=d.widget,g=d.onClose;e.bgIframe&&(e.bgIframe.destroy(),delete e.bgIframe);if(e.onClose)e.onClose();for(var f;f=d.handlers.pop();)f.remove();e&&e.domNode&&this.hide(e);g&&g()}0==c.length&&this._aroundMoveListener&&(clearTimeout(this._aroundMoveListener),this._firstAroundNode=this._firstAroundPosition=
this._aroundMoveListener=null)}});return t.popup=new f})},"dijit/place":function(){define("dijit/place","dojo/_base/array dojo/dom-geometry dojo/dom-style dojo/_base/kernel dojo/_base/window ./Viewport ./main".split(" "),function(m,p,f,l,k,h,q){function g(c,b,d,e){var g=h.getEffectiveBox(c.ownerDocument);c.parentNode&&"body"==String(c.parentNode.tagName).toLowerCase()||k.body(c.ownerDocument).appendChild(c);var r=null;m.some(b,function(b){var f=b.corner,h=b.pos,k=0,t={w:{L:g.l+g.w-h.x,R:h.x-g.l,M:g.w}[f.charAt(1)],
h:{T:g.t+g.h-h.y,B:h.y-g.t,M:g.h}[f.charAt(0)]},u=c.style;u.left=u.right="auto";d&&(k=d(c,b.aroundCorner,f,t,e),k="undefined"==typeof k?0:k);var q=c.style,l=q.display,v=q.visibility;"none"==q.display&&(q.visibility="hidden",q.display="");u=p.position(c);q.display=l;q.visibility=v;l={L:h.x,R:h.x-u.w,M:Math.max(g.l,Math.min(g.l+g.w,h.x+(u.w>>1))-u.w)}[f.charAt(1)];v={T:h.y,B:h.y-u.h,M:Math.max(g.t,Math.min(g.t+g.h,h.y+(u.h>>1))-u.h)}[f.charAt(0)];h=Math.max(g.l,l);q=Math.max(g.t,v);l=Math.min(g.l+g.w,
l+u.w)-h;v=Math.min(g.t+g.h,v+u.h)-q;k+=u.w-l+(u.h-v);if(null==r||k<r.overflow)r={corner:f,aroundCorner:b.aroundCorner,x:h,y:q,w:l,h:v,overflow:k,spaceAvailable:t};return!k});r.overflow&&d&&d(c,r.aroundCorner,r.corner,r.spaceAvailable,e);b=r.y;var t=r.x,q=k.body(c.ownerDocument);/relative|absolute/.test(f.get(q,"position"))&&(b-=f.get(q,"marginTop"),t-=f.get(q,"marginLeft"));q=c.style;q.top=b+"px";q.left=t+"px";q.right="auto";return r}var e={TL:"BR",TR:"BL",BL:"TR",BR:"TL"};return q.place={at:function(c,
b,d,f,h){d=m.map(d,function(c){var d={corner:c,aroundCorner:e[c],pos:{x:b.x,y:b.y}};f&&(d.pos.x+="L"==c.charAt(1)?f.x:-f.x,d.pos.y+="T"==c.charAt(0)?f.y:-f.y);return d});return g(c,d,h)},around:function(c,b,d,e,h){function r(b,c){H.push({aroundCorner:b,corner:c,pos:{x:{L:A,R:A+F,M:A+(F>>1)}[b.charAt(1)],y:{T:C,B:C+E,M:C+(E>>1)}[b.charAt(0)]}})}var k;if("string"==typeof b||"offsetWidth"in b||"ownerSVGElement"in b){if(k=p.position(b,!0),/^(above|below)/.test(d[0])){var q=p.getBorderExtents(b),v=b.firstChild?
p.getBorderExtents(b.firstChild):{t:0,l:0,b:0,r:0},y=p.getBorderExtents(c),z=c.firstChild?p.getBorderExtents(c.firstChild):{t:0,l:0,b:0,r:0};k.y+=Math.min(q.t+v.t,y.t+z.t);k.h-=Math.min(q.t+v.t,y.t+z.t)+Math.min(q.b+v.b,y.b+z.b)}}else k=b;if(b.parentNode)for(q="absolute"==f.getComputedStyle(b).position,b=b.parentNode;b&&1==b.nodeType&&"BODY"!=b.nodeName;){v=p.position(b,!0);y=f.getComputedStyle(b);/relative|absolute/.test(y.position)&&(q=!1);if(!q&&/hidden|auto|scroll/.test(y.overflow)){var z=Math.min(k.y+
k.h,v.y+v.h),B=Math.min(k.x+k.w,v.x+v.w);k.x=Math.max(k.x,v.x);k.y=Math.max(k.y,v.y);k.h=z-k.y;k.w=B-k.x}"absolute"==y.position&&(q=!0);b=b.parentNode}var A=k.x,C=k.y,F="w"in k?k.w:k.w=k.width,E="h"in k?k.h:(l.deprecated("place.around: dijit/place.__Rectangle: { x:"+A+", y:"+C+", height:"+k.height+", width:"+F+" } has been deprecated.  Please use { x:"+A+", y:"+C+", h:"+k.height+", w:"+F+" }","","2.0"),k.h=k.height),H=[];m.forEach(d,function(b){var c=e;switch(b){case "above-centered":r("TM","BM");
break;case "below-centered":r("BM","TM");break;case "after-centered":c=!c;case "before-centered":r(c?"ML":"MR",c?"MR":"ML");break;case "after":c=!c;case "before":r(c?"TL":"TR",c?"TR":"TL");r(c?"BL":"BR",c?"BR":"BL");break;case "below-alt":c=!c;case "below":r(c?"BL":"BR",c?"TL":"TR");r(c?"BR":"BL",c?"TR":"TL");break;case "above-alt":c=!c;case "above":r(c?"TL":"TR",c?"BL":"BR");r(c?"TR":"TL",c?"BR":"BL");break;default:r(b.aroundCorner,b.corner)}});c=g(c,H,h,{w:F,h:E});c.aroundNodePos=k;return c}}})},
"dijit/BackgroundIframe":function(){define("dijit/BackgroundIframe","require ./main dojo/_base/config dojo/dom-construct dojo/dom-style dojo/_base/lang dojo/on dojo/sniff".split(" "),function(m,p,f,l,k,h,q,g){g.add("config-bgIframe",(g("ie")||g("trident"))&&!/IEMobile\/10\.0/.test(navigator.userAgent));var e=new function(){var c=[];this.pop=function(){var b;c.length?(b=c.pop(),b.style.display=""):(9>g("ie")?(b=f.dojoBlankHtmlUrl||m.toUrl("dojo/resources/blank.html")||'javascript:""',b=document.createElement("\x3ciframe src\x3d'"+
b+"' role\x3d'presentation' style\x3d'position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity\x3d\"0\");'\x3e")):(b=l.create("iframe"),b.src='javascript:""',b.className="dijitBackgroundIframe",b.setAttribute("role","presentation"),k.set(b,"opacity",.1)),b.tabIndex=-1);return b};this.push=function(b){b.style.display="none";c.push(b)}};p.BackgroundIframe=function(c){if(!c.id)throw Error("no id");if(g("config-bgIframe")){var b=this.iframe=e.pop();c.appendChild(b);7>g("ie")||g("quirks")?
(this.resize(c),this._conn=q(c,"resize",h.hitch(this,"resize",c))):k.set(b,{width:"100%",height:"100%"})}};h.extend(p.BackgroundIframe,{resize:function(c){this.iframe&&k.set(this.iframe,{width:c.offsetWidth+"px",height:c.offsetHeight+"px"})},destroy:function(){this._conn&&(this._conn.remove(),this._conn=null);this.iframe&&(this.iframe.parentNode.removeChild(this.iframe),e.push(this.iframe),delete this.iframe)}});return p.BackgroundIframe})},"dojox/secure/fromJson":function(){define("dojox/secure/fromJson",
["dojo","dijit","dojox"],function(m,p,f){m.provide("dojox.secure.fromJson");f.secure.fromJson="undefined"!=typeof JSON?JSON.parse:function(){function f(c,b,d){return b?q[b]:String.fromCharCode(parseInt(d,16))}var k=/(?:false|true|null|[\{\}\[\]]|(?:-?\b(?:0|[1-9][0-9]*)(?:\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\b)|(?:"(?:[^\0-\x08\x0a-\x1f"\\]|\\(?:["/\\bfnrt]|u[0-9A-Fa-f]{4}))*"))/g,h=/\\(?:([^u])|u(.{4}))/g,q={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},g=new String(""),e=Object.hasOwnProperty;
return function(c,b){c=c.match(k);var d,r=c[0],q=!1;"{"===r?d={}:"["===r?d=[]:(d=[],q=!0);for(var u,t=[d],l=1-q,m=c.length;l<m;++l){var r=c[l],y;switch(r.charCodeAt(0)){default:y=t[0];y[u||y.length]=+r;u=void 0;break;case 34:r=r.substring(1,r.length-1);-1!==r.indexOf("\\")&&(r=r.replace(h,f));y=t[0];if(!u)if(y instanceof Array)u=y.length;else{u=r||g;break}y[u]=r;u=void 0;break;case 91:y=t[0];t.unshift(y[u||y.length]=[]);u=void 0;break;case 93:t.shift();break;case 102:y=t[0];y[u||y.length]=!1;u=void 0;
break;case 110:y=t[0];y[u||y.length]=null;u=void 0;break;case 116:y=t[0];y[u||y.length]=!0;u=void 0;break;case 123:y=t[0];t.unshift(y[u||y.length]={});u=void 0;break;case 125:t.shift()}}if(q){if(1!==t.length)throw Error();d=d[0]}else if(t.length)throw Error();if(b){var p=function(c,d){var g=c[d];if(g&&"object"===typeof g){var f=null,h;for(h in g)if(e.call(g,h)&&g!==c){var r=p(g,h);void 0!==r?g[h]=r:(f||(f=[]),f.push(h))}if(f)for(h=f.length;0<=--h;)delete g[f[h]]}return b.call(c,d,g)};d=p({"":d},"")}return d}}()})},
"dojox/main":function(){define("dojox/main",["dojo/_base/kernel"],function(m){return m.dojox})},"esri/arcgis/utils":function(){define("esri/arcgis/utils","require dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Deferred dojo/_base/json dojo/_base/url dojo/on dojo/DeferredList dojo/dom-construct dojo/sniff dojox/gfx/_base ../kernel ../config ../Color ../lang ../request ../SpatialReference ../map ../urlUtils ../geometry/Point ../geometry/ScreenPoint ../geometry/Extent ../geometry/webMercatorUtils ../symbols/jsonUtils ../renderers/jsonUtils ../dijit/PopupTemplate ../dijit/Popup ../tasks/query ../tasks/GeometryService ../layers/ArcGISTiledMapServiceLayer ../layers/FeatureLayer dojo/i18n!../nls/jsapi".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x,w,y,z,B,A,C,F,E,H,D,G,I,P,Q,O,N){function M(b){return!(!b||"BingMapsAerial"!==b.layerType&&"BingMapsAerial"!==b.type)}function J(b){return!(!b||"BingMapsRoad"!==b.layerType&&"BingMapsRoad"!==b.type)}function K(b){return M(b)||J(b)||!(!b||"BingMapsHybrid"!==b.layerType&&"BingMapsHybrid"!==b.type)}function U(b){return!(!b||"OpenStreetMap"!==b.layerType&&"OpenStreetMap"!==b.type)}function R(b){return!!(b&&b.url&&(-1<"ArcGISFeatureLayer ArcGISImageServiceLayer ArcGISImageServiceVectorLayer ArcGISMapServiceLayer ArcGISStreamLayer ArcGISTiledImageServiceLayer ArcGISTiledMapServiceLayer".split(" ").indexOf(b.layerType)||
!b.layerType&&!b.type))}function Y(b){return x({url:ta.arcgisUrl+"/"+b.itemId+"/data",content:{f:"json"},callbackParamName:"callback"},{disableIdentityLookup:!0,_preLookup:!0})}function aa(b,c){var d={f:"json"};c&&(d.token=c);return x({url:b,content:d,callbackParamName:"callback"},{disableIdentityLookup:!0})}function S(b){!b.layerDefinition||b.layerDefinition.drawingInfo&&b.layerDefinition.drawingInfo.labelingInfo||(b.showLabels=!1);b.itemProperties.layerDefinition&&(b.layerDefinition?(b.layerDefinition.drawingInfo||
(b.layerDefinition.drawingInfo=b.itemProperties.layerDefinition.drawingInfo),t.isDefined(b.layerDefinition.definitionExpression)||(b.layerDefinition.definitionExpression=b.itemProperties.layerDefinition.definitionExpression),t.isDefined(b.layerDefinition.minScale)||(b.layerDefinition.minScale=b.itemProperties.layerDefinition.minScale),t.isDefined(b.layerDefinition.maxScale)||(b.layerDefinition.maxScale=b.itemProperties.layerDefinition.maxScale)):b.layerDefinition=b.itemProperties.layerDefinition);
!b.itemProperties.popupInfo||b.popupInfo||b.disablePopup||(b.popupInfo=b.itemProperties.popupInfo);t.isDefined(b.itemProperties.showLabels)&&!t.isDefined(b.showLabels)&&(b.showLabels=b.itemProperties.showLabels);t.isDefined(b.itemProperties.showLegend)&&!t.isDefined(b.showLegend)&&(b.showLegend=b.itemProperties.showLegend);t.isDefined(b.itemProperties.refreshInterval)&&!t.isDefined(b.refreshInterval)&&(b.refreshInterval=b.itemProperties.refreshInterval)}function ma(b){S(b);b.itemProperties.layerDefinition&&
b.layerDefinition&&(!t.isDefined(b.layerDefinition.maximumTrackPoints)&&t.isDefined(b.itemProperties.layerDefinition.maximumTrackPoints)&&(b.layerDefinition.maximumTrackPoints=b.itemProperties.layerDefinition.maximumTrackPoints),!b.layerDefinition.definitionGeometry&&b.itemProperties.layerDefinition.definitionGeometry&&(b.layerDefinition.definitionGeometry=b.itemProperties.layerDefinition.definitionGeometry));b.itemProperties.purgeOptions&&!b.purgeOptions&&(b.purgeOptions=b.itemProperties.purgeOptions)}
function ha(b,c){var d=new k;c=b.itemData;var g=[],h=[];f.forEach(c.operationalLayers,function(b){if(b.itemId&&R(b)){var c=b.url.toLowerCase();-1<c.indexOf("/featureserver")||-1<c.indexOf("/mapserver/")?(h.push(b),g.push(Y(b))):-1<c.indexOf("/mapserver")&&-1===c.indexOf("/mapserver/")&&(!b.layers||!t.isDefined(b.minScale)&&!t.isDefined(b.maxScale))?(h.push(b),g.push(Y(b))):-1<c.indexOf("/imageserver")&&!t.isDefined(b.minScale)&&!t.isDefined(b.maxScale)?(h.push(b),g.push(Y(b))):-1<c.indexOf("/streamserver")&&
(h.push(b),g.push(Y(b)))}});c.baseMap&&c.baseMap.baseMapLayers&&f.forEach(c.baseMap.baseMapLayers,function(b){b.itemId&&"VectorTileLayer"!==b.layerType&&(h.push(b),g.push(Y(b)))});if(0<g.length){var r={};(new e(g)).addCallback(function(c){f.forEach(h,function(b,d){if((d=c[d][1])&&!(d instanceof Error)&&(r[b.itemId]=d,R(b))){var e=b.url.toLowerCase();(-1<e.indexOf("/featureserver")||-1<e.indexOf("/mapserver/"))&&d.layers?f.forEach(d.layers,function(c){var d="/featureserver/"+c.id;(d=e.match(d+"$")==
d)||(d="/mapserver/"+c.id,d=e.match(d+"$")==d);d&&(b.itemProperties=c,S(b))}):-1<e.indexOf("/streamserver")?(b.itemProperties=d,ma(b)):-1<e.indexOf("/mapserver")?(d.layers&&!b.layers&&(b.layers=d.layers),t.isDefined(d.minScale)&&!t.isDefined(b.minScale)&&(b.minScale=d.minScale),t.isDefined(d.maxScale)&&!t.isDefined(b.maxScale)&&(b.maxScale=d.maxScale),t.isDefined(d.refreshInterval)&&!t.isDefined(b.refreshInterval)&&(b.refreshInterval=d.refreshInterval),d.visibleLayers&&!b.visibleLayers&&(b.visibleLayers=
d.visibleLayers)):-1<e.indexOf("/imageserver")&&(t.isDefined(d.minScale)&&!t.isDefined(b.minScale)&&(b.minScale=d.minScale),t.isDefined(d.maxScale)&&!t.isDefined(b.maxScale)&&(b.maxScale=d.maxScale),t.isDefined(d.refreshInterval)&&!t.isDefined(b.refreshInterval)&&(b.refreshInterval=d.refreshInterval),!d.popupInfo||b.popupInfo||b.disablePopup||(b.popupInfo=d.popupInfo),d.renderingRule&&!b.renderingRule&&(b.renderingRule=d.renderingRule,d.renderingRule.functionName&&(b.renderingRule.rasterFunction=
d.renderingRule.functionName)),d.bandIds&&!b.bandIds&&(b.bandIds=d.bandIds),d.mosaicRule&&!b.mosaicRule&&(b.mosaicRule=d.mosaicRule),d.format&&!b.format&&(b.format=d.format),t.isDefined(d.compressionQuality)&&!t.isDefined(b.compressionQuality)&&(b.compressionQuality=d.compressionQuality),!d.layerDefinition||!d.layerDefinition.definitionExpression||t.isDefined(b.layerDefinition)&&t.isDefined(b.layerDefinition.definitionExpression)||(b.layerDefinition=b.layerDefinition||{},b.layerDefinition.definitionExpression=
d.layerDefinition.definitionExpression))}});b.relatedItemsData=r;d.callback(b)})}else d.callback(b);return d}function la(b,c){var d=new k,e=b.itemData,g=e.baseMap.baseMapLayers[0];if(K(g))if(g.portalUrl&&r.id)delete c.bingMapsKey,r.id.checkSignInStatus(z.urlToObject(ta.arcgisUrl).path).then(p.hitch(null,function(b,c,d,e,f){aa(g.portalUrl,f.token).then(p.hitch(null,ia,b,c,d,e),p.hitch(null,fa,b,c,d,e))},b,c,e,d),p.hitch(null,function(b,c,d,e,f){aa(g.portalUrl).then(p.hitch(null,ia,b,c,d,e),p.hitch(null,
fa,b,c,d,e))},b,c,e,d));else if(c.bingMapsKey){var f=new cb({bingMapsKey:c.bingMapsKey,mapStyle:cb.MAP_STYLE_AERIAL});l.connect(f,"onLoad",p.hitch(this,function(){d.callback([b,c])}));l.connect(f,"onError",function(f){delete c.bingMapsKey;b.itemData=ea(e);g=b.itemData.baseMap.baseMapLayers[0];g.errors=[];g.errors.push({message:"The owner of the application has not provided a valid Bing Key for the Bing Map it includes. Switching to Esri layers."});d.callback([b,c])})}else b.itemData=ea(e),g=b.itemData.baseMap.baseMapLayers[0],
g.errors=[],g.errors.push({message:"The owner of the application has not provided a Bing Key for the Bing Map it includes. Switching to Esri layers."}),d.callback([b,c]);else d.callback([b,c]);return d}function ca(b){var c=new k,d,e;b=b.itemData;var g=b.baseMap&&b.baseMap.baseMapLayers;if(Oa&&!Oa.supported())for(b=0;b<g.length;b++){var f=g[b];if(!f.isReference){"VectorTileLayer"===f.layerType&&(d=f.itemId,e=b);break}}d?V(d,!1).addBoth(function(b){var d=/^https?:\/\/basemaps(dev)?\.arcgis\.com\/arcgis\/rest\/services\/World_Basemap\/VectorTileServer/i;
b&&b.item&&d.test(b.item.url)&&(g[e]={id:"FB_"+f.id,layerType:"ArcGISTiledMapServiceLayer",opacity:"opacity"in f?f.opacity:1,visibility:"visibility"in f?f.visibility:!0,url:"https://services.arcgisonline.com/arcgis/rest/services/World_Street_Map/MapServer"});c.resolve()}):c.resolve();return c}function ia(b,c,d,e,g){g.bingKey?(c.bingMapsKey=g.bingKey,g=new cb({bingMapsKey:c.bingMapsKey,mapStyle:cb.MAP_STYLE_AERIAL}),l.connect(g,"onLoad",p.hitch(this,function(){e.callback([b,c])})),l.connect(g,"onError",
function(g){delete c.bingMapsKey;b.itemData=ea(d);g=b.itemData.baseMap.baseMapLayers[0];g.errors=[];g.errors.push({message:"The owner of the map has not provided a valid Bing Key for the Bing Map it includes. Switching to Esri layers."});e.callback([b,c])})):fa(b,c,d,e)}function fa(b,c,d,e){delete c.bingMapsKey;b.itemData=ea(d);d=b.itemData.baseMap.baseMapLayers[0];d.errors=[];d.errors.push({message:"The owner of the map has not provided a Bing Key for the Bing Map it includes. Switching to Esri layers."});
e.callback([b,c])}function ea(b){M(b.baseMap.baseMapLayers[0])?b.baseMap={title:"Imagery",baseMapLayers:[{id:"World_Imagery_2017",visibility:!0,opacity:1,url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}]}:J(b.baseMap.baseMapLayers[0])?b.baseMap={title:"Streets",baseMapLayers:[{id:"World_Street_Map_8421",opacity:1,visibility:!0,url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"}]}:b.baseMap={title:"Imagery with Labels",baseMapLayers:[{id:"World_Imagery_6611",
opacity:1,visibility:!0,url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},{id:"World_Boundaries_and_Places_1145",isReference:!0,opacity:1,visibility:!0,url:"https://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer"}]};return b}function pa(b,c,d,e){var g=b.dynamicLayerInfos||b.layerInfos,h=c.layers;if(h&&g)if(e.usePopupManager){var r;f.forEach(g,function(b){var c=b.id;if(!b.subLayerIds)for(b=0;b<h.length;b++){var e=h[b];
if(e.id===c&&e.popupInfo&&!e.disablePopup){r||(r={});r[c]={infoTemplate:new d(e.popupInfo),layerUrl:e.layerUrl};break}}});r&&b.setInfoTemplates(r)}else{var k=[],u=[],q=[],l=[],v=[],x=[];f.forEach(g,function(c){var d=c.id;if(!c.subLayerIds&&-1!==f.indexOf(b.visibleLayers,d))for(c=0;c<h.length;c++){var e=h[c];if(e.id===d){u.push(d);k.push(e.popupInfo);q.push(e.layerUrl||"");e.layerDefinition&&e.layerDefinition.definitionExpression?l.push(e.layerDefinition.definitionExpression):l.push("");v.push(t.isDefined(e.minScale)?
e.minScale:null);x.push(t.isDefined(e.maxScale)?e.maxScale:null);break}}});k.length&&(b.__popups=k,b.__popupIds=u,b.__popupUrls=q,b.__popupWhereClauses=l,b.__popupMinScales=v,b.__popupMaxScales=x,b.__resourceInfo=c.resourceInfo)}}function ka(b){if(!b)return!1;var c=(new q(ta.arcgisUrl)).authority;return-1!==b.indexOf(".arcgis.com/")||-1!==b.indexOf(c)}function na(b){return b?-1!==b.indexOf("/services.arcgisonline.com/")||-1!==b.indexOf("/server.arcgisonline.com/"):!1}function ja(b){"https:"===location.protocol&&
(ka(b)||na(b))&&(b=b.replace("http:","https:"));return b}function Fa(b,c,d){var e=[],g;b.displayLevels||(e=f.map(b.resourceInfo.tileInfo.lods,function(b){return b.level}));b.exclusionAreas&&(g=p.clone(b.exclusionAreas),g=f.map(g,function(b){b.geometry=new C(b.geometry);return b}));b.resourceInfo&&"Raster"===b.resourceInfo.cacheType?(e=b.layerDefinition&&b.layerDefinition.drawingInfo&&b.layerDefinition.drawingInfo.renderer,e=new T(ja(b.url),{resourceInfo:b.resourceInfo,opacity:b.opacity,visible:b.visibility,
id:b.id,minScale:b.minScale,maxScale:b.maxScale,refreshInterval:b.refreshInterval,multidimensionalDefinition:b.multidimensionalDefinition,bandIds:b.bandIds,renderer:e||null})):e=new Q(ja(b.url),{resourceInfo:b.resourceInfo,opacity:b.opacity,visible:b.visibility,displayLevels:b.displayLevels||e,id:b.id,minScale:b.minScale,maxScale:b.maxScale,refreshInterval:b.refreshInterval,exclusionAreas:g});d.ignorePopups||pa(e,b,c,d);return e}function Ga(b,c){if(!b||!c||0===c.length)return[];c=","+c+",";var d=
[],e,g=",";for(e=0;e<b.length;e++)if(null!==b[e].subLayerIds){if(-1===c.indexOf(","+b[e].id+",")||-1<g.indexOf(","+b[e].id+","))g+=b[e].subLayerIds.toString()+","}else-1<c.indexOf(","+b[e].id+",")&&-1===g.indexOf(","+b[e].id+",")&&d.push(b[e].id);return d}function ga(b,c,d){var e=new ab;e.format="png24";b.resourceInfo&&b.resourceInfo.supportedImageFormatTypes&&-1<b.resourceInfo.supportedImageFormatTypes.indexOf("PNG32")&&(e.format="png32");var e=new L(ja(b.url),{resourceInfo:b.resourceInfo,opacity:b.opacity,
visible:b.visibility,id:b.id,imageParameters:e,minScale:b.minScale,maxScale:b.maxScale,refreshInterval:b.refreshInterval}),g=b.visibleLayers;if(!b.visibleLayers){var h="";f.forEach(e.layerInfos,function(b){b.defaultVisibility&&(h+=(0<h.length?",":"")+b.id)});g=h}if(b.layers&&0<b.layers.length){var r=[],k=[],t,u=[],q,l;f.forEach(b.layers,function(c){var d=c.layerDefinition;d&&d.definitionExpression&&(r[c.id]=d.definitionExpression);if(d&&d.source){t=null;l=d.source;if("mapLayer"===l.type){var e=f.filter(b.resourceInfo.layers,
function(b){return b.id===l.mapLayerId});e.length&&(t=p.mixin(e[0],c))}else t=p.mixin({},c);t&&(t.source=l,delete t.popupInfo,t=new Qa(t),b.visibleLayers&&(e="string"==typeof b.visibleLayers?b.visibleLayers.split(","):b.visibleLayers,-1<f.indexOf(e,c.id)?t.defaultVisibility=!0:t.defaultVisibility=!1),k.push(t))}d&&null!=d.transparency&&(e=d.drawingInfo||{},null==e.transparency&&(e.transparency=d.transparency,d.drawingInfo=e));d&&d.source&&d.drawingInfo&&(q=new Ya(d.drawingInfo),u[c.id]=q)},this);
0<r.length&&e.setLayerDefinitions(r);0<k.length?(e.setDynamicLayerInfos(k,!0),0<u.length&&e.setLayerDrawingOptions(u,!0)):(g=Ga(e.layerInfos,g),e.setVisibleLayers(g))}else g=Ga(e.layerInfos,g),e.setVisibleLayers(g);d.ignorePopups||pa(e,b,c,d);return e}function va(b,c,d){var e=new Ia;e.bandIds=b.bandIds;null!=b.format&&(e.format=b.format,null!=b.compressionQuality&&(e.compressionQuality=b.compressionQuality));if(b.renderingRule&&b.renderingRule.rasterFunction){var g=new X(b.renderingRule);e.renderingRule=
g}b.mosaicRule&&(g=new Aa(b.mosaicRule),e.mosaicRule=g);t.isDefined(b.noData)&&(e.noData=b.noData);t.isDefined(b.noDataInterpretation)&&(e.noDataInterpretation=b.noDataInterpretation);t.isDefined(b.interpolation)&&(e.interpolation=b.interpolation);g=b.layerType?"ArcGISImageServiceVectorLayer"===b.layerType:!1;t.isDefined(b.layerType)||(g=b.resourceInfo.hasMultidimensions&&("esriImageServiceDataTypeVector-UV"===b.resourceInfo.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===b.resourceInfo.serviceDataType));
e={resourceInfo:b.resourceInfo,opacity:b.opacity,visible:b.visibility,id:b.id,imageServiceParameters:e,minScale:b.minScale,maxScale:b.maxScale,refreshInterval:b.refreshInterval};e=g?new wa(ja(b.url),e):new sa(ja(b.url),e);b.layerDefinition&&(b.layerDefinition.drawingInfo&&b.layerDefinition.drawingInfo.renderer&&(g=H.fromJson(b.layerDefinition.drawingInfo.renderer),e.setRenderer(g)),b.layerDefinition.definitionExpression&&e.setDefinitionExpression(b.layerDefinition.definitionExpression,!0));d.ignorePopups||
!b.popupInfo||b.disablePopup||e.setInfoTemplate(new c(b.popupInfo));return e}function ra(b,c,d){var e=[102113,102100,3857],g=d||new w(c[0].layerObject.fullExtent.spatialReference),h=new w(b.resourceInfo.fullExtent.spatialReference);return g.wkt==h.wkt&&(g.wkid==h.wkid||t.isDefined(g.latestWkid)&&g.latestWkid==h.wkid||t.isDefined(h.latestWkid)&&g.wkid==h.latestWkid||t.isDefined(g.latestWkid)&&g.latestWkid==h.latestWkid)||g.wkid&&h.wkid&&f.some(e,function(b){return b===h.wkid})&&f.some(e,function(b){return b===
g.wkid})?!0:!1}function qa(b,c,d){if(!c[0].layerObject.tileInfo)return!1;b=b.resourceInfo.tileInfo;c=c[0].layerObject.tileInfo;d=d.width>d.height?d.width:d.height;for(var e=!1,g=!1,f=0;f<b.lods.length;f++){for(var h=b.lods[f].scale/b.dpi,r=0;r<c.lods.length;r++){var k=c.lods[r].scale/c.dpi;if(Math.abs(k-h)/k<1/d)if(e){g=!0;break}else e=!0}if(g)break}return g||e&&(1===b.lods.length||1===c.lods.length)?!0:!1}function Ma(b,c,e,k,u,q){var v,x,m=e._clazz;if(U(b))v=new Z({id:b.id,opacity:b.opacity,visible:null!==
b.visibility&&void 0!==b.visibility?b.visibility:!0});else if(b&&("WFS"===b.layerType||"WFS"===b.type)){var B={customParameters:b.wfsInfo.customParameters,geometryType:b.layerDefinition.geometryType,id:b.id,labelingInfo:b.layerDefinition.drawingInfo.labelingInfo,maxFeatures:b.wfsInfo.maxFeatures,mode:b.mode,name:b.wfsInfo.name,showLabels:!0,swapXY:b.wfsInfo.swapXY,title:b.title,url:b.url,version:b.wfsInfo.version,visible:b.visibility,wkid:b.layerDefinition.spatialReference.wkid};v=new mb;v.fromJson(B,
function(){t.isDefined(b.opacity)&&v.setOpacity(b.opacity);t.isDefined(b.visibility)&&v.setVisibility(b.visibility);(b.minScale||b.maxScale)&&v.setScaleRange(b.minScale,b.maxScale);v.renderer=H.fromJson(b.layerDefinition.drawingInfo.renderer,{geometryType:B.geometryType});!e.ignorePopups&&b.popupInfo&&v.setInfoTemplate(new m(b.popupInfo));v.emit("fromJsonComplete")})}else if(b&&("WMS"===b.layerType||"WMS"===b.type)){var y=[],A=[];f.forEach(b.layers,function(b){A.push(new lb({name:b.name,title:b.title,
legendURL:b.legendURL||b.legendUrl,queryable:b.queryable,showPopup:b.showPopup}));y.push(b.name)},this);b.visibleLayers&&(y=b.visibleLayers);k=new C(b.extent[0][0],b.extent[0][1],b.extent[1][0],b.extent[1][1],new w({wkid:4326}));k={customLayerParameters:b.customLayerParameters,customParameters:b.customParameters,extent:k,layerInfos:A,version:b.version,maxWidth:b.maxWidth,maxHeight:b.maxHeight,featureInfoFormat:b.featureInfoFormat,getFeatureInfoURL:b.featureInfoUrl,getMapURL:b.mapUrl,spatialReferences:b.spatialReferences,
title:b.title,copyright:b.copyright,minScale:b.minScale||0,maxScale:b.maxScale||0,format:b.format};v=new ib(b.url,{id:b.id,visibleLayers:y,format:"png",transparent:b.firstLayer?!1:!0,opacity:b.opacity,visible:null!==b.visibility?b.visibility:!0,resourceInfo:k,refreshInterval:b.refreshInterval});v.spatialReference.wkid=k.spatialReferences[0]}else if(b&&("KML"===b.layerType||"KML"===b.type)){x=b.url;if(r.id){var G=r.id.findCredential(z.urlToObject(ta.arcgisUrl).path);G&&(c=ta.arcgisUrl.substring(ta.arcgisUrl.indexOf("//")+
2,ta.arcgisUrl.indexOf("/",ta.arcgisUrl.indexOf("//")+3)),u=c.split("."),u=u[u.length-2]+"."+u[u.length-1],q=x.indexOf(u),-1<q&&(x="https://"+c+x.substring(q+u.length),x+="?token\x3d"+G.token))}v=new eb(x,{id:b.id,visible:null!==b.visibility?b.visibility:!0,outSR:k,refreshInterval:b.refreshInterval});l.connect(v,"onLoad",function(){(b.opacity||0===b.opacity)&&v.setOpacity(b.opacity);t.isDefined(b.minScale)&&t.isDefined(b.maxScale)&&v.setScaleRange(b.minScale,b.maxScale);b.visibleFolders&&f.forEach(v.folders,
function(c){-1<f.indexOf(b.visibleFolders,c.id)?v.setFolderVisibility(c,!0):v.setFolderVisibility(c,!1)},this)})}else if(!b||"WebTiledLayer"!==b.layerType&&"WebTiledLayer"!==b.type)if(!b||"GeoRSS"!==b.layerType&&"GeoRSS"!==b.type)if(b&&("CSV"===b.layerType||"CSV"===b.type)&&b.url)k={layerDefinition:b.layerDefinition,columnDelimiter:b.columnDelimiter,id:b.id?b.id:null,visible:null!==b.visibility?b.visibility:!0,opacity:b.opacity,refreshInterval:b.refreshInterval},b.locationInfo&&(k.latitudeFieldName=
b.locationInfo.latitudeFieldName,k.longitudeFieldName=b.locationInfo.longitudeFieldName),!e.ignorePopups&&b.popupInfo&&(k.infoTemplate=new m(b.popupInfo)),v=new Va(b.url,k);else if("VectorTileLayer"===b.layerType&&b.styleUrl)v=new Oa(b.styleUrl,{id:b.id,minScale:b.minScale,maxScale:b.maxScale,opacity:b.opacity,visible:b.visibility});else if(b.layerDefinition&&!b.url)k=h.fromJson(h.toJson(b)),delete k.id,delete k.opacity,delete k.visibility,v=new O(k,{id:b.id,opacity:b.opacity,visible:b.visibility,
outFields:["*"],autoGeneralize:!0}),e.ignorePopups||!k.popupInfo||k.disablePopup||v.setInfoTemplate(new m(k.popupInfo)),Ta(v);else if(K(b))e.bingMapsKey?(k=cb.MAP_STYLE_AERIAL_WITH_LABELS,M(b)?k=cb.MAP_STYLE_AERIAL:J(b)&&(k=cb.MAP_STYLE_ROAD),v=new cb({bingMapsKey:e.bingMapsKey,mapStyle:k,opacity:b.opacity,id:b.id}),l.connect(v,"onError",p.hitch(this,function(b){b.errors=b.errors||[];b.errors.push({message:"This application does not have a valid Bing Key for the Bing layer that is included in this map. [type:"+
(b?b.layerType||b.type:"")+"]"})},b))):(b.errors=b.errors||[],b.errors.push({message:"This application does not provide a Bing Key for the Bing layer that is included in this map. [type:"+(b?b.layerType||b.type:"")+"]"}));else if(b.resourceInfo&&(b.resourceInfo.mapName||""===b.resourceInfo.mapName))v=!0===b.resourceInfo.singleFusedMapCache&&(b.baseMapLayer||ra(b,c,k)&&qa(b,u,q))?Fa(b,m,e):ga(b,m,e);else if(b.resourceInfo&&b.resourceInfo.pixelSizeX)v=!0===b.resourceInfo.singleFusedMapCache&&"ArcGISImageServiceLayer"!==
b.layerType&&(b.baseMapLayer||"Raster"===b.resourceInfo.cacheType||ra(b,c,k)&&qa(b,u,q))?Fa(b,m,e):va(b,m,e);else if(b.resourceInfo&&"Feature Layer"===b.resourceInfo.type){b.capabilities&&(b.resourceInfo.capabilities=b.capabilities);var F;!1===e.editable?F=!1:e.privileges&&-1===f.indexOf(e.privileges,"features:user:edit")&&r.id&&r.id.findCredential(b.url)&&(F=!1);v=new O(ja(b.url),{resourceInfo:b.resourceInfo,opacity:b.opacity,visible:b.visibility,id:b.id,mode:b.mode===O.MODE_SELECTION?O.MODE_SELECTION:
O.MODE_AUTO,editable:F,outFields:["*"],autoGeneralize:!0,refreshInterval:b.refreshInterval});e.ignorePopups||!b.popupInfo||b.disablePopup||v.setInfoTemplate(new m(b.popupInfo));b.layerDefinition&&(b.layerDefinition.drawingInfo&&b.layerDefinition.drawingInfo.renderer&&(k=H.fromJson(b.layerDefinition.drawingInfo.renderer,{geometryType:v.geometryType}),k.isMaxInclusive=!0,v.setRenderer(k)),b.layerDefinition.drawingInfo&&b.layerDefinition.drawingInfo.labelingInfo&&(k=f.map(b.layerDefinition.drawingInfo.labelingInfo,
function(b){return new Ra(b)}),v.setLabelingInfo(k)),b.layerDefinition.definitionExpression&&v.setDefinitionExpression(b.layerDefinition.definitionExpression),t.isDefined(b.layerDefinition.minScale)&&v.setMinScale(b.layerDefinition.minScale),t.isDefined(b.layerDefinition.maxScale)&&v.setMaxScale(b.layerDefinition.maxScale));Ta(v)}else b.resourceInfo&&b.resourceInfo.streamUrls&&(k={resourceInfo:b.resourceInfo,opacity:b.opacity,visible:b.visibility,id:b.id},b.layerDefinition&&(x=b.layerDefinition.drawingInfo,
b.layerDefinition.definitionGeometry&&(G=G||{},G.geometry=b.layerDefinition.definitionGeometry),t.isDefined(b.layerDefinition.definitionExpression)&&(G=G||{},G.where=b.layerDefinition.definitionExpression),t.isDefined(b.layerDefinition.maximumTrackPoints)&&(k.maximumTrackPoints=b.layerDefinition.maximumTrackPoints)),G&&(k.filter=G),b.purgeOptions&&(k.purgeOptions=b.purgeOptions),v=new za(ja(b.url),k),x&&x.renderer&&(k=x.renderer,v.setRenderer(H.fromJson(k,{geometryType:b.resourceInfo.geometryType}))),
x&&x.labelingInfo&&(k=f.map(x.labelingInfo,function(b){return new Ra(b)}),v.setLabelingInfo(k)),e.ignorePopups||!b.popupInfo||b.disablePopup||v.setInfoTemplate(new m(b.popupInfo)),b.layerDefinition&&(t.isDefined(b.layerDefinition.minScale)&&v.setMinScale(b.layerDefinition.minScale),t.isDefined(b.layerDefinition.maxScale)&&v.setMaxScale(b.layerDefinition.maxScale)),g.once(v,"error",function(c){b.errors.push({message:"Error loading stream layer. Check websocket url"})}));else v=new $a(b.url,{id:b.id,
opacity:b.opacity,outSpatialReference:k,refreshInterval:b.refreshInterval}),l.connect(v,"onLoad",function(){!1===b.visibility&&v.hide();t.isDefined(b.minScale)&&t.isDefined(b.maxScale)&&v.setScaleRange(b.minScale,b.maxScale);var c=v.getFeatureLayers();f.forEach(c,function(d){b.pointSymbol&&"esriGeometryPoint"===d.geometryType?(d.renderer.symbol=E.fromJson(b.pointSymbol),1===c.length&&(v.pointSymbol=E.fromJson(b.pointSymbol))):b.lineSymbol&&"esriGeometryPolyline"===d.geometryType?(d.renderer.symbol=
E.fromJson(b.lineSymbol),1===c.length&&(v.polylineSymbol=E.fromJson(b.lineSymbol))):b.polygonSymbol&&"esriGeometryPolygon"===d.geometryType&&(d.renderer.symbol=E.fromJson(b.polygonSymbol),1===c.length&&(v.polygonSymbol=E.fromJson(b.polygonSymbol)))})});else if(v=new kb(b.templateUrl,{id:b.id,visible:null!==b.visibility?b.visibility:!0,opacity:b.opacity,copyright:b.copyright,fullExtent:b.fullExtent&&new C(b.fullExtent),initialExtent:b.fullExtent&&new C(b.fullExtent),subDomains:b.subDomains,tileInfo:b.tileInfo?
new xa(b.tileInfo):null,refreshInterval:b.refreshInterval,wmtsInfo:b.wmtsInfo}),t.isDefined(b.minScale)||t.isDefined(b.maxScale))v.loaded?v.setScaleRange(b.minScale,b.maxScale):l.connect(v,"onLoad",function(){v.setScaleRange(b.minScale,b.maxScale)});v&&(v.arcgisProps={title:b.title},b.baseMapLayer&&(b.isReference?(v.attr("data-reference",!0),v._basemapGalleryLayerType="reference"):v._basemapGalleryLayerType="basemap"),v instanceof O&&b.layerDefinition&&b.layerDefinition.featureReduction&&"cluster"===
b.layerDefinition.featureReduction.type&&(k=b.layerDefinition.featureReduction,k.clusterSize&&(k.clusterSize=d.pt2px(k.clusterSize)),k.clusterRadius&&(k.clusterRadius=d.pt2px(k.clusterRadius)),k.popupInfo&&(k.infoTemplate=new D(k.popupInfo),delete k.popupInfo),v.setFeatureReduction(k)));return v}function ya(b,c,d,e,g){f.forEach(b,function(f){f.layerObject=Ma(f,b,c,d,e,g)});var h=f.filter(b,function(b){return!b.isReference}),r=f.filter(b,function(b){return!!b.isReference});return b=h.concat(r)}function Ja(b){var c=
null;b=b[0];b.url&&R(b)&&b.resourceInfo.spatialReference&&(c=new w,b.resourceInfo.spatialReference.wkid&&(c.wkid=b.resourceInfo.spatialReference.wkid),b.resourceInfo.spatialReference.wkt&&(c.wkt=b.resourceInfo.spatialReference.wkt));K(b)||U(b)?c=new w({wkid:102100}):b&&("WMS"===b.layerType||"WMS"===b.type)&&(c=new w({wkid:b.spatialReferences[0]}));return c}function ba(b,c,d,e,g,h,r,k){f.forEach(c,function(c){c.url&&R(c)&&(c.resourceInfo=b[c.deferredsPos][1],delete c.deferredsPos)});h=h||Ja(c);c=ya(c,
d,h,r,k);g.callback(c);return g}function Ta(b){!window.CanvasRenderingContext2D&&b.renderer&&"esri.renderer.HeatmapRenderer"===b.renderer.declaredClass&&b.setRenderer(H.fromJson({type:"simple",symbol:{color:[77,77,77,255],size:6,angle:0,xoffset:0,yoffset:0,type:"esriSMS",style:"esriSMSCircle",outline:{color:[255,255,255,255],width:.75,type:"esriSLS",style:"esriSLSSolid"}}}))}function Ca(b,c){var d=ja(b);return x({url:d,content:{f:"json"},callbackParamName:"callback",error:function(b,e){b.message=
b.message?b.message+(" [url:"+d+"]"):"[url:"+d+"]";c.push(b);v.defaults.io.errorHandler(b,e)}})}function Ha(b){var c=ta.arcgisUrl+"/"+b.itemId+"/data";return x({url:c,content:{f:"json"},callbackParamName:"callback",error:function(d,e){d.message=d.message?d.message+(" [url:"+c+"]"):"[url:"+c+"]";b.errors=b.errors||[];b.errors.push(d);v.defaults.io.errorHandler(d,e)}})}function oa(b,c,d){var e=new k;if(!(d.featureCollection&&d.featureCollection.layers||d.layers))return b.errors=b.errors||[],b.errors.push({message:"Invalid Feature Collection item data. [item id: "+
b.itemId+"]"}),e.errback(),e;d.layers&&(d.featureCollection={layers:d.layers},delete d.layers,t.isDefined(d.showLegend)&&(d.featureCollection.showLegend=d.showLegend,delete d.showLegend));Da(b,d.featureCollection,c).then(function(c){d.featureCollection=c;b.featureCollection&&b.featureCollection.layers?f.forEach(d.featureCollection.layers,function(c,d){d=b.featureCollection.layers[d];d.popupInfo||d.layerDefinition?d.layerDefinition?(t.isDefined(d.layerDefinition.minScale)&&t.isDefined(d.layerDefinition.maxScale)&&
(d.layerDefinition.minScale!==c.layerDefinition.minScale||d.layerDefinition.maxScale!==c.layerDefinition.maxScale)&&(delete c.layerDefinition.minScale,delete c.layerDefinition.maxScale),d.layerDefinition.drawingInfo&&h.toJson(d.layerDefinition.drawingInfo)!==h.toJson(c.layerDefinition.drawingInfo)&&delete c.layerDefinition.drawingInfo,d.layerDefinition.showLegend!==c.layerDefinition.showLegend&&delete c.layerDefinition.showLegend,d.layerDefinition=p.mixin(d.layerDefinition,c.layerDefinition)):d.layerDefinition=
c.layerDefinition:(d.popupInfo=c.popupInfo,d.layerDefinition=c.layerDefinition);d.featureSet=c.featureSet;d.nextObjectId=c.nextObjectId}):(b.featureCollection=b.featureCollection||{},b.featureCollection=p.mixin(b.featureCollection,d.featureCollection));e.callback(b)});return e}function Da(b,c,d){var g=new k;m(["./csv"],function(h){var r=[];f.forEach(c.layers,function(b){b.featureSet&&b.featureSet.features&&b.featureSet.features.length&&b.featureSet.features[0].geometry&&b.featureSet.features[0].geometry.spatialReference&&
(b.deferredsPos=r.length,r.push(h.projectFeatureCollection(b,d,b.featureSet.features[0].geometry.spatialReference)))});(new e(r)).addCallback(function(){f.forEach(c.layers,function(c){t.isDefined(c.deferredsPos)&&(r[c.deferredsPos].results&&r[c.deferredsPos].results.length?c=r[c.deferredsPos].results[0]:(c.errors=c.errors||[],c.errors.push({message:"Errors projecting feature collection. ["+b.title+" - "+c.layerDefinition.name+"]"})),delete c.deferredsPos)});g.callback(c)})});return g}function La(b,
c,d,h,r){var t=new k,u=new k,q=[],v;f.forEach(b.operationalLayers,function(b){b.itemId&&"Feature Collection"==b.type&&q.push(Ha(b).then(p.hitch(null,oa,b,d)))});0===q.length?Ba(b,c,d,h,u,r):(v=new e(q),v.addCallback(function(e){Ba(b,c,d,h,u,r)}));u.then(function(b){q=[];f.forEach(b,function(b){var c;b=b.layerObject;b instanceof O&&!b.loaded&&!b.loadError?(c=new k,g.once(b,"load, error",function(){c.callback(b)}),q.push(c)):b&&"esri.layers.WFSLayer"===b.declaredClass&&!b.loadError&&(c=new k,g.once(b,
"fromJsonComplete, error",function(d){c.callback(b)}),q.push(c))});if(q.length){var c=new k;v=new e(q);v.addCallback(function(){c.callback(b)});return c.promise}return b}).then(function(b){var c=[];f.forEach(b,function(b){var d=b.layerObject;d&&(d instanceof O||"esri.layers.StreamLayer"===d.declaredClass)?d.loaded&&d.labelingInfo&&(b.showLabels||d._collection?c.push(d):d.setShowLabels&&d.setShowLabels(!1)):d&&"esri.layers.WFSLayer"===d.declaredClass&&d.loaded&&d.labelingInfo&&c.push(d)});c.length?
m(["../layers/LabelLayer"],function(d){var e=new d;f.forEach(c,function(b){e.addFeatureLayer(b)});b.push({layerObject:e});t.callback(b)}):t.callback(b)});return t}function Ba(b,c,d,g,h,r){var k=[],t=[],u=[];f.forEach(b.operationalLayers,function(b,c){if(b.featureCollection&&b.featureCollection.layers){var d=b.featureCollection.layers.length;f.forEach(b.featureCollection.layers,function(e,g){var h=!0;b.visibleLayers&&-1==f.indexOf(b.visibleLayers,g)&&(h=!1);e.visibility=(null!=b.visibility?!!b.visibility:
!0)&&h;e.opacity=b.opacity;e.id=(b.id||"operational"+c)+"_"+g;b.title&&(e.title=1!==d&&e.layerDefinition.name&&b.title!==e.layerDefinition.name?b.title+" - "+e.layerDefinition.name:b.title);null==e.disablePopup&&(e.disablePopup=b.disablePopup);u.push(e)},this)}else u.push(b)});f.forEach(b.baseMap.baseMapLayers,function(b,c){b.baseMapLayer=!0;b.id=b.id||"base"+c;k.push(b)});f.forEach(u,function(b,c){b.id=b.id||"operational"+c;k.push(b)});f.forEach(k,function(b){b.url&&R(b)&&(b.deferredsPos=t.length,
b.errors=b.errors||[],t.push(Ca(b.url,b.errors)))});0===t.length?(d=d||Ja(k),k=ya(k,c,d,g,r),h.callback(k)):(new e(t)).addCallback(function(b){ba(b,k,c,t,h,d,g,r)});return h}function Na(b,c,d,e){var g=b.minScale,h=b.maxScale;if(10.1>=d.version&&c)for(b=c.length-1;0<=b;b--){if(c[b].id==e)if(0==g&&0<c[b].minScale?g=c[b].minScale:0<g&&0==c[b].minScale?g=d.minScale:0<g&&0<c[b].minScale&&(g=Math.min(g,c[b].minScale)),h=Math.max(d.maxScale||0,c[b].maxScale||0),d.setScaleRange(g,h),-1<c[b].parentLayerId)e=
c[b].parentLayerId;else break}else 10.1<d.version&&(f.forEach(b.layerInfos,function(b){b.id==e&&(0==g&&0<b.minScale?g=b.minScale:0<g&&0==b.minScale||0<g&&0<b.minScale&&(g=Math.min(g,b.minScale)),h=Math.max(h||0,b.maxScale||0))}),d.setScaleRange(g,h))}function Ka(b,c,d,e){var g=b.url,h=b.__popupIds,r=b.__popupUrls,k=b.__popupWhereClauses,u=b.__popupMinScales,q=b.__popupMaxScales,v=b.__resourceInfo,x=[];f.forEach(b.__popups,function(e,m){if(e){var w,C=[];f.forEach(e.fieldInfos,function(b){"shape"!==
b.fieldName.toLowerCase()&&C.push(b.fieldName)});if(b.dynamicLayerInfos&&0<b.dynamicLayerInfos.length){var B=f.filter(b.dynamicLayerInfos,function(b){return h[m]==b.id})[0].source;w=new O(g+"/dynamicLayer",{parentLayer:b,id:b.id+"_"+h[m],source:B,outFields:C,mode:O.MODE_SELECTION,infoTemplate:e&&new d(e),drawMode:!1,visible:b.visible,autoGeneralize:!0});var y=function(d,e){0<k[d].length&&e.setDefinitionExpression(k[d]);if(t.isDefined(u[d])||t.isDefined(q[d]))if(t.isDefined(b.minScale)||t.isDefined(b.maxScale)){var g=
b.minScale,f=b.maxScale;0==g&&0<u[d]?g=u[d]:0<g&&0==u[d]||0<g&&0<u[d]&&(g=Math.min(g,u[d]));f=Math.max(f||0,q[d]||0);e.setScaleRange(g,f)}else e.setScaleRange(u[d],q[d]);else Na(b,c||v.layers,e,h[d])};w.loaded?y(m,w):l.connect(w,"onLoad",function(b){y(m,w)})}else{var p=null,A=g+"/"+h[m];if(r[m].length)A=r[m];else if(c)for(B=0;B<c.length;B++)if(c[B].id===h[m]){p=c[B];break}w=new O(ja(A),{parentLayer:b,id:b.id+"_"+h[m],outFields:C,mode:O.MODE_SELECTION,infoTemplate:e&&new d(e),drawMode:!1,visible:b.visible,
resourceInfo:p,autoGeneralize:!0});w.loaded?(0<k[m].length&&w.setDefinitionExpression(k[m]),Na(b,c||v.layers,w,h[m])):l.connect(w,"onLoad",function(d){0<k[m].length&&w.setDefinitionExpression(k[m]);Na(b,c||v.layers,d,h[m])})}x.push(w)}});0<x.length&&(l.connect(b,"onVisibilityChange",p.hitch(this,function(b,c){f.forEach(b,function(b){c?b.show():b.hide()})},x)),l.connect(e,"onLayerRemove",p.hitch(this,function(b,c,d){b.id===d.id&&f.forEach(c,function(b){e.removeLayer(b)})},b,x)));delete b.__popups;
delete b.__popupIds;delete b.__popupUrls;delete b.__popupWhereClauses;delete b.__popupMinScales;delete b.__popupMaxScales;delete b.__resourceInfo;return x}function Xa(b){return x({url:ja(b.url+"/layers"),content:{f:"json"},callbackParamName:"callback",error:function(){}})}function Za(b,c,d){var g=[];f.forEach(b,function(b){var c=b.__popups;c&&1<c.length&&10<=b.version&&(b.__deferredsPos=g.length,g.push(Xa(b)))});var h=[];0<g.length?(new e(g)).addCallback(function(e){f.forEach(b,function(b){b.__popups&&
0<b.__popups.length&&(b.__deferredsPos||0===b.__deferredsPos?(h=h.concat(Ka(b,e[b.__deferredsPos][1].layers,d,c)),delete b.__deferredsPos):h=h.concat(Ka(b,null,d,c)))});c.addLayers(h)}):(f.forEach(b,function(b){b.__popups&&0<b.__popups.length&&(h=h.concat(Ka(b,null,d,c)))}),c.addLayers(h))}function Sa(b){f.forEach(b,function(b){var c=b.layer;c.toJson&&(b=c.toJson(),b.featureSet&&c.name&&-1<c.name.indexOf("Text")&&f.forEach(b.featureSet.features,function(b,d){b.attributes.TEXT&&(d=c.graphics[d],d.symbol.setText(b.attributes.TEXT),
b.symbol.horizontalAlignment&&(d.symbol.align=b.symbol.horizontalAlignment),d.setSymbol(d.symbol),d.setAttributes(b.attributes))},this))})}function Pa(b){var c=6;f.forEach(b,function(b){if(b=b.renderer)"esri.renderer.SimpleRenderer"===b.declaredClass?((b=b.symbol)&&b.xoffset&&(c=Math.max(c,Math.abs(b.xoffset))),b&&b.yoffset&&(c=Math.max(c,Math.abs(b.yoffset)))):"esri.renderer.UniqueValueRenderer"!==b.declaredClass&&"esri.renderer.ClassBreaksRenderer"!==b.declaredClass||f.forEach(b.infos,function(b){(b=
b.symbol)&&b.xoffset&&(c=Math.max(c,Math.abs(b.xoffset)));b&&b.yoffset&&(c=Math.max(c,Math.abs(b.yoffset)))})});return c}function db(b){var c=this,d=c.infoWindow,e=b.graphic;if(c.loaded){d.hide();d.clearFeatures();var g=[];f.forEach(c.graphicsLayerIds,function(b){(b=c.getLayer(b))&&b instanceof O&&b.loaded&&b.visible&&(b.clearSelection(),b.infoTemplate&&!b.suspended&&g.push(b))});f.forEach(c.layerIds,function(b){(b=c.getLayer(b))&&-1!==b.declaredClass.indexOf("ArcGISImageServiceLayer")&&b.loaded&&
b.visible&&b.infoTemplate&&g.push(b)});e=e&&e.getInfoTemplate()?e:null;if(g.length||e){var h=Pa(g),r=b.screenPoint,t=c.toMap(new A(r.x-h,r.y+h)),h=c.toMap(new A(r.x+h,r.y-h)),u=new C(t.x,t.y,h.x,h.y,c.spatialReference),q=new I;q.geometry=u;q.timeExtent=c.timeExtent;var v=!0,t=f.map(g,function(c){c=c&&c.isFeatureReductionActive&&c.isFeatureReductionActive()?c.getFeatureReductionLayer():c;var d;if(-1!==c.declaredClass.indexOf("ArcGISImageServiceLayer"))q.geometry=b.mapPoint,v=!1,d=c.queryVisibleRasters(q,
{rasterAttributeTableFieldPrefix:"Raster.",returnDomainValues:!0}),d.addCallback(function(){return c.getVisibleRasters()});else if("function"===typeof c.selectFeatures)d=c.selectFeatures(q),d.addCallback(function(){return c.getSelectedFeatures()});else{d=new k;var e=f.filter(c.graphics,function(b){return b&&b.visible&&u.intersects(b.geometry)});d.resolve(e)}return d});e&&(h=new k,h.callback([e]),t.splice(0,0,h));if(!f.some(t,function(b){return-1===b.fired})){var l=e?1:0;f.forEach(g,function(b){l=
-1!==b.declaredClass.indexOf("ArcGISImageServiceLayer")?l+b.getVisibleRasters().length:l+b.getSelectedFeatures().length});if(!l)return}d.setFeatures(t);d.show(b.mapPoint,{closestFirst:v})}}}function Ua(b,d){var e=d.mapOptions||{},g;e.infoWindow||(g=new G({visibleWhenEmpty:!1},c.create("div")),e.infoWindow=g);t.isDefined(e.showInfoWindowOnClick)||d.usePopupManager||(e.showInfoWindowOnClick=!1);b=new y(b,e);l.connect(b,"onLayersAddResult",Sa);return b}function bb(b,c,d,e,g,h){var r,k,t,q;if(e.map)r=
e.map,k=e.clickEventHandle,t=e.clickEventListener,q=e.errors;else{var v=d.itemData;!g.mapOptions.backgroundColor&&v.background&&v.background.color&&null!=v.background.color[0]&&(g.mapOptions.backgroundColor=u.toDojoColor(v.background.color));r=Ua(e,g);g.ignorePopups||g.disableClickBehavior||g.usePopupManager||(k=l.connect(r,"onClick",db),t=db)}r.addLayers(b);g.ignorePopups||g.usePopupManager||Za(b,r,g._clazz);var x=q||[];f.forEach(c,function(b){b.errors&&(x=x.concat(b.errors))},this);r.loaded?h.callback({map:r,
itemInfo:d,errors:x,clickEventHandle:k,clickEventListener:t}):l.connect(r,"onLoad",function(){h.callback({map:r,itemInfo:d,errors:x,clickEventHandle:k,clickEventListener:t})})}function W(b,c,d,e,g){var h=[];f.forEach(g,function(b){p.isArray(b.layerObject)?f.forEach(b.layerObject,function(b){h.push(b)}):h.push(b.layerObject)});if(K(g[0]))var r=setInterval(function(){if(g[0].layerObject&&g[0].layerObject.loaded)clearInterval(r),Wa(b,c,d,e,g,h);else if(g[0].errors){clearInterval(r);var f="";g[0].errors&&
g[0].errors.length&&(f=" ("+g[0].errors[0].message+")");e.errback(Error(N.arcgis.utils.baseLayerError+f))}},10);else if(!h[0]&&g[0].baseMapLayer){var k="";g[0].errors&&g[0].errors.length&&(k=" ("+g[0].errors[0].message+")");e.errback(Error(N.arcgis.utils.baseLayerError+k))}else Wa(b,c,d,e,g,h)}function Wa(b,c,d,e,g,h){try{var r=d.mapOptions||{};d.mapOptions=r;h=f.filter(h,t.isDefined);if(c.map||r.extent)bb(h,g,b,c,d,e);else{var k=h[0].spatialReference;if(r.center&&(null!=r.zoom||r.scale)&&(p.isArray(r.center)&&
(r.center=new B(r.center)),F.canProject(r.center,k)))bb(h,g,b,c,d,e);else{var u=b.item;if(u&&u.extent&&u.extent.length){var q=new C(u.extent[0][0],u.extent[0][1],u.extent[1][0],u.extent[1][1],new w({wkid:4326}));4326===k.wkid?(r.extent=q,bb(h,g,b,c,d,e)):900913===k.wkid||102100===k.wkid||102113===k.wkid||3857===k.wkid?(q.xmin=Math.max(q.xmin,-180),q.xmax=Math.min(q.xmax,180),q.ymin=Math.max(q.ymin,-89.99),q.ymax=Math.min(q.ymax,89.99),r.extent=F.geographicToWebMercator(q),bb(h,g,b,c,d,e)):d.geometryServiceURL||
v.defaults.geometryService?(d.geometryServiceURL?new P(d.geometryServiceURL):v.defaults.geometryService).project([q],k,function(f){f=f[0];r.extent=r.extent||f;bb(h,g,b,c,d,e)},function(){bb(h,g,b,c,d,e)}):e.errback(Error(N.arcgis.utils.geometryServiceError))}else bb(h,g,b,c,d,e)}}}catch(sb){e.errback(sb)}}function hb(b){var c=[];f.forEach(b.operationalLayers,function(b){b.featureCollection?c.push({featureCollection:b.featureCollection,visibility:null!=b.visibility?!!b.visibility:!0,title:b.title}):
b.layerObject&&c.push({layer:b.layerObject,visibility:null!=b.visibility?!!b.visibility:!0,title:b.title})});return c}function da(b){var c=[],d=b.baseMap.baseMapLayers;b.operationalLayers&&(d=d.concat(b.operationalLayers));f.forEach(d,function(b){var d={};if(b.featureCollection&&(!b||"CSV"!==b.layerType&&"CSV"!==b.type))!0===b.featureCollection.showLegend&&f.forEach(b.featureCollection.layers,function(e){if(!1!==e.showLegend){var g=e.layerObject.renderer;d={layer:e.layerObject,title:b.title,defaultSymbol:g&&
g.defaultSymbol&&g.defaultLabel?!0:!1};1<b.featureCollection.layers.length&&(d.title+=" - "+e.layerDefinition.name);c.push(d)}});else if(b.baseMapLayer&&!0===b.showLegend&&b.layerObject||!b.baseMapLayer&&!1!==b.showLegend&&b.layerObject&&!(b.layerObject instanceof O&&b.layerObject.mode===O.MODE_SELECTION)){var e=b.layerObject.renderer,g=b.layerObject.declaredClass,e=!e||e&&e.defaultSymbol&&e.defaultLabel?!0:!1;if(10.1>b.layerObject.version&&("esri.layers.ArcGISDynamicMapServiceLayer"===g||"esri.layers.ArcGISTiledMapServiceLayer"===
g)||"esri.layers.ArcGISImageServiceLayer"===g)e=!0;d={layer:b.layerObject,title:b.title,defaultSymbol:e};b.layers&&(g=f.map(f.filter(b.layers,function(b){return!1===b.showLegend}),function(b){return b.id}),g.length&&(d.hideLayers=g));c.push(d)}});return c}function gb(b,c){function d(b,c){f.forEach(b,function(b,d){switch(b){case "../layers/ArcGISDynamicMapServiceLayer":L=c[d];break;case "../layers/ArcGISImageServiceLayer":sa=c[d];break;case "../layers/ArcGISImageServiceVectorLayer":wa=c[d];break;case "../layers/CSVLayer":Va=
c[d];break;case "../layers/DynamicLayerInfo":Qa=c[d];break;case "../layers/GeoRSSLayer":$a=c[d];break;case "../layers/ImageParameters":ab=c[d];break;case "../layers/ImageServiceParameters":Ia=c[d];break;case "../layers/KMLLayer":eb=c[d];break;case "../layers/LabelClass":Ra=c[d];break;case "../layers/LayerDrawingOptions":Ya=c[d];break;case "../layers/MosaicRule":Aa=c[d];break;case "../layers/OpenStreetMapLayer":Z=c[d];break;case "../layers/RasterFunction":X=c[d];break;case "../layers/RasterXLayer":T=
c[d];break;case "../layers/StreamLayer":za=c[d];break;case "../layers/TileInfo":xa=c[d];break;case "../layers/VectorTileLayer":Oa=c[d];break;case "../virtualearth/VETiledLayer":cb=c[d];break;case "../layers/WebTiledLayer":kb=c[d];break;case "../layers/WFSLayer":mb=c[d];break;case "../layers/WMSLayer":ib=c[d];break;case "../layers/WMSLayerInfo":lb=c[d]}})}var e=new k;b=b.itemData;c=[];b.baseMap&&b.baseMap.baseMapLayers&&(c=c.concat(b.baseMap.baseMapLayers));b.operationalLayers&&(c=c.concat(b.operationalLayers));
b=f.map(c,function(b){return b&&b.layerType});var g=[],h=[];c=!1;for(var r=0;r<b.length;r++){switch(b[r]){case "ArcGISFeatureLayer":-1===f.indexOf(g,"../layers/LabelClass")&&g.push("../layers/LabelClass");break;case "ArcGISImageServiceLayer":case "ArcGISTiledImageServiceLayer":-1===f.indexOf(g,"../layers/ArcGISImageServiceLayer")&&(g.push("../layers/ArcGISImageServiceLayer"),h.push("../layers/ImageServiceParameters"),h.push("../layers/MosaicRule"),h.push("../layers/RasterFunction"),g.push("../layers/RasterXLayer"));
break;case "ArcGISImageServiceVectorLayer":-1===f.indexOf(g,"../layers/ArcGISImageServiceVectorLayer")&&(g.push("../layers/ArcGISImageServiceVectorLayer"),h.push("../layers/ImageServiceParameters"),h.push("../layers/MosaicRule"),h.push("../layers/RasterFunction"));break;case "ArcGISMapServiceLayer":case "ArcGISTiledMapServiceLayer":-1===f.indexOf(g,"../layers/ArcGISDynamicMapServiceLayer")&&(g.push("../layers/ArcGISDynamicMapServiceLayer"),h.push("../layers/DynamicLayerInfo"),h.push("../layers/ImageParameters"),
h.push("../layers/LayerDrawingOptions"));break;case "ArcGISStreamLayer":-1===f.indexOf(g,"../layers/StreamLayer")&&g.push("../layers/StreamLayer");-1===f.indexOf(g,"../layers/LabelClass")&&g.push("../layers/LabelClass");break;case "BingMapsAerial":case "BingMapsHybrid":case "BingMapsRoad":-1===f.indexOf(g,"../virtualearth/VETiledLayer")&&g.push("../virtualearth/VETiledLayer");break;case "CSV":-1===f.indexOf(g,"../layers/CSVLayer")&&(g.push("../layers/CSVLayer"),h.push("./csv"));break;case "GeoRSS":-1===
f.indexOf(g,"../layers/GeoRSSLayer")&&g.push("../layers/GeoRSSLayer");break;case "KML":-1===f.indexOf(g,"../layers/KMLLayer")&&g.push("../layers/KMLLayer");break;case "OpenStreetMap":-1===f.indexOf(g,"../layers/OpenStreetMapLayer")&&g.push("../layers/OpenStreetMapLayer");break;case "VectorTileLayer":-1===f.indexOf(g,"../layers/VectorTileLayer")&&g.push("../layers/VectorTileLayer");break;case "WebTiledLayer":-1===f.indexOf(g,"../layers/WebTiledLayer")&&(g.push("../layers/WebTiledLayer"),h.push("../layers/TileInfo"));
break;case "WFS":-1===f.indexOf(g,"../layers/WFSLayer")&&g.push("../layers/WFSLayer");break;case "WMS":-1===f.indexOf(g,"../layers/WMSLayer")&&(g.push("../layers/WMSLayer"),h.push("../layers/WMSLayerInfo"));break;default:c=!0}if(c)break}c&&(g=fb,h=nb);g.length?m(g,function(){d(g,arguments);h.length?m(h,function(){d(h,arguments);e.resolve()}):e.resolve()}):e.resolve();return e}function ua(b){b=b.itemData;var c=function(b,d){"GroupLayer"===b.layerType?f.forEach(b.layers,function(e){e.visibility=!1===
b.visibility?!1:e.visibility;e.opacity=t.isDefined(b.opacity)?t.isDefined(e.opacity)?e.opacity*b.opacity:b.opacity:e.opacity;c(e,d)}):d.push(b)},d=[];f.forEach(b.operationalLayers,function(b){c(b,d)});b.operationalLayers=d}function Ea(b,c,d,e){ua(e);var g=e.itemData;g.baseMap&&g.baseMap.baseMapLayers&&g.baseMap.baseMapLayers.length&&(g.baseMap.baseMapLayers[0].firstLayer=!0);var h=c.layerMixins,r=h&&h.length;if(r){var t=function(b){for(var c=0;c<r;c++){var d=h[c];if(d.mixin)if(d.hasOwnProperty("id")){if(b.id===
d.id){p.mixin(b,d.mixin);break}}else if(b.url===d.url){p.mixin(b,d.mixin);break}}};f.forEach(g.baseMap&&g.baseMap.baseMapLayers,t);f.forEach(g.operationalLayers,t)}gb(e,c).then(function(){return ca(e,c)}).then(function(){return la(e,c)}).then(function(c){var e=c[0],g=c[1];if(e.itemData.operationalLayers&&0!==e.itemData.operationalLayers.length){var h=new k,r=e.itemData.baseMap.baseMapLayers.slice(),t=f.filter(e.itemData.baseMap.baseMapLayers,function(b){return!b.isReference});c={item:e.item,itemData:{baseMap:{baseMapLayers:t},
background:p.clone(e.itemData.background)}};e.itemData.baseMap.baseMapLayers=f.filter(e.itemData.baseMap.baseMapLayers,function(b){return b.isReference});ha(c,g).addCallback(function(c){La(c.itemData,g).addCallback(p.hitch(null,W,c,b,g,h))});h.then(function(b){ha(e,g).addCallback(function(c){La(c.itemData,g,b.map.spatialReference,t,b.map).addCallback(function(e){c.itemData.baseMap.baseMapLayers=r;W(c,b,g,d,e)})})},p.hitch(d,d.errback))}else ha(e,g).addCallback(function(c){La(c.itemData,g).addCallback(p.hitch(null,
W,c,b,g,d))})})}function V(b,c){"undefined"===typeof c&&(c=!0);ta._arcgisUrl&&0<ta._arcgisUrl.length&&(ta.arcgisUrl=ta._arcgisUrl);var d={},e=new k;x({url:ta.arcgisUrl+"/"+b,content:{f:"json"},callbackParamName:"callback",load:function(g){d.item=g;c?x({url:ta.arcgisUrl+"/"+b+"/data",content:{f:"json"},callbackParamName:"callback",load:function(b){d.itemData=b;e.callback(d)},error:function(b){e.errback(b)}}):e.callback(d)},error:function(b){e.errback(b)}});return e}var ta,L,sa,wa,Va,Qa,$a,ab,Ia,eb,
Ra,Ya,Aa,Z,X,T,za,xa,Oa,cb,kb,mb,ib,lb,fb="../layers/ArcGISDynamicMapServiceLayer ../layers/ArcGISImageServiceLayer ../layers/ArcGISImageServiceVectorLayer ../layers/CSVLayer ../layers/GeoRSSLayer ../layers/KMLLayer ../layers/LabelClass ../layers/OpenStreetMapLayer ../layers/RasterXLayer ../layers/StreamLayer ../layers/VectorTileLayer ../virtualearth/VETiledLayer ../layers/WebTiledLayer ../layers/WFSLayer ../layers/WMSLayer".split(" "),nb="./csv ../layers/DynamicLayerInfo ../layers/ImageParameters ../layers/ImageServiceParameters ../layers/LayerDrawingOptions ../layers/MosaicRule ../layers/RasterFunction ../layers/TileInfo ../layers/WMSLayerInfo".split(" ");
ta={arcgisUrl:z.getProtocolForWebResource()+"//www.arcgis.com/sharing/rest/content/items",getItem:V,createMap:function(b,c,d){var e=new k;d=d||{};var g=d.infoTemplateClass;d._clazz=g&&(p.isObject(g)?g:p.getObject(g))||D;p.isString(b)?V(b).addCallback(p.hitch(null,Ea,c,d,e)).addErrback(p.hitch(e,e.errback)):Ea(c,d,e,b);e.addCallback(function(b){var c=b.map;c&&(c.tables=p.getObject("itemInfo.itemData.tables",!1,b)||[])});return e},getLayerList:function(b){return b&&b.itemInfo&&b.itemInfo.itemData?hb(b.itemInfo.itemData):
[]},getLegendLayers:function(b){return b&&b.itemInfo&&b.itemInfo.itemData?da(b.itemInfo.itemData):[]},_arcgisUrl:null,_getItemProps:ha,_getItemData:Y,_getBingKey:aa,_portalUrlResponse:ia,_portalUrlFailure:fa,_processFSItemProperties:S,_processSSItemProperties:ma,_getLayers:La,_preBuildLayerObjects:ba,_buildLayerObjects:ya,_preCreateMap:W,_getMapSR:Ja,_createMap:bb,_addSelectionLayers:Za,_createSelectionFeatureLayers:Ka,_getServiceInfo:Ca,_getFeatureCollectionItem:Ha,_mergeFeatureCollectionItem:oa,
_projectFeatureCollection:Da,_getLayersInfo:Xa,_initLayer:Ma,_loadAsCached:Fa,_loadAsDynamic:ga,_processPopups:pa,_onLayersAddResult:Sa,_sameSpatialReferenceAsBasemap:ra,_sameTilingSchemeAsBasemap:qa,_showPopup:db,_calculateClickTolerance:Pa,_getVisibleFeatureLayers:Ga,_updateLayerScaleInfo:Na,_checkUrl:ja,_isHostedService:ka,_isAgolService:na,_getLegendLayers:da};p.setObject("arcgis.utils",ta,r);return ta})},"dojo/DeferredList":function(){define("dojo/DeferredList",["./_base/kernel","./_base/Deferred",
"./_base/array"],function(m,p,f){m.DeferredList=function(l,k,h,q,g){var e=[];p.call(this);var c=this;0!==l.length||k||this.resolve([0,[]]);var b=0;f.forEach(l,function(d,g){function f(d,f){e[g]=[d,f];b++;b===l.length&&c.resolve(e)}d.then(function(b){k?c.resolve([g,b]):f(!0,b)},function(b){h?c.reject(b):f(!1,b);if(q)return null;throw b;})})};m.DeferredList.prototype=new p;m.DeferredList.prototype.gatherResults=function(l){l=new m.DeferredList(l,!1,!0,!1);l.addCallback(function(k){var h=[];f.forEach(k,
function(f){h.push(f[1])});return h});return l};return m.DeferredList})},"dojox/gfx/_base":function(){define("dojox/gfx/_base","dojo/_base/kernel dojo/_base/lang dojo/_base/Color dojo/_base/sniff dojo/_base/window dojo/_base/array dojo/dom dojo/dom-construct dojo/dom-geometry".split(" "),function(m,p,f,l,k,h,q,g,e){var c=p.getObject("dojox.gfx",!0),b=c._base={};c._hasClass=function(b,c){return(b=b.getAttribute("className"))&&0<=(" "+b+" ").indexOf(" "+c+" ")};c._addClass=function(b,c){var d=b.getAttribute("className")||
"";(!d||0>(" "+d+" ").indexOf(" "+c+" "))&&b.setAttribute("className",d+(d?" ":"")+c)};c._removeClass=function(b,c){var d=b.getAttribute("className");d&&b.setAttribute("className",d.replace(new RegExp("(^|\\s+)"+c+"(\\s+|$)"),"$1$2"))};b._getFontMeasurements=function(){var b={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},c,d;l("ie")&&(d=k.doc.documentElement.style.fontSize||"",d||(k.doc.documentElement.style.fontSize="100%"));
var e=g.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},k.body());for(c in b)e.style.fontSize=c,b[c]=16*Math.round(12*e.offsetHeight/16)/12/1E3;l("ie")&&(k.doc.documentElement.style.fontSize=d);k.body().removeChild(e);return b};var d=null;b._getCachedFontMeasurements=function(c){if(c||!d)d=b._getFontMeasurements();return d};var r=null,v={};b._getTextBox=function(b,c,
d){var f,h,t=arguments.length,u;r||(r=g.create("div",{style:{position:"absolute",top:"-10000px",left:"0",visibility:"hidden"}},k.body()));f=r;f.className="";h=f.style;h.borderWidth="0";h.margin="0";h.padding="0";h.outline="0";if(1<t&&c)for(u in c)u in v||(h[u]=c[u]);2<t&&d&&(f.className=d);f.innerHTML=b;f.getBoundingClientRect?(h=f.getBoundingClientRect(),h={l:h.left,t:h.top,w:h.width||h.right-h.left,h:h.height||h.bottom-h.top}):h=e.getMarginBox(f);f.innerHTML="";return h};b._computeTextLocation=
function(b,c,d,e){var g={};switch(b.align){case "end":g.x=b.x-c;break;case "middle":g.x=b.x-c/2;break;default:g.x=b.x}g.y=b.y-d*(e?.75:1);return g};b._computeTextBoundingBox=function(d){if(!c._base._isRendered(d))return{x:0,y:0,width:0,height:0};var e;e=d.getShape();var g=d.getFont()||c.defaultFont;d=d.getTextWidth();g=c.normalizedLength(g.size);e=b._computeTextLocation(e,d,g,!0);return{x:e.x,y:e.y,width:d,height:g}};b._isRendered=function(b){for(b=b.parent;b&&b.getParent;)b=b.parent;return null!==
b};var u=0;b._getUniqueId=function(){var b;do b=m._scopeName+"xUnique"+ ++u;while(q.byId(b));return b};var t=l("pointer-events")?"touchAction":l("MSPointer")?"msTouchAction":null;b._fixMsTouchAction=t?function(b){b.rawNode.style[t]="none"}:function(){};p.mixin(c,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},
defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},
defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var b={};return function(d){var e=b[d];if(e)return new e;e=b[d]=new Function;e.prototype=c["default"+d];return new e}}(),normalizeColor:function(b){return b instanceof f?b:new f(b)},normalizeParameters:function(b,
c){var d;if(c){var e={};for(d in b)d in c&&!(d in e)&&(b[d]=c[d])}return b},makeParameters:function(b,c){var d=null;if(!c)return p.delegate(b);var e={};for(d in b)d in e||(e[d]=p.clone(d in c?c[d]:b[d]));return e},formatNumber:function(b,c){var d=b.toString();if(0<=d.indexOf("e"))d=b.toFixed(4);else{var e=d.indexOf(".");0<=e&&5<d.length-e&&(d=b.toFixed(4))}return 0>b?d:c?" "+d:d},makeFontString:function(b){return b.style+" "+b.variant+" "+b.weight+" "+b.size+" "+b.family},splitFontString:function(b){var d=
c.getDefault("Font");b=b.split(/\s+/);if(!(5>b.length)){d.style=b[0];d.variant=b[1];d.weight=b[2];var e=b[3].indexOf("/");d.size=0>e?b[3]:b[3].substring(0,e);var g=4;0>e&&("/"==b[4]?g=6:"/"==b[4].charAt(0)&&(g=5));g<b.length&&(d.family=b.slice(g).join(" "))}return d},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return c._base._getCachedFontMeasurements()["12pt"]/12},pt2px:function(b){return b*c.px_in_pt()},px2pt:function(b){return b/c.px_in_pt()},normalizedLength:function(b){if(0===b.length)return 0;
if(2<b.length){var d=c.px_in_pt(),e=parseFloat(b);switch(b.slice(-2)){case "px":return e;case "pt":return e*d;case "in":return 72*e*d;case "pc":return 12*e*d;case "mm":return e*c.mm_in_pt*d;case "cm":return e*c.cm_in_pt*d}}return parseFloat(b)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,equalSources:function(b,c){return b&&c&&b===c},switchTo:function(b){var d="string"==typeof b?c[b]:b;d&&(h.forEach("Group Rect Ellipse Circle Line Polyline Image Text Path TextPath Surface createSurface fixTarget".split(" "),
function(b){c[b]=d[b]}),"string"==typeof b?c.renderer=b:h.some(["svg","vml","canvas","canvasWithEvents","silverlight"],function(b){return c.renderer=c[b]&&c[b].Surface===c.Surface?b:null}))}});return c})},"esri/kernel":function(){define("esri/kernel",["dojo/_base/kernel","dojo/_base/config","dojo/has"],function(m,p,f){var l=function(){return this}(),k=l.location,h=k.pathname,q=k.protocol,k={version:"3.34",_appBaseUrl:q+"//"+k.host+h.substring(0,h.lastIndexOf(h.split("/")[h.split("/").length-1]))};
p.noGlobals||(l.esri=k);m.isAsync||f.add("extend-esri",1);(k.dijit=k.dijit||{})._arcgisUrl=("http:"===q||"https:"===q?q:"http:")+"//www.arcgis.com/sharing/rest";return k})},"esri/config":function(){define("esri/config",["dojo/_base/config","dojo/topic","dojo/has","./kernel"],function(m,p,f,l){var k=function(){return this}(),h={defaults:{screenDPI:96,geometryService:null,kmlService:null,map:{width:400,height:400,layerNamePrefix:"layer",graphicsLayerNamePrefix:"graphicsLayer",slider:{left:"30px",top:"30px",
width:null,height:"200px"},sliderLabel:{tick:5,labels:null,style:"width:2em; font-family:Verdana; font-size:75%;"},sliderChangeImmediate:!0,zoomSymbol:{color:[0,0,0,64],outline:{color:[255,0,0,255],width:1.25,style:"esriSLSSolid"},style:"esriSFSSolid"},zoomDuration:500,zoomRate:25,zoomAnimationThrottled:!1,panDuration:350,panRate:25,logoLink:"http://www.esri.com"},autoSpatialIndexing:k.Worker&&!1,io:{errorHandler:function(f,g){p.publish("esri.Error",[f])},proxyUrl:null,alwaysUseProxy:!1,useCors:"with-credentials",
corsEnabledServers:[/^https?:\/\/.+\.arcgis\.com(\/|$)/i,"server.arcgisonline.com","services.arcgisonline.com","www.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","tiles.arcgis.com","tiles1.arcgis.com","tiles2.arcgis.com","tiles3.arcgis.com","tiles4.arcgis.com","basemaps.arcgis.com","basemapsbeta.arcgis.com","elevation3d.arcgis.com","services.arcgis.com","services1.arcgis.com","services2.arcgis.com","services3.arcgis.com","services4.arcgis.com","services5.arcgis.com","services6.arcgis.com",
"services7.arcgis.com","services8.arcgis.com","services9.arcgis.com","cdn.arcgis.com","cdn-a.arcgis.com","cdn-b.arcgis.com","static.arcgis.com","utility.arcgis.com","utility.arcgisonline.com","geocode.arcgis.com","geoenrich.arcgis.com","qaext.arcgis.com","staticqa.arcgis.com","tilesqa.arcgis.com","servicesqa.arcgis.com","servicesqa1.arcgis.com","servicesqa2.arcgis.com","servicesqa3.arcgis.com","geocodeqa.arcgis.com","geoenrichqa.arcgis.com","dev.arcgis.com","devext.arcgis.com","localvtiles.arcgis.com",
"staticdev.arcgis.com","tilesdevext.arcgis.com","elevation3ddev.arcgis.com","servicesdev.arcgis.com","servicesdev1.arcgis.com","servicesdev2.arcgis.com","servicesdev3.arcgis.com","geocodedev.arcgis.com","geoenrichdev.arcgis.com","basemapsdev.arcgis.com","basemapsbetadev.arcgis.com"],corsDetection:k.cordova?!1:!0,corsDetectionTimeout:15,corsStatus:{},webTierAuthServers:[],proxyRules:[],postLength:2E3,timeout:6E4,useWorkers:"on-request",maxRequestWorkers:5,httpsDomains:"arcgis.com arcgisonline.com esrikr.com premiumservices.blackbridge.com esripremium.accuweather.com gbm.digitalglobe.com firstlook.digitalglobe.com msi.digitalglobe.com".split(" ")},
workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}}}};f("extend-esri")&&(l.config=h);m.noGlobals||(k.esriConfig=h);return h})},"esri/Color":function(){define("esri/Color",["dojo/_base/declare","dojo/_base/Color","dojo/has","./kernel"],function(m,p,f,l){var k=m([p],{declaredClass:"esri.Color"});k.toJsonColor=function(f){return f&&[f.r,f.g,f.b,1<f.a?f.a:Math.round(255*f.a)]};k.toDojoColor=function(f){return f&&new k([f[0],f[1],f[2],f[3]/255])};var h="named blendColors fromRgb fromHex fromArray fromString".split(" ");
for(m=0;m<h.length;m++)k[h[m]]=p[h[m]];f("extend-esri")&&(l.Color=k);return k})},"esri/lang":function(){define("esri/lang","dojo/_base/array dojo/_base/json dojo/_base/kernel dojo/_base/lang dojo/date dojo/has dojo/number dojo/date/locale ./kernel".split(" "),function(m,p,f,l,k,h,q,g,e){function c(b,c,d,e){(c=c&&c[b])?c={formatType:c.formatType,options:c}:e&&-1!==m.indexOf(e.properties||"",b)?c={formatType:e.formatter||"DateString",options:null}:d&&-1!==m.indexOf(d.properties||"",b)&&(c={formatType:d.formatter||
"NumberFormat",options:null});return c}function b(b,c,d){return[l.isString(b)?b.split(""):b,c||f.global,l.isString(d)?new Function("item","index","array",d):d]}function d(b){return void 0!==b&&null!==b}function r(b){return d(b)?b:""}function v(b,c,e,f){var h=e.match(/([^\(]+)(\([^\)]+\))?/i);e=l.trim(h[1]);var u=h[2]?l.trim(h[2]):null,h=c[b];f=f||(u?p.fromJson(u.replace(/^\(/,"({").replace(/\)$/,"})")):{});u=f.utcOffset;if(-1===m.indexOf(t,e))e=l.getObject(e),l.isFunction(e)&&(h=e(h,b,c,f));else if("number"===
typeof h||"string"===typeof h&&h&&!isNaN(Number(h)))switch(h=Number(h),e){case "NumberFormat":return q.format(h,f);case "DateString":b=new Date(h);if(f.local||f.systemLocale)return f.systemLocale?b.toLocaleDateString()+(f.hideTime?"":" "+b.toLocaleTimeString()):b.toDateString()+(f.hideTime?"":" "+b.toTimeString());b=b.toUTCString();f.hideTime&&(b=b.replace(/\s+\d\d\:\d\d\:\d\d\s+(utc|gmt)/i,""));return b;case "DateFormat":return b=new Date(h),d(u)&&(b=k.add(b,"minute",b.getTimezoneOffset()-u)),g.format(b,
f)}return r(h)}function u(b,c){var d;if(c)for(d in b)b.hasOwnProperty(d)&&(void 0===b[d]?delete b[d]:b[d]instanceof Object&&u(b[d],!0));else for(d in b)b.hasOwnProperty(d)&&void 0===b[d]&&delete b[d];return b}var t=["NumberFormat","DateString","DateFormat"],x=/<\/?[^>]+>/g,w={valueOf:function(b,c){for(var d in b)if(b[d]==c)return d;return null},stripTags:function(b){if(b){var c=typeof b;if("string"===c)b=b.replace(x,"");else if("object"===c)for(var d in b)(c=b[d])&&"string"===typeof c&&(c=c.replace(x,
"")),b[d]=c}return b},substitute:function(b,e,g){var f,h,k,t;d(g)&&(l.isObject(g)?(f=g.first,h=g.dateFormat,k=g.numberFormat,t=g.format):f=g);if(e&&"${*}"!==e)return l.replace(e,l.hitch({obj:b},function(b,d){var e=d.split(":");return 1<e.length?(d=e[0],e.shift(),(b=t&&t[e[0]])?e=b.formatType:(e=e.join(":"),b=null),v(d,this.obj,e,b)):(b=c(d,t,k,h))?v(d,this.obj,b.formatType,b.options):r(this.obj[d])}),/\$\{([^\}]+)\}/g);e=[];for(var u in b)if(g=(g=c(u,t,k,h))?v(u,b,g.formatType,g.options):b[u],e.push(u+
" \x3d "+r(g)+"\x3cbr/\x3e"),f)break;return e.join("")},filter:function(c,d,e){d=b(c,e,d);e={};var g;c=d[0];for(g in c)d[2].call(d[g],c[g],g,c)&&(e[g]=c[g]);return e},startsWith:function(b,c,d){d=d||0;return b.indexOf(c,d)===d},endsWith:function(b,c,d){if("number"!==typeof d||!isFinite(d)||Math.floor(d)!==d||d>b.length)d=b.length;d-=c.length;b=b.indexOf(c,d);return-1!==b&&b===d},isDefined:d,fixJson:u,isObject:function(b){return b&&"object"===typeof b},isString:function(b){return"string"===typeof b},
mixin:function(b,c){for(var d in c)c.hasOwnProperty(d)&&(b[d]=c[d]);return b},clone2DArray:function(b){if(b=b?b.slice(0):null){var c,d=b.length;for(c=0;c<d;c++)b[c]=b[c]?b[c].slice(0):null}return b},clone3DArray:function(b){if(b=b?b.slice(0):null){var c,d=b.length;for(c=0;c<d;c++){b[c]=b[c]?b[c].slice(0):null;var e=b[c];if(e){var g,f=e.length;for(g=0;g<f;g++)e[g]=e[g]?e[g].slice(0):null}}}return b}};h("extend-esri")&&(l.mixin(e,w),e._isDefined=d,e._getParts=b,e._sanitize=u);return w})},"dojo/date":function(){define("dojo/date",
["./has","./_base/lang"],function(m,p){var f={getDaysInMonth:function(l){var k=l.getMonth();return 1==k&&f.isLeapYear(l)?29:[31,28,31,30,31,30,31,31,30,31,30,31][k]},isLeapYear:function(f){f=f.getFullYear();return!(f%400)||!(f%4)&&!!(f%100)},getTimezoneName:function(f){var k=f.toString(),h="",q=k.indexOf("(");if(-1<q)h=k.substring(++q,k.indexOf(")"));else if(q=/([A-Z\/]+) \d{4}$/,k=k.match(q))h=k[1];else if(k=f.toLocaleString(),q=/ ([A-Z\/]+)$/,k=k.match(q))h=k[1];return"AM"==h||"PM"==h?"":h},compare:function(f,
k,h){f=new Date(+f);k=new Date(+(k||new Date));"date"==h?(f.setHours(0,0,0,0),k.setHours(0,0,0,0)):"time"==h&&(f.setFullYear(0,0,0),k.setFullYear(0,0,0));return f>k?1:f<k?-1:0},add:function(f,k,h){var q=new Date(+f),g=!1,e="Date";switch(k){case "day":break;case "weekday":var c;(k=h%5)?c=parseInt(h/5):(k=0<h?5:-5,c=0<h?(h-5)/5:(h+5)/5);var b=f.getDay(),d=0;6==b&&0<h?d=1:0==b&&0>h&&(d=-1);b+=k;if(0==b||6==b)d=0<h?2:-2;h=7*c+k+d;break;case "year":e="FullYear";g=!0;break;case "week":h*=7;break;case "quarter":h*=
3;case "month":g=!0;e="Month";break;default:e="UTC"+k.charAt(0).toUpperCase()+k.substring(1)+"s"}if(e)q["set"+e](q["get"+e]()+h);g&&q.getDate()<f.getDate()&&q.setDate(0);return q},difference:function(l,k,h){k=k||new Date;h=h||"day";var q=k.getFullYear()-l.getFullYear(),g=1;switch(h){case "quarter":l=l.getMonth();k=k.getMonth();g=Math.floor(k/3)+1+4*q-(Math.floor(l/3)+1);break;case "weekday":q=Math.round(f.difference(l,k,"day"));h=parseInt(f.difference(l,k,"week"));if(0==q%7)q=5*h;else{var g=0,e=l.getDay(),
c=k.getDay();h=parseInt(q/7);k=q%7;l=new Date(l);l.setDate(l.getDate()+7*h);l=l.getDay();if(0<q)switch(!0){case 6==e:g=-1;break;case 0==e:g=0;break;case 6==c:g=-1;break;case 0==c:g=-2;break;case 5<l+k:g=-2}else if(0>q)switch(!0){case 6==e:g=0;break;case 0==e:g=1;break;case 6==c:g=2;break;case 0==c:g=1;break;case 0>l+k:g=2}q=q+g-2*h}g=q;break;case "year":g=q;break;case "month":g=k.getMonth()-l.getMonth()+12*q;break;case "week":g=parseInt(f.difference(l,k,"day")/7);break;case "day":g/=24;case "hour":g/=
60;case "minute":g/=60;case "second":g/=1E3;case "millisecond":g*=k.getTime()-l.getTime()}return Math.round(g)}};p.mixin(p.getObject("dojo.date",!0),f);return f})},"dojo/date/locale":function(){define("dojo/date/locale","../_base/lang ../_base/array ../date ../cldr/supplemental ../i18n ../regexp ../string ../i18n!../cldr/nls/gregorian module".split(" "),function(m,p,f,l,k,h,q,g,e){function c(b,c,d,e){return e.replace(/([a-z])\1*/ig,function(g){var f,h,k=g.charAt(0);g=g.length;var t=["abbr","wide",
"narrow"];switch(k){case "G":f=c[4>g?"eraAbbr":"eraNames"][0>b.getFullYear()?0:1];break;case "y":f=b.getFullYear();switch(g){case 1:break;case 2:if(!d.fullYear){f=String(f);f=f.substr(f.length-2);break}default:h=!0}break;case "Q":case "q":f=Math.ceil((b.getMonth()+1)/3);h=!0;break;case "M":case "L":f=b.getMonth();3>g?(f+=1,h=!0):(k=["months","L"==k?"standAlone":"format",t[g-3]].join("-"),f=c[k][f]);break;case "w":f=r._getWeekOfYear(b,0);h=!0;break;case "d":f=b.getDate();h=!0;break;case "D":f=r._getDayOfYear(b);
h=!0;break;case "e":case "c":if(f=b.getDay(),2>g){f=(f-l.getFirstDayOfWeek(d.locale)+8)%7;break}case "E":f=b.getDay();3>g?(f+=1,h=!0):(k=["days","c"==k?"standAlone":"format",t[g-3]].join("-"),f=c[k][f]);break;case "a":k=12>b.getHours()?"am":"pm";f=d[k]||c["dayPeriods-format-wide-"+k];break;case "h":case "H":case "K":case "k":h=b.getHours();switch(k){case "h":f=h%12||12;break;case "H":f=h;break;case "K":f=h%12;break;case "k":f=h||24}h=!0;break;case "m":f=b.getMinutes();h=!0;break;case "s":f=b.getSeconds();
h=!0;break;case "S":f=Math.round(b.getMilliseconds()*Math.pow(10,g-3));h=!0;break;case "v":case "z":if(f=r._getZone(b,!0,d))break;g=4;case "Z":k=r._getZone(b,!1,d);k=[0>=k?"+":"-",q.pad(Math.floor(Math.abs(k)/60),2),q.pad(Math.abs(k)%60,2)];4==g&&(k.splice(0,0,"GMT"),k.splice(3,0,":"));f=k.join("");break;default:throw Error("dojo.date.locale.format: invalid pattern char: "+e);}h&&(f=q.pad(f,g));return f})}function b(b,c,d,e){var g=function(b){return b};c=c||g;d=d||g;e=e||g;var f=b.match(/(''|[^'])+/g),
h="'"==b.charAt(0);p.forEach(f,function(b,e){b?(f[e]=(h?d:c)(b.replace(/''/g,"'")),h=!h):f[e]=""});return e(f.join(""))}function d(b,c,d,e){e=h.escapeString(e);d.strict||(e=e.replace(" a"," ?a"));return e.replace(/([a-z])\1*/ig,function(e){var g;g=e.charAt(0);var f=e.length,h="",r="";d.strict?(1<f&&(h="0{"+(f-1)+"}"),2<f&&(r="0{"+(f-2)+"}")):(h="0?",r="0{0,2}");switch(g){case "y":g="\\d{2,4}";break;case "M":case "L":2<f?(g=c["months-"+("L"==g?"standAlone":"format")+"-"+v[f-3]].slice(0).join("|"),
d.strict||(g=g.replace(/\./g,""),g="(?:"+g+")\\.?")):g="1[0-2]|"+h+"[1-9]";break;case "D":g="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+h+"[1-9][0-9]|"+r+"[1-9]";break;case "d":g="3[01]|[12]\\d|"+h+"[1-9]";break;case "w":g="[1-4][0-9]|5[0-3]|"+h+"[1-9]";break;case "E":case "e":case "c":g=".+?";break;case "h":g="1[0-2]|"+h+"[1-9]";break;case "k":g="1[01]|"+h+"\\d";break;case "H":g="1\\d|2[0-3]|"+h+"\\d";break;case "K":g="1\\d|2[0-4]|"+h+"[1-9]";break;case "m":case "s":g="[0-5]\\d";break;case "S":g="\\d{"+
f+"}";break;case "a":f=d.am||c["dayPeriods-format-wide-am"];h=d.pm||c["dayPeriods-format-wide-pm"];g=f+"|"+h;d.strict||(f!=f.toLowerCase()&&(g+="|"+f.toLowerCase()),h!=h.toLowerCase()&&(g+="|"+h.toLowerCase()),-1!=g.indexOf(".")&&(g+="|"+g.replace(/\./g,"")));g=g.replace(/\./g,"\\.");break;default:g=".*"}b&&b.push(e);return"("+g+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}var r={};m.setObject(e.id.replace(/\//g,"."),r);r._getZone=function(b,c,d){return c?f.getTimezoneName(b):b.getTimezoneOffset()};r.format=
function(d,e){e=e||{};var g=k.normalizeLocale(e.locale),f=e.formatLength||"short",g=r._getGregorianBundle(g),h=[];d=m.hitch(this,c,d,g,e);if("year"==e.selector)return b(g["dateFormatItem-yyyy"]||"yyyy",d);var t;"date"!=e.selector&&(t=e.timePattern||g["timeFormat-"+f])&&h.push(b(t,d));"time"!=e.selector&&(t=e.datePattern||g["dateFormat-"+f])&&h.push(b(t,d));return 1==h.length?h[0]:g["dateTimeFormat-"+f].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(b,c){return h[c]})};r.regexp=function(b){return r._parseInfo(b).regexp};
r._parseInfo=function(c){c=c||{};var e=k.normalizeLocale(c.locale),e=r._getGregorianBundle(e),g=c.formatLength||"short",f=c.datePattern||e["dateFormat-"+g],h=c.timePattern||e["timeFormat-"+g],g="date"==c.selector?f:"time"==c.selector?h:e["dateTimeFormat-"+g].replace(/\{(\d+)\}/g,function(b,c){return[h,f][c]}),t=[];return{regexp:b(g,m.hitch(this,d,t,e,c)),tokens:t,bundle:e}};r.parse=function(b,c){var d=/[\u200E\u200F\u202A\u202E]/g,e=r._parseInfo(c),g=e.tokens,h=e.bundle;b=(new RegExp("^"+e.regexp.replace(d,
"")+"$",e.strict?"":"i")).exec(b&&b.replace(d,""));if(!b)return null;var k=["abbr","wide","narrow"],t=[1970,0,1,0,0,0,0],u="";b=p.every(b,function(b,d){if(!d)return!0;var e=g[d-1];d=e.length;e=e.charAt(0);switch(e){case "y":if(2!=d&&c.strict)t[0]=b;else if(100>b)b=Number(b),e=""+(new Date).getFullYear(),d=100*e.substring(0,2),e=Math.min(Number(e.substring(2,4))+20,99),t[0]=b<e?d+b:d-100+b;else{if(c.strict)return!1;t[0]=b}break;case "M":case "L":if(2<d){if(d=h["months-"+("L"==e?"standAlone":"format")+
"-"+k[d-3]].concat(),c.strict||(b=b.replace(".","").toLowerCase(),d=p.map(d,function(b){return b.replace(".","").toLowerCase()})),b=p.indexOf(d,b),-1==b)return!1}else b--;t[1]=b;break;case "E":case "e":case "c":d=h["days-"+("c"==e?"standAlone":"format")+"-"+k[d-3]].concat();c.strict||(b=b.toLowerCase(),d=p.map(d,function(b){return b.toLowerCase()}));b=p.indexOf(d,b);if(-1==b)return!1;break;case "D":t[1]=0;case "d":t[2]=b;break;case "a":d=c.am||h["dayPeriods-format-wide-am"];e=c.pm||h["dayPeriods-format-wide-pm"];
if(!c.strict){var f=/\./g;b=b.replace(f,"").toLowerCase();d=d.replace(f,"").toLowerCase();e=e.replace(f,"").toLowerCase()}if(c.strict&&b!=d&&b!=e)return!1;u=b==e?"p":b==d?"a":"";break;case "K":24==b&&(b=0);case "h":case "H":case "k":if(23<b)return!1;t[3]=b;break;case "m":t[4]=b;break;case "s":t[5]=b;break;case "S":t[6]=b}return!0});d=+t[3];"p"===u&&12>d?t[3]=d+12:"a"===u&&12==d&&(t[3]=0);d=new Date(t[0],t[1],t[2],t[3],t[4],t[5],t[6]);c.strict&&d.setFullYear(t[0]);var q=g.join(""),e=-1!=q.indexOf("d"),
q=-1!=q.indexOf("M");if(!b||q&&d.getMonth()>t[1]||e&&d.getDate()>t[2])return null;if(q&&d.getMonth()<t[1]||e&&d.getDate()<t[2])d=f.add(d,"hour",1);return d};var v=["abbr","wide","narrow"],u=[],t={};r.addCustomFormats=function(b,c){u.push({pkg:b,name:c});t={}};r._getGregorianBundle=function(b){if(t[b])return t[b];var c={};p.forEach(u,function(d){d=k.getLocalization(d.pkg,d.name,b);c=m.mixin(c,d)},this);return t[b]=c};r.addCustomFormats(e.id.replace(/\/date\/locale$/,".cldr"),"gregorian");r.getNames=
function(b,c,d,e){var g;e=r._getGregorianBundle(e);b=[b,d,c];"standAlone"==d&&(d=b.join("-"),g=e[d],1==g[0]&&(g=void 0));b[1]="format";return(g||e[b.join("-")]).concat()};r.isWeekend=function(b,c){c=l.getWeekend(c);b=(b||new Date).getDay();c.end<c.start&&(c.end+=7,b<c.start&&(b+=7));return b>=c.start&&b<=c.end};r._getDayOfYear=function(b){return f.difference(new Date(b.getFullYear(),0,1,b.getHours()),b)+1};r._getWeekOfYear=function(b,c){1==arguments.length&&(c=0);var d=(new Date(b.getFullYear(),0,
1)).getDay(),e=(d-c+7)%7,e=Math.floor((r._getDayOfYear(b)+e-1)/7);d==c&&e++;return e};return r})},"dojo/cldr/supplemental":function(){define("dojo/cldr/supplemental",["../_base/lang","../i18n"],function(m,p){var f={};m.setObject("dojo.cldr.supplemental",f);f.getFirstDayOfWeek=function(l){l={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,"do":0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,
il:0,"in":0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,mm:0,mo:0,mt:0,mx:0,mz:0,ni:0,np:0,nz:0,pa:0,pe:0,ph:0,pk:0,pr:0,py:0,sg:0,sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0}[f._region(l)];return void 0===l?1:l};f._region=function(f){f=p.normalizeLocale(f);f=f.split("-");var k=f[1];k?4==k.length&&(k=f[2]):k={aa:"et",ab:"ge",af:"za",ak:"gh",am:"et",ar:"eg",as:"in",av:"ru",ay:"bo",az:"az",ba:"ru",be:"by",bg:"bg",bi:"vu",bm:"ml",bn:"bd",bo:"cn",br:"fr",bs:"ba",ca:"es",ce:"ru",ch:"gu",co:"fr",
cr:"ca",cs:"cz",cv:"ru",cy:"gb",da:"dk",de:"de",dv:"mv",dz:"bt",ee:"gh",el:"gr",en:"us",es:"es",et:"ee",eu:"es",fa:"ir",ff:"sn",fi:"fi",fj:"fj",fo:"fo",fr:"fr",fy:"nl",ga:"ie",gd:"gb",gl:"es",gn:"py",gu:"in",gv:"gb",ha:"ng",he:"il",hi:"in",ho:"pg",hr:"hr",ht:"ht",hu:"hu",hy:"am",ia:"fr",id:"id",ig:"ng",ii:"cn",ik:"us","in":"id",is:"is",it:"it",iu:"ca",iw:"il",ja:"jp",ji:"ua",jv:"id",jw:"id",ka:"ge",kg:"cd",ki:"ke",kj:"na",kk:"kz",kl:"gl",km:"kh",kn:"in",ko:"kr",ks:"in",ku:"tr",kv:"ru",kw:"gb",ky:"kg",
la:"va",lb:"lu",lg:"ug",li:"nl",ln:"cd",lo:"la",lt:"lt",lu:"cd",lv:"lv",mg:"mg",mh:"mh",mi:"nz",mk:"mk",ml:"in",mn:"mn",mo:"ro",mr:"in",ms:"my",mt:"mt",my:"mm",na:"nr",nb:"no",nd:"zw",ne:"np",ng:"na",nl:"nl",nn:"no",no:"no",nr:"za",nv:"us",ny:"mw",oc:"fr",om:"et",or:"in",os:"ge",pa:"in",pl:"pl",ps:"af",pt:"br",qu:"pe",rm:"ch",rn:"bi",ro:"ro",ru:"ru",rw:"rw",sa:"in",sd:"in",se:"no",sg:"cf",si:"lk",sk:"sk",sl:"si",sm:"ws",sn:"zw",so:"so",sq:"al",sr:"rs",ss:"za",st:"za",su:"id",sv:"se",sw:"tz",ta:"in",
te:"in",tg:"tj",th:"th",ti:"et",tk:"tm",tl:"ph",tn:"za",to:"to",tr:"tr",ts:"za",tt:"ru",ty:"pf",ug:"cn",uk:"ua",ur:"pk",uz:"uz",ve:"za",vi:"vn",wa:"be",wo:"sn",xh:"za",yi:"il",yo:"ng",za:"cn",zh:"cn",zu:"za",ace:"id",ady:"ru",agq:"cm",alt:"ru",amo:"ng",asa:"tz",ast:"es",awa:"in",bal:"pk",ban:"id",bas:"cm",bax:"cm",bbc:"id",bem:"zm",bez:"tz",bfq:"in",bft:"pk",bfy:"in",bhb:"in",bho:"in",bik:"ph",bin:"ng",bjj:"in",bku:"ph",bqv:"ci",bra:"in",brx:"in",bss:"cm",btv:"pk",bua:"ru",buc:"yt",bug:"id",bya:"id",
byn:"er",cch:"ng",ccp:"in",ceb:"ph",cgg:"ug",chk:"fm",chm:"ru",chp:"ca",chr:"us",cja:"kh",cjm:"vn",ckb:"iq",crk:"ca",csb:"pl",dar:"ru",dav:"ke",den:"ca",dgr:"ca",dje:"ne",doi:"in",dsb:"de",dua:"cm",dyo:"sn",dyu:"bf",ebu:"ke",efi:"ng",ewo:"cm",fan:"gq",fil:"ph",fon:"bj",fur:"it",gaa:"gh",gag:"md",gbm:"in",gcr:"gf",gez:"et",gil:"ki",gon:"in",gor:"id",grt:"in",gsw:"ch",guz:"ke",gwi:"ca",haw:"us",hil:"ph",hne:"in",hnn:"ph",hoc:"in",hoj:"in",ibb:"ng",ilo:"ph",inh:"ru",jgo:"cm",jmc:"tz",kaa:"uz",kab:"dz",
kaj:"ng",kam:"ke",kbd:"ru",kcg:"ng",kde:"tz",kdt:"th",kea:"cv",ken:"cm",kfo:"ci",kfr:"in",kha:"in",khb:"cn",khq:"ml",kht:"in",kkj:"cm",kln:"ke",kmb:"ao",koi:"ru",kok:"in",kos:"fm",kpe:"lr",krc:"ru",kri:"sl",krl:"ru",kru:"in",ksb:"tz",ksf:"cm",ksh:"de",kum:"ru",lag:"tz",lah:"pk",lbe:"ru",lcp:"cn",lep:"in",lez:"ru",lif:"np",lis:"cn",lki:"ir",lmn:"in",lol:"cd",lua:"cd",luo:"ke",luy:"ke",lwl:"th",mad:"id",mag:"in",mai:"in",mak:"id",man:"gn",mas:"ke",mdf:"ru",mdh:"ph",mdr:"id",men:"sl",mer:"ke",mfe:"mu",
mgh:"mz",mgo:"cm",min:"id",mni:"in",mnk:"gm",mnw:"mm",mos:"bf",mua:"cm",mwr:"in",myv:"ru",nap:"it",naq:"na",nds:"de","new":"np",niu:"nu",nmg:"cm",nnh:"cm",nod:"th",nso:"za",nus:"sd",nym:"tz",nyn:"ug",pag:"ph",pam:"ph",pap:"bq",pau:"pw",pon:"fm",prd:"ir",raj:"in",rcf:"re",rej:"id",rjs:"np",rkt:"in",rof:"tz",rwk:"tz",saf:"gh",sah:"ru",saq:"ke",sas:"id",sat:"in",saz:"in",sbp:"tz",scn:"it",sco:"gb",sdh:"ir",seh:"mz",ses:"ml",shi:"ma",shn:"mm",sid:"et",sma:"se",smj:"se",smn:"fi",sms:"fi",snk:"ml",srn:"sr",
srr:"sn",ssy:"er",suk:"tz",sus:"gn",swb:"yt",swc:"cd",syl:"bd",syr:"sy",tbw:"ph",tcy:"in",tdd:"cn",tem:"sl",teo:"ug",tet:"tl",tig:"er",tiv:"ng",tkl:"tk",tmh:"ne",tpi:"pg",trv:"tw",tsg:"ph",tts:"th",tum:"mw",tvl:"tv",twq:"ne",tyv:"ru",tzm:"ma",udm:"ru",uli:"fm",umb:"ao",unr:"in",unx:"in",vai:"lr",vun:"tz",wae:"ch",wal:"et",war:"ph",xog:"ug",xsr:"np",yao:"mz",yap:"fm",yav:"cm",zza:"tr"}[f[0]];return k};f.getWeekend=function(l){var k=f._region(l);l={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,
il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5}[k];k={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6}[k];void 0===l&&(l=6);void 0===k&&(k=0);return{start:l,end:k}};return f})},"esri/request":function(){define("esri/request","require dojo/_base/array dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/_base/url dojo/_base/xhr dojo/request/xhr ./core/request/script dojo/request/iframe dojo/dom-construct dojo/io-query ./kernel ./config ./sniff ./lang ./urlUtils ./deferredUtils".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x,w){function y(b){b=new h(b);return(b.host+(b.port?":"+b.port:"")).toLowerCase()}function z(b){return this._xhr?this._xhr.getResponseHeader(b):null}function B(b,c){var e=d.objectToQuery(b.content);e&&(b.url+=(-1===b.url.indexOf("?")?"?":"\x26")+e);if(2E3<b.url.length){if("data:"!==b.url.toLowerCase().slice(0,5))return b=new l,b.reject(k.mixin(Error(),{message:"When using responseType 'image', URL length cannot exceed 2000 characters."})),b;if(3E6<b.url.length)return b=
new l,b.reject(k.mixin(Error(),{message:"When using responseType 'image', data URL length cannot exceed 3000000 characters."})),b}var g=new Image;c.allowImageDataAccess&&(g.crossOrigin=b.withCredentials?"use-credentials":"anonymous");var f=!1,h=new l(function(b){f=!0;g.onload=g.onerror=g.onabort=null;g.src=""});c=function(b){g.onload=g.onerror=g.onabort=null;f||h.reject(Error("Unable to load the resource"))};g.onload=function(){g.onload=g.onerror=g.onabort=null;f||h.resolve(this)};g.onerror=c;g.onabort=
c;g.alt="";g.src=b.url;return h}function A(h,v,m,w){var C=!1,y=!1,A=!1,E,G;t.isDefined(v)&&(k.isObject(v)?(C=!!v.useProxy,y=!!v.usePost,A=!!v.returnProgress,E=v.crossOrigin):C=!!v);h=k.mixin({},h);h._ssl&&(h.url=h.url.replace(/^http:/i,"https:"));10>u("ie")&&!N.test(h.url)&&(h.url=encodeURI(h.url));var z=h.content,F=h.url,H=m&&h.form,D=P;E=t.isDefined(E)?E:D.useCors;h.load=function(b){var c;b&&(b.error?(c=k.mixin(Error(),b.error),c.log=!!f.isDebug):"error"===b.status&&(c=k.mixin(Error(),b),c.log=
!!f.isDebug),c&&(h.failOk=!c.log,t.isDefined(c.httpCode)||(c.httpCode=c.code)));return c||b};h.error=function(b,c){c&&c.xhr&&c.xhr.abort();b instanceof Error||(b=k.mixin(Error(),b));b.log=!!f.isDebug;h.failOk=!b.log;D.errorHandler(b,c);return b};h._token&&(h.content=h.content||{},h.content.token=h._token);var M=0,Q;z&&F&&(Q=d.objectToQuery(z),M=Q.length+F.length+1,u("esri-url-encodes-apostrophe")&&(M=Q.replace(/'/g,"%27").length+F.length+1));h.timeout=t.isDefined(h.timeout)?h.timeout:D.timeout;h.handleAs=
h.handleAs||"json";try{var ka,J,K=E&&x.canUseXhr(h.url)&&!/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i.test(h.url),U=x.hasSameOrigin(h.url,window.location.href)||K,R=y||m||M>D.postLength?!0:!1,ga=U||-1===h.handleAs.indexOf("json")||!h.callbackParamName||m?!1:!0,va=x.getProxyRule(h.url)||D.alwaysUseProxy||C||!("image"===h.handleAs&&!v.allowImageDataAccess||ga&&!R||U)?!0:!1;m&&!u("esri-file-upload")&&!va&&K&&(va=!0);if(va)if(ka=x.getProxyUrl(F,E),J=ka.path,ka._xo&&(K=!0),!R&&J.length+1+M>D.postLength&&
(R=!0),h.url=J+"?"+F,R)h.content=k.mixin(ka.query||{},z);else{var ra=d.objectToQuery(k.mixin(ka.query||{},z));ra&&(h.url+="?"+ra);h.content=null}if(!ga||R||va){var qa=h.headers;!K||qa&&qa.hasOwnProperty("X-Requested-With")||(qa=h.headers=qa||{},qa["X-Requested-With"]=null);if(m){var Ma=h.callbackParamName||"callback.html",ya=h.callbackElementName||"textarea",Ja,ba,Ta,Ca,Ha=H.elements?H.elements.length:0,oa;if(z=h.content)for(Ja in z.token&&-1<F.toLowerCase().indexOf("/sharing/servers/")&&(F+=(-1===
F.indexOf("?")?"?":"\x26")+"token\x3d"+z.token,h.url=va?J+"?"+F:F,delete z.token),z)if(Ta=z[Ja],t.isDefined(Ta)){ba=null;for(Ca=0;Ca<Ha;Ca++)if(oa=H.elements[Ca],oa.name===Ja){ba=oa;break}ba?ba.value=Ta:w?H.append(Ja,Ta):H.appendChild(b.create("input",{type:"hidden",name:Ja,value:Ta}))}if(u("esri-file-upload")){p.forEach(H.elements,function(b){b.name===Ma&&H.removeChild(b)});var Da=w?H:new FormData(H);if(11<=u("safari")&&"entries"in Da&&"delete"in Da){w=[];for(var La=Da.entries(),Ba=La.next();!Ba.done;){var Na=
Ba.value;Na[1]instanceof File&&""===Na[1].name&&w.push(Na[0]);Ba=La.next()}w.forEach(function(b){Da.delete(b)})}h.contentType=!1;h.postData=Da;delete h.form}else{H.enctype="multipart/form-data";9>u("ie")&&(H.encoding="multipart/form-data");H.method="post";p.some(H.elements,function(b){return b.name===Ma})||H.appendChild(b.create("input",{type:"hidden",name:Ma,value:ya}));if(-1!==F.toLowerCase().indexOf("addattachment")||-1!==F.toLowerCase().indexOf("updateattachment"))F+=(-1===F.indexOf("?")?"?":
"\x26")+Ma+"\x3d"+ya,h.url=va?J+"?"+F:F;delete h.content}}if(K&&!h.hasOwnProperty("withCredentials")&&"with-credentials"===P.useCors){var F=va?J:F,Ka=x.canUseXhr(F,!0),Xa=-1<Ka?P.corsEnabledServers[Ka]:null;if(Xa&&Xa.hasOwnProperty("withCredentials"))Xa.withCredentials&&(h.withCredentials=!0);else if(r.id){var Za=r.id.findServerInfo(F);Za&&Za.webTierAuth&&(h.withCredentials=!0)}}h=I?I(h):h;if("image"===h.handleAs)return B(h,v);if(R){if(m&&!u("esri-file-upload")){G=new l(function(){Sa.cancel()});var Sa=
c.post(h.url,h).then(function(b){G.resolve(b)}).otherwise(function(b){G.reject(b)});G.addCallback(function(b){return h.load(b)});G.addErrback(function(b){return h.error(b)});return G}!va&&u("safari")&&(h.url+=(-1===h.url.indexOf("?")?"?":"\x26")+"_ts\x3d"+(new Date).getTime()+O++);if(A){h.uploadProgress=!0;h.data=h.postData;h.query=h.content;G=new l(function(){Pa.cancel()});var Pa=g.post(h.url,h).then(function(b){G.resolve(b)},function(b){G.reject(b)},function(b){G.progress({transferType:b.transferType,
loaded:b.loaded,total:b.total})});G.addCallback(function(b){return h.load(b)});G.addErrback(function(b){return h.error(b)});return G}return q.post(h)}return q.get(h)}h=I?I(h):h;h.jsonp=h.callbackParamName;h.query=h.content;G=new l(function(){db.cancel()});var db=e.get(h.url,h).then(function(b){G.resolve(b)}).otherwise(function(b){G.reject(b)});G.addCallback(function(b){return h.load(b)});G.addErrback(function(b){return h.error(b)});return G}catch(Ua){return G=new l,G.errback(h.error(Ua)),G}}function C(b){var c=
P.corsStatus,d=x.canUseXhr(b,!0);-1<d&&P.corsEnabledServers.splice(d,1);var e=new l;e.reject({log:!!f.isDebug});c[y(b)]=e.promise;return d}function F(b){var c=P.corsStatus;try{var d=y(b);if(P.corsDetection&&P.useCors&&u("esri-cors")&&b&&-1!==b.toLowerCase().indexOf("/rest/services")&&!x.hasSameOrigin(b,window.location.href)&&!x.canUseXhr(b)){if(c[d]&&!c[d].isCanceled())return c[d];var e=new l(w._dfdCanceller);c[d]=e.promise;var g=q.get({url:b.substring(0,b.toLowerCase().indexOf("/rest/")+6)+"info",
content:{f:"json"},failOk:!0,handleAs:"json",headers:{"X-Requested-With":null},timeout:1E3*P.corsDetectionTimeout});e._pendingDfd=g;g.then(function(c){c?(x.canUseXhr(b)||P.corsEnabledServers.push(d),e.resolve()):e.reject()},function(b){e.reject(b)});return e.promise}}catch(aa){}return M}function E(b){I=b}function H(b,c,d,e){function g(b){b._pendingDfd=A(d,e,I,F);if(!b._pendingDfd){b.ioArgs=b._pendingDfd&&b._pendingDfd.ioArgs;var c=Error("Deferred object is missing");c.log=!!f.isDebug;b.errback(c);
b._pendingDfd=null;return b}b._pendingDfd.addCallback(function(c){if(!c)return c;var d=b._pendingDfd&&b._pendingDfd.ioArgs&&b._pendingDfd.ioArgs.xhr;if(!d)return c;if(d=d.getResponseHeader("Content-Type"))if(d=d.toLowerCase(),-1===d.indexOf("text/plain")&&-1===d.indexOf("application/json"))return c;if(c instanceof ArrayBuffer&&750>=c.byteLength)d=new Blob([c]);else if(c instanceof Blob&&750>=c.size)d=c;else return c;var e=new l,g=new FileReader;g.readAsText(d);g.onloadend=function(){var b;if(!g.error)try{var d=
JSON.parse(g.result);d.error&&(b=d.error)}catch(qa){}b?(b=k.mixin(Error(),b),b.log=!!f.isDebug,null==b.httpCode&&(b.httpCode=b.code),e.reject(b)):e.resolve(c)};return e.promise}).addCallback(function(c){b.ioArgs=b._pendingDfd&&b._pendingDfd.ioArgs;e.returnFullResponse&&(c={data:c,_xhr:b.ioArgs&&b.ioArgs.xhr,getHeader:z});b.callback(c);b._pendingDfd=null}).addErrback(function(c){var g,f,h;c&&(g=c.code,f=c.subcode,h=(h=c.messageCode)&&h.toUpperCase());if(c&&403==g&&(4==f||c.message&&-1<c.message.toLowerCase().indexOf("ssl")&&
-1===c.message.toLowerCase().indexOf("permission"))){if(!d._ssl){d._ssl=d._sslFromServer=!0;H(b,!0,d,e);return}}else if(c&&415==c.status){if(C(d.url),!d._err415){d._err415=1;H(b,!0,d,e);return}}else if(r.id&&-1!==p.indexOf(r.id._errorCodes,g)&&!r.id._isPublic(d.url)&&!v&&(403!=g||-1===p.indexOf(Q,h)&&(!t.isDefined(f)||2==f&&d._token))){b._pendingDfd=r.id.getCredential(d.url,{token:d._token,error:c});b._pendingDfd.addCallback(function(c){d._token=c.token;d._credential=c;d._ssl=d._sslFromServer||c.ssl;
H(b,!0,d,e)}).addErrback(function(c){b.errback(c);b._pendingDfd=null});return}b.ioArgs=b._pendingDfd&&b._pendingDfd.ioArgs;b.isFulfilled()||b.errback(c);b._pendingDfd=null}).then(null,null,function(c){b.progress(c)})}var h=d.form,v=e.disableIdentityLookup,w=e._preLookup,B=!1;if(u("esri-workers")&&!1!==P.useWorkers)if(!0===e.useWorkers||!0===P.useWorkers)B=!0;else if(e.workerOptions){var E=e.workerOptions;if(E.callback||E.worker&&E.worker.worker instanceof Worker)B=!0}var F=h&&u("esri-file-upload")&&
h instanceof FormData,I=h&&(h.elements?p.some(h.elements,function(b){return"file"===b.type}):F),D=-1!==d.url.toLowerCase().indexOf("token\x3d")||d.content&&d.content.token||I&&p.some(h.elements,function(b){return"token"===b.name})?1:0;if(!c){b.addCallback(function(b){if((/\/sharing\/rest\/accounts\/self/i.test(d.url)||/\/sharing\/rest\/portals\/self/i.test(d.url))&&!D&&!d._token&&b.user&&b.user.username){P.webTierAuthServers.push(y(d.url));b=P.corsEnabledServers;var c=x.canUseXhr(d.url,!0),e={host:y(d.url),
withCredentials:!0};if(-1===c)b.push(e);else{var g=b[c];g instanceof RegExp?(e.host=g,b.splice(c,1,e)):"object"===typeof g?g.withCredentials=!0:b.splice(c,1,e)}}if(b=d._credential)if(c=(c=r.id.findServerInfo(b.server))&&c.owningSystemUrl)c=c.replace(/\/?$/,"/sharing"),(b=r.id.findCredential(c,b.userId))&&-1===r.id._getIdenticalSvcIdx(c,b)&&b.resources.splice(0,0,c)});b.addBoth(function(b){delete d._credential;!b||u("ie")&&b.nodeType||(b._ssl=d._ssl)});var N=d.load,M=d.error;N&&b.addCallback(function(c){var d=
b._pendingDfd,d=d&&d.ioArgs;return N.call(d&&d.args,c,d)});M&&b.addErrback(function(c){var d=b._pendingDfd,d=d&&d.ioArgs;return M.call(d&&d.args,c,d)})}!r.id||D||d._token||r.id._isPublic(d.url)||v&&!w||!(c=r.id.findCredential(d.url))||(d._token=c.token,d._ssl=c.ssl);B?e.workerOptions&&e.workerOptions.worker?(G||(G=q),q=e.workerOptions.worker,g(b)):m(["./workers/RequestClient"],function(c){G||(G=q);if(e.workerOptions){var d=e.workerOptions;q=c.getClient(d.callback,d.cbFunction)}else q=c.getClient();
g(b)}):(G&&(q=G,G=null),g(b));return b}function D(b,c){b.url=x.fixUrl(b.url);c=c||{};var d=new l(w._dfdCanceller),e=F(b.url);d._pendingDfd=e;e.always(function(e){e&&"cancel"===e.dojoType?d.reject(e):H(d,!1,b,c)});return d}var G=null,I,P=v.defaults.io,Q=["COM_0056","COM_0057","SB_0008"],O=0,N=/%[0-9A-F]{2}/i,M=function(){var b=new l;b.resolve();return b.promise}();D._makeRequest=A;D._processRequest=H;D._disableCors=C;D._detectCors=F;D.setRequestPreCallback=E;u("extend-esri")&&(r.request=D,r._makeRequest=
A,r._processRequest=H,r._disableCors=C,r._detectCors=F,r.setRequestPreCallback=E);return D})},"esri/core/request/script":function(){require({cache:{"url:esri/core/request/iframe.html":'\x3c!DOCTYPE html\x3e\r\n\x3chtml\x3e\r\n\x3chead\x3e\r\n  \x3cmeta http-equiv\x3d"Content-Security-Policy" content\x3d"default-src \'none\'; script-src * \'unsafe-inline\'"\x3e\r\n\r\n  \x3cscript\x3e\r\n    var dojoConfig \x3d {\r\n      async: true,\r\n      baseUrl: "../../../dojo/",\r\n      has: {\r\n        "csp-restrictions": true,\r\n        "dojo-preload-i18n-Api": false\r\n      }\r\n    };\r\n  \x3c/script\x3e\r\n  \x3c!--\r\n  This src is relative to this page and assumes dojo is a sibling to esri.\r\n  It is updated when this file is set as the iframe\'s `srcdoc` value.\r\n  --\x3e\r\n  \x3cscript src\x3d"../../../dojo/dojo.js"\x3e\x3c/script\x3e\r\n\r\n  \x3cscript\x3e\r\n    function windowMessageHandler(event) {\r\n      window.removeEventListener("message", windowMessageHandler);\r\n\r\n      var port \x3d event.ports[0];\r\n\r\n      require([\r\n        "dojo/request/script"\r\n      ], function(script) {\r\n        port.postMessage("ready");\r\n\r\n        port.addEventListener("message", function(event) {\r\n          var data \x3d event.data;\r\n          script.get(data.url, data.options)\r\n              .then(function(response) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  response: response\r\n                });\r\n              })\r\n              .otherwise(function(error) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  isError: true,\r\n                  message: error.message\r\n                });\r\n              });\r\n        });\r\n        port.start();\r\n      });\r\n    }\r\n\r\n    window.addEventListener("message", windowMessageHandler);\r\n  \x3c/script\x3e\r\n\x3c/head\x3e\r\n\x3cbody\x3e\r\n\x3c/body\x3e\r\n\x3c/html\x3e\r\n'}});
define("esri/core/request/script","require exports dojo/Deferred dojo/request/script dojo/text!./iframe.html ../sniff".split(" "),function(m,p,f,l,k,h){function q(){var b=document.createElement("iframe");b.name="esri_core_jsonp_iframe";b.style.display="none";b.setAttribute("sandbox","allow-scripts");if(!h("ff")&&"srcdoc"in b){var c=m.toUrl("dojo/dojo.js"),d=k.replace("../../../dojo/dojo.js",c),c=c.slice(0,-7),d=d.replace("../../../dojo/",c);b.srcdoc=d}else d=m.toUrl("./iframe.html"),"http:"===window.location.protocol&&
0===d.indexOf("https:")&&(d=d.replace("https:","http:")),b.src=d;document.body.appendChild(b);return b}function g(){var b=new MessageChannel;b.port1.addEventListener("message",e);b.port1.start();return b}function e(c){var d=c.data;if("ready"===d){for(var d=0,e=u;d<e.length;d++)c=e[d],b(c,r);u=null}else if(c=t[d.id])delete t[d.id],d.isError?c.dfd.reject(Error(d.message)):c.dfd.resolve(d.response)}function c(b,c){b.addEventListener("load",function(){b.contentWindow.postMessage("init","*",[c.port2])})}
function b(b,c){t[b.message.id]=b;c.port1.postMessage(b.message)}Object.defineProperty(p,"__esModule",{value:!0});var d,r,v=0,u=[],t={};p.get=function(e,k){if(!h("esri-script-sandbox"))return l.get(e,k);var m=null;k&&(m={jsonp:k.jsonp,preventCache:k.preventCache,query:k.query,timeout:k.timeout});k=new f(function(){if(u){var b=u.indexOf(x);-1<b&&u.splice(b,1)}else x.message.id in t&&delete t[x.message.id]});var x={dfd:k,message:{id:"id"+(++v+Math.random()),url:e,options:m}};d||(d=q(),r=g(),c(d,r));
u?u.push(x):b(x,r);return k.promise}})},"dojo/request/script":function(){define("dojo/request/script","module ./watch ./util ../_base/kernel ../_base/array ../_base/lang ../on ../dom ../dom-construct ../has ../_base/window".split(" "),function(m,p,f,l,k,h,q,g,e,c,b){function d(b,c){b.canDelete&&x._remove(b.id,c.options.frameDoc,!0)}function r(b){C&&C.length&&(k.forEach(C,function(b){x._remove(b.id,b.frameDoc);b.frameDoc=null}),C=[]);return b.options.jsonp?!b.data:!0}function v(b){return!!this.scriptLoaded}
function u(b){return(b=b.options.checkString)&&eval("typeof("+b+') !\x3d\x3d "undefined"')}function t(b,c){if(this.canDelete){var d=this.response.options;C.push({id:this.id,frameDoc:d.ioArgs?d.ioArgs.frameDoc:d.frameDoc});d.ioArgs&&(d.ioArgs.frameDoc=null);d.frameDoc=null}c?this.reject(c):this.resolve(b)}function x(b,c,e){var g=f.parseArgs(b,f.deepCopy({},c));b=g.url;c=g.options;var k=f.deferred(g,d,r,c.jsonp?null:c.checkString?u:v,t);h.mixin(k,{id:w+y++,canDelete:!1});c.jsonp&&((new RegExp("[?\x26]"+
c.jsonp+"\x3d")).test(b)||(b+=(~b.indexOf("?")?"\x26":"?")+c.jsonp+"\x3d"+(c.frameDoc?"parent.":"")+w+"_callbacks."+k.id),k.canDelete=!0,A[k.id]=function(b){g.data=b;k.handleResponse(g)});f.notify&&f.notify.emit("send",g,k.promise.cancel);if(!c.canAttach||c.canAttach(k)){var l=x._attach(k.id,b,c.frameDoc,function(b){if(!(b instanceof Error)){var d=Error("Error loading "+(b.target?b.target.src:"script"));d.source=b;b=d}k.reject(b);x._remove(k.id,c.frameDoc,!0)});if(!c.jsonp&&!c.checkString)var m=q(l,
z,function(b){if("load"===b.type||B.test(l.readyState))m.remove(),k.scriptLoaded=b})}p(k);return e?k:k.promise}c.add("script-readystatechange",function(b,c){return"undefined"!==typeof c.createElement("script").onreadystatechange&&("undefined"===typeof b.opera||"[object Opera]"!==b.opera.toString())});var w=m.id.replace(/[\/\.\-]/g,"_"),y=0,z=c("script-readystatechange")?"readystatechange":"load",B=/complete|loaded/,A=l.global[w+"_callbacks"]={},C=[];x.get=x;x._attach=function(c,d,e,g){e=e||b.doc;
var f=e.createElement("script");if(g)q.once(f,"error",g);f.type="text/javascript";try{f.src=d}catch(I){g&&g(f)}f.id=c;f.async=!0;f.charset="utf-8";return e.getElementsByTagName("head")[0].appendChild(f)};x._remove=function(b,c,d){e.destroy(g.byId(b,c));A[b]&&(d?A[b]=function(){delete A[b]}:delete A[b])};x._callbacksProperty=w+"_callbacks";return x})},"esri/core/sniff":function(){define("esri/core/sniff",["../sniff"],function(m){return m})},"esri/sniff":function(){define("esri/sniff",["dojo/_base/sniff",
"dojo/global","./kernel"],function(m,p,f){var l=m("ff"),k=m("ie"),h=void 0===k&&7<=m("trident"),q=m("edge"),g=m("webkit"),e=m("opera"),c=m("chrome"),b=m("safari"),d=navigator.userAgent,r;(r=d.match(/(iPhone|iPad|CPU)\s+OS\s+(\d+\_\d+)/i))&&m.add("esri-iphone",parseFloat(r[2].replace("_",".")));(r=d.match(/Android\s+(\d+(\.\d+)*)/i))&&m.add("esri-android",parseFloat(r[1]));(r=d.match(/Fennec\/(\d+\.\d+)/i))&&m.add("esri-fennec",parseFloat(r[1]));0<=d.indexOf("BlackBerry")&&0<=d.indexOf("WebKit")&&
m.add("esri-blackberry",1);m.add("esri-touch",m("esri-iphone")||m("esri-android")||m("esri-blackberry")||6<=m("esri-fennec")||(l||g)&&(document.createTouch||"ontouchstart"in p||p.TouchEvent&&0<navigator.maxTouchPoints)?!0:!1);(r=d.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i))&&m.add("esri-mobile",!!r);m.add("esri-pointer",!l&&(navigator.pointerEnabled||navigator.msPointerEnabled||!!p.PointerEvent));f._getDOMAccessor=function(b){var c="";l?c="Moz":g?c="Webkit":k?c="ms":e&&
(c="O");return c+b.charAt(0).toUpperCase()+b.substr(1)};m.add("esri-phonegap",!!p.cordova);m.add("esri-cors",m("esri-phonegap")||p.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest);m.add("esri-file-upload",p.FormData&&p.FileList?!0:!1);m.add("esri-script-sandbox",function(){return"MessageChannel"in p&&"HTMLIFrameElement"in p&&"sandbox"in HTMLIFrameElement.prototype});m.add("esri-secure-context",function(){if("isSecureContext"in p)return p.isSecureContext;if(p.location&&p.location.origin)return 0===
p.location.origin.indexOf("https:")});m.add("esri-wasm","WebAssembly"in p);m.add("esri-workers",p.Worker?!0:!1);m.add("esri-featurelayer-webgl",!1);if(d=m("esri-featurelayer-webgl")){var v=m("esri-mobile");r=v?1:2;v=v?1:3;"object"===typeof d?(d.maxDrillLevel=null==d.maxDrillLevel?r:d.maxDrillLevel,d.maxRecordCountFactor=null==d.maxRecordCountFactor?v:d.maxRecordCountFactor,d.enablePBFQuery=null==d.enablePBFQuery?!0:d.enablePBFQuery):m.add("esri-featurelayer-webgl",{maxDrillLevel:r,maxRecordCountFactor:v,
enablePBFQuery:!0},null,!0)}m.add("esri-featurelayer-webgl-labeling",!1);m.add("esri-pbf",!k||10<=k);m.add("esri-featurelayer-pbf",!0);m.add("esri-transforms",h||q||9<=k||3.5<=l||4<=c||3.1<=b||10.5<=e||3.2<=m("esri-iphone")||2.1<=m("esri-android"));m.add("esri-transitions",h||q||10<=k||4<=l||4<=c||3.1<=b||10.5<=e||3.2<=m("esri-iphone")||2.1<=m("esri-android"));m.add("esri-transforms3d",h||q||10<=l||12<=c||4<=b||3.2<=m("esri-iphone")||3<=m("esri-android"));m.add("esri-url-encodes-apostrophe",function(){if(!p.document)return!1;
var b=p.document.createElement("a");b.href="?'";return-1<b.href.indexOf("?%27")});3>m("esri-android")&&(m.add("esri-transforms",!1,!1,!0),m.add("esri-transitions",!1,!1,!0),m.add("esri-transforms3d",!1,!1,!0));m.add("esri-will-change",m("esri-transforms")&&(52<=c||11.1<=b));f._css=function(d){var f=m("esri-transforms3d");void 0!==d&&null!==d?f=d:f&&(c||b&&!m("esri-iphone"))&&(f=!1);var h=f?"translate3d(":"translate(",r=f?c?",-1px)":",0px)":")",u=f?"scale3d(":"scale(",q=f?",1)":")",v=f?"rotate3d(0,0,1,":
"rotate(",p=f?"matrix3d(":"matrix(",C=f?",0,0,":",",F=f?",0,0,0,0,1,0,":",",E=f?",0,1)":")";return{names:{transition:g&&"-webkit-transition"||l&&"MozTransition"||e&&"OTransition"||k&&"msTransition"||"transition",transform:g&&"-webkit-transform"||l&&"MozTransform"||e&&"OTransform"||k&&"msTransform"||"transform",transformName:g&&"-webkit-transform"||l&&"-moz-transform"||e&&"-o-transform"||k&&"-ms-transform"||"transform",origin:g&&"-webkit-transform-origin"||l&&"MozTransformOrigin"||e&&"OTransformOrigin"||
k&&"msTransformOrigin"||"transformOrigin",endEvent:g&&"webkitTransitionEnd"||l&&"transitionend"||e&&"oTransitionEnd"||k&&"MSTransitionEnd"||"transitionend"},translate:function(b,c){return h+b+"px,"+c+"px"+r},scale:function(b){return u+b+","+b+q},rotate:function(b){return v+b+"deg)"},matrix:function(b){return p+b.xx+","+b.xy+C+b.yx+","+b.yy+F+b.dx.toFixed(10)+(l&&59>=l?"px,":",")+b.dy.toFixed(10)+(l&&59>=l?"px":"")+E},getScaleFromMatrix:function(b){if(!b)return 1;b=b.toLowerCase();var c=-1<b.indexOf("matrix3d")?
"matrix3d(":"matrix(";return Number(b.substring(c.length,b.indexOf(",")))}}};m("extend-esri")&&(f.isiPhone=m("esri-iphone"),f.isAndroid=m("esri-android"),f.isFennec=m("esri-fennec"),f.isBlackBerry=m("esri-blackberry"),f.isTouchEnabled=m("esri-touch"),f.isPointerEnabled=m("esri-pointer"),f._hasCors=m("esri-cors"),f._hasFileUpload=m("esri-file-upload"),f._hasTransforms=m("esri-transforms"),f._hasTransitions=m("esri-transitions"),f._has3DTransforms=m("esri-transforms3d"));return m})},"dojo/request/iframe":function(){define("dojo/request/iframe",
"module require ./watch ./util ./handlers ../_base/lang ../io-query ../query ../has ../dom ../dom-construct ../_base/window ../NodeList-dom ../NodeList-manipulate".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d){function r(b){return!this.isFulfilled()}function v(b){return!!this._finished}function u(b,c){if(!c)try{var d=b.options,e=x.doc(x._frame),f=d.handleAs;if("html"!==f){if("xml"===f)if("html"===e.documentElement.tagName.toLowerCase()){g("a",e.documentElement).orphan();var r=e.documentElement.innerText||
e.documentElement.textContent,r=r.replace(/>\s+</g,"\x3e\x3c");b.text=h.trim(r)}else b.data=e;else b.text=e.getElementsByTagName("textarea")[0].value;k(b)}else b.data=e}catch(D){c=D}c?this.reject(c):this._finished?this.resolve(b):this.reject(Error("Invalid dojo/request/iframe request state"))}function t(b){this._callNext()}function x(b,c,d){var e=l.parseArgs(b,l.deepCreate(z,c),!0);b=e.url;c=e.options;if("GET"!==c.method&&"POST"!==c.method)throw Error(c.method+" not supported by dojo/request/iframe");
x._frame||(x._frame=x.create(x._iframeName,y+"();"));b=l.deferred(e,null,r,v,u,t);b._callNext=function(){this._calledNext||(this._calledNext=!0,x._currentDfd=null,x._fireNextRequest())};b._legacy=d;x._dfdQueue.push(b);x._fireNextRequest();f(b);return d?b:b.promise}var w=m.id.replace(/[\/\.\-]/g,"_"),y=w+"_onload";d.global[y]||(d.global[y]=function(){var d=x._currentDfd;if(d){var e=c.byId(d.response.options.form)||d._tmpForm;if(e){for(var g=d._contentToClean,f=0;f<g.length;f++)for(var h=g[f],r=0;r<
e.childNodes.length;r++){var k=e.childNodes[r];if(k.name===h){b.destroy(k);break}}d._originalAction&&e.setAttribute("action",d._originalAction);d._originalMethod&&(e.setAttribute("method",d._originalMethod),e.method=d._originalMethod);d._originalTarget&&(e.setAttribute("target",d._originalTarget),e.target=d._originalTarget)}d._tmpForm&&(b.destroy(d._tmpForm),delete d._tmpForm);d._finished=!0}else x._fireNextRequest()});var z={method:"POST"};x.create=function(c,g,f){if(d.global[c])return d.global[c];
if(d.global.frames[c])return d.global.frames[c];f||(e("config-useXDomain")&&e("config-dojoBlankHtmlUrl"),f=e("config-dojoBlankHtmlUrl")||p.toUrl("dojo/resources/blank.html"));g=b.place('\x3ciframe id\x3d"'+c+'" name\x3d"'+c+'" src\x3d"'+f+'" onload\x3d"'+g+'" style\x3d"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden"\x3e',d.body());return d.global[c]=g};x.doc=function(b){if(b.contentDocument)return b.contentDocument;var c=b.name;if(c){var e=d.doc.getElementsByTagName("iframe");
if(b.document&&e[c].contentWindow&&e[c].contentWindow.document)return e[c].contentWindow.document;if(d.doc.frames[c]&&d.doc.frames[c].document)return d.doc.frames[c].document}return null};x.setSrc=function(b,c,e){b=d.global.frames[b.name];b.contentWindow&&(b=b.contentWindow);try{e?b.location.replace(c):b.location=c}catch(F){}};x._iframeName=w+"_IoIframe";x._notifyStart=function(){};x._dfdQueue=[];x._currentDfd=null;x._fireNextRequest=function(){var e;try{if(!x._currentDfd&&x._dfdQueue.length){do e=
x._currentDfd=x._dfdQueue.shift();while(e&&(e.canceled||e.isCanceled&&e.isCanceled())&&x._dfdQueue.length);if(!e||e.canceled||e.isCanceled&&e.isCanceled())x._currentDfd=null;else{var f=e.response,r=f.options,k=e._contentToClean=[],t=c.byId(r.form),u=l.notify,v=r.data||null,m;e._legacy||"POST"!==r.method||t?"GET"===r.method&&t&&-1<f.url.indexOf("?")&&(m=f.url.slice(f.url.indexOf("?")+1),v=h.mixin(q.queryToObject(m),v)):t=e._tmpForm=b.create("form",{name:w+"_form",style:{position:"absolute",top:"-1000px",
left:"-1000px"}},d.body());if(t){if(!e._legacy){var p=t;do p=p.parentNode;while(p&&p!==d.doc.documentElement);p||(t.style.position="absolute",t.style.left="-1000px",t.style.top="-1000px",d.body().appendChild(t));t.name||(t.name=w+"_form")}if(v){var p=function(c,d){b.create("input",{type:"hidden",name:c,value:d},t);k.push(c)},y;for(y in v){var z=v[y];if(h.isArray(z)&&1<z.length)for(m=0;m<z.length;m++)p(y,z[m]);else{var O=g("input[name\x3d'"+y+"']",t);-1==O.indexOf()?p(y,z):O.val(z)}}}var N=t.getAttributeNode("action"),
M=t.getAttributeNode("method"),J=t.getAttributeNode("target");f.url&&(e._originalAction=N?N.value:null,N?N.value=f.url:t.setAttribute("action",f.url));e._legacy?M&&M.value||(M?M.value=r.method:t.setAttribute("method",r.method)):(e._originalMethod=M?M.value:null,M?M.value=r.method:t.setAttribute("method",r.method));e._originalTarget=J?J.value:null;J?J.value=x._iframeName:t.setAttribute("target",x._iframeName);t.target=x._iframeName;u&&u.emit("send",f,e.promise.cancel);x._notifyStart(f);t.submit()}else r=
"",f.options.data&&(r=f.options.data,"string"!==typeof r&&(r=q.objectToQuery(r))),p=f.url+(-1<f.url.indexOf("?")?"\x26":"?")+r,u&&u.emit("send",f,e.promise.cancel),x._notifyStart(f),x.setSrc(x._frame,p,!0)}}}catch(K){e.reject(K)}};l.addCommonMethods(x,["GET","POST"]);return x})},"dojo/NodeList-manipulate":function(){define("dojo/NodeList-manipulate","./query ./_base/lang ./_base/array ./dom-construct ./dom-attr ./NodeList-dom".split(" "),function(m,p,f,l,k){function h(e){for(;e.childNodes[0]&&1==
e.childNodes[0].nodeType;)e=e.childNodes[0];return e}function q(e,c){"string"==typeof e?(e=l.toDom(e,c&&c.ownerDocument),11==e.nodeType&&(e=e.childNodes[0])):1==e.nodeType&&e.parentNode&&(e=e.cloneNode(!1));return e}var g=m.NodeList;p.extend(g,{_placeMultiple:function(e,c){e="string"==typeof e||e.nodeType?m(e):e;for(var b=[],d=0;d<e.length;d++)for(var g=e[d],f=this.length,h=f-1,k;k=this[h];h--)0<d&&(k=this._cloneNode(k),b.unshift(k)),h==f-1?l.place(k,g,c):g.parentNode.insertBefore(k,g),g=k;b.length&&
(b.unshift(0),b.unshift(this.length-1),Array.prototype.splice.apply(this,b));return this},innerHTML:function(e){return arguments.length?this.addContent(e,"only"):this[0].innerHTML},text:function(e){if(arguments.length){for(var c=0,b;b=this[c];c++)1==b.nodeType&&k.set(b,"textContent",e);return this}for(var d="",c=0;b=this[c];c++)d+=k.get(b,"textContent");return d},val:function(e){if(arguments.length){for(var c=p.isArray(e),b=0,d;d=this[b];b++){var g=d.nodeName.toUpperCase(),h=d.type,k=c?e[b]:e;if("SELECT"==
g)for(g=d.options,h=0;h<g.length;h++){var t=g[h];t.selected=d.multiple?-1!=f.indexOf(e,t.value):t.value==k}else"checkbox"==h||"radio"==h?d.checked=d.value==k:d.value=k}return this}if((d=this[0])&&1==d.nodeType){e=d.value||"";if("SELECT"==d.nodeName.toUpperCase()&&d.multiple){e=[];g=d.options;for(h=0;h<g.length;h++)t=g[h],t.selected&&e.push(t.value);e.length||(e=null)}return e}},append:function(e){return this.addContent(e,"last")},appendTo:function(e){return this._placeMultiple(e,"last")},prepend:function(e){return this.addContent(e,
"first")},prependTo:function(e){return this._placeMultiple(e,"first")},after:function(e){return this.addContent(e,"after")},insertAfter:function(e){return this._placeMultiple(e,"after")},before:function(e){return this.addContent(e,"before")},insertBefore:function(e){return this._placeMultiple(e,"before")},remove:g.prototype.orphan,wrap:function(e){if(this[0]){e=q(e,this[0]);for(var c=0,b;b=this[c];c++){var d=this._cloneNode(e);b.parentNode&&b.parentNode.replaceChild(d,b);h(d).appendChild(b)}}return this},
wrapAll:function(e){if(this[0]){e=q(e,this[0]);this[0].parentNode.replaceChild(e,this[0]);e=h(e);for(var c=0,b;b=this[c];c++)e.appendChild(b)}return this},wrapInner:function(e){if(this[0]){e=q(e,this[0]);for(var c=0;c<this.length;c++){var b=this._cloneNode(e);this._wrap(p._toArray(this[c].childNodes),null,this._NodeListCtor).wrapAll(b)}}return this},replaceWith:function(e){e=this._normalize(e,this[0]);for(var c=0,b;b=this[c];c++)this._place(e,b,"before",0<c),b.parentNode.removeChild(b);return this},
replaceAll:function(e){e=m(e);for(var c=this._normalize(this,this[0]),b=0,d;d=e[b];b++)this._place(c,d,"before",0<b),d.parentNode.removeChild(d);return this},clone:function(){for(var e=[],c=0;c<this.length;c++)e.push(this._cloneNode(this[c]));return this._wrap(e,this,this._NodeListCtor)}});g.prototype.html||(g.prototype.html=g.prototype.innerHTML);return g})},"esri/urlUtils":function(){define("esri/urlUtils","dojo/_base/lang dojo/_base/array dojo/_base/url dojo/global dojo/io-query ./kernel ./lang ./config ./sniff dojo/i18n!./nls/jsapi".split(" "),
function(m,p,f,l,k,h,q,g,e,c){var b={},d=g.defaults.io,r=/^[a-z][a-z0-9\+\-\.]*:/i,v=/^\s*http:/i,u=/^\s*https:/i,t=/:\d+$/,x=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i;b.isHTTP=function(b){var c=l.location.protocol;return null==b?"http:"===c||"https:"===c:b?"https:"===c:"http:"===c};b.getProtocolForWebResource=function(c){return b.isHTTP()?l.location.protocol:c?"https:":"http:"};b.urlToObject=function(b){var c={},d=new f(b),e=b.indexOf("?");null===d.query?c={path:b,query:null}:(c.path=b.substring(0,
e),c.query=k.queryToObject(d.query));d.fragment&&(c.hash=d.fragment,null===d.query&&(c.path=c.path.substring(0,c.path.length-(d.fragment.length+1))));return c};b.getProxyUrl=function(e,g){var f=m.isString(e)?0===m.trim(e).toLowerCase().indexOf("https:"):e,h=d.proxyUrl,r,k=c.io.proxyNotSet;m.isString(e)&&(e=b.getProxyRule(e))&&(h=e.proxyUrl);if(!h)throw Error(k);f&&!1!==g&&0!==l.location.href.toLowerCase().indexOf("https:")&&(g=h,0!==g.toLowerCase().indexOf("http")&&(g=b.getAbsoluteUrl(g)),g=g.replace(/^http:/i,
"https:"),b.canUseXhr(g)&&(h=g,r=1));h=b.urlToObject(h);h._xo=r;return h};b.addProxy=function(c){var e=b.getProxyRule(c),g;e?g=b.urlToObject(e.proxyUrl):d.alwaysUseProxy&&(g=b.getProxyUrl());g&&(e=b.urlToObject(c),c=g.path+"?"+e.path,(g=k.objectToQuery(m.mixin(g.query||{},e.query)))&&(c+="?"+g));return c};b.addProxyRule=function(c){var e=c.urlPrefix=b.urlToObject(c.urlPrefix).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),g=d.proxyRules,f,h=g.length,r,k=h;for(f=0;f<h;f++)if(r=
g[f].urlPrefix,0===e.indexOf(r)){if(e.length===r)return-1;k=f;break}else 0===r.indexOf(e)&&(k=f+1);g.splice(k,0,c);return k};b.getProxyRule=function(c){var e=d.proxyRules,g=e.length,f=b.urlToObject(c).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),h;for(c=0;c<g;c++)if(0===f.indexOf(e[c].urlPrefix)){h=e[c];break}return h};b.hasSameOrigin=function(b,c,d){b=b.toLowerCase();c=c.toLowerCase();var e=l.location.href.toLowerCase();b=0===b.indexOf("http")?new f(b):e=new f(e);c=0===
c.indexOf("http")?new f(c):m.isString(e)?new f(e):e;return(d||b.scheme===c.scheme)&&b.host===c.host&&b.port===c.port};b.canUseXhr=function(c,g){var f=e("esri-phonegap")?!0:!1,h=b.hasSameOrigin,r=d.corsEnabledServers,k,t=-1;!f&&e("esri-cors")&&r&&r.length&&(f=p.some(r,function(b,d){b=!b||"object"!==typeof b||b instanceof RegExp?b:b.host;if(b instanceof RegExp){if(b.test(c))return t=d,!0}else if(b&&(k=0!==b.trim().toLowerCase().indexOf("http"),h(c,k?"http://"+b:b)||k&&h(c,"https://"+b)))return t=d,
!0;return!1}));return g?t:f};b.getAbsoluteUrl=function(c){var d=b.getProtocolForWebResource();return m.isString(c)&&!r.test(c)?0===c.indexOf("//")?d+c:0===c.indexOf("/")?d+"//"+l.location.host+c:h._appBaseUrl+c:c};b.fixUrl=function(c){c=m.trim(c);c=b.getAbsoluteUrl(c);c=b.normalizeSlashes(c);c=c.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2");c=b.downgradeToHTTP(c);return c=b.upgradeToHTTPS(c)};b.normalize=function(c){return b.fixUrl(c)};b.normalizeSlashes=function(b){if(/^https?:\/\//i.test(b)){var c,
d,e=b.indexOf("?");-1<e?(c=b.slice(0,e),d=b.slice(e+1)):c=b;b=c.replace(/\/{2,}/g,"/");b=b.replace("/","//");d&&(b+="?"+d)}return b};b.downgradeToHTTP=function(c){return b.isHTTP(!1)&&u.test(c)&&b.hasSameOrigin(l.location.href,c,!0)&&!b.canUseXhr(c)?c.replace(u,"http:"):c};b.upgradeToHTTPS=function(c){var e=d.httpsDomains,g=b.isHTTP(!1),f=b.isHTTP(!0);if(!v.test(c))return c;c=m.trim(c);var h=c.indexOf("/",7),h=-1===h?c:c.slice(0,h),h=h.toLowerCase().slice(7);if(t.test(h))if(q.endsWith(h,":80"))h=
h.slice(0,-3),c=c.replace(":80","");else return c;if(g&&h===l.location.host&&(!x.test(c)||!b.canUseXhr(c)))return c;g=!1;if(f&&h===l.location.host)g=!0;else if(e)for(var r=0;r<e.length;r++){var k=e[r];if(h===k||q.endsWith(h,"."+k)){g=!0;break}}g||!f||d.alwaysUseProxy||b.getProxyRule(c)||(g=!0);g&&(c=c.replace(v,"https:"));return c};g=c.widgets.popup;var w=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,label:g.NLS_moreInfo},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"${hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,
label:"${hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,appName:"App Studio Player",label:g.NLS_openLinkInApp},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,appName:"Collector",label:g.NLS_openLinkInApp},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,appName:"Explorer",label:g.NLS_openLinkInApp},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,appName:"Navigator",label:g.NLS_openLinkInApp},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,appName:"Survey123",
label:g.NLS_openLinkInApp},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,appName:"Trek2There",label:g.NLS_openLinkInApp},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,appName:"Workforce",label:g.NLS_openLinkInApp},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,appName:"iForm",label:g.NLS_openLinkInApp},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,appName:"FlowFinity",label:g.NLS_openLinkInApp},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,appName:"Laserfische",label:g.NLS_openLinkInApp},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,
appName:"Microsoft Power BI",label:g.NLS_openLinkInApp}];b.getURIInfo=function(b){var c;p.some(w,function(d){d.pattern.test(b)&&(c=d);return!!c});return c};b.isKnownURI=function(c){return!!b.getURIInfo(c)};e("extend-esri")&&(m.mixin(h,b),h._getProxyUrl=b.getProxyUrl,h._getProxiedUrl=b.addProxy,h._hasSameOrigin=b.hasSameOrigin,h._canDoXOXHR=b.canUseXhr,h._getAbsoluteUrl=b.getAbsoluteUrl,h.fixUrl=b.fixUrl);return b})},"esri/deferredUtils":function(){define("esri/deferredUtils",["dojo/_base/lang","dojo/has",
"./kernel"],function(m,p,f){var l={_dfdCanceller:function(f){f.canceled=!0;var h=f._pendingDfd,k;f.isFulfilled()||!h||h.isFulfilled()||(h.cancel(),k=h.results&&h.results[1]);f._pendingDfd=null;return k},_fixDfd:function(f){var h=f.then;f.then=function(f,g,e){if(f){var c=f;f=function(b){return b&&b._argsArray?c.apply(null,b):c(b)}}return h.call(this,f,g,e)};return f},_resDfd:function(f,h,q){var g=h.length;1===g?q?f.errback(h[0]):f.callback(h[0]):1<g?(h._argsArray=!0,f.callback(h)):f.callback()}};p("extend-esri")&&
m.mixin(f,l);return l})},"esri/SpatialReference":function(){define("esri/SpatialReference",["dojo/_base/declare","dojo/_base/array","dojo/has","./kernel","./lang"],function(m,p,f,l,k){function h(){}var q=[-2.0037508342788905E7,2.0037508342788905E7],g=[-2.0037508342787E7,2.0037508342787E7];m=m(null,{declaredClass:"esri.SpatialReference",constructor:function(e){e&&(k.isObject(e)?k.mixin(this,e):k.isString(e)?this.wkt=e:this.wkid=e)},wkid:null,wkt:null,_info:{102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:q,origin:g,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:q,origin:g,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:q,origin:g,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:q,origin:g,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",${Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}},_isWebMercator:function(){return-1!==p.indexOf([102113,102100,3857,3785],this.wkid)},_isWrappable:function(){return-1!==p.indexOf([102113,102100,3857,3785,4326],this.wkid)},_getInfo:function(){return this.wkid?this._info[this.wkid]:null},_canProject:function(e){var c=!1;e&&(c=this.isWebMercator()&&4326===e.wkid||e.isWebMercator()&&4326===this.wkid);return c},isWebMercator:function(){return this._isWebMercator()},equals:function(e){var c=!1;e&&(this===e&&
(c=!0),this.wkid||e.wkid?c=this.wkid===e.wkid||this.isWebMercator()&&e.isWebMercator()||this.wkid===e.latestWkid||e.wkid===this.latestWkid:this.wkt&&e.wkt&&(c=this.wkt.toUpperCase()===e.wkt.toUpperCase()));return c},toJson:function(){var e=null;null!=this.wkid?e={wkid:this.wkid}:null!=this.wkt&&(e={wkt:this.wkt});e&&null!=this.latestWkid&&(e.latestWkid=this.latestWkid);return e}});h.prototype=m.prototype;m.simpleConstructor=h;f("extend-esri")&&(l.SpatialReference=m);return m})},"esri/map":function(){define("esri/map",
"require dojo/_base/kernel dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/event dojo/on dojo/aspect dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dijit/a11yclick dijit/registry ./kernel ./config ./sniff ./lang ./_coremap ./MapNavigationManager dojo/i18n!./nls/jsapi".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x,w,y,z,B,A,C,F){var E={up:"panUp",right:"panRight",down:"panDown",left:"panLeft"},H={upperRight:"panUpperRight",
lowerRight:"panLowerRight",lowerLeft:"panLowerLeft",upperLeft:"panUpperLeft"},D=l.connect,G=l.disconnect,I=r.create,P=u.set,Q=k.hitch,O=v.getMarginBox,N=p.deprecated,M=k.mixin,J=0;p=f(A,{declaredClass:"esri.Map",constructor:function(b,c){c=c||{};M(this,{_slider:null,_navDiv:null,_mapParams:M({attributionWidth:.45,slider:!0,nav:!1,logo:!0,sliderStyle:"small",sliderPosition:"top-left",sliderOrientation:"vertical",autoResize:!0},c)});M(this,{isMapNavigation:null!=c.isMapNavigation?c.isMapNavigation:
!0,isDoubleClickZoom:null!=c.isDoubleClickZoom?c.isDoubleClickZoom:!0,isClickRecenter:null!=c.isClickRecenter?c.isClickRecenter:!0,isPan:null!=c.isPan?c.isPan:!0,isRubberBandZoom:null!=c.isRubberBandZoom?c.isRubberBandZoom:!0,isPinchZoom:null!=c.isPinchZoom?c.isPinchZoom:!0,isKeyboardNavigation:null!=c.isKeyboardNavigation?c.isKeyboardNavigation:!0,isScrollWheel:null!=c.isScrollWheel?c.isScrollWheel:!0,isShiftDoubleClickZoom:!1,isScrollWheelZoom:!1,isPanArrows:!1,isZoomSlider:!1});k.isFunction(w._css)&&
(w._css=w._css(this._mapParams.force3DTransforms),this.force3DTransforms=this._mapParams.force3DTransforms);b=z("esri-transforms")&&z("esri-transitions");this.navigationMode=this._mapParams.navigationMode||b&&"css-transforms"||"classic";"css-transforms"!==this.navigationMode||b||(this.navigationMode="classic");this.fadeOnZoom=B.isDefined(this._mapParams.fadeOnZoom)?this._mapParams.fadeOnZoom:"css-transforms"===this.navigationMode;"css-transforms"!==this.navigationMode&&(this.fadeOnZoom=!1);this.setMapCursor("default");
this.smartNavigation=c&&c.smartNavigation;if(!(B.isDefined(this.smartNavigation)||!z("mac")||z("esri-touch")||z("esri-pointer")||3.5>=z("ff"))){var d=navigator.userAgent.match(/Mac\s+OS\s+X\s+([\d]+)(\.|\_)([\d]+)\D/i);d&&B.isDefined(d[1])&&B.isDefined(d[3])&&(b=parseInt(d[1],10),d=parseInt(d[3],10),this.smartNavigation=10<b||10===b&&6<=d)}this.showAttribution=B.isDefined(this._mapParams.showAttribution)?this._mapParams.showAttribution:!0;this._onLoadHandler_connect=D(this,"onLoad",this,"_onLoadInitNavsHandler");
var f=I("div",{class:"esriControlsBR"+(this._mapParams.nav?" withPanArrows":"")},this.root);if(this.showAttribution)if(b=k.getObject("esri.dijit.Attribution",!1))this._initAttribution(b,f);else{var r=J++,u=this;this._rids&&this._rids.push(r);m(["./dijit/Attribution"],function(b){var c=u._rids?h.indexOf(u._rids,r):-1;-1!==c&&(u._rids.splice(c,1),u._initAttribution(b,f))})}this._mapParams.logo&&(b={},6===z("ie")&&(b.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled\x3d'true', sizingMethod\x3d'crop', src\x3d'"+
m.toUrl("./images/map/logo-med.png")+"')"),this._ogol=I("div",{style:b,tabIndex:"0",title:"Esri"},f),this._setLogoSize(),this._onMapResizeLogo_connect=D(this,"onResize",this,"_setLogoSize"),this._ogol_connect=D(this._ogol,t,this,"_openLogoLink"));this.navigationManager=new C(this);c&&c.basemap&&(this._onLoadFix=!0,this.setBasemap(c.basemap),this._onLoadFix=!1);if(this.autoResize=this._mapParams.autoResize)c=this._getEnclosingResizableWidget(this.container)||window,b=this.resize,this._rszSignal=g.pausable(c,
"resize",b),this._oriSignal=g.pausable(window,"orientationchange",b),e.after(c,"resize",b,!0),this._startResizeTimer()},_startResizeTimer:function(){clearTimeout(this._persistentTimer);this._persistentTimer=setTimeout(this._timedResize,2*this.resizeDelay)},_getEnclosingResizableWidget:function(b){var c=x.getEnclosingWidget(b);return c?c.resize?c:this._getEnclosingResizableWidget(b.parentNode):c},_setLogoSize:function(){this._ogol&&(25E4>this.root.clientWidth*this.root.clientHeight?(d.remove(this._ogol,
"logo-med"),d.add(this._ogol,"logo-sm")):(d.remove(this._ogol,"logo-sm"),d.add(this._ogol,"logo-med")))},_initAttribution:function(b,c){c=I("span",{class:"esriAttribution"},c,"first");P(c,"maxWidth",Math.floor(this.width*this._mapParams.attributionWidth)+"px");this._connects.push(D(c,t,function(){d.contains(this,"esriAttributionOpen")?d.remove(this,"esriAttributionOpen"):this.scrollWidth>this.clientWidth&&d.add(this,"esriAttributionOpen")}));this.attribution=new b({map:this},c)},_cleanUp:function(){this.disableMapNavigation();
this.navigationManager.destroy();var b=this._slider;b&&b.destroy&&!b._destroyed&&b.destroy();var b=this._navDiv,c=this.attribution;b&&r.destroy(b);c&&c.destroy();this._connects.push(this._slider_connect,this._ogol_connect,this._rszSignal,this._oriSignal);h.forEach(this._connects,G);clearInterval(this._persistentTimer);this.attribution=this.navigationManager=this._rids=this._connects=this._slider_connect=this._ogol_connect=this._rszSignal=this._oriSignal=this._persistentTimer=null;this.inherited("_cleanUp",
arguments)},_isPanningOrZooming:function(){return this.__panning||this.__zooming},_canZoom:function(b){var c=this.getLevel();return!this.__tileInfo||!(c===this.getMinZoom()&&0>b||c===this.getMaxZoom()&&0<b)},_onLoadInitNavsHandler:function(){this._evalMapNavigation();this._createNav();if("small"===this._mapParams.sliderStyle||!this._createSlider)this._createSimpleSlider();else if(this._mapParams.slider){var b=-1!==this._getSliderClass(!0).indexOf("Horizontal"),b=[b?"dijit.form.HorizontalSlider":"dijit.form.VerticalSlider",
b?"dijit.form.HorizontalRule":"dijit.form.VerticalRule",b?"dijit.form.HorizontalRuleLabels":"dijit.form.VerticalRuleLabels"];if(h.some(b,function(b){return!k.getObject(b,!1)})){var b=h.map(b,function(b){return b.replace(/\./g,"/")}),c=J++,d=this;this._rids&&this._rids.push(c);m(b,function(){var b=d._rids?h.indexOf(d._rids,c):-1;-1!==b&&(d._rids.splice(b,1),d._createSlider.apply(d,arguments))})}else b=h.map(b,function(b){return k.getObject(b,!1)}),this._createSlider.apply(this,b)}G(this._onLoadHandler_connect)},
_createNav:function(){if(this._mapParams.nav){var b,c,e,g=d.add,f=this.id;this._navDiv=I("div",{id:f+"_navdiv"},this.root);g(this._navDiv,"navDiv");var h=this.width/2,r=this.height/2,k;for(e in E)c=E[e],b=I("div",{id:f+"_pan_"+e},this._navDiv),g(b,"fixedPan "+c),"up"===e||"down"===e?(k=parseInt(O(b).w,10)/2,P(b,{left:h-k+"px",zIndex:30})):(k=parseInt(O(b).h,10)/2,P(b,{top:r-k+"px",zIndex:30})),this._connects.push(D(b,"onclick",Q(this,this[c])));this._onMapResizeNavHandler_connect=D(this,"onResize",
this,"_onMapResizeNavHandler");for(e in H)c=H[e],b=I("div",{id:f+"_pan_"+e,style:{zIndex:30}},this._navDiv),g(b,"fixedPan "+c),this._connects.push(D(b,"onclick",Q(this,this[c])));this.isPanArrows=!0}},_onMapResizeNavHandler:function(b,d,e){b=this.id;d/=2;e/=2;var g=c.byId,f,h,r;for(f in E)h=g(b+"_pan_"+f),"up"===f||"down"===f?(r=parseInt(O(h).w,10)/2,P(h,"left",d-r+"px")):(r=parseInt(O(h).h,10)/2,P(h,"top",e-r+"px"))},_createSimpleSlider:function(){if(this._mapParams.slider){var b=this._slider=I("div",
{id:this.id+"_zoom_slider",class:this._getSliderClass(),style:{zIndex:30}}),e=I("div",{class:"esriSimpleSliderIncrementButton",tabIndex:"0",role:"button"},b),g=I("div",{class:"esriSimpleSliderDecrementButton",tabIndex:"0",role:"button"},b);this._addZoomButtonTooltips(e,g);this._incButton=e;this._decButton=g;this._simpleSliderZoomHandler(null,null,null,this.getLevel());var f=F.widgets.zoomSlider;this._addZoomButtonIcon(e,"+",f.zoomIn);this._addZoomButtonIcon(g,"\x26minus;",f.zoomOut);8>z("ie")&&d.add(g,
"dj_ie67Fix");this._connects.push(D(e,t,this,this._simpleSliderChangeHandler));this._connects.push(D(g,t,this,this._simpleSliderChangeHandler));(-1<this.getMaxZoom()||-1<this.getMinZoom())&&this._connects.push(D(this,"onZoomEnd",this,this._simpleSliderZoomHandler));10>z("ie")&&c.setSelectable(b,!1);this.root.appendChild(b);this.isZoomSlider=!0}},_simpleSliderChangeHandler:function(b){q.stop(b);b=-1!==b.currentTarget.className.indexOf("IncrementButton")?!0:!1;this._extentUtil({numLevels:b?1:-1})},
_simpleSliderZoomHandler:function(b,c,e,g){var f;b=this._incButton;c=this._decButton;-1<g&&g===this.getMaxZoom()?f=b:-1<g&&g===this.getMinZoom()&&(f=c);f?(d.add(f,"esriSimpleSliderDisabledButton"),d.remove(f===b?c:b,"esriSimpleSliderDisabledButton")):(d.remove(b,"esriSimpleSliderDisabledButton"),d.remove(c,"esriSimpleSliderDisabledButton"))},_getSliderClass:function(b){b=b?"Large":"Simple";var c=this._mapParams.sliderOrientation,d=this._mapParams.sliderPosition||"",c=c&&"horizontal"===c.toLowerCase()?
"esri"+b+"SliderHorizontal":"esri"+b+"SliderVertical";if(d)switch(d.toLowerCase()){case "top-left":d="esri"+b+"SliderTL";break;case "top-right":d="esri"+b+"SliderTR";break;case "bottom-left":d="esri"+b+"SliderBL";break;case "bottom-right":d="esri"+b+"SliderBR"}return"esri"+b+"Slider "+c+" "+d},_addZoomButtonIcon:function(b,c,d){r.create("span",{"aria-hidden":"true",role:"presentation",innerHTML:c},b);r.create("span",{class:"esriIconFallbackText",innerHTML:d},b)},_addZoomButtonTooltips:function(c,
d){var e=F.widgets.zoomSlider;b.set(c,"title",e.zoomIn);b.set(d,"title",e.zoomOut)},_createSlider:function(b,c,d){if(this._mapParams.slider){var e=I("div",{id:this.id+"_zoom_slider"},this.root),g=y.defaults.map,f=this._getSliderClass(!0),r=-1!==f.indexOf("Horizontal"),k=this.getNumLevels();if(0<k){var t,u,q=this._mapParams.sliderLabels,v=!!q,l=!1!==q;if(l){var m=r?"bottomDecoration":"rightDecoration";if(!q)for(q=[],g=0;g<k;g++)q[g]="";h.forEach([{class:"esriLargeSliderTicks",container:m,count:k,dijitClass:c},
{class:v&&"esriLargeSliderLabels",container:m,count:k,labels:q,dijitClass:d}],function(b){var d=I("div"),g=b.dijitClass;delete b.dijitClass;e.appendChild(d);g===c?t=new g(b,d):u=new g(b,d)})}b=this._slider=new b({id:e.id,class:f,minimum:this.getMinZoom(),maximum:this.getMaxZoom(),discreteValues:k,value:this.getLevel(),clickSelect:!0,intermediateChanges:!0,style:"z-index:30;"},e);b.startup();l&&(t.startup(),u.startup());this._slider_connect=D(b,"onChange",this,"_onSliderChangeHandler");this._connects.push(D(this,
"onExtentChange",this,"_onExtentChangeSliderHandler"));this._connects.push(D(b._movable,"onFirstMove",this,"_onSliderMoveStartHandler"))}else{b=this._slider=new b({id:e.id,class:f,minimum:0,maximum:2,discreteValues:3,value:1,clickSelect:!0,intermediateChanges:g.sliderChangeImmediate,style:"height:50px; z-index:30;"},e);d=b.domNode.firstChild.childNodes;for(g=1;3>=g;g++)P(d[g],"visibility","hidden");b.startup();this._slider_connect=D(b,"onChange",this,"_onDynSliderChangeHandler");this._connects.push(D(this,
"onExtentChange",this,"_onExtentChangeDynSliderHandler"))}g=b.incrementButton;d=b.decrementButton;r?this._addZoomButtonTooltips(g,d):this._addZoomButtonTooltips(d,g);g.style.outline="none";d.style.outline="none";b.sliderHandle.style.outline="none";b._onKeyPress=function(){};if(r=b._movable){var x=r.onMouseDown;r.onMouseDown=function(b){9>z("ie")&&1!==b.button||x.apply(this,arguments)}}this.isZoomSlider=!0}},_onSliderMoveStartHandler:function(){G(this._slider_connect);G(this._slidermovestop_connect);
this._slider_connect=D(this._slider,"onChange",this,"_onSliderChangeDragHandler");this._slidermovestop_connect=D(this._slider._movable,"onMoveStop",this,"_onSliderMoveEndHandler")},_onSliderChangeDragHandler:function(b){this._extentUtil({targetLevel:b})},_onSliderMoveEndHandler:function(){G(this._slider_connect);G(this._slidermovestop_connect)},_onSliderChangeHandler:function(b){this.setLevel(b)},_updateSliderValue:function(b,c){G(this._slider_connect);var d=this._slider,e=d._onChangeActive;d._onChangeActive=
!1;d.set("value",b);d._onChangeActive=e;this._slider_connect=D(d,"onChange",this,c)},_onExtentChangeSliderHandler:function(b,c,d,e){G(this._slidermovestop_connect);this._updateSliderValue(e.level,"_onSliderChangeHandler")},_onDynSliderChangeHandler:function(b){this._extentUtil({numLevels:0<b?1:-1})},_onExtentChangeDynSliderHandler:function(){this._updateSliderValue(1,"_onDynSliderChangeHandler")},_openLogoLink:function(b){window.open(y.defaults.map.logoLink,"_blank");q.stop(b)},enableMapNavigation:function(){this.isMapNavigation||
(this.isMapNavigation=!0,this._evalMapNavigation())},disableMapNavigation:function(){this.isMapNavigation&&(this.isMapNavigation=!1,this._evalMapNavigation())},_evalMapNavigation:function(){this.isMapNavigation?this.navigationManager.enableNavigation():this.navigationManager.disableNavigation()},_evalNavigationFeature:function(b){if(this.isMapNavigation&&this["is"+b])this.navigationManager["enable"+b]();else this.navigationManager["disable"+b]()},enableDoubleClickZoom:function(){this.isDoubleClickZoom||
(this.isDoubleClickZoom=!0,this._evalNavigationFeature("DoubleClickZoom"))},disableDoubleClickZoom:function(){this.isDoubleClickZoom&&(this.isDoubleClickZoom=!1,this._evalNavigationFeature("DoubleClickZoom"))},enableShiftDoubleClickZoom:function(){this.isShiftDoubleClickZoom||(N(this.declaredClass+": Map.(enable/disable)ShiftDoubleClickZoom deprecated. Shift-Double-Click zoom behavior will not be supported.",null,"v2.0"),this.navigationManager.enableShiftDoubleClickZoom(),this.isShiftDoubleClickZoom=
!0)},disableShiftDoubleClickZoom:function(){this.isShiftDoubleClickZoom&&(N(this.declaredClass+": Map.(enable/disable)ShiftDoubleClickZoom deprecated. Shift-Double-Click zoom behavior will not be supported.",null,"v2.0"),this.navigationManager.disableShiftDoubleClickZoom(),this.isShiftDoubleClickZoom=!1)},enableClickRecenter:function(){this.isClickRecenter||(this.isClickRecenter=!0,this._evalNavigationFeature("ClickRecenter"))},disableClickRecenter:function(){this.isClickRecenter&&(this.isClickRecenter=
!1,this._evalNavigationFeature("ClickRecenter"))},enablePan:function(){this.isPan||(this.isPan=!0,this._evalNavigationFeature("Pan"))},disablePan:function(){this.isPan&&(this.isPan=!1,this._evalNavigationFeature("Pan"))},enableRubberBandZoom:function(){this.isRubberBandZoom||(this.isRubberBandZoom=!0,this._evalNavigationFeature("RubberBandZoom"))},disableRubberBandZoom:function(){this.isRubberBandZoom&&(this.isRubberBandZoom=!1,this._evalNavigationFeature("RubberBandZoom"))},enablePinchZoom:function(){this.isPinchZoom||
(this.isPinchZoom=!0,this._evalNavigationFeature("PinchZoom"))},disablePinchZoom:function(){this.isPinchZoom&&(this.isPinchZoom=!1,this._evalNavigationFeature("PinchZoom"))},enableKeyboardNavigation:function(){this.isKeyboardNavigation||(this.isKeyboardNavigation=!0,this._evalNavigationFeature("KeyboardNavigation"))},disableKeyboardNavigation:function(){this.isKeyboardNavigation&&(this.isKeyboardNavigation=!1,this._evalNavigationFeature("KeyboardNavigation"))},enableScrollWheel:function(){this.isScrollWheel||
(this.isScrollWheel=!0,this._evalNavigationFeature("ScrollWheel"))},disableScrollWheel:function(){this.isScrollWheel&&(this.isScrollWheel=!1,this._evalNavigationFeature("ScrollWheel"))},enableScrollWheelZoom:function(){this.isScrollWheelZoom||(this.navigationManager.enableScrollWheelZoom(),this.isScrollWheelZoom=!0)},disableScrollWheelZoom:function(){this.isScrollWheelZoom&&(this.navigationManager.disableScrollWheelZoom(),this.isScrollWheelZoom=!1)},enableScrollWheelPan:function(){this.isScrollWheelPan||
this.navigationManager.enableScrollWheelPan()},disableScrollWheelPan:function(){this.isScrollWheelPan&&this.navigationManager.disableScrollWheelPan()},showPanArrows:function(){this._navDiv&&(this._navDiv.style.display="block",this.isPanArrows=!0)},hidePanArrows:function(){this._navDiv&&(this._navDiv.style.display="none",this.isPanArrows=!1)},showZoomSlider:function(){this._slider&&(P(this._slider.domNode||this._slider,"visibility","inherit"),this.isZoomSlider=!0)},hideZoomSlider:function(){this._slider&&
(P(this._slider.domNode||this._slider,"visibility","hidden"),this.isZoomSlider=!1)},onClick:function(b){b.graphic||(b.graphic=this.syncHitTestForWebGL(b))}});z("extend-esri")&&(w.Map=p);return p})},"esri/_coremap":function(){define("esri/_coremap","require module dojo/_base/kernel dojo/_base/declare dojo/_base/connect dojo/_base/Deferred dojo/_base/lang dojo/_base/array dojo/_base/event dojo/_base/unload dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/sniff dijit/registry dojox/gfx/matrix ./kernel ./config ./basemaps ./lang ./Evented ./fx ./deferredUtils ./tileUtils ./urlUtils ./PluginTarget ./Color ./promiseList ./arcade/Dictionary ./geometry/Point ./geometry/ScreenPoint ./geometry/Extent ./geometry/Rect ./geometry/mathUtils ./geometry/scaleUtils ./geometry/screenUtils ./geometry/webMercatorUtils ./layers/GraphicsLayer ./layers/TileInfo ./layers/LOD ./layers/ArcGISTiledMapServiceLayer ./layers/MapImageLayer ./layers/OpenStreetMapLayer ./layers/support/webglUtils ./dijit/Popup ./plugins/popupManager dojo/uacss".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x,w,y,z,B,A,C,F,E,H,D,G,I,P,Q,O,N,M,J,K,U,R,Y,aa,S,ma,ha,la,ca,ia,fa,ea){function pa(b,c){var d=b.lods;d.sort(function(b,c){return b.scale>c.scale?-1:b.scale<c.scale?1:0});var e=[],d=g.filter(d,function(b){if(-1===ra(e,b.scale))return e.push(b.scale),!0}),f=c.lods=[],h;g.forEach(d,function(b,c){h=f[c]=new ha(b);h.level=c});c.tileInfo=new ma(qa(b,{lods:f}))}var ka,na=Y.toMapPoint,ja=Y.toScreenPoint,Fa=k.connect,Ga=k.disconnect,ga=q.hitch,va=t.set,ra=g.indexOf,
qa=q.mixin,Ma=0,ya=B.defaults.map,Ja=ya.layerNamePrefix,ba=ya.graphicsLayerNamePrefix,Ta=new RegExp("^"+Ja+"(\\d+)$"),Ca=new RegExp("^"+ba+"(\\d+)$"),Ha=function(){},oa=0,Da=fa.isWebGLEnabled();l=l([F,I],{declaredClass:"esri._CoreMap",tables:null,resizeDelay:300,invalidExtent:"Map does not have a valid extent.",invalidGeometry:"Geometry (wkid: ${geometry}) cannot be converted to spatial reference of the map (wkid: ${map})",unknownBasemap:'Unable to find basemap definition for: "${basemapName}". Try one of these: ${list}',
invalidBasemap:'Unable to add basemap: "${basemapName}".',unknownLayerType:'Unknown basemap layer type: "${type}" found in basemap definition for: "${basemapName}".',visible:!0,webglEnabled:Da,_eventMap:{"basemap-change":!0,"extent-change":["extent","delta","levelChange","lod"],"layer-add":["layer"],"layer-add-result":["layer","error"],"layer-remove":["layer"],"layer-reorder":["layer","index"],"layer-resume":["layer"],"layer-suspend":["layer"],"layers-add-result":["layers"],"layers-removed":!0,"layers-reordered":["layerIds"],
load:["map"],pan:["extent","delta"],"pan-end":["extent","delta"],"pan-start":["extent","screenPoint"],reposition:["x","y"],resize:["extent","width","height"],scale:["matrix","immediate"],"time-extent-change":["timeExtent"],"before-unload":["map"],unload:["map"],"update-end":["error"],"update-start":!0,zoom:["extent","zoomFactor","anchor"],"zoom-end":["extent","zoomFactor","anchor","level"],"zoom-start":["extent","zoomFactor","anchor","level"],click:!0,"dbl-click":!0,"key-down":!0,"key-up":!0,"mouse-down":!0,
"mouse-drag":!0,"mouse-drag-end":!0,"mouse-drag-start":!0,"mouse-move":!0,"mouse-out":!0,"mouse-over":!0,"mouse-up":!0,"mouse-wheel":!0,"basic-tap":!0,"double-tap":!0,"pinch-end":!0,"pinch-move":!0,"pinch-start":!0,"processed-double-tap":!0,"processed-tap":!0,"swipe-end":!0,"swipe-move":!0,"swipe-start":!0,tap:!0,"two-finger-tap":!0},constructor:function(e,g){g=g||{};this.registerConnectEvents();qa(this,{_internalLayerIds:[],_layers:[],_layerDivs:[],_basemapPending:!1,_connects:[],_layerAddPromises:{},
_zoomAnimDiv:null,_zoomAnim:null,_layersDiv:null,_firstLayerId:null,_delta:null,_cursor:null,_ratioW:1,_ratioH:1,_params:null,_minResolution:0,_maxResolution:0,cursor:null,layerIds:[],graphicsLayerIds:[],graphics:null,_labels:null,loaded:!1,__panning:!1,__zooming:!1,__container:null,root:null,__LOD:null,__tileInfo:null,__visibleRect:null,__visibleDelta:null,_rids:[],_webglContextOwners:[]});var f=this.container=b.byId(e),h=this.id=d.get(f,"id")||w.getUniqueId(this.declaredClass);r.add(f,"map");var k=
u.getContentBox(f);e=r.add;var t=v.create;this.position=new M(0,0);this._reposition();var q=this.width=0<k.w?k.w:ya.width,l=this.height=0<k.h?k.h:ya.height,x=this.root=t("div",{id:h+"_root",style:{width:q+"px",height:l+"px",direction:"ltr"}});e(x,"esriMapContainer");k=this.__container=t("div",{id:h+"_container"},x);va(k,"position","absolute");e(k,"esriMapContainer");f.appendChild(x);g=this._params=qa({slider:!0,nav:!1,zoom:-1,minZoom:-1,maxZoom:-1,scale:-1,minScale:0,maxScale:0,showInfoWindowOnClick:!0,
displayGraphicsOnPan:!0,wrapAround180:!0,fitExtent:!1,optimizePanAnimation:!0},g);this.setWebGLEnabled(null!=g.webglEnabled?g.webglEnabled:this.webglEnabled);this.maxWebGLContexts=null!=g.maxWebGLContexts?g.maxWebGLContexts:-1;this.wrapAround180=g.wrapAround180;this.optimizePanAnimation=g.optimizePanAnimation;this.setBackgroundColor(g.backgroundColor);C.isDefined(g.resizeDelay)&&(this.resizeDelay=g.resizeDelay);g.lods&&(pa({rows:512,cols:512,dpi:96,format:"JPEG",compressionQuality:75,origin:{x:-180,
y:90},spatialReference:{wkid:4326},lods:g.lods},g),this.__tileInfo=g.tileInfo);this.extent=g.extent;this._extentUtil({mapCenter:g.center,targetLevel:g.zoom,targetScale:g.scale});this.__visibleRect=new K(0,0,q,l);this.__visibleDelta=new K(0,0,q,l);h=this._layersDiv=t("div",{id:h+"_layers"});e(h,"esriMapLayers");k.appendChild(h);this._zoomAnimDiv=t("div",{style:{position:"absolute"}});g.infoWindow?this.infoWindow=g.infoWindow:(e=this.infoWindow=new ea(g.popupOptions,t("div")),e.startup(),e._ootb=!0,
va(e.domNode,"zIndex",40));if(g.showLabels){var p=this;m(["./layers/LabelLayer"],function(b){ka=b;p._createLabelLayer()});this.on("load",function(){p._createLabelLayer()})}this.addPlugin(this._getAbsMid("./plugins/popupManager"),{enabled:g.showInfoWindowOnClick});this._zoomStartHandler=ga(this,this._zoomStartHandler);this._zoomingHandler=ga(this,this._zoomingHandler);this._zoomEndHandler=ga(this,this._zoomEndHandler);this._panningHandler=ga(this,this._panningHandler);this._panEndHandler=ga(this,this._panEndHandler);
this._endTranslate=ga(this,this._endTranslate);this._timedResize=ga(this,this._timedResize);this._execResize=ga(this,this._execResize);this._processLabelLayers=ga(this,this._processLabelLayers);this._updateLabelLayers=ga(this,this._updateLabelLayers);this.resize=ga(this,this.resize);c.addOnWindowUnload(this,this.destroy)},_getAbsMid:function(b){return m.toAbsMid?m.toAbsMid(b):p.id.replace(/\/[^\/]*$/ig,"/")+b},_cleanUp:function(){var b=this.infoWindow;b&&(b._ootb&&b.destroy?b.destroy():b.unsetMap(this),
delete this.infoWindow);Ga(this._tsTimeExtentChange_connect);this.removePlugin("./plugins/popupManager");v.destroy(this.root);this.root=null},_addLayer:function(b,c,d){if(b.id){var e=b.id.match(b instanceof S?Ca:Ta);e&&e[1]&&(e=Number(e[1]),Ma<=e&&(Ma=e+1))}var g=b.id||(b instanceof S?ba:Ja)+Ma++;b.id=g;this._layers[g]=b;b._isRefLayer="top"===d;d=!C.isDefined(d)||0>d||d>c.length||"top"===d?c.length:d;var f;if(!b._isRefLayer)for(;(f=this.getLayer(c[d-1]))&&f._isRefLayer;)d--;if(e=!this._firstLayerId&&
!this.loaded&&!this._basemapPending&&0===d&&(c===this.layerIds||c===this.graphicsLayerIds))this._firstLayerId=g;c.splice(d,0,g);var h=ga(this,this._addLayerHandler),r=this;d=this._connects;f=function(){b.loaded?r._onLoadFix?(r._onLoadFix=!1,setTimeout(function(){h(b)},0)):h(b):(r["_"+g+"_addtoken_load"]=Fa(b,"onLoad",r,"_addLayerHandler"),r["_"+g+"_addtoken_err"]=Fa(b,"onError",r,function(d){h(b,d,c)}))};this.loaded||e||b.loaded&&-1===ra(this.graphicsLayerIds,g)?f():d.push(Fa(this,"onLoad",f));return b},
_forgetLayer:function(b){b=b.id;Ga(this["_"+b+"_addtoken_load"]);Ga(this["_"+b+"_addtoken_err"]);var c=this._layerAddPromises[b];c&&(delete this._layerAddPromises[b],c.cancel())},_addLayerHandler:function(b,c,d){c?this._attachLayerToMap(b,c,d):b._prepareToAttach?(this._layerAddPromises[b.id]=b._prepareToAttach(this)).always(q.hitch(this,function(c){c&&"cancel"===c.dojoType||this._attachLayerToMap(b,null,d)})):b.declaredClass&&-1<b.declaredClass.toLowerCase().indexOf("vectortilelayer")&&!this.isWebGLContextAvailable()?
(c=Error("Too many WebGL contexts. Unable to add the layer: ",b.url),this._attachLayerToMap(b,c,this.layerIds)):this._attachLayerToMap(b,c,d)},_attachLayerToMap:function(b,c,d){var e=this.id,g=b.id,f=ra(b instanceof S?this.graphicsLayerIds:this.layerIds,g),h=f,r=!1,k=this._params;this._forgetLayer(b);if(c)delete this._layers[g],-1!==f&&(d.splice(f,1),this.onLayerAddResult(b,c));else{-1===f&&(f=ra(this._internalLayerIds,g),h=20+f,r=!0);if(g===this._firstLayerId){c=b.spatialReference;d=this.extent&&
this.extent.spatialReference;!d||d.equals(c)||!b.tileInfo&&b.url||(d=null);d=this.spatialReference=d||c;this.wrapAround180=this.wrapAround180&&d&&d._isWrappable()?!0:!1;b.tileInfo&&(this.__tileInfo?(c=this.__tileInfo.lods,this.__tileInfo=qa({},b.tileInfo),this.__tileInfo.lods=c):(pa(qa({},b.tileInfo),k),this.__tileInfo=k.tileInfo));if(this.wrapAround180){c=this.__tileInfo;d=d._getInfo();if(!c||Math.abs(d.origin[0]-c.origin.x)>d.dx)this.wrapAround180=!1;this.wrapAround180&&c&&D._addFrameInfo(c,d)}k.units=
b.units;if((c=this.__tileInfo&&this.__tileInfo.lods)&&c.length){d=k.minScale;var f=k.maxScale,t=-1,u=-1,q=!1,v=!1,l;for(l=0;l<c.length;l++)0<d&&!q&&d>=c[l].scale&&(t=c[l].level,q=!0),0<f&&!v&&f>=c[l].scale&&(u=0<l?c[l-1].level:-1,v=!0);-1===k.minZoom&&(k.minZoom=0===d?c[0].level:t);-1===k.maxZoom&&(k.maxZoom=0===f?c[c.length-1].level:u);for(l=0;l<c.length;l++)k.minZoom===c[l].level&&(k.minScale=c[l].scale,this._minResolution=c[l].resolution),k.maxZoom===c[l].level&&(k.maxScale=c[l].scale,this._maxResolution=
c[l].resolution)}else k.minZoom=k.maxZoom=k.zoom=-1}b instanceof S?(this._gc||(this._gc=new S._GraphicsContainer,this._gc._setMap(this,this._layersDiv).id=e+"_gc"),this._attachGraphicsLayer(b).id=e+"_"+g):(h=b._setMap(this,this._layersDiv,h,this.__LOD),h.id=e+"_"+g,this._layerDivs[g]=h,this._reorderLayers(this.layerIds),r||-1===b.declaredClass.indexOf("VETiledLayer")||this._onBingLayerAdd(b));g===this._firstLayerId&&(this.graphics=new S({id:e+"_graphics",displayOnPan:k.displayGraphicsOnPan}),this._addLayer(this.graphics,
this._internalLayerIds,20));if(b===this.graphics){d=this._layers[this._firstLayerId];e=k.zoom;h=k.scale;c=k.center;d=d.initialExtent||d.fullExtent;this._firstLayerId=null;this.extent&&(this.extent=this._convertGeometry(this,this.extent));!this.extent&&d&&(c&&(c=this._convertGeometry(d,c)),c&&(d=d.centerAt(c),c=null));if(c=this.extent||d&&new J(d.toJson()))-1<e?c=this.__getExtentForLevel(e,null,c).extent:0<h&&(c=R.getExtentForScale(this,h,c));if(!c)return;k=this._fixExtent(c,k.fitExtent);this.extent=
k.extent;this.__LOD=k.lod;this.__setExtent(this.extent);this.loaded=!0;this.attr("data-loaded","");this.infoWindow.setMap(this);this.onLoad(this)}r||(this.onLayerAdd(b),this.onLayerAddResult(b));Ga(this[g+"_addLayerHandler_connect"])}},_convertGeometry:function(b,c){b=b&&b.spatialReference;var d=c&&c.spatialReference;b&&d&&!b.equals(d)&&(b._canProject(d)?b.isWebMercator()?c=aa.geographicToWebMercator(c):4326===b.wkid&&(c=aa.webMercatorToGeographic(c,!0)):c=null);return c},_attachGraphicsLayer:function(b){var c=
b.id;b=b._setMap(this,this._gc._surface);this._layerDivs[c]=b;this._reorderLayers(this.graphicsLayerIds);return b},_detachGraphicsLayer:function(b){b.loaded&&b.getMap()&&b._unsetMap(this,this._gc._surface)},_reorderLayers:function(b){var c=this.onLayerReorder,d=v.place,e=this._layerDivs,f=this._layers,h=this._gc?this._gc._surface.getEventSource():null;if(b===this.graphicsLayerIds)g.forEach(b,function(b,d){var g=e[b];b=f[b];g&&(this._gc._reorderLayer(b,g,d),c(b,d))},this);else{var r=this.graphics,
k=r?r.id:null,t=this._layersDiv,u;g.forEach(b,function(b,g){u=e[b];b!==k&&u&&(d(u,t,g),c(f[b],g))});this._mapImageLyr&&this._placeMapImageLyr();h&&(h=9>x("ie")?h.parentNode:h,d(h,h.parentNode,"last"))}this.onLayersReordered([].concat(b))},_zoomStartHandler:function(){this.__zoomStart(this._zoomAnimDiv.startingExtent,this._zoomAnimDiv.anchor)},_zoomingHandler:function(b){var c=parseFloat(b.left),d=parseFloat(b.top);b=new J(c,d-parseFloat(b.height),c+parseFloat(b.width),d,this.spatialReference);c=this.extent.getWidth()/
b.getWidth();this.__zoom(b,c,this._zoomAnimDiv.anchor)},_zoomEndHandler:function(){var b=this._zoomAnimDiv,c=b.extent,d=this.extent.getWidth()/c.getWidth(),e=b.anchor,g=b.newLod,f=b.levelChange;b.extent=b.anchor=b.levelChange=b.startingExtent=b.newLod=this._delta=this._zoomAnim=null;this.__zoomEnd(c,d,e,g,f)},_panningHandler:function(b){if(isNaN(parseFloat(b.left))||isNaN(parseFloat(b.top))){var c=Math.round,d=this._panAnim.node;b.left=-1*(this._delta.x-c(this.width/2))+"px";b.top=-1*(this._delta.y-
c(this.height/2))+"px";t.set(d,"left",b.left);t.set(d,"top",b.top)}b=new M(parseFloat(b.left),parseFloat(b.top));c=this.toMap(b);this.onPan(this.extent.offset(this.extent.xmin-c.x,this.extent.ymax-c.y),b)},_panEndHandler:function(b){this.__panning=!1;var c=Math.round;b=new M(-c(parseFloat(b.style.left)),-c(parseFloat(b.style.top)));var c=b.x,d=b.y,e=this.__visibleRect,g=this.__visibleDelta;e.x+=-c;e.y+=-d;g.x+=-c;g.y+=-d;va(this._zoomAnimDiv,{left:"0px",top:"0px"});var e=this.extent,g=this._ratioW,
f=this._ratioH,e=new J(e.xmin+c/g,e.ymin-d/f,e.xmax+c/g,e.ymax-d/f,this.spatialReference);b.setX(-b.x);b.setY(-b.y);this._delta=this._panAnim=null;this._updateExtent(e);this.onPanEnd(e,b);this._fireExtChg([e,b,!1,this.__LOD])},_fixExtent:function(b,c){for(var d=this._reshapeExtent(b),e=1.25;!0===c&&(d.extent.getWidth()<b.getWidth()||d.extent.getHeight()<b.getHeight())&&0<d.lod.level&&3>=e;)d=this._reshapeExtent(b.expand(e)),e+=.25;return d},_getFrameWidth:function(){var b=-1,c=this.spatialReference._getInfo();
this.__LOD?(c=this.__LOD._frameInfo)&&(b=c[3]):c&&(b=Math.round(2*c.valid[1]/(this.extent.getWidth()/this.width)));return b},_fixAspectRatio:function(b){var c=b.getWidth(),d=b.getHeight(),e=c/d,g=this.width/this.height,f=0,h=0;this.width>this.height?c>d?g>e?f=d*g-c:h=c/g-d:f=d*g-c:this.width<this.height?c<d?g>e?f=d*g-c:h=c/g-d:h=c/g-d:c<d?f=d-c:c>d&&(h=c/g-d);f&&(b.xmin-=f/2,b.xmax+=f/2);h&&(b.ymin-=h/2,b.ymax+=h/2);return b},_reshapeExtent:function(b){b=this._fixAspectRatio(b);return this._getAdjustedExtent(b)},
_getAdjustedExtent:function(b){if(this.__tileInfo)return D.getCandidateTileInfo(this,this.__tileInfo,b);var c=R.getScale(this,b),d=this.getMinScale(),e=this.getMaxScale();!d||c<=d?!e||c>=e||(b=R.getExtentForScale(this,e,b)):b=R.getExtentForScale(this,d,b);return{extent:b}},_onBingLayerAdd:function(b){this["__"+b.id+"_vis_connect"]=k.connect(b,"onVisibilityChange",this,"_toggleBingLogo");this._toggleBingLogo(b.visible)},_onBingLayerRemove:function(b){k.disconnect(this["__"+b.id+"_vis_connect"]);delete this["__"+
b.id+"_vis_connect"];var c=g.some(this.layerIds,function(c){return(b=this._layers[c])&&b.visible&&-1!==b.declaredClass.indexOf("VETiledLayer")},this);this._toggleBingLogo(c)},_toggleBingLogo:function(b){b&&!this._bingLogo?(b={left:this._mapParams&&this._mapParams.nav?"25px":""},6===x("ie")&&(b.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled\x3d'true', sizingMethod\x3d'crop', src\x3d'"+m.toUrl("./images/map/bing-logo-lg.png")+"')"),b=this._bingLogo=v.create("div",{style:b},this.root),
r.add(b,"bingLogo-lg")):!b&&this._bingLogo&&(v.destroy(this._bingLogo),delete this._bingLogo)},__panStart:function(b,c){var d=this._zoomAnim,e=this._panAnim;if(d&&d._active)d.stop(),d._fire("onEnd",[d.node]);else if(e&&e._active){e.stop();this._panAnim=null;c=e.curve.getValue(e._getStep());b=Math.round(parseFloat(c.left));c=Math.round(parseFloat(c.top));d=this.navigationManager._dragOrigin;this.__pan(b,c);d&&(d.x-=b,d.y-=c);return}this.__panning=!0;this.onPanStart(this.extent,new M(b,c))},__pan:function(b,
c){var d=this.extent,e=this._ratioW,g=this._ratioH;this.onPan(new J(d.xmin-b/e,d.ymin+c/g,d.xmax-b/e,d.ymax+c/g,this.spatialReference),new M(b,c))},__panEnd:function(b,c){var d=this.__visibleRect,e=this.__visibleDelta;d.x+=b;d.y+=c;e.x+=b;e.y+=c;var d=new M(b,c),e=this.extent,g=this._ratioW,f=this._ratioH,e=new J(e.xmin-b/g,e.ymin+c/f,e.xmax-b/g,e.ymax+c/f,this.spatialReference);this.__panning=!1;this._updateExtent(e);this.onPanEnd(e,d);this._fireExtChg([e,d,!1,this.__LOD])},__zoomStart:function(b,
c){this.__zooming=!0;this.onZoomStart(b,1,c,this.__LOD?this.__LOD.level:null)},__zoom:function(b,c,d){this.onZoom(b,c,d)},__zoomEnd:function(b,c,d,e,g){va(this._layersDiv,{left:"0px",top:"0px"});this._delta=new M(0,0);this.__visibleRect.x=this.__visibleRect.y=0;b=new J(b);this.__LOD=e;this._ratioW=this.width/b.getWidth();this._ratioH=this.height/b.getHeight();var f=this._delta;this._delta=null;this.__zooming=!1;this._updateExtent(b,g);this.onZoomEnd(b,c,d,e?e.level:null);this._fireExtChg([b,f,g,e])},
_extentUtil:function(b,c,d,e,g){var f=new h,r,k,t,u,v,l,m,x,w,p,B=this.width,A=this.height,y,G,E;b&&(r=b.numLevels,k=b.targetLevel,y=C.isDefined(k),t=b.factor,u=b.mapAnchor,v=b.screenAnchor,l=b.mapCenter,G=b.levelOrFactor,m=b.targetScale,x=C.isDefined(m)&&0<m);c&&(w=c.dx,p=c.dy,l=c.mapCenter);q.isArray(l)&&(l=new N(l));var z=this._panAnim;c=(b=this._stopAnim())?b.divExtent:this.extent;var F=this.__tileInfo,I=this._params;if(!this.loaded){if(d)c&&(d=this._convertGeometry(c,d)),d&&(this.extent=d,I.zoom=
I.scale=-1,I.center=null);else if(l||y||x){if(l)if(c){if(l=this._convertGeometry(c,l))this.extent=c.centerAt(l),I.center=null}else I.center=l;y&&-1<k?(I.zoom=k,I.scale=-1):x&&(I.scale=m,I.zoom=-1)}f.resolve();return f}if(l&&(l=this._convertGeometry(this,l),!l)||u&&(u=this._convertGeometry(this,u),!u)||d&&(d=this._convertGeometry(this,d),!d))return f.reject(),f;z&&u&&v&&(u=na(this.extent,B,A,v));b&&u&&v&&(u=na(b.divExtent,B,A,v));y&&(F?(r=this.getMinZoom(),y=this.getMaxZoom(),k<r?k=r:k>y&&(k=y),r=
k-(b?b.level:this.getLevel())):(r=0<k?-1:1,E=G?k:null));if(!d)if(C.isDefined(r))F?(B=b?b.level:this.getLevel(),B=this.__getExtentForLevel(B+r,l,c).extent):(B=(b?b.end:this.extent).expand(E||(0<r?.5*r:2*-r)),E&&l&&(B=B.centerAt(l))),B&&(l?d=B:(w=u||c.getCenter(),A=B.getWidth(),p=B.getHeight(),B=w.x>=c.xmin&&w.x<=c.xmax?(w.x-c.xmin)/c.getWidth():.5,d=w.y>=c.ymin&&w.y<=c.ymax?(w.y-c.ymin)/c.getHeight():.5,B=w.x-B*A,w=w.y-d*p,d=new J(B,w,B+A,w+p,this.spatialReference)));else if(x)d=R.getExtentForScale(this,
m,c);else if(C.isDefined(t))d=c.expand(t);else if(w||p)b?(d=b.end,u=d.getCenter(),E=ja(d,B,A,u),E.x+=w,E.y+=p,E=na(d,B,A,E),d=d.offset(E.x-u.x,E.y-u.y)):(w=new M(B/2+w,A/2+p),w=na(c,B,A,w),A=c.getWidth(),p=c.getHeight(),B=w.x-A/2,w=w.y-p/2,d=new J(B,w,B+A,w+p,this.spatialReference));d||(l?(c=b?b.end:c,A=c.getWidth(),p=c.getHeight(),B=l.x-A/2,w=l.y-p/2,d=new J(B,w,B+A,w+p,this.spatialReference)):b&&(d=b.end));d?(this._extentDfd&&-1===this._extentDfd.fired&&(this._extentDfd.then(null,Ha),this._extentDfd.reject()),
this._extentDfd=f,this.__setExtent(d,null,v,e,b,g)):f.reject();return f},__setExtent:function(b,c,d,e,g,f){try{if(this._firstLayerId)this.extent=b;else{var h=!0,r=this.spatialReference,k=g?g.divExtent:this.extent,t=this._fixExtent(b,e||!1);b=t.extent;var u=b.getWidth(),q=b.getHeight(),v=Math.round;if(k)var l=v(1E6*k.getWidth()),m=v(1E6*u),x=v(1E6*k.getHeight()),w=v(1E6*q),h=l!==m||x!==w;var C,p,B=g&&g.rect,A=g&&g.divExtent;if(ya.zoomDuration&&h&&k){A=A||new J(k);B=B||{left:k.xmin,top:k.ymax,width:k.getWidth(),
height:k.getHeight()};p={left:b.xmin,top:b.ymax,width:u,height:q};var y=new N(b.xmin,b.ymax,r),G=new N(b.xmin,b.ymin,r),z=new N(this.extent.xmin,this.extent.ymax,r),F=new N(this.extent.xmin,this.extent.ymin,r);(C=U.getLineIntersection(z,y,F,G,r))||g||(h=!1)}this._ratioW=this.width/u;this._ratioH=this.height/q;var I=this._zoomAnimDiv;if(h)if(va(this._layersDiv,{left:"0px",top:"0px"}),c=new M(0,0),this.__visibleRect.x=this.__visibleRect.y=0,B&&p){this._delta=c;I.id="_zAD";I.startingExtent=A;I.extent=
b;I.levelChange=h;I.newLod=t.lod;I.anchor=d?d:!C&&g?g.anchor:ja(this.extent,this.width,this.height,C);var H=this.extent.getWidth()/b.getWidth();ya.zoomAnimationThrottled&&1024<(1>H?1/H:H)?(this.__zoomStart(A,I.anchor),this.__zoom(A,1,I.anchor),this._fireOnScale(1,I.anchor,!0),this.__zoomEnd(b,H,I.anchor,t.lod,h)):(this._zoomAnim=E.resize({node:I,start:B,end:p,duration:ya.zoomDuration,rate:ya.zoomRate,beforeBegin:g?null:this._zoomStartHandler,onAnimate:this._zoomingHandler,onEnd:this._zoomEndHandler}).play(),
this._fireOnScale(H,I.anchor,f))}else this._updateExtent(b,h,f),this._fireExtChg([this.extent,c,h,this.__LOD=t.lod]);else if(!this.__panning)if(!1===this.loaded||f)this._updateExtent(b,h,f),this._fireExtChg([this.extent,c,h,this.__LOD=t.lod]);else{this.__panning=!0;B=(new K(0,0,this.width,this.height,this.spatialReference)).getCenter();B.x=v(B.x);B.y=v(B.y);var D=this._delta=this.toScreen(b.getCenter()),P=Math.abs(B.x-D.x),Q=Math.abs(B.y-D.y);this.optimizePanAnimation&&(P>2*this.width||Q>2*this.height)?
(this.__panStart(0,0),this.__pan(0,0),this.__visibleRect.x=this.__visibleRect.y=this.__visibleDelta.x=this.__visibleDelta.y=0,this.__panning=!1,this._delta=null,this._updateExtent(b,!1,f),this.onPanEnd(this.extent,new M(0,0)),this._fireExtChg([this.extent,new M(0,0),!0,this.__LOD])):(this.onPanStart(this.extent,new M(0,0)),this._panAnim=E.slideTo({node:I,left:B.x-D.x,top:B.y-D.y,duration:ya.panDuration,rate:ya.panRate,onAnimate:this._panningHandler,onEnd:this._panEndHandler}),this._panAnim.play())}}}catch(Ya){}},
_fireOnScale:function(b,c,d){if("css-transforms"===this.navigationMode){var e=this.__visibleDelta;this.onScale(y.scaleAt(b,{x:-1*(this.width/2-(c.x-e.x)),y:-1*(this.height/2-(c.y-e.y))}),d)}},_stopAnim:function(){var b=this._zoomAnim,c=this._panAnim;if(b&&b._active){b.stop();var c=b.curve.getValue(b._getStep()),d=parseFloat(c.left),e=parseFloat(c.top),b=b.node;return{anchor:b.anchor,start:b.startingExtent,end:b.extent,level:b.newLod&&b.newLod.level,rect:c,divExtent:new J(d,e-parseFloat(c.height),
d+parseFloat(c.width),e,this.spatialReference)}}c&&c._active&&(c.stop(),c._fire("onEnd",[c.node]))},__getExtentForLevel:function(b,c,d){var e=this.__tileInfo,e=e&&e.lods;b=C.isDefined(b)?b:0;d=d||this.extent;c=c||d&&d.getCenter();if(e){if(c){d=this.getMinZoom();var g=this.getMaxZoom();b>g&&(b=g);b<d&&(b=d);b=e[b];e=this.width*b.resolution/2;d=this.height*b.resolution/2;return{extent:new J(c.x-e,c.y-d,c.x+e,c.y+d,c.spatialReference),lod:b}}}else if(d)return{extent:d.expand(!b||1>b?1:b).centerAt(c)}},
_jobs:0,_incr:function(){1===++this._jobs&&(this.updating=!0,this.attr("data-updating",""),this.onUpdateStart())},_decr:function(){var b=--this._jobs;b?0>b&&(this._jobs=0):(this.updating=!1,this.attr("data-updating"),this.onUpdateEnd())},_fireEvent:function(b,c){this[b]&&this[b].apply(this,c)},_updateExtent:function(b,c,d){this.extent=b;b=this.spatialReference;this._viewInfo={view:new O({viewingMode:"map",scale:this.getScale()}),sr:b,version:c?++oa:oa};(c||d)&&this._setClipRect();this._calcGeographicExtent()},
_calcGeographicExtent:function(){var b=this.spatialReference;b&&(b.isWebMercator()?this.geographicExtent=aa.webMercatorToGeographic(this._getAvailExtent(),!0):4326===b.wkid&&(this.geographicExtent=new J(this._getAvailExtent().toJson())))},_fireExtChg:function(b){this.attr("data-zoom",this.getZoom());this.attr("data-scale",this.getScale());this._fireEvent("onExtentChange",b);if(b=this._extentDfd)delete this._extentDfd,b.resolve()},attr:function(b,c){var d=this.container;d&&(null==c?d.removeAttribute(b):
d.setAttribute(b,c));return this},onUpdateStart:function(){},onUpdateEnd:function(){},onLoad:function(){this._setClipRect();this._calcGeographicExtent()},onBeforeUnload:function(){},onUnload:function(){},onExtentChange:function(b,c,d){},onTimeExtentChange:function(){},onWebGLEnabledChange:function(){},onLayerAdd:function(){},onLayerAddResult:function(){},onLayersAddResult:function(){},onLayerRemove:function(){},onLayersRemoved:function(){},onLayerReorder:function(){},onLayersReordered:function(){},
onLayerSuspend:function(){},onLayerResume:function(){},onPanStart:function(){},onPan:function(){},onPanEnd:function(){},onScale:function(){},onZoomStart:function(){},onZoom:function(){},onZoomEnd:function(){},onResize:function(){this._setClipRect()},onReposition:function(){},destroy:function(){this._destroyed||(this.onBeforeUnload(this),this.removeAllLayers(),this.releaseAllWebGLContexts(),this._cleanUp(),clearTimeout(this._resizeTimerHandle),this._gc&&this._gc._cleanUp(),this._destroyed=!0,this.onUnload(this))},
setCursor:function(b){va(this.__container,"cursor",this.cursor=b)},setMapCursor:function(b){this.setCursor(this._cursor=b)},resetMapCursor:function(){this.setCursor(this._cursor)},setBackgroundColor:function(b){b&&!b.declaredClass&&(b=new P(b));this.backgroundColor=b||null;var c="";b&&(c=9>x("ie")?b.toHex():"rgba("+b.toRgba().join(",")+")");t.set(this.root,{backgroundColor:c})},setInfoWindow:function(b){var c=this.infoWindow;c&&c.unsetMap(this);this.infoWindow=b;this.loaded&&b&&b.setMap(this)},setInfoWindowOnClick:function(b){this._params.showInfoWindowOnClick=
b;this.popupManager&&this.popupManager.set("enabled",b)},getInfoWindowAnchor:function(b){return this.infoWindow&&this.infoWindow._getAnchor&&this.infoWindow._getAnchor(b)||"upperright"},toScreen:function(b,c){return ja(this.extent,this.width,this.height,b,c)},toMap:function(b){return na(this.extent,this.width,this.height,b)},addLayer:function(b,c){b&&!this.getLayer(b.id)&&this._addLayer(b,b instanceof S?this.graphicsLayerIds:this.layerIds,c);return b},addLayers:function(b){var c=[],d=b.length,e,f,
h=b.length;e=k.connect(this,"onLayerAddResult",function(f,h){-1!==g.indexOf(b,f)&&(d--,c.push({layer:f,success:!h,error:h}),d||(k.disconnect(e),this.onLayersAddResult(c)))});for(f=0;f<h;f++)this.addLayer(b[f]);return this},removeLayer:function(b,c){var d=b.id,e=b instanceof S?this.graphicsLayerIds:this.layerIds,g=ra(e,d);0<=g&&(this._forgetLayer(b),e.splice(g,1),this.loaded||this._firstLayerId!==d||(this._firstLayerId=null),b instanceof S?this._detachGraphicsLayer(b):b.loaded&&(b.getMap()&&b._unsetMap(this,
this._layersDiv),-1!==b.declaredClass.indexOf("VETiledLayer")&&this._onBingLayerRemove(b)),delete this._layers[d],delete this._layerDivs[d],c||this._reorderLayers(e),this.onLayerRemove(b))},removeAllLayers:function(){var b=this.layerIds,c;for(c=b.length-1;0<=c;c--)this.removeLayer(this._layers[b[c]],1);b=this.graphicsLayerIds;for(c=b.length-1;0<=c;c--)this.removeLayer(this._layers[b[c]],1);this.onLayersRemoved()},reorderLayer:function(b,c){q.isString(b)&&(f.deprecated(this.declaredClass+": Map.reorderLayer(/*String*/ id, /*Number*/ index) deprecated. Use Map.reorderLayer(/*Layer*/ layer, /*Number*/ index).",
null,"v2.0"),b=this.getLayer(b));var d=b.id,e=b instanceof S?this.graphicsLayerIds:this.layerIds;0>c?c=0:c>=e.length&&(c=e.length-1);b=ra(e,d);-1!==b&&b!==c&&(e.splice(b,1),e.splice(c,0,d),this._reorderLayers(e))},getLayer:function(b){return this._layers[b]},setWebGLEnabled:function(b){var c=this.webglEnabled;this.webglEnabled=(b||!1)&&Da;if(c!==this.webglEnabled)this.onWebGLEnabledChange()},isWebGLContextAvailable:function(){return fa.isContextAvailable()&&(-1===this.maxWebGLContexts||0<this.maxWebGLContexts&&
this._webglContextOwners.length<this.maxWebGLContexts)},ownsWebGLContext:function(b){return-1!==g.indexOf(this._webglContextOwners,b)},acquireWebGLContext:function(b){return-1!==g.indexOf(this._webglContextOwners,b)?!0:this.isWebGLContextAvailable()?(fa.acquireContext(b),this._webglContextOwners.push(b),!0):!1},releaseWebGLContext:function(b){var c=g.indexOf(this._webglContextOwners,b);-1!==c&&this._webglContextOwners.splice(c,1);fa.releaseContext(b)},releaseAllWebGLContexts:function(){var b=this._webglContextOwners.slice(0);
g.forEach(b,function(b){this.releaseWebGLContext(b)},this)},syncHitTestForWebGL:function(b){var c,d=b.screenPoint;b=this.graphicsLayerIds.slice(0).reverse();g.some(b,function(b){b=this.getLayer(b);b.loaded&&!b.suspended&&b.hasWebGLSurface()&&(c=b._div.syncHitTest(d.x,d.y));return!!c},this);return c},setExtent:function(b,c){b=new J(b.toJson());var d=b.getWidth(),e=b.getHeight();return 0===d&&0===e?this.centerAt(new N({x:b.xmin,y:b.ymin,spatialReference:b.spatialReference&&b.spatialReference.toJson()})):
this._extentUtil(null,null,b,c)},getTargetExtent:function(b){if(b)return b=new J(b.toJson()),0!==b.getWidth()&&0!==b.getHeight()&&(b=(b=this._convertGeometry(this,b))&&this._fixExtent(b).extent),b},centerAt:function(b){return this._extentUtil(null,{mapCenter:b})},centerAndZoom:function(b,c){return this._extentUtil({targetLevel:c,mapCenter:b,levelOrFactor:!0})},getScale:function(){return this.__LOD?this.__LOD.scale:R.getScale(this)},getResolution:function(){return this.__LOD?this.__LOD.resolution:
this.extent?this.extent.getWidth()/this.width:0},getResolutionInMeters:function(){return this.getResolution()*R.getUnitValueForSR(this.spatialReference)},getResolutionForPopup:function(){var b=this.getResolution(),c=this.getResolutionInMeters(),d=c/16;return 10>=d?0:b/c*d},getMinResolution:function(){return this._minResolution},getMaxResolution:function(){return this._maxResolution},getMinScale:function(){return this._params.minScale},getMaxScale:function(){return this._params.maxScale},getViewInfo:function(){return this._viewInfo},
setScale:function(b){return this._extentUtil({targetScale:b})},getLayersVisibleAtScale:function(b){var c=[];(b=b||this.getScale())&&g.forEach(this.layerIds.concat(this.graphicsLayerIds),function(d){d=this.getLayer(d);d.isVisibleAtScale(b)&&c.push(d)},this);return c},getNumLevels:function(){var b=this.getMinZoom(),c=this.getMaxZoom();return b===c&&0>b?0:c-b+1},getLevel:function(){return this.__LOD?this.__LOD.level:-1},setLevel:function(b){if(-1<b)return this._extentUtil({targetLevel:b})},getZoom:function(){return this.getLevel()},
setZoom:function(b){return this.setLevel(b)},getMinZoom:function(){return this._params.minZoom},getMaxZoom:function(){return this._params.maxZoom},setBasemap:function(b){var c;q.isObject(b)?(c=b,b=c.title):c=A&&A[b];if(c){this._basemapDfd&&!this._basemapDfd.isFulfilled()&&this._basemapDfd.cancel();var d=[],e=0;g.forEach(c.baseMapLayers||c.layers,function(c){var g={id:c.id,displayLevels:c.displayLevels,opacity:C.isDefined(c.opacity)?c.opacity:null,visible:C.isDefined(c.visibility)?c.visibility:null};
if(g=this._createBaseLayerInstance(c,g,b))d.push(g),c.isReference||e++},this);d.length&&e&&(this._basemapDfd=Q(d).otherwise(ga(this,function(b){this._basemapPending=!1;b&&"cancel"===b.dojoType&&g.forEach(d,function(b){b.cancel()});throw b;})).then(function(c){var d=[],e=[];g.forEach(c,function(b){b&&(b.layerInfo&&d.push(b.layerInfo),b.layer&&e.push(b.layer))});return{basemapName:b,infos:d,layers:e}}).then(ga(this,this._waitForBaseLayers)).then(ga(this,this._setBasemap)),this._basemapPending=!this.loaded&&
!this._basemapDfd.isFulfilled())}else{c=[];for(var f in A)c.push(f)}},_createBaseLayerInstance:function(b,c,d){var e,g=new h;if(b.type)switch(b.type){case "OpenStreetMap":g.resolve({layerInfo:b,layer:new ia(c)});break;case "VectorTile":m(["./layers/VectorTileLayer"],function(d){e=G.normalize(b.url);g.promise.isFulfilled()||g.resolve({layerInfo:b,layer:new d(e,c)})});break;default:return null}else e=G.normalize(b.url),g.resolve({layerInfo:b,layer:new la(e,c)});return g.promise},_waitForBaseLayers:function(b){var c=
new h(H._dfdCanceller);c.promise.otherwise(function(b){if(b&&"cancel"===b.dojoType){for(var d in c._layerEvents)b=c._layerEvents[d],k.disconnect(b[0]),k.disconnect(b[1]);delete c._layerEvents}});if(!this.loaded)return c.resolve(b),c.promise;var d=function(d){c._pendingLayers--;d=g.indexOf(b.layers,this);-1<d&&(d=c._layerEvents[d])&&(k.disconnect(d[0]),k.disconnect(d[1]));0>=c._pendingLayers&&(delete c._layerEvents,c.isFulfilled()||c.resolve(b))};c._pendingLayers=0;c._layerEvents={};g.forEach(b.layers,
function(b,d){b&&c._pendingLayers++});g.forEach(b.layers,function(b,e){b&&(b.loaded?d(b):c._layerEvents[e]=[k.connect(b,"onLoad",b,d),k.connect(b,"onError",b,d)])});return c.promise},_setBasemap:function(b){var c=b.layers,d=b.infos,e=0,f=!0,h;this._basemapPending=!1;this.loaded&&(g.forEach(c,function(b,c){b.loaded&&(d[c].isReference||e++)}),f=e);f&&(this.basemapLayerIds&&(h={basemapName:this._basemap,infos:A&&A[this._basemap]&&A[this._basemap].baseMapLayers},h.basemapName||(g.forEach(this.basemapLayerIds,
function(b){if(this.getLayer(b)instanceof ia)return h.basemapName="osm",h.infos=A&&A.osm&&A.osm.baseMapLayers,!1},this),h.basemapName||(h=null))),this._removeBasemap(),this._basemap=b.basemapName,this.basemapLayerIds=this._addBasemapLayers(c,d),this.attr("data-basemap",this.getBasemap()),this.emit("basemap-change",{current:b,previous:h}))},_addBasemapLayers:function(b,c){var d=[],e=[],f=0;g.forEach(b,function(b,g){c[g].isReference?d.push(b):(this.addLayer(b,f++),e.push(b.id))},this);d.length&&g.forEach(d,
function(b){b.attr("data-reference",!0);this.addLayer(b,"top");e.push(b.id)},this);return e},_removeBasemap:function(){var b=this.basemapLayerIds,c;b&&b.length&&g.forEach(b,function(b){(c=this.getLayer(b))&&this.removeLayer(c)},this)},getBasemap:function(){return this._basemap||""},translate:function(b,c){b=b||0;c=c||0;if(!this._txTimer){this._tx=this._ty=0;var d=this.toScreen(this.extent.getCenter());this.__panStart(d.x,d.y)}this._tx+=b;this._ty+=c;this.__pan(this._tx,this._ty);clearTimeout(this._txTimer);
this._txTimer=setTimeout(this._endTranslate,150)},_endTranslate:function(){clearTimeout(this._txTimer);this._txTimer=null;var b=this._tx,c=this._ty;this._tx=this._ty=0;this.__panEnd(b,c)},setTimeExtent:function(b){b=(this.timeExtent=b)?new b.constructor(b.toJson()):null;this.onTimeExtentChange(b)},setTimeSlider:function(b){this.timeSlider&&(Ga(this._tsTimeExtentChange_connect),this.timeSlider=this._tsTimeExtentChange_connect=null);b&&(this.timeSlider=b,this.setTimeExtent(b.getCurrentTimeExtent()),
this._tsTimeExtentChange_connect=Fa(b,"onTimeExtentChange",this,"setTimeExtent"))},setVisibility:function(b){if(this.visible!==b){(this.visible=b)||(this._display=this.container.style.display);this.container.style.display=b?this._display:"none";if(this.autoResize){var c=b?"resume":"pause";this._rszSignal[c]();this._oriSignal[c]()}b&&this.resize()}return this},resize:function(b){clearTimeout(this._resizeTimerHandle);this._destroyed||(!0===b?this._execResize():this._resizeTimerHandle=setTimeout(this._execResize,
this.resizeDelay))},_timedResize:function(){this._resizeTimerHandle||this._execResize()},_execResize:function(){clearTimeout(this._resizeTimerHandle);this._resizeTimerHandle=null;this.reposition();this._resize();this.autoResize&&this._startResizeTimer()},_resize:function(){var b=this.width,c=this.height,d=t.get(this.container,"display"),e=u.getContentBox(this.container);if(!("none"===d||0>=e.w||0>=e.h||b===e.w&&c===e.h)){if(d=this._zoomAnim||this._panAnim)d.stop(),d._fire("onEnd",[d.node]);va(this.root,
{width:(this.width=e.w)+"px",height:(this.height=e.h)+"px"});e=this.width;d=this.height;this.attribution&&this.attribution.domNode&&t.set(this.attribution.domNode,"maxWidth",Math.floor(e*this._mapParams.attributionWidth)+"px");this.__visibleRect.update(this.__visibleRect.x,this.__visibleRect.y,e,d);this.__visibleDelta.update(this.__visibleDelta.x,this.__visibleDelta.y,e,d);var g=new K(this.extent),b=(new K(g.x,g.y,e/b*g.width,d/c*g.height,this.spatialReference)).getExtent();this.onResize(b,e,d);this._extentUtil(null,
null,b,null,!0)}},reposition:function(){var b=this.position,c=b.x,d=b.y;this._reposition();b=this.position;if(c!==b.x||d!==b.y)this.onReposition(b.x,b.y)},_reposition:function(){var b=u.position(this.container,!0),c=u.getPadBorderExtents(this.container);this.position.update(b.x+c.l,b.y+c.t)},_setClipRect:function(){delete this._clip;var b=7>=x("ie")||void 0===x("ie")&&7<=x("trident")?"rect(auto,auto,auto,auto)":"auto";if(this.wrapAround180){var c=this.width,d=this.height,e=this._getFrameWidth(),g=
c-e;0<g&&(b=g/2,b="rect(0px,"+(b+e)+"px,"+d+"px,"+b+"px)",d=this.extent.getWidth(),c=e/c*d,this._clip=[(d-c)/2,c])}va(this.__container,"clip",b)},_getAvailExtent:function(){var b=this.extent,c=this._clip;if(c){if(!b._clip){var d=new K(b);d.width=c[1];d.x+=c[0];b._clip=d.getExtent()}return b._clip}return b},_fixedPan:function(b,c){return this._extentUtil(null,{dx:b,dy:c})},panUp:function(){return this._fixedPan(0,-.75*this.height)},panUpperRight:function(){return this._fixedPan(.75*this.width,-.75*
this.height)},panRight:function(){return this._fixedPan(.75*this.width,0)},panLowerRight:function(){return this._fixedPan(.75*this.width,.75*this.height)},panDown:function(){return this._fixedPan(0,.75*this.height)},panLowerLeft:function(){return this._fixedPan(-.75*this.width,.75*this.height)},panLeft:function(){return this._fixedPan(-.75*this.width,0)},panUpperLeft:function(){return this._fixedPan(-.75*this.width,-.75*this.height)},enableSnapping:function(b){b=b||{};if("esri.SnappingManager"===
b.declaredClass)this.snappingManager=b;else{var c=Ma++,d=this;this._rids&&this._rids.push(c);m(["./SnappingManager"],function(e){var f=d._rids?g.indexOf(d._rids,c):-1;-1!==f&&(d._rids.splice(f,1),d.snappingManager=new e(q.mixin({map:d},b)))})}return this.snappingManager},disableSnapping:function(){this.snappingManager&&this.snappingManager.destroy();this.snappingManager=null},_createLabelLayer:function(){!this._labels&&ka&&this.loaded&&(this._labels=new ka({id:"_internal_LabelLayer"}),this._labels._setMap(this,
this._gc._surface),this._processLabelLayers(),this.on("layers-reordered",this._processLabelLayers))},_processLabelLayers:function(){null==this._labelProcessor&&(this._labelProcessor=setTimeout(this._updateLabelLayers,0))},_updateLabelLayers:function(){this._labelProcessor=null;this._labels&&(this._labels.removeAllFeatureLayers(),g.forEach(this.graphicsLayerIds,function(b){b=this.getLayer(b);"function"===typeof b.applyEdits?this._labels.addFeatureLayer(b):"esri.layers.WFSLayer"===b.declaredClass&&
this._labels.addFeatureLayer(b)},this))},_getMapImageLyr:function(){this.loaded&&!this._mapImageLyr&&(this._mapImageLyr=new ca,this._mapImageLyr._setMap(this,this._layersDiv),this._placeMapImageLyr());return this._mapImageLyr},_placeMapImageLyr:function(){for(var b=this.layerIds,c=this._layerDivs,d=!1,e,g,f=b.length-1;0<=f;f--)if(e=b[f],g=this.getLayer(e),e=c[e],g&&e&&!g._isReference){v.place(this._mapImageLyr._div,e,"after");d=!0;break}d||v.place(this._mapImageLyr._div,this._layersDiv,"first")}});
x("extend-esri")&&(z._CoreMap=l);return l})},"dojox/gfx/matrix":function(){define("dojox/gfx/matrix",["./_base","dojo/_base/lang"],function(m,p){var f=m.matrix={},l={};f._degToRad=function(f){return l[f]||(l[f]=Math.PI*f/180)};f._radToDeg=function(f){return f/Math.PI*180};f.Matrix2D=function(k){if(k)if("number"==typeof k)this.xx=this.yy=k;else if(k instanceof Array){if(0<k.length){for(var h=f.normalize(k[0]),q=1;q<k.length;++q){var g=h,e=f.normalize(k[q]),h=new f.Matrix2D;h.xx=g.xx*e.xx+g.xy*e.yx;
h.xy=g.xx*e.xy+g.xy*e.yy;h.yx=g.yx*e.xx+g.yy*e.yx;h.yy=g.yx*e.xy+g.yy*e.yy;h.dx=g.xx*e.dx+g.xy*e.dy+g.dx;h.dy=g.yx*e.dx+g.yy*e.dy+g.dy}p.mixin(this,h)}}else p.mixin(this,k)};p.extend(f.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});p.mixin(f,{identity:new f.Matrix2D,flipX:new f.Matrix2D({xx:-1}),flipY:new f.Matrix2D({yy:-1}),flipXY:new f.Matrix2D({xx:-1,yy:-1}),translate:function(k,h){return 1<arguments.length?new f.Matrix2D({dx:k,dy:h}):new f.Matrix2D({dx:k.x,dy:k.y})},scale:function(k,h){return 1<arguments.length?
new f.Matrix2D({xx:k,yy:h}):"number"==typeof k?new f.Matrix2D({xx:k,yy:k}):new f.Matrix2D({xx:k.x,yy:k.y})},rotate:function(k){var h=Math.cos(k);k=Math.sin(k);return new f.Matrix2D({xx:h,xy:-k,yx:k,yy:h})},rotateg:function(k){return f.rotate(f._degToRad(k))},skewX:function(k){return new f.Matrix2D({xy:Math.tan(k)})},skewXg:function(k){return f.skewX(f._degToRad(k))},skewY:function(k){return new f.Matrix2D({yx:Math.tan(k)})},skewYg:function(k){return f.skewY(f._degToRad(k))},reflect:function(k,h){1==
arguments.length&&(h=k.y,k=k.x);var q=k*k,g=h*h,e=q+g,c=2*k*h/e;return new f.Matrix2D({xx:2*q/e-1,xy:c,yx:c,yy:2*g/e-1})},project:function(k,h){1==arguments.length&&(h=k.y,k=k.x);var q=k*k,g=h*h,e=q+g,c=k*h/e;return new f.Matrix2D({xx:q/e,xy:c,yx:c,yy:g/e})},normalize:function(k){return k instanceof f.Matrix2D?k:new f.Matrix2D(k)},isIdentity:function(f){return 1==f.xx&&0==f.xy&&0==f.yx&&1==f.yy&&0==f.dx&&0==f.dy},clone:function(k){var h=new f.Matrix2D,q;for(q in k)"number"==typeof k[q]&&"number"==
typeof h[q]&&h[q]!=k[q]&&(h[q]=k[q]);return h},invert:function(k){k=f.normalize(k);var h=k.xx*k.yy-k.xy*k.yx;return k=new f.Matrix2D({xx:k.yy/h,xy:-k.xy/h,yx:-k.yx/h,yy:k.xx/h,dx:(k.xy*k.dy-k.yy*k.dx)/h,dy:(k.yx*k.dx-k.xx*k.dy)/h})},_multiplyPoint:function(f,h,q){return{x:f.xx*h+f.xy*q+f.dx,y:f.yx*h+f.yy*q+f.dy}},multiplyPoint:function(k,h,q){k=f.normalize(k);return"number"==typeof h&&"number"==typeof q?f._multiplyPoint(k,h,q):f._multiplyPoint(k,h.x,h.y)},multiplyRectangle:function(k,h){var q=f.normalize(k);
h=h||{x:0,y:0,width:0,height:0};if(f.isIdentity(q))return{x:h.x,y:h.y,width:h.width,height:h.height};k=f.multiplyPoint(q,h.x,h.y);var g=f.multiplyPoint(q,h.x,h.y+h.height),e=f.multiplyPoint(q,h.x+h.width,h.y);h=f.multiplyPoint(q,h.x+h.width,h.y+h.height);var q=Math.min(k.x,g.x,e.x,h.x),c=Math.min(k.y,g.y,e.y,h.y);return{x:q,y:c,width:Math.max(k.x,g.x,e.x,h.x)-q,height:Math.max(k.y,g.y,e.y,h.y)-c}},multiply:function(k){for(var h=f.normalize(k),q=1;q<arguments.length;++q){var g=h,e=f.normalize(arguments[q]),
h=new f.Matrix2D;h.xx=g.xx*e.xx+g.xy*e.yx;h.xy=g.xx*e.xy+g.xy*e.yy;h.yx=g.yx*e.xx+g.yy*e.yx;h.yy=g.yx*e.xy+g.yy*e.yy;h.dx=g.xx*e.dx+g.xy*e.dy+g.dx;h.dy=g.yx*e.dx+g.yy*e.dy+g.dy}return h},_sandwich:function(k,h,q){return f.multiply(f.translate(h,q),k,f.translate(-h,-q))},scaleAt:function(k,h,q,g){switch(arguments.length){case 4:return f._sandwich(f.scale(k,h),q,g);case 3:return"number"==typeof q?f._sandwich(f.scale(k),h,q):f._sandwich(f.scale(k,h),q.x,q.y)}return f._sandwich(f.scale(k),h.x,h.y)},rotateAt:function(k,
h,q){return 2<arguments.length?f._sandwich(f.rotate(k),h,q):f._sandwich(f.rotate(k),h.x,h.y)},rotategAt:function(k,h,q){return 2<arguments.length?f._sandwich(f.rotateg(k),h,q):f._sandwich(f.rotateg(k),h.x,h.y)},skewXAt:function(k,h,q){return 2<arguments.length?f._sandwich(f.skewX(k),h,q):f._sandwich(f.skewX(k),h.x,h.y)},skewXgAt:function(k,h,q){return 2<arguments.length?f._sandwich(f.skewXg(k),h,q):f._sandwich(f.skewXg(k),h.x,h.y)},skewYAt:function(k,h,q){return 2<arguments.length?f._sandwich(f.skewY(k),
h,q):f._sandwich(f.skewY(k),h.x,h.y)},skewYgAt:function(k,h,q){return 2<arguments.length?f._sandwich(f.skewYg(k),h,q):f._sandwich(f.skewYg(k),h.x,h.y)}});m.Matrix2D=f.Matrix2D;return f})},"esri/basemaps":function(){define("esri/basemaps",["require","dojo/has","./kernel","dojo/i18n!./nls/jsapi"],function(m,p,f,l){m={streets:{title:l.basemaps.streets,thumbnailUrl:m.toUrl("./images/basemap/streets.jpg"),itemId:"d8855ee4d3d74413babfb0f41203b168",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"}]},
satellite:{title:l.basemaps.satellite,thumbnailUrl:m.toUrl("./images/basemap/satellite.jpg"),itemId:"86de95d4e0244cba80f0fa2c9403a7b2",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}]},hybrid:{title:l.basemaps.hybrid,thumbnailUrl:m.toUrl("./images/basemap/hybrid.jpg"),itemId:"413fd05bbd7342f5991d5ec96f4f8b18",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",
isReference:!0}]},terrain:{title:l.basemaps.terrain,thumbnailUrl:m.toUrl("./images/basemap/terrain.jpg"),itemId:"aab054ab883c4a4094c72e949566ad40",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer"},{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",isReference:!0}]},topo:{title:l.basemaps.topo,thumbnailUrl:m.toUrl("./images/basemap/topo.jpg"),itemId:"6e03e8c26aad4b9c92a87c1063ddb0e3",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer"}]},
gray:{title:l.basemaps.gray,thumbnailUrl:m.toUrl("./images/basemap/gray.jpg"),itemId:"8b3b470883a744aeb60e5fff0a319ce7",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer"},{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",isReference:!0}]},"dark-gray":{title:l.basemaps["dark-gray"],thumbnailUrl:m.toUrl("./images/basemap/dark-gray.jpg"),itemId:"da65bacab5bd4defb576f839b6b28098",
baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer"},{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",isReference:!0}]},oceans:{title:l.basemaps.oceans,thumbnailUrl:m.toUrl("./images/basemap/oceans.jpg"),itemId:"48b8cec7ebf04b5fbdcaf70d09daff21",baseMapLayers:[{url:"https://services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{url:"https://services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",
isReference:!0}]},"national-geographic":{title:l.basemaps["national-geographic"],thumbnailUrl:m.toUrl("./images/basemap/national-geographic.jpg"),itemId:"509e2d6b034246d692a461724ae2d62c",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer"}]},osm:{title:l.basemaps.osm,thumbnailUrl:m.toUrl("./images/basemap/osm.jpg"),itemId:"5d2bfa736f8448b3a1708e1f6be23eed",baseMapLayers:[{type:"OpenStreetMap"}]},"dark-gray-vector":{title:l.basemaps["dark-gray"],
thumbnailUrl:m.toUrl("./images/basemap/dark-gray.jpg"),itemId:"c11ce4f7801740b2905eb03ddc963ac8",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/c11ce4f7801740b2905eb03ddc963ac8/resources/styles/root.json",type:"VectorTile"}]},"gray-vector":{title:l.basemaps.gray,thumbnailUrl:m.toUrl("./images/basemap/gray.jpg"),itemId:"8a2cba3b0ebf4140b7c0dc5ee149549a",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/8a2cba3b0ebf4140b7c0dc5ee149549a/resources/styles/root.json",
type:"VectorTile"}]},"streets-vector":{title:l.basemaps.streets,thumbnailUrl:m.toUrl("./images/basemap/streets.jpg"),itemId:"de26a3cf4cc9451298ea173c4b324736",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",type:"VectorTile"}]},"topo-vector":{title:l.basemaps.topo,thumbnailUrl:m.toUrl("./images/basemap/topo.jpg"),itemId:"7dc6cea0b1764a1f9af2e679f642f0f5",baseMapLayers:[{url:"https://services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},
{url:"https://www.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",type:"VectorTile"}]},"streets-night-vector":{title:l.basemaps["streets-night-vector"],thumbnailUrl:m.toUrl("./images/basemap/streets-night.jpg"),itemId:"86f556a2d1fd468181855a35e344567f",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",type:"VectorTile"}]},"streets-relief-vector":{title:l.basemaps["streets-relief-vector"],
thumbnailUrl:m.toUrl("./images/basemap/streets-relief.jpg"),itemId:"b266e6d17fc345b498345613930fbd76",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",type:"VectorTile"}]},"streets-navigation-vector":{title:l.basemaps["streets-navigation-vector"],thumbnailUrl:m.toUrl("./images/basemap/streets-navigation.jpg"),itemId:"63c47b7177f946b49902c24129b87252",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",
type:"VectorTile"}]}};p("extend-esri")&&(f.basemaps=m);return m})},"esri/Evented":function(){define("esri/Evented","dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Evented dojo/has ./kernel".split(" "),function(m,p,f,l,k,h){m=m([l],{declaredClass:"esri.Evented",registerConnectEvents:function(){var f=this.constructor,g=this.constructor._meta.parents,e=[{}],c={},b,d,h=function(b,c){p.isArray(b)||(b=[b]);for(var d=0;d<b.length;d++){var e=b[d];e._meta&&e._meta.parents&&h(e._meta.parents,c);e.prototype._eventMap&&
c.push(p.mixin({},e.prototype._eventMap))}return c};if(!f._onMap){h(g,e);e.push(this._eventMap);g=p.mixin.apply(this,e);for(b in this)/^on\w/.test(b)&&p.isFunction(this[b])&&(e=this._hyphenLower(b).toLowerCase(),g[e]||(c[e]={method:b}));for(d in g)b=this._onCamelCase(d),c[d]={method:b,argKeys:g[d]};f._onMap=c;return f._onMap}},on:function(h,g){if(-1<h.indexOf(",")){for(var e=h.split(/\s*,\s*/),c=e.length,b=[];c--;)b.push(this.on(e[c],g));b.remove=function(){for(var c=0;c<b.length;c++)b[c].remove()};
return b}var e=this.constructor._onMap||this.registerConnectEvents(),c="string"==typeof h&&h.toLowerCase(),d=this._onCamelCase(c),r=e&&e[c];return(d=r&&r.method||this[d]&&p.isFunction(this[d])&&d)?r&&p.isArray(r.argKeys)?(e=this._onArr2Obj(g,e[c].argKeys),f.after(this,d,e,!0)):f.after(this,d,function(b){b=b||{};b.target||(b.target=this);g.call(this,b)},!0):this.inherited(arguments)},emit:function(f,g){var e,c,b,d,h=f.toLowerCase();d=this._onCamelCase(f);var k=this.constructor._onMap||this.registerConnectEvents();
d=(b=k&&k[h]&&k[h].method||p.isFunction(this[d])&&d)&&this[b];b&&k&&k[h]&&this._onObj2Arr(function(){c=Array.prototype.slice.call(arguments)},k[h].argKeys)(g);g=g||{};g.target||(g.target=this);d&&(e=c&&c.length?c:[g],e=d.apply(this,e));this.inherited(arguments,[f,g]);return e},_onObj2Arr:function(f,g){if(g){var e=this;return function(c){var b,d=[],h=g.length;for(b=0;b<h;b++)d[b]=c[g[b]];f.apply(e,d)}}return f},_onArr2Obj:function(f,g){if(g){var e=this;return function(){var c,b={},d=arguments.length;
for(c=0;c<d;c++)b[g[c]]=arguments[c];b.target||(b.target=e);f.call(e,b)}}return f},_hyphenLower:function(f){return f.replace(/^on/,"").replace(/[A-Z](?=[a-z])/g,function(g,e){return(e?"-":"")+g.toLowerCase()})},_onCamelCase:function(f){return"on"+f.substr(0,1).toUpperCase()+f.substr(1).replace(/\-([a-z])/g,function(g,e){return e.toUpperCase()})}});k("extend-esri")&&(h.Evented=m);return m})},"esri/fx":function(){define("esri/fx","dojo/_base/connect dojo/_base/fx dojo/_base/lang dojo/dom dojo/dom-geometry dojo/dom-style dojo/fx dojo/has ./kernel".split(" "),
function(m,p,f,l,k,h,q,g,e){var c={animateRange:function(b){var c=b.range;return new p.Animation(f.mixin({curve:new p._Line(c.start,c.end)},b))},resize:function(b){var c=b.node=l.byId(b.node),e=b.start,g=b.end;e||(e=k.getMarginBox(c),c=k.getPadBorderExtents(c),e=b.start={left:e.l+c.l,top:e.t+c.t,width:e.w-c.w,height:e.h-c.h});g||(g=b.anchor?b.anchor:{x:e.left,y:e.top},c=b.size,g=b.end={left:e.left-(c.width-e.width)*(g.x-e.left)/e.width,top:e.top-(c.height-e.height)*(g.y-e.top)/e.height,width:c.width,
height:c.height});return p.animateProperty(f.mixin({properties:{left:{start:e.left,end:g.left},top:{start:e.top,end:g.top},width:{start:e.width,end:g.width},height:{start:e.height,end:g.height}}},b))},slideTo:function(b){var c=b.node=l.byId(b.node),e=h.getComputedStyle,g=null,u=null,t=function(){return function(){var b="absolute"==c.style.position?"absolute":"relative";g="absolute"==b?c.offsetTop:parseInt(e(c).top)||0;u="absolute"==b?c.offsetLeft:parseInt(e(c).left)||0;"absolute"!=b&&"relative"!=
b&&(b=k.position(c,!0),g=b.y,u=b.x,c.style.position="absolute",c.style.top=g+"px",c.style.left=u+"px")}}();t();b=p.animateProperty(f.mixin({properties:{top:{start:g,end:b.top||0},left:{start:u,end:b.left||0}}},b));m.connect(b,"beforeBegin",b,t);return b},flash:function(b){b=f.mixin({end:"#f00",duration:500,count:1},b);b.duration/=2*b.count;var c=l.byId(b.node),e=b.start;e||(e=h.getComputedStyle(c).backgroundColor);var g=b.end,k=[],t=b.count,c={node:c,duration:b.duration};for(b=0;b<t;b++)k.push(p.animateProperty(f.mixin({properties:{backgroundColor:{start:e,
end:g}}},c))),k.push(p.animateProperty(f.mixin({properties:{backgroundColor:{start:g,end:e}}},c)));return q.chain(k)}};g("extend-esri")&&f.mixin(f.getObject("fx",!0,e),c);return c})},"dojo/fx":function(){define("dojo/fx","./_base/lang ./Evented ./_base/kernel ./_base/array ./aspect ./_base/fx ./dom ./dom-style ./dom-geometry ./ready require".split(" "),function(m,p,f,l,k,h,q,g,e,c,b){f.isAsync||c(0,function(){b(["./fx/Toggler"])});f=f.fx={};c={_fire:function(b,c){this[b]&&this[b].apply(this,c||[]);
return this}};var d=function(b){this._index=-1;this._animations=b||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;l.forEach(this._animations,function(b){b&&("undefined"!=typeof b.duration&&(this.duration+=b.duration),b.delay&&(this.duration+=b.delay))},this)};d.prototype=new p;m.extend(d,{_onAnimate:function(){this._fire("onAnimate",arguments)},_onEnd:function(){this._onAnimateCtx.remove();this._onEndCtx.remove();this._onAnimateCtx=this._onEndCtx=null;this._index+1==this._animations.length?
this._fire("onEnd"):(this._current=this._animations[++this._index],this._onAnimateCtx=k.after(this._current,"onAnimate",m.hitch(this,"_onAnimate"),!0),this._onEndCtx=k.after(this._current,"onEnd",m.hitch(this,"_onEnd"),!0),this._current.play(0,!0))},play:function(b,c){this._current||(this._current=this._animations[this._index=0]);if(!c&&"playing"==this._current.status())return this;var d=k.after(this._current,"beforeBegin",m.hitch(this,function(){this._fire("beforeBegin")}),!0),e=k.after(this._current,
"onBegin",m.hitch(this,function(b){this._fire("onBegin",arguments)}),!0),g=k.after(this._current,"onPlay",m.hitch(this,function(b){this._fire("onPlay",arguments);d.remove();e.remove();g.remove()}));this._onAnimateCtx&&this._onAnimateCtx.remove();this._onAnimateCtx=k.after(this._current,"onAnimate",m.hitch(this,"_onAnimate"),!0);this._onEndCtx&&this._onEndCtx.remove();this._onEndCtx=k.after(this._current,"onEnd",m.hitch(this,"_onEnd"),!0);this._current.play.apply(this._current,arguments);return this},
pause:function(){if(this._current){var b=k.after(this._current,"onPause",m.hitch(this,function(c){this._fire("onPause",arguments);b.remove()}),!0);this._current.pause()}return this},gotoPercent:function(b,c){this.pause();var d=this.duration*b;this._current=null;l.some(this._animations,function(b,c){if(d<=b.duration)return this._current=b,this._index=c,!0;d-=b.duration;return!1},this);this._current&&this._current.gotoPercent(d/this._current.duration);c&&this.play();return this},stop:function(b){if(this._current){if(b){for(;this._index+
1<this._animations.length;++this._index)this._animations[this._index].stop(!0);this._current=this._animations[this._index]}var c=k.after(this._current,"onStop",m.hitch(this,function(b){this._fire("onStop",arguments);c.remove()}),!0);this._current.stop()}return this},status:function(){return this._current?this._current.status():"stopped"},destroy:function(){this.stop();this._onAnimateCtx&&this._onAnimateCtx.remove();this._onEndCtx&&this._onEndCtx.remove()}});m.extend(d,c);f.chain=function(b){return new d(m.isArray(b)?
b:Array.prototype.slice.call(b,0))};var r=function(b){this._animations=b||[];this._connects=[];this.duration=this._finished=0;l.forEach(b,function(b){var c=b.duration;b.delay&&(c+=b.delay);this.duration<c&&(this.duration=c);this._connects.push(k.after(b,"onEnd",m.hitch(this,"_onEnd"),!0))},this);this._pseudoAnimation=new h.Animation({curve:[0,1],duration:this.duration});var c=this;l.forEach("beforeBegin onBegin onPlay onAnimate onPause onStop onEnd".split(" "),function(b){c._connects.push(k.after(c._pseudoAnimation,
b,function(){c._fire(b,arguments)},!0))})};m.extend(r,{_doAction:function(b,c){l.forEach(this._animations,function(d){d[b].apply(d,c)});return this},_onEnd:function(){++this._finished>this._animations.length&&this._fire("onEnd")},_call:function(b,c){var d=this._pseudoAnimation;d[b].apply(d,c)},play:function(b,c){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this},gotoPercent:function(b,
c){var d=this.duration*b;l.forEach(this._animations,function(b){b.gotoPercent(b.duration<d?1:d/b.duration,c)});this._call("gotoPercent",arguments);return this},stop:function(b){this._doAction("stop",arguments);this._call("stop",arguments);return this},status:function(){return this._pseudoAnimation.status()},destroy:function(){this.stop();l.forEach(this._connects,function(b){b.remove()})}});m.extend(r,c);f.combine=function(b){return new r(m.isArray(b)?b:Array.prototype.slice.call(b,0))};f.wipeIn=function(b){var c=
b.node=q.byId(b.node),d=c.style,e;b=h.animateProperty(m.mixin({properties:{height:{start:function(){e=d.overflow;d.overflow="hidden";if("hidden"==d.visibility||"none"==d.display)return d.height="1px",d.display="",d.visibility="",1;var b=g.get(c,"height");return Math.max(b,1)},end:function(){return c.scrollHeight}}}},b));var f=function(){d.height="auto";d.overflow=e};k.after(b,"onStop",f,!0);k.after(b,"onEnd",f,!0);return b};f.wipeOut=function(b){var c=(b.node=q.byId(b.node)).style,d;b=h.animateProperty(m.mixin({properties:{height:{end:1}}},
b));k.after(b,"beforeBegin",function(){d=c.overflow;c.overflow="hidden";c.display=""},!0);var e=function(){c.overflow=d;c.height="auto";c.display="none"};k.after(b,"onStop",e,!0);k.after(b,"onEnd",e,!0);return b};f.slideTo=function(b){var c=null,d=null,f=function(b){return function(){var f=g.getComputedStyle(b),h=f.position;c="absolute"==h?b.offsetTop:parseInt(f.top)||0;d="absolute"==h?b.offsetLeft:parseInt(f.left)||0;"absolute"!=h&&"relative"!=h&&(f=e.position(b,!0),c=f.y,d=f.x,b.style.position=
"absolute",b.style.top=c+"px",b.style.left=d+"px")}}(b.node=q.byId(b.node));f();b=h.animateProperty(m.mixin({properties:{top:b.top||0,left:b.left||0}},b));k.after(b,"beforeBegin",f,!0);return b};return f})},"esri/tileUtils":function(){define("esri/tileUtils",["dojo/_base/array","dojo/has","./kernel","./geometry/Point","./geometry/Extent"],function(m,p,f,l,k){var h={_addFrameInfo:function(f,g){var e,c,b=2*g.origin[1],d=g.origin[0],h=f.origin.x,k=f.width,u;m.forEach(f.lods,function(g){e=Math.round(b/
g.resolution);c=Math.ceil(e/k);u=Math.floor((d-h)/(k*g.resolution));g._frameInfo||(g._frameInfo=[c,u,u+c-1,e])})},getContainingTileCoords:function(f,g,e){var c=f.origin;e=e.resolution;return{row:Math.floor((c.y-g.y)/(f.height*e)),col:Math.floor((g.x-c.x)/(f.width*e))}},getCandidateTileInfo:function(f,g,e){var c;c=f.width;for(var b=f.height,d=e.xmax-e.xmin,h=e.ymax-e.ymin,q=f.__tileInfo===g,u=q?f.getMinZoom():-1,q=q?f.getMaxZoom():-1,t=-1,m=g.lods,w=Math.abs,p,z,B,q=-1<q?q:m.length-1,u=-1<u?u:0;u<=
q;u++)if(z=m[u])if(B=d>h?w(h-b*z.resolution):w(d-c*z.resolution),0>t||B<=t)p=z,t=B;else break;c=p;p=c.resolution;b=(e.xmin+e.xmax)/2;d=(e.ymin+e.ymax)/2;h=f.width/2*p;p*=f.height/2;b=new k(b-h,d-p,b+h,d+p,e.spatialReference);e=new l(b.xmin,b.ymax,e.spatialReference);q=c.resolution;h=g.width;d=g.height;g=g.origin;f=f.__visibleDelta;p=Math.floor;m=h*q;w=d*q;q=p((g.y-e.y)/w);t=p((e.x-g.x)/m);u=g.y-q*w;g=p(Math.abs((e.x-(g.x+t*m))*h/m))+f.x;f=p(Math.abs((e.y-u)*d/w))+f.y;return{tile:{point:e,coords:{row:q,
col:t},offsets:{x:g,y:f}},lod:c,extent:b}},getTileExtent:function(f,g,e,c){var b=f.origin;g=f.lods[g].resolution;var d=f.width,h=f.height;return new k(c*g*d+b.x,b.y-(e+1)*g*h,(c+1)*g*d+b.x,b.y-e*g*h,f.spatialReference)}};p("extend-esri")&&(f.TileUtils=h);return h})},"esri/geometry/Point":function(){define("esri/geometry/Point","dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ../srUtils".split(" "),function(m,p,f,l,k,h,q,g){function e(b,c){89.99999<c?c=
89.99999:-89.99999>c&&(c=-89.99999);c*=.017453292519943;return[111319.49079327169*b,3189068.5*Math.log((1+Math.sin(c))/(1-Math.sin(c)))]}function c(b,c,d){b=b/6378137*57.29577951308232;return d?[b,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*c/6378137)))]:[b-360*Math.floor((b+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*c/6378137)))]}function b(){}function d(){}function r(b){var c=b._json;b._unquantizeFn?(c=b._unquantizeFn({x:c.x,y:c.y}),b._xVal=c.x,b._yVal=
c.y,b._unquantizeFn=null):(b._xVal=c.x,b._yVal=c.y);b._json=null}h={type:"point",x:0,y:0};m=m(q,{declaredClass:"esri.geometry.Point",type:"point",x:0,y:0,constructor:function(b,c,d){p.isArray(b)?(this.x=b[0],this.y=b[1],this.spatialReference=c):k.isObject(b)?(k.mixin(this,b),null!=this.latitude&&(this.y=this.latitude),null!=this.longitude&&(this.x=this.longitude),this.spatialReference&&(this.spatialReference=g.createSpatialReference(this.spatialReference))):(this.x=b,this.y=c,this.spatialReference=
d);this.verifySR()},offset:function(b,c){return new this.constructor(this.x+b,this.y+c,this.spatialReference)},setX:function(b){this.x=b;this.clearCache();return this},setY:function(b){this.y=b;this.clearCache();return this},setLongitude:function(b){var c=this.spatialReference;c&&(c._isWebMercator()?this.setX(e(b,this.y)[0]):4326===c.wkid&&this.setX(b));return this},setLatitude:function(b){var c=this.spatialReference;c&&(c._isWebMercator()?this.setY(e(this.x,b)[1]):4326===c.wkid&&this.setY(b));return this},
getLongitude:function(){var b=this.spatialReference,d;b&&(b._isWebMercator()?d=c(this.x,this.y)[0]:4326===b.wkid&&(d=this.x));return d},getLatitude:function(){var b=this.spatialReference,d;b&&(b._isWebMercator()?d=c(this.x,this.y)[1]:4326===b.wkid&&(d=this.y));return d},update:function(b,c){this.x=b;this.y=c;this.clearCache();return this},normalize:function(){var b=this.x,c=this.spatialReference;if(c){var d=c._getInfo();d&&(b=this._normalizeX(b,d))}return new this.constructor(b,this.y,c)},_normalizeX:function(b,
c){var d=c.valid[0],e=c.valid[1];c=2*e;b>e?(d=Math.ceil(Math.abs(b-e)/c),b-=d*c):b<d&&(d=Math.ceil(Math.abs(b-d)/c),b+=d*c);return b},toJson:function(){var b={x:this.x,y:this.y},c=this.spatialReference;c&&(b.spatialReference=c.toJson());return b}});b.prototype=m.prototype;d.prototype=new b;Object.defineProperty(d.prototype,"x",{get:function(){this._json&&r(this);return this._xVal},set:function(b){this._xVal=b}});Object.defineProperty(d.prototype,"y",{get:function(){this._json&&r(this);return this._yVal},
set:function(b){this._yVal=b}});d.prototype.setupLazyUnquantization=function(b,c){this._unquantizeFn=b;this._json=c};m.simpleConstructor=b;m.accessorConstructor=d;m.lngLatToXY=e;m.xyToLngLat=c;m.defaultProps=h;m.metersPerDegree=6378137*Math.PI/180;f("extend-esri")&&(p.setObject("geometry.Point",m,l),l.geometry.defaultPoint=h);return m})},"esri/geometry/Geometry":function(){define("esri/geometry/Geometry",["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../SpatialReference"],function(m,
p,f,l,k){m=m(null,{declaredClass:"esri.geometry.Geometry",spatialReference:null,type:null,cache:void 0,setSpatialReference:function(f){this.spatialReference=f;return this},verifySR:function(){this.spatialReference||this.setSpatialReference(new k(4326))},getExtent:function(){return null},clearCache:function(){this.cache=void 0},getCacheValue:function(f){return this.cache&&this.cache[f]},setCacheValue:function(f,k){this.cache||(this.cache={});this.cache[f]=k}});f("extend-esri")&&p.setObject("geometry.Geometry",
m,l);return m})},"esri/srUtils":function(){define("esri/srUtils",["./SpatialReference","./ImageSpatialReference","./kernel","./sniff","dojo/_base/lang"],function(m,p,f,l,k){function h(g){var e=!1;g&&(g.ics||g.icsid)&&(e=!0);return e}var q={isICS:h,createSpatialReference:function(g){var e=null;g&&(e=h(g)?new p(g):new m(g));return e}};l("extend-esri")&&k.mixin(f,q);return q})},"esri/ImageSpatialReference":function(){define("esri/ImageSpatialReference","dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./lang ./SpatialReference".split(" "),
function(m,p,f,l,k,h){m=m(h,{declaredClass:"esri.ImageSpatialReference",constructor:function(f){f&&p.isObject(f)&&p.mixin(this,f)},icsid:null,icsns:null,ics:null,_isWebMercator:function(){return!1},_isWrappable:function(){return!1},equals:function(f){var g=!1;if(f)if(this.icsid&&f.icsid){if(g=this.icsid===f.icsid,this.icsns||f.icsns)g=g&&this.icsns===f.icsns}else this.ics&&f.ics&&(g=this.ics===f.ics);return g},toJson:function(f){var g=null,e=k.isDefined;f=e(f)?f:!0;e(this.icsid)?(g={icsid:this.icsid},
e(this.icsns)&&(g.icsns=this.icsns)):e(this.ics)&&(g={ics:this.ics});e(this.url)&&e(g)&&f&&(g.url=this.url);return g}});f("extend-esri")&&(l.ImageSpatialReference=m);return m})},"esri/geometry/Extent":function(){define("esri/geometry/Extent","dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./webMercatorUtils ./mathUtils ../srUtils".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d){function r(){}var v={type:"extent",xmin:0,ymin:0,xmax:0,
ymax:0},u=m(g,{declaredClass:"esri.geometry.Extent",type:"extent",xmin:0,ymin:0,xmax:0,ymax:0,constructor:function(b,c,e,g,f){h.isObject(b)?(h.mixin(this,b),this.spatialReference&&(this.spatialReference=d.createSpatialReference(this.spatialReference))):this.update(b,c,e,g,f);this.verifySR()},getWidth:function(){return Math.abs(this.xmax-this.xmin)},getHeight:function(){return Math.abs(this.ymax-this.ymin)},getCenter:function(){return new e((this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2,this.spatialReference)},
getTopLeft:function(){return new e(this.xmin,this.ymax,this.spatialReference)},getTopRight:function(){return new e(this.xmax,this.ymax,this.spatialReference)},getBottomLeft:function(){return new e(this.xmin,this.ymin,this.spatialReference)},getBottomRight:function(){return new e(this.xmax,this.ymin,this.spatialReference)},centerAt:function(b){var c=this.getCenter(),d=b.x-c.x;b=b.y-c.y;return new u(this.xmin+d,this.ymin+b,this.xmax+d,this.ymax+b,this.spatialReference)},update:function(b,c,d,e,g){this.xmin=
b;this.ymin=c;this.xmax=d;this.ymax=e;this.spatialReference=g;this.clearCache();return this},offset:function(b,c){return new u(this.xmin+b,this.ymin+c,this.xmax+b,this.ymax+c,this.spatialReference)},expand:function(b){var c=(1-b)/2;b=this.getWidth()*c;c*=this.getHeight();return new u(this.xmin+b,this.ymin+c,this.xmax-b,this.ymax-c,this.spatialReference)},intersects:function(b){if(!b)return!1;var d=b.type,e=this.spatialReference,g=b.spatialReference;e&&g&&!e.equals(g)&&e._canProject(g)&&(b=e.isWebMercator()?
c.geographicToWebMercator(b):c.webMercatorToGeographic(b,!0));switch(d){case "point":return this.contains(b);case "multipoint":return this._intersectsMultipoint(b);case "extent":return this._intersectsExtent(b);case "polygon":return this._intersectsPolygon(b);case "polyline":return this._intersectsPolyline(b)}},normalize:function(){var b=this._normalize(!1,!0);f.isArray(b)||(b=[b]);return b},shiftCentralMeridian:function(){return this._normalize(!0)},bisect:function(){var b=this.spatialReference,
c=b&&b._getInfo(),d=[],e=0;if(c&&this._isOutOfBounds(c)){var g=this,e=g.xmin,f=g.ymin,h=g.ymax,r=c.valid[0],k=c.valid[1];g.getWidth()>2*k&&(g=g.getCenter(),g=new u(g.x-k,f,g.x+k,h,new q(b.toJson())));var e=g.xmin-e,l=this._normalizeX(g.xmin,c),c=this._normalizeX(g.xmax,c);l.frameId===c.frameId?d.push(new u(l.x,f,c.x,h,new q(b.toJson()))):d.push(new u(l.x,f,k,h,new q(b.toJson())),new u(r,f,c.x,h,new q(b.toJson())))}else d.push(this.getExtent());return{extents:d,marginLeft:e}},_intersectsMultipoint:function(b){var c=
b.points.length,d;for(d=0;d<c;d++)if(this.contains(b.getPoint(d)))return!0;return!1},_intersectsExtent:function(b){var c,d,e,g,f=!1;this.xmin<=b.xmin?(c=b.xmin,this.xmax<c?f=!0:e=Math.min(this.xmax,b.xmax)-c):(c=this.xmin,b.xmax<c?f=!0:e=Math.min(this.xmax,b.xmax)-c);this.ymin<=b.ymin?(d=b.ymin,this.ymax<d?f=!0:g=Math.min(this.ymax,b.ymax)-d):(d=this.ymin,b.ymax<d?f=!0:g=Math.min(this.ymax,b.ymax)-d);return f?null:new u(c,d,c+e,d+g,this.spatialReference)},_intersectsPolygon:function(b){var c=[this.xmin,
this.ymax],d=[this.xmax,this.ymax],g=[this.xmin,this.ymin],f=[this.xmax,this.ymin],h=[c,d,g,f],c=[[g,c],[c,d],[d,f],[f,g]],g=b.rings,f=g.length,r,k=new e(0,0,this.spatialReference);r=h.length;for(d=0;d<r;d++)if(k.update(h[d][0],h[d][1]),b.contains(k))return!0;k.setSpatialReference(b.spatialReference);for(var t,u,d=0;d<f;d++)if(h=g[d],r=h.length){t=h[0];k.update(t[0],t[1]);if(this.contains(k))return!0;for(b=1;b<r;b++){u=h[b];k.update(u[0],u[1]);if(this.contains(k)||this._intersectsLine([t,u],c))return!0;
t=u}}return!1},_intersectsPolyline:function(b){var c=[[[this.xmin,this.ymin],[this.xmin,this.ymax]],[[this.xmin,this.ymax],[this.xmax,this.ymax]],[[this.xmax,this.ymax],[this.xmax,this.ymin]],[[this.xmax,this.ymin],[this.xmin,this.ymin]]],d,g=b.paths,f=g.length,h,r,k,t,u=new e(0,0,b.spatialReference);for(b=0;b<f;b++)if(h=g[b],r=h.length){k=h[0];u.update(k[0],k[1]);if(this.contains(u))return!0;for(d=1;d<r;d++){t=h[d];u.update(t[0],t[1]);if(this.contains(u)||this._intersectsLine([k,t],c))return!0;k=
t}}return!1},_intersectsLine:function(c,d){var e=b._getLineIntersection2,g,f=d.length;for(g=0;g<f;g++)if(e(c,d[g]))return!0;return!1},contains:function(b){if(!b)return!1;var c=b.type;if("point"===c){var d=this.spatialReference,g=b.spatialReference,c=b.x;b=b.y;d&&g&&!d.equals(g)&&d._canProject(g)&&(b=d.isWebMercator()?e.lngLatToXY(c,b):e.xyToLngLat(c,b,!0),c=b[0],b=b[1]);return c>=this.xmin&&c<=this.xmax&&b>=this.ymin&&b<=this.ymax}return"extent"===c?this._containsExtent(b):!1},_containsExtent:function(b){var c=
b.xmin,d=b.ymin,g=b.xmax,f=b.ymax,h=b.spatialReference;b=new e(c,d,h);c=new e(c,f,h);f=new e(g,f,h);d=new e(g,d,h);return this.contains(b)&&this.contains(c)&&this.contains(f)&&this.contains(d)?!0:!1},union:function(b){return new u(Math.min(this.xmin,b.xmin),Math.min(this.ymin,b.ymin),Math.max(this.xmax,b.xmax),Math.max(this.ymax,b.ymax),this.spatialReference)},getExtent:function(){var b=this.spatialReference;return new u(this.xmin,this.ymin,this.xmax,this.ymax,b&&new q(b.toJson()))},_shiftCM:function(b){var d=
this.getCacheValue("_shifted");if(!d){var d=new u(this.toJson()),e=d.spatialReference;if(b=b||e._getInfo()){var g=this._getCM(b);if(g){var f=e._isWebMercator()?c.webMercatorToGeographic(g):g;d.xmin-=g.x;d.xmax-=g.x;e._isWebMercator()||(f.x=this._normalizeX(f.x,b).x);d.setSpatialReference(new q(h.substitute({Central_Meridian:f.x},4326===e.wkid?b.altTemplate:b.wkTemplate)))}}this.setCacheValue("_shifted",d)}return d},_getCM:function(b){var c;this._isOutOfBounds(b)&&(c=this.getCenter());return c},_isOutOfBounds:function(b){var c=
b.valid[0];b=b.valid[1];var d=this.xmin,e=this.xmax;return!(d>=c&&d<=b&&e>=c&&e<=b)},_normalize:function(b,c,d){var e=new u(this.toJson()),g=e.spatialReference;if(g&&(d=d||g._getInfo())){var f=p.map(this._getParts(d),function(b){return b.extent});return 2<f.length?b?this._shiftCM(d):e.update(d.valid[0],e.ymin,d.valid[1],e.ymax,g):2===f.length?b?this._shiftCM(d):c?f:{rings:p.map(f,function(b){return[[b.xmin,b.ymin],[b.xmin,b.ymax],[b.xmax,b.ymax],[b.xmax,b.ymin],[b.xmin,b.ymin]]}),spatialReference:g}:
f[0]||e}return e},_getParts:function(b){var c=this.getCacheValue("_parts");if(!c){var c=[],d=this.xmin,e=this.xmax,g=this.ymin,f=this.ymax,h=this.spatialReference,r=this.getWidth(),k=d,t=e,q=0,l=0,v,m;b=b||h._getInfo();v=b.valid[0];m=b.valid[1];l=this._normalizeX(d,b);d=l.x;q=l.frameId;l=this._normalizeX(e,b);e=l.x;l=l.frameId;b=d===e&&0<r;if(r>2*m){r=new u(k<t?d:e,g,m,f,h);d=new u(v,g,k<t?e:d,f,h);m=new u(0,g,m,f,h);g=new u(v,g,0,f,h);h=[];v=[];r.contains(m)&&h.push(q);r.contains(g)&&v.push(q);d.contains(m)&&
h.push(l);d.contains(g)&&v.push(l);for(f=q+1;f<l;f++)h.push(f),v.push(f);c.push({extent:r,frameIds:[q]},{extent:d,frameIds:[l]},{extent:m,frameIds:h},{extent:g,frameIds:v})}else d>e||b?c.push({extent:new u(d,g,m,f,h),frameIds:[q]},{extent:new u(v,g,e,f,h),frameIds:[l]}):c.push({extent:new u(d,g,e,f,h),frameIds:[q]});this.setCacheValue("_parts",c)}return c},_normalizeX:function(b,c){var d=0,e=c.valid[0],g=c.valid[1];c=2*g;b>g?(d=Math.ceil(Math.abs(b-g)/c),b-=d*c):b<e&&(d=Math.ceil(Math.abs(b-e)/c),
b+=d*c,d=-d);return{x:b,frameId:d}},toJson:function(){var b={xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax},c=this.spatialReference;c&&(b.spatialReference=c.toJson());return b}});r.prototype=u.prototype;u.simpleConstructor=r;u.defaultProps=v;l("extend-esri")&&(f.setObject("geometry.Extent",u,k),k.geometry.defaultExtent=v);return u})},"esri/geometry/webMercatorUtils":function(){define("esri/geometry/webMercatorUtils","dojo/_base/array dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Point".split(" "),
function(m,p,f,l,k,h){function q(c,b,d,e){if("point"===c.type){var g=b(c.x,c.y,e);return new c.constructor(g[0],g[1],new k(d))}if("extent"===c.type){var g=b(c.xmin,c.ymin,e),f=b(c.xmax,c.ymax,e);return new c.constructor(g[0],g[1],f[0],f[1],new k(d))}if("polyline"===c.type||"polygon"===c.type){var g="polyline"===c.type,h=[],r;m.forEach(g?c.paths:c.rings,function(c){h.push(r=[]);m.forEach(c,function(c){r.push(b(c[0],c[1],e))})});return g?new c.constructor({paths:h,spatialReference:new k(d)}):new c.constructor({rings:h,
spatialReference:new k(d)})}if("multipoint"===c.type){var q=[];m.forEach(c.points,function(c){q.push(b(c[0],c[1],e))});return new c.constructor({points:q,spatialReference:new k(d)})}}function g(c,b){c=c&&(null!=c.wkid?c:c.spatialReference);b=b&&(null!=b.wkid?b:b.spatialReference);return c&&b?b.equals(c)?!0:b._canProject(c):!1}var e={canProject:g,project:function(c,b){var d=c&&c.spatialReference;b=b&&(null!=b.wkid?b:b.spatialReference);d&&b?d.equals(b)?c=new c.constructor(c.toJson()):g(d,b)?b.isWebMercator()?
c=q(c,h.lngLatToXY,{wkid:102100}):4326===b.wkid&&(c=q(c,h.xyToLngLat,{wkid:4326})):c=null:c=null;return c},lngLatToXY:h.lngLatToXY,xyToLngLat:h.xyToLngLat,metersPerDegree:h.metersPerDegree,geographicToWebMercator:function(c){return q(c,h.lngLatToXY,{wkid:102100})},webMercatorToGeographic:function(c,b){return q(c,h.xyToLngLat,{wkid:4326},b)}};f("extend-esri")&&p.mixin(p.getObject("geometry",!0,l),e);return e})},"esri/geometry/mathUtils":function(){define("esri/geometry/mathUtils",["dojo/_base/lang",
"dojo/has","../kernel","./Point"],function(m,p,f,l){function k(e,c,b){return e instanceof l?new l(e.x+b*(c.x-e.x),e.y+b*(c.y-e.y)):[e[0]+b*(c[0]-e[0]),e[1]+b*(c[1]-e[1])]}function h(e,c){return 1E-8>Math.abs(e-c)}function q(e,c,b,d){var g,f=h(e[0],c[0])?1E10:(e[1]-c[1])/(e[0]-c[0]),k=h(b[0],d[0])?1E10:(b[1]-d[1])/(b[0]-d[0]),t=e[1]-f*e[0],q=b[1]-k*b[0];if(h(f,k)){if(h(t,q)){if(h(e[0],c[0]))if(Math.min(e[1],c[1])<Math.max(b[1],d[1])||Math.max(e[1],c[1])>Math.min(b[1],d[1]))e=(e[1]+c[1]+b[1]+d[1]-Math.min(e[1],
c[1],b[1],d[1])-Math.max(e[1],c[1],b[1],d[1]))/2,g=(e-t)/f;else return null;else if(Math.min(e[0],c[0])<Math.max(b[0],d[0])||Math.max(e[0],c[0])>Math.min(b[0],d[0]))g=(e[0]+c[0]+b[0]+d[0]-Math.min(e[0],c[0],b[0],d[0])-Math.max(e[0],c[0],b[0],d[0]))/2,e=f*g+t;else return null;return[g,e]}return null}h(f,1E10)?(g=e[0],e=k*g+q):h(k,1E10)?(g=b[0],e=f*g+t):(g=-(t-q)/(f-k),e=e[1]===c[1]?e[1]:b[1]===d[1]?b[1]:f*g+t);return[g,e]}var g={getLength:function(e,c){var b=c.x-e.x;e=c.y-e.y;return Math.sqrt(b*b+
e*e)},_getLength:function(e,c){var b=c[0]-e[0];e=c[1]-e[1];return Math.sqrt(b*b+e*e)},getPointOnLine:k,getMidpoint:function(e,c){return k(e,c,.5)},_equals:h,_getLineIntersection:q,getLineIntersection:function(e,c,b,d,g){(e=q([e.x,e.y],[c.x,c.y],[b.x,b.y],[d.x,d.y]))&&(e=new l(e[0],e[1],g));return e},_getLineIntersection2:function(e,c){var b=e[0],d=e[1],g=c[0],f=c[1];c=b[0];b=b[1];e=d[0];var d=d[1],h=g[0],k=g[1],g=f[0]-h,h=c-h,q=e-c,f=f[1]-k,k=b-k,l=d-b,m=f*q-g*l;if(0===m)return!1;g=(g*k-f*h)/m;h=
(q*k-l*h)/m;return 0<=g&&1>=g&&0<=h&&1>=h?[c+g*(e-c),b+g*(d-b)]:!1},_pointLineDistance:function(e,c){var b=c[0],d=c[1];c=b[0];var g=b[1],b=e[0];e=e[1];var f=d[0]-c,h=d[1]-g,k=b-c,q=e-g,d=Math.sqrt,l=Math.pow,m=d(l(f,2)+l(h,2)),k=(k*f+q*h)/(m*m),g=g+k*h;return d(l(b-(c+k*f),2)+l(e-g,2))}};p("extend-esri")&&m.mixin(m.getObject("geometry",!0,f),g);return g})},"esri/PluginTarget":function(){define("esri/PluginTarget","require dojo/aspect dojo/_base/array dojo/_base/lang dojo/Deferred dojo/when".split(" "),
function(m,p,f,l,k,h){function q(){p.after(this.constructor._meta,"ctor",this._pluginsHandler,!0);this._plugins={}}q.prototype={addPlugin:function(g,e){var c=this,b=this._plugins,d=new k;try{m([g],function(f){g in b?d.resolve({id:b[g].declaredId||g.replace(/\//g,".")}):(b[g]=f,h(f.add(c,e),function(){var b={id:f.declaredId||g.replace(/\//g,".")};c.emit("plugin-add",b);d.resolve(b)},function(b){d.reject(b)}))})}catch(r){d.reject(r)}return d.promise},removePlugin:function(g){if(g in this._plugins){var e=
this._plugins[g];e.remove(this);delete this._plugins[g];this.emit("plugin-remove",{id:e.declaredId||g.replace(/\//g,".")})}},_pluginsHandler:function(){var g=this;f.some(arguments,function(e){if(e&&e.plugins&&e.plugins instanceof Array){e=e.plugins;var c,b,d;for(d=0;d<e.length;d++)c=e[d],b=c instanceof Object?c.id:c,g.addPlugin(b,c.options);return!0}})}};return q})},"esri/promiseList":function(){define("esri/promiseList",["dojo/_base/array","dojo/Deferred","dojo/when"],function(m,p,f){var l=m.forEach;
return function(k){function h(b,c){e[c]=b;d.progress([b,c]);0===--r&&d.resolve(e)}var q,g;k instanceof Array?g=k:k&&"object"===typeof k&&(q=k);var e,c=[];if(q){g=[];for(var b in q)Object.hasOwnProperty.call(q,b)&&(c.push(b),g.push(q[b]));e={}}else g&&(e=[]);if(!g||!g.length)return(new p).resolve(e);var d=new p;d.promise.always(function(){e=c=null});var r=g.length;l(g,function(b,e){q||c.push(e);f(b,function(b){d.isFulfilled()||h(b,c[e])},function(b){d.isFulfilled()||h(b,c[e])})});return d.promise}})},
"esri/arcade/Dictionary":function(){define("esri/arcade/Dictionary",["require","exports","./ImmutableArray","./languageUtils","../geometry/Geometry"],function(m,p,f,l,k){function h(g){var e=null;if(null!==g)if(l.isNumber(g))e=l.toNumber(g);else if(l.isBoolean(g))e=l.toBoolean(g);else if(l.isString(g))e=l.toString(g);else if(l.isDate(g))e=l.toDate(g);else if(l.isArray(g))for(var e=[],c=0;c<g.length;c++)e.push(h(g[c]));else{if(0===Object.keys(g).length)return null;e=new q;e.immutable=!1;for(var c=0,
b=Object.keys(g);c<b.length;c++){var d=b[c];e.setField(d,h(g[d]))}e.immutable=!0}return e}var q=function(){function g(e){this.declaredClass="esri.arcade.Dictionary";this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=e instanceof g?e.attributes:void 0===e?{}:null===e?{}:e}g.prototype.field=function(e){var c=e.toLowerCase();e=this.attributes[e];if(void 0!==e)return e;for(var b in this.attributes)if(b.toLowerCase()===c)return this.attributes[b];throw Error("Field not Found");};g.prototype.setField=
function(e,c){if(this.immutable)throw Error("Dictionary is Immutable");var b=e.toLowerCase();if(void 0===this.attributes[e])for(var d in this.attributes)if(d.toLowerCase()===b){this.attributes[d]=c;return}this.attributes[e]=c};g.prototype.hasField=function(e){var c=e.toLowerCase();if(void 0!==this.attributes[e])return!0;for(var b in this.attributes)if(b.toLowerCase()===c)return!0;return!1};g.prototype.keys=function(){var e=[],c;for(c in this.attributes)e.push(c);return e=e.sort()};g.prototype.castToText=
function(){var e="",c;for(c in this.attributes){""!==e&&(e+=",");var b=this.attributes[c];null==b?e+=JSON.stringify(c)+":null":l.isBoolean(b)||l.isNumber(b)||l.isString(b)?e+=JSON.stringify(c)+":"+JSON.stringify(b):b instanceof k?e+=JSON.stringify(c)+":"+l.toStringExplicit(b):b instanceof f?e+=JSON.stringify(c)+":"+l.toStringExplicit(b):b instanceof Array?e+=JSON.stringify(c)+":"+l.toStringExplicit(b):b instanceof Date?e+=JSON.stringify(c)+":"+JSON.stringify(b):null!==b&&"object"===typeof b&&void 0!==
b.castToText&&(e+=JSON.stringify(c)+":"+b.castToText())}return"{"+e+"}"};g.convertObjectToArcadeDictionary=function(e){var c=new g;c.immutable=!1;for(var b in e)c.setField(b.toString(),h(e[b]));c.immutable=!0;return c};return g}();return q})},"esri/arcade/ImmutableArray":function(){define("esri/arcade/ImmutableArray",["require","exports"],function(m,p){return function(){function f(f){void 0===f&&(f=[]);this._elements=f}f.prototype.length=function(){return this._elements.length};f.prototype.get=function(f){return this._elements[f]};
f.prototype.toArray=function(){for(var f=[],k=0;k<this.length();k++)f.push(this.get(k));return f};return f}()})},"esri/arcade/languageUtils":function(){define("esri/arcade/languageUtils","require exports ./FunctionWrapper ./ImmutableArray ./ImmutablePathArray ./ImmutablePointArray ./polyfill/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline dojo/number".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d,r,v){function u(b,
c,d){return""===c||null===c||void 0===c||c===d||c===d?b:b=b.split(c).join(d)}function t(b){return b instanceof U||b instanceof f||b instanceof R}function x(b){return w(b)||z(b)||C(b)||y(b)||null===b||b===p.voidOperation||"number"===typeof b?!0:!1}function w(b){return"string"===typeof b||b instanceof String}function y(b){return"boolean"===typeof b}function z(b){return"number"===typeof b}function B(b){return b instanceof Array}function A(b){return b instanceof l}function C(b){return b instanceof Date}
function F(b,c){if(!1===isNaN(b)){if(void 0===c||null===c||""===c)return b.toString();c=u(c,"\u2030","");c=u(c,"\u00a4","");return v.format(b,{pattern:c})}return b.toString()}function E(b,c){b=p.MomentLibrary.Moment(b);return void 0===c||null===c||""===c?b.format():b.format(H(c))}function H(b){return b.replace(/(LTS)|L|l/g,function(b){return"["+b+"]"})}function D(b,c,d){switch(d){case "\x3e":return b>c;case "\x3c":return b<c;case "\x3e\x3d":return b>=c;case "\x3c\x3d":return b<=c}return!1}function G(c,
d){if(c===d||null===c&&d===p.voidOperation||null===d&&c===p.voidOperation)return!0;if(C(c)&&C(d))return c.getTime()===d.getTime();if(c instanceof k||c instanceof h)return c.equalityTest(d);if(c instanceof b&&d instanceof b){var e=void 0,g=void 0,e=c.getCacheValue("_arcadeCacheId"),g=d.getCacheValue("_arcadeCacheId");if(void 0!==e&&null!==e)return e===g}return void 0!==c&&void 0!==d&&null!==c&&null!==d&&"object"===typeof c&&"object"===typeof d&&(c._arcadeCacheId===d._arcadeCacheId&&void 0!==c._arcadeCacheId&&
null!==c._arcadeCacheId||c._underlyingGraphic===d._underlyingGraphic&&void 0!==c._underlyingGraphic&&null!==c._underlyingGraphic)?!0:!1}function I(b,c){if(w(b))return b;if(null===b)return"";if(z(b))return F(b,c);if(y(b))return b.toString();if(C(b))return E(b,c);if(b instanceof e)return JSON.stringify(b.toJson());if(B(b)){c=[];for(var d=0;d<b.length;d++)c[d]=Q(b[d]);return"["+c.join(",")+"]"}if(b instanceof l){c=[];for(d=0;d<b.length();d++)c[d]=Q(b.get(d));return"["+c.join(",")+"]"}return null!==b&&
"object"===typeof b&&void 0!==b.castToText?b.castToText():t(b)?"object, Function":""}function P(b,c){if(w(b))return b;if(null===b)return"";if(z(b))return F(b,c);if(y(b))return b.toString();if(C(b))return E(b,c);if(b instanceof e)return b instanceof g?'{"xmin":'+b.xmin.toString()+',"ymin":'+b.ymin.toString()+","+(b.hasZ?'"zmin":'+b.zmin.toString()+",":"")+(b.hasM?'"mmin":'+b.mmin.toString()+",":"")+'"xmax":'+b.xmax.toString()+',"ymax":'+b.ymax.toString()+","+(b.hasZ?'"zmax":'+b.zmax.toString()+",":
"")+(b.hasM?'"mmax":'+b.mmax.toString()+",":"")+'"spatialReference":'+M(b.spatialReference)+"}":M(b.toJson(),function(b,c){return b.key===c.key?0:"spatialReference"===b.key?1:"spatialReference"===c.key||b.key<c.key?-1:b.key>c.key?1:0});if(B(b)){c=[];for(var d=0;d<b.length;d++)c[d]=Q(b[d]);return"["+c.join(",")+"]"}if(b instanceof l){c=[];for(d=0;d<b.length();d++)c[d]=Q(b.get(d));return"["+c.join(",")+"]"}return null!==b&&"object"===typeof b&&void 0!==b.castToText?b.castToText():t(b)?"object, Function":
""}function Q(b){return null===b?"null":y(b)||z(b)||w(b)?JSON.stringify(b):b instanceof e||b instanceof l||b instanceof Array?P(b):b instanceof Date?JSON.stringify(E(b,"")):null!==b&&"object"===typeof b&&void 0!==b.castToText?b.castToText():"null"}function O(b,c){return z(b)?b:null===b||""===b?0:C(b)?NaN:y(b)?b?1:0:B(b)||""===b||void 0===b?NaN:void 0!==c&&w(b)?(c=u(c,"\u2030",""),c=u(c,"\u00a4",""),v.parse(b,{pattern:c})):b===p.voidOperation?0:Number(b)}function N(b,c){var d;c.fields.some(function(c){c.name===
b&&(d=c.domain);return!!d});return d}function M(b,c){c||(c={});"function"===typeof c&&(c={cmp:c});var d="boolean"===typeof c.cycles?c.cycles:!1,e=c.cmp&&function(b){return function(c){return function(d,e){return b({key:d,value:c[d]},{key:e,value:c[e]})}}}(c.cmp),g=[];return function ia(b){b&&b.toJson&&"function"===typeof b.toJson&&(b=b.toJson());if(void 0!==b){if("number"===typeof b)return isFinite(b)?""+b:"null";if("object"!==typeof b)return JSON.stringify(b);var c,f;if(Array.isArray(b)){f="[";for(c=
0;c<b.length;c++)c&&(f+=","),f+=ia(b[c])||"null";return f+"]"}if(null===b)return"null";if(-1!==g.indexOf(b)){if(d)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var h=g.push(b)-1,k=Object.keys(b).sort(e&&e(b));f="";for(c=0;c<k.length;c++){var r=k[c],t=ia(b[r]);t&&(f&&(f+=","),f+=JSON.stringify(r)+":"+t)}g.splice(h,1);return"{"+f+"}"}}(b)}function J(c,d){if(d instanceof b)c.push([d.x,d.y]);else throw Error("Invalid Argument");}Object.defineProperty(p,
"__esModule",{value:!0});m=function(){return function(b){this.value=b}}();p.ReturnResultE=m;var K=function(){return function(b){this.value=b}}();p.ImplicitResultE=K;var U=function(){return function(b){this.fn=b}}();p.NativeFunctionE=U;var R=function(){return function(b){this.fn=b}}();p.SizzleFunctionE=R;p.NativeFunction=U;p.ImplicitResult=K;p.ReturnResult=m;p.SizzleFunction=R;p.voidOperation={type:"VOID"};p.breakResult={type:"BREAK"};p.continueResult={type:"CONTINUE"};p.multiReplace=u;p.isFunctionParameter=
t;p.isSimpleType=x;p.defaultUndefined=function(b,c){return void 0===b?c:b};p.isString=w;p.isBoolean=y;p.isNumber=z;p.isArray=B;p.isFeatureSet=function(b){return!0===(b&&b.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===b.declaredRootClass)};p.isFeatureSetCollection=function(b){return!0===(b&&b.declaredRootClass&&"esri.arcade.featureSetCollection"===b.declaredRootClass)};p.isImmutableArray=A;p.isDate=C;p.pcCheck=function(b,c,d){if(b.length<c||b.length>d)throw Error("Function called with wrong number of Parameters");
};p.generateUUID=function(){var b=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var d=(b+16*Math.random())%16|0;b=Math.floor(b/16);return("x"===c?d:d&3|8).toString(16)})};p.formatNumber=F;p.formatDate=E;p.standardiseDateFormat=H;p.greaterThanLessThan=function(b,c,d){if(null===b){if(null===c||c===p.voidOperation)return D(null,null,d);if(z(c))return D(0,c,d);if(w(c)||y(c))return D(0,O(c),d);if(C(c))return D(0,c.getTime(),d)}if(b===p.voidOperation){if(null===
c||c===p.voidOperation)return D(null,null,d);if(z(c))return D(0,c,d);if(w(c)||y(c))return D(0,O(c),d);if(C(c))return D(0,c.getTime(),d)}else if(z(b)){if(z(c))return D(b,c,d);if(y(c))return D(b,O(c),d);if(null===c||c===p.voidOperation)return D(b,0,d);if(w(c))return D(b,O(c),d);if(C(c))return D(b,c.getTime(),d)}else if(w(b)){if(w(c))return D(I(b),I(c),d);if(C(c))return D(O(b),c.getTime(),d);if(z(c))return D(O(b),c,d);if(null===c||c===p.voidOperation)return D(O(b),0,d);if(y(c))return D(O(b),O(c),d)}else if(C(b)){if(C(c))return D(b,
c,d);if(null===c||c===p.voidOperation)return D(b.getTime(),0,d);if(z(c))return D(b.getTime(),c,d);if(y(c)||w(c))return D(b.getTime(),O(c),d)}else if(y(b)){if(y(c))return D(b,c,d);if(z(c))return D(O(b),O(c),d);if(C(c))return D(O(b),c.getTime(),d);if(null===c||c===p.voidOperation)return D(O(b),0,d);if(w(c))return D(O(b),O(c),d)}return!G(b,c)||"\x3c\x3d"!==d&&"\x3e\x3d"!==d?!1:!0};p.equalityTest=G;p.toString=I;p.toNumberArray=function(b){var c=[];if(!1===B(b))return null;if(b instanceof l){for(var d=
0;d<b.length();d++)c[d]=O(b.get(d));return c}for(d=0;d<b.length;d++)c[d]=O(b[d]);return c};p.toStringExplicit=P;p.toNumber=O;p.toDate=function(b,c){return C(b)?b:w(b)&&(b=p.MomentLibrary.Moment(b,[void 0===c||null===c||""===c?p.MomentLibrary.Moment.ISO_8601:c]),b.isValid())?b.toDate():null};p.toDateM=function(b,c){return C(b)?p.MomentLibrary.Moment(b):w(b)&&(b=p.MomentLibrary.Moment(b,[void 0===c||null===c||""===c?p.MomentLibrary.Moment.ISO_8601:c]),b.isValid())?b:null};p.toBoolean=function(b){return y(b)?
b:w(b)?(b=b.toLowerCase(),"true"===b?!0:!1):z(b)?0===b||isNaN(b)?!1:!0:!1};p.fixSpatialReference=function(b,c){if(null===b||void 0===b)return null;if(null===b.spatialReference||void 0===b.spatialReference)b.spatialReference=c;return b};p.fixNullGeometry=function(e){return null===e?null:e instanceof b?"NaN"===e.x||null===e.x||isNaN(e.x)?null:e:e instanceof d?0===e.rings.length?null:e:e instanceof r?0===e.paths.length?null:e:e instanceof c?0===e.points.length?null:e:e instanceof g?"NaN"===e.xmin||null===
e.xmin||isNaN(e.xmin)?null:e:null};p.getDomainValue=function(b,c){if(!b||!b.domain)return c;var d=null;if("string"===b.field.type||"esriFieldTypeString"===b.field.type)c=I(c);else{if(null===c||void 0===c)return null;if(""===c)return c;c=O(c)}for(var e=0;e<b.domain.codedValues.length;e++){var g=b.domain.codedValues[e];g.code===c&&(d=g)}return null===d?c:d.name};p.getDomainCode=function(b,c){if(!b||!b.domain)return c;var d=null;c=I(c);for(var e=0;e<b.domain.codedValues.length;e++){var g=b.domain.codedValues[e];
g.name===c&&(d=g)}return null===d?c:d.code};p.getDomain=function(b,c,d,e){void 0===d&&(d=null);if(!c||!c.fields)return null;for(var g=null,f=0;f<c.fields.length;f++){var h=c.fields[f];h.name.toLowerCase()===b.toString().toLowerCase()&&(g=h)}if(null===g)throw Error("Field not found");var k,r;e||(e=d&&c.typeIdField&&d._field(c.typeIdField));null!=e&&c.types.some(function(b){return b.id===e?((k=b.domains&&b.domains[g.name])&&"inherited"===k.type&&(k=N(g.name,c),r=!0),!0):!1});r||k||(k=N(b,c));return{field:g,
domain:k}};p.stableStringify=M;p.autoCastFeatureToGeometry=function(b){if(null===b)return null;for(var c=[],d=0;d<b.length;d++){var e=b[d];e&&e.declaredClass&&"esri.arcade.Feature"===e.declaredClass?c.push(e.geometry()):c.push(e)}return c};p.autoCastArrayOfPointsToPolygon=function(b,c){if(B(b)||A(b)){var e=!1,g=!1,f=[];if(B(b)){for(var k=0;k<b.length;k++){var r=b[k];J(f,r)}0<f.length&&(c=b[0].spatialReference,e=b[0].hasZ,g=b[0].hasM)}else if(b instanceof h)f=b._elements,0<f.length&&(e=b._hasZ,g=b._hasM,
c=b.get(0).spatialReference);else if(A(b)){for(var k=0,t=b.toArray();k<t.length;k++)r=t[k],J(f,r);0<f.length&&(c=b.get(0).spatialReference,e=!0===b.get(0).hasZ,g=!0===b.get(0).hasM)}else throw Error("Invalid Argument");if(0===f.length)return null;!1===(new d({rings:[],spatialReference:{wkid:4326}})).isClockwise(f)&&(f=f.slice(0).reverse());return new d({rings:[f],spatialReference:c,hasZ:e,hasM:g})}return b};p.autoCastArrayOfPointsToPolyline=function(b,c){if(B(b)||A(b)){var d=!1,e=!1,g=[];if(B(b)){for(var f=
0;f<b.length;f++){var k=b[f];J(g,k)}0<g.length&&(c=b[0].spatialReference,d=!0===b[0].hasZ,e=!0===b[0].hasM)}else if(b instanceof h)g=b._elements,0<g.length&&(d=b._hasZ,e=b._hasM,c=b.get(0).spatialReference);else if(A(b)){for(var f=0,t=b.toArray();f<t.length;f++)k=t[f],J(g,k);0<g.length&&(c=b.get(0).spatialReference,d=!0===b.get(0).hasZ,e=!0===b.get(0).hasM)}return 0===g.length?null:new r({paths:[g],spatialReference:c,hasZ:d,hasM:e})}return b};p.autoCastArrayOfPointsToMultiPoint=function(b,d){if(B(b)||
A(b)){var e=!1,g=!1,f=[];if(B(b)){for(var k=0;k<b.length;k++){var r=b[k];J(f,r)}0<f.length&&(d=b[0].spatialReference,e=!0===b[0].hasZ,g=!0===b[0].hasM)}else if(b instanceof h)f=b._elements,0<f.length&&(e=b._hasZ,g=b._hasM,d=b.get(0).spatialReference);else if(A(b)){for(var k=0,t=b.toArray();k<t.length;k++)r=t[k],J(f,r);0<f.length&&(d=b.get(0).spatialReference,e=!0===b.get(0).hasZ,g=!0===b.get(0).hasM)}return 0===f.length?null:new c({points:f,spatialReference:d,hasZ:e,hasM:g})}return b};p.toStringArray=
function(b,c){void 0===c&&(c=!1);var d=[];if(null===b)return d;if(!0===B(b)){for(var e=0;e<b.length;e++){var g=I(b[e]);""===g&&!0!==c||d.push(g)}return d}if(b instanceof l){for(e=0;e<b.length();e++)g=I(b.get(e)),""===g&&!0!==c||d.push(g);return d}return x(b)?(g=I(b),""===g&&!0!==c||d.push(g),d):[]};var Y=0;p.tick=function(b){Y++;return 0===Y%100?(Y=0,q.create(function(c){setTimeout(function(){c(b)},0)})):b};p.MomentLibrary={Moment:null};p.binaryOperator=function(b,c,d){switch(d){case "\x26":return b&
c;case "|":return b|c;case "^":return b^c;case "\x3c\x3c":return b<<c;case "\x3e\x3e":return b>>c;case "\x3e\x3e\x3e":return b>>>c}}})},"esri/arcade/FunctionWrapper":function(){define("esri/arcade/FunctionWrapper",["require","exports"],function(m,p){return function(){return function(f,l){this.context=this.definition=null;this.definition=f;this.context=l}}()})},"esri/arcade/ImmutablePathArray":function(){var m=this&&this.__extends||function(){var m=function(f,l){m=Object.setPrototypeOf||{__proto__:[]}instanceof
Array&&function(f,h){f.__proto__=h}||function(f,h){for(var k in h)h.hasOwnProperty(k)&&(f[k]=h[k])};return m(f,l)};return function(f,l){function k(){this.constructor=f}m(f,l);f.prototype=null===l?Object.create(l):(k.prototype=l.prototype,new k)}}();define("esri/arcade/ImmutablePathArray",["require","exports","./ImmutableArray","./ImmutablePointArray"],function(p,f,l,k){return function(f){function h(g,e,c,b,d){g=f.call(this,g)||this;g._lazyPath=[];g._hasZ=!1;g._hasM=!1;g._hasZ=c;g._hasM=b;g._spRef=
e;g._cacheId=d;return g}m(h,f);h.prototype.get=function(g){if(void 0===this._lazyPath[g]){var e=this._elements[g];if(void 0===e)return;this._lazyPath[g]=new k(e,this._spRef,this._hasZ,this._hasM,this._cacheId,g)}return this._lazyPath[g]};h.prototype.equalityTest=function(g){return g===this?!0:null===g||!1===g instanceof h?!1:g.getUniqueHash()===this.getUniqueHash()};h.prototype.getUniqueHash=function(){return this._cacheId.toString()};return h}(l)})},"esri/arcade/ImmutablePointArray":function(){var m=
this&&this.__extends||function(){var m=function(f,l){m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var k in h)h.hasOwnProperty(k)&&(f[k]=h[k])};return m(f,l)};return function(f,l){function k(){this.constructor=f}m(f,l);f.prototype=null===l?Object.create(l):(k.prototype=l.prototype,new k)}}();define("esri/arcade/ImmutablePointArray",["require","exports","./ImmutableArray","../geometry/Point"],function(p,f,l,k){return function(f){function h(g,
e,c,b,d,h){g=f.call(this,g)||this;g._lazyPt=[];g._hasZ=!1;g._hasM=!1;g._spRef=e;g._hasZ=c;g._hasM=b;g._cacheId=d;g._partId=h;return g}m(h,f);h.prototype.get=function(g){if(void 0===this._lazyPt[g]){var e=this._elements[g];if(void 0===e)return;var c=this._hasZ,b=this._hasM,d=null,d=c&&!b?new k(e[0],e[1],e[2],void 0,this._spRef):b&&c?new k(e[0],e[1],void 0,e[2],this._spRef):c&&b?new k(e[0],e[1],e[2],e[3],this._spRef):new k(e[0],e[1],this._spRef);d.setCacheValue("_arcadeCacheId",this._cacheId.toString()+
"-"+this._partId.toString()+"-"+g.toString());this._lazyPt[g]=d}return this._lazyPt[g]};h.prototype.equalityTest=function(g){return g===this?!0:null===g||!1===g instanceof h?!1:g.getUniqueHash()===this.getUniqueHash()};h.prototype.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return h}(l)})},"esri/arcade/polyfill/promiseUtils":function(){define("esri/arcade/polyfill/promiseUtils",["require","exports","dojo/Deferred","dojo/promise/all"],function(m,p,f,l){function k(e,
c){var b=new f(c);e(function(c){return g(c).then(b.resolve)},b.reject);return b.promise}function h(e){if(e){if("function"!==typeof e.forEach){var c=Object.keys(e),b=c.map(function(b){return e[b]});return h(b).then(function(b){var d={};c.forEach(function(c,e){return d[c]=b[e]});return d})}var d=null;return k(function(b,c){var g=[],f=e.length;0===f&&b(g);e.forEach(function(e){var h={promise:e};g.push(h);e.then(function(b){h.value=b}).catch(function(b){h.error=b}).then(function(){--f;0===f&&(d?c(Error("AbortError")):
b(g))})})},function(b){d=b||"Invocation cancellation";e.forEach(function(c){return c.cancel(b)})})}}function q(e){void 0===e&&(e=void 0);var c=new f;c.resolve(e);return c.promise}function g(e){return e&&"function"===typeof e.then?e:q(e)}Object.defineProperty(p,"__esModule",{value:!0});p.all=function(e){return l(e)};p.filter=function(e,c){var b=e.slice();return l(e.map(function(b,e){return c(b,e)})).then(function(c){return b.filter(function(b,d){return c[d]})})};p.create=k;p.createDeferred=function(e){var c=
null;e=k(function(b,d){c={resolve:b,reject:d}},e);c.promise=e;c.cancel=function(){c.reject(Error("AbortError"))};return c};p.eachAlways=h;p.eachAlwaysValues=function(e){return h(e).then(function(c){return c.filter(function(b){return!!b.value}).map(function(b){return b.value})})};p.first=function(e){return e&&e.length?k(function(c,b){for(var d=0;d<e.length;d++)e[d].then(c,b)}):q()};p.reject=function(e){var c=new f;c.reject(e);return c.promise};p.resolve=q;p.after=function(e,c){void 0===c&&(c=void 0);
var b=0;return k(function(d){b=setTimeout(function(){d(c)},e)},function(){b&&(clearTimeout(b),b=0)})};p.timeout=function(e,c,b){var d=0,g=new f(e.cancel);e.then(function(b){g.isFulfilled()||(g.resolve(b),d&&(clearTimeout(d),d=0))});e.catch(function(b){g.isFulfilled()||(g.reject(b),d&&(clearTimeout(d),d=0))});d=setTimeout(function(){g.reject(b||Error("promiseUtils:timeout"))},c);return g.promise};p.wrapCallback=function(e){var c=!1;return k(function(){e(function(b){c||q(b)})},function(){return c=!0})};
p.isPromiseLike=function(e){return e&&"function"===typeof e.then};p.when=g;p.createResolver=function(e){var c,b;e=k(function(d,e){c=d;b=e},e);var d=function(b){c(b)};d.resolve=function(b){return c(b)};d.reject=function(c){return b(c)};d.promise=e;return d}})},"esri/geometry/Multipoint":function(){define("esri/geometry/Multipoint","dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),function(m,p,f,l,k,h,q,g,e,c){function b(){}
function d(){}h={type:"multipoint",points:null};m=m(q,{declaredClass:"esri.geometry.Multipoint",type:"multipoint",points:null,constructor:function(b){this.points=[];b&&(b.points?k.mixin(this,b):this.spatialReference=b,this.spatialReference&&(this.spatialReference=c.createSpatialReference(this.spatialReference)));this.verifySR()},addPoint:function(b){this.clearCache();p.isArray(b)?this.points.push(b):this.points.push([b.x,b.y]);return this},removePoint:function(b){if(this._validateInputs(b))return this.clearCache(),
new g(this.points.splice(b,1)[0],this.spatialReference)},getExtent:function(){var b=this.getCacheValue("_extent");if(b)return new e(b);var b=this.points,c=b.length;if(c){var d=b[0],g,f,h=g=d[0],k=f=d[1],q=Math.min,l=Math.max,m=this.spatialReference,p,F;for(F=0;F<c;F++)d=b[F],p=d[0],d=d[1],h=q(h,p),k=q(k,d),g=l(g,p),f=l(f,d);b={xmin:h,ymin:k,xmax:g,ymax:f,spatialReference:m?m.toJson():null};this.setCacheValue("_extent",b);return new e(b)}},_validateInputs:function(b){return null===b||0>b||b>=this.points.length?
!1:!0},getPoint:function(b){if(this._validateInputs(b))return b=this.points[b],new g(b[0],b[1],this.spatialReference)},setPoint:function(b,c){if(this._validateInputs(b))return this.clearCache(),this.points[b]=[c.x,c.y],this},toJson:function(){var b={points:k.clone2DArray(this.points)},c=this.spatialReference;c&&(b.spatialReference=c.toJson());return b}});b.prototype=m.prototype;d.prototype=new b;Object.defineProperty(d.prototype,"points",{get:function(){this._unquantizeFn&&(this._pointsVal=this._unquantizeFn({points:k.clone2DArray(this._pointsVal)}).points,
this._unquantizeFn=null);return this._pointsVal},set:function(b){this._pointsVal=b}});d.prototype.setupLazyUnquantization=function(b,c){this._unquantizeFn=b;this._pointsVal=c.points};m.simpleConstructor=b;m.accessorConstructor=d;m.defaultProps=h;f("extend-esri")&&(p.setObject("geometry.Multipoint",m,l),l.geometry.defaultMultipoint=h);return m})},"esri/geometry/Polygon":function(){define("esri/geometry/Polygon","dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ./mathUtils ../srUtils".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d){function r(){}function v(){}q={type:"polygon",rings:null};var u=m(g,{declaredClass:"esri.geometry.Polygon",type:"polygon",rings:null,constructor:function(b){this.rings=[];this._ring=0;b&&(f.isArray(b)?this.rings=f.isArray(b[0][0])?b:[b]:b.rings?h.mixin(this,b):this.spatialReference=b,this.spatialReference&&(this.spatialReference=d.createSpatialReference(this.spatialReference)));this.verifySR()},addRing:function(b){this.clearCache();this._ring=this.rings.length;this.rings[this._ring]=
[];f.isArray(b[0])?p.forEach(b,this._addPointArr,this):p.forEach(b,this._addPoint,this);return this},_addPointArr:function(b){this.rings[this._ring].push(b)},_addPoint:function(b){this.rings[this._ring].push([b.x,b.y])},_insertPoints:function(b,c){this.clearCache();this._ring=c;this.rings[this._ring]||(this.rings[this._ring]=[]);p.forEach(b,this._addPoint,this)},_validateInputs:function(b,c){return null!==b&&void 0!==b&&(0>b||b>=this.rings.length)||null!==c&&void 0!==b&&(0>c||c>=this.rings[b].length)?
!1:!0},getPoint:function(b,c){if(this._validateInputs(b,c))return new e(this.rings[b][c],this.spatialReference)},setPoint:function(b,c,d){if(this._validateInputs(b,c))return this.clearCache(),this.rings[b][c]=[d.x,d.y],this},insertPoint:function(b,c,d){if(this._validateInputs(b)&&null!=c&&0<=c&&c<=this.rings[b].length)return this.clearCache(),this.rings[b].splice(c,0,[d.x,d.y]),this},removeRing:function(b){if(this._validateInputs(b,null)){this.clearCache();b=this.rings.splice(b,1)[0];var c,d=b.length,
g=this.spatialReference;for(c=0;c<d;c++)b[c]=new e(b[c],g);return b}},removePoint:function(b,c){if(this._validateInputs(b,c))return this.clearCache(),new e(this.rings[b].splice(c,1)[0],this.spatialReference)},getExtent:function(){var b;b=this.getCacheValue("_extent");var d=this.getCacheValue("_partwise");if(b)return b=new c(b),b._partwise=d,b;b=this.rings;var e=b.length;if(e&&b[0].length){var g,f,h,k,r,u,q,l,v=k=b[0][0][0],m=r=b[0][0][1],p=Math.min,P=Math.max,Q=this.spatialReference,d=[],O,N,M,J;
for(u=0;u<e;u++){g=b[u];O=N=g[0]&&g[0][0];M=J=g[0]&&g[0][1];l=g.length;for(q=0;q<l;q++)f=g[q],h=f[0],f=f[1],v=p(v,h),m=p(m,f),k=P(k,h),r=P(r,f),O=p(O,h),M=p(M,f),N=P(N,h),J=P(J,f);d.push(new c({xmin:O,ymin:M,xmax:N,ymax:J,spatialReference:Q?Q.toJson():null}))}b={xmin:v,ymin:m,xmax:k,ymax:r,spatialReference:Q?Q.toJson():null};d=1<d.length?d:null;this.setCacheValue("_extent",b);this.setCacheValue("_partwise",d);b=new c(b);b._partwise=d;return b}},contains:function(b){var c=this.rings,d,g=!1,f,h,k,r,
t,u,q=c.length;d=this.spatialReference;f=b.spatialReference;var l=b.x;b=b.y;d&&f&&!d.equals(f)&&d._canProject(f)&&(b=d.isWebMercator()?e.lngLatToXY(l,b):e.xyToLngLat(l,b,!0),l=b[0],b=b[1]);for(u=0;u<q;u++)for(d=c[u],k=d.length,t=r=0;t<k;t++)r++,r===k&&(r=0),f=d[t],h=d[r],(f[1]<b&&h[1]>=b||h[1]<b&&f[1]>=b)&&f[0]+(b-f[1])/(h[1]-f[1])*(h[0]-f[0])<l&&(g=!g);return g},getCentroid:function(){var b=this.getCacheValue("_centroid");if(void 0!==b)return b;var b=this.rings,c,d,g,f,h=[],k,r,u=Infinity,q=-Infinity,
l=Infinity,v=-Infinity;p.forEach(b,function(b){c=d=g=0;p.forEach(b,function(e,f){f<b.length-1&&(k=b[f+1],r=e[0]*k[1]-k[0]*e[1],c+=(e[0]+k[0])*r,d+=(e[1]+k[1])*r,g+=r,e[0]<u&&(u=e[0]),e[0]>q&&(q=e[0]),e[1]<l&&(l=e[1]),e[1]>v&&(v=e[1]))});0<g&&(g*=-1);g&&h.push([c,d,g/2])});h.sort(function(b,c){return b[2]-c[2]});c=d=void 0;h[0]&&(f=6*h[0][2],c=h[0][0]/f,d=h[0][1]/f,c<u||c>q||d<l||d>v)&&(c=d=void 0);if(void 0===c||void 0===d)if(b=b[0]&&b[0].length?this._getLineCentroid(b[0]):null)c=b.x,d=b.y;b=isNaN(c)||
isNaN(d)?null:new e(c,d,this.spatialReference);this.setCacheValue("_centroid",b);return b},_getLineCentroid:function(c){var d,e=0,g=0,f=0,h,k,r={x:0,y:0},t={x:0,y:0},u,q=c.length,l;for(u=0;u<q-1;u++)h=c[u],k=c[u+1],h&&k&&(r.x=h[0],r.y=h[1],t.x=k[0],t.y=k[1],d=b.getLength(r,t),0<d&&(e+=d,h=b.getMidpoint(h,k),g+=d*h[0],f+=d*h[1]));0<e?l={x:g/e,y:f/e}:c[0]&&(l={x:c[0][0],y:c[0][1]});return l},isClockwise:function(b){var c=0,d,e=b.length,g=f.isArray(b[0])?function(b,c){return b[0]*c[1]-c[0]*b[1]}:function(b,
c){return b.x*c.y-c.x*b.y};for(d=0;d<e;d++)c+=g(b[d],b[(d+1)%e]);return 0>=c/2},isSelfIntersecting:function(c){c=c||this;var d,e,g,f,h,k,r,u=c.rings.length,t;for(g=0;g<u;g++){for(d=0;d<c.rings[g].length-1;d++)for(h=[[c.rings[g][d][0],c.rings[g][d][1]],[c.rings[g][d+1][0],c.rings[g][d+1][1]]],e=g+1;e<u;e++)for(f=0;f<c.rings[e].length-1;f++)if(k=[[c.rings[e][f][0],c.rings[e][f][1]],[c.rings[e][f+1][0],c.rings[e][f+1][1]]],(r=b._getLineIntersection2(h,k))&&!(r[0]===h[0][0]&&r[1]===h[0][1]||r[0]===k[0][0]&&
r[1]===k[0][1]||r[0]===h[1][0]&&r[1]===h[1][1]||r[0]===k[1][0]&&r[1]===k[1][1]))return!0;f=c.rings[g].length;if(!(4>=f))for(d=0;d<f-3;d++)for(t=f-1,0===d&&(t=f-2),h=[[c.rings[g][d][0],c.rings[g][d][1]],[c.rings[g][d+1][0],c.rings[g][d+1][1]]],e=d+2;e<t;e++)if(k=[[c.rings[g][e][0],c.rings[g][e][1]],[c.rings[g][e+1][0],c.rings[g][e+1][1]]],(r=b._getLineIntersection2(h,k))&&!(r[0]===h[0][0]&&r[1]===h[0][1]||r[0]===k[0][0]&&r[1]===k[0][1]||r[0]===h[1][0]&&r[1]===h[1][1]||r[0]===k[1][0]&&r[1]===k[1][1]))return!0}return!1},
toJson:function(){var b={rings:h.clone3DArray(this.rings)},c=this.spatialReference;c&&(b.spatialReference=c.toJson());return b}});r.prototype=u.prototype;v.prototype=new r;Object.defineProperty(v.prototype,"rings",{get:function(){this._unquantizeFn&&(this._ringsVal=this._unquantizeFn({rings:h.clone3DArray(this._ringsVal)}).rings,this._unquantizeFn=null);return this._ringsVal},set:function(b){this._ringsVal=b}});v.prototype.setupLazyUnquantization=function(b,c){this._unquantizeFn=b;this._ringsVal=
c.rings};u.simpleConstructor=r;u.accessorConstructor=v;u.defaultProps=q;u.createEllipse=function(b){var c=b.center.x,d=b.center.y,e=b.longAxis,g=b.shortAxis,f=b.numberOfPoints,h=b.map,k,r,t;b=[];var q=2*Math.PI/f;for(r=0;r<f;r++)k=Math.cos(r*q),t=Math.sin(r*q),k=h.toMap({x:e*k+c,y:g*t+d}),b.push(k);b.push(b[0]);c=new u(h.spatialReference);c.addRing(b);return c};u.createCircle=function(b){return u.createEllipse({center:b.center,longAxis:b.r,shortAxis:b.r,numberOfPoints:b.numberOfPoints,map:b.map})};
u.fromExtent=function(b){var c=b.normalize();b=b.spatialReference;return new u({rings:p.map(c,function(b){return[[b.xmin,b.ymin],[b.xmin,b.ymax],[b.xmax,b.ymax],[b.xmax,b.ymin],[b.xmin,b.ymin]]}),spatialReference:b?b.toJson():null})};l("extend-esri")&&(f.setObject("geometry.Polygon",u,k),k.geometry.defaultPolygon=q,k.geometry.createEllipse=u.createEllipse,k.geometry.createCircle=u.createCircle,k.geometry.isClockwise=u.prototype.isClockwise,k.geometry.polygonSelfIntersecting=u.prototype.isSelfIntersecting);
return u})},"esri/geometry/Polyline":function(){define("esri/geometry/Polyline","dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),function(m,p,f,l,k,h,q,g,e,c,b){function d(){}function r(){}q={type:"polyline",paths:null};m=m(g,{declaredClass:"esri.geometry.Polyline",type:"polyline",paths:null,constructor:function(c){this.paths=[];this._path=0;c&&(f.isArray(c)?this.paths=f.isArray(c[0][0])?c:[c]:c.paths?
h.mixin(this,c):this.spatialReference=c,this.spatialReference&&(this.spatialReference=b.createSpatialReference(this.spatialReference)));this.verifySR()},addPath:function(b){this.clearCache();this._path=this.paths.length;this.paths[this._path]=[];f.isArray(b[0])?p.forEach(b,this._addPointArr,this):p.forEach(b,this._addPoint,this);return this},_addPointArr:function(b){this.paths[this._path].push(b)},_addPoint:function(b){this.paths[this._path].push([b.x,b.y])},_insertPoints:function(b,c){this.clearCache();
this._path=c;this.paths[this._path]||(this.paths[this._path]=[]);p.forEach(b,this._addPoint,this)},_validateInputs:function(b,c){return null!==b&&void 0!==b&&(0>b||b>=this.paths.length)||null!==c&&void 0!==b&&(0>c||c>=this.paths[b].length)?!1:!0},getPoint:function(b,c){if(this._validateInputs(b,c))return new e(this.paths[b][c],this.spatialReference)},setPoint:function(b,c,d){if(this._validateInputs(b,c))return this.clearCache(),this.paths[b][c]=[d.x,d.y],this},insertPoint:function(b,c,d){if(this._validateInputs(b)&&
null!=c&&0<=c&&c<=this.paths[b].length)return this.clearCache(),this.paths[b].splice(c,0,[d.x,d.y]),this},removePath:function(b){if(this._validateInputs(b,null)){this.clearCache();b=this.paths.splice(b,1)[0];var c,d=b.length,g=this.spatialReference;for(c=0;c<d;c++)b[c]=new e(b[c],g);return b}},removePoint:function(b,c){if(this._validateInputs(b,c))return this.clearCache(),new e(this.paths[b].splice(c,1)[0],this.spatialReference)},getExtent:function(){var b;b=this.getCacheValue("_extent");var d=this.getCacheValue("_partwise");
if(b)return b=new c(b),b._partwise=d,b;b=this.paths;var e=b.length;if(e&&b[0].length){var g,f,h,k,r,q,l,m,p=k=b[0][0][0],H=r=b[0][0][1],D=Math.min,G=Math.max,I=this.spatialReference,d=[],P,Q,O,N;for(q=0;q<e;q++){g=b[q];P=Q=g[0]&&g[0][0];O=N=g[0]&&g[0][1];m=g.length;for(l=0;l<m;l++)f=g[l],h=f[0],f=f[1],p=D(p,h),H=D(H,f),k=G(k,h),r=G(r,f),P=D(P,h),O=D(O,f),Q=G(Q,h),N=G(N,f);d.push(new c({xmin:P,ymin:O,xmax:Q,ymax:N,spatialReference:I?I.toJson():null}))}b={xmin:p,ymin:H,xmax:k,ymax:r,spatialReference:I?
I.toJson():null};d=1<d.length?d:null;this.setCacheValue("_extent",b);this.setCacheValue("_partwise",d);b=new c(b);b._partwise=d;return b}},toJson:function(){var b={paths:h.clone3DArray(this.paths)},c=this.spatialReference;c&&(b.spatialReference=c.toJson());return b}});d.prototype=m.prototype;r.prototype=new d;Object.defineProperty(r.prototype,"paths",{get:function(){this._unquantizeFn&&(this._pathsVal=this._unquantizeFn({paths:h.clone3DArray(this._pathsVal)}).paths,this._unquantizeFn=null);return this._pathsVal},
set:function(b){this._pathsVal=b}});r.prototype.setupLazyUnquantization=function(b,c){this._unquantizeFn=b;this._pathsVal=c.paths};m.simpleConstructor=d;m.accessorConstructor=r;m.defaultProps=q;l("extend-esri")&&(f.setObject("geometry.Polyline",m,k),k.geometry.defaultPolyline=q);return m})},"esri/geometry/ScreenPoint":function(){define("esri/geometry/ScreenPoint",["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./Point"],function(m,p,f,l,k){m=m(k,{declaredClass:"esri.geometry.ScreenPoint",
verifySR:function(){}});f("extend-esri")&&p.setObject("geometry.ScreenPoint",m,l);return m})},"esri/geometry/Rect":function(){define("esri/geometry/Rect","dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./Geometry ./Point ./Extent ../srUtils".split(" "),function(m,p,f,l,k,h,q,g,e){function c(b){return new g(parseFloat(b.x),parseFloat(b.y)-parseFloat(b.height),parseFloat(b.x)+parseFloat(b.width),parseFloat(b.y),b.spatialReference)}var b=m(h,{declaredClass:"esri.geometry.Rect",type:"rect",
x:0,y:0,width:100,height:100,constructor:function(b,c,g,f,h){k.isObject(b)&&"extent"===b.type&&(c=b.ymax,g=b.getWidth(),f=b.getHeight(),h=b.spatialReference,b=b.xmin);k.isObject(b)?(k.mixin(this,b),this.spatialReference&&(this.spatialReference=e.createSpatialReference(this.spatialReference))):(this.x=b,this.y=c,this.width=g,this.height=f,this.spatialReference=h);this.verifySR()},getCenter:function(){return new q(this.x+this.width/2,this.y+this.height/2,this.spatialReference)},offset:function(c,e){return new b(this.x+
c,this.y+e,this.width,this.height,this.spatialReference)},intersects:function(b){return b.x+b.width<=this.x||b.y+b.height<=this.y||b.y>=this.y+this.height||b.x>=this.x+this.width?!1:!0},getExtent:function(){return c(this)},update:function(b,c,e,g,f){this.x=b;this.y=c;this.width=e;this.height=g;this.spatialReference=f;this.clearCache();return this}});f("extend-esri")&&(p.setObject("geometry.Rect",b,l),l.geometry._rectToExtent=c,l.geometry._extentToRect=function(c){return new b(c)});return b})},"esri/geometry/scaleUtils":function(){define("esri/geometry/scaleUtils",
["dojo/_base/lang","dojo/has","../kernel","../config","../WKIDUnitConversion"],function(m,p,f,l,k){function h(b,c,f){return b&&c?b.getWidth()/c*(f||g)*39.37*e.screenDPI:0}function q(b,f,h,k,t){return b.expand(k*f/(39.37*((t?h:c.values[c[h]])||g)*e.screenDPI)/b.getWidth())}var g=6370997*Math.PI/180,e=l.defaults,c=k,b={getUnitValueForSR:function(b){return this.getUnitValue(b)||g},getUnitValue:function(b){var d,e,g;b&&("object"===typeof b?(d=b.wkid,e=b.wkt):"number"===typeof b?d=b:"string"===typeof b&&
(e=b));d?g=c.values[c[d]]:e&&-1!==e.search(/^PROJCS/i)&&(b=/UNIT\[([^\]]+)\]\]$/i.exec(e))&&b[1]&&(g=parseFloat(b[1].split(",")[1]));return g},getScale:function(c,e,g){var d,f,k;1<arguments.length&&null!=e&&!e.declaredClass?(d=c,f=e,e=null,k=b.getUnitValue(g)):(d=e||c.extent,f=c.width,k=b.getUnitValue(d&&d.spatialReference));return h(d,f,k)},getExtentForScale:function(c,e,g){return q(g||c.extent,c.width,b.getUnitValue(c.spatialReference),e,!0)}};p("extend-esri")&&(m.mixin(m.getObject("geometry",!0,
f),b),f.geometry._getScale=h,f.geometry._getExtentForScale=q);return b})},"esri/WKIDUnitConversion":function(){define("esri/WKIDUnitConversion",["dojo/has","./kernel"],function(m,p){var f,l={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.116756,5E4,15E4],units:"Meter Foot Foot_US Foot_Clarke Yard_Clarke Link_Clarke Yard_Sears Foot_Sears Chain_Sears Chain_Benoit_1895_B Yard_Indian Yard_Indian_1937 Foot_Gold_Coast Chain_Sears_1922_Truncated 50_Kilometers 150_Kilometers".split(" "),
2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:13,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,
3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,
3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,
3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,
5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,
6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,
6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,
6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,
6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,
7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,
7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,
8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,
8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,
8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,
24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,
31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:14,102069:15,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,
102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,
103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,
103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,
103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(f=2E3;2045>=f;f++)l[f]=0;for(f=2056;2065>=f;f++)l[f]=0;for(f=2067;2135>=f;f++)l[f]=0;for(f=2137;2154>=
f;f++)l[f]=0;for(f=2161;2170>=f;f++)l[f]=0;for(f=2172;2193>=f;f++)l[f]=0;for(f=2195;2198>=f;f++)l[f]=0;for(f=2200;2203>=f;f++)l[f]=0;for(f=2205;2217>=f;f++)l[f]=0;for(f=2222;2224>=f;f++)l[f]=1;for(f=2225;2250>=f;f++)l[f]=2;for(f=2251;2253>=f;f++)l[f]=1;for(f=2257;2264>=f;f++)l[f]=2;for(f=2274;2279>=f;f++)l[f]=2;for(f=2280;2282>=f;f++)l[f]=1;for(f=2283;2289>=f;f++)l[f]=2;for(f=2290;2292>=f;f++)l[f]=0;for(f=2308;2313>=f;f++)l[f]=0;for(f=2315;2491>=f;f++)l[f]=0;for(f=2494;2866>=f;f++)l[f]=0;for(f=2867;2869>=
f;f++)l[f]=1;for(f=2870;2888>=f;f++)l[f]=2;for(f=2891;2895>=f;f++)l[f]=2;for(f=2896;2898>=f;f++)l[f]=1;for(f=2902;2908>=f;f++)l[f]=2;for(f=2915;2920>=f;f++)l[f]=2;for(f=2921;2923>=f;f++)l[f]=1;for(f=2924;2930>=f;f++)l[f]=2;for(f=2931;2962>=f;f++)l[f]=0;for(f=2964;2968>=f;f++)l[f]=2;for(f=2969;2973>=f;f++)l[f]=0;for(f=2975;2991>=f;f++)l[f]=0;for(f=2995;3051>=f;f++)l[f]=0;for(f=3054;3079>=f;f++)l[f]=0;for(f=3081;3088>=f;f++)l[f]=0;for(f=3092;3101>=f;f++)l[f]=0;for(f=3106;3138>=f;f++)l[f]=0;for(f=3146;3151>=
f;f++)l[f]=0;for(f=3153;3166>=f;f++)l[f]=0;for(f=3168;3172>=f;f++)l[f]=0;for(f=3174;3203>=f;f++)l[f]=0;for(f=3294;3358>=f;f++)l[f]=0;for(f=3367;3403>=f;f++)l[f]=0;for(f=3408;3416>=f;f++)l[f]=0;for(f=3417;3438>=f;f++)l[f]=2;for(f=3441;3446>=f;f++)l[f]=2;for(f=3447;3450>=f;f++)l[f]=0;for(f=3451;3459>=f;f++)l[f]=2;for(f=3460;3478>=f;f++)l[f]=0;for(f=3554;3559>=f;f++)l[f]=0;for(f=3560;3570>=f;f++)l[f]=2;for(f=3571;3581>=f;f++)l[f]=0;for(f=3594;3597>=f;f++)l[f]=0;for(f=3601;3604>=f;f++)l[f]=0;for(f=3637;3639>=
f;f++)l[f]=0;for(f=3665;3667>=f;f++)l[f]=0;for(f=3693;3695>=f;f++)l[f]=0;for(f=3701;3727>=f;f++)l[f]=0;for(f=3728;3739>=f;f++)l[f]=2;for(f=3740;3751>=f;f++)l[f]=0;for(f=3753;3760>=f;f++)l[f]=2;for(f=3761;3773>=f;f++)l[f]=0;for(f=3775;3777>=f;f++)l[f]=0;for(f=3779;3781>=f;f++)l[f]=0;for(f=3783;3785>=f;f++)l[f]=0;for(f=3788;3791>=f;f++)l[f]=0;for(f=3797;3802>=f;f++)l[f]=0;for(f=3814;3816>=f;f++)l[f]=0;for(f=3825;3829>=f;f++)l[f]=0;for(f=3832;3841>=f;f++)l[f]=0;for(f=3844;3852>=f;f++)l[f]=0;for(f=3873;3885>=
f;f++)l[f]=0;for(f=3890;3893>=f;f++)l[f]=0;for(f=3907;3912>=f;f++)l[f]=0;for(f=3942;3950>=f;f++)l[f]=0;for(f=3968;3970>=f;f++)l[f]=0;for(f=3973;3976>=f;f++)l[f]=0;for(f=3986;3989>=f;f++)l[f]=0;for(f=3994;3997>=f;f++)l[f]=0;for(f=4048;4051>=f;f++)l[f]=0;for(f=4056;4063>=f;f++)l[f]=0;for(f=4093;4096>=f;f++)l[f]=0;for(f=4390;4398>=f;f++)l[f]=0;for(f=4399;4413>=f;f++)l[f]=2;for(f=4418;4433>=f;f++)l[f]=2;for(f=4455;4457>=f;f++)l[f]=2;for(f=4484;4489>=f;f++)l[f]=0;for(f=4491;4554>=f;f++)l[f]=0;for(f=4568;4589>=
f;f++)l[f]=0;for(f=4652;4656>=f;f++)l[f]=0;for(f=4766;4800>=f;f++)l[f]=0;for(f=5014;5016>=f;f++)l[f]=0;for(f=5069;5072>=f;f++)l[f]=0;for(f=5105;5130>=f;f++)l[f]=0;for(f=5173;5188>=f;f++)l[f]=0;for(f=5253;5259>=f;f++)l[f]=0;for(f=5269;5275>=f;f++)l[f]=0;for(f=5292;5311>=f;f++)l[f]=0;for(f=5329;5331>=f;f++)l[f]=0;for(f=5343;5349>=f;f++)l[f]=0;for(f=5355;5357>=f;f++)l[f]=0;for(f=5387;5389>=f;f++)l[f]=0;for(f=5459;5463>=f;f++)l[f]=0;for(f=5479;5482>=f;f++)l[f]=0;for(f=5518;5520>=f;f++)l[f]=0;for(f=5530;5539>=
f;f++)l[f]=0;for(f=5550;5552>=f;f++)l[f]=0;for(f=5562;5583>=f;f++)l[f]=0;for(f=5623;5625>=f;f++)l[f]=2;for(f=5631;5639>=f;f++)l[f]=0;for(f=5649;5653>=f;f++)l[f]=0;for(f=5663;5680>=f;f++)l[f]=0;for(f=5682;5685>=f;f++)l[f]=0;for(f=5875;5877>=f;f++)l[f]=0;for(f=5896;5899>=f;f++)l[f]=0;for(f=5921;5940>=f;f++)l[f]=0;for(f=6050;6125>=f;f++)l[f]=0;for(f=6244;6275>=f;f++)l[f]=0;for(f=6328;6348>=f;f++)l[f]=0;for(f=6350;6356>=f;f++)l[f]=0;for(f=6366;6372>=f;f++)l[f]=0;for(f=6381;6387>=f;f++)l[f]=0;for(f=6393;6404>=
f;f++)l[f]=0;for(f=6480;6483>=f;f++)l[f]=0;for(f=6511;6514>=f;f++)l[f]=0;for(f=6579;6581>=f;f++)l[f]=0;for(f=6619;6624>=f;f++)l[f]=0;for(f=6625;6627>=f;f++)l[f]=2;for(f=6628;6632>=f;f++)l[f]=0;for(f=6634;6637>=f;f++)l[f]=0;for(f=6669;6692>=f;f++)l[f]=0;for(f=6707;6709>=f;f++)l[f]=0;for(f=6720;6723>=f;f++)l[f]=0;for(f=6732;6738>=f;f++)l[f]=0;for(f=6931;6933>=f;f++)l[f]=0;for(f=6956;6959>=f;f++)l[f]=0;for(f=7005;7007>=f;f++)l[f]=0;for(f=7057;7070>=f;f++)l[f]=2;for(f=7074;7082>=f;f++)l[f]=0;for(f=7109;7118>=
f;f++)l[f]=0;for(f=7119;7127>=f;f++)l[f]=1;for(f=7374;7376>=f;f++)l[f]=0;for(f=7528;7586>=f;f++)l[f]=0;for(f=7587;7645>=f;f++)l[f]=2;for(f=7692;7696>=f;f++)l[f]=0;for(f=7755;7787>=f;f++)l[f]=0;for(f=7791;7795>=f;f++)l[f]=0;for(f=7799;7801>=f;f++)l[f]=0;for(f=7803;7805>=f;f++)l[f]=0;for(f=7825;7831>=f;f++)l[f]=0;for(f=7845;7859>=f;f++)l[f]=0;for(f=8013;8032>=f;f++)l[f]=0;for(f=8065;8068>=f;f++)l[f]=1;for(f=8518;8529>=f;f++)l[f]=2;for(f=8533;8536>=f;f++)l[f]=2;for(f=8538;8540>=f;f++)l[f]=2;for(f=8677;8679>=
f;f++)l[f]=0;for(f=8836;8840>=f;f++)l[f]=0;for(f=8857;8859>=f;f++)l[f]=0;for(f=8908;8910>=f;f++)l[f]=0;for(f=9154;9159>=f;f++)l[f]=0;for(f=9205;9218>=f;f++)l[f]=0;for(f=9271;9273>=f;f++)l[f]=0;for(f=20002;20032>=f;f++)l[f]=0;for(f=20062;20092>=f;f++)l[f]=0;for(f=20135;20138>=f;f++)l[f]=0;for(f=20248;20258>=f;f++)l[f]=0;for(f=20348;20358>=f;f++)l[f]=0;for(f=20436;20440>=f;f++)l[f]=0;for(f=20822;20824>=f;f++)l[f]=0;for(f=20934;20936>=f;f++)l[f]=0;for(f=21035;21037>=f;f++)l[f]=0;for(f=21095;21097>=f;f++)l[f]=
0;for(f=21148;21150>=f;f++)l[f]=0;for(f=21413;21423>=f;f++)l[f]=0;for(f=21453;21463>=f;f++)l[f]=0;for(f=21473;21483>=f;f++)l[f]=0;for(f=21780;21782>=f;f++)l[f]=0;for(f=21891;21894>=f;f++)l[f]=0;for(f=21896;21899>=f;f++)l[f]=0;for(f=22171;22177>=f;f++)l[f]=0;for(f=22181;22187>=f;f++)l[f]=0;for(f=22191;22197>=f;f++)l[f]=0;for(f=22234;22236>=f;f++)l[f]=0;for(f=22521;22525>=f;f++)l[f]=0;for(f=22991;22994>=f;f++)l[f]=0;for(f=23028;23038>=f;f++)l[f]=0;for(f=23830;23853>=f;f++)l[f]=0;for(f=23866;23872>=
f;f++)l[f]=0;for(f=23877;23884>=f;f++)l[f]=0;for(f=23886;23894>=f;f++)l[f]=0;for(f=23946;23948>=f;f++)l[f]=0;for(f=24311;24313>=f;f++)l[f]=0;for(f=24342;24347>=f;f++)l[f]=0;for(f=24370;24374>=f;f++)l[f]=10;for(f=24375;24381>=f;f++)l[f]=0;for(f=24718;24721>=f;f++)l[f]=0;for(f=24817;24821>=f;f++)l[f]=0;for(f=24877;24882>=f;f++)l[f]=0;for(f=24891;24893>=f;f++)l[f]=0;for(f=25391;25395>=f;f++)l[f]=0;for(f=25828;25838>=f;f++)l[f]=0;for(f=26191;26195>=f;f++)l[f]=0;for(f=26391;26393>=f;f++)l[f]=0;for(f=26701;26722>=
f;f++)l[f]=0;for(f=26729;26799>=f;f++)l[f]=2;for(f=26801;26803>=f;f++)l[f]=2;for(f=26811;26813>=f;f++)l[f]=2;for(f=26847;26870>=f;f++)l[f]=2;for(f=26891;26899>=f;f++)l[f]=0;for(f=26901;26923>=f;f++)l[f]=0;for(f=26929;26946>=f;f++)l[f]=0;for(f=26948;26998>=f;f++)l[f]=0;for(f=27037;27040>=f;f++)l[f]=0;for(f=27205;27232>=f;f++)l[f]=0;for(f=27258;27260>=f;f++)l[f]=0;for(f=27391;27398>=f;f++)l[f]=0;for(f=27561;27564>=f;f++)l[f]=0;for(f=27571;27574>=f;f++)l[f]=0;for(f=27581;27584>=f;f++)l[f]=0;for(f=27591;27594>=
f;f++)l[f]=0;for(f=28191;28193>=f;f++)l[f]=0;for(f=28348;28358>=f;f++)l[f]=0;for(f=28402;28432>=f;f++)l[f]=0;for(f=28462;28492>=f;f++)l[f]=0;for(f=29118;29122>=f;f++)l[f]=0;for(f=29168;29172>=f;f++)l[f]=0;for(f=29177;29185>=f;f++)l[f]=0;for(f=29187;29195>=f;f++)l[f]=0;for(f=29900;29903>=f;f++)l[f]=0;for(f=30161;30179>=f;f++)l[f]=0;for(f=30491;30494>=f;f++)l[f]=0;for(f=30729;30732>=f;f++)l[f]=0;for(f=31251;31259>=f;f++)l[f]=0;for(f=31265;31268>=f;f++)l[f]=0;for(f=31275;31279>=f;f++)l[f]=0;for(f=31281;31297>=
f;f++)l[f]=0;for(f=31461;31469>=f;f++)l[f]=0;for(f=31491;31495>=f;f++)l[f]=0;for(f=31917;31922>=f;f++)l[f]=0;for(f=31965;32E3>=f;f++)l[f]=0;for(f=32001;32003>=f;f++)l[f]=2;for(f=32005;32031>=f;f++)l[f]=2;for(f=32033;32060>=f;f++)l[f]=2;for(f=32064;32067>=f;f++)l[f]=2;for(f=32074;32077>=f;f++)l[f]=2;for(f=32081;32086>=f;f++)l[f]=0;for(f=32107;32130>=f;f++)l[f]=0;for(f=32133;32158>=f;f++)l[f]=0;for(f=32164;32167>=f;f++)l[f]=2;for(f=32180;32199>=f;f++)l[f]=0;for(f=32201;32260>=f;f++)l[f]=0;for(f=32301;32360>=
f;f++)l[f]=0;for(f=32601;32662>=f;f++)l[f]=0;for(f=32664;32667>=f;f++)l[f]=2;for(f=32701;32761>=f;f++)l[f]=0;for(f=53001;53004>=f;f++)l[f]=0;for(f=53008;53019>=f;f++)l[f]=0;for(f=53021;53032>=f;f++)l[f]=0;for(f=53034;53037>=f;f++)l[f]=0;for(f=53042;53046>=f;f++)l[f]=0;for(f=53074;53080>=f;f++)l[f]=0;for(f=54001;54004>=f;f++)l[f]=0;for(f=54008;54019>=f;f++)l[f]=0;for(f=54021;54032>=f;f++)l[f]=0;for(f=54034;54037>=f;f++)l[f]=0;for(f=54042;54046>=f;f++)l[f]=0;for(f=54048;54053>=f;f++)l[f]=0;for(f=54074;54080>=
f;f++)l[f]=0;for(f=54098;54101>=f;f++)l[f]=0;for(f=102001;102040>=f;f++)l[f]=0;for(f=102042;102063>=f;f++)l[f]=0;for(f=102065;102067>=f;f++)l[f]=0;for(f=102070;102117>=f;f++)l[f]=0;for(f=102122;102216>=f;f++)l[f]=0;for(f=102221;102377>=f;f++)l[f]=0;for(f=102382;102388>=f;f++)l[f]=0;for(f=102389;102398>=f;f++)l[f]=2;for(f=102399;102444>=f;f++)l[f]=0;for(f=102445;102447>=f;f++)l[f]=2;for(f=102448;102458>=f;f++)l[f]=0;for(f=102459;102468>=f;f++)l[f]=2;for(f=102469;102499>=f;f++)l[f]=0;for(f=102500;102519>=
f;f++)l[f]=1;for(f=102520;102524>=f;f++)l[f]=0;for(f=102525;102529>=f;f++)l[f]=2;for(f=102530;102588>=f;f++)l[f]=0;for(f=102590;102598>=f;f++)l[f]=0;for(f=102601;102603>=f;f++)l[f]=0;for(f=102605;102628>=f;f++)l[f]=0;for(f=102629;102646>=f;f++)l[f]=2;for(f=102648;102700>=f;f++)l[f]=2;for(f=102701;102703>=f;f++)l[f]=0;for(f=102707;102730>=f;f++)l[f]=2;for(f=102733;102758>=f;f++)l[f]=2;for(f=102767;102900>=f;f++)l[f]=0;for(f=102965;102969>=f;f++)l[f]=0;for(f=102971;102973>=f;f++)l[f]=0;for(f=102975;102989>=
f;f++)l[f]=0;for(f=102990;102992>=f;f++)l[f]=1;for(f=102997;103002>=f;f++)l[f]=0;for(f=103003;103008>=f;f++)l[f]=2;for(f=103009;103011>=f;f++)l[f]=0;for(f=103012;103014>=f;f++)l[f]=2;for(f=103019;103021>=f;f++)l[f]=0;for(f=103022;103024>=f;f++)l[f]=2;for(f=103029;103031>=f;f++)l[f]=0;for(f=103032;103034>=f;f++)l[f]=2;for(f=103065;103068>=f;f++)l[f]=0;for(f=103074;103076>=f;f++)l[f]=0;for(f=103077;103079>=f;f++)l[f]=1;for(f=103080;103082>=f;f++)l[f]=0;for(f=103083;103085>=f;f++)l[f]=2;for(f=103090;103093>=
f;f++)l[f]=0;for(f=103097;103099>=f;f++)l[f]=0;for(f=103100;103102>=f;f++)l[f]=2;for(f=103107;103109>=f;f++)l[f]=0;for(f=103110;103112>=f;f++)l[f]=2;for(f=103113;103116>=f;f++)l[f]=0;for(f=103117;103120>=f;f++)l[f]=2;for(f=103153;103157>=f;f++)l[f]=0;for(f=103158;103162>=f;f++)l[f]=2;for(f=103163;103165>=f;f++)l[f]=0;for(f=103166;103168>=f;f++)l[f]=1;for(f=103169;103171>=f;f++)l[f]=2;for(f=103186;103188>=f;f++)l[f]=0;for(f=103189;103191>=f;f++)l[f]=2;for(f=103192;103195>=f;f++)l[f]=0;for(f=103196;103199>=
f;f++)l[f]=2;for(f=103200;103224>=f;f++)l[f]=0;for(f=103225;103227>=f;f++)l[f]=1;for(f=103232;103237>=f;f++)l[f]=0;for(f=103238;103243>=f;f++)l[f]=2;for(f=103244;103246>=f;f++)l[f]=0;for(f=103247;103249>=f;f++)l[f]=2;for(f=103254;103256>=f;f++)l[f]=0;for(f=103257;103259>=f;f++)l[f]=2;for(f=103264;103266>=f;f++)l[f]=0;for(f=103267;103269>=f;f++)l[f]=2;for(f=103300;103375>=f;f++)l[f]=0;for(f=103381;103383>=f;f++)l[f]=0;for(f=103384;103386>=f;f++)l[f]=1;for(f=103387;103389>=f;f++)l[f]=0;for(f=103390;103392>=
f;f++)l[f]=2;for(f=103397;103399>=f;f++)l[f]=0;for(f=103400;103471>=f;f++)l[f]=2;for(f=103476;103478>=f;f++)l[f]=0;for(f=103479;103481>=f;f++)l[f]=2;for(f=103486;103488>=f;f++)l[f]=0;for(f=103489;103491>=f;f++)l[f]=2;for(f=103492;103495>=f;f++)l[f]=0;for(f=103496;103499>=f;f++)l[f]=2;for(f=103528;103543>=f;f++)l[f]=0;for(f=103544;103548>=f;f++)l[f]=2;for(f=103549;103551>=f;f++)l[f]=0;for(f=103552;103554>=f;f++)l[f]=1;for(f=103555;103557>=f;f++)l[f]=2;for(f=103558;103560>=f;f++)l[f]=0;for(f=103571;103573>=
f;f++)l[f]=0;for(f=103574;103576>=f;f++)l[f]=2;for(f=103577;103580>=f;f++)l[f]=0;for(f=103581;103583>=f;f++)l[f]=2;for(f=103595;103598>=f;f++)l[f]=0;for(f=103600;103694>=f;f++)l[f]=0;for(f=103696;103699>=f;f++)l[f]=0;for(f=103700;103793>=f;f++)l[f]=2;for(f=103794;103871>=f;f++)l[f]=0;for(f=103900;103971>=f;f++)l[f]=2;m("extend-esri")&&(p.WKIDUnitConversion=l);return l})},"esri/geometry/screenUtils":function(){define("esri/geometry/screenUtils","dojo/_base/array dojo/_base/lang dojo/sniff ../kernel ./Point ./ScreenPoint ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),
function(m,p,f,l,k,h,q,g,e,c){var b=function(){return 9>f("ie")?function(b,c,d,e,g,f,h,k,q){var r=[],t=Math.round,u,l=h.length,v,m,x,p,w,B;for(u=0;u<l;u++)if(v=h[u],p=k?k(v[0][0],v[0][1],q):v[0],1<(x=v.length))for(w=t((p[0]-b)*d+g),B=t((c-p[1])*e+f),p=k?k(v[1][0],v[1][1],q):v[1],m=t((p[0]-b)*d+g),p=t((c-p[1])*e+f),r.push("M",w+","+B,"L",m+","+p),m=2;m<x;m++)p=k?k(v[m][0],v[m][1],q):v[m],w=t((p[0]-b)*d+g),B=t((c-p[1])*e+f),r.push(w+","+B);else w=t((p[0]-b)*d+g),B=t((c-p[1])*e+f),r.push("M",w+","+B);
return r}:function(b,c,d,e,g,f,h,k,q,l){var r=[],t,u,v,m,x,p,w=Math.round;t=0;for(v=h?h.length:0;t<v;t++){x=h[t];r.push("M");u=0;for(m=x?x.length:0;u<m;u++)p=k?k(x[u][0],x[u][1],q):x[u],r.push(w((p[0]-b)*d+g)+","+w((c-p[1])*e+f));l||r.push("Z")}return r}}(),d={toScreenPoint:function(b,c,d,e,g){var f=b.spatialReference,r=e.spatialReference,u=e.x;e=e.y;f&&r&&!f.equals(r)&&f._canProject(r)&&(f=f.isWebMercator()?k.lngLatToXY(u,e):k.xyToLngLat(u,e,!0),u=f[0],e=f[1]);u=(u-b.xmin)*(c/b.getWidth());e=(b.ymax-
e)*(d/b.getHeight());g||(u=Math.round(u),e=Math.round(e));return new h(u,e)},toScreenGeometry:function(b,d,f,h){var r=b.xmin,u=b.ymax,t=d/b.getWidth(),l=f/b.getHeight(),v=m.forEach,p=Math.round;if(h instanceof k)return new k(p((h.x-r)*t),p((u-h.y)*l));if(h instanceof e){b=new e;var C=b.points;v(h.points,function(b,c){C[c]=[p((b[0]-r)*t),p((u-b[1])*l)]});return b}if(h instanceof c)return new c(p((h.xmin-r)*t),p((u-h.ymin)*l),p((h.xmax-r)*t),p((u-h.ymax)*t));if(h instanceof q){b=new q;var F=b.paths,
E;v(h.paths,function(b,c){E=F[c]=[];v(b,function(b,c){E[c]=[p((b[0]-r)*t),p((u-b[1])*l)]})});return b}if(h instanceof g){b=new g;var H=b.rings,D;v(h.rings,function(b,c){D=H[c]=[];v(b,function(b,c){D[c]=[p((b[0]-r)*t),p((u-b[1])*l)]})});return b}},_toScreenPath:function(c,d,e,g,f,h){var r=g instanceof q,u=c.spatialReference,t=g.spatialReference,l,v;u&&t&&!u.equals(t)&&u._canProject(t)&&(u.isWebMercator()?l=k.lngLatToXY:(l=k.xyToLngLat,v=!0));return b(c.xmin,c.ymax,d/c.getWidth(),e/c.getHeight(),f,
h,r?g.paths:g.rings,l,v,r)},toMapPoint:function(b,c,d,e){return new k(b.xmin+e.x/(c/b.getWidth()),b.ymax-e.y/(d/b.getHeight()),b.spatialReference)},toMapGeometry:function(b,d,f,h){var r=b.xmin,u=b.ymax,t=b.spatialReference,l=d/b.getWidth(),v=f/b.getHeight(),p=m.forEach;if(h instanceof k)return new k(r+h.x/l,u-h.y/v,t);if(h instanceof e){b=new e(t);var C=b.points;p(h.points,function(b,c){C[c]=[r+b[0]/l,u-b[1]/v]});return b}if(h instanceof c)return new c(r+h.xmin/l,u-h.ymin/v,r+h.xmax/l,u-h.ymax/v,
t);if(h instanceof q){b=new q(t);var F=b.paths,E;p(h.paths,function(b,c){E=F[c]=[];p(b,function(b,c){E[c]=[r+b[0]/l,u-b[1]/v]})});return b}if(h instanceof g){b=new g(t);var H=b.rings,D;p(h.rings,function(b,c){D=H[c]=[];p(b,function(b,c){D[c]=[r+b[0]/l,u-b[1]/v]})});return b}}};f("extend-esri")&&p.mixin(p.getObject("geometry",!0,l),d);return d})},"esri/layers/GraphicsLayer":function(){define("esri/layers/GraphicsLayer","require dojo/_base/declare dojo/_base/Deferred dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/window dojo/dom-attr dojo/dom-construct dojo/dom-style dojo/dom dojox/gfx dojox/gfx/matrix ./gfxSniff!esri-svg?dojox/gfx/filters ./layer ./support/webglUtils ./support/WebGLSurface ../kernel ../lang ../sniff ../Color ../domUtils ../symbols/MarkerSymbol ../symbols/SimpleMarkerSymbol ../symbols/utils ../geometry/Point ../geometry/ScreenPoint ../geometry/Extent ../geometry/mathUtils ../geometry/screenUtils ../PluginTarget ./gfxSniff!esri-svg?dojox/gfx/svgext".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x,w,y,z,B,A,C,F,E,H,D,G,I,P,Q){var O=-1!==d.renderer.toLowerCase().indexOf("svg"),N=-1!==d.renderer.toLowerCase().indexOf("canvas"),M=N?"canvas-2d":d.renderer,J=9>z("ie");q=10===z("ie");var K=void 0===z("ie")&&7==z("trident"),U=q||K,R=z("esri-touch"),Y=!!z("chrome"),aa=t.isWebGLEnabled(),S=O&&z("esri-will-change"),ma=aa||N;t=p(null,{declaredClass:"esri.layers._GraphicsContainer",_setMap:function(b,g){var f,h=this._connects=[];this._map=b;this._useWillChange=
this._useGlobalTransform="css-transforms"===b.navigationMode&&S;ma?(f=e.create("div",{style:{position:"absolute",overflow:"visible"}},g),this._surface={getEventSource:function(){return f}},N&&(h.push(l.connect(f,"onmousedown",this,this._canvasDownHandler)),h.push(l.connect(f,"onmouseup",this,this._canvasUpHandler)),h.push(l.connect(f,"onclick",this,this._canvasClickHandler))),aa&&(this._webglSurface=new x({map:b,node:f}))):(f=(this._surface=d.createSurface(g,b.width,b.height)).getEventSource(),this._useWillChange&&
c.set(f,"will-change","transform"),c.set(f=J?f.parentNode:f,{overflow:"visible",position:"absolute"}));h.push(l.connect(b,"onResize",this,"_onResizeHandler"));this._useGlobalTransform&&(h.push(l.connect(b,"onPan",this,"_onPanHandler")),h.push(l.connect(b,"onPanEnd",this,"_onPanEndHandler")),h.push(l.connect(b,"onExtentChange",this,"_onExtentChangeHandler")));return f},_reorderLayer:function(b,c,d){c=c.getEventSource();ma&&"svg"===b.surfaceType&&(c=c.parentNode);e.place(c,this._surface.getEventSource(),
d)},_onPanHandler:function(b,d){var e=this._map.__visibleRect;b=e.x+d.x;d=e.y+d.y;this._panDx=b;this._panDy=d;ma||c.set(this._surface.getEventSource(),w._css.names.transform,w._css.translate(b,d))},_onPanEndHandler:function(b,d){d=this._map.__visibleRect;b=d.x;d=d.y;this._panDx=b;this._panDy=d;ma||c.set(this._surface.getEventSource(),w._css.names.transform,w._css.translate(b,d))},_onExtentChangeHandler:function(b,d,e,g){e&&(this._panDy=this._panDx=0,ma||c.set(this._surface.getEventSource(),w._css.names.transform,
w._css.translate(0,0)))},_getTransform:function(){return{dx:this._panDx||0,dy:this._panDy||0}},_onResizeHandler:function(b,d,e){b=this._surface.getEventSource();var f=this._map,k;J&&c.set(b=b.parentNode,{width:d+"px",height:e+"px",clip:"rect(0px "+d+"px "+e+"px 0px)"});g.set(b,"width",d);g.set(b,"height",e);this._surface.declaredClass||h.forEach(b.childNodes,function(b){g.set(b,"width",d);g.set(b,"height",e)});f.loaded&&(f.graphics.suspended||(f.graphics._resized=!0),h.forEach(f.graphicsLayerIds,
function(b){k=f.getLayer(b);k.suspended||(k._resized=!0,k._childLayer&&(k._childLayer._resized=!0));k._updateSVGFilters(null,null,d,e)}),f.graphics._updateSVGFilters(null,null,d,e),f._labels&&f._labels._updateSVGFilters(null,null,d,e))},_cleanUp:function(){h.forEach(this._connects,l.disconnect,l);this._map=this._surface=null},_processEvent:function(b){var c=this._map;b.screenPoint=new D(b.pageX-c.position.x,b.pageY-c.position.y);b.mapPoint=c.toMap(b.screenPoint)},_canvasDownHandler:function(b){this._processEvent(b);
this._downPt=b.screenPoint.x+","+b.screenPoint.y},_canvasUpHandler:function(b){this._processEvent(b);this._upPt=b.screenPoint.x+","+b.screenPoint.y},_tolerance:15,_isPrimaryMatch:function(b,c,d,e){if(!b.visible||!c)return!1;var g=c.getTransformedBoundingBox(),f;return g?(f=new G(g[0].x,g[0].y,g[2].x,g[2].y),delete f.spatialReference,R?f.intersects(d):f.contains(e)):h.some(c.children||[],function(b){g=b.getTransformedBoundingBox();f=new G(g[0].x,g[0].y,g[2].x,g[2].y);delete f.spatialReference;return R?
f.intersects(d):f.contains(e)})},_canvasClickHandler:function(b){if(this._downPt&&this._upPt&&this._downPt===this._upPt){this._processEvent(b);var c=this._map,d=h.map(c.graphicsLayerIds,function(b){return c.getLayer(b)});d.push(c.graphics);d.reverse();var d=h.filter(d,function(b){return b.loaded&&!b.hasWebGLSurface()&&b._mouseEvents&&!b.suspended&&(!y.isDefined(b.opacity)||0<b.opacity)}),e=b.screenPoint,g=this._tolerance,f=e.x-g,k=e.y+g,r=e.x+g,g=e.y-g,u=new G(f,g,r,k),f=c.toMap(new D(f,k)),r=c.toMap(new D(r,
g)),k=f.spatialReference._getInfo(),t=new G(G.prototype._normalizeX(f.x,k).x,f.y,G.prototype._normalizeX(r.x,k).x,r.y,f.spatialReference),q;delete u.spatialReference;h.some(d,function(b){b=h.filter(b.graphics,function(b){return this._isPrimaryMatch(b,b.getDojoShape(),u,e)||!(!b._bgShape||!this._isPrimaryMatch(b,b._bgShape,u,e))},this);b.reverse();if(0<b.length){var c;h.some(b,function(b){return b.geometry&&t.intersects(b.geometry)?(c=b,!0):!1});if(c)return q=c,!0}return!1},this);q&&(d=q.getLayer())&&
(b.graphic=q,d.onClick(b))}}});u=p(u,{declaredClass:"esri.layers._GraphicsLayer",managedSuspension:!0,surfaceType:M,webglEnabled:aa,renderer:null,_eventMap:{"graphic-add":["graphic"],"graphic-remove":["graphic"],"renderer-change":["renderer"]},_suspendGraphics:!1,constructor:function(b,c){b=b||{};if(k.isString(b)||k.isObject(b)&&(b.layerDefinition||b.query))b=c;this._params=k.mixin({displayOnPan:!0,drawMode:!0,styling:!0},b);c=this._params.dataAttributes;"string"===typeof c&&(c=[c]);this.styling=
O?this._params.styling:!0;this.dataAttributes=c;this.infoTemplate=b&&b.infoTemplate;this.graphics=[];this._draw=k.hitch(this,this._draw);this._refresh=k.hitch(this,this._refresh);this._acquireSVGMarker=k.hitch(this,this._acquireSVGMarker);this._evalSurfaceType=k.hitch(this,this._evalSurfaceType);this._setSurfaceType=k.hitch(this,this._setSurfaceType);this.setWebGLEnabled(null!=this._params.webglEnabled?this._params.webglEnabled:this.webglEnabled);this.registerConnectEvents()},getNode:function(){return this._div&&
this._div.getEventSource()},setDrawMode:function(b){this._params.drawMode=b},suspendGraphics:function(b){this._suspendGraphics=b;h.forEach(this.graphics,function(c){c._suspended=b})},setWebGLEnabled:function(b){var c=this.webglEnabled;this.webglEnabled=(b||!1)&&aa;c!==this.webglEnabled&&(this._evalSurfaceType(),this.onWebGLEnabledChange())},hasWebGLSurface:function(){return"webgl"===this.surfaceType},_getSurfaceType:function(b){return b&&"webgl"===b.surfaceType?"webgl":M},_evalSurfaceType:function(b){aa&&
(b?this._setSurfaceType():null==this._evalSurfaceTimerHandle&&(this._evalSurfaceTimerHandle=setTimeout(this._setSurfaceType,0)))},_hasPendingSurfaceEval:function(){return!!this._evalSurfaceTimerHandle},_setSurfaceType:function(){clearTimeout(this._evalSurfaceTimerHandle);this._evalSurfaceTimerHandle=null;var b=this._canUseWebGLSurface()?"webgl":M;this.surfaceType!==b?(this.surfaceType=b,this._handleSurfaceChange(),this.onSurfaceChange()):this._pendingRedraw&&this._redraw()},_handleSurfaceChange:function(){this._cancelWebGLDepsLoad();
this._webglDepsPromise=this._prepareToAttach(this._map);this._webglDepsPromise.always(k.hitch(this,function(b){this._webglDepsPromise=null;b&&"cancel"===b.dojoType||this._evalSurface()}))},_cancelWebGLDepsLoad:function(){this._webglDepsPromise&&!this._webglDepsPromise.isFulfilled()&&this._webglDepsPromise.cancel();this._webglDepsPromise=null},_evalSurface:function(){var b=this._map,c=this._div;b&&c&&this._getSurfaceType(c)!==this.surfaceType&&(b._detachGraphicsLayer(this),b._attachGraphicsLayer(this))},
_canUseWebGLSurface:function(b){b=b||this._map;return this.webglEnabled&&(!b||b.webglEnabled&&(b.ownsWebGLContext(this)||b.isWebGLContextAvailable()))&&this._params.drawMode&&this._isWebGLCompatible()},_isWebGLCompatible:function(){return!1},_prepareToAttach:function(b){var c=new f;!this.webglDeps&&this._canUseWebGLSurface(b)?m(["./support/webglDeps"],k.hitch(this,function(b){this.webglDeps=b;c.isFulfilled()||c.resolve()})):c.resolve();return c.promise},_setMap:function(b,e){this.inherited(arguments);
this._map=b;this._evalSurfaceType(!0);this._webglChangeMapHandle=b.on("webgl-enabled-change",k.hitch(this,function(){this._evalSurfaceType()}));this._wrap=b.wrapAround180;this._srInfo=b.spatialReference._getInfo();this._svgFilters={};this._lineMarkers={};if(this.hasWebGLSurface())b.acquireWebGLContext(this),this._div=b._gc._webglSurface.createRenderer(this.webglDeps.WebGLRenderer,b.width,b.height,this);else{if("svg"===this.surfaceType)if(ma){e=d.createSurface(e.getEventSource(),b.width,b.height);
var g=e.getEventSource();c.set(g,{position:"absolute",overflow:"visible",pointerEvents:"none"});b._gc._useWillChange&&c.set(g,"will-change","transform");this._div=e.createGroup();c.set(this._div.getEventSource(),"pointer-events","auto")}else this._div=e.createGroup();else e=d.createSurface(e.getEventSource(),b.width,b.height),c.set(e.rawNode,"position","absolute"),this._div=e.createGroup(),this._renderProto=this._div.constructor.prototype._render,this._div._render=k.hitch(this,this._canvasRender);
this._bgGroup=this._div.createGroup()}this._div.getEventSource().id=this.id+"_layer";this._initOpacity();return this._div},_unsetMap:function(b,c){b.releaseWebGLContext(this);"webgl"===this._div.surfaceType?b._gc._webglSurface.destroyRenderer(this._div):(h.forEach(this.graphics,function(b){b._shape=null}),"svg"===this.surfaceType?ma?(c=this._div.parent,this._div.clear(),c.remove(this._div),e.destroy(this._div.getEventSource()),e.destroy(c.getEventSource())):(this._div.clear(),c.remove(this._div),
e.destroy(this._div.getEventSource())):(c=this._div.getParent(),c._parent={},e.destroy(c.rawNode),c.destroy()));this._map=this._div=this._svgFilters=this._lineMarkers=null;this._pendingRedraw=!1;clearTimeout(this._wakeTimer);this._wakeTimer=null;clearTimeout(this._evalSurfaceTimerHandle);this._evalSurfaceTimerHandle=null;this._webglChangeMapHandle&&this._webglChangeMapHandle.remove();this._cancelWebGLDepsLoad();this._disableDrawConnectors();this.inherited(arguments)},_initOpacity:function(){var b=
this.opacity;y.isDefined(b)&&1>b&&this.setOpacity(b,!0)},_onZoomStartHandler:function(){this.hasWebGLSurface()||A.hide(this._div.getEventSource())},_onExtentChangeHandler:function(b,c,d,e){clearTimeout(this._wakeTimer);this._wakeTimer=null;d?(b=this._map.__visibleRect,c=this._div,this._evalSDRenderer(),this._refresh(!0),this._params._child||this._updateTransform(c,b.x,b.y,!0),this._renderProto&&c.surface.pendingRender?this._dirty=!0:this.suspended||A.show(c.getEventSource())):this._resized&&(this._resized=
!1,this._refresh(!1));if(0<this.graphics.length)this.onUpdate()},_canvasRender:function(){var b=this._div;this._dirty&&(delete this._dirty,this.suspended||A.show(b.getEventSource()));return this._renderProto.apply(b,arguments)},_refresh:function(b){if(!this.hasWebGLSurface()){var c=this.graphics,d=c.length,e,g=this._draw;for(e=0;e<d;e++)g(c[e],b)}},refresh:function(){this._refresh(!0)},_redraw:function(){this._pendingRedraw=!1;this.hasWebGLSurface()?this._div&&this._div.redraw():this._refresh(!0)},
redraw:function(){this._hasPendingSurfaceEval()?this._pendingRedraw=!0:this._redraw()},hasLocalNavigationTransform:function(){return!(this._map&&this._map._gc._useGlobalTransform)},getNavigationTransform:function(){var b={dx:0,dy:0};this._map&&(this.hasLocalNavigationTransform()?this._div&&!this.hasWebGLSurface()&&(b=this._div.getTransform()):b=this._map._gc._getTransform());return b},_onPanHandler:function(b,c){this._panDx=c.x;this._panDy=c.y;b=this._map.__visibleRect;this._updateTransform(this._div,
b.x+c.x,b.y+c.y);K&&this._updateSVGMarkers()},_onPanEndUpdateHandler:function(b,c){b=this._map.__visibleRect;this._params._child||c.x===this._panDx&&c.y===this._panDy?(this._updateSVGFilters(-b.x,-b.y),this._updateSVGMarkers()):this._updateTransform(this._div,b.x,b.y,!0);this._refresh(!1);if(this.graphics.length)this.onUpdate()},_onPanStartHandler:function(){A.hide(this._div.getEventSource())},_onPanEndHandler:function(){var b=this._map.__visibleRect,c=this._div;this._updateTransform(c,b.x,b.y,!0);
this._refresh(!1);this._renderProto&&c.surface.pendingRender?this._dirty=!0:A.show(c.getEventSource());if(this.graphics.length)this.onUpdate()},_updateTransform:function(b,d,e,g){this.hasWebGLSurface()||(this.hasLocalNavigationTransform()?b.setTransform(r.translate({x:d,y:e})):ma&&c.set(this._div.parent.getEventSource(),w._css.names.transform,w._css.translate(d,e)),g&&(this._updateSVGFilters(-d,-e),this._updateSVGMarkers()))},onSuspend:function(){this.inherited(arguments);A.hide(this._div.getEventSource());
clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors()},onResume:function(b){this.inherited(arguments);b.firstOccurrence&&this._evalSDRenderer();this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(k.hitch(this,function(){this.suspended||this._map.__zooming||this._onExtentChangeHandler(null,null,!0)}),0)},_enableDrawConnectors:function(){var b=this._map,c=l.connect;this._disableDrawConnectors();this._params.displayOnPan?(this._params._child||(this._onPanHandler_connect=
c(b,"onPan",this,"_onPanHandler")),this._onPanEndHandler_connect=c(b,"onPanEnd",this,"_onPanEndUpdateHandler")):(this._onPanStartHandler_connect=c(b,"onPanStart",this,"_onPanStartHandler"),this._onPanEndHandler_connect=c(b,"onPanEnd",this,"_onPanEndHandler"));this._onZoomStartHandler_connect=c(b,"onZoomStart",this,"_onZoomStartHandler");this._onExtentChangeHandler_connect=c(b,"onExtentChange",this,"_onExtentChangeHandler")},_disableDrawConnectors:function(){var b=l.disconnect;b(this._onExtentChangeHandler_connect);
b(this._onZoomStartHandler_connect);b(this._onPanHandler_connect);b(this._onPanStartHandler_connect);b(this._onPanEndHandler_connect);this._onExtentChangeHandler_connect=this._onZoomStartHandler_connect=this._onPanHandler_connect=this._onPanStartHandler_connect=this._onPanEndHandler_connect=null},_updateExtent:function(b){var c=b.geometry;if(!c)b._extent=null;else if(!(b._extent=c.getExtent())){var d,e;if("esri.geometry.Point"===c.declaredClass)d=c.x,e=c.y;else if("esri.geometry.Multipoint"===c.declaredClass)d=
c.points[0][0],e=c.points[0][1];else{b._extent=null;return}b._extent=new G(d,e,d,e,c.spatialReference)}},_intersects:function(b,c,d){var e=b.spatialReference,g=c.spatialReference,f=e&&g&&!e.equals(g)&&e._canProject(g)&&4326===g.wkid;if(this._wrap&&!d){d=[];var e=b._getFrameWidth(),k=this._srInfo,r=b._clip?b._getAvailExtent():b.extent,u,t,q,l,v=[];u=c._partwise;f&&(r=b.geographicExtent,k=g._getInfo());b=r._getParts(k);if(u&&u.length)for(c=[],g=0,f=u.length;g<f;g++)c=c.concat(u[g]._getParts(k));else c=
c._getParts(k);g=0;for(f=c.length;g<f;g++)for(q=c[g],k=0,r=b.length;k<r;k++)if(l=b[k],l.extent.intersects(q.extent))for(u=0,t=q.frameIds.length;u<t;u++)d.push((l.frameIds[0]-q.frameIds[u])*e);g=0;for(f=d.length;g<f;g++)u=d[g],h.indexOf(d,u)===g&&v.push(u);return v.length?v:null}return(f?b.geographicExtent:b.extent).intersects(c)?[0]:null},_defaultMarker:{type:"simplemarkersymbol",style:"square",size:1,xoffset:0,yoffset:0,angle:0},_draw:function(b,c){if(!this.hasWebGLSurface()&&this._params.drawMode&&
this._map&&!this.suspended&&!this._map.__zooming&&!this._resized)try{var d=b._extent,e,g,f=!O||this.styling,h=O&&this.dataAttributes,k=b.getDojoShape(),r;if(!b._suspended&&b.visible&&d&&(e=this._intersects(this._map,d,b.geometry._originOnly))&&(g=f?this._getSymbol(b):this._defaultMarker)){if(b._offsets&&b._offsets.join(",")===e.join(",")?r=!0:b._offsets=e,!k||c||!r){var u=b.geometry.type;c={graphic:b};var t=b._bgShape,q=f&&!b.symbol?this._getRenderer(b):null,l=q&&q.backgroundFillSymbol;if("point"===
u)this._isInvalidShape(g,k)&&this._removeShape(b),b._shape=this._drawPoint(this._div,b.geometry,g,b.getDojoShape(),e,q,b),f&&this._symbolizePoint(b.getDojoShape(),g,q,b);else if("multipoint"===u)this._drawMarkers(b,g,e,q),f&&this._symbolizeMarkers(b,g,q);else{var v,u=g,m,x,p;f&&(u=(v="simplemarkersymbol"===g.type||"picturemarkersymbol"===g.type||"textsymbol"===g.type?g:null)?l:g);f&&u&&-1<u.type.indexOf("fillsymbol")&&(m=this._bgGroup,p=!(!m||!v));t&&!p&&this._removeBgShape(b);if(u){!p&&(this._isInvalidShape(u,
b._shape)||b._shape&&b._shape._isCentroidMarker)&&this._removeShape(b,!1);if(x=this._drawShape(b,e,m||this._div,p?t:b.getDojoShape()))x._isCentroidMarker=!1;f&&this._symbolizeShape(x,u,q,u===l,b);b[p?"_bgShape":"_shape"]=x}if(v){(this._isInvalidShape(v,b._shape)||b._shape&&!b._shape._isCentroidMarker)&&this._removeShape(b,!1);var C=b.geometry.getCentroid();if(x=C&&this._drawPoint(this._div,C,v,b._shape,e,q,b))x._isCentroidMarker=!0,this._symbolizePoint(x,v,q,b);b._shape=x}}N||(b._bgShape&&this._initNode(b,
b._bgShape,b._bgShape!==t,c,h),b._shape&&this._initNode(b,b._shape,b._shape!==k,c,h));b._applyDataAttrs();c.node=b.getNode();this.onGraphicDraw(c)}}else k&&this._removeShape(b)}catch(Ja){this._errorHandler(Ja,b)}},_initNode:function(b,c,d,e,g){if(c=c&&c.getNode())c.e_graphic=b,this._addDataAttrs(b,g,c),d&&(e.node=c,this.onGraphicNodeAdd(e))},_removeShape:function(b,c,d){var e=b.getDojoShape(),g=e&&e.getNode();e&&!d&&(e.removeShape(),e.destroy());b._shape=b._offsets=null;!1!==c&&this._removeBgShape(b,
d);if(g&&(g.e_graphic=null,!N))this.onGraphicNodeRemove({graphic:b,node:g})},_removeBgShape:function(b,c){var d=b._bgShape,e=d&&d.getNode();d&&!c&&(d.removeShape(),d.destroy());b._bgShape=null;if(e&&(e.e_graphic=null,!N))this.onGraphicNodeRemove({graphic:b,node:e})},_addDataAttrs:function(b,c,d){var e=b.attributes,g,f=c?c.length:0,h=this._getRenderer(b);if(d&&e){for(g=0;g<f;g++)(d=c[g])&&b.attr("data-"+d,e[d]);!this.styling&&h&&(h.getBreakIndex?(c=h.getBreakIndex(b),b.attr("data-class-break",-1!==
c?c:null)):h.getUniqueValueInfo&&(c=h.getUniqueValueInfo(b),b.attr("data-unique-value",c?c.value:null)))}},_drawShape:function(b,c,d,e){b=b.geometry;var g=b.type,f=this._map,h=f.extent,k=f.width,r=f.height,f=f.__visibleRect,u=[],t,q;t="extent"===g;if("rect"===g||t)u={x:0,y:0,spatialReference:b.spatialReference},u.x=t?b.xmin:b.x,u.y=t?b.ymax:b.y,g=P.toScreenPoint(h,k,r,u),u.x=t?b.xmax:b.x+b.width,u.y=t?b.ymin:b.y+b.height,b=P.toScreenPoint(h,k,r,u),c={x:g.x-f.x+c[0],y:g.y-f.y,width:Math.abs(b.x-g.x),
height:Math.abs(b.y-g.y)},0===c.width&&(c.width=1),0===c.height&&(c.height=1),e=this._drawRect(d,e,c);else if("polyline"===g||"polygon"===g){t=0;for(q=c.length;t<q;t++)u=u.concat(P._toScreenPath(h,k,r,b,-f.x+c[t],-f.y));e=this._drawPath(d,e,u);this._rendererLimits&&("polyline"===g?this._clipPolyline(e,b):this._clipPolygon(e,b))}return e},_drawRect:function(b,c,d){return c?c.setShape(d):b.createRect(d)},_drawImage:function(b,c,d){return c?c.setShape(d):b.createImage(d)},_drawCircle:function(b,c,d){return c?
c.setShape(d):b.createCircle(d)},_drawPath:function(){return J?function(b,c,e,g){e=g?e:e.join(" ");if(c)return c.setShape(e);c=b.createObject(g?d.Path:d.EsriPath,e);b._overrideSize(c.getEventSource());return c}:function(b,c,d,e){d=e?d:d.join(" ");return c?c.setShape(d):b.createPath(d)}}(),_drawText:function(b,c,d){return c?c.setShape(d):b.createText(d)},_evalSDRenderer:function(b){var c=this._map,d=this.renderer,e,g=this._rndForScale;c&&c.loaded&&d&&d.getRendererInfo&&(e="zoom"===d.rangeType?d.getRendererInfoByZoom(c.getZoom()):
d.getRendererInfoByScale(c.getScale()));this._rndForScale=e&&e.renderer;b||this._rndForScale==g||this.emit("renderer-change",{renderer:this._rndForScale})},_getRenderer:function(b){var c=this._rndForScale||this.renderer;b&&c&&c.getObservationRenderer&&(c=c.getObservationRenderer(b));return c},_getSymbol:function(b){var c=this._getRenderer();return b.symbol||c&&c.getSymbol(b)},_getVariable:function(b,c,d){var e;b&&(e=(b=b.getVisualVariablesForType(c,d))&&b[0]);return e},_applyOpacity:function(b,c,
d,e){c=c.getOpacity(e,{opacityInfo:d});null!=c&&(b=new B(b),b.a=c);return b},_symbolizeShape:function(b,c,d,e,g){var f=c.getStroke(),h=c.getFill(),r=c.type,u,t,q=-1!==r.indexOf("linesymbol"),l=-1!==r.indexOf("fillsymbol")?null:this._getVariable(d,"sizeInfo",!1),v=this._getVariable(d,"colorInfo",!1),m=this._getVariable(d,"opacityInfo",!1),x=q?"none"!==c.style:c.outline&&"none"!==c.outline.style,p=q?null:this._getVariable(d,"sizeInfo","outline"),l=(l=e?p:p||l)?d.getSize(g,{sizeInfo:l,resolution:this._map.getResolutionInMeters(),
scale:this._map.getScale()}):null;e&&(v=m=null);(v||m)&&"picturefillsymbol"!==r&&(q?(u=f&&f.color,v&&(u=d.getColor(g,{colorInfo:v})||u),u&&m&&(u=this._applyOpacity(u,d,m,g))):h&&h.toCss&&(t=h,v&&(t=d.getColor(g,{colorInfo:v})||t),t&&m&&(t=this._applyOpacity(t,d,m,g))));b.setStroke(!x||null==l&&!u?f:k.mixin({},f,null!=l?{width:l}:null,u&&{color:u})).setFill(t||h);q&&E.applyLineMarker(b,c,u,this._acquireSVGMarker)},_smsToPath:function(){return J?function(b,c,d,e,g,f,h,k,r){switch(c){case b.STYLE_SQUARE:return["M",
g+","+h,"L",f+","+h,f+","+k,g+","+k,"X","E"];case b.STYLE_CROSS:return["M",d+","+h,"L",d+","+k,"M",g+","+e,"L",f+","+e,"E"];case b.STYLE_X:return["M",g+","+h,"L",f+","+k,"M",g+","+k,"L",f+","+h,"E"];case b.STYLE_DIAMOND:return["M",d+","+h,"L",f+","+e,d+","+k,g+","+e,"X","E"];case b.STYLE_TARGET:return["M",g+","+h,"L",f+","+h,f+","+k,g+","+k,g+","+h,"M",g-r+","+e,"L",g+","+e,"M",d+","+(h-r),"L",d+","+h,"M",f+r+","+e,"L",f+","+e,"M",d+","+(k+r),"L",d+","+k,"E"]}}:function(b,c,d,e,g,f,h,k,r){switch(c){case b.STYLE_SQUARE:return["M",
g+","+h,f+","+h,f+","+k,g+","+k,"Z"];case b.STYLE_TRIANGLE:return["M",d+","+h,f+","+k,g+","+k,"Z"];case b.STYLE_CROSS:return["M",d+","+h,d+","+k,"M",g+","+e,f+","+e];case b.STYLE_X:return["M",g+","+h,f+","+k,"M",g+","+k,f+","+h];case b.STYLE_DIAMOND:return["M",d+","+h,f+","+e,d+","+k,g+","+e,"Z"];case b.STYLE_TARGET:return b=["M",g+","+h,f+","+h,f+","+k,g+","+k,g+","+h],r&&b.push("M",g-r+","+e,g+","+e,"M",d+","+(h-r),d+","+h,"M",f+r+","+e,f+","+e,"M",d+","+(k+r),d+","+k),b}}}(),_pathStyles:{square:1,
cross:1,x:1,diamond:1,target:1},_typeMaps:{picturemarkersymbol:"image",picturefillsymbol:"path",simplefillsymbol:"path",simplelinesymbol:"path",cartographiclinesymbol:"path",textsymbol:"text"},_isInvalidShape:function(b,c){c=c&&c.shape&&c.shape.type;var d=b&&b.type;b=b&&b.style;"rect"===c&&(c="path");d&&(b=this._typeMaps[d]||b);this._pathStyles[b]&&(b="path");return"shieldlabelsymbol"===d?!0:!(!c||!b||c===b)},_reArialFont:/\s*(^|,)\s*arial\s*(,|$)\s*/i,_fallbackFont:"Arial",_drawPoint:function(b,
c,d,e,g,f,h){var k=d.type,u=this._map,t=u.__visibleRect,q=P.toScreenPoint(u.extent,u.width,u.height,c).offset(-t.x+g[0],-t.y),t=q.x,l=q.y,v;c=[];var m,x=this._getVariable(f,"rotationInfo",!1),x=x?f.getRotationAngle(h,{rotationInfo:x}):null,p=this._getVariable(f,"sizeInfo",!1),u=null!=h.size?h.size:p&&f.getSize(h,{sizeInfo:p,shape:d.style,resolution:u.getResolutionInMeters(),scale:u.getScale()});x&&c.push(r.rotategAt(x,q));if(0!==d.xoffset||0!==d.yoffset)m=r.translate(d.xoffset,-d.yoffset),c.push(m);
0!==d.angle&&c.push(r.rotategAt(d.angle,q));if("simplemarkersymbol"===k)switch(v=d.style,f=Math.round,null!=u?m&&(null!=m.dx&&(m.dx=m.dx/d.size*u),null!=m.dy&&(m.dy=m.dy/d.size*u)):u=d.size,v){case F.STYLE_SQUARE:case F.STYLE_TRIANGLE:case F.STYLE_CROSS:case F.STYLE_X:case F.STYLE_DIAMOND:d=isNaN(u)?16:u/2;v=this._drawPath(b,e,this._smsToPath(F,v,t,l,f(t-d),f(t+d),f(l-d),f(l+d)));break;case F.STYLE_TARGET:h=d._targetWidth/2;m=d._targetHeight/2;v=this._drawPath(b,e,this._smsToPath(F,v,t,l,f(t-h),f(t+
h),f(l-m),f(l+m),d._spikeSize));break;case F.STYLE_PATH:v=this._drawPath(b,e,d.path,!0);d=v.getBoundingBox();b=this._getScaleMatrix(d,u);1===b.xx&&1===b.yy||c.push(r.scaleAt(b.xx,b.yy,q));c.push(r.translate(-(d.x+d.width/2)+t,-(d.y+d.height/2)+l));break;default:d=isNaN(u)?16:u/2,v=this._drawCircle(b,e,{cx:t,cy:l,r:d})}else if("shieldlabelsymbol"===k)v=d.width,q=d.height,e=b.createGroup(),v=b.createImage({x:t-v/2,y:l-q/2,width:v,height:q,src:d.url}),e.add(v),null!=d.font&&(l+=.2*d.getHeight(),b=b.createText({type:"text",
text:d.text,x:t,y:l,align:"middle",decoration:d.decoration,rotated:d.rotated,kerning:d.kerning}),b.setFont(d.font),b.setFill(d.color),e.add(b)),v=e;else if("picturemarkersymbol"===k){if(null==u?(v=d.width,q=d.height):(q=u,v=d.width/d.height*q,m&&(null!=m.dx&&(m.dx=m.dx/d.width*v),null!=m.dy&&(m.dy=m.dy/d.height*q))),v=this._drawImage(b,e,{x:t-v/2,y:l-q/2,width:v,height:q,src:d.url}),O&&(b=v.getNode()))d=(d=this._getVariable(f,"opacityInfo",!1))?f.getOpacity(h,{opacityInfo:d}):null,null!=d?b.setAttribute("opacity",
d):b.setAttribute("opacity",1)}else if("textsymbol"===k){if(f=d.font){v=null!=u;h=f.family&&!this._reArialFont.test(f.family);if(v||h||N)f=new f.constructor(f.toJson());v&&f.setSize(u);N&&(f.size+="px");h&&f.setFamily(f.family+","+this._fallbackFont)}v=this._drawText(b,e,{type:"text",text:d.text,x:t,y:l,align:d.getSVGAlign(),decoration:d.decoration||f&&f.decoration,rotated:d.rotated,kerning:d.kerning});f&&v.setFont(f);O&&(b=v.getNode(),t=d.getSVGBaseline(),l=d.getSVGBaselineShift(),b&&(b.setAttribute("dominant-baseline",
t),l&&b.setAttribute("baseline-shift",l),this._applyHalo(v,d.haloColor,d.haloSize)))}v.setTransform(r.multiply(c));v._wrapOffsets=g;return v},_acquireSVGMarker:function(b,c,d,e){b=this._getSVGMarkerId(c,e);var g=this._getSVGMarker(b);g||(g=E.createSVGMarker(c,b,d,e),this._div.getParent().defNode.appendChild(g),this._lineMarkers[b]=g);return g},_getSVGMarkerId:function(b,c){return"marker_"+this._map.id+"_"+b.r+"_"+b.g+"_"+b.b+"_"+c},_getSVGMarker:function(b){return this._lineMarkers[b]},_updateSVGMarkers:function(){if(O&&
U){var b=this._lineMarkers,c;for(c in b){var d=b[c];d.setAttribute("id",c+"_temp");d.setAttribute("id",c)}}},_applyHalo:function(b,c,d){var e=c&&d?this._getHaloId(c,d):null;b.setFilter(c&&d?z("webkit")||z("ff")?this._getDilateFilter(c,d,e):this._getOffsetFilter(c,d,e):null)},_getDilateFilter:function(b,c,d){var e=this._getSVGFilter(d);e||(e=this._createSVGFilter({id:d},[v.feMorphology({operator:"dilate",radius:c,result:"dilated"}),v.feFlood({"flood-color":b.toCss(!0)}),v.feComposite({in2:"dilated",
operator:"in",result:"composite"}),v.feMerge("composite","SourceGraphic")]));return e},_getOffsetFilter:function(b,c,d){var e=this._getSVGFilter(d);if(!e){b=b.toCss(!0);var e=this._offsetPrimitives,g,f=e.length,h=[],k=[];for(g=0;g<f;g++){var r=e[g],u="offset"+r.dir,t="composite"+r.dir;k.push(t);h.push(v.feOffset({dx:r.dx*c,dy:r.dy*c,"in":"SourceAlpha",result:u}),v.feFlood({"flood-color":b}),v.feComposite({in2:u,operator:"in",result:t}))}k.push("SourceGraphic");h.push(v.feMerge.apply(v.feMerge,k));
e=this._createSVGFilter({id:d},h)}return e},_offsetPrimitives:[{dir:"L",dx:-1,dy:0},{dir:"TL",dx:-1,dy:-1},{dir:"T",dx:0,dy:-1},{dir:"TR",dx:1,dy:-1},{dir:"R",dx:1,dy:0},{dir:"BR",dx:1,dy:1},{dir:"B",dx:0,dy:1},{dir:"BL",dx:-1,dy:1}],_getHaloId:function(b,c){return"halo_"+this._map.id+"_"+this.id+"_"+b.r+"_"+b.g+"_"+b.b+"_"+b.a+"_"+c},_getSVGFilter:function(b){return this._svgFilters[b]},_createSVGFilter:function(b,c){c=v.createFilter(b,c);var d=this._map,e=d.__visibleRect;c.x=-e.x;c.y=-e.y;c.width=
d.width;c.height=d.height;return this._svgFilters[b.id]=c},_updateSVGFilters:function(c,d,e,g){var f=this._svgFilters,h,k,r;for(k in f)if(h=f[k]){if(r=b.byId(k))null!=c&&r.setAttribute("x",c),null!=d&&r.setAttribute("y",d),null!=e&&r.setAttribute("width",e),null!=g&&r.setAttribute("height",g);null!=c&&(h.x=c);null!=d&&(h.y=d);null!=e&&(h.width=e);null!=g&&(h.height=g)}},_getScaleMatrix:function(b,c){var d=b.width/b.height,e=1,g=1;isNaN(c)||(1<d?(e=c/b.width,g=c/d/b.height):(g=c/b.height,e=c*d/b.width));
return{xx:e,yy:g}},_symbolizePoint:function(b,c,d,e){var g=c.type,f=c.style;if("shieldlabelsymbol"!==g&&"picturemarkersymbol"!==g){var h=c.getStroke();c=c.getFill();var f=f===F.STYLE_X||f===F.STYLE_CROSS,r=h&&h.color,u=f?r:c;if(d){var t=this._getVariable(d,"colorInfo",!1),q=this._getVariable(d,"opacityInfo",!1);t&&(u=d.getColor(e,{colorInfo:t})||u);u&&q&&(u=this._applyOpacity(u,d,q,e));u&&(f?u!==r&&(h=h?k.mixin({},h):{},h.color=u):u!==c&&(c=u))}"textsymbol"===g?b.setFill(c):"simplemarkersymbol"===
g&&b.setFill(c).setStroke(h)}},_drawMarkers:function(b,c,d,e){var g=b.geometry,f=g.points,h=b.getDojoShape()||this._div.createGroup(),k,r,u=f.length,t=[],q=0,l,v=d?d.length:0;h.children[0]&&this._isInvalidShape(c,h.children[0])&&h.clear();for(r=0;r<u;r++)for(k=f[r],l=0;l<v;l++)t[0]=d[l],this._drawPoint(h,{x:k[0],y:k[1],spatialReference:g.spatialReference},c,h.children[q++],t,e,b);c=h.children.length;if(u*d.length<c)for(r=c-1;r>=u*d.length;r--)h.children[r].removeShape();b._shape=h},_symbolizeMarkers:function(b,
c,d){var e=b.getDojoShape().children,g,f=e.length;for(g=0;g<f;g++)this._symbolizePoint(e[g],c,d,b)},_errorHandler:function(b,c){c&&(b.message="Unable to draw graphic (geometry:"+(c.geometry?c.geometry.declaredClass:null)+", symbol:"+(c.symbol?c.symbol.declaredClass:null)+"): "+b.message);this.inherited(arguments)},_rendererLimits:function(){var b,c,d;J?(b=1E5,c=-1E5,d=1E5):z("chrome")&&6>z("chrome")&&(b=8150,c=-1E4,d=1E4);if(b)return{clipLimit:b,rangeMin:c,rangeMax:d,clipBBox:[-b,-b,b,b],clipSegments:[[[-b,
-b],[b,-b]],[[b,-b],[b,b]],[[b,b],[-b,b]],[[-b,b],[-b,-b]]]}}(),_clipPolyline:function(b,c){c=this._getCorners(b,c);var d=c.br,e=this._rendererLimits,g=e.rangeMin,f=e.rangeMax,k=e.clipBBox,r=e.clipSegments,e=this._isPointWithinRange,u=this._isPointWithinBBox,t=this._getClipperIntersection,q=this._getPlaneIndex;if(!e(c.tl,g,f)||!e(d,g,f)){J&&this._createSegments(b);var l=[];h.forEach(b.segments,function(b){b=b.args;var c=b.length,d=[],e;for(e=0;e<c;e+=2){var g=[b[e],b[e+1]],f=[b[e+2],b[e+3]],h=u(g,
k),v=u(f,k);if(h^v){if(v=t([g,f],r))h?(e?d.push(v[1]):d.push(g,v[1]),l.push(d),d=[]):d.push(v[1],f)}else h?e?d.push(f):d.push(g,f):(v=q(g,k),h=q(f,k),-1!==v&&-1!==h&&v!==h&&(g=t([g,f],r,!0),0<g.length&&(g[v]||(v=g[v[0]]?v[0]:v[1]),g[h]||(h=g[h[0]]?h[0]:h[1]),f=g[v],g=g[h],f&&d.push(f),g&&(d.push(g),l.push(d),d=[]))))}l.push(d)});b.setShape(this._getPathStringFromPaths(l))}},_clipPolygon:function(b,c){c=this._getCorners(b,c);var d=c.br,e=this._rendererLimits,g=e.clipLimit,f=e.rangeMin,r=e.rangeMax,
u=e.clipBBox,t=e.clipSegments,e=this._isPointWithinRange,q=this._isPointWithinBBox,l=this._getClipperIntersection,v=this._getPlaneIndex,m=I._pointLineDistance;e(c.tl,f,r)&&e(d,f,r)||(J&&this._createSegments(b),c=h.filter(b.segments,function(b){return b.args&&b.args.length}),c=h.map(c,function(b){var c=b.args,d=c.length,e=[];b=[];var f;for(f=0;f<d;f+=2){var r=[c[f],c[f+1]],x=[c[f+2],c[f+3]];if(f===d-2){e.push(r);break}var p=q(r,u),C=q(x,u);e.push(r);if(p^C){if(C=l([r,x],t))r=C[1],r[p?"inOut":"outIn"]=
!0,e.push(r),b.push([p?"INOUT":"OUTIN",e.length-1,C[0]])}else if(!p){var p=v(r,u),w=v(x,u);-1!==p&&-1!==w&&p!==w&&(C=l([r,x],t,!0),0<C.length?(C[p]||(p=C[p[0]]?p[0]:p[1]),C[w]||(w=C[w[0]]?w[0]:w[1]),r=C[p],x=C[w],r&&(r.outIn=!0,e.push(r),b.push(["OUTIN",e.length-1,p])),x&&(x.inOut=!0,e.push(x),b.push(["INOUT",e.length-1,w]))):k.isArray(p)&&k.isArray(w)&&(C=p.concat(w),C.sort(),"0123"===C.join("")&&(C=[],3===p[0]+p[1]?C.push([g,-g],[-g,g]):C.push([-g,-g],[g,g]),p=m(C[0],[r,x]),r=m(C[1],[r,x]),e.push(p<
r?C[0]:C[1]))))}}var B=u[0],A=u[1],y=u[2],G=u[3];h.forEach(e,function(b){b[0]<B&&(b[1]>=A&&b[1]<=G?b[0]=B:(b[0]=B,b[1]=b[1]<A?A:G))});h.forEach(e,function(b){b[1]<A&&(b[0]>=B&&b[0]<=y?b[1]=A:(b[1]=A,b[0]=b[0]<B?B:y))});h.forEach(e,function(b){b[0]>y&&(b[1]>=A&&b[1]<=G?b[0]=y:(b[0]=y,b[1]=b[1]<A?A:G))});h.forEach(e,function(b){b[1]>G&&(b[0]>=B&&b[0]<=y?b[1]=G:(b[1]=G,b[0]=b[0]<B?B:y))});c=0;d=b.length;if(0<d){do{x=b[c];f=b[(c+1)%d];if(x[2]===f[2]&&"INOUT"===x[0]&&"OUTIN"===f[0])if(r=x[1],f=f[1],r<
f)for(r+=1;r<f;r++)e[r][2]=!0;else if(r>f){for(r+=1;r<e.length;r++)e[r][2]=!0;for(r=0;r<f;r++)e[r][2]=!0}c=(c+1)%d}while(0!==c)}d=e[0];c=e[e.length-1];d[2]&&(c[2]=!0,h.some(b,function(b){return 1===b[1]?(e.splice(e.length-1,0,k.clone(e[1])),!0):!1}));e=h.filter(e,function(b){return b[2]?!1:!0});for(c=0;c<e.length-1;c++)d=e[c],(f=e[c+1])&&d[0]===f[0]&&d[1]===f[1]&&(f.outIn?d.outIn=!0:f.inOut&&(d.inOut=!0),e.splice(c+1,1));d=Math.abs;b=[];for(c=0;c<e.length-1;c++){x=e[c];r=x[0];x=x[1];p=d(r)===g;C=
d(x)===g;f=e[c+1];w=f[0];f=f[1];var E=d(w)===g,F=d(f)===g;p&&F?b.push([c+1,[r,f]]):C&&E&&b.push([c+1,[w,x]])}for(c=b.length-1;0<=c;c--)f=b[c],r=e[f[0]-1],d=e[f[0]],r.outIn||r.inOut||d.outIn||d.inOut||e.splice(f[0],0,f[1]);d=e[0];c=e[e.length-1];d[0]===c[0]&&d[1]===c[1]||e.push(d);return e}),b.setShape(this._getPathStringFromPaths(c)))},_getCorners:function(b,c){if(J){b=this._map;var d=c.getExtent(),e=d.spatialReference;c=b.toScreen(new H(d.xmin,d.ymax,e));b=b.toScreen(new H(d.xmax,d.ymin,e));return{tl:c,
br:b}}b=b.getTransformedBoundingBox();return{tl:b[0],br:b[2]}},_createSegments:function(b){b.shape.path=b.vmlPath;b.segmented=!1;b._confirmSegmented();var c=b.segments;1<c.length&&(b.segments=h.filter(c,function(b,c,d){c=d[c+1];return"M"===b.action&&c&&"L"===c.action?(b.args=b.args.concat(c.args),!0):!1}))},_getPathStringFromPaths:function(b){J?(b=h.map(b,function(b){return"m "+h.map(b,function(b,c){return(1===c?"l ":"")+b.join(",")}).join(" ")}),b.push("e")):b=h.map(b,function(b){return"M "+h.map(b,
function(b){return b.join(",")}).join(" ")});return b.join(" ")},_isPointWithinBBox:function(b,c){var d=c[1],e=c[2],g=c[3],f=b[0];b=b[1];return f>c[0]&&f<e&&b>d&&b<g?!0:!1},_isPointWithinRange:function(b,c,d){var e=b.x;b=b.y;return e<c||b<c||e>d||b>d?!1:!0},_getClipperIntersection:function(b,c,d){var e,g=I._getLineIntersection2,f=Math.round,h={length:0};for(e=0;4>e;e++){var k=g(b,c[e]);if(k)if(k[0]=f(k[0]),k[1]=f(k[1]),d)h[e]=k,h.length++;else return[e,k]}return d?h:null},_getPlaneIndex:function(b,
c){var d=b[0];b=b[1];var e=c[0],g=c[1],f=c[2];c=c[3];return d<=e?b>=g&&b<=c?3:b<g?[0,3]:[2,3]:b<=g?d>=e&&d<=f?0:d<e?[3,0]:[1,0]:d>=f?b>=g&&b<=c?1:b<g?[0,1]:[2,1]:b>=c?d>=e&&d<=f?2:d<e?[3,2]:[1,2]:-1},onGraphicAdd:function(){},onGraphicRemove:function(){},onGraphicNodeAdd:function(){},onGraphicNodeRemove:function(){},onGraphicDraw:function(){},onGraphicsClear:function(){},onRendererChange:function(){},onOpacityChange:function(){},onInfoTemplateChange:function(){},onSurfaceChange:function(){},onWebGLEnabledChange:function(){},
setInfoTemplate:function(b){this.infoTemplate=b;this._evalSurfaceType();this.onInfoTemplateChange()},add:function(b,c){if(b._graphicsLayer===this)return b;b._suspended=this._suspendGraphics;c||this.graphics.push(b);b._graphicsLayer=this;b._sourceLayer||(b._layer&&"esri.layers.GraphicsLayer"!==b._layer.declaredClass?b._sourceLayer=b._layer:"esri.layers.GraphicsLayer"!==this.declaredClass&&(b._sourceLayer=this));b._layer=this;this.hasWebGLSurface()||(this._updateExtent(b),this._draw(b));if(!c)this.onGraphicAdd(b);
return b},remove:function(b,c,d){if(!c&&!d){c=this.graphics;var e;if(-1===(e=h.indexOf(c,b)))return null;if(!Y||64<=Y)c.splice(e,1);else{var g=c.length;if(g){for(;e<g;)c[e]=c[e+1],e++;c.length--}}}this.hasWebGLSurface()||b.getDojoShape()&&this._removeShape(b,null,d);b._shape=b._graphicsLayer=null;this.onGraphicRemove(b);return b},clear:function(b,c){b=this.graphics;var d,e=!J;for(d=b.length-1;0<=d;d--)this.remove(b[d],null,e);this.graphics=[];this.hasWebGLSurface()||this._destroyAllNodes();if(!c)this.onGraphicsClear()},
_destroyAllNodes:function(){if(!J&&this._div){var b;this._childLayer&&(b=this._childLayer.getNode())&&b.parentNode&&b.parentNode.removeChild(b);this._bgGroup.clear();this._div.clear();this._bgGroup=this._div.createGroup();b&&this._div.getEventSource().appendChild(b);this._initOpacity()}},clearNodes:function(){if(!this.hasWebGLSurface()){var b=this.graphics,c=b.length,d;for(d=0;d<c;d++)this._removeShape(b[d],!0,!0);this._destroyAllNodes()}},_graphicVisibilityChanged:function(b){},_setIEOpacity:function(b,
d){var e=b&&b.getNode();if(e){var g=b.strokeStyle,f=e.stroke;g&&f&&(f.opacity=g.color.a*d);b=b.fillStyle;g=e.fill;b&&g&&("tile"===g.type?c.set(e,"opacity",d):g.opacity=b.a*d)}},setOpacity:function(b,d){if(d||this.opacity!=b){var e=this._div;e&&!this.hasWebGLSurface()&&(J?(h.forEach(this.graphics,function(c){this._setIEOpacity(c._shape,b);this._setIEOpacity(c._bgShape,b)},this),e._esriIeOpacity=b,this._bgGroup._esriIeOpacity=b):"canvas-2d"===this.surfaceType?c.set(e.getEventSource(),"opacity",b):e.getEventSource().setAttribute("opacity",
b));this.opacity=b;if(!d)this.onOpacityChange(b)}},setRenderer:function(b){this.renderer=b;this._evalSDRenderer(!0);this._evalSurfaceType();this.emit("renderer-change",{renderer:this._rndForScale||b})}});p=p([u,Q],{declaredClass:"esri.layers.GraphicsLayer",constructor:function(){this._processEvent=k.hitch(this,this._processEvent);this._initLayer()},_initLayer:function(){this.loaded=!0;this.onLoad(this)},_setMap:function(){var b=this.inherited("_setMap",arguments);this.enableMouseEvents();return b},
_unsetMap:function(){this.disableMouseEvents();this.inherited("_unsetMap",arguments)},_processEvent:function(b){var c=this._map,d=b.target,e;b.screenPoint=new D(b.pageX-c.position.x,b.pageY-c.position.y);for(b.mapPoint=c.toMap(b.screenPoint);d&&!(e=d.e_graphic);)d=d.parentNode;if(e)return b.graphic=e,b},_onMouseOverHandler:function(b){if(this._processEvent(b))this.onMouseOver(b)},_onMouseMoveHandler:function(b){if(this._processEvent(b))this.onMouseMove(b)},_onMouseDragHandler:function(b){if(this._processEvent(b))this.onMouseDrag(b)},
_onMouseOutHandler:function(b){if(this._processEvent(b))this.onMouseOut(b)},_onMouseDownHandler:function(b){this._downGr=this._downPt=null;this._processEvent(b)&&(l.disconnect(this._onmousemove_connect),l.disconnect(this._onmousedrag_connect),this._onmousedrag_connect=l.connect(this._div.getEventSource(),"onmousemove",this,"_onMouseDragHandler"),this._downGr=b.graphic,this._downPt=b.screenPoint.x+","+b.screenPoint.y,this.onMouseDown(b))},_onMouseUpHandler:function(b){this._upGr=this._upPt=null;this._processEvent(b)&&
(l.disconnect(this._onmousedrag_connect),l.disconnect(this._onmousemove_connect),this._onmousemove_connect=l.connect(this._div.getEventSource(),"onmousemove",this,"_onMouseMoveHandler"),this._upGr=b.graphic,this._upPt=b.screenPoint.x+","+b.screenPoint.y,this.onMouseUp(b))},_onClickHandler:function(b){if(this._processEvent(b)){var c=this._downGr,d=this._upGr;c&&d&&c===d&&this._downPt===this._upPt&&(J&&(w._ieGraphic=b.graphic),this.onClick(b))}},_onDblClickHandler:function(b){if(this._processEvent(b))this.onDblClick(b)},
onMouseOver:function(){},onMouseMove:function(){},onMouseDrag:function(){},onMouseOut:function(){},onMouseDown:function(){},onMouseUp:function(){},onClick:function(){},onDblClick:function(){},enableMouseEvents:function(){if(!this._mouseEvents){var b=l.connect,c=this._div.getEventSource();N||(this._onmouseover_connect=b(c,"onmouseover",this,"_onMouseOverHandler"),this._onmousemove_connect=b(c,"onmousemove",this,"_onMouseMoveHandler"),this._onmouseout_connect=b(c,"onmouseout",this,"_onMouseOutHandler"),
this._onmousedown_connect=b(c,"onmousedown",this,"_onMouseDownHandler"),this._onmouseup_connect=b(c,"onmouseup",this,"_onMouseUpHandler"),this._onclick_connect=b(c,"onclick",this,"_onClickHandler"),this._ondblclick_connect=b(c,"ondblclick",this,"_onDblClickHandler"));this._mouseEvents=!0}},disableMouseEvents:function(){if(this._mouseEvents){var b=l.disconnect;b(this._onmouseover_connect);b(this._onmousemove_connect);b(this._onmousedrag_connect);b(this._onmouseout_connect);b(this._onmousedown_connect);
b(this._onmouseup_connect);b(this._onclick_connect);b(this._ondblclick_connect);this._mouseEvents=!1}}});p._GraphicsContainer=t;p._GraphicsLayer=u;z("extend-esri")&&(k.setObject("layers.GraphicsLayer",p,w),k.setObject("layers._GraphicsContainer",t,w),k.setObject("layers._GraphicsLayer",u,w));return p})},"dojox/gfx":function(){define("dojox/gfx",["dojo/_base/lang","./gfx/_base","./gfx/renderer!"],function(m,p,f){p.switchTo(f);return p})},"dojox/gfx/renderer":function(){define("dojox/gfx/renderer",
["./_base","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","dojo/_base/config"],function(m,p,f,l,k){var h=null;f.add("vml",function(f,g,e){e.innerHTML='\x3cv:shape adj\x3d"1"/\x3e';f="adj"in e.firstChild;e.innerHTML="";return f});return{load:function(q,g,e){function c(){g(["dojox/gfx/"+b],function(c){m.renderer=b;h=c;e(c)})}if(h&&"force"!=q)e(h);else{var b=k.forceGfxRenderer;q=!b&&(p.isString(k.gfxRenderer)?k.gfxRenderer:"svg,vml,canvas,silverlight").split(",");for(var d,r;!b&&q.length;)switch(q.shift()){case "svg":"SVGAngle"in
l.global&&(b="svg");break;case "vml":f("vml")&&(b="vml");break;case "silverlight":try{f("ie")?(d=new ActiveXObject("AgControl.AgControl"),d.IsVersionSupported("1.0"))&&(r=!0):navigator.plugins["Silverlight Plug-In"]&&(r=!0)}catch(v){r=!1}finally{d=null}r&&(b="silverlight");break;case "canvas":l.global.CanvasRenderingContext2D&&(b="canvas")}"canvas"===b&&!1!==k.canvasEvents&&(b="canvasWithEvents");"svg"==b&&"undefined"!=typeof window.svgweb?window.svgweb.addOnLoad(c):c()}}}})},"esri/layers/gfxSniff":function(){define("esri/layers/gfxSniff",
["dojo/has","dojox/gfx"],function(m,p){m.add("esri-svg",function(){return-1!==p.renderer.toLowerCase().indexOf("svg")});return m})},"esri/layers/layer":function(){define("esri/layers/layer","dojo/_base/declare dojo/_base/config dojo/_base/connect dojo/_base/lang dojo/_base/Deferred dojo/_base/json dojo/has ../Evented ../kernel ../lang ../request ../deferredUtils ../urlUtils ../SpatialReference ../geometry/Extent".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u){var t=m([g],{declaredClass:"esri.layers.Layer",
_eventMap:{error:["error"],load:["layer"],"opacity-change":["opacity"],"update-end":["error"],"visibility-change":["visible"]},constructor:function(b,d){this._attrs={};b&&l.isString(b)?this._url=r.urlToObject(this.url=r.normalize(b)):(this.url=this._url=null,(d=d||b)&&(d.layerDefinition||d.query)&&(d=null));this.spatialReference=new v(4326);this.initialExtent=new u(-180,-90,180,90,new v(4326));this._map=this._div=null;this.normalization=!0;d&&(d.id&&(this.id=d.id),this.arcgisProps=d.arcgisProps,this.parentLayer=
d.parentLayer,!1===d.visible&&(this.visible=!1),c.isDefined(d.opacity)&&(this.opacity=d.opacity),c.isDefined(d.minScale)&&this.setMinScale(d.minScale),c.isDefined(d.maxScale)&&this.setMaxScale(d.maxScale),this.attributionDataUrl=d.attributionDataUrl||"",this.hasAttributionData=!!this.attributionDataUrl,c.isDefined(d.showAttribution)&&(this.showAttribution=d.showAttribution),this.className=d.className,this.refreshInterval=d.refreshInterval||0);this._errorHandler=l.hitch(this,this._errorHandler);this._scheduledRefresh=
l.hitch(this,this._scheduledRefresh);this.refresh=l.hitch(this,this.refresh);if(this.managedSuspension){var e=this._setMap;this._setMap=function(b){var c=e.apply(this,arguments);this._fireAttach(b);this.evaluateSuspension();if(this.suspended&&!b.loaded)var d=f.connect(b,"onLoad",this,function(){f.disconnect(d);d=null;this.evaluateSuspension()});return c}}this.registerConnectEvents()},id:null,visible:!0,opacity:1,loaded:!1,loadError:null,minScale:0,maxScale:0,visibleAtMapScale:!1,suspended:!0,attached:!1,
attributionDataUrl:"",hasAttributionData:!1,showAttribution:!0,refreshInterval:0,_errorHandler:function(b){this.loaded||(this.loadError=b);this.onError(b)},_setMap:function(b,c,d,e){this._map=b;this._lyrZEHandle=f.connect(b,"onZoomEnd",this,this._processMapScale);if(b.loaded)this.visibleAtMapScale=this._isMapAtVisibleScale();else var g=f.connect(b,"onLoad",this,function(){f.disconnect(g);g=null;this._processMapScale()})},_unsetMap:function(b,c){f.disconnect(this._lyrZEHandle);this._map=this._lyrZEHandle=
null;this._resumedOnce=void 0;this.suspended=!0;this._fireDetach(b)},_fireAttach:function(b){this.attached=!0;this.onAttach({map:b})},_fireDetach:function(b){this.attached=!1;this.onDetach({map:b})},_cleanUp:function(){this._map=this._div=null},_fireUpdateStart:function(){this.updating||(this.updating=!0,this.attr("data-updating",""),this.onUpdateStart(),this._map&&this._map._incr())},_fireUpdateEnd:function(b,c){this.updating&&(this.updating=!1,this.attr("data-updating"),this._refreshRT(),this.onUpdateEnd(b,
c),this._map&&this._map._decr())},_getToken:function(){var b=this._url,c=this.credential;return b&&b.query&&b.query.token||c&&c.token||void 0},_findCredential:function(){this.credential=e.id&&this._url&&e.id.findCredential(this._url.path)},_useSSL:function(){var b=this._url,c=/^http:/i;this.url&&(this.url=this.url.replace(c,"https:"));b&&b.path&&(b.path=b.path.replace(c,"https:"))},refresh:function(){},show:function(){this.setVisibility(!0)},hide:function(){this.setVisibility(!1)},setMinScale:function(b){this.setScaleRange(b)},
setMaxScale:function(b){this.setScaleRange(null,b)},setScaleRange:function(b,d){var e=c.isDefined(b),g=c.isDefined(d);this.loaded||(this._hasMin=this._hasMin||e,this._hasMax=this._hasMax||g);var f=this.minScale,h=this.maxScale;this.minScale=(e?b:this.minScale)||0;this.maxScale=(g?d:this.maxScale)||0;if(f!==this.minScale||h!==this.maxScale)this.onScaleRangeChange(),this._processMapScale()},suspend:function(){this._suspended=!0;this.evaluateSuspension()},resume:function(){this._suspended=!1;this.evaluateSuspension()},
canResume:function(){return this.loaded&&this._map&&this._map.loaded&&this.visible&&this.visibleAtMapScale&&!this._suspended},evaluateSuspension:function(){this.canResume()?this.suspended&&this._resume():this.suspended||this._suspend()},_suspend:function(){this.suspended=!0;this.attr("data-suspended","");this.onSuspend();if(this._map)this._map.onLayerSuspend(this)},_resume:function(){this.suspended=!1;this.attr("data-suspended");var b=void 0===this._resumedOnce,c=this.className,d=this._attrs,e=this.getNode(),
g;if(b){this._resumedOnce=!0;if(c&&e){var f=e.getAttribute("class")||"";(new RegExp("(^|\\s)"+c+"(\\s|$)","i")).test(f)||e.setAttribute("class",f+((f?" ":"")+c))}if(d&&e)for(g in d)d.hasOwnProperty(g)&&e.setAttribute(g,d[g])}this._refreshRT();this.onResume({firstOccurrence:b});if(this._map)this._map.onLayerResume(this)},_processMapScale:function(){var b=this.visibleAtMapScale;this.visibleAtMapScale=this._isMapAtVisibleScale();b!==this.visibleAtMapScale&&(this.onScaleVisibilityChange(),this.evaluateSuspension())},
isVisibleAtScale:function(b){return b?t.prototype._isMapAtVisibleScale.apply(this,arguments):!1},_isMapAtVisibleScale:function(b,c){if(!(b||this._map&&this._map.loaded))return!1;var d=this._map;b=b||d.getScale();var e=this.minScale,g=this.maxScale,f=!e,h=!g,k;c&&(k=d.width>d.height?d.width:d.height);f||(b<=e?f=!0:c&&(f=Math.abs(e-b)/e<1/k));h||(b>=g?h=!0:c&&(h=Math.abs(g-b)/g<1/k));return f&&h},getAttributionData:function(){var c=this.attributionDataUrl,e=new k(d._dfdCanceller);this.hasAttributionData&&
c?(e._pendingDfd=b({url:c,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),e._pendingDfd.then(function(b){e.callback(b)},function(b){e.errback(b)})):(c=Error("Layer does not have attribution data"),c.log=!!p.isDebug,e.errback(c));return e},getResourceInfo:function(){var b=this.resourceInfo;return l.isString(b)?h.fromJson(b):l.clone(b)},getMap:function(){return this._map},getNode:function(){return this._div},attr:function(b,c){var d=this.getNode();if("data-reference"===b&&11>q("ie"))return this;
d&&(null==c?d.removeAttribute(b):d.setAttribute(b,c));this._attrs&&(null==c?delete this._attrs[b]:this._attrs[b]=c);return this},setRefreshInterval:function(b){var c=this.refreshInterval;this.refreshInterval=b;this._toggleRT(!1);b&&this._toggleRT(!0);if(c!==b)this.onRefreshIntervalChange();return this},_toggleRT:function(b){b&&this.refreshInterval?(clearInterval(this._refreshTimer),this._refreshTimer=setInterval(this._scheduledRefresh,6E4*this.refreshInterval)):this._refreshTimer&&(clearInterval(this._refreshTimer),
this._refreshTimer=null)},_refreshRT:function(){this._toggleRT(!1);this._toggleRT(!0)},_scheduledRefresh:function(){this.onRefreshTick();!this._map||this.suspended||this.updating||this.refresh({scheduled:!0})},_refreshTS:null,_reCheckTS:/[\?\&]_ts=/ig,_reReplaceTS:/([\?\&]_ts=)[0-9]+/ig,addTimestampToURL:function(b){var c=this._refreshTS;c&&(b=this._reCheckTS.test(b)?b.replace(this._reReplaceTS,"$$$1"+c):b+((-1===b.indexOf("?")?"?":"\x26")+"_ts\x3d"+c));return b},setNormalization:function(b){this.normalization=
b},setVisibility:function(b){this.visible!==b&&(this.visible=b,this.onVisibilityChange(this.visible),this.evaluateSuspension());this.attr("data-hidden",b?null:"")},onLoad:function(){},onAttach:function(b){},onDetach:function(b){},onVisibilityChange:function(){},onScaleRangeChange:function(){},onScaleVisibilityChange:function(){},onSuspend:function(){},onResume:function(){},onUpdate:function(){},onUpdateStart:function(){},onUpdateEnd:function(){},onRefreshIntervalChange:function(){},onRefreshTick:function(){},
onError:function(){}});q("extend-esri")&&l.setObject("layers.Layer",t,e);return t})},"esri/layers/support/webglUtils":function(){define("esri/layers/support/webglUtils",["dojo/_base/lang","dojo/_base/array","dojo/has","../../kernel"],function(m,p,f,l){var k=!1,h=f("esri-webgl-max-contexts"),h=null!=h?h:f("esri-mobile")?8:16,q={isWebGLSupported:function(){return!!k},isWebGLEnabled:function(){return this.isWebGLSupported()&&!!f("esri-featurelayer-webgl")},createCanvas:function(g,e){var c=document.createElement("canvas");
c.style.width=g+"px";c.style.height=e+"px";return c},createWebGLContext:function(g){var e;p.some(["webgl","experimental-webgl","webkit-3d","moz-webgl"],function(c){try{e=g.getContext?g.getContext(c):null}catch(b){e=null}return!!e});return e},_contextOwners:[],isContextAvailable:function(){return-1===h||0<h&&q._contextOwners.length<h},acquireContext:function(g){return-1!==p.indexOf(q._contextOwners,g)?!0:q.isContextAvailable()?(q._contextOwners.push(g),!0):!1},releaseContext:function(g){g=p.indexOf(q._contextOwners,
g);-1!==g&&q._contextOwners.splice(g,1)}},k=q.createWebGLContext(q.createCanvas());f("extend-esri")&&m.setObject("layers.support.webglUtils",q,l);return q})},"esri/layers/support/WebGLSurface":function(){define("esri/layers/support/WebGLSurface",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","../../kernel"],function(m,p,f,l,k){m=m(null,{map:null,node:null,renderers:null,constructor:function(f){p.mixin(this,f);this.renderers=[]},destroy:function(){f.forEach(this.renderers,function(f){f.destroy()});
this.renderers=null},getEventSource:function(){return this.node},createRenderer:function(f,k,g,e){f=new f({surface:this,width:k,height:g,map:this.map,layer:e});this.renderers.push(f);return f},destroyRenderer:function(h){var k=f.indexOf(this.renderers,h);-1<k&&(h.destroy(),this.renderers.splice(k,1))},_createNode:function(){var f=document.createElement("div");f.style.pointerEvents="auto";f.style.position="absolute";return f}});l("extend-esri")&&p.setObject("layers.support.WebGLSurface",m,k);return m})},
"esri/domUtils":function(){define("esri/domUtils",["./kernel","dojo/_base/connect","dojo/_base/lang","dojo/dom-style","dojo/has"],function(m,p,f,l,k){var h={show:function(f){if(f=h.getNode(f))f.style.display="block"},getNode:function(f){return f&&f.domNode||f},hide:function(f){if(f=h.getNode(f))f.style.display="none"},toggle:function(f){if(f=h.getNode(f))f.style.display="none"===f.style.display?"block":"none"},documentBox:8>=k("ie")?{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}:
{w:window.innerWidth,h:window.innerHeight},setScrollable:function(f){if(f=this.getNode(f)){var g=0,e=0,c=0,b=0,d=0,h=0;return[p.connect(f,"ontouchstart",function(k){g=k.touches[0].screenX;e=k.touches[0].screenY;c=f.scrollWidth;b=f.scrollHeight;d=f.clientWidth;h=f.clientHeight}),p.connect(f,"ontouchmove",function(k){k.preventDefault();var r=f.firstChild;r instanceof Text&&(r=f.childNodes[1]);var t=r._currentX||0,q=r._currentY||0,t=t+(k.touches[0].screenX-g);0<t?t=0:0>t&&Math.abs(t)+d>c&&(t=-1*(c-d));
r._currentX=t;q+=k.touches[0].screenY-e;0<q?q=0:0>q&&Math.abs(q)+h>b&&(q=-1*(b-h));r._currentY=q;l.set(r,{"-webkit-transition-property":"-webkit-transform","-webkit-transform":"translate("+t+"px, "+q+"px)"});g=k.touches[0].screenX;e=k.touches[0].screenY})]}}};k("extend-esri")&&f.mixin(m,h);return h})},"esri/symbols/MarkerSymbol":function(){define("esri/symbols/MarkerSymbol","dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ./Symbol".split(" "),function(m,p,f,l,k,h){m=m(h,{declaredClass:"esri.symbol.MarkerSymbol",
angle:0,xoffset:0,yoffset:0,size:12,constructor:function(f){f&&p.isObject(f)&&(this.size="auto"===this.size?this.size:l.pt2px(this.size),this.xoffset=l.pt2px(this.xoffset),this.yoffset=l.pt2px(this.yoffset),this.angle&&(this.angle*=-1))},setAngle:function(f){this.angle=f;return this},setSize:function(f){this.size=f;return this},setOffset:function(f,g){this.xoffset=f;this.yoffset=g;return this},toJson:function(){var f=l.px2pt(this.size),f=isNaN(f)?void 0:f,g=l.px2pt(this.xoffset),g=isNaN(g)?void 0:
g,e=l.px2pt(this.yoffset),e=isNaN(e)?void 0:e;return p.mixin(this.inherited("toJson",arguments),{size:"auto"===this.size?this.size:f,angle:this.angle&&-1*this.angle,xoffset:g,yoffset:e})}});f("extend-esri")&&p.setObject("symbol.MarkerSymbol",m,k);return m})},"esri/symbols/Symbol":function(){define("esri/symbols/Symbol","dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../Color".split(" "),function(m,p,f,l,k,h){m=m(null,{declaredClass:"esri.symbol.Symbol",color:new h([0,0,0,1]),type:null,
constructor:function(f){f&&p.isObject(f)&&(p.mixin(this,f),this.color&&k.isDefined(this.color[0])&&(this.color=h.toDojoColor(this.color)),(f=this.type)&&0===f.indexOf("esri")&&(this.type={esriSMS:"simplemarkersymbol",esriPMS:"picturemarkersymbol",esriSLS:"simplelinesymbol",esriCLS:"cartographiclinesymbol",esriSFS:"simplefillsymbol",esriPFS:"picturefillsymbol",esriTS:"textsymbol",esriSHD:"shieldlabelsymbol"}[f]))},setColor:function(f){this.color=f;return this},toJson:function(){return{color:h.toJsonColor(this.color)}}});
f("extend-esri")&&p.setObject("symbol.Symbol",m,l);return m})},"esri/symbols/SimpleMarkerSymbol":function(){define("esri/symbols/SimpleMarkerSymbol","dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./MarkerSymbol ./SimpleLineSymbol".split(" "),function(m,p,f,l,k,h,q,g,e){var c={STYLE_CIRCLE:"circle",STYLE_SQUARE:"square",STYLE_TRIANGLE:"triangle",STYLE_CROSS:"cross",STYLE_X:"x",STYLE_DIAMOND:"diamond",STYLE_PATH:"path",STYLE_TARGET:"target"},b={style:c.STYLE_CIRCLE,
color:[255,255,255,.25],size:12,angle:0,xoffset:0,yoffset:0};m=m(g,{declaredClass:"esri.symbol.SimpleMarkerSymbol",type:"simplemarkersymbol",_styles:{circle:"esriSMSCircle",square:"esriSMSSquare",triangle:"esriSMSTriangle",cross:"esriSMSCross",x:"esriSMSX",diamond:"esriSMSDiamond",path:"esriSMSPath"},constructor:function(d,g,h,u){d?p.isString(d)?(this.style=d,g&&(this.size=g),h&&(this.outline=h),u&&(this.color=u)):(this.style=q.valueOf(this._styles,this.style),d.outline&&(this.outline=new e(d.outline))):
(p.mixin(this,b),this.size=k.pt2px(this.size),this.outline=new e(this.outline),this.color=new f(this.color));this.style||(this.style=c.STYLE_CIRCLE)},setStyle:function(b){this.style=b;return this},setPath:function(b){this.path=b;this.setStyle(c.STYLE_PATH);return this},setOutline:function(b){this.outline=b;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){return this.color},_setDim:function(b,c,e){this._targetWidth=b;this._targetHeight=c;this._spikeSize=
e},getShapeDescriptors:function(){var d,e,g,f=this.style,h=(this.size||k.pt2px(b.size))/2,q=0-h,l=0+h,m=0-h,p=0+h;switch(f){case c.STYLE_CIRCLE:d={type:"circle",cx:0,cy:0,r:h};e=this.getFill();if(g=this.getStroke())g.style=g.style||"Solid";break;case c.STYLE_CROSS:d={type:"path",path:"M "+q+",0 L "+l+",0 M 0,"+m+" L 0,"+p+" E"};e=null;g=this.getStroke();break;case c.STYLE_DIAMOND:d={type:"path",path:"M "+q+",0 L 0,"+m+" L "+l+",0 L 0,"+p+" L "+q+",0 Z"};e=this.getFill();g=this.getStroke();break;case c.STYLE_SQUARE:d=
{type:"path",path:"M "+q+","+p+" L "+q+","+m+" L "+l+","+m+" L "+l+","+p+" L "+q+","+p+" Z"};e=this.getFill();g=this.getStroke();break;case c.STYLE_TRIANGLE:d={type:"path",path:"M "+q+","+p+" L 0,"+m+" L "+l+","+p+" L "+q+","+p+" Z"};e=this.getFill();g=this.getStroke();break;case c.STYLE_X:d={type:"path",path:"M "+q+","+p+" L "+l+","+m+" M "+q+","+m+" L "+l+","+p+" E"};e=null;g=this.getStroke();break;case c.STYLE_PATH:d={type:"path",path:this.path||""},e=this.getFill(),g=this.getStroke()}return{defaultShape:d,
fill:e,stroke:g}},toJson:function(){var b=this.style,c=this.outline,e=p.mixin(this.inherited("toJson",arguments),{type:"esriSMS",style:this._styles[b]||"esriSMSCircle"});c&&(e.outline=c.toJson());"x"===b||"cross"===b?delete e.color:"target"===b&&(e.style="esriSMSSquare",delete e.color,0<this._targetHeight&&0<this._targetWidth&&(e.size=k.px2pt(Math.max(this._targetHeight,this._targetWidth))));e.path=this.path;return q.fixJson(e)}});p.mixin(m,c);m.defaultProps=b;l("extend-esri")&&(p.setObject("symbol.SimpleMarkerSymbol",
m,h),h.symbol.defaultSimpleMarkerSymbol=b);return m})},"esri/symbols/SimpleLineSymbol":function(){define("esri/symbols/SimpleLineSymbol","dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./LineSymbol".split(" "),function(m,p,f,l,k,h,q,g){var e={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",
STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot"},c={color:[0,0,0,1],style:e.STYLE_SOLID,width:1};m=m(g,{declaredClass:"esri.symbol.SimpleLineSymbol",type:"simplelinesymbol",marker:null,_styles:{solid:"esriSLSSolid",dash:"esriSLSDash",dot:"esriSLSDot",dashdot:"esriSLSDashDot",longdashdotdot:"esriSLSDashDotDot",none:"esriSLSNull",insideframe:"esriSLSInsideFrame",shortdash:"esriSLSShortDash",shortdot:"esriSLSShortDot",shortdashdot:"esriSLSShortDashDot",
shortdashdotdot:"esriSLSShortDashDotDot",longdash:"esriSLSLongDash",longdashdot:"esriSLSLongDashDot"},constructor:function(b,d,g){b?p.isString(b)?(this.style=b,d&&(this.color=d),g&&(this.width=g)):(this.style=q.valueOf(this._styles,b.style)||e.STYLE_SOLID,this.marker=b.marker):(p.mixin(this,c),this.color=new f(this.color),this.width=k.pt2px(this.width))},setStyle:function(b){this.style=b;return this},setMarker:function(b){this.marker=b},getStroke:function(){return this.style===e.STYLE_NULL||0===this.width?
null:{color:this.color,style:this.style,width:this.width}},getFill:function(){return null},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()}},toJson:function(){return q.fixJson(p.mixin(this.inherited("toJson",arguments),{type:"esriSLS",style:this._styles[this.style],marker:this.marker?p.clone(this.marker):void 0}))}});p.mixin(m,e);m.defaultProps=c;l("extend-esri")&&(p.setObject("symbol.SimpleLineSymbol",m,h),h.symbol.defaultSimpleLineSymbol=
c);return m})},"esri/symbols/LineSymbol":function(){define("esri/symbols/LineSymbol","dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ./Symbol".split(" "),function(m,p,f,l,k,h){m=m(h,{declaredClass:"esri.symbol.LineSymbol",constructor:function(f){p.isObject(f)?this.width=l.pt2px(this.width):this.width=12},setWidth:function(f){this.width=f;return this},toJson:function(){var f=l.px2pt(this.width),f=isNaN(f)?void 0:f;return p.mixin(this.inherited("toJson",arguments),{width:f})}});
f("extend-esri")&&p.setObject("symbol.LineSymbol",m,k);return m})},"esri/symbols/utils":function(){define("esri/symbols/utils","dojo/_base/lang dojo/_base/window dojo/has dojox/gfx ../kernel ../Color".split(" "),function(m,p,f,l,k,h){function q(b){b.removeAttribute("marker-start");b.removeAttribute("marker-end");b.removeAttribute("opacity")}function g(b,c){for(var d in c)b.setAttribute(d,c[d])}function e(b,c,d){c="url(#"+c.getAttribute("id")+")";b.rawNode.setAttribute("marker-"+d,c)}var c=-1!==l.renderer.toLowerCase().indexOf("svg"),
b=9===f("ie"),d={marker:{markerWidth:"6",markerHeight:"6",markerUnits:"strokeWidth",orient:"auto"},spear:{marker:{end:{viewBox:"0 0 25.4 23.43",refX:"20",refY:"12.76"},start:{viewBox:"-25.4 0 25.4 23.43",refX:"-20",refY:"12.76"}},path:{common:{d:"M1.63 23.43 L5.37 16.6 L5.37 8.93 L1.63 2.09 L25.4 12.76 L1.63 23.43 Z","stroke-width":"0","fill-opacity":"1"},start:{transform:"matrix(-1, 0, 0, 1, 0, 0)"}}}};l={applyLineMarker:function(d,g,f,h){if(c&&!b){var k=d&&d.rawNode,r=g.marker;f=f||g.color;k&&"none"!==
g.style&&f&&r&&"arrow"===r.style&&r.placement?k.getTotalLength&&0===k.getTotalLength()?q(k):(g=-1!==r.placement.indexOf("begin"),r=-1!==r.placement.indexOf("end"),g||r?(k.removeAttribute("stroke-opacity"),k.setAttribute("opacity",f.a),g?(g=h(d,f,"spear","start"),e(d,g,"start")):k.removeAttribute("marker-start"),r?(f=h(d,f,"spear","end"),e(d,f,"end")):k.removeAttribute("marker-end")):q(k)):k&&q(k)}},createSVGMarker:function(b,c,e,f){e=d[e];var h=p.doc.createElementNS("http://www.w3.org/2000/svg","marker");
h.setAttribute("id",c);g(h,d.marker);g(h,e.marker[f]);c=p.doc.createElementNS("http://www.w3.org/2000/svg","path");c.setAttribute("fill",b.toCss());g(c,e.path.common);g(c,e.path[f]);h.appendChild(c);return h},create2DColorRamp:function(b){var c=b.surface.createGroup(),d=b.colors,e=b.numClasses;b=(b.size||75)/e;for(var g=0;g<e;g++)for(var f=g*b,h=0;h<e;h++){var k=d[g][h];c.createRect({x:h*b,y:f,width:b,height:b}).setFill(k).setStroke(null)}return c},setSymbolFillColor:function(b,c){if(b)switch(c=c?
new h(c):null,b.type){case "simplemarkersymbol":"cross"===b.style||"x"===b.style?b.outline&&b.outline.setColor(c):b.setColor(c);break;case "simplelinesymbol":case "cartographiclinesymbol":case "simplefillsymbol":case "shieldlabelsymbol":case "textsymbol":b.setColor(c)}}};f("extend-esri")&&m.setObject("renderer.utils",l,k);return l})},"esri/layers/TileInfo":function(){define("esri/layers/TileInfo","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../SpatialReference ../geometry/Point ./LOD".split(" "),
function(m,p,f,l,k,h,q,g,e){m=m(null,{declaredClass:"esri.layers.TileInfo",constructor:function(c){p.mixin(this,c);this.width=this.cols;this.height=this.rows;this._levelToLOD={};c=this.spatialReference;var b=this.origin;c&&(c=this.spatialReference=new q(c.toJson?c.toJson():c));b&&(this.origin=new g(b.toJson?b.toJson():b),!b.spatialReference&&c&&this.origin.setSpatialReference(new q(c.toJson())));this.lods=f.map(this.lods,function(b){return new e(b)});f.forEach(this.lods,function(b){this._levelToLOD[b.level]=
b},this);c=!1;var b=this.spatialReference,d=this.origin;if(b&&d){var h=b._getInfo();h&&(c=b._isWrappable()&&Math.abs(h.origin[0]-d.x)<=h.dx)}this.isWrappable=c;this._initializeUpsampleLevels()},toJson:function(){return h.fixJson({rows:this.rows,cols:this.cols,dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin&&this.origin.toJson(),spatialReference:this.spatialReference&&this.spatialReference.toJson(),lods:this.lods&&f.map(this.lods,function(c){return c.toJson()})})},
lodAt:function(c){return this._levelToLOD&&this._levelToLOD[c]||null},updateTileInfo:function(c){var b=this.lodAt(c.level),d=b.resolution*this.width,b=b.resolution*this.height;c.id=c.level+"/"+c.row+"/"+c.col;c.extent||(c.extent=[0,0,0,0]);c.extent[0]=this.origin.x+c.col*d;c.extent[1]=this.origin.y-(c.row+1)*b;c.extent[2]=c.extent[0]+d;c.extent[3]=c.extent[1]+b},upsampleTile:function(c){var b=this._upsampleLevels[c.level];if(!b||-1===b.parentLevel)return!1;c.level=b.parentLevel;c.row=Math.floor(c.row/
b.factor+.001);c.col=Math.floor(c.col/b.factor+.001);this.updateTileInfo(c);return!0},_initializeUpsampleLevels:function(){var c=this.lods;this._upsampleLevels=[];for(var b=null,d=0;d<c.length;d++){var e=c[d];this._upsampleLevels[e.level]={parentLevel:b?b.level:-1,factor:b?b.resolution/e.resolution:0};b=e}}});l("extend-esri")&&p.setObject("layers.TileInfo",m,k);return m})},"esri/layers/LOD":function(){define("esri/layers/LOD",["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],
function(m,p,f,l,k){m=m(null,{declaredClass:"esri.layers.LOD",constructor:function(f){p.mixin(this,f)},toJson:function(){return k.fixJson({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})}});f("extend-esri")&&p.setObject("layers.LOD",m,l);return m})},"esri/layers/ArcGISTiledMapServiceLayer":function(){define("esri/layers/ArcGISTiledMapServiceLayer","dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has dojo/io-query ../kernel ../urlUtils ../SpatialReference ./TiledMapServiceLayer ./ArcGISMapServiceLayer ./TileInfo ./TimeInfo ./TileMap".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u){p=p([b,d],{declaredClass:"esri.layers.ArcGISTiledMapServiceLayer",_agolAttrs:"Canvas/World_Dark_Gray_Base Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Base Canvas/World_Light_Gray_Reference Elevation/World_Hillshade Ocean/World_Ocean_Base Ocean/World_Ocean_Reference Ocean_Basemap Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Transportation World_Imagery World_Street_Map World_Topo_Map".split(" "),
_isReference:!1,_referenceLayers:"Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Reference Ocean/World_Ocean_Reference Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Reference_Overlay Reference/World_Transportation".split(" "),constructor:function(b,c){c&&(c.roundrobin&&(m.deprecated(this.declaredClass+" : Constructor option 'roundrobin' deprecated. Use option 'tileServers'."),c.tileServers=c.roundrobin),this._setTileServers(c.tileServers),
this._loadCallback=c.loadCallback);this._params=f.mixin({},this._url.query);this._initLayer=f.hitch(this,this._initLayer);(b=c&&c.resourceInfo)?this._initLayer(b):(this._load=f.hitch(this,this._load),this._load())},_TILE_FORMATS:{PNG:"png",PNG8:"png",PNG24:"png",PNG32:"png",JPG:"jpg",JPEG:"jpg",GIF:"gif"},_setTileServers:function(b){if(b&&0<b.length){this.tileServers=b;var c,d=b.length;for(c=0;c<d;c++)b[c]=e.urlToObject(b[c]).path}},_initLayer:function(b,d){this.inherited(arguments);this.resourceInfo=
k.toJson(b);this.tileInfo=new r(b.tileInfo);!1!==this.resampling&&(b.capabilities&&-1<b.capabilities.indexOf("Tilemap")?(this.resampling=!0,this.tileMap=new u(this)):this.resampling=!!b.resampling);!this.spatialReference&&this.tileInfo.spatialReference&&(this.spatialReference=new c(this.tileInfo.spatialReference.toJson()));this.isPNG32="PNG24"===this.tileInfo.format||"PNG32"===this.tileInfo.format;b.timeInfo&&(this.timeInfo=new v(b.timeInfo));b.mensurationCapabilities&&(this.mensurationCapabilities=
b.mensurationCapabilities);var g=this._url.path,f=this._loadCallback,h=e.getProtocolForWebResource(!0),t=g.match(/^https?\:\/\/(server|services)\.arcgisonline\.com\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/mapserver/i),t=t&&t[2];if(!this.tileServers)if(b.tileServers)this._setTileServers(b.tileServers);else{var q=-1!==g.search(/^https?\:\/\/server\.arcgisonline\.com/i),l=-1!==g.search(/^https?\:\/\/services\.arcgisonline\.com/i);(q||l)&&this._setTileServers([g,g.replace(q?/server\.arcgisonline/i:
/services\.arcgisonline/i,q?"services.arcgisonline":"server.arcgisonline")])}if(t){t=t.toLowerCase();for(g=0;g<this._agolAttrs.length;g++)if(q=this._agolAttrs[g],q.toLowerCase()===t){this.hasAttributionData=!0;this.attributionDataUrl=this.attributionDataUrl||h+"//static.arcgis.com/attribution/"+q;break}for(g=0;g<this._referenceLayers.length;g++)if(q=this._referenceLayers[g],q.toLowerCase()===t){this._isReference=!0;break}}this.loaded=!0;this.onLoad(this);f&&(delete this._loadCallback,f(this))},getTileUrl:function(b,
c,d){var g=this.tileServers,f=this._getToken(),h=this._url.query;b=(g?g[c%g.length]:this._url.path)+"/tile/"+b+"/"+c+"/"+d;b=e.upgradeToHTTPS(b);this.resampling&&!this.tileMap&&(b+="?blankTile\x3dfalse");h&&(b=this.resampling&&!this.tileMap?b+("\x26"+q.objectToQuery(h)):b+("?"+q.objectToQuery(h)));!f||h&&h.token||(b+=(-1===b.indexOf("?")?"?":"\x26")+"token\x3d"+f);b=this.addTimestampToURL(b);return e.addProxy(b)}});h("extend-esri")&&f.setObject("layers.ArcGISTiledMapServiceLayer",p,g);return p})},
"esri/layers/TiledMapServiceLayer":function(){define("esri/layers/TiledMapServiceLayer","dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/url dojo/dom-construct dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/dom dojox/collections/ArrayList dojox/gfx/matrix ../kernel ../config ../sniff ../domUtils ../tileUtils ../geometry/Point ../geometry/Rect ../geometry/Extent ./layer".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x,w,y,z,B){m=m(B,{declaredClass:"esri.layers.TiledMapServiceLayer",
constructor:function(b,c){p.connect(this,"onLoad",this,"_initTiledLayer");this._lowestLevel=(this._displayLevels=c?c.displayLevels:null)?this._displayLevels[0]:0;this.resampling=c?c.resampling:void 0;this._resamplingTolerance=c?c.resamplingTolerance:null;this.exclusionAreas=c?c.exclusionAreas:null;b=f.hitch;this._addImage=b(this,this._addImage);this._tileLoadHandler=b(this,this._tileLoadHandler);this._tileErrorHandler=b(this,this._tileErrorHandler);this._popTile=b(this,this._popTile);this._cleanUpRemovedImages=
b(this,this._cleanUpRemovedImages);this._fireOnUpdateEvent=b(this,this._fireOnUpdateEvent);this._transitionEnd=b(this,this._transitionEnd);this._tileMapCallback=b(this,this._tileMapCallback)},opacity:1,isPNG32:!1,_multiple:1,isResampling:!1,_initTiledLayer:function(){var b=this.tileInfo,c=b.lods;this.resampling=null!=this.resampling?this.resampling:!1;this._tileW=b.width;this._tileH=b.height;var d=this.scales=[],e=this._displayLevels,g=-Infinity,f=Infinity,h=this.fullExtent,k=new w(h.xmin,h.ymax),
h=new w(h.xmax,h.ymin),r=x.getContainingTileCoords,t,q,v,m=c.length;for(v=0;v<m;v++)q=c[v],t=r(b,k,q),q.startTileRow=0>t.row?0:t.row,q.startTileCol=0>t.col?0:t.col,t=r(b,h,q),q.endTileRow=t.row,q.endTileCol=t.col,e&&-1===l.indexOf(e,q.level)||(d[v]=q.scale,g=q.scale>g?q.scale:g,f=q.scale<f?q.scale:f);-Infinity===g||this._hasMin||this.setMinScale(g);Infinity===f||this._hasMax||this.setMaxScale(f);this.setExclusionAreas(this.exclusionAreas);this._patchIE=6<=u("ie")&&7>u("ie")&&(this.isPNG32||"Mixed"===
b.format)},isVisibleAtScale:function(b){return b?B.prototype._isMapAtVisibleScale.call(this,b,!0):!1},_isMapAtVisibleScale:function(b){var c=this.inherited(arguments,[b,!0]);if(c){var d;d=this._map;var c=this.scales,e=d.getScale(),g=!1,f=d.width>d.height?d.width:d.height;for(d=0;d<c.length;d++)if(Math.abs(c[d]-e)/c[d]<1/f){g=!0;break}c=g}return c},_setMap:function(b,c,d,g){this.inherited(arguments);this._map=b;var f=this._div=h.create("div",null,c),k=b.__visibleDelta,u=p.connect,t=r._css.names,q=
{position:"absolute",width:b.width+"px",height:b.height+"px",overflow:"visible"},l=v.defaults.map.zoomDuration;"css-transforms"===b.navigationMode?(q[t.transform]=r._css.translate(-k.x,-k.y),e.set(f,q),delete q[t.transform],q[t.transition]=t.transformName+" "+l+"ms ease",e.set(this._active=h.create("div",null,f),q),this._active._remove=0,this._passives=[]):(q.left=-k.x+"px",q.top=-k.y+"px",e.set(f,q));this._onResizeHandler_connect=u(b,"onResize",this,"_onResizeHandler");this._opacityChangeHandler_connect=
u(this,"onOpacityChange",this,"_opacityChangeHandler");k=this.tileInfo;u=k.spatialReference;t=u._getInfo();(this._wrap=b.wrapAround180&&u._isWrappable()&&Math.abs(t.origin[0]-k.origin.x)<=t.dx)&&x._addFrameInfo(k,t);this.setExclusionAreas(this.exclusionAreas);this.evaluateSuspension();if(this.suspended&&!b.loaded)var m=p.connect(b,"onLoad",this,function(){p.disconnect(m);m=null;this.setExclusionAreas(this.exclusionAreas);this.evaluateSuspension()});return f},_unsetMap:function(b,c){this.suspended||
this._suspendImpl();h.destroy(this._div);this._map=this._div=null;var d=p.disconnect;d(this._onResizeHandler_connect);d(this._opacityChangeHandler_connect);this.inherited(arguments)},onSuspend:function(){this.inherited(arguments);this._suspendImpl()},_suspendImpl:function(){t.hide(this._div);clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();var b=this._tiles,c=this._tileIds,d=this._loadingList,e,g,f=p.disconnect,k=h.destroy;d&&0<d.count&&(d.forEach(function(c){if(e=
b[c])f(e._onload_connect),f(e._onerror_connect),f(e._onabort_connect),e._onload_connect=e._onerror_connect=e._onabort_connect=null}),d.clear(),this._fireUpdateEnd());this._removeList.clear();for(d=c.length-1;0<=d;d--)(e=(g=c[d])&&b[g])&&k(e);if("css-transforms"===this._map.navigationMode){c=this._active;g=this._passives;var r;this._noDom=0;for(d=g.length-1;0<=d;d--)r=g[d],r._endHandle&&f(r._endHandle),r._matrix=r._multiply=r._endHandle=null,r._marked=r._remove=0,g.splice(d,1),k(r);c._matrix=c._multiply=
null;c._marked=c._remove=0}this._tileIds=this._tiles=this._tileBounds=this._ct=this._loadingList=this._removeList=this._standby=null},onResume:function(){this.inherited(arguments);this._tileIds=[];this._tiles=[];this._tileBounds=[];this._ct=null;this._removeList=new b;this._loadingList=new b;t.show(this._div);this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(f.hitch(this,function(){this.suspended||this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD)}),0)},_enableDrawConnectors:function(){var b=
this._map,c=p.connect;if("css-transforms"===b.navigationMode){if(this._onScaleHandler_connect=c(b,"onScale",this,this._onScaleHandler),u("esri-mobile")){this._standby=[];var d=this,e=function(){d._noDom=1};this._onPanStartHandler_connect=c(b,"onPanStart",e);this._onZoomStartHandler_connect=c(b,"onZoomStart",e)}}else this._onZoomHandler_connect=c(b,"onZoom",this,"_onZoomHandler");this._onPanHandler_connect=c(b,"onPan",this,"_onPanHandler");this._onExtentChangeHandler_connect=c(b,"onExtentChange",this,
"_onExtentChangeHandler")},_disableDrawConnectors:function(){var b=p.disconnect;b(this._onPanHandler_connect);b(this._onZoomHandler_connect);b(this._onScaleHandler_connect);b(this._onExtentChangeHandler_connect);b(this._onPanStartHandler_connect);b(this._onZoomStartHandler_connect);this._onPanHandler_connect=this._onZoomHandler_connect=this._onScaleHandler_connect=this._onExtentChangeHandler_connect=this._onPanStartHandler_connect=this._onZoomStartHandler_connect=null},_onResizeHandler:function(b,
c,d){b={width:c+"px",height:d+"px"};c=e.set;c(this._div,b);if("css-transforms"===this._map.navigationMode)for(this._active&&c(this._active,b),d=this._passives.length-1;0<=d;d--)c(this._passives[d],b)},_onExtentChangeHandler:function(b,c,f,k){c=this._map;var u=this._standby,t;clearTimeout(this._wakeTimer);this._wakeTimer=null;if(!c._isPanningOrZooming()){if("css-transforms"===c.navigationMode){if(f)for(k=this._passives.length-1;0<=k;k--)t=this._passives[k],e.set(t,r._css.names.transition,"none"),t._marked?
(this._passives.splice(k,1),t.parentNode&&t.parentNode.removeChild(t),h.destroy(t)):0<t.childNodes.length&&(t._multiply=t._multiply?d.multiply(t._matrix,t._multiply):t._matrix);this._noDom=0;if(u&&u.length)for(k=u.length-1;0<=k;k--)t=u[k],e.set(t,"visibility","inherit"),this._popTile(t),u.splice(k,1)}this._fireUpdateStart();this._rrIndex=0;k=x.getCandidateTileInfo(c,this.tileInfo,b);b=c.__visibleDelta;if(!this._ct||k.lod.level!==this._ct.lod.level||f){t=k&&this._ct&&k.lod.level!==this._ct.lod.level;
this._ct=k;var q=this._tiles,l=this._tileIds,v=this._tileBounds,m=this._removeList,p,C=l.length;this._cleanUpRemovedImages();for(k=0;k<C;k++)u=l[k],p=q[u],v[u]=l[k]=null,"css-transforms"===c.navigationMode&&t&&p.parentNode&&c.fadeOnZoom&&(p._fadeOut=t,p.parentNode._remove++),m.add(p);f&&(this._tileIds=[],this._tiles=[],this._tileBounds=[])}k=b.x;f=b.y;"css-transforms"===c.navigationMode?(u={},u[r._css.names.transform]=r._css.translate(k,f),e.set(this._div,u)):e.set(this._div,{left:k+"px",top:f+"px"});
this.__coords_dx=k;this.__coords_dy=f;this._updateImages(new y(0,0,b.width,b.height));0===this._loadingList.count?(this._cleanUpRemovedImages(),this.onUpdate(),this._fireUpdateEnd()):this._fireOnUpdate=!0;f=this._tileW;q=this._tileH;b=new y(-b.x,-b.y,b.width,b.height);for(k=this._tileIds.length-1;0<=k;k--)(u=this._tileIds[k])?(t=this._tiles[u],l=g.getMarginBox(t),l=new y(l.l,l.t,f,q),"css-transforms"===c.navigationMode&&(l.x=t._left,l.y=t._top),b.intersects(l)?this._tileBounds[u]=l:(this._loadingList.contains(u)&&
this._popTile(t),h.destroy(t),this._tileIds.splice(k,1),delete this._tileBounds[u],delete this._tiles[u])):(this._tileIds.splice(k,1),delete this._tileBounds[u],delete this._tiles[u])}},_onPanHandler:function(b,c){b=this._map;c=b.__visibleDelta.offset(c.x,c.y);this.__coords_dx=this.__coords_dy=0;"css-transforms"===b.navigationMode?(b={},b[r._css.names.transform]=r._css.translate(c.x,c.y),e.set(this._div,b),u("esri-mobile")||this._updateImages({x:-c.x,y:-c.y,width:c.width,height:c.height})):(e.set(this._div,
{left:c.x+"px",top:c.y+"px"}),this._updateImages({x:-c.x,y:-c.y,width:c.width,height:c.height}));0<this._loadingList.count&&(this._fireUpdateStart(),this._fireOnUpdate=!0)},_onScaleHandler:function(b,c){var g,f={},k=r._css.names,u=this._map,t=v.defaults.map.zoomDuration;for(g=this._passives.length-1;0<=g;g--){var q=this._passives[g];0===q.childNodes.length?(this._passives.splice(g,1),h.destroy(q)):("none"===q.style[k.transition]&&e.set(q,k.transition,k.transformName+" "+t+"ms ease"),e.set(q,k.transition,
c?"none":k.transformName+" "+t+"ms ease"),q._matrix=b,f[k.transform]=r._css.matrix(q._multiply?d.multiply(b,q._multiply):b),e.set(q,f))}this._active&&0===this._active.childNodes.length||(e.set(this._active,k.transition,c?"none":k.transformName+" "+t+"ms ease"),this._active._matrix=b,f[k.transform]=r._css.matrix(this._active._matrix),e.set(this._active,f),this._passives.push(this._active),f={position:"absolute",width:u.width+"px",height:u.height+"px",overflow:"visible"},f[k.transition]=k.transformName+
" "+t+"ms ease",e.set(this._active=h.create("div",null,this._div),f),this._active._remove=0,u.fadeOnZoom&&h.place(this._active,this._div,"first"))},_onZoomHandler:function(b,c,d){b=g.getMarginBox(this._div);d=d.offset(-b.l,-b.t);this._previousScale&&1!==c||(this._previousScale=1);var f,h=this._tileW*c,k=this._tileH*c,r=this._tileBounds,t=this._tiles,q=this._previousScale,v=this._multiple,m=e.set,p,x;if((b=u("ie"))&&8>b)l.forEach(this._tileIds,function(b){x="";f=r[b];p=t[b].style.margin.split(" ");
l.forEach(p,function(b){""!==x&&(x+=" ");b=parseFloat(b);x+=b/q*c+"px"});m(t[b],{left:f.x-(h-f.width)*(d.x-f.x)/f.width+"px",top:f.y-(k-f.height)*(d.y-f.y)/f.height+"px",margin:1!==v&&-1===x.indexOf("NaN")?x:"",zoom:c})});else{var C=h*v,w=k*v,B,A;l.forEach(this._tileIds,function(b){x="";f=r[b];B=f.x-(h-f.width)*(d.x-f.x)/f.width;A=f.y-(k-f.height)*(d.y-f.y)/f.height;p=t[b].style.margin.split(" ");l.forEach(p,function(b){""!==x&&(x+=" ");b=parseFloat(b);x+=b/q*c+"px"});m(t[b],{left:B+"px",top:A+"px",
margin:1!==v&&-1===x.indexOf("NaN")?x:"",width:C+"px",height:w+"px"})})}this._previousScale=c},_updateImages:function(b){if(this._ct){var c,d=this._tileW,e=this._tileH,g=this._ct;c=g.lod;var g=g.tile,f=g.offsets,h=g.coords,k=h.row,h=h.col,r=c.level,u=this.opacity,t=this._tileIds,q=this._loadingList,v=this._addImage,m=this._map.id,p=this.id,x=b.x,w=b.y,B=c.startTileRow,A=c.endTileRow,y=c.startTileCol,z=c.endTileCol,ha=l.indexOf,la,ca,ia=f.x-this.__coords_dx,fa=f.y-this.__coords_dy;ca=d-ia+-b.x;var ea=
e-fa+-b.y;la=Math.ceil;ca=0<ca?ca%d:d-Math.abs(ca)%d;ea=0<ea?ea%e:e-Math.abs(ea)%e;x=0<x?Math.floor((x+ia)/d):la((x-(d-ia))/d);w=0<w?Math.floor((w+fa)/e):la((w-(e-fa))/e);fa=x+la((b.width-ca)/d);b=w+la((b.height-ea)/e);var pa,ka,na;this._wrap&&(pa=c._frameInfo,ka=pa[0],na=pa[1],pa=pa[2]);for(ea=x;ea<=fa;ea++)for(x=w;x<=b;x++)la=k+x,ca=h+ea,this._wrap&&(ca<na?(ca%=ka,ca=ca<na?ca+ka:ca):ca>pa&&(ca%=ka)),!this._isExcluded(r,la,ca)&&la>=B&&la<=A&&ca>=y&&ca<=z&&(c=m+"_"+p+"_tile_"+r+"_"+x+"_"+ea,-1===
ha(t,c)&&(q.add(c),t.push(c),v(r,x,la,ea,ca,c,d,e,u,g,f)))}},_cleanUpRemovedImages:function(){var b=this._removeList,c=h.destroy,d,g=r._css.names;b.forEach(function(b){b._fadeOut||(b.style.filter="",b.style.zoom=1,c(b))});if("css-transforms"===this._map.navigationMode)for(d=this._passives.length-1;0<=d;d--){var f=this._passives[d];0===f.childNodes.length?(this._passives.splice(d,1),c(f)):this._map.fadeOnZoom&&!f._marked&&f._remove===f.childNodes.length&&(f._marked=1,2048>r._css.getScaleFromMatrix(e.get(f,
g.transform))?(e.set(f,g.transition,"opacity 0.65s"),e.set(f,"opacity",0),p.disconnect(f._endHandle),f._endHandle=p.connect(f,g.endEvent,this._transitionEnd)):this._transitionEnd({propertyName:"opacity",target:f}))}b.clear()},_transitionEnd:function(b){var c=b.target;"opacity"===b.propertyName&&(p.disconnect(c._endHandle),c._endHandle=null,b=l.indexOf(this._passives,c),-1<b&&this._passives.splice(b,1),c.parentNode&&c.parentNode.removeChild(c),h.destroy(c))},_addImage:function(b,c,d,g,k,u,t,l,v,m,
x){if(this._patchIE)m=this._tiles[u]=h.create("div"),m.id=u,q.add(m,"layerTile"),e.set(m,{left:t*g-x.x+"px",top:l*c-x.y+"px",width:t+"px",height:l+"px",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src\x3d'"+this.getTileUrl(b,d,k)+"', sizingMethod\x3d'scale')"}),1>v&&e.set(m,"opacity",v),b=m.appendChild(h.create("div")),e.set(b,{opacity:0,width:t+"px",height:l+"px"}),this._div.appendChild(m),m=null,this._loadingList.remove(u),this._fireOnUpdateEvent();else{m=this._tiles[u]=h.create("img");
var C=p.connect;m.id=u;m._uid=b+"_"+d+"_"+k;m.alt="";q.add(m,"layerTile");g=t*g-x.x;x=l*c-x.y;c=this._map;var w=r._css.names;t={width:t+"px",height:l+"px",visibility:"hidden"};"css-transforms"===c.navigationMode?(t[w.transform]=r._css.translate(g,x),e.set(m,t),m._left=g,m._top=x):(t.left=g+"px",t.top=x+"px",e.set(m,t));1>v&&e.set(m,"opacity",v);m._onload_connect=C(m,"onload",this,"_tileLoadHandler");m._onerror_connect=C(m,"onerror",f.hitch(this,"_tileErrorHandler",d,k));m._onabort_connect=C(m,"onabort",
this,"_tileAbortHandler");if(this.tileMap)this.tileMap.getTile(b,d,k,u,this._tileMapCallback);else if(u=this.getTileUrl(b,d,k,m))this._failedRequests&&this._failedRequests[u]?(e.set(m,this._failedRequests[u].css),m.src=this._failedRequests[u].src,this._multiple=parseInt(this._failedRequests[u].css.width)/this._tileW,this.isResampling=1!==this._multiple):(this._multiple=1,this.isResampling=!1,m.src=u);"css-transforms"===c.navigationMode?this._active.appendChild(m):this._div.appendChild(m);m=null}},
_tileMapCallback:function(b,d){var g;if(!this.suspended){g=this._tiles[d.id]||c.byId(d.id);var f=d.level+"_"+d.row+"_"+d.col;g&&g._uid===f?(this._multiple=2*(d.level-b.level)||1,this.isResampling=1!==this._multiple,d=this.tileMap.style(b,d),e.set(g,d),g.src=this.getTileUrl(b.level,b.row,b.col)):this._popTile(d)}},getTileUrl:function(b,c,d){},refresh:function(){this.suspended||(this._refreshTS=Date.now(),this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD))},_popTile:function(b){var c=
p.disconnect;c(b._onload_connect);c(b._onerror_connect);c(b._onabort_connect);b._onload_connect=b._onerror_connect=b._onabort_connect=null;this._loadingList.remove(b.id);this._fireOnUpdateEvent()},_tileLoadHandler:function(b){b=b.currentTarget;this._noDom?this._standby.push(b):(e.set(b,"visibility","inherit"),this._popTile(b))},_tileAbortHandler:function(b){b=b.currentTarget;this.onError(Error("Unable to load tile: "+b.src));e.set(b,"visibility","hidden");this._popTile(b)},_tileErrorHandler:function(b,
c,d){d=d.currentTarget;var g,f,h=!0;if(this.tileMap||!this.resampling)h=!1;else if(g=new k(d.src),g=g.path.split("/"),g=parseInt(g[g.length-3]),f=this._ct.lod.level-g+1,this._multiple=Math.pow(2,f),g===this._lowestLevel||0===this._resamplingTolerance||this._resamplingTolerance&&Math.log(this._multiple)/Math.LN2>this._resamplingTolerance)h=!1;h?(this.isResampling=!0,this._resample(d,b,c)):(this.onError(Error("Unable to load tile: "+d.src)),e.set(d,"visibility","hidden"),this._popTile(d))},_resample:function(b,
c,d){var g=(new k(b.src)).path.split("/"),f=this._multiple,h=parseInt(g[g.length-3])-1,r=parseInt(c/f),t=parseInt(d/f),g=d%f,q=c%f,r=this.getTileUrl(h,r,t);c=this.getTileUrl(h+Math.log(f)/Math.LN2,c,d);f={width:this._tileW*f+"px",height:this._tileH*f+"px",margin:"-"+this._tileW*q+"px 0 0 "+("-"+this._tileH*g+"px")};this._failedRequests||(this._failedRequests={});this._failedRequests[c]={src:r,css:f};e.set(b,f);u("chrome")&&b.setAttribute("src",null);b.src=r},_fireOnUpdateEvent:function(){0===this._loadingList.count&&
(this._cleanUpRemovedImages(),this._fireOnUpdate&&(this._fireOnUpdate=!1,this.onUpdate(),this._fireUpdateEnd()))},setOpacity:function(b){if(this.opacity!=b)this.onOpacityChange(this.opacity=b)},onOpacityChange:function(){},_opacityChangeHandler:function(b){var c=e.set,d,g,f;if("css-transforms"===this._map.navigationMode){if(this._active)for(f=this._active.childNodes,d=f.length-1;0<=d;d--)c(f[d],"opacity",b);for(d=this._passives.length-1;0<=d;d--)for(f=this._passives[d].childNodes,g=f.length-1;0<=
g;g--)c(f[g],"opacity",b)}else for(f=this._div.childNodes,d=f.length-1;0<=d;d--)c(f[d],"opacity",b)},setExclusionAreas:function(b){this.exclusionAreas=b;if(this.loaded&&this._map&&this._map.loaded){var c=this._map.spatialReference,d=this.tileInfo,e=d.origin,g=d.lods,f=g[0].level,h=g[g.length-1].level,k,r,u,t,q,l,v,m,p;if(this.exclusionAreas&&this.exclusionAreas.length)for(this._exclusionsPerZoom=[],r=0,u=b.length;r<u;r++){if(k=b[r],(p=k.geometry)&&"extent"===p.type&&p.xmin<=p.xmax&&p.ymin<=p.ymax){if(!c.equals(p.spatialReference))if(c._canProject(p.spatialReference))c.isWebMercator()?
(m=w.lngLatToXY(p.xmin,p.ymin),p=w.lngLatToXY(p.xmax,p.ymax)):(m=w.xyToLngLat(p.xmin,p.ymin,!0),p=w.xyToLngLat(p.xmax,p.ymax,!0)),p=new z(m[0],m[1],p[0],p[1],c);else continue;v=-1;if(k.minZoom&&-1!==k.minZoom)v=k.minZoom;else if(k.minScale&&-1!==k.minScale)for(t=0,q=g.length;t<q;t++)if(g[t].scale<=k.minScale){v=g[t].level;break}v=Math.max(v,f);m=-1;if(k.maxZoom&&-1!==k.maxZoom)m=k.maxZoom;else if(k.maxScale&&-1!==k.maxScale)for(t=0,q=g.length;t<q;t++)if(g[t].scale<k.maxScale){m=g[t-1].level;break}else if(g[t].scale===
k.maxScale){m=g[t].level;break}m=-1===m?h:Math.min(m,h);for(k=v;k<=m;k++){t=0;for(q=g.length;t<q;t++)if(g[t].level===k){l=g[t];break}l&&(this._exclusionsPerZoom[k]||(this._exclusionsPerZoom[k]=[]),t=1/l.resolution/d.rows,q=1/l.resolution/d.cols,this._exclusionsPerZoom[k].push({rowFrom:Math.floor((e.y-p.ymax)*t),rowTo:Math.ceil((e.y-p.ymin)*t),colFrom:Math.floor((p.xmin-e.x)*q),colTo:Math.ceil((p.xmax-e.x)*q)}))}}}else this._exclusionsPerZoom=null;this.suspended||this._onExtentChangeHandler(this._map.extent,
null,!0,this._map.__LOD)}},_isExcluded:function(b,c,d){var e,g,f;if(!this._exclusionsPerZoom)return!1;e=this._exclusionsPerZoom[b];if(!e)return!1;g=0;for(f=e.length;g<f;g++)if(b=e[g],c>=b.rowFrom&&c<b.rowTo&&d>=b.colFrom&&d<b.colTo)return!0;return!1}});u("extend-esri")&&f.setObject("layers.TiledMapServiceLayer",m,r);return m})},"dojox/collections/ArrayList":function(){define("dojox/collections/ArrayList",["dojo/_base/kernel","dojo/_base/array","./_base"],function(m,p,f){f.ArrayList=function(l){var k=
[];l&&(k=k.concat(l));this.count=k.length;this.add=function(f){k.push(f);this.count=k.length};this.addRange=function(f){if(f.getIterator)for(f=f.getIterator();!f.atEnd();)this.add(f.get());else for(var h=0;h<f.length;h++)k.push(f[h]);this.count=k.length};this.clear=function(){k.splice(0,k.length);this.count=0};this.clone=function(){return new f.ArrayList(k)};this.contains=function(f){for(var h=0;h<k.length;h++)if(k[h]==f)return!0;return!1};this.forEach=function(f,q){m.forEach(k,f,q)};this.getIterator=
function(){return new f.Iterator(k)};this.indexOf=function(f){for(var h=0;h<k.length;h++)if(k[h]==f)return h;return-1};this.insert=function(f,q){k.splice(f,0,q);this.count=k.length};this.item=function(f){return k[f]};this.remove=function(f){f=this.indexOf(f);0<=f&&k.splice(f,1);this.count=k.length};this.removeAt=function(f){k.splice(f,1);this.count=k.length};this.reverse=function(){k.reverse()};this.sort=function(f){f?k.sort(f):k.sort()};this.setByIndex=function(f,q){k[f]=q;this.count=k.length};this.toArray=
function(){return[].concat(k)};this.toString=function(f){return k.join(f||",")}};return f.ArrayList})},"dojox/collections/_base":function(){define("dojox/collections/_base",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array"],function(m,p,f){m=p.getObject("dojox.collections",!0);m.DictionaryEntry=function(f,k){this.key=f;this.value=k;this.valueOf=function(){return this.value};this.toString=function(){return String(this.value)}};m.Iterator=function(l){var k=0;this.element=l[k]||null;this.atEnd=
function(){return k>=l.length};this.get=function(){return this.atEnd()?null:this.element=l[k++]};this.map=function(h,k){return f.map(l,h,k)};this.reset=function(){k=0;this.element=l[k]}};m.DictionaryIterator=function(l){var k=[],h={},q;for(q in l)h[q]||k.push(l[q]);var g=0;this.element=k[g]||null;this.atEnd=function(){return g>=k.length};this.get=function(){return this.atEnd()?null:this.element=k[g++]};this.map=function(e,c){return f.map(k,e,c)};this.reset=function(){g=0;this.element=k[g]}};return m})},
"esri/layers/ArcGISMapServiceLayer":function(){define("esri/layers/ArcGISMapServiceLayer","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../request ../SpatialReference ../geometry/Extent ./LayerInfo".split(" "),function(m,p,f,l,k,h,q,g,e,c){m=m(null,{declaredClass:"esri.layers.ArcGISMapServiceLayer",infoTemplates:null,constructor:function(b,c){this.layerInfos=[];c&&(this.infoTemplates=c.infoTemplates||null);b=this._params={};if(c=this._url.query?this._url.query.token:
null)b.token=c},setInfoTemplates:function(b){this.infoTemplates=b},_load:function(){q({url:this._url.path,content:p.mixin({f:"json"},this._params),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler})},spatialReference:null,initialExtent:null,fullExtent:null,description:null,units:null,_initLayer:function(b,d){try{this._findCredential();(this.credential&&this.credential.ssl||b&&b._ssl)&&this._useSSL();this.description=b.description;this.copyright=b.copyrightText;this.spatialReference=
b.spatialReference&&new g(b.spatialReference);this.initialExtent=b.initialExtent&&new e(b.initialExtent);this.fullExtent=b.fullExtent&&new e(b.fullExtent);this.units=b.units;this.maxRecordCount=b.maxRecordCount;this.maxImageHeight=b.maxImageHeight;this.maxImageWidth=b.maxImageWidth;this.supportsDynamicLayers=b.supportsDynamicLayers;var k=this.layerInfos=[],q=b.layers,u=this._defaultVisibleLayers=[];f.forEach(q,function(b,d){k[d]=new c(b);b.defaultVisibility&&u.push(b.id)});this.visibleLayers||(this.visibleLayers=
u);this.version=b.currentVersion;this.cimVersion=b.cimVersion;this.version||(this.version="capabilities"in b||"tables"in b?10:"supportedImageFormatTypes"in b?9.31:9.3);this.capabilities=b.capabilities;h.isDefined(b.minScale)&&!this._hasMin&&this.setMinScale(b.minScale);h.isDefined(b.maxScale)&&!this._hasMax&&this.setMaxScale(b.maxScale)}catch(t){this._errorHandler(t)}}});l("extend-esri")&&p.setObject("layers.ArcGISMapServiceLayer",m,k);return m})},"esri/layers/LayerInfo":function(){define("esri/layers/LayerInfo",
["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(m,p,f,l,k){m=m(null,{declaredClass:"esri.layers.LayerInfo",constructor:function(f){p.mixin(this,f)},toJson:function(){return k.fixJson({defaultVisibility:this.defaultVisibility,id:this.id,maxScale:this.maxScale,minScale:this.minScale,name:this.name,parentLayerId:this.parentLayerId,subLayerIds:this.subLayerIds})}});f("extend-esri")&&p.setObject("layers.LayerInfo",m,l);return m})},"esri/layers/TimeInfo":function(){define("esri/layers/TimeInfo",
"dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../TimeExtent ./TimeReference ./LayerTimeOptions".split(" "),function(m,p,f,l,k,h,q){m=m(null,{declaredClass:"esri.layers.TimeInfo",constructor:function(g){null!==g&&(p.mixin(this,g),g.exportOptions&&(this.exportOptions=new q(g.exportOptions)),this.timeExtent=null,g.timeExtent&&2===g.timeExtent.length&&(this.timeExtent=new k(g.timeExtent)),this.timeReference=new h(g.timeReference))}});p.mixin(m,{UNIT_CENTURIES:"esriTimeUnitsCenturies",UNIT_DAYS:"esriTimeUnitsDays",
UNIT_DECADES:"esriTimeUnitsDecades",UNIT_HOURS:"esriTimeUnitsHours",UNIT_MILLISECONDS:"esriTimeUnitsMilliseconds",UNIT_MINUTES:"esriTimeUnitsMinutes",UNIT_MONTHS:"esriTimeUnitsMonths",UNIT_SECONDS:"esriTimeUnitsSeconds",UNIT_UNKNOWN:"esriTimeUnitsUnknown",UNIT_WEEKS:"esriTimeUnitsWeeks",UNIT_YEARS:"esriTimeUnitsYears"});f("extend-esri")&&p.setObject("layers.TimeInfo",m,l);return m})},"esri/TimeExtent":function(){define("esri/TimeExtent",["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel"],
function(m,p,f,l){var k=m(null,{declaredClass:"esri.TimeExtent",constructor:function(f){if(1<arguments.length)this._create(arguments[0],arguments[1]);else if(f)if(p.isArray(f)){var h=f[0],g=f[1];this.startTime=null===h||"null"===h?null:new Date(h);this.endTime=null===g||"null"===g?null:new Date(g)}else f instanceof Date&&this._create(f,null)},offset:function(f,q){var g=new k,e=this.startTime,c=this.endTime;e&&(g.startTime=this._getOffsettedDate(e,f,q));c&&(g.endTime=this._getOffsettedDate(c,f,q));
return g},intersection:function(f){return this._intersection(this,f)},toJson:function(){var f=[],k=this.startTime;f.push(k?k.getTime():"null");k=this.endTime;f.push(k?k.getTime():"null");return f},_create:function(f,k){this.startTime=f?new Date(f.getTime()):null;this.endTime=k?new Date(k.getTime()):null},_refData:{esriTimeUnitsMilliseconds:{getter:"getUTCMilliseconds",setter:"setUTCMilliseconds",multiplier:1},esriTimeUnitsSeconds:{getter:"getUTCSeconds",setter:"setUTCSeconds",multiplier:1},esriTimeUnitsMinutes:{getter:"getUTCMinutes",
setter:"setUTCMinutes",multiplier:1},esriTimeUnitsHours:{getter:"getUTCHours",setter:"setUTCHours",multiplier:1},esriTimeUnitsDays:{getter:"getUTCDate",setter:"setUTCDate",multiplier:1},esriTimeUnitsWeeks:{getter:"getUTCDate",setter:"setUTCDate",multiplier:7},esriTimeUnitsMonths:{getter:"getUTCMonth",setter:"setUTCMonth",multiplier:1},esriTimeUnitsYears:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:1},esriTimeUnitsDecades:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:10},
esriTimeUnitsCenturies:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:100}},_intersection:function(f,q){if(f&&q){var g=f.startTime;f=f.endTime;var e=q.startTime;q=q.endTime;g=g?g.getTime():-Infinity;e=e?e.getTime():-Infinity;f=f?f.getTime():Infinity;q=q?q.getTime():Infinity;var c,b;e>=g&&e<=f?c=e:g>=e&&g<=q&&(c=g);f>=e&&f<=q?b=f:q>=g&&q<=f&&(b=q);if(isNaN(c)||isNaN(b))return null;g=new k;g.startTime=-Infinity===c?null:new Date(c);g.endTime=Infinity===b?null:new Date(b);return g}return null},
_getOffsettedDate:function(f,k,g){var e=this._refData;f=new Date(f.getTime());k&&g&&(e=e[g],f[e.setter](f[e.getter]()+k*e.multiplier));return f}});f("extend-esri")&&(l.TimeExtent=k);return k})},"esri/layers/TimeReference":function(){define("esri/layers/TimeReference",["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(m,p,f,l){m=m(null,{declaredClass:"esri.layers.TimeReference",constructor:function(f){f&&p.mixin(this,f)}});f("extend-esri")&&p.setObject("layers.TimeReference",
m,l);return m})},"esri/layers/LayerTimeOptions":function(){define("esri/layers/LayerTimeOptions",["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(m,p,f,l,k){m=m(null,{declaredClass:"esri.layers.LayerTimeOptions",constructor:function(f){f&&p.mixin(this,f)},toJson:function(){return k.fixJson({timeDataCumulative:this.timeDataCumulative,timeOffset:this.timeOffset,timeOffsetUnits:this.timeOffsetUnits,useTime:this.useTime})}});f("extend-esri")&&p.setObject("layers.LayerTimeOptions",
m,l);return m})},"esri/layers/TileMap":function(){define("esri/layers/TileMap","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred dojo/io-query ../request ../urlUtils".split(" "),function(m,p,f,l,k,h,q){return m(null,{declaredClass:"esri.layers.TileMap",constructor:function(g){this.layer=g;this._tileMaps={}},getTile:function(g,e,c,b,d){g={id:b,level:g,row:e,col:c};e=this._getResamplingBudget();0<e?this._process({tile:g,requestedTile:g,callback:d,resamplingBudget:e}):(d||this.callback).call(this,
g,g)},statusOf:function(g,e,c){var b=this._getResamplingBudget();g={level:g,row:e,col:c};if(0===b)return 1;for(;0<=b;){e=this._tileToTileMap(g);if(!this._tileMaps[e.uid])return-1;e=this._tileMaps[e.uid];if(!e.promise.isFulfilled())return-1;if(this._isTileAvailable(g,e))return 1;g=this._parentTile(g);if(!g)break;b--}return 0},style:function(g,e){if(g.level!==e.level||g.row!==e.row||g.col!==e.col){for(var c=this.layer.tileInfo,b=c.lods,d=c.cols,c=c.rows,f,h,k=b.length-1;!f||!h;)f||b[k].level!==g.level||
(f=b[k]),h||b[k].level!==e.level||(h=b[k]),k--;b=Math.round(f.resolution/h.resolution);g=e.col%b*-1*d;e=e.row%b*-1*c;b={width:d*b+"px",height:c*b+"px",margin:e+"px 0 0 "+g+"px","will-change":"transform"};g=0===g?0:-1*g;e=0===e?0:-1*e;b.clip="rect("+e+"px,"+(g+d)+"px,"+(e+c)+"px,"+g+"px)";return b}},_process:function(g){var e=g.tile,c=this._tileToTileMap(e),b=this._parentTile(e);this._getTileMap(c).then(p.hitch(this,function(d){c=d;this._isTileAvailable(e,c)?(g.callback||this.callback).call(this,e,
g.requestedTile):0<g.resamplingBudget&&b?(g.resamplingBudget--,g.tile=b,this._process(g)):(g.callback||this.callback).call(this,g.requestedTile,g.requestedTile)}),p.hitch(this,function(){(g.callback||this.callback).call(this,g.requestedTile,g.requestedTile)}))},_getTileMap:function(g){var e,c,b,d,f=null;this._tileMaps[g.uid]?(g=this._tileMaps[g.uid],e=g.promise):(this._tileMaps[g.uid]=g,c=new l,h({url:this._getTileMapUrl(g.level,g.row,g.col),handleAs:"json",content:{f:"json"},callbackParamName:"callback",
timeout:3E3,load:function(e){p.mixin(g,e);if(g.data&&0<g.data.length){d=g.data.length;if(1===d)f=g.data[0];else for(f=g.data[0],b=1;b<d;b++)if(g.data[b]!==f){f=null;break}null!==f&&(delete g.data,g.value=f);null==g.valid&&(g.valid=!0)}c.resolve(g)},error:function(b){b&&422===b.code?(p.mixin(g,{location:{top:g.row,left:g.col,width:8,height:8},valid:!0,value:0}),c.resolve(g)):c.reject()}}),e=g.promise=c.promise);return e},_parentTile:function(g){var e=this.layer.tileInfo.lods,c,b,d=null;f.some(e,function(d,
e){return g.level===d.level?(c=d,b=e,!0):!1});0<b&&(e=e[b-1],d={id:g.id,level:e.level,row:Math.floor(g.row*c.resolution/e.resolution+.01),col:Math.floor(g.col*c.resolution/e.resolution+.01)});return d},_tileToTileMap:function(g){var e=8*Math.floor(g.row/8),c=8*Math.floor(g.col/8);return{uid:g.level+"_"+e+"_"+c,level:g.level,row:e,col:c}},_isTileAvailable:function(g,e){var c,b;e.valid?void 0!==e.value?g=e.value:(c=e.location.left,b=e.location.top,g=(g.row-b)*e.location.width+(g.col-c),g=g<e.data.length?
e.data[g]:0):g=0;return g},_getTileMapUrl:function(g,e,c){var b=this.layer,d=b.tileServers,f=b._getToken(),h=b._url.query;g=(d?d[e%d.length]:b._url.path)+"/tilemap/"+g+"/"+e+"/"+c+"/8/8";h&&(g+="?"+k.objectToQuery(h));!f||h&&h.token||(g+=(-1===g.indexOf("?")?"?":"\x26")+"token\x3d"+f);return g=b.addTimestampToURL(g)},_getResamplingBudget:function(){var g=this.layer,e=0;g.resampling&&(e=g._resamplingTolerance,null===e||void 0===e)&&(e=g.tileInfo.lods.length);return e}})})},"esri/layers/MapImageLayer":function(){define("esri/layers/MapImageLayer",
"dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/dom-style ../kernel ../config ../sniff ../domUtils ../geometry/Point ../geometry/webMercatorUtils ./layer".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d,r){var v=m([r],{declaredClass:"esri.layers.MapImageLayer","-chains-":{constructor:"manual"},constructor:function(b){this.inherited(arguments,[null,b]);this._mapImages=[];var c=f.hitch;this._panStart=c(this,this._panStart);this._pan=c(this,this._pan);this._extentChange=
c(this,this._extentChange);this._zoom=c(this,this._zoom);this._zoomStart=c(this,this._zoomStart);this._scale=c(this,this._scale);this._resize=c(this,this._resize);p.connect(this,"onSuspend",this,this._onSuspend);p.connect(this,"onResume",this,this._onResume);this.loaded=!0;this.onLoad(this)},opacity:1,addImage:function(b){var c=this._mapImages.push(b),c=c-1;b._idx=c;b._layer=this;this._div&&this._createImage(b,c)},removeImage:function(b){if(b){var c=b._idx,d=this._mapImages;if(d[c]===b){delete d[c];
if(c=b._node)this._clearEvents(c),c.e_idx=c.e_bl=c.e_tr=c.e_l=c.e_t=c.e_w=c.e_h=null,c.parentNode&&(c.parentNode.removeChild(c),k.destroy(c));b._node=b._idx=b._layer=null}}},removeAllImages:function(){var b=this._mapImages,c,d=b.length;for(c=0;c<d;c++){var e=b[c];e&&this.removeImage(e)}this._mapImages=[]},getImages:function(){var b=this._mapImages,c=[],d,e=b.length;for(d=0;d<e;d++)b[d]&&c.push(b[d]);return c},setOpacity:function(b){this.opacity!=b&&(this._opacityChanged(this.opacity=b),this.onOpacityChange())},
onOpacityChange:function(){},_opacityChanged:function(b){var c=this._div,d,g;if(c)if(!e("ie")||8<e("ie"))h.set(c,"opacity",b);else for(g=c.childNodes,d=g.length,c=0;c<d;c++)h.set(g[c],"opacity",b)},_createImage:function(b,c){var d=k.create("img");h.set(d,{position:"absolute"});1>b.opacity?h.set(d,"opacity",b.opacity):8>=e("ie")&&h.set(d,"opacity",this.opacity);!b.rotation||9>e("ie")||h.set(d,q._css.names.transform,q._css.rotate(360-b.rotation));b._node=d;d.e_idx=c;d.e_layer=this;d.e_load=p.connect(d,
"onload",v.prototype._imageLoaded);d.e_error=p.connect(d,"onerror",v.prototype._imageError);d.e_abort=p.connect(d,"onabort",v.prototype._imageError);d.src=b.href},_imageLoaded:function(b,c){b=c||b.target||b.currentTarget;c=b.e_layer;var d=c._mapImages[b.e_idx],e=c._map;e&&(e.__zooming||e.__panning||!c._sr)?c._standby.push(b):(c._clearEvents(b),d&&d._node===b&&e&&c._attach(d))},_imageError:function(b){b=b.target||b.currentTarget;var c=b.e_layer,d=c._mapImages[b.e_idx];c._clearEvents(b);d&&(d._node=
null)},_clearEvents:function(b){var c=p.disconnect;c(b.e_load);c(b.e_error);c(b.e_abort);b.e_load=b.e_error=b.e_abort=b.e_layer=null},_attach:function(c){var e=c.extent,g=e.spatialReference,f=this._sr,h=this._div,k=c._node,r=new b({x:e.xmin,y:e.ymin,spatialReference:g}),e=new b({x:e.xmax,y:e.ymax,spatialReference:g});f.equals(g)||(f.isWebMercator()&&4326===g.wkid?(r=d.geographicToWebMercator(r),e=d.geographicToWebMercator(e)):g.isWebMercator()&&4326===f.wkid&&(r=d.webMercatorToGeographic(r),e=d.webMercatorToGeographic(e)));
k.e_bl=r;k.e_tr=e;c.visible&&(this._setPos(k,h._left,h._top),(this._active||h).appendChild(k))},_setPos:function(b,c,d){var e=b.e_bl,g=b.e_tr,f=this._map,e=f.toScreen(e),g=f.toScreen(g);c=e.x-c;d=g.y-d;var k=Math.abs(g.x-e.x),e=Math.abs(e.y-g.y),g={width:k+"px",height:e+"px"},r=this._mapImages[b.e_idx];"css-transforms"===f.navigationMode?g[q._css.names.transform]=q._css.translate(c,d)+(r.rotation?" "+q._css.rotate(360-r.rotation):""):(g.left=c+"px",g.top=d+"px");h.set(b,g);b.e_l=c;b.e_t=d;b.e_w=k;
b.e_h=e},managedSuspension:!0,_setMap:function(b,d){this.inherited(arguments);var g=this._div=k.create("div",null,d),f=q._css.names,r={position:"absolute"},u=b.__visibleDelta;if(!e("ie")||8<e("ie"))r.opacity=this.opacity;"css-transforms"===b.navigationMode?(r[f.transform]=q._css.translate(u.x,u.y),h.set(g,r),g._left=u.x,g._top=u.y,r={position:"absolute",width:b.width+"px",height:b.height+"px",overflow:"visible"},this._active=k.create("div",null,g),h.set(this._active,r),this._passive=k.create("div",
null,g),h.set(this._passive,r)):(g._left=0,g._top=0,h.set(g,r));this._standby=[];f=this._mapImages;u=f.length;for(r=0;r<u;r++){var t=f[r];t._node||this._createImage(t,t._idx)}c.hide(g);return g},_unsetMap:function(b,c){this._disconnect();var d=this._div;if(d){var e=this._mapImages,g,f=e.length;for(g=0;g<f;g++){var h=e[g];if(h){var r=h._node;r&&(this._clearEvents(r),r.e_idx=r.e_bl=r.e_tr=r.e_l=r.e_t=r.e_w=r.e_h=null);h._node=null}}c.removeChild(d);k.destroy(d)}this._map=this._div=this._sr=this._active=
this._passive=this._standby=null;this.inherited(arguments)},_onSuspend:function(){this._disconnect();c.hide(this._div)},_onResume:function(b){b.firstOccurrence&&(this._sr=this._map.spatialReference,this._processStandbyList());b=this._map;var d=this._div,e=b.__visibleDelta;"css-transforms"===b.navigationMode&&(d._left=e.x,d._top=e.y,h.set(d,q._css.names.transform,q._css.translate(d._left,d._top)));this._redraw("css-transforms"===b.navigationMode);this._connect(b);c.show(d)},_connect:function(b){if(!this._connections){var c=
p.connect,d="css-transforms"===b.navigationMode;this._connections=[c(b,"onPanStart",this._panStart),c(b,"onPan",this._pan),c(b,"onExtentChange",this._extentChange),d&&c(b,"onZoomStart",this._zoomStart),d?c(b,"onScale",this._scale):c(b,"onZoom",this._zoom),d&&c(b,"onResize",this._resize)];d&&this._resize(b.extent,b.width,b.height)}},_disconnect:function(){this._connections&&(l.forEach(this._connections,p.disconnect),this._connections=null)},_panStart:function(){this._panL=this._div._left;this._panT=
this._div._top},_pan:function(b,c){b=this._div;b._left=this._panL+c.x;b._top=this._panT+c.y;"css-transforms"===this._map.navigationMode?h.set(b,q._css.names.transform,q._css.translate(b._left,b._top)):h.set(b,{left:b._left+"px",top:b._top+"px"})},_extentChange:function(b,c,d){d?this._redraw("css-transforms"===this._map.navigationMode):c&&this._pan(b,c);this._processStandbyList()},_processStandbyList:function(){var b,c=this._standby;if(c&&c.length)for(b=c.length-1;0<=b;b--)this._imageLoaded(null,c[b]),
c.splice(b,1)},_redraw:function(b){if(b){b=this._passive;var c=q._css.names;h.set(b,c.transition,"none");this._moveImages(b,this._active);h.set(b,c.transform,"none")}b=this._active||this._div;var c=this._div._left,d=this._div._top,e,g=b.childNodes.length,f;for(e=0;e<g;e++)f=b.childNodes[e],this._setPos(f,c,d)},_zoom:function(b,c,d){b=this._div;var e=b._left,g=b._top,f,k=b.childNodes.length,r;for(f=0;f<k;f++){r=b.childNodes[f];var u=r.e_w*c,t=r.e_h*c,q=(d.x-e-r.e_l)*(u-r.e_w)/r.e_w,l=(d.y-g-r.e_t)*
(t-r.e_h)/r.e_h,q=isNaN(q)?0:q,l=isNaN(l)?0:l;h.set(r,{left:r.e_l-q+"px",top:r.e_t-l+"px",width:u+"px",height:t+"px"})}},_zoomStart:function(){this._moveImages(this._active,this._passive)},_moveImages:function(b,c){b=b.childNodes;var d;d=b.length;if(0<d)for(--d;0<=d;d--)c.appendChild(b[d])},_scale:function(b,c){var d=q._css.names,e=this._passive;h.set(e,d.transition,c?"none":d.transformName+" "+g.defaults.map.zoomDuration+"ms ease");({})[d.transform]=q._css.matrix(b);h.set(e,d.transform,q._css.matrix(b))},
_resize:function(b,c,d){h.set(this._active,{width:c+"px",height:d+"px"});h.set(this._passive,{width:c+"px",height:d+"px"})}});e("extend-esri")&&f.setObject("layers.MapImageLayer",v,q);return v})},"esri/layers/OpenStreetMapLayer":function(){define("esri/layers/OpenStreetMapLayer","dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../urlUtils ../SpatialReference ../geometry/Extent ./TiledMapServiceLayer ./TileInfo".split(" "),function(m,p,f,l,k,h,q,g,e){m=m(g,{declaredClass:"esri.layers.OpenStreetMapLayer",
constructor:function(c){this.spatialReference=new h({wkid:102100});this.tileInfo=new e({rows:256,cols:256,dpi:96,format:"PNG8",compressionQuality:0,origin:{x:-2.0037508342787E7,y:2.0037508342787E7},spatialReference:{wkid:102100},lods:[{level:0,scale:5.91657527591555E8,resolution:156543.033928},{level:1,scale:2.95828763795777E8,resolution:78271.5169639999},{level:2,scale:1.47914381897889E8,resolution:39135.7584820001},{level:3,scale:7.3957190948944E7,resolution:19567.8792409999},{level:4,scale:3.6978595474472E7,
resolution:9783.93962049996},{level:5,scale:1.8489297737236E7,resolution:4891.96981024998},{level:6,scale:9244648.868618,resolution:2445.98490512499},{level:7,scale:4622324.434309,resolution:1222.99245256249},{level:8,scale:2311162.217155,resolution:611.49622628138},{level:9,scale:1155581.108577,resolution:305.748113140558},{level:10,scale:577790.554289,resolution:152.874056570411},{level:11,scale:288895.277144,resolution:76.4370282850732},{level:12,scale:144447.638572,resolution:38.2185141425366},
{level:13,scale:72223.819286,resolution:19.1092570712683},{level:14,scale:36111.909643,resolution:9.55462853563415},{level:15,scale:18055.954822,resolution:4.77731426794937},{level:16,scale:9027.977411,resolution:2.38865713397468},{level:17,scale:4513.988705,resolution:1.19432856685505},{level:18,scale:2256.994353,resolution:.597164283559817},{level:19,scale:1128.497176,resolution:.298582141647617}]});this.fullExtent=new q({xmin:-2.003750834E7,ymin:-2.003750834E7,xmax:2.003750834E7,ymax:2.003750834E7,
spatialReference:{wkid:102100}});this.initialExtent=new q({xmin:-2.003750834E7,ymin:-2.003750834E7,xmax:2.003750834E7,ymax:2.003750834E7,spatialReference:{wkid:102100}});this.tileServers=c&&c.tileServers||["//a.tile.openstreetmap.org","//b.tile.openstreetmap.org","//c.tile.openstreetmap.org"];this.serversLength=this.tileServers.length;this._displayLevels=c?c.displayLevels:null;this.copyright=c&&c.copyright||"Map data \u00a9 OpenStreetMap contributors, CC-BY-SA";this.loaded=!0;this.onLoad(this);(c=
c&&c.loadCallback)&&c(this)},getTileUrl:function(c,b,d){c=this.tileServers[b%this.serversLength]+"/"+c+"/"+d+"/"+b+".png";c=k.normalize(c);c=this.addTimestampToURL(c);return k.addProxy(c)}});f("extend-esri")&&p.setObject("layers.OpenStreetMapLayer",m,l);return m})},"esri/dijit/Popup":function(){define("esri/dijit/Popup","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/kernel dojo/has dojo/window dojo/Stateful dojo/query dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dijit/registry ../kernel ../lang ../domUtils ../geometry/Polyline ../geometry/Polygon ../geometry/Multipoint ../geometry/normalizeUtils ../InfoWindowBase ../PopupBase dojo/i18n!../nls/jsapi dojo/NodeList-dom dojo/has!extend-esri?./PopupTemplate dojo/has!extend-esri?./PopupRenderer".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x,w,y,z,B,A,C,F,E,H){m=m([F,E,g],{declaredClass:"esri.dijit.Popup",offsetX:3,offsetY:3,zoomFactor:4,marginLeft:25,marginTop:25,highlight:!0,pagingControls:!0,pagingInfo:!0,keepHighlightOnHide:!1,popupWindow:!0,titleInBody:!0,anchor:"auto",visibleWhenEmpty:!0,hideDelay:1E3,location:null,constructor:function(e,g){this.initialize();p.mixin(this,e);this.domNode=c.byId(g);g=this._nls=p.mixin({},H.widgets.popup);e=this.domNode;d.add(e,"esriPopup");(this._isRTL=!v.isBodyLtr())&&
u.set(e,"direction","rtl");b.set(e,"innerHTML","\x3cdiv class\x3d'esriPopupWrapper' style\x3d'position: absolute;'\x3e\x3cdiv class\x3d'sizer'\x3e\x3cdiv class\x3d'titlePane'\x3e\x3cdiv class\x3d'spinner hidden' title\x3d'"+g.NLS_searching+"...'\x3e\x3c/div\x3e\x3cdiv class\x3d'title'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton prev hidden' title\x3d'"+g.NLS_prevFeature+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton next hidden' title\x3d'"+g.NLS_nextFeature+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton maximize' title\x3d'"+
g.NLS_maximize+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton close' title\x3d'"+g.NLS_close+"'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'sizer content'\x3e\x3cdiv class\x3d'contentPane'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'sizer'\x3e\x3cdiv class\x3d'actionsPane'\x3e\x3cdiv class\x3d'actionList hidden'\x3e\x3ca title\x3d'"+g.NLS_zoomTo+"' class\x3d'action zoomTo' href\x3d'javascript:void(0);'\x3e\x3cspan\x3e"+g.NLS_zoomTo+"\x3c/span\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'pointer hidden'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'outerPointer hidden'\x3e\x3c/div\x3e");
this._sizers=k.query(".sizer",e);g=k.query(".titlePane",e)[0];this._title=k.query(".title",g)[0];this._prevFeatureButton=k.query(".prev",g)[0];this._nextFeatureButton=k.query(".next",g)[0];this._maxButton=k.query(".maximize",g)[0];this._spinner=k.query(".spinner",g)[0];this._contentPane=k.query(".contentPane",e)[0];this._positioner=k.query(".esriPopupWrapper",e)[0];this._pointer=k.query(".pointer",e)[0];this._outerPointer=k.query(".outerPointer",e)[0];this._actionList=k.query(".actionsPane .actionList",
e)[0];this._contentUpdateHandles={};this._eventConnections=[l.connect(k.query(".close",g)[0],"onclick",this,this.hide),l.connect(this._prevFeatureButton,"onclick",this,this.selectPrevious),l.connect(this._nextFeatureButton,"onclick",this,this.selectNext),l.connect(this._maxButton,"onclick",this,this._toggleSize),l.connect(k.query(".zoomTo",this._actionList)[0],"onclick",this,this._zoomToFeature),l.connect(this,"onClearFeatures",this,this._featuresCleared),l.connect(this,"onSelectionChange",this,this._featureSelected),
l.connect(this,"onDfdComplete",this,this._updateUI)];h("esri-touch")&&(e=y.setScrollable(this._contentPane),this._eventConnections.push(e[0],e[1]));this._toggleVisibility(!1)},onMaximize:function(){},onRestore:function(){},setMap:function(b){this.inherited(arguments);r.place(this.domNode,b.root);this.highlight&&this.enableHighlight(b);this._maxHeight=u.get(this._contentPane,"maxHeight")},unsetMap:function(){this.disableHighlight(this.map);this.inherited(arguments)},setTitle:function(b){this.popupWindow&&
(w.isDefined(b)&&""!==b||(b="\x26nbsp;"),this.destroyDijits(this._title),this.place(b,this._title),this.isShowing&&(this.startupDijits(this._title),this.reposition()))},setContent:function(b){this.popupWindow&&(w.isDefined(b)&&""!==b||(b="\x26nbsp;"),this._destroyContent(),this.place(b,this._contentPane),this.isShowing&&(this._startupContent(),this.reposition()))},show:function(b,c){if(this.popupWindow)if(this._delayHide=!1,b){var d=this.map;b.spatialReference?(this.location=b,b=d.toScreen(b)):this.location=
d.toMap(b);var e=d._getFrameWidth();if(-1!==e&&(b.x%=e,0>b.x&&(b.x+=e),d.width>e))for(d=(d.width-e)/2;b.x<d;)b.x+=e;this._maximized?this.restore():this._setPosition(b);c&&c.closestFirst&&this.showClosestFirst(this.location);this.isShowing||(this._toggleVisibility(!0),this._followMap(),this.startupDijits(this._title),this._startupContent(),this.reposition(),this.showHighlight(),this.onShow())}else this._toggleVisibility(!0)},hide:function(){this.isShowing&&(this._toggleVisibility(!1),this._unfollowMap(),
this.keepHighlightOnHide||this.hideHighlight(),this.onHide())},resize:function(b,c){this.popupWindow&&(this._sizers.style({width:b+"px"}),u.set(this._contentPane,"maxHeight",c+"px"),this._maxHeight=c,this.isShowing&&this.reposition())},reposition:function(){this.popupWindow&&this.map&&this.location&&!this._maximized&&this.isShowing&&this._setPosition(this.map.toScreen(this.location))},addActions:function(b){return f.map(b,function(b){var c=r.create("a",{href:"javascript:void(0);",className:"action "+
b.className,title:b.title,innerHTML:b.title},this._actionList);l.connect(c,"onclick",b.callback);return{action:b,node:c}},this)},removeActions:function(b){f.forEach(b,function(b){r.destroy(b.node)})},getCurrentAnchor:function(){return this._anchor},maximize:function(){var c=this.map;if(c&&!this._maximized&&this.popupWindow){this._maximized=!0;var e=this._maxButton;d.remove(e,"maximize");d.add(e,"restore");b.set(e,"title",this._nls.NLS_restore);var e=this.marginLeft,g=this.marginTop,f=c.width-2*e,
c=c.height-2*g;u.set(this.domNode,{left:this._isRTL?null:e+"px",right:this._isRTL?e+"px":null,top:g+"px",bottom:null});u.set(this._positioner,{left:null,right:null,top:null,bottom:null});this._savedWidth=u.get(this._sizers[0],"width");this._savedHeight=u.get(this._contentPane,"maxHeight");this._sizers.style({width:f+"px"});u.set(this._contentPane,{maxHeight:c-65+"px",height:c-65+"px"});this._showPointer("");this._unfollowMap();d.add(this.domNode,"esriPopupMaximized");this.onMaximize()}},restore:function(){if(this.map&&
this._maximized&&this.popupWindow){this._maximized=!1;var c=this._maxButton;d.remove(c,"restore");d.add(c,"maximize");b.set(c,"title",this._nls.NLS_maximize);u.set(this._contentPane,"height",null);this.resize(this._savedWidth,this._savedHeight);this._savedWidth=this._savedHeight=null;this.show(this.location);this._followMap();d.remove(this.domNode,"esriPopupMaximized");this.onRestore()}},startup:function(){},destroy:function(){this.map&&this.unsetMap();this.cleanup();this.isShowing&&this.hide();this.destroyDijits(this._title);
this._destroyContent();f.forEach(this._eventConnections,l.disconnect);r.destroy(this.domNode);this._sizers=this._contentPane=this._actionList=this._positioner=this._pointer=this._outerPointer=this._title=this._prevFeatureButton=this._nextFeatureButton=this._spinner=this._eventConnections=this._pagerScope=this._targetLocation=this._nls=this._maxButton=null},selectNext:function(){this.select(this.selectedIndex+1)},selectPrevious:function(){this.select(this.selectedIndex-1)},setFeatures:function(b,c){this._transientAnchor=
c&&c.anchor;this.inherited(arguments);this._updateUI()},clearFeatures:function(b){b||(this._transientAnchor=null);this.inherited(arguments)},postscript:null,_highlightSetter:function(b){var c=this.highlight,d=this.map;this.highlight=b;if(d&&b!==c)if(b){if(this.enableHighlight(d),b=this.features&&this.features[this.selectedIndex])this.updateHighlight(d,b),this.showHighlight()}else this.disableHighlight(d)},_pagingControlsSetter:function(b){var c=this.pagingControls,d=this.map;this.pagingControls=b;
d&&b!==c&&this._updatePagingControls()},_pagingInfoSetter:function(b){var c=this.pagingInfo,d=this.map;this.pagingInfo=b;d&&b!==c&&this.features&&this.features.length&&this._updatePagingInfo()},_popupWindowSetter:function(b){var c=this.popupWindow,d=this.map;this.popupWindow=b;d&&b!==c&&(b?(this._updateUI(),this._updateWindow()):(this.hide(),this.showHighlight()))},_anchorSetter:function(b){var c=this.anchor;this.anchor=b;this.map&&b!==c&&this.reposition()},_startupContent:function(){var b=this._contentPane;
this.startupDijits(b);f.forEach(this._getPopupRendererDijits(b),function(b){if(!this._contentUpdateHandles[b.id]){var c=b.on("content-update",p.hitch(this,function(){this.reposition()}));this._contentUpdateHandles[b.id]=c}},this)},_destroyContent:function(){var b=this._contentPane;f.forEach(this._getPopupRendererDijits(b),function(b){var c=this._contentUpdateHandles[b.id];c&&(c.remove(),delete this._contentUpdateHandles[b.id])},this);this.destroyDijits(b)},_getPopupRendererDijits:function(b){b=this.getDijits(b);
return b=f.filter(b,function(b){return b&&b.set&&/_PopupRenderer/.test(b.declaredClass)})},_featuresCleared:function(){this.setTitle("\x26nbsp;");this.setContent("\x26nbsp;");this._setPagerCallbacks(this);this._updateUI();this.hideHighlight()},_featureSelected:function(){this._updateUI();this._updateWindow()},_updateWindow:function(){var b=this.selectedIndex;if(0<=b){var c=this.features[b].getContent();if(!this.titleInBody&&c&&p.isString(c.id)){var d=t.byId(c.id);d&&d.set&&/_PopupRenderer/.test(d.declaredClass)&&
d.set("showTitle",!1)}this.setContent(c);this.updateHighlight(this.map,this.features[b]);this.showHighlight()}},_toggleVisibility:function(b){this._setVisibility(b);this.isShowing=b},_setVisibility:function(b){d.toggle(this.domNode,"esriPopupVisible",b);d.toggle(this.domNode,"esriPopupHidden",!b)},_waitAndHide:function(b){var c=this;this._delayHide=!0;setTimeout(function(){c._delayHide&&(c._delayHide=!1,c.hide())},b)},_followMap:function(){this._unfollowMap();var b=this.map;this._handles=[l.connect(b,
"onPanStart",this,this._onPanStart),l.connect(b,"onPan",this,this._onPan),l.connect(b,"onZoomStart",this,this._onZoomStart),l.connect(b,"onExtentChange",this,this._onExtentChange)]},_unfollowMap:function(){var b=this._handles;b&&(f.forEach(b,l.disconnect),this._handles=null)},_onPanStart:function(){var b=this.domNode.style;this._panOrigin={left:b.left,top:b.top,right:b.right,bottom:b.bottom}},_onPan:function(b,c){var d=this._panOrigin;b=c.x;c=c.y;var e=d.left,g=d.top,f=d.right,d=d.bottom;e&&(e=parseFloat(e)+
b+"px");g&&(g=parseFloat(g)+c+"px");f&&(f=parseFloat(f)-b+"px");d&&(d=parseFloat(d)-c+"px");u.set(this.domNode,{left:e,top:g,right:f,bottom:d})},_onZoomStart:function(){this._setVisibility(!1)},_onExtentChange:function(b,c,d){d&&(this._setVisibility(!0),this.show(this._targetLocation||this.location));this._targetLocation=null},_toggleSize:function(){this._maximized?this.restore():this.maximize()},_getTargetAnchor:function(){return this._transientAnchor||this.anchor},_setPosition:function(b){var c=
b.x,d=b.y;b=this.offsetX||0;var e=this.offsetY||0,g=0,f=0,h=this.map,k=h.position.x,r=h.position.y,t=h.width,l=h.height,h="Left",m="bottom",p="right",x="top",C=v.getContentBox(this._positioner),w=C.w/2,B=C.h/2,y=u.get(this._sizers[0],"height")+this._maxHeight+u.get(this._sizers[2],"height"),A=y/2,E=0,F=0,z=t,H=l,D=c,na=d,ja=this._getTargetAnchor().toLowerCase();if("auto"===ja){if(ja=q.getBox)ja=ja(),E=Math.max(ja.l,k),z=Math.min(ja.l+ja.w,k+t),F=Math.max(ja.t,r),H=Math.min(ja.t+ja.h,r+l),D+=k,na+=
r;k=na-F>=y;r=H-na>=y;t=z-D>=C.w;C=D-E>=C.w;na-F>A&&H-na>=A&&(t?(m="",h="Left",x="",p="right"):C&&(m="",h="Right",x="",p="left"));h&&m&&D-E>w&&z-D>=w&&(k?(h="",m="bottom",p="",x="top"):r&&(h="",m="top",p="",x="bottom"));h&&m&&(t&&k?(h="Left",m="bottom",p="right",x="top"):t&&r?(h="Left",m="top",p="right",x="bottom"):C&&r?(h="Right",m="top",p="left",x="bottom"):C&&k&&(h="Right",m="bottom",p="left",x="top"));this._anchor=x&&p?x+"-"+p:x||p}else m=h="",-1!==ja.indexOf("top")?m="bottom":-1!==ja.indexOf("bottom")&&
(m="top"),-1!==ja.indexOf("left")?h="Right":-1!==ja.indexOf("right")&&(h="Left"),this._anchor=this._getTargetAnchor();p=m+h;switch(p){case "top":case "bottom":f=14;break;case "Left":case "Right":g=13;break;case "topLeft":case "topRight":case "bottomLeft":case "bottomRight":f=14,g=-16}u.set(this.domNode,{left:c+"px",top:d+"px",right:null,bottom:null});c={left:null,right:null,top:null,bottom:null};h?c[h.toLowerCase()]=g+b+"px":c.left=-w+"px";m?c[m]=f+e+"px":c.top=-B+"px";u.set(this._positioner,c);this._showPointer(p)},
_showPointer:function(b){d.remove(this._pointer,"top bottom right left topLeft topRight bottomRight bottomLeft hidden".split(" "));d.remove(this._outerPointer,["right","left","hidden"]);"Right"===b||"Left"===b?(b=b.toLowerCase(),d.add(this._outerPointer,b)):d.add(this._pointer,b)},_setPagerCallbacks:function(b,c,d){if(this.pagingControls&&(b!==this||this._pagerScope&&this._pagerScope!==this)&&b!==this._pagerScope){this._pagerScope=b;b===this&&(c=this.selectPrevious,d=this.selectNext);var e=this._eventConnections;
l.disconnect(e[1]);l.disconnect(e[2]);c&&(e[1]=l.connect(this._prevFeatureButton,"onclick",b,c));d&&(e[2]=l.connect(this._nextFeatureButton,"onclick",b,d))}},_getLocation:function(b){var c,d,e=b&&b.geometry;if(e)switch(e.type){case "point":c=e;b.isAggregate()&&(b=b.getChildGraphics(),d=b[0],b=(d=d.geometry&&d.geometry.spatialReference)&&new A({points:f.map(b,function(b){b=b.geometry;return[b.x,b.y]}),spatialReference:d.toJson()}),d=C.getDenormalizedExtent(b));break;case "multipoint":c=e.getPoint(0);
d=C.getDenormalizedExtent(e);break;case "polyline":case "polygon":c=e.getPoint(0,0),d=C.getDenormalizedExtent(e)}return[c,d]},_zoomToFeature:function(b){b.preventDefault();var c=this.features,d=this.selectedIndex;b=this.map;if(c)if(d=this._getLocation(c[d]),c=d[0],d=d[1],c||(c=this.location),d&&d.intersects(this.location)||(this.location=c),d&&d.getWidth()&&d.getHeight())b.setExtent(d,!0);else{var e=b.getNumLevels(),d=b.getLevel(),g=b.getMaxZoom(),f=this.zoomFactor||1;0<e?d!==g&&(e=d+f,e>g&&(e=g),
b.navigationManager._wheelZoom({value:e-d,mapPoint:c},!0)):b.navigationManager._wheelZoom({value:1/Math.pow(2,f)*2,mapPoint:c},!0)}},_updatePagingControls:function(){var b=this._prevFeatureButton,c=this._nextFeatureButton,e=this.selectedIndex,g=this.features?this.features.length:0;this.pagingControls&&1<g?(0===e?d.add(b,"hidden"):d.remove(b,"hidden"),e===g-1?d.add(c,"hidden"):d.remove(c,"hidden")):(d.add(b,"hidden"),d.add(c,"hidden"))},_updatePagingInfo:function(){var b=this.features?this.features.length:
0,c=this._nls,d="\x26nbsp;";this.pagingInfo&&1<b&&c.NLS_pagingInfo&&(d=w.substitute({index:this.selectedIndex+1,total:b},c.NLS_pagingInfo));b&&(c=this.getSelectedFeature(),b=c.getInfoTemplate(),c=c.getTitle(),b&&!/esri\.InfoTemplate/.test(b.declaredClass)&&this.titleInBody||!c||(d=c+("\x26nbsp;"===d?"":" "+d)));this.setTitle(d)},_updateUI:function(){if(this.popupWindow){var b=this.features,c=this.deferreds,e=b?b.length:0,g=this._spinner,f=this._actionList,h=this._nls;this._updatePagingControls();
this._updatePagingInfo();e?d.remove(f,"hidden"):d.add(f,"hidden");c&&c.length?b?d.remove(g,"hidden"):this.setContent("\x3cdiv style\x3d'text-align: center;'\x3e"+h.NLS_searching+"...\x3c/div\x3e"):d.add(g,"hidden");e||c&&c.length?this._delayHide=!1:(this.setContent("\x3cdiv style\x3d'text-align: center;'\x3e"+h.NLS_noInfo+".\x3c/div\x3e"),this.visibleWhenEmpty||this._waitAndHide(this.hideDelay))}}});h("extend-esri")&&p.setObject("dijit.Popup",m,x);return m})},"esri/geometry/normalizeUtils":function(){define("esri/geometry/normalizeUtils",
"dojo/_base/array dojo/_base/lang dojo/_base/Deferred dojo/has ../kernel ../config ../deferredUtils ./Extent ./Polyline ./Polygon ./webMercatorUtils ./jsonUtils".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d){function r(b,c){return Math.ceil((b-c)/(2*c))}function v(b,c){var d=b.paths||b.rings,e,g,f=d.length,h;for(e=0;e<f;e++)for(h=d[e].length,g=0;g<h;g++){var k=b.getPoint(e,g);b.setPoint(e,g,k.offset(c,0))}return b}function u(b,d){if(!(b instanceof e||b instanceof c))throw Error("_straightLineDensify: the input geometry is neither polyline nor polygon");
var g=b instanceof e,f=[],h;m.forEach(g?b.paths:b.rings,function(b){f.push(h=[]);h.push([b[0][0],b[0][1]]);var c,e,g,k,r,u,t,q,l,v,m,p;for(r=0;r<b.length-1;r++){c=b[r][0];e=b[r][1];g=b[r+1][0];k=b[r+1][1];t=Math.sqrt((g-c)*(g-c)+(k-e)*(k-e));q=(k-e)/t;l=(g-c)/t;v=t/d;if(1<v){for(u=1;u<=v-1;u++)p=u*d,m=l*p+c,p=q*p+e,h.push([m,p]);u=(t+Math.floor(v-1)*d)/2;m=l*u+c;p=q*u+e;h.push([m,p])}h.push([g,k])}});return g?new e({paths:f,spatialReference:b.spatialReference}):new c({rings:f,spatialReference:b.spatialReference})}
function t(c,d,e){d&&(c=u(c,1E6),c=b.webMercatorToGeographic(c,!0));e&&(c=v(c,e));return c}function x(b,c,d){var e=b.x||b[0],g;e>c?(g=r(e,c),b.x?b=b.offset(-2*g*c,0):b[0]=e+-2*g*c):e<d&&(g=r(e,d),b.x?b=b.offset(-2*g*d,0):b[0]=e+-2*g*d);return b}function w(b,c){var d=-1;m.forEach(c.cutIndexes,function(e,g){var f=c.geometries[g];m.forEach(f.rings||f.paths,function(b,c){m.some(b,function(d){if(!(180>d[0])){d=0;var e,g=b.length,h;for(e=0;e<g;e++)h=b[e][0],d=h>d?h:d;d=Number(d.toFixed(9));d=-360*r(d,180);
g=b.length;for(e=0;e<g;e++)h=f.getPoint(c,e),f.setPoint(c,e,h.offset(d,0))}return!0})});e===d?f.rings?m.forEach(f.rings,function(c){b[e]=b[e].addRing(c)}):m.forEach(f.paths,function(c){b[e]=b[e].addPath(c)}):(d=e,b[e]=f)});return b}function y(g,k,u,q){var l=new f;l.addCallbacks(u,q);k=k||h.defaults.geometryService;var p=[],C=[],B,y,A,G,E,F,z,H,D=0;m.forEach(g,function(b){if(b)if(B||(B=b.spatialReference,y=B._getInfo(),G=(A=B._isWebMercator())?2.0037508342788905E7:180,E=A?-2.0037508342788905E7:-180,
F=A?102100:4326,z=new e({paths:[[[G,E],[G,G]]],spatialReference:{wkid:F}}),H=new e({paths:[[[E,E],[E,G]]],spatialReference:{wkid:F}})),y){var g=d.fromJson(b.toJson()),f=b.getExtent();"point"===b.type?p.push(x(g,G,E)):"multipoint"===b.type?(g.points=m.map(g.points,function(b){return x(b,G,E)}),p.push(g)):"extent"===b.type?(g=f._normalize(null,null,y),p.push(g.rings?new c(g):g)):f?(b=2*r(f.xmin,E)*G,g=0===b?g:v(g,b),f=f.offset(b,0),f.intersects(z)&&f.xmax!==G?(D=f.xmax>D?f.xmax:D,g=t(g,A),C.push(g),
p.push("cut")):f.intersects(H)&&f.xmin!==E?(D=2*f.xmax*G>D?2*f.xmax*G:D,g=t(g,A,360),C.push(g),p.push("cut")):p.push(g)):p.push(g)}else p.push(b);else p.push(b)});u=new e;q=r(D,G);for(var S=-90,ma=q;0<q;){var ha=-180+360*q;u.addPath([[ha,S],[ha,-1*S]]);S*=-1;q--}0<C.length&&0<ma?k?k.cut(C,u,function(c){C=w(C,c);var d=[];m.forEach(p,function(c,e){"cut"===c&&(c=C.shift(),g[e].rings&&1<g[e].rings.length&&c.rings.length>=g[e].rings.length?(p[e]="simplify",d.push(c)):p[e]=!0===A?b.geographicToWebMercator(c):
c)});0<d.length?k.simplify(d,function(c){m.forEach(p,function(d,e){"simplify"===d&&(p[e]=!0===A?b.geographicToWebMercator(c.shift()):c.shift())});l.callback(p)},function(b){l.errback(b)}):l.callback(p)},function(b){l.errback(b)}):l.errback(Error("esri.geometry.normalizeCentralMeridian: 'geometryService' argument is missing.")):(m.forEach(p,function(c,d){"cut"===c&&(c=C.shift(),p[d]=!0===A?b.geographicToWebMercator(c):c)}),l.callback(p));return l}function z(b,c,d,e){var g=!1,f;p.isObject(b)&&b&&(p.isArray(b)?
b.length&&((f=b[0]&&b[0].declaredClass)&&-1!==f.indexOf("Graphic")?(b=m.map(b,function(b){return b.geometry}),g=b.length?!0:!1):f&&-1!==f.indexOf("esri.geometry.")&&(g=!0)):(f=b.declaredClass)&&-1!==f.indexOf("FeatureSet")?(b=m.map(b.features||[],function(b){return b.geometry}),g=b.length?!0:!1):f&&-1!==f.indexOf("esri.geometry.")&&(g=!0));g&&c.push({index:d,property:e,value:b})}function B(b,c){var d=[];m.forEach(c,function(c){var e=c.i,g=b[e];c=c.p;var f;if(p.isObject(g)&&g)if(c)if("*"===c[0])for(f in g)g.hasOwnProperty(f)&&
z(g[f],d,e,f);else m.forEach(c,function(b){z(p.getObject(b,!1,g),d,e,b)});else z(g,d,e)});return d}function A(b,c){var d=0,e={};m.forEach(c,function(c){var g=c.index,f=c.property,h=c.value,k=h.length||1,r=b.slice(d,d+k);p.isArray(h)||(r=r[0]);d+=k;delete c.value;f?(e[g]=e[g]||{},e[g][f]=r):e[g]=r});return e}function C(b){for(var c=[],d=0,e=0,g=Math.min,f=Math.max,h=0;h<b.length;h++){for(var k=b[h],r=null,u=0;u<k.length;u++)r=k[u],c.push(r),0===u?e=d=r[0]:(d=g(d,r[0]),e=f(e,r[0]));r&&c.push([(d+e)/
2,0])}return c}var F={normalizeCentralMeridian:y,_foldCutResults:w,_prepareGeometryForCut:t,_offsetMagnitude:r,_pointNormalization:x,_updatePolyGeometry:v,_straightLineDensify:u,_createWrappers:function(b){var c=p.isObject(b)?b.prototype:p.getObject(b+".prototype");m.forEach(c.__msigns,function(b){var d=c[b.n];c[b.n]=function(){var c=this,e=[],g,h=new f(q._dfdCanceller);b.f&&q._fixDfd(h);for(g=0;g<b.c;g++)e[g]=arguments[g];var k={dfd:h};e.push(k);var r,u=[],t;c.normalization&&!c._isTable&&(r=B(e,
b.a),m.forEach(r,function(b){u=u.concat(b.value)}),u.length&&(t=y(u)));t?(h._pendingDfd=t,t.addCallbacks(function(b){h.canceled||(k.assembly=A(b,r),h._pendingDfd=d.apply(c,e))},function(d){var g=c.declaredClass;g&&-1!==g.indexOf("FeatureLayer")?c._resolve([d],null,e[b.e],h,!0):c._errorHandler(d,e[b.e],h)})):h._pendingDfd=d.apply(c,e);return h}})},_disassemble:B,_addToBucket:z,_reassemble:A,getDenormalizedExtent:function(b){if(!b)return null;var c=b.getExtent();if(!c)return null;var d=b.spatialReference&&
b.spatialReference._getInfo();if(!d)return c;var e=d.valid[0],d=d.valid[1],f=2*d,h=c.getWidth(),k=c.xmax,r=c.xmin;if("extent"===b.type||0===h||h<=d||h>f||k<e||r>d)return c;var u;switch(b.type){case "polygon":if(1<b.rings.length)u=C(b.rings);else return c;break;case "polyline":if(1<b.paths.length)u=C(b.paths);else return c;break;case "multipoint":u=b.points}b=Math.min;for(var e=Math.max,f=new g(c.toJson()),t=0;t<u.length;t++){var q=u[t][0];0>q?(q+=d,r=e(q,r)):(q-=d,k=b(q,k))}f.xmin=k;f.xmax=r;return f.getWidth()<
h?(f.xmin-=d,f.xmax-=d,f):c}};l("extend-esri")&&p.mixin(p.getObject("geometry",!0,k),F);return F})},"esri/geometry/jsonUtils":function(){define("esri/geometry/jsonUtils","dojo/_base/lang dojo/has ../kernel ../lang ./Point ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),function(m,p,f,l,k,h,q,g,e){function c(b,c,d){var e=b.rings||b.paths,g,f,h,k,r,u,t,q;g=0;for(f=e.length;g<f;g++)for(r=e[g],h=0,k=r.length;h<k;h++)u=r[h],0<h?(t+=u[0],q+=u[1]):(t=u[0],q=u[1]),u[0]=c(t),u[1]=d(q);return b}var b=
{esriGeometryPoint:function(b,c,d){b.x=c(b.x);b.y=d(b.y);return b},esriGeometryPolyline:c,esriGeometryPolygon:c,esriGeometryEnvelope:function(b,c,d){b.xmin=c(b.xmin);b.ymin=d(b.ymin);b.xmax=c(b.xmax);b.ymax=d(b.ymax);return b},esriGeometryMultipoint:function(b,c,d){var e=b.points,g,f,h,k,r;g=0;for(f=e.length;g<f;g++)h=e[g],0<g?(k+=h[0],r+=h[1]):(k=h[0],r=h[1]),h[0]=c(k),h[1]=d(r);return b}},d={esriGeometryPoint:function(b,c,d){b.x=c(b.x);b.y=d(b.y);return b}},r={createInstance:function(b,c){b=new b;
c&&l.mixin(b,c);return b},fromJson:function(b){if(void 0!==b.x&&void 0!==b.y)return new k(b);if(void 0!==b.paths)return new h(b);if(void 0!==b.rings)return new q(b);if(void 0!==b.points)return new g(b);if(void 0!==b.xmin&&void 0!==b.ymin&&void 0!==b.xmax&&void 0!==b.ymax)return new e(b)},getJsonType:function(b){return b instanceof k?"esriGeometryPoint":b instanceof h?"esriGeometryPolyline":b instanceof q?"esriGeometryPolygon":b instanceof e?"esriGeometryEnvelope":b instanceof g?"esriGeometryMultipoint":
null},getGeometryType:function(b){return"esriGeometryPoint"===b?k:"esriGeometryPolyline"===b?h:"esriGeometryPolygon"===b?q:"esriGeometryEnvelope"===b?e:"esriGeometryMultipoint"===b?g:null},supportsLazyUnquantization:function(b){return"esriGeometryPoint"===b||"esriGeometryPolyline"===b||"esriGeometryPolygon"===b||"esriGeometryMultipoint"===b},unquantizeFunction:function(c,d){if(c&&d){var e=d.translate[0],g=d.translate[1],f=d.scale[0],h=d.scale[1],k=function(b){return b*f+e},r=function(b){return g-
b*h},u=b[c];return function(b){return b?u(b,k,r):null}}},unquantize:function(b,c,d){if(c=r.unquantizeFunction(c,d)){var e=b.length;for(d=0;d<e;d++)c(b[d].geometry)}},quantizeFunction:function(b,c){if(b&&"esriGeometryPoint"===b&&c){var e=c.translate[0],g=c.translate[1],f=c.scale[0],h=c.scale[1],k=function(b){return Math.round((b-e)/f)},r=function(b){return Math.round((g-b)/h)},u=d[b];return function(b){return b?u(b,k,r):null}}},quantize:function(b,c,d){if(c=r.quantizeFunction(c,d)){var e=b.length;
for(d=0;d<e;d++)c(b[d].geometry)}}};p("extend-esri")&&m.mixin(m.getObject("geometry",!0,f),r);return r})},"esri/InfoWindowBase":function(){define("esri/InfoWindowBase","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Deferred dojo/dom-construct dojo/has dijit/registry ./kernel ./lang ./geometry/ScreenPoint".split(" "),function(m,p,f,l,k,h,q,g,e,c,b){m=m(null,{declaredClass:"esri.InfoWindowBase",constructor:function(){var b=p.hitch;this.__set_title=b(this,this.__set_title);
this.__err_title=b(this,this.__err_title);this.__set_content=b(this,this.__set_content);this.__err_content=b(this,this.__err_content)},setMap:function(b){this.map=b},unsetMap:function(b){delete this.map},setTitle:function(){},setContent:function(){},show:function(){},hide:function(){},resize:function(){},onShow:function(){},onHide:function(){},place:function(b,e){c.isDefined(b)?p.isObject(b)?h.place(b,e,"only"):e.innerHTML=b:e.innerHTML=""},startupDijits:function(b){this._processDijits(b)},destroyDijits:function(b){this._processDijits(b,
!0)},getDijits:function(b){var c=[];b&&1===b.children.length&&(b=b.children[0])&&(c=(c=g.byNode(b))?[c]:g.findWidgets(b));return c},_processDijits:function(b,c){b=this.getDijits(b);f.forEach(b,function(b){if(c){if(b._started&&!b._destroyed)try{b.destroyRecursive?b.destroyRecursive():b.destroy&&b.destroy()}catch(u){}}else if(!b._started)try{b.startup()}catch(u){}})},__registerMapListeners:function(){this.__unregisterMapListeners();var b=this.map;this.__handles=[l.connect(b,"onPan",this,this.__onMapPan),
l.connect(b,"onZoomStart",this,this.__onMapZmStart),l.connect(b,"onExtentChange",this,this.__onMapExtChg)]},__unregisterMapListeners:function(){var b=this.__handles;b&&(f.forEach(b,l.disconnect,l),this.__handles=null)},__onMapPan:function(b,c){this.move(c,!0)},__onMapZmStart:function(){this.__mcoords=this.mapCoords||this.map.toMap(new b(this.coords));this.hide(null,!0)},__onMapExtChg:function(b,c,e){b=this.map;var d=this.mapCoords;d?this.show(d,null,!0):(c=e?b.toScreen(this.__mcoords):this.coords.offset(c&&
c.x||0,c&&c.y||0),this.show(c,null,!0))},__setValue:function(b,e){this[b].innerHTML="";var d="_dfd"+b,g=this[d];g&&-1===g.fired&&(g.cancel(),this[d]=null);c.isDefined(e)&&(e instanceof k?(this[d]=e,e.addCallbacks(this["__set"+b],this["__err"+b])):this.__render(b,e))},__set_title:function(b){this._dfd_title=null;this.__render("_title",b)},__err_title:function(b){this._dfd_title=null},__set_content:function(b){this._dfd_content=null;this.__render("_content",b)},__err_content:function(b){this._dfd_content=
null},__render:function(b,c){var d=this[b];this.place(c,d);this.isShowing&&(this.startupDijits(d),"_title"===b&&this._adjustContentArea&&this._adjustContentArea())}});q("extend-esri")&&(e.InfoWindowBase=m);return m})},"esri/PopupBase":function(){define("esri/PopupBase","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Color dojo/_base/Deferred dojo/has ./kernel ./graphic ./geometry/Point ./geometry/jsonUtils ./geometry/mathUtils ./geometry/webMercatorUtils ./symbols/SimpleMarkerSymbol ./symbols/SimpleLineSymbol ./symbols/CartographicLineSymbol ./symbols/SimpleFillSymbol ./tasks/query ./Evented dojo/has!extend-esri?./PopupInfo".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x,w){function y(b){return"sizeInfo"===b.type}m=m(w,{declaredClass:"esri.PopupBase",_featureLayers:{},_updateEndHandles:[],_mapLevelChangeHandle:null,_evtMap:{"set-features":!0,"clear-features":!0,"selection-change":!0,"dfd-complete":!0},onSetFeatures:function(){},onClearFeatures:function(){},onSelectionChange:function(){},onDfdComplete:function(){},initialize:function(){this.count=0;this.selectedIndex=-1;this.on("clear-features",p.hitch(this,this._resetUpdateEndListeners));
this.on("dfd-complete",p.hitch(this,this._processFeatures));this.on("set-features",p.hitch(this,this._processFeatures));this.on("selection-change",p.hitch(this,this._checkFeatureResolution))},cleanup:function(){this.features=this.deferreds=null;this._resetUpdateEndListeners();this._untrackMapLevelChange()},setFeatures:function(b){if(b&&b.length){this.clearFeatures(!0);var c,d;b[0]instanceof k?d=b:c=b;c?this._updateFeatures(null,c):(this.deferreds=d,d=d.slice(0),f.forEach(d,function(b){b.addBoth(p.hitch(this,
this._updateFeatures,b))},this))}},clearFeatures:function(b){this.features=this.deferreds=this._marked=null;this.count=0;var c=this.selectedIndex;this.selectedIndex=-1;if(-1<c)this.onSelectionChange();this.onClearFeatures({isIntermediate:!!b})},getSelectedFeature:function(){var b=this.features;if(b)return b[this.selectedIndex]},select:function(b){0>b||b>=this.count||(this.selectedIndex=b,this.onSelectionChange())},enableHighlight:function(b){this._highlighted=b.graphics.add(new g(new e(0,0,b.spatialReference)));
this._highlighted.attr("data-popup-highlight","");this._highlighted.hide();this._trackMapLevelChange(b);this.markerSymbol||(b=this.markerSymbol=new r,b.setStyle(r.STYLE_TARGET),b._setDim(16,16,0),b.setOutline(new u(v.STYLE_SOLID,new l([0,255,255]),2,u.CAP_ROUND,u.JOIN_ROUND)),b.setColor(new l([0,0,0,0])));this.lineSymbol||(this.lineSymbol=new v(v.STYLE_SOLID,new l([0,255,255]),2));this.fillSymbol||(this.fillSymbol=new t(t.STYLE_NULL,new v(v.STYLE_SOLID,new l([0,255,255]),2),new l([0,0,0,0])));this.clusterFillSymbol||
(this.clusterFillSymbol=new t(t.STYLE_SOLID,new v(v.STYLE_SOLID,new l([0,255,255]),1.33),null))},disableHighlight:function(b){var c=this._highlighted;c&&(c.hide(),b.graphics.remove(c),delete this._highlighted);this._untrackMapLevelChange();this.markerSymbol=this.lineSymbol=this.fillSymbol=null},showHighlight:function(){var b=this.features&&this.features[this.selectedIndex];this._highlighted&&b&&b.geometry&&this._highlighted.show()},hideHighlight:function(){this._highlighted&&this._highlighted.hide()},
updateHighlight:function(b,d){var e=d.geometry,g=this._highlighted;if(e&&g){g.hide();!g._graphicsLayer&&b&&b.graphics.add(g);g.setGeometry(c.fromJson(e.toJson()));var f;switch(e.type){case "point":case "multipoint":var h=d.getLayer(),k=d.symbol||h&&h._getSymbol(d);if(h&&k){var r,u,e=k.xoffset||0,t=k.yoffset||0,q=k.angle||0;switch(k.type){case "simplemarkersymbol":r=u=k.size||0;break;case "picturemarkersymbol":r=k.width||0;u=k.height||0;break;case "textsymbol":r=u=k.font&&k.font.size||0}f=d.symbol?
null:h._getRenderer(d);(h=this._getSizeInfo(f))?b=d=f.getSize(d,{sizeInfo:h,shape:k.style,resolution:b&&b.getResolutionInMeters&&b.getResolutionInMeters()}):null!=d.size?b=d=d.size:(b=r,d=u);f=this.markerSymbol;b&&d&&(e&&(e=e/r*b),t&&(t=t/u*d),f._setDim(b+4,d+4,0));f.setOffset(e,t);f.setAngle(q)}break;case "polyline":f=this.lineSymbol;break;case "polygon":f=this.fillSymbol}g.setSymbol(f)}else g&&g.hide()},showClosestFirst:function(c){var e=this.features;if(e&&e.length){if(1<e.length){var g,f=Infinity,
h=-1,k,r=b.getLength,u,t=c.spatialReference,q,l;c=c.normalize();for(g=e.length-1;0<=g;g--)if(k=e[g].geometry){q=k.spatialReference;u=0;try{l="point"===k.type?k:k.getExtent().getCenter(),l=l.normalize(),t&&q&&!t.equals(q)&&t._canProject(q)&&(l=t.isWebMercator()?d.geographicToWebMercator(l):d.webMercatorToGeographic(l)),u=r(c,l)}catch(Q){}0<u&&u<f&&(f=u,h=g)}0<h&&(e.splice(0,0,e.splice(h,1)[0]),this.select(0))}}else this.deferreds&&(this._marked=c)},_trackMapLevelChange:function(b){this._untrackMapLevelChange();
this._mapLevelChangeHandle=b.on("extent-change",p.hitch(this,function(b){b.levelChange&&this._checkFeatureResolution()}))},_untrackMapLevelChange:function(){this._mapLevelChangeHandle&&(this._mapLevelChangeHandle.remove(),this._mapLevelChangeHandle=null)},_unbind:function(b){b=f.indexOf(this.deferreds,b);if(-1!==b)return this.deferreds.splice(b,1),this.deferreds.length?1:(this.deferreds=null,2)},_fireComplete:function(b){var c=this._marked;c&&(this._marked=null,this.showClosestFirst(c));this.onDfdComplete(b)},
_updateFeatures:function(b,c){if(b){if(this.deferreds&&(b=this._unbind(b)))if(c&&c instanceof Error){if(this._fireComplete(c),2===b)this.onSetFeatures()}else if(c&&c.length)if(this.features){if(c=f.filter(c,function(b){return-1===f.indexOf(this.features,b)},this),this.features=this.features.concat(c),this.count=this.features.length,this._fireComplete(),2===b)this.onSetFeatures()}else{this.features=c;this.count=c.length;this.selectedIndex=0;this._fireComplete();if(2===b)this.onSetFeatures();this.select(0)}else if(this._fireComplete(),
2===b)this.onSetFeatures()}else this.features=c,this.count=c.length,this.selectedIndex=0,this.onSetFeatures(),this.select(0)},_getSizeInfo:function(b){return b?b.sizeInfo||f.filter(b.visualVariables,y)[0]:null},_resetUpdateEndListeners:function(){this._featureLayers={};f.forEach(this._updateEndHandles,function(b){b.remove()});this._updateEndHandles=[]},_processFeatures:function(){f.forEach(this.features,function(b){(b=b.getLayer())&&!this._featureLayers[b.id]&&(1===b.currentMode||0===b.currentMode&&
6===b.mode)&&b.objectIdField&&b.hasXYFootprint&&b.queryFeatures&&(this._featureLayers[b.id]=b,b=b.on("update-end",p.hitch(this,this._fLyrUpdateEndHandler)),this._updateEndHandles.push(b))},this)},_fLyrUpdateEndHandler:function(b){if(!b.error){var c=this,d=b.target,e=d.getSelectedFeatures(),g=0===d.currentMode&&6===d.mode,h={},k=[];f.forEach(this.features,function(b){if(b.getLayer()===d){var c=b.attributes[d.objectIdField];h[c]=b;k.push(c)}});k.length&&(b=new x,b.objectIds=k,d.queryFeatures(b,function(b){f.forEach(b.features,
function(b){var c=h[b.attributes[d.objectIdField]],k=!1;c.geometry!==b.geometry||d.hasWebGLSurface()?(c.setGeometry(b.geometry),k=!0):g&&e&&-1!==f.indexOf(e,b)&&(k=!0);k&&this._highlighted&&c===this.getSelectedFeature()&&this._highlighted.setGeometry(b.geometry)},c)}))}},_checkFeatureResolution:function(){var b=this.getSelectedFeature(),c=this.map;if(b&&c){var d=b.getLayer();if(d){var e=b.getResolution();2===d.currentMode&&b.geometry&&e&&e>c.getResolution()&&(c=c.getResolutionForPopup(),(d=this._refetchFeature(b,
c,d))&&d.then(p.hitch(this,this._updateFeatureResolution,b,c)))}}},_refetchFeature:function(b,c,d){if(b=this._createQueryForCustomResolution(b,c,d))return d.queryFeatures(b).then(function(b){return b&&b.features[0]})},_createQueryForCustomResolution:function(b,c,d){d=d.objectIdField;var e=b.attributes,e=e&&d&&e[d];if(null==e)return null;var g=new x;g.objectIds=[e];g.maxAllowableOffset=c;g.outFields=[d];g.outSpatialReference=b.geometry.spatialReference;return g},_updateFeatureResolution:function(b,
c,d){b.getResolution()!==c&&(b.setResolution(c),b.setGeometry(d.geometry),this._highlighted&&b===this.getSelectedFeature()&&this._highlighted.setGeometry(b.geometry))}});h("extend-esri")&&(q.PopupBase=m);return m})},"esri/graphic":function(){define("esri/graphic","dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./domUtils ./lang ./InfoTemplate ./geometry/jsonUtils ./symbols/jsonUtils".split(" "),function(m,p,f,l,k,h,q,g,e){function c(){}m=m(null,{declaredClass:"esri.Graphic",constructor:function(b,
c,f,h){this._construct();b&&!b.declaredClass?(this.geometry=b.geometry?g.fromJson(b.geometry):null,this.symbol=b.symbol?e.fromJson(b.symbol):null,this.attributes=b.attributes||null,this.infoTemplate=b.infoTemplate?new q(b.infoTemplate):null):(this.geometry=b,this.symbol=c,this.attributes=f,this.infoTemplate=h)},_geomVersion:0,_resolution:null,_shape:null,_bgShape:null,_dataAttrs:null,_layer:null,_sourceLayer:null,_graphicsLayer:null,_parentGraphic:null,_suspended:!1,size:null,visible:!0,_aggregationSourceLayer:null,
_aggregationInfo:null,_computedAttributes:null,_computedVersion:null,_computedGeomVersion:null,getParentGraphic:function(){return this._parentGraphic},setParentGraphic:function(b){this._parentGraphic=b},setSize:function(b){this.size=b;return this},getAggregationSourceLayer:function(){return this._aggregationSourceLayer},setAggregationSourceLayer:function(b){this._aggregationSourceLayer=b;return this},isAggregate:function(){return!!this._aggregationInfo},getAggregationInfo:function(){return this._aggregationInfo},
setAggregationInfo:function(b){this._aggregationInfo=b;return this},getChildGraphics:function(){var b=this.getAggregationSourceLayer();return b?b.getChildGraphics(this):[]},getDojoShape:function(){return this._shape},getShapes:function(){var b=[];this._shape&&b.push(this._shape);this._bgShape&&b.push(this._bgShape);return b},getNode:function(){var b=this._shape&&this._shape.getNode();return b&&b.nodeType?b:null},getNodes:function(){var b=this.getShapes(),c,e,g=b.length,f=[];for(e=0;e<g;e++)(c=b[e]&&
b[e].getNode())&&c.nodeType&&f.push(c);return f},getLayer:function(){return this._layer},getSourceLayer:function(){return this._sourceLayer||this._layer},clone:function(){var b=new this.constructor(this.toJson());b.visible=this.visible;b._layer=this._layer;b._sourceLayer=this._sourceLayer;b._aggregationSourceLayer=this._aggregationSourceLayer;b._aggregationInfo=this._aggregationInfo;b._resolution=this._resolution;return b},draw:function(){var b=this._graphicsLayer;b&&b._draw(this,!0);return this},
setGeometry:function(b){this.geometry=b;this._geomVersion++;var c=this._graphicsLayer;c&&(c._updateExtent(this),this.draw(),b&&"polyline"===b.type&&c._updateSVGMarkers());return this},setResolution:function(b){this._resolution=b;return this},getResolution:function(){return this._resolution},setSymbol:function(b,c){var d=this._graphicsLayer,e=this._shape;this.symbol=b;d&&(c&&e&&d._removeShape(this),this.draw());return this},setAttributes:function(b){this.attributes=b;this.clearCache();return this},
setInfoTemplate:function(b){this.infoTemplate=b;return this},getInfoTemplate:function(){return this._getEffInfoTemplate()},_getEffInfoTemplate:function(){var b=this.getLayer();return this.infoTemplate||b&&b.infoTemplate},getTitle:function(){var b=this.getInfoTemplate(),c=b&&b.title;if(p.isFunction(c))c=c.call(b,this);else if(p.isString(c))var e=(b=this.getLayer())&&b._getDateOpts,c=h.substitute(this.attributes,c,{first:!0,dateFormat:e&&e.call(b)});return c},getContent:function(){var b=this.getInfoTemplate(),
c=b&&b.content;if(p.isFunction(c))c=c.call(b,this);else if(p.isString(c))var e=(b=this.getLayer())&&b._getDateOpts,c=h.substitute(this.attributes,c,{dateFormat:e&&e.call(b)});return c},attr:function(b,c){null==c||this._dataAttrs||(this._dataAttrs={});this._dataAttrs&&(this._dataAttrs[b]=c,this._setDataAttr(b,c));return this},_isSuspended:function(){return this._suspended},_suspend:function(){this._suspended=!0;this.draw()},_resume:function(){this._suspended=!1;this.draw()},show:function(){this.visible=
!0;this.attr("data-hidden");var b,c,e;if(this.getShapes().length)for(b=this.getNodes(),e=b.length,c=0;c<e;c++)k.show(b[c]);else this.draw();(b=this._graphicsLayer)&&b._graphicVisibilityChanged(this);return this},hide:function(){this.visible=!1;this.attr("data-hidden","");var b=this._graphicsLayer,c,e,g;if(b){if("canvas-2d"===b.surfaceType)b._removeShape(this);else if(c=this.getNodes(),g=c.length)for(e=0;e<g;e++)k.hide(c[e]);b._graphicVisibilityChanged(this)}return this},toJson:function(){var b={};
this.geometry&&(b.geometry=this.geometry.toJson());this.attributes&&(b.attributes=p.mixin({},this.attributes));this.symbol&&(b.symbol=this.symbol.toJson());this.infoTemplate&&(b.infoTemplate=this.infoTemplate.toJson());return b},_setDataAttr:function(b,c){var d=this.getNodes(),e,g=d.length;for(e=0;e<g;e++)this._setDOMDataAttr(d[e],b,c)},_setDOMDataAttr:function(b,c,e){null==e?b.removeAttribute(c):b.setAttribute(c,e)},_applyDataAttrs:function(){var b=this._dataAttrs;if(b){var c=this.getNodes(),e,g=
c.length;for(e=0;e<g;e++)for(var f in b)this._setDOMDataAttr(c[e],f,b[f])}},_getViewInfo:function(b){return(b=(b=b||this.getLayer())&&b.getMap())&&b.getViewInfo()},evaluateExpression:function(b,c){return this._getDataValue(b._attributeDef,b._attributeCache,null,null,b,c)},_getDataValue:function(b,c,e,g,f,h){var d=c.id,k=this.attributes,r=b.field,u=c.isNumeric,t=null;if(d){var q=this._computedAttributes,l=this._computedVersion,m=this._computedGeomVersion;g=this._getViewInfo(g);var v=!(!f||!f.async),
p=h&&h.skipCache||v,D=!h||!1!==h.strictReturnType,G=c.dependsOnView||c.isJSFunc,I=c.dependsOnGeometry;q||(q=this._computedAttributes={});G&&!l&&(l=this._computedVersion={});I&&!m&&(m=this._computedGeomVersion={});var P=G&&l[d]!==g.version||I&&m[d]!==this._geomVersion,t=q[d];if(void 0===t||P||p)t=null,c.hasExpr?t=f?f.evaluate(h&&h.context):e.executeFunction(c.compiledFunc,e.createExecContext(this,g)):c.isJSFunc?t=r(this,b):k&&(t=k[r],u&&this._isValidNumber(t)&&(c=b.normalizationType||"field",e=t,t=
null,f=b.normalizationTotal,b=k[b.normalizationField],"log"===c&&0!==e?t=Math.log(e)*Math.LOG10E:"percent-of-total"===c&&this._isValidNumber(f)&&0!==f?t=e/f*100:"field"===c&&this._isValidNumber(b)&&0!==b&&(t=e/b))),D&&(v?u&&(this._construct(),t=t.then(this._sanitizeNumericValue)):t=this._sanitizeValue(t,u)),p||(q[d]=t,G&&(l[d]=g.version),I&&(m[d]=this._geomVersion))}else k&&(t=this._sanitizeValue(k[r],u));return t},_sanitizeValue:function(b,c){c&&!this._isValidNumber(b)&&(b=null);return b},_sanitizeNumericValue:function(b){return this._sanitizeValue(b,
!0)},_construct:function(){this._constructed||(this._sanitizeNumericValue=p.hitch(this,this._sanitizeNumericValue),this._constructed=!0)},_isValidNumber:function(b){return"number"===typeof b&&!isNaN(b)&&Infinity!==b&&-Infinity!==b},clearCache:function(b){if(null!=b){var c=this._computedAttributes,e=this._computedVersion,g=this._computedGeomVersion;c&&(c[b]=void 0);e&&(e[b]=void 0);g&&(g[b]=void 0)}else this._computedAttributes=this._computedVersion=this._computedGeomVersion=null}});m.prototype.getShape=
m.prototype.getDojoShape;c.prototype=m.prototype;m.simpleConstructor=c;f("extend-esri")&&(l.Graphic=m);return m})},"esri/InfoTemplate":function(){define("esri/InfoTemplate",["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel","./lang"],function(m,p,f,l,k){m=m(null,{declaredClass:"esri.InfoTemplate",constructor:function(f,k){f&&p.isObject(f)&&!p.isFunction(f)?p.mixin(this,f):(this.title=f||"${*}",this.content=k||"${*}")},setTitle:function(f){this.title=f;return this},setContent:function(f){this.content=
f;return this},toJson:function(){return k.fixJson({title:this.title,content:this.content})}});f("extend-esri")&&(l.InfoTemplate=m);return m})},"esri/symbols/jsonUtils":function(){define("esri/symbols/jsonUtils","dojo/_base/lang dojo/_base/array dojo/has ../kernel ./SimpleMarkerSymbol ./PictureMarkerSymbol ./SimpleLineSymbol ./CartographicLineSymbol ./SimpleFillSymbol ./PictureFillSymbol ./TextSymbol".split(" "),function(m,p,f,l,k,h,q,g,e,c,b){var d={createDefaultSymbol:function(b){var c;switch(b){case "esriGeometryPoint":case "esriGeometryMultipoint":c=
d.createDefaultMarkerSymbol();break;case "esriGeometryPolyline":c=d.createDefaultLineSymbol();break;case "esriGeometryPolygon":case "esriGeometryEnvelope":case "esriGeometryMultiPatch":c=d.createDefaultFillSymbol()}return c},createDefaultMarkerSymbol:function(){return new k},createDefaultLineSymbol:function(){return new q},createDefaultFillSymbol:function(){return new e},getFirstSupportedSymbol:function(b){var c;p.some(b,function(b){b&&-1<d.supportedSymbolTypes.indexOf(b.type)&&(c=b);return!!c});
return c},isPointSymbol:function(b){return b?-1<d.supportedPointSymbolTypes.indexOf(b.type):!1},supportedPointSymbolTypes:["esriSMS","esriPMS","esriTS"],supportedSymbolTypes:"esriSMS esriPMS esriTS esriSLS esriCLS esriSFS esriPFS".split(" "),fromJson:function(f,l){var r=null;switch(f.type){case "esriSMS":r=new k(f);break;case "esriPMS":r=new h(f);break;case "esriTS":r=new b(f);break;case "esriSLS":r=void 0!==f.cap?new g(f):new q(f);break;case "esriCLS":r=new g(f);break;case "esriSFS":r=new e(f);break;
case "esriPFS":r=new c(f);break;default:r=(f=l&&l.geometryType)?d.createDefaultSymbol(f):null}return r},getShapeDescriptors:function(b){return b&&b.getShapeDescriptors?b.getShapeDescriptors():{defaultShape:null,fill:null,stroke:null}}};f("extend-esri")&&m.mixin(m.getObject("symbol",!0,l),d);return d})},"esri/symbols/PictureMarkerSymbol":function(){define("esri/symbols/PictureMarkerSymbol","dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./MarkerSymbol".split(" "),
function(m,p,f,l,k,h,q,g){var e={url:"",width:12,height:12,angle:0,xoffset:0,yoffset:0};m=m(g,{declaredClass:"esri.symbol.PictureMarkerSymbol",type:"picturemarkersymbol",constructor:function(c,b,d){c?p.isString(c)?(this.url=c,b&&(this.width=b),d&&(this.height=d)):(this.width=l.pt2px(null==c.width?e.width:c.width),this.height=l.pt2px(null==c.height?e.height:c.height),b=c.imageData,9>f("ie")||!b||(d=this.url,this.url="data:"+(c.contentType||"image")+";base64,"+b,this.imageData=d)):(p.mixin(this,e),
this.width=l.pt2px(this.width),this.height=l.pt2px(this.height))},getStroke:function(){return null},getFill:function(){return null},setWidth:function(c){this.width=c;return this},setHeight:function(c){this.height=c;return this},setUrl:function(c){c!==this.url&&(delete this.imageData,delete this.contentType);this.url=c;return this},getShapeDescriptors:function(){return{defaultShape:{type:"image",x:-Math.round(this.width/2),y:-Math.round(this.height/2),width:this.width,height:this.height,src:this.url||
""},fill:null,stroke:null}},toJson:function(){var c=this.url,b=this.imageData;if(0===c.indexOf("data:"))var d=c,c=b,b=d.indexOf(";base64,")+8,b=d.substr(b);!p.isString(c)||0!==c.indexOf("/")&&0!==c.indexOf("//")&&0!==c.indexOf("./")&&0!==c.indexOf("../")||(c=q.getAbsoluteUrl(c));var d=l.px2pt(this.width),d=isNaN(d)?void 0:d,e=l.px2pt(this.height),e=isNaN(e)?void 0:e,c=h.fixJson(p.mixin(this.inherited("toJson",arguments),{type:"esriPMS",url:c,imageData:b,contentType:this.contentType,width:d,height:e}));
delete c.color;delete c.size;c.imageData||delete c.imageData;return c}});m.defaultProps=e;f("extend-esri")&&(p.setObject("symbol.PictureMarkerSymbol",m,k),k.symbol.defaultPictureMarkerSymbol=e);return m})},"esri/symbols/CartographicLineSymbol":function(){define("esri/symbols/CartographicLineSymbol","dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./SimpleLineSymbol".split(" "),function(m,p,f,l,k,h,q,g){var e={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",
STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_INSIDE_FRAME:"insideframe",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot",CAP_BUTT:"butt",CAP_ROUND:"round",CAP_SQUARE:"square",JOIN_MITER:"miter",JOIN_ROUND:"round",JOIN_BEVEL:"bevel"},c={color:[0,0,0,1],style:e.STYLE_SOLID,width:1,cap:e.CAP_BUTT,join:e.JOIN_MITER,miterLimit:10};
m=m(g,{declaredClass:"esri.symbol.CartographicLineSymbol",type:"cartographiclinesymbol",_caps:{butt:"esriLCSButt",round:"esriLCSRound",square:"esriLCSSquare"},_joins:{miter:"esriLJSMiter",round:"esriLJSRound",bevel:"esriLJSBevel"},constructor:function(b,d,e,g,h,t){b?p.isString(b)?(this.style=b,d&&(this.color=d),void 0!==e&&(this.width=e),g&&(this.cap=g),h&&(this.join=h),void 0!==t&&(this.miterLimit=t)):(this.cap=q.valueOf(this._caps,b.cap),this.join=q.valueOf(this._joins,b.join),this.width=k.pt2px(b.width),
this.miterLimit=k.pt2px(b.miterLimit)):(p.mixin(this,c),this.color=new f(this.color),this.width=k.pt2px(this.width),this.miterLimit=k.pt2px(this.miterLimit))},setCap:function(b){this.cap=b;return this},setJoin:function(b){this.join=b;return this},setMiterLimit:function(b){this.miterLimit=b;return this},getStroke:function(){return p.mixin(this.inherited("getStroke",arguments),{cap:this.cap,join:this.join===e.JOIN_MITER?this.miterLimit:this.join})},getFill:function(){return null},getShapeDescriptors:function(){return{defaultShape:{type:"path",
path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()}},toJson:function(){var b=k.px2pt(this.miterLimit),b=isNaN(b)?void 0:b;return q.fixJson(p.mixin(this.inherited("toJson",arguments),{type:"esriCLS",cap:this._caps[this.cap],join:this._joins[this.join],miterLimit:b}))}});p.mixin(m,e);m.defaultProps=c;l("extend-esri")&&(p.setObject("symbol.CartographicLineSymbol",m,h),h.symbol.defaultCartographicLineSymbol=c);return m})},"esri/symbols/SimpleFillSymbol":function(){define("esri/symbols/SimpleFillSymbol",
"dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./FillSymbol ./SimpleLineSymbol require".split(" "),function(m,p,f,l,k,h,q,g,e,c){var b={STYLE_SOLID:"solid",STYLE_NULL:"none",STYLE_HORIZONTAL:"horizontal",STYLE_VERTICAL:"vertical",STYLE_FORWARD_DIAGONAL:"forwarddiagonal",STYLE_BACKWARD_DIAGONAL:"backwarddiagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonalcross",STYLE_FORWARDDIAGONAL:"forwarddiagonal",STYLE_BACKWARDDIAGONAL:"backwarddiagonal",
STYLE_DIAGONALCROSS:"diagonalcross"},d={style:b.STYLE_SOLID,color:[0,0,0,.25]};m=m(g,{declaredClass:"esri.symbol.SimpleFillSymbol",type:"simplefillsymbol",_styles:{solid:"esriSFSSolid",none:"esriSFSNull",horizontal:"esriSFSHorizontal",vertical:"esriSFSVertical",forwarddiagonal:"esriSFSForwardDiagonal",backwarddiagonal:"esriSFSBackwardDiagonal",cross:"esriSFSCross",diagonalcross:"esriSFSDiagonalCross"},constructor:function(b,c,g){b?p.isString(b)?(this.style=b,void 0!==c&&(this.outline=c),void 0!==
g&&(this.color=g)):this.style=q.valueOf(this._styles,b.style):(p.mixin(this,d),this.outline=new e(this.outline),this.color=new f(this.color))},setStyle:function(b){this.style=b;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){var d=this.style;return d===b.STYLE_NULL?null:d===b.STYLE_SOLID?this.color:p.mixin({},k.defaultPattern,{src:c.toUrl("../images/symbol/sfs/"+d+".png"),width:10,height:10})},getShapeDescriptors:function(){return{defaultShape:{type:"path",
path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"},fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){return q.fixJson(p.mixin(this.inherited("toJson",arguments),{type:"esriSFS",style:this._styles[this.style]}))}});p.mixin(m,b);m.defaultProps=d;l("extend-esri")&&(p.setObject("symbol.SimpleFillSymbol",m,h),h.symbol.defaultSimpleFillSymbol=d);return m})},"esri/symbols/FillSymbol":function(){define("esri/symbols/FillSymbol","dojo/_base/declare dojo/_base/lang dojo/has ../kernel ./Symbol ./SimpleLineSymbol".split(" "),
function(m,p,f,l,k,h){m=m(k,{declaredClass:"esri.symbol.FillSymbol",constructor:function(f){f&&p.isObject(f)&&f.outline&&(this.outline=new h(f.outline))},setOutline:function(f){this.outline=f;return this},toJson:function(){var f=this.inherited("toJson",arguments);this.outline&&(f.outline=this.outline.toJson());return f}});f("extend-esri")&&p.setObject("symbol.FillSymbol",m,l);return m})},"esri/symbols/PictureFillSymbol":function(){define("esri/symbols/PictureFillSymbol","dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./FillSymbol".split(" "),
function(m,p,f,l,k,h,q,g){var e={xoffset:0,yoffset:0,width:12,height:12};m=m(g,{declaredClass:"esri.symbol.PictureFillSymbol",type:"picturefillsymbol",xscale:1,yscale:1,xoffset:0,yoffset:0,constructor:function(c,b,d,g){c?p.isString(c)?(this.url=c,void 0!==b&&(this.outline=b),void 0!==d&&(this.width=d),void 0!==g&&(this.height=g)):(this.xoffset=l.pt2px(c.xoffset),this.yoffset=l.pt2px(c.yoffset),this.width=l.pt2px(c.width),this.height=l.pt2px(c.height),b=c.imageData,9>f("ie")||!b||(d=this.url,this.url=
"data:"+(c.contentType||"image")+";base64,"+b,this.imageData=d)):(p.mixin(this,e),this.width=l.pt2px(this.width),this.height=l.pt2px(this.height))},setWidth:function(c){this.width=c;return this},setHeight:function(c){this.height=c;return this},setOffset:function(c,b){this.xoffset=c;this.yoffset=b;return this},setUrl:function(c){c!==this.url&&(delete this.imageData,delete this.contentType);this.url=c;return this},setXScale:function(c){this.xscale=c;return this},setYScale:function(c){this.yscale=c;
return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){return p.mixin({},l.defaultPattern,{src:this.url,width:this.width*this.xscale,height:this.height*this.yscale,x:this.xoffset,y:this.yoffset})},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"},fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){var c=this.url,b=this.imageData;if(0===c.indexOf("data:"))var d=c,c=b,b=d.indexOf(";base64,")+
8,b=d.substr(b);!p.isString(c)||0!==c.indexOf("/")&&0!==c.indexOf("//")&&0!==c.indexOf("./")&&0!==c.indexOf("../")||(c=q.getAbsoluteUrl(c));var d=l.px2pt(this.width),d=isNaN(d)?void 0:d,e=l.px2pt(this.height),e=isNaN(e)?void 0:e,g=l.px2pt(this.xoffset),g=isNaN(g)?void 0:g,f=l.px2pt(this.yoffset),f=isNaN(f)?void 0:f,c=h.fixJson(p.mixin(this.inherited("toJson",arguments),{type:"esriPFS",url:c,imageData:b,contentType:this.contentType,width:d,height:e,xoffset:g,yoffset:f,xscale:this.xscale,yscale:this.yscale}));
c.imageData||delete c.imageData;return c}});m.defaultProps=e;f("extend-esri")&&(p.setObject("symbol.PictureFillSymbol",m,k),k.symbol.defaultPictureFillSymbol=e);return m})},"esri/symbols/TextSymbol":function(){define("esri/symbols/TextSymbol","dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../lang ../Color ./Symbol ./Font".split(" "),function(m,p,f,l,k,h,q,g,e){var c={type:"textsymbol",x:0,y:0,text:"",rotated:!1,kerning:!0,color:[0,0,0,1],font:l.defaultFont,angle:0,xoffset:0,
yoffset:0,horizontalAlignment:"center"},b={start:"left",middle:"center",end:"right"},d={left:"start",center:"middle",right:"end",justify:"start"},r={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},v=document.createElement("canvas");m=m(g,{declaredClass:"esri.symbol.TextSymbol",angle:0,xoffset:0,yoffset:0,constructor:function(b,d,g){p.mixin(this,c);this.font=new e(this.font);this.color=new q(this.color);b&&(p.isObject(b)?(p.mixin(this,b),this.color&&h.isDefined(this.color[0])&&
(this.color=q.toDojoColor(this.color)),this.type="textsymbol",this.font=new e(this.font),this.xoffset=l.pt2px(this.xoffset),this.yoffset=l.pt2px(this.yoffset),this.angle&&(this.angle*=-1),this.haloSize&&(this.haloSize=l.pt2px(this.haloSize)),this.haloColor&&(this.haloColor=q.toDojoColor(this.haloColor))):(this.text=b,d&&(this.font=d),g&&(this.color=g)));this.setAlign(this.align||this.getSVGAlign())},setFont:function(b){this.font=b;return this},setSize:function(b){this.font.size=b;return this},setAngle:function(b){this.angle=
b;return this},setOffset:function(b,c){this.xoffset=b;this.yoffset=c;return this},setHaloColor:function(b){this.haloColor=b;return this},setHaloSize:function(b){this.haloSize=b;return this},setAlign:function(c){this.align=c;this.setHorizontalAlignment(c&&b[c.toLowerCase()]||"center");return this},setHorizontalAlignment:function(b){this.horizontalAlignment=b;return this},getSVGAlign:function(){var b=this.horizontalAlignment;return b=b&&d[b.toLowerCase()]||"middle"},setVerticalAlignment:function(b){this.verticalAlignment=
b;return this},getSVGBaseline:function(){var b=this.verticalAlignment;return b&&r[b.toLowerCase()]||"alphabetic"},getSVGBaselineShift:function(){return"bottom"===this.verticalAlignment?"super":null},setDecoration:function(b){this.decoration=b;this.font||this.setFont(new e);this.font.setDecoration(b);return this},setRotated:function(b){this.rotated=b;return this},setKerning:function(b){this.kerning=b;return this},setText:function(b){this.text=b;return this},getStroke:function(){return null},getFill:function(){return this.color},
getWidth:function(){var b=v&&v.getContext&&v.getContext("2d");if(b){var c=this.font;b.font=(c.style?c.style:l.defaultFont.style)+" "+(c.weight?c.weight:l.defaultFont.weight)+" "+(c.size?c.size:l.defaultFont.size)+"px "+(c.family?c.family:l.defaultFont.family);return b.measureText(this.text).width}var b=this.getHeight(),c=0,d,e;for(d=0;d<this.text.length;d++)e=this.text.charAt(d),c=e==e.toUpperCase()?c+.7*b:c+.5*b;return c},getHeight:function(){return l.normalizedLength(this.font.size)},getShapeDescriptors:function(){var b=
this.font,c;b&&(c={},b.size&&(c.size=b.size),b.style&&(c.style=b.style),b.variant&&(c.variant=b.variant),b.decoration&&(c.decoration=b.decoration),b.weight&&(c.weight=b.weight),b.family&&(c.family=b.family));return{defaultShape:{type:"text",text:this.text,x:0,y:this.getHeight()/4,align:"middle",decoration:this.decoration||b&&b.decoration,rotated:this.rotated,kerning:this.kerning},font:c,fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){var b=l.px2pt(this.xoffset),c=l.px2pt(this.yoffset),
d=l.px2pt(this.haloSize),b=isNaN(b)?void 0:b,c=isNaN(c)?void 0:c,d=isNaN(d)?void 0:d;return h.fixJson(p.mixin(this.inherited("toJson",arguments),{type:"esriTS",backgroundColor:this.backgroundColor,borderLineColor:this.borderLineColor,borderLineSize:this.borderLineSize,haloSize:d,haloColor:this.haloColor&&q.toJsonColor(this.haloColor),verticalAlignment:this.verticalAlignment,horizontalAlignment:this.horizontalAlignment,rightToLeft:this.rightToLeft,width:this.width,angle:this.angle&&-1*this.angle,xoffset:b,
yoffset:c,text:this.text,rotated:this.rotated,kerning:this.kerning,font:this.font.toJson()}))}});p.mixin(m,{ALIGN_START:"start",ALIGN_MIDDLE:"middle",ALIGN_END:"end",DECORATION_NONE:"none",DECORATION_UNDERLINE:"underline",DECORATION_OVERLINE:"overline",DECORATION_LINETHROUGH:"line-through"});m.defaultProps=c;f("extend-esri")&&(p.setObject("symbol.TextSymbol",m,k),k.symbol.defaultTextSymbol=c);return m})},"esri/symbols/Font":function(){define("esri/symbols/Font","dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang".split(" "),
function(m,p,f,l,k,h){m=m(null,{declaredClass:"esri.symbol.Font",constructor:function(h,g,e,c,b){h?p.isObject(h)?p.mixin(this,h):(this.size=h,parseFloat(this.size)==this.size&&(this.size+="px"),void 0!==g&&(this.style=g),void 0!==e&&(this.variant=e),void 0!==c&&(this.weight=c),void 0!==b&&(this.family=b)):p.mixin(this,l.defaultFont);parseFloat(this.size)==this.size&&(this.size+="pt");9>f("ie")&&this.size&&p.isString(this.size)&&-1<this.size.indexOf("em")&&(this.size=l.pt2px(12*parseFloat(this.size))+
"px");this.size=this._convert2PxSize(this.size)},setSize:function(f){this.size=this._convert2PxSize(f);return this},_convert2PxSize:function(f){var g;parseFloat(f)==f?g=f:p.isString(f)&&(-1<f.indexOf("pt")?g=l.pt2px(parseFloat(f)):-1<f.indexOf("px")?g=parseFloat(f):-1<f.indexOf("em")?g=l.pt2px(12*parseFloat(f)):-1<f.indexOf("%")&&(g=l.pt2px(.12*parseFloat(f))));return g},setStyle:function(f){this.style=f;return this},setVariant:function(f){this.variant=f;return this},setWeight:function(f){this.weight=
f;return this},setFamily:function(f){this.family=f;return this},setDecoration:function(f){this.decoration=f;return this},toJson:function(){return h.fixJson({size:l.px2pt(this.size),style:this.style,decoration:this.decoration,weight:this.weight,family:this.family})}});p.mixin(m,{STYLE_NORMAL:"normal",STYLE_ITALIC:"italic",STYLE_OBLIQUE:"oblique",VARIANT_NORMAL:"normal",VARIANT_SMALLCAPS:"small-caps",WEIGHT_NORMAL:"normal",WEIGHT_BOLD:"bold",WEIGHT_BOLDER:"bolder",WEIGHT_LIGHTER:"lighter"});f("extend-esri")&&
p.setObject("symbol.Font",m,k);return m})},"esri/tasks/query":function(){define("esri/tasks/query","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel ../geometry/jsonUtils ./SpatialRelationship dojo/has!extend-esri?./QueryTask dojo/has!extend-esri?./RelationshipQuery dojo/has!extend-esri?./StatisticDefinition".split(" "),function(m,p,f,l,k,h,q,g){var e=m(null,{declaredClass:"esri.tasks.Query",constructor:function(){this.spatialRelationship=e.SPATIAL_REL_INTERSECTS},
text:null,where:"",geometry:null,groupByFieldsForStatistics:null,objectIds:null,returnGeometry:!1,returnCentroid:null,returnDistinctValues:!1,returnExceededLimitFeatures:null,maxRecordCountFactor:null,orderByFields:null,outSpatialReference:null,outFields:null,outStatistics:null,timeExtent:null,relationParam:null,pixelSize:null,distance:null,units:null,resultOffset:null,resultRecordCount:null,resultType:null,cacheHint:null,sqlFormat:null,quantizationParameters:null,_units:{meters:"esriSRUnit_Meter",
kilometers:"esriSRUnit_Kilometer",feet:"esriSRUnit_Foot",miles:"esriSRUnit_StatuteMile","nautical-miles":"esriSRUnit_NauticalMile","us-nautical-miles":"esriSRUnit_USNauticalMile"},toJson:function(c){var b={text:this.text,where:this.where,returnGeometry:this.returnGeometry,spatialRel:this.spatialRelationship,maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision,sqlFormat:this.sqlFormat},d=c&&c.geometry||this.geometry,g=this.objectIds,h=this.outFields,k=this.outSpatialReference,
t=this.groupByFieldsForStatistics,m=this.orderByFields,p=this.outStatistics;c=this.distance;d&&(b.geometry=d,b.geometryType=q.getJsonType(d),b.inSR=d.spatialReference.wkid||l.toJson(d.spatialReference.toJson()));g&&(b.objectIds=g.join(","));h&&(b.outFields=h.join(","));null!=this.returnCentroid&&(b.returnCentroid=this.returnCentroid);this.returnDistinctValues&&(b.returnDistinctValues=!0);null!=this.returnExceededLimitFeatures&&(b.returnExceededLimitFeatures=this.returnExceededLimitFeatures);null!=
this.maxRecordCountFactor&&(b.maxRecordCountFactor=this.maxRecordCountFactor);t&&(b.groupByFieldsForStatistics=t.join(","));m&&(b.orderByFields=m.join(","));if(p){var y=[];f.forEach(p,function(b){y.push(b.toJson())});b.outStatistics=l.toJson(y)}k?b.outSR=k.wkid||l.toJson(k.toJson()):d&&(b.outSR=d.spatialReference.wkid||l.toJson(d.spatialReference.toJson()));d=this.timeExtent;b.time=d?d.toJson().join(","):null;(d=this.relationParam)&&this.spatialRelationship===e.SPATIAL_REL_RELATION&&(b.relationParam=
d);c&&(b.distance=this.distance,this.hasOwnProperty("units")?b.units=this._units[this.units]||this._units.meters:b.units=this._units.meters);this.hasOwnProperty("start")&&(b.resultOffset=this.start,b.resultRecordCount=10,""===b.where&&(b.where="1\x3d1"));this.hasOwnProperty("num")&&(b.resultRecordCount=this.num);b.resultType=this.resultType;null!=this.cacheHint&&(b.cacheHint=this.cacheHint);b.pixelSize=this.pixelSize?l.toJson(this.pixelSize.toJson()):null;b.multipatchOption=this.multipatchOption;
this.quantizationParameters&&(b.quantizationParameters=l.toJson(this.quantizationParameters));b._ts=this._ts;return b}});p.mixin(e,g);k("extend-esri")&&p.setObject("tasks.Query",e,h);return e})},"esri/tasks/SpatialRelationship":function(){define("esri/tasks/SpatialRelationship",["dojo/_base/lang","dojo/has","../kernel"],function(m,p,f){var l={SPATIAL_REL_INTERSECTS:"esriSpatialRelIntersects",SPATIAL_REL_CONTAINS:"esriSpatialRelContains",SPATIAL_REL_CROSSES:"esriSpatialRelCrosses",SPATIAL_REL_ENVELOPEINTERSECTS:"esriSpatialRelEnvelopeIntersects",
SPATIAL_REL_INDEXINTERSECTS:"esriSpatialRelIndexIntersects",SPATIAL_REL_OVERLAPS:"esriSpatialRelOverlaps",SPATIAL_REL_TOUCHES:"esriSpatialRelTouches",SPATIAL_REL_WITHIN:"esriSpatialRelWithin",SPATIAL_REL_RELATION:"esriSpatialRelRelation"};p("extend-esri")&&m.setObject("tasks._SpatialRelationship",l,f);return l})},"esri/plugins/popupManager":function(){define("esri/plugins/popupManager",["../PopupManager"],function(m){return{add:function(p,f){p.popupManager||(p.popupManager=new m(f),p.popupManager.setMap(p))},
remove:function(m){var f=m.popupManager;f&&(f.unsetMap(),m.popupManager=void 0)}}})},"esri/PopupManager":function(){define("esri/PopupManager","./geometry/Extent ./geometry/ScreenPoint ./kernel ./layerUtils ./tasks/query dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/_base/lang esri/sniff dojo/on dojo/promise/all dojo/Stateful require".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u){var t;g=g(v,{declaredClass:"esri.PopupManager",enabled:!1,map:null,_mapClickHandle:null,
_featureLayersCache:{},constructor:function(b){this._mapClickHandler=c.hitch(this,this._mapClickHandler)},setMap:function(b){if(this.map)if(b!==this.map)this.unsetMap();else return;this.map=b;this._setupClickHandler()},unsetMap:function(){this.map&&(this.map=null);this._mapClickHandle&&(this._mapClickHandle.remove(),this._mapClickHandle=null)},getMapLayer:function(b){var c;if(b&&(c=b.getLayer())&&(b=c.id,this._featureLayersCache[b])){var d=b.lastIndexOf("_");-1<d&&(b=b.substring(0,d),c=this.map.getLayer(b))}return c},
_enabledSetter:function(b){this.enabled=b;this._setupClickHandler()},_setupClickHandler:function(){this._mapClickHandle&&(this._mapClickHandle.remove(),this._mapClickHandle=null);this.enabled&&this.map&&(this._mapClickHandle=this.map.on("click",this._mapClickHandler))},_mapClickHandler:function(b){var c=this.map.infoWindow,d=b.graphic;c&&this.map.loaded&&(c.clearFeatures&&c.setFeatures?this._showPopup(b):d&&d.getInfoTemplate()&&this._showInfoWindow(d,b.mapPoint))},_showPopup:function(b){var c=this.map,
d=c.infoWindow,g=this,f=[],h=[c.graphics].concat(q.map(c.graphicsLayerIds,c.getLayer,c));q.forEach(h,function(b){var c=b.getFeatureReduction&&b.getFeatureReduction();b&&b.loaded&&b.infoTemplate&&!b.suspended&&(!c||!g._isReductionEnabled(b)||c.infoTemplate&&!c.disablePopup)&&f.push(b)});var r=[];q.forEach(c.layerIds,function(b){(b=c.getLayer(b))&&b.loaded&&!b.suspended&&(g._isImageServiceLayer(b)&&b.infoTemplate?f.push(b):"esri.layers.WMSLayer"===b.declaredClass&&b.getFeatureInfoURL?f.push(b):"esri.layers.ArcGISDynamicMapServiceLayer"!==
b.declaredClass&&"esri.layers.ArcGISTiledMapServiceLayer"!==b.declaredClass||!b.infoTemplates||r.push(b))});var t=c.getResolutionForPopup();this._getSubLayerFeatureLayers(r,t).then(function(h){f=f.concat(h);h=b.graphic&&b.graphic.getParentGraphic()||b.graphic;var r=null;h&&h.getInfoTemplate()&&!g._isImageServiceLayer(h.getLayer())&&(r=h);if(f.length||r){var u=g._calculateClickTolerance(f),l=b.screenPoint;h=c.toMap(new p(l.x-u,l.y+u));var u=c.toMap(new p(l.x+u,l.y-u)),v=new m(h.x,h.y,u.x,u.y,c.spatialReference);
if(v=v.intersects(c.extent)){var x=new k,C=!!r,w=!0;h=q.map(f,function(d){x.timeExtent=d.useMapTime?c.timeExtent:null;var f=g._isReductionEnabled(d);d=f?d.getFeatureReductionLayer():d;var h,k=g._featureLayersCache[d.id];if(g._isImageServiceLayer(d))x.geometry=b.mapPoint,w=!1,h={rasterAttributeTableFieldPrefix:"Raster.",returnDomainValues:!0},g._isTiledImageServiceLayer(d)?h=d.fetchPopupFromTiles(x):(h=d.queryVisibleRasters(x,h),h.addCallback(function(){var b=d.getVisibleRasters();C=C||0<b.length;
return b}));else if("esri.layers.WMSLayer"===d.declaredClass){h=new e;var u=d._getPopupGraphic(c,b.screenPoint);u?(h.resolve([u]),C=!0):h.resolve([])}else k||"function"===typeof d.queryFeatures&&(0===d.currentMode||1===d.currentMode)?(x.geometry=v,h=d.queryFeatures(x),h.addCallback(function(b){var c=[];q.forEach(b.features,function(b){b.visible&&(c.push(b),k&&b.setResolution(t))});C=C||0<c.length;return c})):(h=new e,u=q.filter(d.graphics,function(b){return b&&b.visible&&v.intersects(b.geometry)}),
f&&g._isParentLayer(d,r)&&(f=g._findGraphicById(u,r,"cluster_id"))&&(r=f),C=C||0<u.length,h.resolve(u));return h});r&&(u=new e,u.resolve([r]),h.unshift(u));q.some(h,function(b){return!b.isFulfilled()})||C?(d.setFeatures(h),d.show(b.mapPoint,{closestFirst:w})):(d.hide(),d.clearFeatures())}}})},_getSubLayerFeatureLayers:function(b,c,g){c=c||null;var f=g||new e,h=[];g=b.length;var k=this.map.getScale(),m=!1,v=this,p=0;a:for(;p<g;p++){var x=b[p],w=x.dynamicLayerInfos||x.layerInfos;if(w){var y=null;x._params&&
(x._params.layers||x._params.dynamicLayers)&&(y=x.visibleLayers);for(var y=l._getVisibleLayers(w,y),I=l._getLayersForScale(k,w),P=w.length,Q=0;Q<P;Q++){var O=w[Q],N=O.id,M=x.infoTemplates[N];if(!O.subLayerIds&&M&&M.infoTemplate&&-1<q.indexOf(y,N)&&-1<q.indexOf(I,N)){if(!t){m=!0;break a}var J=x.id+"_"+N,K=this._featureLayersCache[J];K&&K.loadError||(K||((K=M.layerUrl)||(K=O.source?this._getLayerUrl(x.url,"/dynamicLayer"):this._getLayerUrl(x.url,N)),K=new t(K,{parentLayer:x,id:J,drawMode:!1,mode:t.MODE_SELECTION,
outFields:this._getOutFields(M.infoTemplate),resourceInfo:M.resourceInfo,source:O.source}),this._featureLayersCache[J]=K),K.setDefinitionExpression(x.layerDefinitions&&x.layerDefinitions[N]),K.setGDBVersion(x.gdbVersion),K.setInfoTemplate(M.infoTemplate),K.setMaxAllowableOffset(c),K.setUseMapTime(!!x.useMapTime),x.layerDrawingOptions&&x.layerDrawingOptions[N]&&x.layerDrawingOptions[N].renderer&&K.setRenderer(x.layerDrawingOptions[N].renderer),h.push(K))}}}}if(m){var U=new e;u(["./layers/FeatureLayer"],
function(b){t=b;U.resolve()});U.then(function(){v._getSubLayerFeatureLayers(b,c,f)})}else{var R=[];q.forEach(h,function(b){if(!b.loaded){var c=new e;d.once(b,"load, error",function(){c.resolve()});R.push(c.promise)}});R.length?r(R).then(function(){h=q.filter(h,function(b){return!b.loadError&&b.isVisibleAtScale(k)});f.resolve(h)}):(h=q.filter(h,function(b){return b.isVisibleAtScale(k)}),f.resolve(h))}return f.promise},_getLayerUrl:function(b,c){var d=b.indexOf("?");return-1===d?b+"/"+c:b.substring(0,
d)+"/"+c+b.substring(d)},_getOutFields:function(b){var c,d=b.info&&b.info.fieldInfos;d&&d.length&&"esri.dijit.PopupTemplate"===b.declaredClass?(c=[],q.forEach(d,function(b){var d=b.fieldName&&b.fieldName.toLowerCase();d&&"shape"!==d&&0!==d.indexOf("relationships/")&&c.push(b.fieldName)})):c=["*"];return c},_calculateClickTolerance:function(c){var d=b("esri-touch")?9:6,e,g;q.forEach(c,function(b){if(e=b.renderer)"esri.renderer.SimpleRenderer"===e.declaredClass?((g=e.symbol)&&g.xoffset&&(d=Math.max(d,
Math.abs(g.xoffset))),g&&g.yoffset&&(d=Math.max(d,Math.abs(g.yoffset)))):"esri.renderer.UniqueValueRenderer"!==e.declaredClass&&"esri.renderer.ClassBreaksRenderer"!==e.declaredClass||q.forEach(e.infos,function(b){(g=b.symbol)&&g.xoffset&&(d=Math.max(d,Math.abs(g.xoffset)));g&&g.yoffset&&(d=Math.max(d,Math.abs(g.yoffset)))})});return d},_showInfoWindow:function(b,d){var e=this.map.infoWindow,g=b.geometry;d=g&&"point"===g.type?g:d;g=b.getContent();e.setTitle(b.getTitle());g&&c.isString(g.id)&&(b=h.byId(g.id))&&
b.set&&/_PopupRenderer/.test(b.declaredClass)&&b.set("showTitle",!1);e.setContent(g);e.show(d)},_findGraphicById:function(b,c,d){var e,g=(c=c.attributes)&&c[d];q.some(b,function(b){var c=b.attributes;c&&c[d]===g&&(e=b);return!!e});return e},_isParentLayer:function(b,c){c=c&&c.getLayer();return b&&c===b},_isReductionEnabled:function(b){return b&&b.isFeatureReductionActive&&b.isFeatureReductionActive()},_isImageServiceLayer:function(b){return"esri.layers.ArcGISImageServiceLayer"===b.declaredClass||
"esri.layers.ArcGISImageServiceVectorLayer"===b.declaredClass||"esri.layers.RasterXLayer"===b.declaredClass},_isTiledImageServiceLayer:function(b){return"esri.layers.RasterXLayer"===b.declaredClass}});b("extend-esri")&&(f.PopupManager=g);return g})},"esri/layerUtils":function(){define("esri/layerUtils",["dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","./kernel"],function(m,p,f,l,k){var h={_serializeLayerDefinitions:function(h,g){var e=[],c=/[:;]/;if(h&&(p.forEach(h,function(b,f){b&&
(e.push([f,b]),!g&&c.test(b)&&(g=!0))}),0<e.length)){var b;g?(b={},p.forEach(e,function(c){b[c[0]]=c[1]}),b=f.toJson(b)):(b=[],p.forEach(e,function(c){b.push(c[0]+":"+c[1])}),b=b.join(";"));return b}return null},_serializeTimeOptions:function(h,g){if(h){var e=[];p.forEach(h,function(c,b){c&&(c=c.toJson(),g&&-1!==p.indexOf(g,b)&&(c.useTime=!1),e.push('"'+b+'":'+f.toJson(c)))});if(e.length)return"{"+e.join(",")+"}"}},_getVisibleLayers:function(f,g){var e=[],c,b;if(!f)return e;if(g)for(e=g.concat(),
b=0;b<f.length;b++)g=f[b],c=p.indexOf(f,g.id),g.subLayerIds&&-1<c&&(e.splice(c,1),e=e.concat(g.subLayerIds));else e=this._getDefaultVisibleLayers(f);return e},_getDefaultVisibleLayers:function(f){var g=[],e;if(!f)return g;for(e=0;e<f.length;e++)0<=f[e].parentLayerId&&-1===p.indexOf(g,f[e].parentLayerId)&&p.some(f,function(c){return c.id===f[e].parentLayerId})||f[e].defaultVisibility&&g.push(f[e].id);return g},_getLayersForScale:function(f,g){var e=[];if(0<f&&g){var c;for(c=0;c<g.length;c++)if(!(0<=
g[c].parentLayerId&&-1===p.indexOf(e,g[c].parentLayerId)&&p.some(g,function(b){return b.id===g[c].parentLayerId}))&&0<=g[c].id){var b=!0,d=g[c].maxScale,h=g[c].minScale;if(0<d||0<h)0<d&&0<h?b=d<=f&&f<=h:0<d?b=d<=f:0<h&&(b=f<=h);b&&e.push(g[c].id)}}return e}};l("extend-esri")&&m.mixin(k,h);return h})},"esri/MapNavigationManager":function(){define("esri/MapNavigationManager","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/event dojo/mouse dojo/keys dijit/focus ./kernel ./MouseEvents ./TouchEvents ./PointerEvents ./config ./sniff ./lang ./fx ./graphic ./tileUtils ./geometry/ScreenPoint ./geometry/Extent ./geometry/Rect ./geometry/mathUtils ./symbols/SimpleFillSymbol".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x,w,y,z,B,A,C){var F=l.connect,E=l.disconnect,H=v("chrome"),D=v("safari"),G=[q.NUMPAD_PLUS,61,187,q.NUMPAD_MINUS,173,189,q.UP_ARROW,q.NUMPAD_8,q.RIGHT_ARROW,q.NUMPAD_6,q.DOWN_ARROW,q.NUMPAD_2,q.LEFT_ARROW,q.NUMPAD_4,q.PAGE_UP,q.NUMPAD_9,q.PAGE_DOWN,q.NUMPAD_3,q.END,q.NUMPAD_1,q.HOME,q.NUMPAD_7];m=m(null,{declaredClass:"esri.MapNavigationManager",eventModel:"",constructor:function(e,g){this.map=e;p.mixin(this,g);g=e.__container;v("esri-pointer")?(this.pointerEvents=
new d(g,{map:e}),this.eventModel="pointer"):v("esri-touch")?(v("ios")||(this.mouseEvents=new c(g,{map:e})),this.touchEvents=new b(g,{map:e,mouseEvents:this.mouseEvents}),this.eventModel="touch"):(this.mouseEvents=new c(g,{map:e}),this.eventModel="mouse");this._zoomRect=new x(null,new C(r.defaults.map.zoomSymbol));this._keyDx=this._keyDy=0;this._adjustPinch=p.hitch(this,this._adjustPinch);this._adjustPinchEnd=p.hitch(this,this._adjustPinchEnd)},_panInit:function(b){var c=this.mouseEvents;h.isLeft(b)&&
this.map.isPan&&!b.shiftKey&&(this._dragOrigin=new y(0,0),p.mixin(this._dragOrigin,b.screenPoint),E(this._panStartHandle),E(this._panHandle),E(this._panEndHandle),this._panStartHandle=F(c,"onMouseDragStart",this,this._panStart),this._panHandle=F(c,"onMouseDrag",this,this._pan),this._panEndHandle=F(c,"onMouseUp",this,this._panEnd),H||D)&&(b.preventDefault(),g.curNode&&g.curNode.blur())},_panStart:function(b){this.map.setCursor("move");this.map.__panStart(b.screenPoint.x,b.screenPoint.y)},_pan:function(b){this.map.__pan(b.screenPoint.x-
this._dragOrigin.x,b.screenPoint.y-this._dragOrigin.y)},_panEnd:function(b){E(this._panStartHandle);E(this._panHandle);E(this._panEndHandle);this._panStartHandle=this._panHandle=this._panEndHandle=null;var c=this.map;c.__panning&&(c.__panEnd(b.screenPoint.x-this._dragOrigin.x,b.screenPoint.y-this._dragOrigin.y),c.resetMapCursor())},_zoomInit:function(b){var c=this.map,d=this.pointerEvents||this.mouseEvents;(h.isLeft(b)||b.pointerType)&&c.isRubberBandZoom&&b.shiftKey&&(c.setCursor("crosshair"),this._dragOrigin=
p.mixin({},b.screenPoint),this._zoomDir=b.ctrlKey||b.metaKey?-1:1,this.pointerEvents?(this._zoomHandle=F(d,"onSwipeMove",this,this._zoom),this._zoomEndHandle=F(d,"onSwipeEnd",this,this._zoomEnd)):(this._zoomHandle=F(d,"onMouseDrag",this,this._zoom),this._zoomEndHandle=F(d,"onMouseUp",this,this._zoomEnd)),H&&b.preventDefault())},_zoom:function(b){var c=this.map,d=this._normalizeRect(b).offset(c.__visibleRect.x,c.__visibleRect.y);b=c.graphics;var e=this._zoomRect;e.geometry||c.setCursor("crosshair");
e.geometry&&b.remove(e,!0);var g=c.toMap(new y(d.x,d.y)),d=c.toMap(new y(d.x+d.width,d.y+d.height)),d=new B(g.x,g.y,d.x-g.x,g.y-d.y,c.spatialReference);d._originOnly=!0;e.setGeometry(d);b.add(e,!0)},_zoomEnd:function(b){var c=this._zoomRect,d=this.map,e=d.extent,g=d.spatialReference;E(this._zoomHandle);E(this._zoomEndHandle);this._zoomHandle=this._zoomEndHandle=null;if(d._canZoom(this._zoomDir)&&c.getDojoShape()){d.graphics.remove(c);c.geometry=null;b=this._normalizeRect(b);b.x+=d.__visibleRect.x;
b.y+=d.__visibleRect.y;if(-1===this._zoomDir){var f=e.getWidth();b=(f*d.width/b.width-f)/2;g=new z(e.xmin-b,e.ymin-b,e.xmax+b,e.ymax+b,g)}else e=d.toMap({x:b.x,y:b.y+b.height}),b=d.toMap({x:b.x+b.width,y:b.y}),g=new z(e.x,e.y,b.x,b.y,g);d._extentUtil(null,null,g)}c.getDojoShape()&&d.graphics.remove(c,!0);this._zoomDir=0;d.resetMapCursor()},_wheelZoom:function(b,c){var d=this.map;if(!c){if(d.smartNavigation&&!b.shiftKey&&!d._isPanningOrZooming()){d.disableScrollWheelZoom();this._setScrollWheelPan(!0);
this._wheelPan(b);return}c=b.timeStamp;if(!u.isDefined(c)||0>=c)c=(new Date).getTime();if(100>(this._mwts?c-this._mwts:c))return;this._mwts=c}d._canZoom(b.value)&&d._extentUtil({numLevels:b.value,mapAnchor:b.mapPoint,screenAnchor:b.screenPoint})},_wheelPan:function(b){var c=this.map;if(b.shiftKey&&!c._isPanningOrZooming())this._setScrollWheelPan(!1),c.enableScrollWheelZoom(),this._wheelZoom(b);else{var d=0,e=0;v("ff")?b.axis===b.HORIZONTAL_AXIS?d=-b.detail:e=-b.detail:(d=b.wheelDeltaX,e=b.wheelDeltaY);
c.translate(d,e)}},_setScrollWheelPan:function(b){this.map.isScrollWheelPan=b;this.mouseEvents.enableMouseWheel(b);E(this._mwMacHandle);this._mwMacHandle=null;b&&(this._mwMacHandle=F(this.mouseEvents,"onMouseWheel",this,this._wheelPan))},_recenter:function(b){b.shiftKey&&!this.map._isPanningOrZooming()&&this.map.centerAt(b.mapPoint)},_recenterZoom:function(b){b.shiftKey&&!this.map._isPanningOrZooming()&&(b.value=b.ctrlKey||b.metaKey?-1:1,this._wheelZoom(b,!0))},_dblClickZoom:function(b){this.map._isPanningOrZooming()||
(b.value=1,this._wheelZoom(b,!0))},_twoFingerTap:function(b){this.map._isPanningOrZooming()||(b.value=-1,this._wheelZoom(b,!0))},_keyDown:function(b){var c=b.keyCode,d=this.map;if(-1!==f.indexOf(G,c)){if(c===q.NUMPAD_PLUS||61===c||187===c)d._extentUtil({numLevels:1});else if(c===q.NUMPAD_MINUS||173===c||189===c)d._extentUtil({numLevels:-1});else{d.__panning||d.__panStart(0,0);switch(c){case q.UP_ARROW:case q.NUMPAD_8:this._keyDy+=10;break;case q.RIGHT_ARROW:case q.NUMPAD_6:this._keyDx-=10;break;case q.DOWN_ARROW:case q.NUMPAD_2:this._keyDy-=
10;break;case q.LEFT_ARROW:case q.NUMPAD_4:this._keyDx+=10;break;case q.PAGE_UP:case q.NUMPAD_9:this._keyDx-=10;this._keyDy+=10;break;case q.PAGE_DOWN:case q.NUMPAD_3:this._keyDx-=10;this._keyDy-=10;break;case q.END:case q.NUMPAD_1:this._keyDx+=10;this._keyDy-=10;break;case q.HOME:case q.NUMPAD_7:this._keyDx+=10;this._keyDy+=10;break;default:return}d.__pan(this._keyDx,this._keyDy)}k.stop(b)}},_keyEnd:function(b){var c=this.map;c.__panning&&b.keyCode!==q.SHIFT&&(c.__panEnd(this._keyDx,this._keyDy),
this._keyDx=this._keyDy=0)},_swipeInit:function(b){var c=this.map,c=c._zoomAnim||c._panAnim;if(b.shiftKey)return!1;c&&c._active&&(c.stop(),c._fire("onEnd",[c.node]));this._dragOrigin=new y(0,0);p.mixin(this._dragOrigin,b.screenPoint);E(this._swipeHandle);E(this._swipeEndHandle);this._swipeHandle=F(this.touchEvents||this.pointerEvents,"onSwipeMove",this,this._swipe);this._swipeEndHandle=F(this.touchEvents||this.pointerEvents,"onSwipeEnd",this,this._swipeEnd)},_swipe:function(b){var c=this.map;c.__panning?
(this._panX=b.screenPoint.x,this._panY=b.screenPoint.y,c.__pan(b.screenPoint.x-this._dragOrigin.x,b.screenPoint.y-this._dragOrigin.y)):(c.setCursor("move"),c.__panStart(b.screenPoint.x,b.screenPoint.y))},_swipeEnd:function(b){E(this._swipeHandle);E(this._swipeEndHandle);this._swipeHandle=this._swipeEndHandle=null;var c=this.map;c.__panning&&(c.resetMapCursor(),c.__panEnd(b.screenPoint.x-this._dragOrigin.x,b.screenPoint.y-this._dragOrigin.y))},_pinchInit:function(b){var c=this.map,d=c._zoomAnim||c._panAnim;
d&&d._active?(d.stop(),d._fire("onEnd",[d.node])):c.__panning&&(b.screenPoint=new y(this._panX,this._panY),b.mapPoint=c.toMap(b.screenPoint),this._swipeEnd(b));E(this._pinchHandle);E(this._pinchEndHandle);this._pinchHandle=F(this.touchEvents||this.pointerEvents,"onPinchMove",this,this._pinch);this._pinchEndHandle=F(this.touchEvents||this.pointerEvents,"onPinchEnd",this,this._pinchEnd)},_pinch:function(b){var c=this.map;if(b.screenPoints){this.currLength=A.getLength(b.screenPoints[0],b.screenPoints[1]);
var d;c.__zooming?(d=this.currLength/this._length,this._zoomStartExtent=this.__scaleExtent(c.extent,d,this._dragOrigin),c.__zoom(this._zoomStartExtent,d,this._dragOrigin)):(this._dragOrigin=new y((b.screenPoints[0].x+b.screenPoints[1].x)/2,(b.screenPoints[0].y+b.screenPoints[1].y)/2),this._length=this.currLength,c.__zoomStart(c.extent,this._dragOrigin));this._pinchScale=d;c._fireOnScale(this.currLength/this._length,this._dragOrigin,!0)}},_pinchEnd:function(b){b=this.map;E(this._pinchHandle);E(this._pinchEndHandle);
this._pinchHandle=this._pinchEndHandle=null;this._pinchScale=0;if(b.__zooming&&null===b._zoomAnim){var c=this.currLength/this._length,d=b.extent.getWidth();this._zoomAnimAnchor=b.toMap(this._dragOrigin);this._zoomStartExtent=this.__scaleExtent(b.extent,1/c,this._zoomAnimAnchor);if(b.__tileInfo){var e=w.getCandidateTileInfo(b,b.__tileInfo,this._zoomStartExtent),g=b.__getExtentForLevel(e.lod.level,this._zoomAnimAnchor),f=b.getMinZoom(),h=b.getMaxZoom(),k=g.extent,g=g.lod,u=d/k.getWidth(),q=e.lod.level;
1>c?u>c&&q--:u<c&&q++;q<f?q=f:q>h&&(q=h);q!==e.lod.level&&(g=b.__getExtentForLevel(q,this._zoomAnimAnchor),k=g.extent,g=g.lod);this._zoomEndExtent=k;this._zoomEndLod=g;b._zoomAnim=t.animateRange({range:{start:d/this._zoomStartExtent.getWidth(),end:u},duration:r.defaults.map.zoomDuration,rate:r.defaults.map.zoomRate,onAnimate:this._adjustPinch,onEnd:this._adjustPinchEnd});b._zoomAnim.play();b._fireOnScale(b.extent.getWidth()/this._zoomEndExtent.getWidth(),this._dragOrigin)}else this._zoomEndExtent=
this._zoomStartExtent,b._fireOnScale(b.extent.getWidth()/this._zoomEndExtent.getWidth(),this._dragOrigin),this._adjustPinchEnd()}},_adjustPinch:function(b){var c=this.__scaleExtent(this.map.extent,b,this._zoomAnimAnchor);this.map.__zoom(c,b,this._dragOrigin)},_adjustPinchEnd:function(){var b=this.map,c=b.extent.getWidth()/this._zoomEndExtent.getWidth(),d=this.__scaleExtent(b.extent,1/c,this._zoomAnimAnchor),e=this._dragOrigin,g=this._zoomEndLod;this._zoomStartExtent=this._zoomEndExtent=this._zoomEndLod=
this._dragOrigin=b._zoomAnim=this._zoomAnimAnchor=null;b.__zoomEnd(d,c,e,g,!0)},__scaleExtent:function(b,c,d){d=d||b.getCenter();c=b.expand(c);var e=b.xmin-(c.getWidth()-b.getWidth())*(d.x-b.xmin)/b.getWidth();d=b.ymax-(c.getHeight()-b.getHeight())*(d.y-b.ymax)/b.getHeight();return new z(e,d-c.getHeight(),e+c.getWidth(),d,b.spatialReference)},_normalizeRect:function(b){b=b.screenPoint;var c=this._dragOrigin.x,d=this._dragOrigin.y;b=new B((b.x<c?b.x:c)-this.map.__visibleRect.x,(b.y<d?b.y:d)-this.map.__visibleRect.y,
Math.abs(b.x-c),Math.abs(b.y-d));delete b.spatialReference;0===b.width&&(b.width=1);0===b.height&&(b.height=1);return b},setImmediateClick:function(b){switch(this.eventModel){case "mouse":this.mouseEvents.setImmediateClick(b);break;case "touch":this.touchEvents.setImmediateTap(b);this.mouseEvents&&this.mouseEvents.setImmediateClick(b);break;case "pointer":this.pointerEvents.setImmediateTap(b)}},enablePan:function(){this.disablePan();switch(this.eventModel){case "mouse":this._panInitHandle=F(this.mouseEvents,
"onMouseDown",this,this._panInit);break;case "touch":this._panInitHandle=F(this.mouseEvents,"onMouseDown",this,this._panInit);this._swipeInitHandle=F(this.touchEvents,"onSwipeStart",this,this._swipeInit);break;case "pointer":this._swipeInitHandle=F(this.pointerEvents,"onSwipeStart",this,this._swipeInit)}},disablePan:function(){E(this._panInitHandle);this._panInitHandle=null;E(this._swipeInitHandle);this._swipeInitHandle=null},enableRubberBandZoom:function(){this.disableRubberBandZoom();this._zoomInitHandle=
this.pointerEvents?F(this.pointerEvents,"onSwipeStart",this,this._zoomInit):F(this.mouseEvents,"onMouseDown",this,this._zoomInit)},disableRubberBandZoom:function(){E(this._zoomInitHandle);this._zoomInitHandle=null},enablePinchZoom:function(){this.disablePinchZoom();if("touch"===this.eventModel||"pointer"===this.eventModel)this._pinchInitHandle=F(this.touchEvents||this.pointerEvents,"onPinchStart",this,this._pinchInit)},disablePinchZoom:function(){E(this._pinchInitHandle);this._pinchInitHandle=null},
enableScrollWheelZoom:function(){this.disableScrollWheelZoom();this._wheelHandle=F(this.mouseEvents||this.pointerEvents,"onMouseWheel",this,this._wheelZoom)},disableScrollWheelZoom:function(){E(this._wheelHandle);this._wheelHandle=null},enableScrollWheelPan:function(){var b=this.map;b&&b.loaded&&b.smartNavigation&&(this.disableScrollWheelPan(),this._setScrollWheelPan(!0))},disableScrollWheelPan:function(){var b=this.map;b&&b.loaded&&b.smartNavigation&&this._setScrollWheelPan(!1)},enableDoubleClickZoom:function(){this.disableDoubleClickZoom();
switch(this.eventModel){case "mouse":this._dblClickHandle=F(this.mouseEvents,"onDblClick",this,this._dblClickZoom);break;case "touch":this._dblClickHandle=F(this.mouseEvents,"onDblClick",this,this._dblClickZoom);this._dblTapHandle=F(this.touchEvents,"onDoubleTap",this,this._dblClickZoom);this._zoomOutHandle=F(this.touchEvents,"onTwoFingerTap",this,this._twoFingerTap);break;case "pointer":this._dblTapHandle=F(this.pointerEvents,"onDoubleTap",this,this._dblClickZoom),this._zoomOutHandle=F(this.pointerEvents,
"onTwoFingerTap",this,this._twoFingerTap)}},disableDoubleClickZoom:function(){E(this._dblClickHandle);E(this._zoomOutHandle);this._dblTapHandle&&E(this._dblTapHandle);this._dblClickHandle=this._zoomOutHandle=this._dblTapHandle=null},enableShiftDoubleClickZoom:function(){this.disableShiftDoubleClickZoom();this._sDblClickHandle=F(this.pointerEvents||this.mouseEvents,"onDblClick",this,this._recenterZoom)},disableShiftDoubleClickZoom:function(){E(this._sDblClickHandle);this._sDblClickHandle=null},enableClickRecenter:function(){this.disableClickRecenter();
this._recenterHandle=F(this.pointerEvents||this.mouseEvents,"onClick",this,this._recenter)},disableClickRecenter:function(){E(this._recenterHandle);this._recenterHandle=null},enableKeyboardNavigation:function(){this.disableKeyboardNavigation();this._keyHandle=F(this.pointerEvents||this.mouseEvents,"onKeyDown",this,this._keyDown);this._keyEndHandle=F(this.pointerEvents||this.mouseEvents,"onKeyUp",this,this._keyEnd)},disableKeyboardNavigation:function(){E(this._keyHandle);E(this._keyEndHandle);this._keyHandle=
this._keyEndHandle=null},enableScrollWheel:function(){var b=this.map;b&&(b.smartNavigation?this.enableScrollWheelPan():b.enableScrollWheelZoom())},disableScrollWheel:function(){var b=this.map;b&&(b.disableScrollWheelZoom(),b.smartNavigation&&this.disableScrollWheelPan())},enableNavigation:function(){var b=this.map;b&&b.loaded&&(b._evalNavigationFeature("DoubleClickZoom"),b._evalNavigationFeature("ClickRecenter"),b._evalNavigationFeature("Pan"),b._evalNavigationFeature("RubberBandZoom"),b._evalNavigationFeature("PinchZoom"),
b._evalNavigationFeature("KeyboardNavigation"),b._evalNavigationFeature("ScrollWheel"))},disableNavigation:function(){var b=this.map;b&&b.loaded&&(b._evalNavigationFeature("DoubleClickZoom"),b._evalNavigationFeature("ClickRecenter"),b._evalNavigationFeature("Pan"),b._evalNavigationFeature("RubberBandZoom"),b._evalNavigationFeature("PinchZoom"),b._evalNavigationFeature("KeyboardNavigation"),b._evalNavigationFeature("ScrollWheel"))},destroy:function(){this.touchEvents&&this.touchEvents.destroy();this.mouseEvents&&
this.mouseEvents.destroy();this.pointerEvents&&this.pointerEvents.destroy();var b,c=[this._panInitHandle,this._panStartHandle,this._panHandle,this._panEndHandle,this._zoomInitHandle,this._zoomHandle,this._zoomEndHandle,this._wheelHandle,this._mwMacHandle,this._dblClickHandle,this._zoomOutHandle,this._recenterHandle,this._sDblClickHandle,this._dblTapHandle,this._keyHandle,this._keyEndHandle,this._swipeInitHandle,this._swipeHandle,this._swipeEndHandle,this._pinchInitHandle,this._pinchHandle,this._pinchEndHandle];
for(b=0;b<c.length;b++)E(c[b]);this.map=this.touchEvents=this.mouseEvents=this.eventModel=this.pointerEvents=this._zoomRect=this._dragOrigin=this._panInitHandle=this._panStartHandle=this._panHandle=this._panEndHandle=this._zoomInitHandle=this._zoomHandle=this._zoomEndHandle=this._wheelHandle=this._mwMacHandle=this._dblClickHandle=this._zoomOutHandle=this._recenterHandle=this._sDblClickHandle=this._dblTapHandle=this._keyHandle=this._keyEndHandle=this._swipeInitHandle=this._swipeHandle=this._swipeEndHandle=
this._pinchInitHandle=this._pinchHandle=this._pinchEndHandle=null}});v("extend-esri")&&(e.MapNavigationManager=m);return m})},"esri/MouseEvents":function(){define("esri/MouseEvents","dojo/_base/declare dojo/_base/html dojo/_base/lang dojo/_base/sniff dojo/_base/connect dojo/_base/event ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "),function(m,p,f,l,k,h,q,g,e,c){var b=k.connect,d=k.disconnect;m=m([g],{declaredClass:"esri.MouseEvents",doubleClickDuration:300,minWheelValue:1,
maxWheelValue:1,mozWheelDivisor:-1!==l("mac")?1:3,wheelDivisor:2>l("chrome")?360:120,preventPageScroll:!0,map:null,constructor:function(c,d){this.node=c;f.mixin(this,d);d=function(b){h.stop(b);return!1};l("mozilla")&&p.style(c,"MozUserSelect","none");this._handles=[b(c,"onselectstart",d),b(c,"ondragstart",d),b(c,"onmouseenter",this,this._onMouseEnterHandler),b(c,"onmouseleave",this,this._onMouseLeaveHandler),b(c,"onmousedown",this,this._onMouseDownHandler),b(c,"onclick",this,this._onClickHandler),
b(c,"ondblclick",this,this._onDblClickHandler)];this._onMouseMoveHandler_connect=b(c,"onmousemove",this,this._onMouseMoveHandler);this._onMouseUpHandler_connect=b(c,"onmouseup",this,this._onMouseUpHandler);this._fireClickEvent=f.hitch(this,this._fireClickEvent);this._initialDuration=this.doubleClickDuration;this.preventPageScroll=(c=this.map)?c.isScrollWheelZoom||c.isScrollWheelPan:this.preventPageScroll;this.enableMouseWheel(!1)},_fire:function(b,c){if(!this._preventClick||"onClick"!==b&&"onDblClick"!==
b){if(this[b])this[b](c);if(this.map&&this.map[b])this.map[b](c)}},_processEvent:function(b){b=h.fix(b,b.target);var d=this.map,g=d&&d.position;g&&("DOMMouseScroll"===b.type&&3>l("ff")?b.screenPoint=new c(window.scrollX+b.screenX-g.x,window.scrollY+b.screenY-g.y):b.screenPoint=new c(b.pageX-g.x,b.pageY-g.y),b.mapPoint=d.extent?d.toMap(b.screenPoint):new e);b.numPoints=0;return b},_onMouseEnterHandler:function(c){d(this._onKeyDown_connect);d(this._onKeyUp_connect);this._onKeyDown_connect=b(document,
"onkeydown",this,this._onKeyDownHandler);this._onKeyUp_connect=b(document,"onkeyup",this,this._onKeyUpHandler);this._fire("onMouseOver",this._processEvent(c))},_onMouseLeaveHandler:function(b){d(this._onKeyDown_connect);d(this._onKeyUp_connect);this._onKeyDown_connect=this._onKeyUp_connect=null;this._fire("onMouseOut",this._processEvent(b))},_onMouseMoveHandler:function(b){this._dragEnd?this._dragEnd=!1:this._fire("onMouseMove",this._processEvent(b))},_onMouseDownHandler:function(c){d(this._onMouseMoveHandler_connect);
this._onMouseMoveHandler_connect=null;this.node.setCapture&&this.node.setCapture(!1);d(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=b(document,"onmousemove",this,this._onMouseDragHandler);this._startX=c.pageX;this._startY=c.pageY;this._fire("onMouseDown",this._processEvent(c))},_onMouseUpHandler:function(c){var e=this.node;e.releaseCapture&&e.releaseCapture();d(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=null;d(this._onMouseMoveHandler_connect);this._onMouseMoveHandler_connect=
b(e,"onmousemove",this,this._onMouseMoveHandler);this._fire("onMouseUp",this._processEvent(c))},_onMouseDragHandler:function(c){d(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=b(document,"onmousemove",this,this._onMouseDraggingHandler);d(this._onMouseUpHandler_connect);this._onMouseUpHandler_connect=b(document,"onmouseup",this,this._onDragMouseUpHandler);this._docLeaveConnect=b(document,"onmouseout",this,this._onDocMouseOut);this._fire("onMouseDragStart",this._processEvent(c))},
_onMouseDraggingHandler:function(b){h.stop(b);this._fire("onMouseDrag",this._processEvent(b))},_onDragMouseUpHandler:function(c){var e=this.node;e.releaseCapture&&e.releaseCapture();this._dragEnd=!0;d(this._docLeaveConnect);d(this._onMouseDragHandler_connect);d(this._onMouseUpHandler_connect);this._docLeaveConnect=this._onMouseDragHandler_connect=null;this._onMouseMoveHandler_connect=b(e,"onmousemove",this,this._onMouseMoveHandler);this._onMouseUpHandler_connect=b(e,"onmouseup",this,this._onMouseUpHandler);
c=this._processEvent(c);this._fire("onMouseDragEnd",c);this._fire("onMouseUp",c)},_onDocMouseOut:function(b){var c=9>l("ie")?b.toElement:b.relatedTarget,d=c&&c.nodeName.toLowerCase();(!c||(l("chrome")||l("safari"))&&"html"===d)&&this._onDragMouseUpHandler(b)},_onClickHandler:function(b){b=this._processEvent(b);if(b.pageX===this._startX&&b.pageY===this._startY){clearTimeout(this._clickTimer);var c={},d="movementX"in b,e;for(e in b)"mozInputSource"===e||"mozPressure"===e||d&&("webkitMovementX"===e||
"webkitMovementY"===e)||(c[e]=b[e]);this._clickEvent=c;this._clickTimer=setTimeout(this._fireClickEvent,this.doubleClickDuration)}},_fireClickEvent:function(){clearTimeout(this._clickTimer);9>l("ie")&&(this._clickEvent.graphic=q._ieGraphic,delete q._ieGraphic);this._fire("onClick",this._clickEvent)},_onDblClickHandler:function(b){clearTimeout(this._clickTimer);this._fire("onDblClick",this._processEvent(b))},_onMouseWheelHandler:function(b){var c=this.map;(c?c.isScrollWheelZoom||c.isScrollWheelPan:
this.preventPageScroll)&&h.stop(b);var c=l("ff")||l("mozilla")?-b.detail/this.mozWheelDivisor:b.wheelDelta/this.wheelDivisor,d=Math.abs(c),d=d<=this.minWheelValue?this.minWheelValue:this.maxWheelValue;b.value=0>c?-d:d;this._fire("onMouseWheel",this._processEvent(b))},_onKeyDownHandler:function(b){this._fire("onKeyDown",b)},_onKeyUpHandler:function(b){this._fire("onKeyUp",b)},enableMouseWheel:function(c){d(this._scrollHandle);this._scrollHandle=b(this.node,l("ff")||l("mozilla")?c?"MozMousePixelScroll":
"DOMMouseScroll":"onmousewheel",this,this._onMouseWheelHandler)},setImmediateClick:function(b){this.doubleClickDuration=b?0:this._initialDuration},preventClickEvents:function(b){this._preventClick=b},destroy:function(){var b=this._handles.concat([this._onMouseMoveHandler_connect,this._onMouseUpHandler_connect,this._onMouseDragHandler_connect,this._scrollHandle,this._onKeyDown_connect,this._onKeyUp_connect,this._docLeaveConnect]),c;for(c=0;c<b.length;c++)d(b[c]);clearTimeout(this._clickTimer);this.node=
this.map=this._handles=this._clickEvent=this._onMouseMoveHandler_connect=this._onMouseUpHandler_connect=this._onMouseDragHandler_connect=this._scrollHandle=this._onKeyDown_connect=this._onKeyUp_connect=this._docLeaveConnect=null}});l("extend-esri")&&(q.MouseEvents=m);return m})},"esri/TouchEvents":function(){define("esri/TouchEvents","dojo/_base/declare dojo/_base/html dojo/_base/lang dojo/_base/sniff dojo/dom ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "),function(m,p,f,l,
k,h,q,g,e){m=m([q],{declaredClass:"esri.TouchEvents",tapRadius:8,doubleTapRadius:10,tapStartTolerance:50,doubleTapDuration:300,map:null,constructor:function(c,b){this.node=c;f.mixin(this,b);p.setSelectable(c,!1);this._touchStart=f.hitch(this,this._touchStart);this._touchMove=f.hitch(this,this._touchMove);this._touchEnd=f.hitch(this,this._touchEnd);this._touchCancel=f.hitch(this,this._touchCancel);this._fireClickEvent=f.hitch(this,this._fireClickEvent);c.addEventListener("touchstart",this._touchStart,
!1);c.addEventListener("touchmove",this._touchMove,!1);c.addEventListener("touchend",this._touchEnd,!1);c.addEventListener("touchcancel",this._touchCancel,!1);this.map&&l("ios")&&(this._mouseOver=f.hitch(this,this._mouseOver),this._mouseOut=f.hitch(this,this._mouseOut),this._mouseDown=f.hitch(this,this._mouseDown),this._mouseUp=f.hitch(this,this._mouseUp),this._mouseClick=f.hitch(this,this._mouseClick),c.addEventListener("mouseover",this._mouseOver,!1),c.addEventListener("mouseout",this._mouseOut,
!1),c.addEventListener("mousedown",this._mouseDown,!1),c.addEventListener("mouseup",this._mouseUp,!1),c.addEventListener("click",this._mouseClick,!1));this._numTouches=0;this._nodeTouches=[];this._touches={};this._touchIds=[];this._taps=[];this._immediate=!1},_touchStart:function(c){var b=this._touches,d,e=c.changedTouches.length,g,f,h,k,q=(new Date).getTime();this._touchStartTS=q;if(!(l("android")&&l("safari")&&1===c.targetTouches.length&&c.touches.length===c.targetTouches.length&&c.targetTouches.length===
c.changedTouches.length&&0===c.changedTouches[0].identifier&&b[c.changedTouches[0].identifier])){this._addTouch(c);for(d=0;d<e;d++)g=c.changedTouches[d],f=b[g.identifier]={},f.startX=g.pageX,f.startY=g.pageY,f.startTS=q,-1===this._touchIds.indexOf(g.identifier)&&this._touchIds.push(g.identifier);this._swipeActive&&(h=this._nodeTouches[0]);this._pinchActive&&(k=this._nodeTouches[1]);1===this._numTouches?this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(c,h))):
this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(c,[h,k]))):2===this._numTouches?this._swipeActive&&(h&&(f=b[this._touchIds[0]],f.startX=h.pageX,f.startY=h.pageY,f.moved=!1),this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(c,h))):this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(c,h))):this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(c,[h,k])))}},_touchMove:function(c){c.preventDefault();
this._updateTouch(c);var b=this._touches,d,e=c.changedTouches.length,g,f,h,k;if(!(l("android")&&l("safari")&&1===c.targetTouches.length&&c.touches.length===c.targetTouches.length&&c.targetTouches.length===c.changedTouches.length&&0===c.changedTouches[0].identifier&&b[c.changedTouches[0].identifier]&&1<this._touchIds.length)){for(d=0;d<e;d++)if(g=c.changedTouches[d],f=b[g.identifier])h=Math.abs(g.pageX-f.startX),g=Math.abs(g.pageY-f.startY),!f.moved&&(h>=this.tapRadius||g>=this.tapRadius)&&(f.moved=
f.absMoved=!0),k=k?k:f.moved;1===this._numTouches?(b=c.changedTouches[0],this._swipeActive?this._fire("onSwipeMove",this._processTouchEvent(c,b)):k&&(this._swipeActive=!0,this._fire("onSwipeStart",this._processTouchEvent(c,b)))):2===this._numTouches&&(d=this._nodeTouches[0],e=this._nodeTouches[1],this._pinchActive?this._fire("onPinchMove",this._processTouchEvent(c,[d,e])):k&&(k=b[d.identifier],f=b[e.identifier],b=Math.abs(k.startX-f.startX),k=Math.abs(k.startY-f.startY),f=Math.abs(d.pageX-e.pageX),
h=Math.abs(d.pageY-e.pageY),Math.abs(Math.sqrt(f*f+h*h)-Math.sqrt(b*b+k*k))>=2*this.tapRadius&&(this._pinchActive=!0,this._fire("onPinchStart",this._processTouchEvent(c,[d,e])))))}},_touchEnd:function(c){this._removeTouch(c);var b=this._touches,d=c.changedTouches,e,g=d.length,f,h,k=(new Date).getTime(),q=this._touchIds;for(e=0;e<g;e++)if(h=b[d[e].identifier])h.absMoved&&(f=!0),h.pageX=d[e].pageX,h.pageY=d[e].pageY,h.endTS=k;if(0===this._numTouches)if(this._touches={},this._touchIds=[],this._swipeActive)this._swipeActive=
!1,this._fire("onSwipeEnd",this._processTouchEvent(c,d[0]));else if(this._pinchActive)this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(c,d));else{if(!f){g=Infinity;f=-Infinity;var k=Infinity,l=-Infinity,m=this.tapStartTolerance,p=[],A=!0;for(e=0;e<q.length;e++)h=b[q[e]],p.push(h),h.startTS<g&&(g=h.startTS),h.startTS>f&&(f=h.startTS),h.endTS<k&&(k=h.endTS),h.endTS>l&&(l=h.endTS),delete b[q[e]];1===p.length&&d[0]&&(b=Math.abs(d[0].pageY-p[0].startY),Math.abs(d[0].pageX-p[0].startX)>=
this.tapRadius||b>=this.tapRadius)&&(A=!1);A&&Math.abs(f-g)<=m&&Math.abs(l-k)<=m&&this._basicTap(c,p)}}else 1===this._numTouches&&this._pinchActive&&(e=this._nodeTouches[0],h=b[e.identifier],h.startX=e.pageX,h.startY=e.pageY,this._pinchActive=h.moved=!1,this._fire("onPinchEnd",this._processTouchEvent(c,[d[0],e])))},_touchCancel:function(c){this._numTouches&&this._touchEnd(c)},_basicTap:function(c,b){var d=(new Date).getTime(),e=this;c=this._processTouchEvent(c,b);this._taps.push({touchInfos:b,ts:d,
event:c});2<this._taps.length&&this._taps.shift();this._fire("onBasicTap",c);clearTimeout(this._tapTimer);this._immediate?this._analyzeTap(!0):this._tapTimer=setTimeout(function(){var b=e;e=null;clearTimeout(b._tapTimer);b._analyzeTap()},2===this._taps.length?this.doubleTapDuration/2:this.doubleTapDuration)},_analyzeTap:function(c){var b=this._taps,d=b[0],e=b[1],g=d.touchInfos,f=e&&e.touchInfos;b.length&&(c||(this._taps=[]),d&&e?g.length===f.length?e.ts-d.ts<=this.doubleTapDuration?(1===g.length?
(c=Math.abs(g[0].startX-f[0].startX),g=Math.abs(g[0].startY-f[0].startY),g=c<=this.doubleTapRadius&&g<=this.doubleTapRadius):g=!0,g?this._processedDoubleTap(b):this._processedTap(e)):this._processedTap(e):this._processedTap(e):this._processedTap(d||e))},_processedTap:function(c){var b=c.event;this._fire("onProcessedTap",b);1===c.touchInfos.length?this._fire("onTap",this._fixEvent(b)):2===c.touchInfos.length&&this._fire("onTwoFingerTap",b)},_processedDoubleTap:function(c){var b=1===c[1].touchInfos.length,
d;b&&(d=[this._fixEvent(c[0].event),this._fixEvent(c[1].event)],d[1].relatedEvents=d);c=[c[0].event,c[1].event];c[1].relatedEvents=c;this._fire("onProcessedDoubleTap",c[1]);b&&(this._fire("onDoubleTap",d[1]),this._fire("onDblClick",d[1]))},_addTouch:function(c){var b=c.changedTouches,d=this._nodeTouches,e,g,f;this._numTouches+=b.length;for(c=0;c<b.length;c++){g=d.length;f=!1;for(e=0;e<g&&!(f=d[e].identifier===b[c].identifier);e++);f?this._numTouches--:d.push(b[c])}for(c=d.length-1;0<=c;c--)k.isDescendant(d[c].target,
document.body)||(d.splice(c,1),this._numTouches--);0>this._numTouches&&(this._numTouches=0)},_removeTouch:function(c){var b=[],d=[],e=c.changedTouches,g=this._nodeTouches;this._numTouches-=e.length;0>this._numTouches&&(this._numTouches=0);for(c=0;c<e.length;c++)b.push(e[c].identifier);for(c=g.length-1;0<=c;c--)-1!==b.indexOf(g[c].identifier)&&d.push(g.splice(c,1)[0]);return d},_updateTouch:function(c){var b=[],d,e=c.changedTouches,g=this._nodeTouches;for(c=0;c<e.length;c++)b.push(e[c].identifier);
for(c=0;c<g.length;c++)d=b.indexOf(g[c].identifier),-1!==d&&g.splice(c,1,e[d])},_mouseOver:function(c){this._fire("onMouseOver",this._processMouseEvent(c))},_mouseOut:function(c){this._fire("onMouseOut",this._processMouseEvent(c))},_mouseDown:function(c){this._fire("onMouseDown",this._processMouseEvent(c))},_mouseUp:function(c){this._fire("onMouseUp",this._processMouseEvent(c))},_mouseClick:function(c){clearTimeout(this._clickTimer);300<(new Date).getTime()-this._touchStartTS?this._fire("onClick",
this._processMouseEvent(c)):(this._clickEvent=c,this._clickTimer=setTimeout(this._fireClickEvent,this.doubleTapDuration))},_fireClickEvent:function(){clearTimeout(this._clickTimer);this._fire("onClick",this._processMouseEvent(this._clickEvent))},_fire:function(c,b){"onDblClick"===c&&clearTimeout(this._clickTimer);if("onDblClick"===c&&this.mouseEvents){this.mouseEvents.preventClickEvents(!0);var d=this;setTimeout(function(){d.mouseEvents.preventClickEvents(!1)},350)}if(this[c])this[c](b);if(this.map&&
this.map[c])this.map[c](b)},_fixEvent:function(c){var b={},d;for(d in c)b[d]=c[d];this.map&&(b.screenPoint=b.screenPoints[0],b.mapPoint=b.mapPoints[0]);return b},_processTouchEvent:function(c,b){var d=this.map,h=d&&d.position,k=0;if(h&&b)if(f.isArray(b)){var q,t;c.screenPoints=[];c.mapPoints=[];for(q=0;q<b.length;q++)b[q]?(t=new e(b[q].pageX-h.x,b[q].pageY-h.y),c.screenPoints.push(t),c.mapPoints.push(d.extent?d.toMap(t):new g)):k++}else c.screenPoint=new e(b.pageX-h.x,b.pageY-h.y),c.mapPoint=d.extent?
d.toMap(c.screenPoint):new g;c.numPoints=b?f.isArray(b)?b.length-k:1:0;return c},_processMouseEvent:function(c){var b=this.map,d=b&&b.position;d&&(c.screenPoint=new e(c.pageX-d.x,c.pageY-d.y),c.mapPoint=b.extent?b.toMap(c.screenPoint):new g);return c},setImmediateTap:function(c){this._immediate=c},destroy:function(){var c=this.node;c.removeEventListener("touchstart",this._touchStart,!1);c.removeEventListener("touchmove",this._touchMove,!1);c.removeEventListener("touchend",this._touchEnd,!1);c.removeEventListener("touchcancel",
this._touchCancel,!1);this.map&&(c.removeEventListener("mouseover",this._mouseOver,!1),c.removeEventListener("mouseout",this._mouseOut,!1),c.removeEventListener("mousedown",this._mouseDown,!1),c.removeEventListener("mouseup",this._mouseUp,!1),c.removeEventListener("click",this._mouseClick,!1));p.setSelectable(c,!0);clearTimeout(this._tapTimer);clearTimeout(this._clickTimer);this.node=this.map=this._numTouches=this._nodeTouches=this._touches=this._touchIds=this._taps=null}});l("extend-esri")&&(h.TouchEvents=
m);return m})},"esri/PointerEvents":function(){define("esri/PointerEvents","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "),function(m,p,f,l,k,h,q,g){m=m([h],{declaredClass:"esri.PointerEvents",tapRadius:8,clickRadius:2,doubleTapRadius:10,tapStartTolerance:50,doubleTapDuration:300,minWheelValue:1,maxWheelValue:1,mozWheelDivisor:-1!==l("mac")?1:3,wheelDivisor:120,preventPageScroll:!0,_dragging:!1,constructor:function(e,
c){this.node=e;p.mixin(this,c);void 0!==e.style.msTouchAction?e.style.msTouchAction="none":void 0!==e.style.touchAction&&(e.style.touchAction="none");c=navigator.msPointerEnabled;var b=function(b){b.preventDefault()};e.addEventListener("selectstart",b,!1);e.addEventListener("dragstart",b,!1);this._pointerDown=p.hitch(this,this._pointerDown);this._pointerMove=p.hitch(this,this._pointerMove);this._pointerUp=p.hitch(this,this._pointerUp);this._pointerCancel=p.hitch(this,this._pointerCancel);e.addEventListener(c?
"MSPointerDown":"pointerdown",this._pointerDown,!1);e.addEventListener(c?"MSPointerMove":"pointermove",this._pointerMove,!1);e.addEventListener(c?"MSPointerUp":"pointerup",this._pointerUp,!1);e.addEventListener(c?"MSPointerCancel":"pointercancel",this._pointerCancel,!1);this.map&&(this._mouseOver=p.hitch(this,this._mouseOver),this._mouseOut=p.hitch(this,this._mouseOut),this._mouseLeave=p.hitch(this,this._mouseLeave),this._mouseDown=p.hitch(this,this._mouseDown),this._mouseUp=p.hitch(this,this._mouseUp),
this._mouseClick=p.hitch(this,this._mouseClick),this._mouseWheel=p.hitch(this,this._mouseWheel),this._mouseMove=p.hitch(this,this._mouseMove),this._mouseEnter=p.hitch(this,this._mouseEnter),this._onKeyDown=p.hitch(this,this._onKeyDown),this._onKeyUp=p.hitch(this,this._onKeyUp),e.addEventListener("mouseover",this._mouseOver,!1),e.addEventListener("mouseout",this._mouseOut,!1),e.addEventListener("mouseleave",this._mouseLeave,!1),e.addEventListener("mousedown",this._mouseDown,!1),e.addEventListener("mouseup",
this._mouseUp,!1),e.addEventListener("click",this._mouseClick,!1),e.addEventListener("mousewheel",this._mouseWheel,!1),e.addEventListener("mousemove",this._mouseMove,!1),e.addEventListener("mouseenter",this._mouseEnter,!1));this._numTouches=0;this._touches={};this._touchIds=[];this._taps=[];this._immediate=!1},_pointerDown:function(e){if(-1<f.indexOf(this._touchIds,e.pointerId))this._pointerUp(e);else{var c=this._touches,b=e.target,d=e.pointerId,g=this._touchIds,h,k=(new Date).getTime();h=c[d]={};
h.pointerId=d;h.startX=h.pageX=e.pageX;h.startY=h.pageY=e.pageY;h.startTS=k;g.push(d);this._numTouches++;b.setPointerCapture?b.setPointerCapture(d):b.msSetPointerCapture&&b.msSetPointerCapture(d);b=c[g[0]];c=c[g[1]];1!==this._numTouches&&(2===this._numTouches?this._swipeActive&&(b&&(b.startX=b.pageX,b.startY=b.pageY,b.moved=!1),this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(e,b))):this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(e,b))):
this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(e,[b,c]))))}},_pointerMove:function(e){var c=this._touches,b=this._touchIds,d,g,f;if((d=c[e.pointerId])&&(d.pageX!==e.pageX||d.pageY!==e.pageY))if(d.pageX=e.pageX,d.pageY=e.pageY,g=Math.abs(d.pageX-d.startX),f=Math.abs(d.pageY-d.startY),!d.moved&&(g>=this.tapRadius||f>=this.tapRadius)&&(d.moved=d.absMoved=!0),1===this._numTouches)this._swipeActive?this._fire("onSwipeMove",this._processTouchEvent(e,e)):d.moved&&
(this._swipeActive=!0,this._fire("onSwipeStart",this._processTouchEvent(e,e)));else if(2===this._numTouches)if(d=c[b[0]],c=c[b[1]],this._pinchActive)this._fire("onPinchMove",this._processTouchEvent(e,[d,c]));else if(d.moved||c.moved){b=Math.abs(d.startX-c.startX);g=Math.abs(d.startY-c.startY);f=Math.abs(d.pageX-c.pageX);var h=Math.abs(d.pageY-c.pageY);Math.abs(Math.sqrt(f*f+h*h)-Math.sqrt(b*b+g*g))>=2*this.tapRadius&&(this._pinchActive=!0,this._fire("onPinchStart",this._processTouchEvent(e,[d,c])))}},
_pointerUp:function(e){var c=this._touches,b,d=this.node,g=e.target,h=e.pointerId,k=this._touchIds,t=k.slice(0),q=f.map(t,function(b){return c[b]}),l=(new Date).getTime();if(b=c[h])if(b.pageX=e.pageX,b.pageY=e.pageY,b.endTS=l,this._numTouches--,g.releasePointerCapture?g.releasePointerCapture(h):g.msReleasePointerCapture&&g.msReleasePointerCapture(h),0===this._numTouches)if(this._touches={},this._touchIds=[],this._swipeActive)this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(e,e));
else if(this._pinchActive)this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(e,e));else{if(!b.absMoved){var g=Infinity,h=-Infinity,k=Infinity,l=-Infinity,m=this.tapStartTolerance,p;for(p=0;p<t.length;p++)b=q[p],b.startTS<g&&(g=b.startTS),b.startTS>h&&(h=b.startTS),b.endTS<k&&(k=b.endTS),b.endTS>l&&(l=b.endTS);Math.abs(h-g)<=m&&Math.abs(l-k)<=m&&this._basicTap(e,q)}}else 1===this._numTouches&&this._pinchActive&&(k.splice(f.indexOf(k,e.pointerId),1),delete c[e.pointerId],b=c[k[0]],
b.startX=b.pageX,b.startY=b.pageY,b.moved=!1,document.msElementsFromPoint&&(t=document.msElementsFromPoint(b.pageX,b.pageY),f.some(t,function(b){return b===d})||(this._touches={},this._touchIds=[],this._numTouches=0)),this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(e,[e,b])))},_pointerCancel:function(e){this._numTouches&&this._pointerUp(e)},_basicTap:function(e,c){var b=(new Date).getTime(),d=this,g=this._immediate;e=this._processTouchEvent(e,c);this._taps.push({touchInfos:c,
ts:b,event:e});2<this._taps.length&&this._taps.shift();this._fire("onBasicTap",e);clearTimeout(this._tapTimer);e=2===this._taps.length?this.doubleTapDuration/2:this.doubleTapDuration;this._tapTimer=setTimeout(function(){var b=d;d=null;clearTimeout(b._tapTimer);b._analyzeTap(g)},g?0:e)},_analyzeTap:function(e){var c=this._taps,b=c[0],d=c[1],g=b.touchInfos,f=d&&d.touchInfos;c.length&&(e||(this._taps=[]),b&&d?g.length===f.length?d.ts-b.ts<=this.doubleTapDuration?(1===g.length?(e=Math.abs(g[0].startX-
f[0].startX),g=Math.abs(g[0].startY-f[0].startY),g=e<=this.doubleTapRadius&&g<=this.doubleTapRadius):g=!0,g?this._processedDoubleTap(c):this._processedTap(d)):this._processedTap(d):this._processedTap(d):this._processedTap(b||d))},_processedTap:function(e){var c=e.event;this._fire("onProcessedTap",c);1===e.touchInfos.length?this._fire("onTap",this._fixEvent(c)):2===e.touchInfos.length&&this._fire("onTwoFingerTap",c)},_processedDoubleTap:function(e){var c=1===e[1].touchInfos.length,b;c&&(b=[this._fixEvent(e[0].event),
this._fixEvent(e[1].event)],b[1].relatedEvents=b);e=[e[0].event,e[1].event];e[1].relatedEvents=e;this._fire("onProcessedDoubleTap",e[1]);c&&(this._fire("onDoubleTap",b[1]),this._fire("onDblClick",b[1]))},_mouseOver:function(e){this._fire("onMouseOver",this._processMouseEvent(e))},_mouseMove:function(e){this._dragging?this._fire("onMouseDrag",this._processMouseEvent(e)):this._fire("onMouseMove",this._processMouseEvent(e))},_mouseOut:function(e){this._fire("onMouseOut",this._processMouseEvent(e))},
_mouseLeave:function(e){document.removeEventListener("keydown",this._onKeyDown,!1);document.removeEventListener("keyup",this._onKeyUp,!1);this._fire("onMouseOut",this._processMouseEvent(e))},_mouseDown:function(e){this._downX=e.pageX;this._downY=e.pageY;this._fire("onMouseDown",this._processMouseEvent(e));0===e.button&&(this._dragging=!0,this._fire("onMouseDragStart",this._processMouseEvent(e)))},_mouseUp:function(e){this._dragging&&(this._dragging=!1,this._fire("onMouseDragEnd",this._processMouseEvent(e)));
this._fire("onMouseUp",this._processMouseEvent(e))},_mouseClick:function(e){Math.abs(e.pageX-this._downX)<=this.clickRadius&&Math.abs(e.pageY-this._downY)<=this.clickRadius&&this._fire("onClick",this._processMouseEvent(e))},_mouseWheel:function(e){var c=this.map;(c?c.isScrollWheelZoom||c.isScrollWheelPan:this.preventPageScroll)&&e.preventDefault();var c=e.wheelDelta?e.wheelDelta/this.wheelDivisor:-e.detail/this.mozWheelDivisor,b=Math.abs(c),b=b<=this.minWheelValue?this.minWheelValue:this.maxWheelValue;
e.value=0>c?-b:b;this._fire("onMouseWheel",this._processMouseEvent(e))},_mouseEnter:function(e){document.removeEventListener("keydown",this._onKeyDown,!1);document.removeEventListener("keyup",this._onKeyUp,!1);document.addEventListener("keydown",this._onKeyDown,!1);document.addEventListener("keyup",this._onKeyUp,!1);this._fire("onMouseEnter",this._processMouseEvent(e))},_onKeyDown:function(e){this._fire("onKeyDown",e)},_onKeyUp:function(e){this._fire("onKeyUp",e)},_fire:function(e,c){if(this[e])this[e](c);
if(this.map&&this.map[e])this.map[e](c)},_fixEvent:function(e){var c={},b;for(b in e)c[b]=e[b];c.preventDefault=function(){e.preventDefault()};c.stopPropagation=function(){e.stopPropagation()};this.map&&(c.screenPoint=c.screenPoints[0],c.mapPoint=c.mapPoints[0]);return c},_processTouchEvent:function(e,c){var b=this.map,d=b&&b.position,f=0;if(d&&c)if(p.isArray(c)){var h,k;e.screenPoints=[];e.mapPoints=[];for(h=0;h<c.length;h++)c[h]?(k=new g(c[h].pageX-d.x,c[h].pageY-d.y),e.screenPoints.push(k),e.mapPoints.push(b.extent?
b.toMap(k):new q)):f++}else e.screenPoint=new g(c.pageX-d.x,c.pageY-d.y),e.mapPoint=b.extent?b.toMap(e.screenPoint):new q;e.numPoints=c?p.isArray(c)?c.length-f:1:0;return e},_processMouseEvent:function(e){var c=this.map,b=c&&c.position;b&&(e.screenPoint=new g(e.pageX-b.x,e.pageY-b.y),e.mapPoint=c.extent?c.toMap(e.screenPoint):new q);return e},setImmediateTap:function(e){this._immediate=e},destroy:function(){var e=this.node;e.removeEventListener("MSPointerDown",this._pointerDown,!1);e.removeEventListener("MSPointerMove",
this._pointerMove,!1);e.removeEventListener("MSPointerUp",this._pointerUp,!1);e.removeEventListener("MSPointerCancel",this._pointerCancel,!1);this.map&&(e.removeEventListener("mouseover",this._mouseOver,!1),e.removeEventListener("mousemove",this._mouseMove,!1),e.removeEventListener("mouseout",this._mouseOut,!1),e.removeEventListener("mouseleave",this._mouseLeave,!1),e.removeEventListener("mousedown",this._mouseDown,!1),e.removeEventListener("mouseup",this._mouseUp,!1),e.removeEventListener("click",
this._mouseClick,!1),e.removeEventListener("mouseenter",this._mouseEnter,!1));clearTimeout(this._tapTimer);this.node=this.map=this._numTouches=this._touches=this._touchIds=this._taps=null}});l("extend-esri")&&(k.PointerEvents=m);return m})},"esri/renderers/jsonUtils":function(){define("esri/renderers/jsonUtils","dojo/_base/array dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../Color ../symbols/jsonUtils ./SimpleRenderer ./UniqueValueRenderer ./ClassBreaksRenderer ./VectorFieldRenderer ./DotDensityRenderer ./ScaleDependentRenderer ./TimeClassBreaksAger ./TimeRampAger ./TemporalRenderer ./HeatmapRenderer ./StretchRenderer ./ShadedReliefRenderer ./ColormapRenderer".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x,w,y,z){var B={createDefaultRenderer:function(b){b=q.createDefaultSymbol(b);return new g(b)},fromJson:function(d,f){switch(d.type||""){case "simple":d=new g(d,f);break;case "uniqueValue":d=new e(d,null,null,null,null,f);break;case "classBreaks":d=new c(d,null,f);break;case "vectorField":d=new b(d);break;case "scaleDependent":d=this._scaleDependentFromJson(d);break;case "dotDensity":d=d.attributes?B.createDefaultRenderer("esriGeometryPolygon"):this._dotDensityFromJson(d);
break;case "temporal":d=this._temporalFromJson(d,f);break;case "heatmap":d=this._heatmapFromJson(d);break;case "rasterStretch":d=new w(d);break;case "rasterShadedRelief":d=new y(d);break;case "rasterColormap":d=new z(d);break;default:d=(d=f&&f.geometryType)?B.createDefaultRenderer(d):null}return d},_scaleDependentFromJson:function(b){var c={},d=b.minScale;c.rendererInfos=m.map(b.rendererInfos,function(b){var c=b.maxScale;b={minScale:d,maxScale:c,renderer:b.renderer&&this.fromJson(b.renderer)};d=c;
return b},this);return new r(c)},_dotDensityFromJson:function(b){b.backgroundColor&&p.isArray(b.backgroundColor)&&(b.backgroundColor=h.toDojoColor(b.backgroundColor));0<b.dotSize&&(b.dotSize=l.pt2px(b.dotSize));b.fields&&m.forEach(b.fields,function(b){b&&p.isArray(b.color)&&(b.color=h.toDojoColor(b.color))});b.legendOptions&&(b.legendOptions.backgroundColor&&p.isArray(b.legendOptions.backgroundColor)&&(b.legendOptions.backgroundColor=h.toDojoColor(b.legendOptions.backgroundColor)),b.legendOptions.outline&&
(b.legendOptions.outline=q.fromJson(b.legendOptions.outline)));b.outline&&(b.outline=q.fromJson(b.outline));return new d(b)},_temporalFromJson:function(b,c){var d,e;e=c&&c.geometryType;b=b||{};d=this.fromJson(b.observationRenderer,c);c=b.latestObservationRenderer?this.fromJson(b.latestObservationRenderer,c):null;e=b.trackRenderer?this.fromJson(b.trackRenderer,e?{geometryType:"esriGeometryPolyline"}:null):null;b=this._agerFromJson(b.observationAger);return new t(d,c,e,b)},_agerFromJson:function(b){var c;
b=b||{};b.colorRange||b.sizeRange||b.alphaRange?c=this._timeRampFromJson(b):b.agerClassBreakInfos&&(c=this._timeClassBreaksFromJson(b));return c},_timeRampFromJson:function(b){var c,d,e;b.colorRange&&1<b.colorRange.length&&(c=[h.toDojoColor(b.colorRange[0]),h.toDojoColor(b.colorRange[1])]);b.sizeRange&&1<b.sizeRange.length&&(d=[b.sizeRange[0],b.sizeRange[1]]);b.alphaRange&&1<b.alphaRange.length&&(e=[b.alphaRange[0]/255,b.alphaRange[1]/255]);return new u(c,d,e)},_timeClassBreaksFromJson:function(b){var c=
b.agerClassBreakInfos,d,e,g=[],f;d=v.UNIT_DAYS;switch(b.timeUnits){case "esriTimeUnitsSeconds":d=v.UNIT_SECONDS;break;case "esriTimeUnitsMilliseconds":d=v.UNIT_MILLISECONDS;break;case "esriTimeUnitsHours":d=v.UNIT_HOURS;break;case "esriTimeUnitsMinutes":d=v.UNIT_MINUTES;break;case "esriTimeUnitsMonths":d=v.UNIT_MONTHS;break;case "esriTimeUnitsWeeks":d=v.UNIT_WEEKS;break;case "esriTimeUnitsYears":d=v.UNIT_YEARS}for(f=0;f<c.length;f+=1)b=c[f],e={minAge:0,maxAge:b.oldestAge||Infinity},b.color&&(e.color=
h.toDojoColor(b.color)),b.alpha&&(e.alpha=b.alpha/255),e.size=b.size,g[f]=e;return new v(g,d)},_heatmapFromJson:function(b){var c=b.colorStops;c&&c instanceof Array&&m.forEach(c,function(b){b.color=h.toDojoColor(b.color)});return new x(b)}};f("extend-esri")&&p.mixin(p.getObject("renderer",!0,k),B);return B})},"esri/renderers/SimpleRenderer":function(){define("esri/renderers/SimpleRenderer","dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer".split(" "),function(m,
p,f,l,k,h,q){m=m(q,{declaredClass:"esri.renderer.SimpleRenderer",constructor:function(g,e){if(g&&!g.declaredClass){var c=g;this.symbol=(g=c.symbol)&&(g.declaredClass?g:h.fromJson(g,e));this.label=c.label;this.description=c.description}else this.symbol=g},getSymbol:function(g){return this.symbol},toJson:function(){var g=p.mixin(this.inherited(arguments),{type:"simple",label:this.label,description:this.description,symbol:this.symbol&&this.symbol.toJson()});return k.fixJson(g)}});f("extend-esri")&&p.setObject("renderer.SimpleRenderer",
m,l);return m})},"esri/renderers/Renderer":function(){define("esri/renderers/Renderer","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojox/gfx/_base ../kernel ../Color ../layers/support/attributeUtils ../support/expressionUtils ../arcadeProfiles/visualizationProfile".split(" "),function(m,p,f,l,k,h,q,g,e,c){var b=Math.PI;m=m(null,{declaredClass:"esri.renderer.Renderer",constructor:function(b){this._cache={};if(b&&!b.declaredClass){this.rotationInfo=b.rotationInfo;if(!this.rotationInfo){var c=
b.rotationType,d=b.rotationExpression;if(c||d)this.rotationInfo={type:c,expression:d}}this.setRotationInfo(this.rotationInfo);this.setSizeInfo(this._readSizeInfo(b.sizeInfo));this.setColorInfo(this._readColorInfo(b.colorInfo));this.setOpacityInfo(this._readOpacityInfo(b.transparencyInfo));this.setVisualVariables(this._readVariables(b.visualVariables));this.setAuthoringInfo(b.authoringInfo)}this.getSymbol=p.hitch(this,this.getSymbol)},getSymbol:function(b){},_readSizeInfo:function(b){if(b){var c=b.minSize,
d=b.maxSize;c&&(b.minSize="number"===typeof c?k.pt2px(c):this._readSizeInfo(c));d&&(b.maxSize="number"===typeof d?k.pt2px(d):this._readSizeInfo(d));b.stops&&f.forEach(b.stops,function(b){b.size&&"number"===typeof b.size&&(b.size=k.pt2px(b.size))})}return b},_readColorInfo:function(b){b&&(f.forEach(b.colors,function(c,d){p.isArray(c)&&(b.colors[d]=q.toDojoColor(c))}),f.forEach(b.stops,function(c,d){c.color&&p.isArray(c.color)&&(b.stops[d].color=q.toDojoColor(c.color))}));return b},_readOpacityInfo:function(b){var c;
b&&(c=p.mixin({},b),c.transparencyValues&&(c.opacityValues=f.map(c.transparencyValues,function(b){return 1-b/100}),delete c.transparencyValues),c.stops&&(c.stops=f.map(c.stops,function(b){b=p.mixin({},b);b.opacity=1-b.transparency/100;delete b.transparency;return b})));return c},_readVariables:function(b){b&&(b=f.map(b,function(b){"sizeInfo"===b.type?b=this._readSizeInfo(b):"colorInfo"===b.type?b=this._readColorInfo(b):"transparencyInfo"===b.type&&(b=this._readOpacityInfo(b),b.type="opacityInfo");
return b},this));return b},setAuthoringInfo:function(b){this.authoringInfo=b},setRotationInfo:function(b){if(b=this.rotationInfo="string"===typeof b?{field:b}:b){if(b.expression&&!p.isFunction(b.expression)&&!b.field){var c=b.expression.match(this.rotationRE);c&&c[1]&&(b.field=c[1])}b.rotationType=b.type}this._cache.rotationInfo=this._processRotationInfo(b);return this},rotationRE:/^\[([^\]]+)\]$/i,_processRotationInfo:function(b){b&&!b.rotationType&&(b.rotationType="geographic");return this._createCache(b)},
getRotationAngle:function(b,c){var d=this._getVarInfo(c&&c.rotationInfo,"rotationInfo");c=d.variable;var d=this._cache[d.cacheKey],e="arithmetic"===this._getRotationType(c),g=d&&d.hasExpr,f=null;if(c.field||g)f=this._getDataValue(b,c,null,d),null!=f&&(f=(f+(e?-90:0))*(e?-1:1));return f},_getRotationType:function(b){return b&&("rotationInfo"===b.type?b.rotationType:b.type)},_getDataValue:function(b,c,g,f,h){f||(f=this._getVarInfo(c,g),c=f.variable,f=this._cache[f.cacheKey],"sizeInfo"===g&&(f=f.root));
return b._getDataValue(c,f,e,h)},setVisualVariables:function(b){var c=this._cache;f.forEach(this.visualVariables,function(b,d){c.hasOwnProperty(d)&&(c[d]=null)},this);this.visualVariables=b;f.some(b,function(b){return!!b.target})&&b.sort(function(b,c){return b.target===c.target?0:b.target?1:-1});f.forEach(b,function(b,d){"colorInfo"===b.type?c[d]=this._processColorInfo(b):"opacityInfo"===b.type?c[d]=this._processOpacityInfo(b):"sizeInfo"===b.type?c[d]=this._processSizeInfo(b):"rotationInfo"===b.type&&
(c[d]=this._processRotationInfo(b))},this);return this},getVisualVariableValues:function(b){var c=this.visualVariables,d;c&&(d=f.map(c,function(c){var d;switch(c.type){case "sizeInfo":d=this.getSize(b,{sizeInfo:c});break;case "colorInfo":d=this.getColor(b,{colorInfo:c});break;case "opacityInfo":d=this.getOpacity(b,{opacityInfo:c});break;case "rotationInfo":d=this.getRotationAngle(b,{rotationInfo:c})}return{variable:c,value:d}},this));return d},getFieldsUsedInExpressions:function(){var b=[];f.forEach(this._getCacheObjects(),
function(c){c.syntaxTree&&(b=b.concat(e.extractFieldNames(c.syntaxTree)))});b.sort();return f.filter(b,function(c,d){return 0===d||b[d-1]!==c})},hasGeometryOperations:function(){return f.some(this._getCacheObjects(),function(b){return b.syntaxTree?e.hasGeometryOperations(b.syntaxTree):!1})},initializeArcadeEngine:function(){var b=[];f.forEach(this._getCacheObjects(),function(c){c.syntaxTree&&b.push(c.syntaxTree)});return c.initialize(b)},hasVisualVariables:function(b,c){return b?!!this.getVisualVariablesForType(b,
c):!!(this.getVisualVariablesForType("sizeInfo",c)||this.getVisualVariablesForType("colorInfo",c)||this.getVisualVariablesForType("opacityInfo",c)||this.getVisualVariablesForType("rotationInfo",c))},getVisualVariablesForType:function(b,c){var d=this.visualVariables,e;!c&&this[b]?("rotationInfo"===b&&(this[b].rotationType=this[b].type),e=[this[b]]):d&&(e=f.filter(d,function(d){return d.type===b&&("string"===typeof c?d.target===c:!1===c?!d.target:!0)}))&&0===e.length&&(e=void 0);return e},setSizeInfo:function(b){this.sizeInfo=
this.proportionalSymbolInfo=b;this._cache.sizeInfo=this._processSizeInfo(b);return this},_processSizeInfo:function(b){return b&&{root:this._createCache(b),minSize:this._createCache(b.minSize),maxSize:this._createCache(b.maxSize)}},_convertExpressionToArcade:function(b){b&&b.expression&&(b.valueExpression="$view.scale")},_getVarInfo:function(b,c){var d;b&&b.type===c?(d=f.indexOf(this.visualVariables,b),b=this.visualVariables[d]):(d=c,b=this[c]);return{variable:b,cacheKey:d}},setProportionalSymbolInfo:function(b){this.setSizeInfo(b);
return this},getSize:function(b,c){var d=this._getVarInfo(c&&c.sizeInfo,"sizeInfo"),e=d.variable,d=this._cache[d.cacheKey],g=null;if(e)var f=e.minSize,g=e.maxSize,f="object"===typeof f&&f?this._getSize(b,f,d&&d.minSize,c):f,g="object"===typeof g&&g?this._getSize(b,g,d&&d.maxSize,c):g,g=this._getSize(b,e,d&&d.root,c,[f,g]);return g},_getSize:function(c,e,g,f,h){var d=e.stops,k=0,r=g&&g.hasExpr,q=g&&g.ipData,t=g&&g.isScaleDriven,l="object"===typeof c&&!!c,u="number"===typeof c?c:null;if(e.field||t||
r){var m=f&&f.scale,r=h?h[0]:e.minSize;h=h?h[1]:e.maxSize;var v=e.minDataValue,p=e.maxDataValue,D=e.valueUnit||"unknown",G=e.valueRepresentation,I=e.scaleBy,P=f&&f.shape;t?u=m:"number"!==typeof u&&l&&(u=this._getDataValue(c,e,null,g));if(!this._isValidNumber(u))return null;if(d)r=this._lookupData(u,q),u=r[0],h=r[1],u===h?k=d[u].size:(u=d[u].size,d=d[h].size,k=u+(d-u)*r[2]);else if(null!=r&&null!=h&&null!=v&&null!=p)u<=v?k=r:u>=p?k=h:(d=(u-v)/(p-v),"area"===I&&P?(r=(u="circle"===P)?b*Math.pow(r/2,
2):r*r,d=r+d*((u?b*Math.pow(h/2,2):h*h)-r),k=u?2*Math.sqrt(d/b):Math.sqrt(d)):k=r+d*(h-r));else if("unknown"===D)null!=r&&null!=v&&(r&&v?(d=u/v,k="circle"===P?2*Math.sqrt(d*Math.pow(r/2,2)):"square"===P||"diamond"===P||"image"===P?Math.sqrt(d*Math.pow(r,2)):d*r):k=u+(r||v),k=k<r?r:k,null!=h&&k>h&&(k=h));else{d=(f&&f.resolution?f.resolution:1)*this._meterIn[D];if("area"===G)k=Math.sqrt(u/b)/d,k*=2;else if(k=u/d,"radius"===G||"distance"===G)k*=2;null!=r&&k<r&&(k=r);null!=h&&k>h&&(k=h)}}else k=d&&d[0]&&
d[0].size,null==k&&(k=e.minSize);return k=isNaN(k)?0:k},getSizeRangeAtScale:function(b,c){var d;b=this._getVarInfo(b,"sizeInfo");var e=this._cache[b.cacheKey],g={scale:c};if((b=b.variable)&&c){var f=b.minSize;c=b.maxSize;var h=b.stops;h&&h.length?(b=h[0].size,e=h[h.length-1].size):(b="object"===typeof f&&f?this._getSize({},f,e&&e.minSize,g):f,e="object"===typeof c&&c?this._getSize({},c,e&&e.maxSize,g):c);if(null!=b||null!=e)b>e&&(d=e,e=b,b=d),d={minSize:b,maxSize:e}}return d},setColorInfo:function(b){this.colorInfo=
b;this._cache.colorInfo=this._processColorInfo(b);return this},_createCache:function(b,c){if(c=g.createAttributeCache(b,c))c.ipData=this._interpolateData(b);return c},_getCacheObjects:function(b){var c;b=b||this._cache;var d=[];for(c in b){var e=b[c];b.hasOwnProperty(c)&&e&&"object"===typeof e&&(e.hasOwnProperty("idSource")?d.push(e):d=d.concat(this._getCacheObjects(e)))}return d},_processColorInfo:function(b){b&&(f.forEach(b.colors,function(c,d){p.isArray(c)&&(b.colors[d]=new q(c))}),f.forEach(b.stops,
function(c,d){c.color&&p.isArray(c.color)&&(b.stops[d].color=new q(c.color))}));return this._createCache(b)},getColor:function(b,c){c=this._getVarInfo(c&&c.colorInfo,"colorInfo");return this._getColorComponent(b,c.variable,this._cache[c.cacheKey])},setOpacityInfo:function(b){this.opacityInfo=b;this._cache.opacityInfo=this._processOpacityInfo(b);return this},_processOpacityInfo:function(b){return this._createCache(b)},getOpacity:function(b,c){c=this._getVarInfo(c&&c.opacityInfo,"opacityInfo");return this._getColorComponent(b,
c.variable,this._cache[c.cacheKey],!0)},_getColorComponent:function(b,c,e,g,f){var d="number"===typeof b?b:null,h=e&&e.hasExpr,k=e&&e.ipData,r;c&&c.field||h?("number"!==typeof d&&"object"===typeof b&&b&&(d=this._getDataValue(b,c,null,e)),this._isValidNumber(d)||(d=null),null!=d&&(r=g?this._getOpacity(d,c,k):this._getColor(d,c,k))):c&&(b=c.stops,g?(r=b&&b[0]&&b[0].opacity,null==r&&(r=c.opacityValues&&c.opacityValues[0])):r=b&&b[0]&&b[0].color||c.colors&&c.colors[0]);f&&(f.data=d,f.value=r);return f||
r},_isValidNumber:function(b){return"number"===typeof b&&!isNaN(b)&&Infinity!==b&&-Infinity!==b},_interpolateData:function(b){var c;if(b)if(b.colors||b.opacityValues){var d=(b.colors||b.opacityValues).length,e=b.minDataValue,g=(b.maxDataValue-e)/(d-1);c=[];for(b=0;b<d;b++)c[b]=e+b*g}else b.stops&&(c=f.map(b.stops,function(b){return b.value}));return c},_getOpacity:function(b,c,e){b=this._lookupData(b,e);var d;c=c||this.opacityInfo;b&&(e=b[0],d=b[1],e===d?d=this._getOpacValue(c,e):(e=this._getOpacValue(c,
e),c=this._getOpacValue(c,d),d=e+(c-e)*b[2]));return d},_getOpacValue:function(b,c){return b.opacityValues?b.opacityValues[c]:b.stops[c].opacity},_getColor:function(b,c,e){b=this._lookupData(b,e);var d;c=c||this.colorInfo;b&&(d=b[0],e=b[1],d=d===e?this._getColorObj(c,d):q.blendColors(this._getColorObj(c,d),this._getColorObj(c,e),b[2]));return d},_getColorObj:function(b,c){return b.colors?b.colors[c]:b.stops[c].color},_lookupData:function(b,c){var d;if(c){var e=0,g=c.length-1;f.some(c,function(c,d){if(b<
c)return g=d,!0;e=d;return!1});d=[e,g,(b-c[e])/(c[g]-c[e])]}return d},_meterIn:{inches:1/.0254,feet:1/.3048,yards:1/.9144,miles:1/1609.344,"nautical-miles":1/1852,millimeters:1E3,centimeters:100,decimeters:10,meters:1,kilometers:.001,"decimal-degrees":180/20015077},_writeSizeInfo:function(b){if(b){b=p.mixin({},b);this._convertExpressionToArcade(b);var c=b.minSize,d=b.maxSize;c&&(b.minSize="number"===typeof c?k.px2pt(c):this._writeSizeInfo(c));d&&(b.maxSize="number"===typeof d?k.px2pt(d):this._writeSizeInfo(d));
if(c=b.legendOptions)if(b.legendOptions=p.mixin({},c),c=c.customValues)b.legendOptions.customValues=c.slice(0);b.stops&&(b.stops=f.map(b.stops,function(b){b=p.mixin({},b);b.size&&"number"===typeof b.size&&(b.size=k.px2pt(b.size));return b}))}return b},_writeColorInfo:function(b){b&&(b=p.mixin({},b),b.colors&&(b.colors=f.map(b.colors,function(b){return q.toJsonColor(b)})),b.stops&&(b.stops=f.map(b.stops,function(b){b=p.mixin({},b);b.color&&(b.color=q.toJsonColor(b.color));return b})),b.legendOptions&&
(b.legendOptions=p.mixin({},b.legendOptions)));return b},_writeOpacityInfo:function(b){var c;b&&(c=p.mixin({},b),c.opacityValues&&(c.transparencyValues=f.map(c.opacityValues,function(b){return 100*(1-b)}),delete c.opacityValues),c.stops&&(c.stops=f.map(c.stops,function(b){b=p.mixin({},b);b.transparency=100*(1-b.opacity);delete b.opacity;return b})),c.legendOptions&&(c.legendOptions=p.mixin({},c.legendOptions)));return c},toJson:function(b){var c=this.visualVariables,d=p.clone(this.authoringInfo),
e=b&&b.useLegacyRotationProperties,g=(b=(b=this.getVisualVariablesForType("rotationInfo",!1))&&b[0])&&b.field,h;b&&(b===this.rotationInfo||e)&&(h=b.expression||g&&(p.isFunction(g)?g:"["+g+"]"));c&&(c=f.map(c,function(b){"sizeInfo"===b.type?b=this._writeSizeInfo(b):"colorInfo"===b.type?b=this._writeColorInfo(b):"opacityInfo"===b.type?(b=this._writeOpacityInfo(b),b.type="transparencyInfo"):"rotationInfo"===b.type&&(b=e?null:p.mixin({},b));return b},this),c=f.filter(c,function(b){return null!=b}));d&&
f.forEach(d.visualVariables,function(b){"opacityInfo"===b.type&&(b.type="transparencyInfo")});return{rotationType:h&&(this._getRotationType(b)||"geographic"),rotationExpression:h,colorInfo:this._writeColorInfo(this.colorInfo),transparencyInfo:this._writeOpacityInfo(this.opacityInfo),sizeInfo:this._writeSizeInfo(this.sizeInfo),visualVariables:c,authoringInfo:d}}});l("extend-esri")&&p.setObject("renderer.Renderer",m,h);return m})},"esri/layers/support/attributeUtils":function(){define("esri/layers/support/attributeUtils",
"dojo/_base/lang dojo/has dojox/encoding/digests/_base dojox/encoding/digests/MD5 ../../kernel ../../support/expressionUtils".split(" "),function(m,p,f,l,k,h){var q={viewScaleRE:/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,getAttributeId:function(g){return"string"===typeof g?l(g,f.outputTypes.Hex):null},getAttributeIdSource:function(g){if(!g)return null;var e=g.field,c=g.valueExpression,b=null;if(c)b=c;else if(m.isFunction(e))b=e.toString();else if(e){var d=(c=g.normalizationField)?"field":g.normalizationType;
g=parseFloat(g.normalizationTotal);if(d)if(d=d.toLowerCase(),b=e.toLowerCase()+",norm:"+d,c)b+=","+c.toLowerCase();else if("percent-of-total"===d){e=g;if("number"!==typeof e||isNaN(e)||Infinity===e||-Infinity===e||0===g)g=null;b+=","+g}}return b},createAttributeCache:function(g,e){if(!g)return null;var c=g.valueExpression,b=h.createSyntaxTree(c),d=q.getAttributeIdSource(g);return{attributeInfo:g,isNumeric:!e,idSource:d,id:q.getAttributeId(d),hasExpr:!!c,compiledFunc:h.createFunction(b),syntaxTree:b,
isScaleDriven:!!g.expression||q.viewScaleRE.test(c),dependsOnView:b?h.dependsOnView(b):!1,dependsOnGeometry:b?h.hasGeometryOperations(b):!1,isJSFunc:m.isFunction(g.field)}}};p("extend-esri")&&m.setObject("layers.support.attributeUtils",q,k);return q})},"dojox/encoding/digests/_base":function(){define("dojox/encoding/digests/_base",["dojo/_base/lang"],function(m){m=m.getObject("dojox.encoding.digests",!0);m.outputTypes={Base64:0,Hex:1,String:2,Raw:3};m.addWords=function(m,f){var l=(m&65535)+(f&65535);
return(m>>16)+(f>>16)+(l>>16)<<16|l&65535};m.stringToWord=function(m){for(var f=[],l=0,k=8*m.length;l<k;l+=8)f[l>>5]|=(m.charCodeAt(l/8)&255)<<l%32;return f};m.wordToString=function(m){for(var f=[],l=0,k=32*m.length;l<k;l+=8)f.push(String.fromCharCode(m[l>>5]>>>l%32&255));return f.join("")};m.wordToHex=function(m){for(var f=[],l=0,k=4*m.length;l<k;l++)f.push("0123456789abcdef".charAt(m[l>>2]>>l%4*8+4&15)+"0123456789abcdef".charAt(m[l>>2]>>l%4*8&15));return f.join("")};m.wordToBase64=function(m){for(var f=
[],l=0,k=4*m.length;l<k;l+=3)for(var h=(m[l>>2]>>l%4*8&255)<<16|(m[l+1>>2]>>(l+1)%4*8&255)<<8|m[l+2>>2]>>(l+2)%4*8&255,q=0;4>q;q++)8*l+6*q>32*m.length?f.push("\x3d"):f.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(h>>6*(3-q)&63));return f.join("")};m.stringToUtf8=function(m){for(var f="",l=-1,k,h;++l<m.length;)k=m.charCodeAt(l),h=l+1<m.length?m.charCodeAt(l+1):0,55296<=k&&56319>=k&&56320<=h&&57343>=h&&(k=65536+((k&1023)<<10)+(h&1023),l++),127>=k?f+=String.fromCharCode(k):
2047>=k?f+=String.fromCharCode(192|k>>>6&31,128|k&63):65535>=k?f+=String.fromCharCode(224|k>>>12&15,128|k>>>6&63,128|k&63):2097151>=k&&(f+=String.fromCharCode(240|k>>>18&7,128|k>>>12&63,128|k>>>6&63,128|k&63));return f};return m})},"dojox/encoding/digests/MD5":function(){define("dojox/encoding/digests/MD5",["./_base"],function(m){function p(g,e){return g<<e|g>>>32-e}function f(g,e,c,b,d,f){return m.addWords(p(m.addWords(m.addWords(e,g),m.addWords(b,f)),d),c)}function l(g,e,c,b,d,h,k){return f(e&c|
~e&b,g,e,d,h,k)}function k(g,e,c,b,d,h,k){return f(e&b|c&~b,g,e,d,h,k)}function h(g,e,c,b,d,h,k){return f(c^(e|~b),g,e,d,h,k)}function q(g,e){g[e>>5]|=128<<e%32;g[(e+64>>>9<<4)+14]=e;e=1732584193;for(var c=-271733879,b=-1732584194,d=271733878,r=0;r<g.length;r+=16){var q=e,u=c,t=b,p=d;e=l(e,c,b,d,g[r+0],7,-680876936);d=l(d,e,c,b,g[r+1],12,-389564586);b=l(b,d,e,c,g[r+2],17,606105819);c=l(c,b,d,e,g[r+3],22,-1044525330);e=l(e,c,b,d,g[r+4],7,-176418897);d=l(d,e,c,b,g[r+5],12,1200080426);b=l(b,d,e,c,g[r+
6],17,-1473231341);c=l(c,b,d,e,g[r+7],22,-45705983);e=l(e,c,b,d,g[r+8],7,1770035416);d=l(d,e,c,b,g[r+9],12,-1958414417);b=l(b,d,e,c,g[r+10],17,-42063);c=l(c,b,d,e,g[r+11],22,-1990404162);e=l(e,c,b,d,g[r+12],7,1804603682);d=l(d,e,c,b,g[r+13],12,-40341101);b=l(b,d,e,c,g[r+14],17,-1502002290);c=l(c,b,d,e,g[r+15],22,1236535329);e=k(e,c,b,d,g[r+1],5,-165796510);d=k(d,e,c,b,g[r+6],9,-1069501632);b=k(b,d,e,c,g[r+11],14,643717713);c=k(c,b,d,e,g[r+0],20,-373897302);e=k(e,c,b,d,g[r+5],5,-701558691);d=k(d,e,
c,b,g[r+10],9,38016083);b=k(b,d,e,c,g[r+15],14,-660478335);c=k(c,b,d,e,g[r+4],20,-405537848);e=k(e,c,b,d,g[r+9],5,568446438);d=k(d,e,c,b,g[r+14],9,-1019803690);b=k(b,d,e,c,g[r+3],14,-187363961);c=k(c,b,d,e,g[r+8],20,1163531501);e=k(e,c,b,d,g[r+13],5,-1444681467);d=k(d,e,c,b,g[r+2],9,-51403784);b=k(b,d,e,c,g[r+7],14,1735328473);c=k(c,b,d,e,g[r+12],20,-1926607734);e=f(c^b^d,e,c,g[r+5],4,-378558);d=f(e^c^b,d,e,g[r+8],11,-2022574463);b=f(d^e^c,b,d,g[r+11],16,1839030562);c=f(b^d^e,c,b,g[r+14],23,-35309556);
e=f(c^b^d,e,c,g[r+1],4,-1530992060);d=f(e^c^b,d,e,g[r+4],11,1272893353);b=f(d^e^c,b,d,g[r+7],16,-155497632);c=f(b^d^e,c,b,g[r+10],23,-1094730640);e=f(c^b^d,e,c,g[r+13],4,681279174);d=f(e^c^b,d,e,g[r+0],11,-358537222);b=f(d^e^c,b,d,g[r+3],16,-722521979);c=f(b^d^e,c,b,g[r+6],23,76029189);e=f(c^b^d,e,c,g[r+9],4,-640364487);d=f(e^c^b,d,e,g[r+12],11,-421815835);b=f(d^e^c,b,d,g[r+15],16,530742520);c=f(b^d^e,c,b,g[r+2],23,-995338651);e=h(e,c,b,d,g[r+0],6,-198630844);d=h(d,e,c,b,g[r+7],10,1126891415);b=h(b,
d,e,c,g[r+14],15,-1416354905);c=h(c,b,d,e,g[r+5],21,-57434055);e=h(e,c,b,d,g[r+12],6,1700485571);d=h(d,e,c,b,g[r+3],10,-1894986606);b=h(b,d,e,c,g[r+10],15,-1051523);c=h(c,b,d,e,g[r+1],21,-2054922799);e=h(e,c,b,d,g[r+8],6,1873313359);d=h(d,e,c,b,g[r+15],10,-30611744);b=h(b,d,e,c,g[r+6],15,-1560198380);c=h(c,b,d,e,g[r+13],21,1309151649);e=h(e,c,b,d,g[r+4],6,-145523070);d=h(d,e,c,b,g[r+11],10,-1120210379);b=h(b,d,e,c,g[r+2],15,718787259);c=h(c,b,d,e,g[r+9],21,-343485551);e=m.addWords(e,q);c=m.addWords(c,
u);b=m.addWords(b,t);d=m.addWords(d,p)}return[e,c,b,d]}m.MD5=function(g,e){e=e||m.outputTypes.Base64;g=q(m.stringToWord(g),8*g.length);switch(e){case m.outputTypes.Raw:return g;case m.outputTypes.Hex:return m.wordToHex(g);case m.outputTypes.String:return m.wordToString(g);default:return m.wordToBase64(g)}};m.MD5._hmac=function(g,e,c){c=c||m.outputTypes.Base64;var b=m.stringToWord(e);16<b.length&&(b=q(b,8*e.length));var d=[];e=[];for(var f=0;16>f;f++)d[f]=b[f]^909522486,e[f]=b[f]^1549556828;g=q(d.concat(m.stringToWord(g)),
512+8*g.length);g=q(e.concat(g),640);switch(c){case m.outputTypes.Raw:return g;case m.outputTypes.Hex:return m.wordToHex(g);case m.outputTypes.String:return m.wordToString(g);default:return m.wordToBase64(g)}};return m.MD5})},"esri/support/expressionUtils":function(){define("esri/support/expressionUtils","dojo/_base/lang dojo/_base/array dojo/has dojo/Deferred ../kernel ../arcade/arcade ../arcade/Feature".split(" "),function(m,p,f,l,k,h,q){var g={vars:{$feature:"any",$view:"any"}},e=/^\$feature\./i,
c={_getSyntaxTree:function(b){return"string"===typeof b?c.createSyntaxTree(b):b},createSyntaxTree:function(b){var c;try{c=b?h.parseScript(b):null}catch(r){c=null}return c},createFunction:function(b,d){d=d||m.clone(g);b=c._getSyntaxTree(b);var e;try{e=b?h.compileScript(b,d):null}catch(v){e=null}return e},createExecContext:function(b,c){return{vars:{$feature:b?q.createFromGraphic(b):new q,$view:c&&c.view},spatialReference:c&&c.sr}},evalSyntaxTree:function(b,c){var d;try{d=h.executeScript(b,c)}catch(v){d=
null}return d},executeFunction:function(b,c){var d;try{d=b?b(c):null}catch(v){d=null}return d},executeAsyncFunction:function(b,c){var d;try{d=b?b(c):(new l).reject(Error("expressionUtils.executeAsyncFunction: Invalid argument. compiledFunc is missing."))}catch(v){d=(new l).reject(v)}return d},extractFieldNames:function(b){b=c._getSyntaxTree(b);b=h.extractFieldLiterals(b);var d=[];p.forEach(b,function(b){e.test(b)&&(b=b.replace(e,""),d.push(b))});d.sort();return p.filter(d,function(b,c){return 0===
c||d[c-1]!==b})},dependsOnView:function(b){return c.hasVariable(b,"$view")},hasGeometryOperations:function(b){return(b=c._getSyntaxTree(b))?h.scriptUsesGeometryEngine(b):!1},enableGeometryOperations:function(){return h.enableGeometrySupport()},hasVariable:function(b,d){return(b=c._getSyntaxTree(b))?h.referencesMember(b,d):!1},hasFunction:function(b,d){return(b=c._getSyntaxTree(b))?h.referencesFunction(b,d):!1},createFeatureSetFromLayer:function(b,c){c=c||{};var d=h.featureSetUtils();return d?d.constructFeatureSet(b,
c.spatialReference,c.outFields,c.returnGeometry,c.cache):null},createFeatureSetFromLayerUrl:function(b,c){c=c||{};var d=h.featureSetUtils();return d?d.constructFeatureSetFromUrlRaw(b,c.spatialReference,c.outFields,c.returnGeometry,c.cache):null},createFeatureSetCollectionFromMap:function(b,c){var d=h.featureSetUtils();return d?d.createFeatureSetCollectionFromMap(b,b.spatialReference,c&&c.cache):null},createFeatureSetCollectionFromServiceUrl:function(b,c){c=c||{};var d=h.featureSetUtils();return d?
d.createFeatureSetCollectionFromService(b,c.spatialReference,c.cache):null},hasFeatureSetOperations:function(b){return(b=c._getSyntaxTree(b))?h.scriptUsesFeatureSet(b):!1},enableFeatureSetOperations:function(){return h.enableFeatureSetSupport().then(function(){var b=h.featureSetUtils();b&&b.initialiseMetaDataCache()})},enableAsyncOperations:function(){return h.enableAsyncSupport()}};f("extend-esri")&&m.setObject("support.expressionUtils",c,k);return c})},"esri/arcade/arcade":function(){define("esri/arcade/arcade",
"require exports ./arcadeCompiler ./arcadeRuntime ./languageUtils ./parser ./treeAnalysis dojo/has ./polyfill/promiseUtils ../moment".split(" "),function(m,p,f,l,k,h,q,g,e,c){function b(b,c){if(null===E)throw Error("Async Arcade must be enabled for this script");return g("csp-restrictions")||!1===A?function(c){return E.executeScript(b,c)}:f.compileScript(b,c,!0)}function d(b,c){void 0===c&&(c=[]);return h.parseScript(b,c)}function r(b,c){if(!0===c.useAsync||!0===b.isAsync){if(null===E)throw Error("Async Arcade must be enabled for this script");
return E.executeScript(b,c)}return l.executeScript(b,c)}function v(b,c){return l.referencesMember(b,c)}function u(b,c){void 0===c&&(c=[]);void 0===b.usesGeometry&&q.findScriptDependencies(b,c);return!0===b.usesGeometry}function t(){return D?D:D=e.create(function(b,c){m(["../geometry/geometryEngine","./functions/geomsync"],function(c,d){F=!0;d.setGeometryEngine(c);b(!0)},function(b){c(b)})})}function x(){return null!==G?G:G=f.enableAsyncSupport().then(function(){return e.create(function(b,c){m(["./arcadeAsyncRuntime"],
function(d){try{E=d;d=0;for(var e=H;d<e.length;d++){var g=e[d];E.extend(g);f.extend(g,"async")}H=null;b(!0)}catch(K){c(K)}},c)})})}function w(){return E?!0:!1}function y(){return I?I:I=x().then(function(){return e.create(function(b,c){m(["./featureSetUtils","./functions/featuresetbase","./functions/featuresetgeom","./functions/featuresetstats","./functions/featuresetstring"],function(d,e,g,h,k){try{P=d,E.extend([e,g,h,k]),f.extend([e,g,h,k],"async"),C=!0,b(!0)}catch(R){c(R)}},c)})})}function z(b,
c){void 0===c&&(c=[]);void 0===b.usesFeatureSet&&q.findScriptDependencies(b,c);return!0===b.usesFeatureSet}function B(b,c){if(c)for(var d=0;d<c.length;d++)if(v(b,c[d]))return!0;return!1}Object.defineProperty(p,"__esModule",{value:!0});var A=function(){if(g("csp-restrictions"))return!1;try{return(new Function("function* test() {}; return true"))()}catch(Q){return!1}}(),C=!1,F=!1,E=null,H=[];p.compileScript=function(c,d){return!0===d.useAsync||!0===c.isAsync?b(c,d):g("csp-restrictions")?function(b){return l.executeScript(c,
b)}:f.compileScript(c,d)};p.extend=function(b){l.extend(b);f.extend(b,"sync");null===E?H.push(b):(f.extend(b,"async"),E.extend(b))};p.parseScript=d;p.validateScript=function(b,c,d){void 0===d&&(d="");return h.validateScript(b,c,d)};p.scriptCheck=function(b,c,d,e){void 0===e&&(e="");return h.scriptCheck(b,c,d,e)};p.parseAndExecuteScript=function(b,c,d){void 0===d&&(d=[]);b=h.parseScript(b,d);return r(b,c)};p.executeScript=r;p.referencesMember=v;p.referencesFunction=function(b,c){return l.referencesFunction(b,
c)};p.extractFieldLiterals=function(b,c){void 0===c&&(c=!1);return h.extractFieldLiterals(b,c)};p.scriptUsesGeometryEngine=u;var D=null;p.enableGeometrySupport=t;var G=null;p.enableAsyncSupport=x;p.isFeatureSetSupportEnabled=function(){return C};p.isAsyncEnabled=w;p.isGeometryEnabled=function(){return F};var I=null;p.enableFeatureSetSupport=y;p.scriptUsesFeatureSet=z;p.scriptIsAsync=function(b,c){void 0===c&&(c=[]);void 0===b.isAsync&&q.findScriptDependencies(b,c);return!0===b.isAsync};p.loadScriptDependencies=
function(b,c,g,f){void 0===g&&(g=[]);void 0===f&&(f=!1);return e.create(function(h,k){var r="string"===typeof b?d(b):b,q=[];r&&(!1===F&&(u(r)||f)&&q.push(t()),!1===w()&&(!0===r.isAsync||c)&&q.push(x()),!1===C&&(z(r)||B(r,g))&&q.push(y()));q?e.all(q).then(function(){h(!0)},k):h(!0)})};p.scriptTouchesGeometry=function(b){if(u(b))return!0;b=q.findFunctionCalls(b);return-1<b.indexOf("geometry")||-1<b.indexOf("feature")?!0:!1};var P=null;p.featureSetUtils=function(){return P};k.MomentLibrary.Moment=c})},
"esri/arcade/arcadeCompiler":function(){define("esri/arcade/arcadeCompiler","require exports ./ArcadePortal ./Attachment ./Dictionary ./Feature ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ./polyfill/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../SpatialReference".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x,w,y,z,B,A,C,F){function E(b,c,d){try{return d(b,null,c)}catch(qa){throw qa;}}function H(b){return b instanceof Error?x.reject(b):x.reject(Error(b))}function D(b,d){try{switch(d.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclarator":return O(b,d);case "VariableDeclaration":for(var e=[],g=0;g<d.declarations.length;g++)e.push(D(b,d.declarations[g]));return e.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";case "BlockStatement":return Q(b,
d);case "FunctionDeclaration":var f,h=d.id.name.toLowerCase(),k={isAsync:b.isAsync,spatialReference:b.spatialReference,console:b.console,lrucache:b.lrucache,services:b.services,symbols:b.symbols,mangleMap:b.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:b.depthCounter+1,globalScope:b.globalScope};if(64<k.depthCounter)throw Error("Exceeded maximum function depth");e="new lc.SizzleFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; \n   var lscope \x3d runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n";
for(g=0;g<d.params.length;g++){var r=d.params[g].name.toLowerCase(),q=S(b);k.localScope._SymbolsMap[r]=q;k.mangleMap[r]=q;e+="lscope['"+q+"']\x3darguments["+g.toString()+"];\n"}!0===b.isAsync?(e=e+"return lang.__awaiter(this, void 0, void 0, function* () {\n"+(Q(k,d.body)+"\n return lastStatement; "),e+="});  }, runtimeCtx))\n lastStatement \x3d lc.voidOperation; \n"):(e+=Q(k,d.body)+"\n return lastStatement; }, runtimeCtx))",e+="\n lastStatement \x3d lc.voidOperation; \n");void 0!==b.globalScope[h]?
f="gscope['"+h+"']\x3d"+e:void 0!==b.globalScope._SymbolsMap[h]?f="gscope['"+b.globalScope._SymbolsMap[h]+"']\x3d"+e:(q=S(b),b.globalScope._SymbolsMap[h]=q,b.mangleMap[h]=q,f="gscope['"+q+"']\x3d"+e);return f;case "ReturnStatement":return null===d.argument?"return lc.voidOperation":"return "+D(b,d.argument)+"";case "IfStatement":if("AssignmentExpression"===d.test.type||"UpdateExpression"===d.test.type)throw Error(c.nodeErrorMessage(d.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var t=D(b,
d.test),l=ma(b),u="var "+l+" \x3d "+t+";\n if ("+l+" \x3d\x3d\x3d true) {\n"+P(b,d.consequent)+"\n }\n",u=null!==d.alternate?u+("else if ("+l+"\x3d\x3d\x3dfalse)   { \n"+P(b,d.alternate)+"}\n"):u+("else if ("+l+"\x3d\x3d\x3dfalse) { \n lastStatement \x3d lc.voidOperation;\n }\n");return u+="else { lang.error({type: '"+d.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION'); \n}\n";case "ExpressionStatement":return"AssignmentExpression"===d.expression.type?"lastStatement \x3d lc.voidOperation; "+
D(b,d.expression)+"; \n ":"lastStatement \x3d "+D(b,d.expression)+"; ";case "AssignmentExpression":return I(b,d);case "UpdateExpression":return G(b,d);case "BreakStatement":return"break";case "ContinueStatement":return"continue";case "TemplateLiteral":try{for(var m=[],h=f=0,g=d.quasis;h<g.length;h++){var v=g[h];m.push(v.value?JSON.stringify(v.value.cooked):JSON.stringify(""));!1===v.tail&&(m.push(d.expressions[f]?"lang.castString(lang.aCheck("+D(b,d.expressions[f])+", 'TemplateLiteral'))":""),f++)}e=
"(["+m.join(",")+"]).join('')"}catch(Ea){throw Ea;}return e;case "TemplateElement":return JSON.stringify(d.value?d.value.cooked:"");case "ForStatement":e="lastStatement \x3d lc.voidOperation; \n";null!==d.init&&(e+=D(b,d.init)+"; ");var p=ma(b),x=ma(b),e=e+("var "+p+" \x3d true; ")+"\n do { ";null!==d.update&&(e+=" if ("+p+"\x3d\x3d\x3dfalse) {\n "+D(b,d.update)+"  \n}\n "+p+"\x3dfalse; \n");null!==d.test&&(e+="var "+x+" \x3d "+D(b,d.test)+"; ",e+="if ("+x+"\x3d\x3d\x3dfalse) { break; } else if ("+
x+"!\x3d\x3dtrue) { lang.error({type: '"+d.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION');   }\n");e+=D(b,d.body);null!==d.update&&(e+="\n "+D(b,d.update));return e+("\n"+p+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation; ");case "ForInStatement":var C=ma(b),w=ma(b),B=ma(b),y="var "+C+" \x3d "+D(b,d.right)+";\n";"VariableDeclaration"===d.left.type&&(y+=D(b,d.left));var A="VariableDeclaration"===d.left.type?d.left.declarations[0].id.name:d.left.name,A=A.toLowerCase(),e=
"";null!==b.localScope&&(void 0!==b.localScope[A]?e="lscope['"+A+"']":void 0!==b.localScope._SymbolsMap[A]&&(e="lscope['"+b.localScope._SymbolsMap[A]+"']"));""===e&&(void 0!==b.globalScope[A]?e="gscope['"+A+"']":void 0!==b.globalScope._SymbolsMap[A]&&(e="gscope['"+b.globalScope._SymbolsMap[A]+"']"));y=y+("if ("+C+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n ")+("else if (lc.isArray("+C+") || lc.isString("+C+")) {")+("var "+w+"\x3d"+C+".length; \n")+("for(var "+B+"\x3d0; "+B+"\x3c"+
w+"; "+B+"++) {\n");y+=e+"\x3d"+B+";\n";y+=D(b,d.body);y+="\n}\n";y+=" lastStatement \x3d lc.voidOperation; \n";y+=" \n}\n";y+="else if (lc.isImmutableArray("+C+")) {";y=y+("var "+w+"\x3d"+C+".length(); \n")+("for(var "+B+"\x3d0; "+B+"\x3c"+w+"; "+B+"++) {\n");y+=e+"\x3d"+B+";\n";y+=D(b,d.body);y+="\n}\n";y+=" lastStatement \x3d lc.voidOperation; \n";y+=" \n}\n";y+="else if (( "+C+" instanceof lang.Dictionary) || ( "+C+" instanceof lang.Feature)) {";y=y+("var "+w+"\x3d"+C+".keys(); \n")+("for(var "+
B+"\x3d0; "+B+"\x3c"+w+".length; "+B+"++) {\n");y+=e+"\x3d"+w+"["+B+"];\n";y+=D(b,d.body);y+="\n}\n";y+=" lastStatement \x3d lc.voidOperation; \n";y+=" \n}\n";b.isAsync&&(y+="else if (lc.isFeatureSet("+C+")) {",y=y+("var "+w+"\x3d"+C+".iterator(runtimeCtx.abortSignal); \n")+("for(var "+B+"\x3dlang. graphicToFeature( yield "+w+".next(),"+C+"); "+B+"!\x3dnull; "+B+"\x3dlang. graphicToFeature( yield "+w+".next(),"+C+")) {\n")+(e+"\x3d"+B+";\n"),y+=D(b,d.body),y+="\n}\n",y+=" lastStatement \x3d lc.voidOperation; \n",
y+=" \n}\n");return y+"else { lastStatement \x3d lc.voidOperation; } \n";case "Identifier":return M(b,d);case "MemberExpression":var F;try{e=void 0,e=!0===d.computed?D(b,d.property):"'"+d.property.name+"'",F="lang.member("+D(b,d.object)+","+e+")"}catch(Ea){throw Ea;}return F;case "Literal":return null===d.value||void 0===d.value?"null":JSON.stringify(d.value);case "ThisExpression":throw Error(c.nodeErrorMessage(d,"RUNTIME","NOTSUPPORTED"));case "CallExpression":try{if("Identifier"!==d.callee.type)throw Error(c.nodeErrorMessage(d,
"RUNTIME","ONLYNODESSUPPORTED"));var E=d.callee.name.toLowerCase(),e="";null!==b.localScope&&(void 0!==b.localScope[E]?e="lscope['"+E+"']":void 0!==b.localScope._SymbolsMap[E]&&(e="lscope['"+b.localScope._SymbolsMap[E]+"']"));""===e&&(void 0!==b.globalScope[E]?e="gscope['"+E+"']":void 0!==b.globalScope._SymbolsMap[E]&&(e="gscope['"+b.globalScope._SymbolsMap[E]+"']"));if(""!==e){g="[";for(v=0;v<d.arguments.length;v++)0<v&&(g+=", "),g+=D(b,d.arguments[v]);g+="]";m=b.isAsync?"(yield lang.callfunc("+
e+","+g+",runtimeCtx) )":"lang.callfunc("+e+","+g+",runtimeCtx)"}else throw Error(c.nodeErrorMessage(d,"RUNTIME","NOTFOUND"));}catch(Ea){throw Ea;}return m;case "UnaryExpression":var z;try{z="lang.unary("+D(b,d.argument)+",'"+d.operator+"')"}catch(Ea){throw Ea;}return z;case "BinaryExpression":var H;try{H="lang.binary("+D(b,d.left)+","+D(b,d.right)+",'"+d.operator+"')"}catch(Ea){throw Ea;}return H;case "LogicalExpression":var N;try{if("AssignmentExpression"===d.left.type||"UpdateExpression"===d.left.type)throw Error(c.nodeErrorMessage(d.left,
"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===d.right.type||"UpdateExpression"===d.right.type)throw Error(c.nodeErrorMessage(d.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("\x26\x26"===d.operator||"||"===d.operator)N="(lang.logicalCheck("+D(b,d.left)+") "+d.operator+" lang.logicalCheck("+D(b,d.right)+"))";else throw Error(c.nodeErrorMessage(d,"RUNTIME","ONLYORORAND"));}catch(Ea){throw Ea;}return N;case "ConditionalExpression":throw Error(c.nodeErrorMessage(d,
"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":var ka;try{e=[];for(g=0;g<d.elements.length;g++)"Literal"===d.elements[g].type?e.push(D(b,d.elements[g])):e.push("lang.aCheck("+D(b,d.elements[g])+",'ArrayExpression')");ka="["+e.join(",")+"]"}catch(Ea){throw Ea;}return ka;case "ObjectExpression":e="lang.dictionary([";for(g=0;g<d.properties.length;g++){var J=d.properties[g],K="Identifier"===J.key.type?"'"+J.key.name+"'":D(b,J.key),na=D(b,J.value);0<g&&(e+=",");e+="lang.strCheck("+K+",'ObjectExpression'),lang.aCheck("+
na+", 'ObjectExpression')"}return e+"])";case "Property":throw Error("Should not get here");case "Array":throw Error(c.nodeErrorMessage(d,"RUNTIME","NOTSUPPORTED"));default:throw Error(c.nodeErrorMessage(d,"RUNTIME","UNREOGNISED"));}}catch(Ea){throw Ea;}}function G(b,c){var d=null,e="";if("MemberExpression"===c.argument.type)return d=D(b,c.argument.object),e=!0===c.argument.computed?D(b,c.argument.property):"'"+c.argument.property.name+"'","lang.memberupdate("+d+","+e+",'"+c.operator+"',"+c.prefix+
")";d=c.argument.name.toLowerCase();if(null!==b.localScope){if(void 0!==b.localScope[d])return"lang.update(lscope, '"+d+"','"+c.operator+"',"+c.prefix+")";if(void 0!==b.localScope._SymbolsMap[d])return"lang.update(lscope, '"+b.localScope._SymbolsMap[d]+"','"+c.operator+"',"+c.prefix+")"}if(void 0!==b.globalScope[d])return"lang.update(gscope, '"+d+"','"+c.operator+"',"+c.prefix+")";if(void 0!==b.globalScope._SymbolsMap[d])return"lang.update(gscope, '"+b.globalScope._SymbolsMap[d]+"','"+c.operator+
"',"+c.prefix+")";throw Error("Variable not recognised");}function I(b,c){var d=D(b,c.right),e=null,g="";if("MemberExpression"===c.left.type)return e=D(b,c.left.object),g=!0===c.left.computed?D(b,c.left.property):"'"+c.left.property.name+"'","lang.assignmember("+e+","+g+",'"+c.operator+"',"+d+")";e=c.left.name.toLowerCase();if(null!==b.localScope){if(void 0!==b.localScope[e])return"lscope['"+e+"']\x3dlang.assign("+d+",'"+c.operator+"', lscope['"+e+"'])";if(void 0!==b.localScope._SymbolsMap[e])return"lscope['"+
b.localScope._SymbolsMap[e]+"']\x3dlang.assign("+d+",'"+c.operator+"', lscope['"+b.localScope._SymbolsMap[e]+"'])"}if(void 0!==b.globalScope[e])return"gscope['"+e+"']\x3dlang.assign("+d+",'"+c.operator+"', gscope['"+e+"'])";if(void 0!==b.globalScope._SymbolsMap[e])return"gscope['"+b.globalScope._SymbolsMap[e]+"']\x3dlang.assign("+d+",'"+c.operator+"', gscope['"+b.globalScope._SymbolsMap[e]+"'])";throw Error("Variable not recognised");}function P(b,c){return"BlockStatement"===c.type?D(b,c):"ReturnStatement"===
c.type||"BreakStatement"===c.type||"ContinueStatement"===c.type?D(b,c)+"; ":"UpdateExpression"===c.type?"lastStatement \x3d "+D(b,c)+"; ":"ExpressionStatement"===c.type?D(b,c):"ObjectExpression"===c.type?"lastStatement \x3d "+D(b,c)+"; ":D(b,c)+"; "}function Q(b,c){for(var d="",e=0;e<c.body.length;e++)d="ReturnStatement"===c.body[e].type?d+(D(b,c.body[e])+"; \n"):"BreakStatement"===c.body[e].type?d+(D(b,c.body[e])+"; \n"):"ContinueStatement"===c.body[e].type?d+(D(b,c.body[e])+"; \n"):"UpdateExpression"===
c.body[e].type?d+("lastStatement \x3d "+D(b,c.body[e])+"; \n"):"ObjectExpression"===c.body[e].type?d+("lastStatement \x3d "+D(b,c.body[e])+"; \n"):d+(D(b,c.body[e])+" \n");return d}function O(b,c){var d=null===c.init?null:D(b,c.init);d===e.voidOperation&&(d=null);c=c.id.name.toLowerCase();if(null!==b.localScope){if(void 0!==b.localScope[c])return"lscope['"+c+"']\x3d"+d+"; ";if(void 0!==b.localScope._SymbolsMap[c])return"lscope['"+b.localScope._SymbolsMap[c]+"']\x3d"+d+"; ";var g=S(b);b.localScope._SymbolsMap[c]=
g;b.mangleMap[c]=g;return"lscope['"+g+"']\x3d"+d+"; "}if(void 0!==b.globalScope[c])return"gscope['"+c+"']\x3d"+d+"; ";if(void 0!==b.globalScope._SymbolsMap[c])return"gscope['"+b.globalScope._SymbolsMap[c]+"']\x3d"+d+"; ";g=S(b);b.globalScope._SymbolsMap[c]=g;b.mangleMap[c]=g;return"gscope['"+g+"']\x3d"+d+"; "}function N(b,d,e){d=d.toLowerCase();switch(d){case "hasz":return b=b.hasZ,void 0===b?!1:b;case "hasm":return b=b.hasM,void 0===b?!1:b;case "spatialreference":return d=b.spatialReference._arcadeCacheId,
void 0===d&&(e=!0,Object.freeze&&Object.isFrozen(b.spatialReference)&&(e=!1),e&&(fa++,d=b.spatialReference._arcadeCacheId=fa)),b=new k({wkt:b.spatialReference.wkt,wkid:b.spatialReference.wkid}),void 0!==d&&(b._arcadeCacheId="SPREF"+d.toString()),b}switch(b.type){case "extent":switch(d){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return b=b[d],void 0!==b?b:null;case "type":return"Extent"}break;case "polygon":switch(d){case "rings":return d=b.getCacheValue("_arcadeCacheId"),
void 0===d&&(fa++,d=fa,b.setCacheValue("_arcadeCacheId",d)),b=new q(b.rings,b.spatialReference,!0===b.hasZ,!0===b.hasM,d);case "type":return"Polygon"}break;case "point":switch(d){case "x":case "y":case "z":case "m":return void 0!==b[d]?b[d]:null;case "type":return"Point"}break;case "polyline":switch(d){case "paths":return d=b.getCacheValue("_arcadeCacheId"),void 0===d&&(fa++,d=fa,b.setCacheValue("_arcadeCacheId",d)),b=new q(b.paths,b.spatialReference,!0===b.hasZ,!0===b.hasM,d);case "type":return"Polyline"}break;
case "multipoint":switch(d){case "points":return d=b.getCacheValue("_arcadeCacheId"),void 0===d&&(fa++,d=fa,b.setCacheValue("_arcadeCacheId",d)),b=new g(b.points,b.spatialReference,!0===b.hasZ,!0===b.hasM,d,1);case "type":return"Multipoint"}}throw Error(c.nodeErrorMessage(e,"RUNTIME","PROPERTYNOTFOUND"));}function M(b,d){try{var e=d.name.toLowerCase();if(null!==b.localScope){if(void 0!==b.localScope[e])return"lscope['"+e+"']";if(void 0!==b.localScope._SymbolsMap[e])return"lscope['"+b.localScope._SymbolsMap[e]+
"']"}if(void 0!==b.globalScope[e])return"gscope['"+e+"']";if(void 0!==b.globalScope._SymbolsMap[e])return"gscope['"+b.globalScope._SymbolsMap[e]+"']";throw Error(c.nodeErrorMessage(d,"RUNTIME","VARIABLENOTFOUND"));}catch(qa){throw qa;}}function J(b){return null===b?"":e.isArray(b)||e.isImmutableArray(b)?"Array":e.isDate(b)?"Date":e.isString(b)?"String":e.isBoolean(b)?"Boolean":e.isNumber(b)?"Number":b instanceof l?"Attachment":b instanceof f?"Portal":b instanceof k?"Dictionary":b instanceof h?"Feature":
b instanceof B?"Point":b instanceof A?"Polygon":b instanceof C?"Polyline":b instanceof z?"Multipoint":b instanceof w?"Extent":e.isFunctionParameter(b)?"Function":e.isFeatureSet(b)?"FeatureSet":e.isFeatureSetCollection(b)?"FeatureSetCollection":b===e.voidOperation?"":"number"===typeof b&&isNaN(b)?"Number":"Unrecognised Type"}function K(b,c,d,g){try{if(e.equalityTest(c[d],g))return c[d+1];var f=c.length-d;return 1===f?c[d]:2===f?null:3===f?c[d+2]:K(b,c,d+2,g)}catch(ya){throw ya;}}function U(b,c,d,g){try{if(!0===
g)return c[d+1];if(3===c.length-d)return c[d+2];var f=c[d+2];if(!1===e.isBoolean(f))throw Error("WHEN needs boolean test conditions");return U(b,c,d+2,f)}catch(ya){throw ya;}}function R(b,c){var d=b.length,e=Math.floor(d/2);if(0===d)return[];if(1===d)return[b[0]];var g=R(b.slice(0,e),c);b=R(b.slice(e,d),c);for(d=[];0<g.length||0<b.length;)0<g.length&&0<b.length?(e=c(g[0],b[0]),isNaN(e)&&(e=0),0>=e?(d.push(g[0]),g=g.slice(1)):(d.push(b[0]),b=b.slice(1))):0<g.length?(d.push(g[0]),g=g.slice(1)):0<b.length&&
(d.push(b[0]),b=b.slice(1));return d}function Y(b,c){try{var d=b.length,e=Math.floor(d/2);if(0===d)return x.resolve([]);if(1===d)return x.resolve([b[0]]);var g=[Y(b.slice(0,e),c),Y(b.slice(e,d),c)];return x.all(g).then(function(b){return aa(b[0],b[1],c,[])})}catch(ya){return x.reject(ya)}}function aa(b,c,d,e){return x.create(function(g,f){0<b.length||0<c.length?0<b.length&&0<c.length?d(b[0],c[0]).then(function(h){try{isNaN(h)&&(h=1),0>=h?(e.push(b[0]),b=b.slice(1)):(e.push(c[0]),c=c.slice(1)),aa(b,
c,d,e).then(function(b){g(b)},f)}catch(ba){f(ba)}},f):0<b.length?(e.push(b[0]),b=b.slice(1),aa(b,c,d,e).then(function(b){g(b)},f)):0<c.length&&(e.push(c[0]),c=c.slice(1),aa(b,c,d,e).then(function(b){g(b)},f)):g(e)})}function S(b){b.symbols.symbolCounter++;return"_T"+b.symbols.symbolCounter.toString()}function ma(b){b.symbols.symbolCounter++;return"_Tvar"+b.symbols.symbolCounter.toString()}function ha(b,c,d){var e={};b||(b={});d||(d={});e._SymbolsMap={};e.textformatting=1;e.infinity=1;e.pi=1;for(var g in c)e[g]=
1;for(g in d)e[g]=1;for(g in b)e[g]=1;return e}function la(b,d){for(var g={mode:d,compiled:!0,functions:{},signatures:[],failDefferred:H,standardFunction:E,standardFunctionAsync:E,evaluateIdentifier:ca},f=0;f<b.length;f++)b[f].registerFunctions(g);if("sync"===d){for(var h in g.functions)ea[h]=new e.NativeFunction(g.functions[h]),na.prototype[h]=ea[h];for(f=0;f<g.signatures.length;f++)c.addFunctionDeclaration(g.signatures[f],"sync")}else{for(h in g.functions)pa[h]=new e.NativeFunction(g.functions[h]),
ja.prototype[h]=pa[h];for(f=0;f<g.signatures.length;f++)c.addFunctionDeclaration(g.signatures[f],"async")}}function ca(b,c){c=c.name;if("_SymbolsMap"===c)throw"Illegal";if(0<b.localStack.length){if("_t"!==c.substr(0,2).toLowerCase()&&void 0!==b.localStack[b.localStack.length-1][c])return b.localStack[b.localStack.length-1][c];var d=b.mangleMap[c];if(void 0!==d&&void 0!==b.localStack[b.localStack.length-1][d])return b.localStack[b.localStack.length-1][d]}if("_t"!==c.substr(0,2).toLowerCase()&&void 0!==
b.globalScope[c]||1===b.globalScope._SymbolsMap[c])return b.globalScope[c];c=b.mangleMap[c];if(void 0!==c)return b.globalScope[c]}function ia(b){}Object.defineProperty(p,"__esModule",{value:!0});var fa=0,ea={};b.registerFunctions(ea,E);t.registerFunctions(ea,E);v.registerFunctions(ea,E);d.registerFunctions(ea,E);u.registerFunctions(ea,E);ea["typeof"]=function(b,c){return E(b,c,function(b,c,d){e.pcCheck(d,1,1);b=J(d[0]);if("Unrecognised Type"===b)throw Error("Unrecognised Type");return b})};ea.iif=
function(b,c){try{return E(b,c,function(b,c,d){e.pcCheck(d,3,3);if(!1===e.isBoolean(d[0]))throw Error("IF Function must have a boolean test condition");return d[0]?d[1]:d[2]})}catch(ra){throw ra;}};ea.decode=function(b,c){try{return E(b,c,function(c,d,e){if(2>e.length)throw Error("Missing Parameters");if(2===e.length)return e[1];if(0===(e.length-1)%2)throw Error("Must have a default value result.");return K(b,e,1,e[0])})}catch(ra){throw ra;}};ea.when=function(b,c){try{return E(b,c,function(c,d,g){if(3>
g.length)throw Error("Missing Parameters");if(0===g.length%2)throw Error("Must have a default value result.");c=g[0];if(!1===e.isBoolean(c))throw Error("WHEN needs boolean test conditions");return U(b,g,0,c)})}catch(ra){throw ra;}};ea.top=function(b,c){return E(b,c,function(b,c,d){e.pcCheck(d,2,2);if(e.isArray(d[0]))return e.toNumber(d[1])>=d[0].length?d[0].slice(0):d[0].slice(0,e.toNumber(d[1]));if(e.isImmutableArray(d[0]))return e.toNumber(d[1])>=d[0].length()?d[0].slice(0):d[0].slice(0,e.toNumber(d[1]));
throw Error("Top cannot accept this parameter type");})};ea.first=function(b,c){return E(b,c,function(b,c,d){e.pcCheck(d,1,1);return e.isArray(d[0])?0===d[0].length?null:d[0][0]:e.isImmutableArray(d[0])?0===d[0].length()?null:d[0].get(0):null})};ea.sort=function(b,c){return E(b,c,function(c,d,g){e.pcCheck(g,1,2);d=g[0];e.isImmutableArray(d)&&(d=d.toArray());if(!1===e.isArray(d))throw Error("Illegal Argument");if(1<g.length){if(!1===e.isFunctionParameter(g[1]))throw Error("Illegal Argument");var f=
function(b,d){return Ga.callfunc(g[1],[b,d],c)};return b.isAsync?Y(d,f):d=R(d,function(b,c){return f(b,c)})}if(0===d.length)return[];for(var h={},k=0;k<d.length;k++){var r=J(d[k]);""!==r&&(h[r]=!0)}if(!0===h.Array||!0===h.Dictionary||!0===h.Feature||!0===h.Point||!0===h.Polygon||!0===h.Polyline||!0===h.Multipoint||!0===h.Extent||!0===h.Function)return d.slice(0);var k=0,r="",q;for(q in h)k++,r=q;return d=1<k||"String"===r?R(d,function(b,c){if(null===b||void 0===b||b===e.voidOperation)return null===
c||void 0===c||c===e.voidOperation?0:1;if(null===c||void 0===c||c===e.voidOperation)return-1;b=e.toString(b);c=e.toString(c);return b<c?-1:b===c?0:1}):"Number"===r?R(d,function(b,c){return b-c}):"Boolean"===r?R(d,function(b,c){return b===c?0:c?-1:1}):"Date"===r?R(d,function(b,c){return c-b}):d.slice(0)})};var pa={},ka;for(ka in ea)pa[ka]=new e.NativeFunction(ea[ka]);r.registerFunctions(ea,E);for(ka in ea)ea[ka]=new e.NativeFunction(ea[ka]);var na=function(){};na.prototype=ea;var ja=function(){};ja.prototype=
pa;p.functionHelper={fixSpatialReference:e.fixSpatialReference,parseArguments:function(b,c){for(var d=[],e=0;e<c.arguments.length;e++)d.push(D(b,c.arguments[e]));return d},standardFunction:E};p.extend=la;p.executeScript=function(b,c){return b(c)};p.extractFieldLiterals=function(b,d){void 0===d&&(d=!1);return c.findFieldLiterals(b)};p.validateScript=function(b,d){return c.validateScript(b,d,"sync")};p.referencesMember=function(b,d){return c.referencesMember(b,d)};p.referencesFunction=function(b,d){return c.referencesFunction(b,
d)};var Fa=0,Ga={error:function(b,d,e){throw Error(c.nodeErrorMessage(b,d,e));},__awaiter:function(b,c,d,e){return x.create(function(d,g){function f(b){try{k(e.next(b))}catch(Ha){g(Ha)}}function h(b){try{k(e["throw"](b))}catch(Ha){g(Ha)}}function k(b){b.done?d(b.value):b.value&&b.value.then?b.value.then(f,h):(Fa++,0===Fa%100?setTimeout(function(){Fa=0;f(b.value)},0):f(b.value))}k((e=e.apply(b,c||[])).next())})},functionDepthchecker:function(b,c){return function(){c.depthCounter++;c.localStack.push([]);
if(64<c.depthCounter)throw Error("Exceeded maximum function depth");var d=b.apply(this,arguments);if(x.isPromiseLike(d))return d.then(function(b){c.depthCounter--;--c.localStack.length;return b});c.depthCounter--;--c.localStack.length;return d}},castString:function(b){return e.toString(b)},aCheck:function(b,d){if(e.isFunctionParameter(b))throw Error(c.nodeErrorMessage({type:d},"RUNTIME","FUNCTIONCONTEXTILLEGAL"));return b===e.voidOperation?null:b},Dictionary:k,Feature:h,dictionary:function(b){for(var c=
{},d=0;d<b.length;d+=2){if(e.isFunctionParameter(b[d+1]))throw Error("Illegal Argument");if(!1===e.isString(b[d]))throw Error("Illegal Argument");c[b[d].toString()]=b[d+1]===e.voidOperation?null:b[d+1]}b=new k(c);b.immutable=!1;return b},strCheck:function(b){if(!1===e.isString(b))throw Error("Illegal Argument");return b},unary:function(b,d){if(e.isBoolean(b)){if("!"===d)return!b;if("-"===d)return-1*e.toNumber(b);if("+"===d)return 1*e.toNumber(b);if("~"===d)return~e.toNumber(b);throw Error(c.nodeErrorMessage({type:"UnaryExpression",
operator:d,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===d)return-1*e.toNumber(b);if("+"===d)return 1*e.toNumber(b);if("~"===d)return~e.toNumber(b);throw Error(c.nodeErrorMessage({type:"UnaryExpression",operator:d,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));},logicalCheck:function(b){if(!1===e.isBoolean(b))throw Error(c.nodeErrorMessage({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));return b},logical:function(b,
d,g){if(e.isBoolean(b)&&e.isBoolean(d))switch(g){case "||":return b||d;case "\x26\x26":return b&&d}throw Error(c.nodeErrorMessage({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));},binary:function(b,d,g){switch(g){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return e.binaryOperator(e.toNumber(b),e.toNumber(d),g);case "\x3d\x3d":return e.equalityTest(b,d);case "\x3d":return e.equalityTest(b,d);case "!\x3d":return!e.equalityTest(b,
d);case "\x3c":return e.greaterThanLessThan(b,d,g);case "\x3e":return e.greaterThanLessThan(b,d,g);case "\x3c\x3d":return e.greaterThanLessThan(b,d,g);case "\x3e\x3d":return e.greaterThanLessThan(b,d,g);case "+":return e.isString(b)||e.isString(d)?e.toString(b)+e.toString(d):e.toNumber(b)+e.toNumber(d);case "-":return e.toNumber(b)-e.toNumber(d);case "*":return e.toNumber(b)*e.toNumber(d);case "/":return e.toNumber(b)/e.toNumber(d);case "%":return e.toNumber(b)%e.toNumber(d);default:throw Error(c.nodeErrorMessage({type:"BinaryExpression",
operator:g,left:b,right:d},"RUNTIME","OPERATORNOTRECOGNISED"));}},assign:function(b,d,g){switch(d){case "\x3d":return b===e.voidOperation?null:b;case "/\x3d":return e.toNumber(g)/e.toNumber(b);case "*\x3d":return e.toNumber(g)*e.toNumber(b);case "-\x3d":return e.toNumber(g)-e.toNumber(b);case "+\x3d":return e.isString(g)||e.isString(b)?e.toString(g)+e.toString(b):e.toNumber(g)+e.toNumber(b);case "%\x3d":return e.toNumber(g)%e.toNumber(b);default:throw Error(c.nodeErrorMessage({type:"AssignmentExpression",
operator:d,left:null,right:null},"RUNTIME","OPERATORNOTRECOGNISED"));}},update:function(b,c,d,g){var f=e.toNumber(b[c]);b[c]="++"===d?f+1:f-1;return!1===g?f:"++"===d?f+1:f-1},graphicToFeature:function(b,c){return null===b?null:h.createFromGraphicLikeObject(b.geometry,b.attributes,c)},memberupdate:function(b,c,d,g){var f;if(e.isArray(b))if(e.isNumber(c)){0>c&&(c=b.length+c);if(0>c||c>=b.length)throw Error("Assignment outside of array bounds");f=e.toNumber(b[c]);b[c]="++"===d?f+1:f-1}else throw Error("Invalid Parameter");
else if(b instanceof k){if(!1===e.isString(c))throw Error("Dictionary accessor must be a string");if(!0===b.hasField(c))f=e.toNumber(b.field(c)),b.setField(c,"++"===d?f+1:f-1);else throw Error("Invalid Parameter");}else if(b instanceof h){if(!1===e.isString(c))throw Error("Feature accessor must be a string");if(!0===b.hasField(c))f=e.toNumber(b.field(c)),b.setField(c,"++"===d?f+1:f-1);else throw Error("Invalid Parameter");}else{if(e.isImmutableArray(b))throw Error("Array is Immutable");throw Error("Invalid Parameter");
}return!1===g?f:"++"===d?f+1:f-1},assignmember:function(b,c,d,g){if(e.isArray(b))if(e.isNumber(c)){0>c&&(c=b.length+c);if(0>c||c>b.length)throw Error("Assignment outside of array bounds");if(c===b.length&&"\x3d"!==d)throw Error("Invalid Parameter");b[c]=this.assign(g,d,b[c])}else throw Error("Invalid Parameter");else if(b instanceof k){if(!1===e.isString(c))throw Error("Dictionary accessor must be a string");if(!0===b.hasField(c))b.setField(c,this.assign(g,d,b.field(c)));else{if("\x3d"!==d)throw Error("Invalid Parameter");
b.setField(c,this.assign(g,d,null))}}else if(b instanceof h){if(!1===e.isString(c))throw Error("Feature accessor must be a string");if(!0===b.hasField(c))b.setField(c,this.assign(g,d,b.field(c)));else{if("\x3d"!==d)throw Error("Invalid Parameter");b.setField(c,this.assign(g,d,null))}}else{if(e.isImmutableArray(b))throw Error("Array is Immutable");throw Error("Invalid Parameter");}},member:function(b,d){if(null===b)throw Error(c.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},
"RUNTIME","NOTFOUND"));if(b instanceof k||b instanceof h){if(e.isString(d))return b.field(d);throw Error(c.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(b instanceof y){if(e.isString(d))return N(b,d,"MemberExpression");throw Error(c.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(e.isArray(b)){if(e.isNumber(d)&&isFinite(d)&&Math.floor(d)===d){0>d&&(d=b.length+d);if(d>=
b.length||0>d)throw Error(c.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return b[d]}throw Error(c.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(e.isString(b)){if(e.isNumber(d)&&isFinite(d)&&Math.floor(d)===d){0>d&&(d=b.length+d);if(d>=b.length||0>d)throw Error(c.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));
return b[d]}throw Error(c.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(e.isImmutableArray(b)&&e.isNumber(d)&&isFinite(d)&&Math.floor(d)===d){0>d&&(d=b.length()+d);if(d>=b.length()||0>d)throw Error(c.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return b.get(d)}throw Error(c.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));
},callfunc:function(b,c,d){return b instanceof e.NativeFunction?b.fn(d,c):b instanceof e.SizzleFunction?b.fn.apply(this,c):b.apply(this,c)}};p.compileScript=function(b,c,d){void 0===c&&(c=null);void 0===d&&(d=!1);null===c&&(c={vars:{},customfunctions:{}});c={isAsync:d,globalScope:ha(c.vars,d?pa:ea,c.customfunctions),localScope:null,mangleMap:{},console:ia,lrucache:c.lrucache,services:c.services,symbols:{symbolCounter:0}};b=D(c,b.body[0].body);""===b&&(b="lc.voidOperation; ");c={lc:e,lang:Ga,mangles:c.mangleMap,
postProcess:function(b){b instanceof e.ReturnResult&&(b=b.value);b instanceof e.ImplicitResult&&(b=b.value);b===e.voidOperation&&(b=null);if(b===e.breakResult)throw Error("Cannot return BREAK");if(b===e.continueResult)throw Error("Cannot return CONTINUE");if(e.isFunctionParameter(b))throw Error("Cannot return FUNCTION");return b},prepare:function(b,c){var d=b.spatialReference;if(null===d||void 0===d)d=new F({wkid:102100});var e=b.vars,g=b.customfunctions,f=c?new ja:new na;e||(e={});g||(g={});var r=
new k({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});r.immutable=!1;f._SymbolsMap={textformatting:1,infinity:1,pi:1};f.textformatting=r;f.infinity=Number.POSITIVE_INFINITY;f.pi=Math.PI;for(var q in g)f[q]=g[q],f._SymbolsMap[q]=1;for(q in e)f._SymbolsMap[q]=1,f[q]=e[q]&&"esri.Graphic"===e[q].declaredClass?h.createFromGraphic(e[q]):e[q];return{localStack:[],isAsync:c,mangleMap:this.mangles,spatialReference:d,globalScope:f,abortSignal:void 0===b.abortSignal||
null===b.abortSignal?{aborted:!1}:b.abortSignal,localScope:null,services:b.services,console:b.console?b.console:ia,lrucache:b.lrucache,symbols:{symbolCounter:0},depthCounter:1}}};return(new Function("context","spatialReference",d?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+
b+"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); ":"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+b+"\n return lastStatement; } \n return this.postProcess(mainBody()); ")).bind(c)};p.enableAsyncSupport=function(){return x.create(function(b,c){m(["./functions/geomasync"],function(c){la([c],"async");b(!0)},function(b){c(b)})})}})},
"esri/arcade/ArcadePortal":function(){var m=this&&this.__extends||function(){var m=function(f,l){m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var k in h)h.hasOwnProperty(k)&&(f[k]=h[k])};return m(f,l)};return function(f,l){function k(){this.constructor=f}m(f,l);f.prototype=null===l?Object.create(l):(k.prototype=l.prototype,new k)}}();define("esri/arcade/ArcadePortal",["require","exports","./Dictionary"],function(p,f,l){return function(f){function h(h){var g=
f.call(this)||this;g.immutable=!1;g.setField("url",h);g.immutable=!0;return g}m(h,f);return h}(l)})},"esri/arcade/Attachment":function(){var m=this&&this.__extends||function(){var m=function(f,l){m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var k in h)h.hasOwnProperty(k)&&(f[k]=h[k])};return m(f,l)};return function(f,l){function k(){this.constructor=f}m(f,l);f.prototype=null===l?Object.create(l):(k.prototype=l.prototype,new k)}}();define("esri/arcade/Attachment",
["require","exports","./Dictionary"],function(p,f,l){return function(f){function h(h,g,e,c,b){var d=f.call(this)||this;d.attachmentUrl=b;d.immutable=!1;d.setField("id",h);d.setField("name",g);d.setField("contenttype",e);d.setField("size",c);d.immutable=!0;return d}m(h,f);return h}(l)})},"esri/arcade/Feature":function(){var m=this&&this.__assign||function(){m=Object.assign||function(m){for(var f,l=1,k=arguments.length;l<k;l++){f=arguments[l];for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&
(m[h]=f[h])}return m};return m.apply(this,arguments)};define("esri/arcade/Feature","require exports ./Dictionary ./ImmutableArray ./languageUtils ../geometry/Geometry ../geometry/Point ../geometry/jsonUtils ./featureset/support/shared".split(" "),function(p,f,l,k,h,q,g,e,c){return function(){function b(){this.declaredClass="esri.arcade.Feature";this._layer=this.attributes=this._geometry=null;this.immutable=this._datesfixed=!0;this._datefields=null;this.immutable=!0}b.createFromGraphic=function(c){var d=
new b;d._geometry=c.geometry?c.geometry:null;d.attributes=void 0===c.attributes?{}:null===c.attributes?{}:c.attributes;c._sourceLayer?(d._layer=c._sourceLayer,d._datesfixed=!1):c._layer?(d._layer=c._layer,d._datesfixed=!1):c.layer?(d._layer=c.layer,d._datesfixed=!1):c.sourceLayer&&(d._layer=c.sourceLayer,d._datesfixed=!1);return d};b.createFromArcadeFeature=function(c){var d=new b;d._datesfixed=c._datesfixed;d.attributes=c.attributes;d._geometry=c._geometry;c._layer&&(d._layer=c._layer);return d};
b.createFromArcadeDictionary=function(c){var d=new b;d.attributes=c.field("attributes");null!==d.attributes?d.attributes instanceof l?(d.attributes=d.attributes.attributes,null===d.attributes&&(d.attributes={})):d.attributes={}:d.attributes={};d._geometry=c.field("geometry");null!==d._geometry&&(d._geometry instanceof l?d._geometry=b.parseGeometryFromDictionary(d._geometry):d._geometry instanceof q||(d._geometry=null));return d};b.createFromGraphicLikeObject=function(c,e,g){void 0===g&&(g=null);var d=
new b;null===e&&(e={});d.attributes=e;d._geometry=c?c:null;d._layer=g;d._layer&&(d._datesfixed=!1);return d};b.prototype.repurposeFromGraphicLikeObject=function(b,c,e){void 0===e&&(e=null);null===c&&(c={});this.attributes=c;this._geometry=b?b:null;this._datesfixed=(this._layer=e)?!1:!0};b.prototype.castToText=function(){var b="";!1===this._datesfixed&&this._fixDates();for(var c in this.attributes){""!==b&&(b+=",");var e=this.attributes[c];null==e?b+=JSON.stringify(c)+":null":h.isBoolean(e)||h.isNumber(e)||
h.isString(e)?b+=JSON.stringify(c)+":"+JSON.stringify(e):e instanceof q?b+=JSON.stringify(c)+":"+h.toStringExplicit(e):e instanceof k?b+=JSON.stringify(c)+":"+h.toStringExplicit(e):e instanceof Array?b+=JSON.stringify(c)+":"+h.toStringExplicit(e):e instanceof Date?b+=JSON.stringify(c)+":"+JSON.stringify(e):null!==e&&"object"===typeof e&&void 0!==e.castToText&&(b+=JSON.stringify(c)+":"+e.castToText())}return'{"geometry":'+(null===this.geometry()?"null":h.toStringExplicit(this.geometry()))+',"attributes":{'+
b+"}}"};b.prototype._fixDates=function(){if(null!==this._datefields)0<this._datefields.length&&this._fixDateFields(this._datefields);else{for(var b=[],c=0;c<this._layer.fields.length;c++){var e=this._layer.fields[c];"date"!==e.type&&"esriFieldTypeDate"!==e.type||b.push(e.name)}this._datefields=b;0<b.length&&this._fixDateFields(b)}this._datesfixed=!0};b.prototype._fixDateFields=function(b){this.attributes=m({},this.attributes);for(var c=0;c<b.length;c++){var d=this.attributes[b[c]];if(null!==d)if(void 0===
d)for(var e in this.attributes){if(e.toLowerCase()===b[c].toLowerCase()){d=this.attributes[e];null===d||d instanceof Date||(this.attributes[e]=new Date(d));break}}else d instanceof Date||(this.attributes[b[c]]=new Date(d))}};b.prototype.geometry=function(){if(null===this._geometry)return this._geometry;this._geometry instanceof q||(this._geometry=e.fromJson(this._geometry));return this._geometry};b.prototype.field=function(b){!1===this._datesfixed&&this._fixDates();var c=this.attributes[b];if(void 0!==
c)return c;b=b.toLowerCase();for(var d in this.attributes)if(d.toLowerCase()===b)return this.attributes[d];if(this._hasFieldDefinition(b))return null;throw Error("Field not Found");};b.prototype._hasFieldDefinition=function(b){if(null===this._layer)return!1;for(var c=0;c<this._layer.fields.length;c++)if(this._layer.fields[c].name.toLowerCase()===b)return!0;return!1};b.prototype._field=function(b){!1===this._datesfixed&&this._fixDates();var c=b.toLowerCase();b=this.attributes[b];if(void 0!==b)return b;
for(var d in this.attributes)if(d.toLowerCase()===c)return this.attributes[d];return null};b.prototype.setField=function(b,c){if(this.immutable)throw Error("Feature is Immutable");if(!1===h.isSimpleType(c))throw Error("Illegal Value Assignment to Feature");var d=b.toLowerCase();if(void 0===this.attributes[b])for(var e in this.attributes)if(e.toLowerCase()===d){this.attributes[e]=c;return}this.attributes[b]=c};b.prototype.hasField=function(b){var c=b.toLowerCase();if(void 0!==this.attributes[b])return!0;
for(var d in this.attributes)if(d.toLowerCase()===c)return!0;return this._hasFieldDefinition(c)?!0:!1};b.prototype.keys=function(){var b=[],c={},e;for(e in this.attributes)b.push(e),c[e.toLowerCase()]=1;if(null!==this._layer)for(e=0;e<this._layer.fields.length;e++){var g=this._layer.fields[e];1!==c[g.name.toLowerCase()]&&b.push(g.name)}return b=b.sort()};b.parseGeometryFromDictionary=function(c){c=b.convertDictionaryToJson(c,!0);void 0!==c.spatialreference&&(c.spatialReference=c.spatialreference,
delete c.spatialreference);void 0!==c.rings&&(c.rings=this.fixPathArrays(c.rings,!0===c.hasZ,!0===c.hasM));void 0!==c.paths&&(c.paths=this.fixPathArrays(c.paths,!0===c.hasZ,!0===c.hasM));void 0!==c.points&&(c.points=this.fixPointArrays(c.points,!0===c.hasZ,!0===c.hasM));return e.fromJson(c)};b.fixPathArrays=function(b,c,e){var d=[];if(b instanceof Array)for(var g=0;g<b.length;g++)d.push(this.fixPointArrays(b[g],c,e));else if(b instanceof k)for(g=0;g<b.length();g++)d.push(this.fixPointArrays(b.get(g),
c,e));return d};b.fixPointArrays=function(b,c,e){var d=[];if(b instanceof Array)for(var f=0;f<b.length;f++){var h=b[f];h instanceof g?c&&e?d.push([h.x,h.y,h.z,h.m]):c?d.push([h.x,h.y,h.z]):e?d.push([h.x,h.y,h.m]):d.push([h.x,h.y]):h instanceof k?d.push(h.toArray()):d.push(h)}else if(b instanceof k)for(f=0;f<b.length();f++)h=b.get(f),h instanceof g?c&&e?d.push([h.x,h.y,h.z,h.m]):c?d.push([h.x,h.y,h.z]):e?d.push([h.x,h.y,h.m]):d.push([h.x,h.y]):h instanceof k?d.push(h.toArray()):d.push(h);return d};
b.convertDictionaryToJson=function(c,e){void 0===e&&(e=!1);var d={},g;for(g in c.attributes){var f=c.attributes[g];f instanceof l&&(f=b.convertDictionaryToJson(f));e?d[g.toLowerCase()]=f:d[g]=f}return d};b.parseAttributesFromDictionary=function(b){var c={},d;for(d in b.attributes){var e=b.attributes[d];if(h.isSimpleType(e))c[d]=e;else throw Error("Illegal Argument");}return c};b.fromJson=function(c){var d=null;null!==c.geometry&&void 0!==c.geometry&&(d=e.fromJson(c.geometry));var g={};if(null!==c.attributes&&
void 0!==c.attributes)for(var f in c.attributes){var k=c.attributes[f];if(null===k)g[f]=k;else if(h.isString(k)||h.isNumber(k)||h.isBoolean(k)||h.isDate(k))g[f]=k;else throw Error("Illegal Argument");}return b.createFromGraphicLikeObject(d,g,null)};b.prototype.fullDomain=function(b,c){return null!==this._layer&&this._layer.fields?h.getDomain(b,this._layer,this,c):null};b.prototype.subtypes=function(){return null!==this._layer&&this._layer.fields?this._layer.typeIdField?{subtypeField:this._layer.typeIdField,
subtypes:this._layer.types?this._layer.types.map(function(b){return{name:b.name,code:b.id}}):[]}:null:null};b.prototype.domainValueLookup=function(b,c,e){if(null===this._layer||!this._layer.fields)return null;e=h.getDomain(b,this._layer,this,e);if(void 0===c)try{c=this.field(b)}catch(u){return null}return h.getDomainValue(e,c)};b.prototype.domainCodeLookup=function(b,c,e){if(null===this._layer||!this._layer.fields)return null;if(void 0===c){try{c=this.field(b)}catch(u){return null}return c}b=h.getDomain(b,
this._layer,this,e);return h.getDomainCode(b,c)};b.prototype.schema=function(){if(null===this._layer||!this._layer.fields)return null;for(var b=[],e=0,g=this._layer.fields;e<g.length;e++)b.push(c.esriFieldToJson(g[e]));return{objectIdField:this._layer.objectIdField,typeIdField:this._layer.typeIdField,geometryType:void 0===c.layerGeometryEsriRestConstants[this._layer.geometryType]?"":c.layerGeometryEsriRestConstants[this._layer.geometryType],hasZ:!0===this._layer.hasZ,hasM:!0===this._layer.hasM,fields:b}};
return b}()})},"esri/arcade/featureset/support/shared":function(){define("esri/arcade/featureset/support/shared",["require","exports","../../polyfill/promiseUtils","../../../geometry/Extent","../../../layers/Field"],function(m,p,f,l,k){function h(g){var e=null;g.domain&&(e="range"===g.domain.type?{type:"range",range:[g.domain.minValue,g.domain.maxValue]}:{type:"codedValue",codedValues:g.domain.toJson().codedValues});return{name:g.name,type:g.type,alias:g.alias,length:g.length,editable:g.editable,
nullable:g.nullable,domain:e}}function q(g){return g instanceof Date}Object.defineProperty(p,"__esModule",{value:!0});(function(g){g[g.Standardised=0]="Standardised";g[g.StandardisedNoInterval=1]="StandardisedNoInterval";g[g.SqlServer=2]="SqlServer";g[g.Oracle=3]="Oracle";g[g.Postgres=4]="Postgres";g[g.PGDB=5]="PGDB";g[g.FILEGDB=6]="FILEGDB";g[g.NotEvaluated=7]="NotEvaluated"})(p.FeatureServiceDatabaseType||(p.FeatureServiceDatabaseType={}));p.cloneField=function(g){return new k(h(g))};p.esriFieldToJson=
h;(function(g){g[g.InFeatureSet=0]="InFeatureSet";g[g.NotInFeatureSet=1]="NotInFeatureSet";g[g.Unknown=2]="Unknown"})(p.IdState||(p.IdState={}));p.isString=function(g){return"string"===typeof g||g instanceof String};p.isBoolean=function(g){return"boolean"===typeof g};p.isNumber=function(g){return"number"===typeof g};p.isArray=function(g){return g instanceof Array};p.isDate=q;p.equalityTest=function(g,e){return g===e?!0:q(g)&&q(e)?g.getTime()===e.getTime():!1};p.cloneAttributes=function(g){var e={},
c;for(c in g)e[c]=g[c];return e};p.convertSquareUnitsToCode=function(g){if(void 0===g)return null;if("number"===typeof g)return g;switch(g.toLowerCase()){case "meters":case "meter":return 109404;case "miles":case "mile":return 109413;case "kilometers":case "kilometer":case "km":return 109414}return null};p.shapeExtent=function(g){if(null===g)return null;switch(g.type){case "polygon":case "multipoint":case "polyline":return g.getExtent();case "point":return new l({xmin:g.x,ymin:g.y,xmax:g.x,ymax:g.y,
spatialReference:g.spatialReference});case "extent":return g}return null};p.convertLinearUnitsToCode=function(g){if(void 0===g)return null;if("number"===typeof g||"number"===typeof g)return g;switch(g.toLowerCase()){case "meters":case "meter":return 9001;case "miles":case "mile":return 9035;case "kilometers":case "kilometer":case "km":return 9036}return null};p.sameGeomType=function(g,e){return g===e||"point"===g&&"esriGeometryPoint"===e||"polyline"===g&&"esriGeometryPolyline"===e||"polygon"===g&&
"esriGeometryPolygon"===e||"extent"===g&&"esriGeometryEnvelope"===e||"multipoint"===g&&"esriGeometryMultipoint"===e||"point"===e&&"esriGeometryPoint"===g||"polyline"===e&&"esriGeometryPolyline"===g||"polygon"===e&&"esriGeometryPolygon"===g||"extent"===e&&"esriGeometryEnvelope"===g||"multipoint"===e&&"esriGeometryMultipoint"===g?!0:!1};p.defaultMaxRecords=1E3;p.errback=function(g){return function(e){g.reject(e)}};p.callback=function(g,e){return function(){try{g.apply(null,arguments)}catch(c){e.reject(c)}}};
p.layerGeometryEsriConstants={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"};p.layerGeometryEsriRestConstants={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",
esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"};p.layerFieldEsriConstants={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger","long":"esriFieldTypeLong",single:"esriFieldTypeSingle","double":"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",
blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",
esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};p.toEsriGeometryType=function(g){switch(g){case "point":return"esriGeometryPoint";case "polygon":return"esriGeometryPolygon";case "multipoint":return"esriGeometryMultipoint";case "polyline":return"esriGeometryPolyline";default:return"esriGeometryPoint"}};p.reduceArrayWithPromises=function(g,e){return f.create(function(c,
b){var d=f.resolve(!0);g.reduce(function(b,c,d,g){return b.then(function(b){try{return e(b,c,d,g)}catch(w){return f.reject(w)}},function(b){return f.reject(b)})},d).then(c,b)})};p.extractServiceUrl=function(g){if(void 0===g)return"";g=g.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer");g=g.replace(/\/mapserver\/[0-9]*/i,"/MapServer");return g=g.split("?")[0]};p.stableStringify=function(g,e){e||(e={});"function"===typeof e&&(e={cmp:e});var c="boolean"===typeof e.cycles?e.cycles:!1,b=e.cmp&&function(b){return function(c){return function(d,
e){return b({key:d,value:c[d]},{key:e,value:c[e]})}}}(e.cmp),d=[];return function v(e){e&&e.toJson&&"function"===typeof e.toJson&&(e=e.toJson());if(void 0!==e){if("number"===typeof e)return isFinite(e)?""+e:"null";if("object"!==typeof e)return JSON.stringify(e);var g,f;if(Array.isArray(e)){f="[";for(g=0;g<e.length;g++)g&&(f+=","),f+=v(e[g])||"null";return f+"]"}if(null===e)return"null";if(-1!==d.indexOf(e)){if(c)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");
}var h=d.push(e)-1,k=Object.keys(e).sort(b&&b(e));f="";for(g=0;g<k.length;g++){var q=k[g],l=v(e[q]);l&&(f&&(f+=","),f+=JSON.stringify(q)+":"+l)}d.splice(h,1);return"{"+f+"}"}}(g)}})},"esri/layers/Field":function(){define("esri/layers/Field","dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./RangeDomain ./CodedValueDomain".split(" "),function(m,p,f,l,k,h,q){m=m(null,{declaredClass:"esri.layers.Field",constructor:function(g){if(g&&p.isObject(g)&&(this.name=g.name,this.type=g.type,this.alias=
g.alias,this.length=g.length,this.editable=g.editable,this.nullable=g.nullable,this.defaultValue=g.defaultValue,this.description=g.description?JSON.parse(g.description):null,(g=g.domain)&&p.isObject(g)))switch(g.type){case "range":this.domain=new h(g);break;case "codedValue":this.domain=new q(g)}},toJson:function(){return k.fixJson({name:this.name,type:this.type,alias:this.alias,length:this.length,editable:this.editable,nullable:this.nullable,defaultValue:this.defaultValue,description:this.description?
JSON.stringify(this.description):null,domain:this.domain?this.domain.toJson():null})},toJSON:function(){return this.toJson()}});f("extend-esri")&&p.setObject("layers.Field",m,l);return m})},"esri/layers/RangeDomain":function(){define("esri/layers/RangeDomain","dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./Domain".split(" "),function(m,p,f,l,k,h){m=m([h],{declaredClass:"esri.layers.RangeDomain",constructor:function(f){f&&p.isObject(f)&&(this.minValue=f.range[0],this.maxValue=f.range[1])},
toJson:function(){var f=this.inherited(arguments);f.range=[this.minValue,this.maxValue];return k.fixJson(f)}});f("extend-esri")&&p.setObject("layers.RangeDomain",m,l);return m})},"esri/layers/Domain":function(){define("esri/layers/Domain",["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(m,p,f,l,k){m=m(null,{declaredClass:"esri.layers.Domain",constructor:function(f){f&&p.isObject(f)&&(this.name=f.name,this.type=f.type)},toJson:function(){return k.fixJson({name:this.name,
type:this.type})}});f("extend-esri")&&p.setObject("layers.Domain",m,l);return m})},"esri/layers/CodedValueDomain":function(){define("esri/layers/CodedValueDomain","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ./Domain".split(" "),function(m,p,f,l,k,h,q){m=m([q],{declaredClass:"esri.layers.CodedValueDomain",constructor:function(g){g&&p.isObject(g)&&(this.codedValues=g.codedValues)},getName:function(g){var e;f.some(this.codedValues,function(c){c.code==g&&(e=c.name);
return!!e});return e},toJson:function(){var g=this.inherited(arguments);g.codedValues=p.clone(this.codedValues);return h.fixJson(g)}});l("extend-esri")&&p.setObject("layers.CodedValueDomain",m,k);return m})},"esri/arcade/treeAnalysis":function(){define("esri/arcade/treeAnalysis",["require","exports"],function(m,p){function f(b,c){return"0"!==b.min&&c.length<Number(b.min)||"*"!==b.max&&c.length>Number(b.max)?-2:1}function l(b,c,d){if(null!==d.localScope&&void 0!==d.localScope[b.toLowerCase()]){var e=
d.localScope[b.toLowerCase()];if("FormulaFunction"===e.type||"any"===e.type)return void 0===e.signature&&(e.signature={min:"0",max:"*"}),f(e.signature,c)}return void 0!==d.globalScope[b.toLowerCase()]&&(e=d.globalScope[b.toLowerCase()],"FormulaFunction"===e.type||"any"===e.type)?(void 0===e.signature&&(e.signature={min:"0",max:"*"}),f(e.signature,c)):-1}function k(b,c){if(b)for(var d=0;d<b.length;d++)h(b[d],c)}function h(b,c){if(b&&!1!==c(b))switch(b.type){case "ArrayExpression":k(b.elements,c);break;
case "AssignmentExpression":case "BinaryExpression":h(b.left,c);h(b.right,c);break;case "BlockStatement":k(b.body,c);break;case "CallExpression":h(b.callee,c);k(b.arguments,c);break;case "ConditionalExpression":h(b.test,c);h(b.alternate,c);h(b.consequent,c);break;case "DoWhileStatement":h(b.test,c);h(b.body,c);break;case "ExpressionStatement":h(b.expression,c);break;case "ForInStatement":h(b.left,c);h(b.right,c);h(b.body,c);break;case "ForStatement":h(b.init,c);h(b.test,c);h(b.update,c);h(b.body,
c);break;case "FunctionDeclaration":case "FunctionDeclaration":case "FunctionExpression":h(b.id,c);k(b.params,c);h(b.body,c);break;case "IfStatement":h(b.test,c);h(b.consequent,c);h(b.alternate,c);break;case "LogicalExpression":h(b.left,c);h(b.right,c);break;case "MemberExpression":h(b.object,c);h(b.property,c);break;case "NewExpression":h(b.callee,c);k(b.arguments,c);break;case "ObjectExpression":k(b.properties,c);break;case "Program":k(b.body,c);break;case "Property":h(b.key,c);h(b.value,c);break;
case "ReturnStatement":h(b.argument,c);break;case "UnaryExpression":h(b.argument,c);break;case "UpdateExpression":h(b.argument,c);break;case "VariableDeclaration":k(b.declarations,c);break;case "VariableDeclarator":h(b.id,c);h(b.init,c);break;case "TemplateLiteral":k(b.expressions,c),k(b.quasis,c)}}function q(b,c){void 0===c&&(c=!0);var d=r(b,"SYNTAX","UNREOGNISED");try{switch(b.type){case "VariableDeclarator":return null!==b.init&&"FunctionExpression"===b.init.type?r(b,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"):
"Identifier"!==b.id.type?r(b,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER"):null!==b.init?q(b.init,!1):"";case "VariableDeclaration":for(var e=0;e<b.declarations.length;e++)if(d=q(b.declarations[e],c),""!==d)return d;return"";case "ForInStatement":d=q(b.left,c);if(""!==d)break;if("VariableDeclaration"===b.left.type){if(1<b.left.declarations.length)return r(b,"SYNTAX","ONLY1VAR");if(null!==b.left.declarations[0].init)return r(b,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==b.left.type)return r(b,"SYNTAX",
"LEFTNOTVAR");d=q(b.right,c);if(""!==d)break;d=q(b.body,c);if(""!==d)break;return"";case "ForStatement":if(null!==b.test&&(d=q(b.test,c),""!==d))break;if(null!==b.init&&(d=q(b.init,c),""!==d))break;if(null!==b.update&&(d=q(b.update,c),""!==d))break;if(null!==b.body&&(d=q(b.body,c),""!==d))break;return"";case "ContinueStatement":return"";case "EmptyStatement":return"";case "BreakStatement":return"";case "IfStatement":d=q(b.test,c);if(""!==d)break;if(null!==b.consequent&&(d=q(b.consequent,!1),""!==
d))break;if(null!==b.alternate&&(d=q(b.alternate,!1),""!==d))break;return"";case "BlockStatement":for(var g=[],e=0;e<b.body.length;e++)"EmptyStatement"!==b.body[e].type&&g.push(b.body[e]);b.body=g;for(e=0;e<b.body.length;e++)if(d=q(b.body[e],c),""!==d)return d;return"";case "FunctionDeclaration":return!1===c?r(b,"SYNTAX","GLOBALFUNCTIONSONLY"):"Identifier"!==b.id.type?r(b,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"):q(b.body,!1);case "ReturnStatement":return null!==b.argument?q(b.argument,c):"";case "UpdateExpression":return"Identifier"!==
b.argument.type&&"MemberExpression"!==b.argument.type?r(b,"SYNTAX","ASSIGNMENTTOVARSONLY"):q(b.argument,c);case "AssignmentExpression":if("Identifier"!==b.left.type&&"MemberExpression"!==b.left.type)return r(b,"SYNTAX","ASSIGNMENTTOVARSONLY");d=q(b.left,c);if(""!==d)break;switch(b.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:return r(b,"SYNTAX","OPERATORNOTRECOGNISED")}return q(b.right,!1);case "ExpressionStatement":return q(b.expression,!1);
case "Identifier":d="";break;case "MemberExpression":d=q(b.object,c);if(""!==d)break;return!0===b.computed?q(b.property,c):"";case "Literal":return"";case "TemplateElement":return"";case "CallExpression":if("Identifier"!==b.callee.type)return r(b,"SYNTAX","ONLYNODESSUPPORTED");d="";for(e=0;e<b.arguments.length;e++)if(d=q(b.arguments[e],c),""!==d)return d;return"";case "UnaryExpression":d=q(b.argument,c);break;case "BinaryExpression":d=q(b.left,c);if(""!==d)break;d=q(b.right,c);if(""!==d)break;switch(b.operator){case "|":case "\x26":case "\x3e\x3e":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;
default:return r(b,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "LogicalExpression":d=q(b.left,c);if(""!==d)break;d=q(b.right);if(""!==d)break;switch(b.operator){case "\x26\x26":case "||":break;default:return r(b,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "ConditionalExpression":return r(b,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":d="";for(e=0;e<b.elements.length&&(d=q(b.elements[e],c),""===d);e++);break;case "TemplateLiteral":d="";for(e=0;e<b.quasis.length;e++)if(d=q(b.quasis[e],c),
""!==d)return d;for(e=0;e<b.expressions.length&&(d=q(b.expressions[e],c),""===d);e++);break;case "ObjectExpression":d="";for(e=0;e<b.properties.length;e++){d="";if(null!==b.properties[e].key&&("Literal"!==b.properties[e].key.type&&"Identifier"!==b.properties[e].key.type&&(d=r(b,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===b.properties[e].key.type)){var g=b.properties[e].key,f="value"in g?g.value:null;"string"===typeof f||f instanceof String||(d=r(b,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===
d&&(d=q(b.properties[e],c));if(""!==d)break}break;case "Property":if("Literal"!==b.key.type&&"Identifier"!==b.key.type)return r(b,"SYNTAX","ONLYLITERAL");if("Identifier"===b.key.type||(d=q(b.key,c),""===d))d=q(b.value,c)}return d}catch(D){throw D;}}function g(d,e){var f=r(d,"SYNTAX","UNREOGNISED"),h=null,k="";try{switch(d.type){case "VariableDeclarator":if(null!==d.init&&"FunctionExpression"===d.init.type)return r(d,"SYNTAX","FUNCTIONVARIABLEDECLARATOR");var q=null===d.init?"":g(d.init,e);if(""!==
q)return q;"Identifier"===d.id.type&&(null===e.localScope?e.globalScope[d.id.name.toLowerCase()]={type:"any"}:e.localScope[d.id.name.toLowerCase()]={type:"any"});return"";case "FunctionDeclaration":h=c(d.id.name.toLowerCase(),d);k=b(d,e);if(""!==k)return k;if(null!==e.localScope)return r(d,"SYNTAX","GLOBALFUNCTIONSONLY");h.isnative=!1;e.globalScope[d.id.name.toLowerCase()]={type:"FormulaFunction",signature:[h]};return"";case "VariableDeclaration":for(var f="",t=0;t<d.declarations.length&&(f=g(d.declarations[t],
e),""===f);t++);break;case "IfStatement":f=g(d.test,e);if(""!==f)break;if("AssignmentExpression"===d.test.type||"UpdateExpression"===d.test.type)return r(d.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");if(null!==d.consequent&&(f=g(d.consequent,e),""!==f))break;if(null!==d.alternate&&(f=g(d.alternate,e),""!==f))break;return"";case "EmptyStatement":return"";case "BlockStatement":for(t=0;t<d.body.length;t++)if(f=g(d.body[t],e),""!==f)return f;return"";case "ReturnStatement":return null!==d.argument?
g(d.argument,e):"";case "ForInStatement":if("VariableDeclaration"===d.left.type){if(1<d.left.declarations.length)return r(d,"SYNTAX","ONLY1VAR");if(null!==d.left.declarations[0].init)return r(d,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==d.left.type)return r(d,"SYNTAX","LEFTNOTVAR");f=g(d.left,e);if(""!==f)break;f=g(d.right,e);if(""!==f)break;f=g(d.body,e);if(""!==f)break;return"";case "ForStatement":if(null!==d.init&&(f=g(d.init,e),""!==f))break;if(null!==d.test&&(f=g(d.test,e),""!==f))break;
if(null!==d.body&&(f=g(d.body,e),""!==f))break;if(null!==d.update&&(f=g(d.update,e),""!==f))break;return"";case "BreakStatement":return"";case "ContinueStatement":return"";case "UpdateExpression":if("Identifier"!==d.argument.type&&"MemberExpression"!==d.argument.type)return r(d,"SYNTAX","ASSIGNMENTTOVARSONLY");var u=!1;if("MemberExpression"===d.argument.type)return g(d.argument,e);null!==e.localScope&&void 0!==e.localScope[d.argument.name.toLowerCase()]&&(u=!0);void 0!==e.globalScope[d.argument.name.toLowerCase()]&&
(u=!0);return!1===u?"Identifier "+d.argument.name+" has not been declared.":"";case "AssignmentExpression":if("Identifier"!==d.left.type&&"MemberExpression"!==d.left.type)return r(d,"SYNTAX","ASSIGNMENTTOVARSONLY");var m=g(d.right,e);if(""!==m)return m;u=!1;if("MemberExpression"===d.left.type)return m=g(d.left,e),""!==m?m:"";null!==e.localScope&&void 0!==e.localScope[d.left.name.toLowerCase()]&&(u=!0);void 0!==e.globalScope[d.left.name.toLowerCase()]&&(u=!0);return!1===u?"Identifier "+d.left.name+
" has not been declared.":"";case "ExpressionStatement":return g(d.expression,e);case "Identifier":var v=d.name.toLowerCase();if(null!==e.localScope&&void 0!==e.localScope[v])return"";f=void 0!==e.globalScope[v]?"":r(d,"SYNTAX","VARIABLENOTFOUND");break;case "MemberExpression":f=g(d.object,e);if(""!==f)break;return!0===d.computed?g(d.property,e):"";case "Literal":return"";case "TemplateElement":return"";case "CallExpression":if("Identifier"!==d.callee.type)return r(d,"SYNTAX","ONLYNODESSUPPORTED");
f="";for(t=0;t<d.arguments.length;t++)if(f=g(d.arguments[t],e),""!==f)return f;var p=l(d.callee.name,d.arguments,e);-1===p&&(f=r(d,"SYNTAX","NOTFOUND"));-2===p&&(f=r(d,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":f=g(d.argument,e);break;case "BinaryExpression":f=g(d.left,e);if(""!==f)break;f=g(d.right,e);if(""!==f)break;return"";case "LogicalExpression":f=g(d.left,e);if(""!==f)break;if("AssignmentExpression"===d.left.type||"UpdateExpression"===d.left.type)return r(d.left,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");
f=g(d.right,e);if(""!==f)break;return"AssignmentExpression"===d.right.type||"UpdateExpression"===d.right.type?r(d.right,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):"";case "ConditionalExpression":return r(d,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":f="";for(t=0;t<d.elements.length&&(f=g(d.elements[t],e),""===f);t++);break;case "TemplateLiteral":f="";for(t=0;t<d.quasis.length;t++)if(f=g(d.quasis[t],e),""!==f)return f;for(t=0;t<d.expressions.length&&(f=g(d.expressions[t],e),""===f);t++);break;
case "ObjectExpression":f="";for(t=0;t<d.properties.length;t++){f="";if(null!==d.properties[t].key&&("Literal"!==d.properties[t].key.type&&"Identifier"!==d.properties[t].key.type&&(f=r(d,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===d.properties[t].key.type)){var x=d.properties[t].key,w="value"in x?x.value:null;"string"===typeof w||w instanceof String||(f=r(d,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===f&&(f=g(d.properties[t],e));if(""!==f)break}break;case "Property":if("Literal"!==d.key.type&&
"Identifier"!==d.key.type)return r(d,"SYNTAX","ONLYLITERAL");if("Identifier"===d.key.type||(f=g(d.key,e),""===f))f=g(d.value,e)}return f}catch(M){throw M;}}function e(b,c){var d=!1,e=c.toLowerCase();h(b,function(b){if(d)return!1;"Identifier"===b.type&&b.name&&b.name.toLowerCase()===e&&(d=!0);return!0});return d}function c(b,c){var d=[];if(void 0!==c.params&&null!==c.params)for(var e=0;e<c.params.length;e++)d.push("any");return{name:b,return:"any",params:d}}function b(b,c){c={globalScope:c.globalScope,
localScope:{}};for(var d=0;d<b.params.length;d++)c.localScope[b.params[d].name.toLowerCase()]={type:"any"};return g(b.body,c)}function d(b,c,d,e){var g={};if(void 0===b||null===b)b={};if(void 0===d||null===d)d={};g.infinity={type:"any"};g.textformatting={type:"any"};g.pi={type:"any"};for(var f in c)"sync"===e&&void 0!==c[f].min?g[f]={type:"FormulaFunction",signature:{min:c[f].min,max:c[f].max}}:"sync"!==e&&void 0!==c[f].fmin&&(g[f]={type:"FormulaFunction",signature:{min:c[f].fmin,max:c[f].fmax}});
for(c=0;c<d.length;c++)f=d[c],g[f.name]={type:"FormulaFunction",signature:f};for(f in b)g[f]=b[f],g[f].type="any";return g}function r(b,c,d){var e="";switch(c){case "SYNTAX":e="Syntax Error: ";break;case "RUNTIME":e="Runtime Error: ";break;default:e="Syntax Error: "}try{switch(b.type){case "IfStatement":switch(d){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":e+=" Assignments not be made in logical tests";break;case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":e+=" Non Boolean used as Condition"}break;case "UpdateExpression":case "AssignmentExpression":switch(d){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":e+=
" Assignments not be made in logical tests";break;case "ASSIGNMENTTOVARSONLY":e+=" Assignments can only be made to identifiers"}break;case "ExpressionStatement":e+=" Assignments can only be made to identifiers";break;case "FunctionDeclaration":switch(d){case "GLOBALFUNCTIONSONLY":e+=" Functions cannot be declared as variables";break;case "FUNCTIONMUSTHAVEIDENTIFIER":e+=" Function Definition must have an identifier"}break;case "VariableDeclaration":e+=" Only 1 variable can be declared at a time";break;
case "VariableDeclarator":switch(d){case "FUNCTIONVARIABLEDECLARATOR":e+=" Functions cannot be declared as variables";break;case "VARIABLEMUSTHAVEIDENTIFIER":e+=" Variable Definition must have an identifier"}break;case "Identifier":e+=" Identifier Not Found. ";e+=b.name;break;case "ObjectExpression":switch(d){case "OBJECTPROPERTYMUSTBESTRING":e+=" Property name must be a string"}break;case "ForStatement":switch(d){case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":e+=" Non Boolean used as Condition"}break;
case "ForInStatement":switch(d){case "ONLY1VAR":e+=" Can only declare 1 var for use with IN";break;case "CANNOTDECLAREVAL":e+=" Can only declare value for use with IN";break;case "LEFTNOVAR":e+="Must provide a variable to iterate with.";break;case "VARIABLENOTDECLARED":e+="Variable must be declared before it is used..";break;case "CANNOTITERATETHISTYPE":e+="This type cannot be used in an IN loop"}break;case "MemberExpression":switch(d){case "PROPERTYNOTFOUND":e+="Cannot find member property. ";e+=
!1===b.computed?"Identifier"===b.property.type?b.property.name:"":"";break;case "OUTOFBOUNDS":e+="Out of Bounds. ";e+=!1===b.computed?"Identifier"===b.property.type?b.property.name:"":"";break;case "NOTFOUND":e+="Cannot call member method on null. ";e+=!1===b.computed?"Identifier"===b.property.type?b.property.name:"":"";break;case "INVALIDTYPE":e+="Cannot call member property on object of this type. ",e+=!1===b.computed?"Identifier"===b.property.type?b.property.name:"":""}break;case "Property":switch(d){case "ONLYLITERAL":e+=
"Property names must be literals or identifiers"}break;case "Literal":break;case "CallExpression":switch(d){case "WRONGSIGNATURE":e+="Function signature does not match: ";e+="Identifier"===b.callee.type?b.callee.name:"";break;case "ONLYNODESUPPORTED":e+="Functions must be declared.";e+="Identifier"===b.callee.type?b.callee.name:"";break;case "NOTAFUNCTION":e+="Not a Function: ";e+="Identifier"===b.callee.type?b.callee.name:"";break;case "NOTFOUND":e+="Function Not Found: "+("Identifier"===b.callee.type?
b.callee.name:"")}break;case "UnaryExpression":switch(d){case "NOTSUPPORTEDUNARYOPERATOR":e+="Operator "+b.operator+" not allowed in this context. Only ! can be used with boolean, and - with a number";break;case "NOTSUPPORTEDTYPE":e+="Unary operator "+b.operator+" cannot be used with this argument."}case "BinaryExpression":switch(d){case "OPERATORNOTRECOGNISED":e+="Binary Operator not recognised "+b.operator}break;case "LogicalExpression":switch(d){case "ONLYBOOLEAN":e+="Operator "+b.operator+" cannot be used. Only || or \x26\x26 are allowed values";
break;case "ONLYORORAND":e+="Logical Expression "+b.operator+" being applied to parameters that are not boolean."}break;case "ConditionalExpression":e+="Conditional statements not supported.";break;case "ArrayExpression":switch(d){case "FUNCTIONCONTEXTILLEGAL":e+=" Cannot Put Function inside Array."}break;default:e+="Expression contains unrecognised code structures."}}catch(E){throw E;}return e}function v(b,c,d){return{line:b.loc.start.line,character:b.loc.start.column,reason:r(b,c,d)}}function u(b,
c,d,e){c={globalScope:c.globalScope,localScope:{}};for(var g=0;g<b.params.length;g++)c.localScope[b.params[g].name.toLowerCase()]={type:"any"};t(b.body,c,d,e,!1)}function t(b,d,e,g,f){void 0===f&&(f=!0);if(null===b)throw Error("Unnexpexted Expression Syntax");var h=null;try{switch(b.type){case "VariableDeclarator":if(null!==b.init&&"FunctionExpression"===b.init.type){g.push(v(b,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"));break}"Identifier"!==b.id.type?g.push(v(b,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER")):
(b.id.name.toLowerCase(),null===d.localScope?d.globalScope[b.id.name.toLowerCase()]={type:"any"}:d.localScope[b.id.name.toLowerCase()]={type:"any"});null!==b.init&&t(b.init,d,e,g,f);break;case "FunctionDeclaration":!1===f&&g.push(v(b,"SYNTAX","GLOBALFUNCTIONSONLY"));"Identifier"!==b.id.type&&g.push(v(b,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"));h=c("",b);u(b,d,e,g);null!==d.localScope&&g.push(v(b,"SYNTAX","GLOBALFUNCTIONSONLY"));h.isnative=!1;"Identifier"===b.id.type&&(d.globalScope[b.id.name.toLowerCase()]=
{type:"FormulaFunction",signature:[h]});break;case "VariableDeclaration":for(var k=0;k<b.declarations.length;k++)t(b.declarations[k],d,e,g,f);break;case "IfStatement":null!==b.test&&(t(b.test,d,e,g,f),"AssignmentExpression"!==b.test.type&&"UpdateExpression"!==b.test.type||g.push(v(b.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")));null!==b.consequent&&t(b.consequent,d,e,g,f);null!==b.alternate&&t(b.alternate,d,e,g,f);break;case "EmptyStatement":break;case "BlockStatement":if(null!==b.body)for(k=
0;k<b.body.length;k++)t(b.body[k],d,e,g,f);break;case "ReturnStatement":null!==b.argument&&t(b.argument,d,e,g,f);break;case "ForInStatement":"VariableDeclaration"===b.left.type?(1<b.left.declarations.length&&g.push(v(b,"SYNTAX","ONLY1VAR")),null!==b.left.declarations[0].init&&g.push(v(b,"SYNTAX","CANNOTDECLAREVAL"))):"Identifier"!==b.left.type&&g.push(v(b,"SYNTAX","LEFTNOTVAR"));t(b.left,d,e,g,f);t(b.right,d,e,g,f);t(b.body,d,e,g,f);break;case "ForStatement":null!==b.init&&t(b.init,d,e,g,f);null!==
b.test&&t(b.test,d,e,g,f);null!==b.body&&t(b.body,d,e,g,f);null!==b.update&&t(b.update,d,e,g,f);break;case "BreakStatement":break;case "ContinueStatement":break;case "UpdateExpression":"Identifier"!==b.argument.type&&"MemberExpression"!==b.argument.type?g.push(v(b,"SYNTAX","ASSIGNMENTTOVARSONLY")):("Identifier"===b.argument.type&&(h=!1,!1===e&&(null!==d.localScope&&void 0!==d.localScope[b.argument.name.toLowerCase()]&&(h=!0),void 0!==d.globalScope[b.argument.name.toLowerCase()]&&(h=!0),!1===h&&g.push({line:null===
b?0:b.loc.start.line,character:null===b?0:b.loc.start.column,reason:"Identifier "+b.argument.name+" has not been declared."}))),"MemberExpression"===b.argument.type&&t(b.argument,d,e,g,f));break;case "AssignmentExpression":"Identifier"!==b.left.type&&"MemberExpression"!==b.left.type&&g.push(v(b,"SYNTAX","ASSIGNMENTTOVARSONLY"));switch(b.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:g.push(v(b,"SYNTAX","OPERATORNOTRECOGNISED"))}t(b.right,d,e,g,
f);h=!1;"Identifier"===b.left.type&&(null!==d.localScope&&void 0!==d.localScope[b.left.name.toLowerCase()]&&(h=!0),void 0!==d.globalScope[b.left.name.toLowerCase()]&&(h=!0),!1===e&&!1===h&&g.push({line:null===b?0:b.loc.start.line,character:null===b?0:b.loc.start.column,reason:"Identifier "+b.left.name+" has not been declared."}));"MemberExpression"===b.left.type&&t(b.left,d,e,g,f);break;case "ExpressionStatement":t(b.expression,d,e,g,f);break;case "Identifier":var r=b.name.toLowerCase();if(null!==
d.localScope&&void 0!==d.localScope[r]||void 0!==d.globalScope[r])break;!1===e&&g.push(v(b,"SYNTAX","VARIABLENOTFOUND"));break;case "MemberExpression":t(b.object,d,e,g,f);!0===b.computed&&t(b.property,d,e,g,f);break;case "Literal":break;case "TemplateElement":break;case "CallExpression":"Identifier"!==b.callee.type&&g.push(v(b,"SYNTAX","ONLYNODESSUPPORTED"));for(k=0;k<b.arguments.length;k++)t(b.arguments[k],d,e,g,f);if("Identifier"===b.callee.type){var q=l(b.callee.name,b.arguments,d);!1===e&&-1===
q&&g.push(v(b,"SYNTAX","NOTFOUND"));-2===q&&g.push(v(b,"SYNTAX","WRONGSIGNATURE"))}break;case "UnaryExpression":t(b.argument,d,e,g,f);break;case "BinaryExpression":t(b.left,d,e,g,f);t(b.right,d,e,g,f);switch(b.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":case "\x26":case "|":case "^":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":break;default:g.push(v(b,"SYNTAX","OPERATORNOTRECOGNISED"))}break;case "LogicalExpression":switch(b.operator){case "\x26\x26":case "||":break;
default:g.push(v(b,"SYNTAX","OPERATORNOTRECOGNISED"))}t(b.left,d,e,g,f);"AssignmentExpression"!==b.left.type&&"UpdateExpression"!==b.left.type||g.push(v(b,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));t(b.right,d,e,g,f);"AssignmentExpression"!==b.right.type&&"UpdateExpression"!==b.right.type||g.push(v(b,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));break;case "ConditionalExpression":g.push(v(b,"SYNTAX","NOTSUPPORTED"));break;case "ArrayExpression":for(k=0;k<b.elements.length;k++)t(b.elements[k],
d,e,g,f);break;case "TemplateLiteral":for(k=0;k<b.quasis.length;k++)t(b.quasis[k],d,e,g,f);for(k=0;k<b.expressions.length;k++)t(b.expressions[k],d,e,g,f);break;case "ObjectExpression":for(k=0;k<b.properties.length;k++)t(b.properties[k],d,e,g,f);break;case "Property":"Literal"!==b.key.type&&"Identifier"!==b.key.type&&g.push(v(b,"SYNTAX","ONLYLITERAL"));"Literal"===b.key.type&&t(b.key,d,e,g,f);t(b.value,d,e,g,f);break;default:g.push(v(b,"SYNTAX","UNRECOGNISED"))}}catch(P){g.push({line:null===b?0:b.loc.start.line,
character:null===b?0:b.loc.start.column,reason:"Unnexpected Syntax"})}}function x(b){var c=[];h(b,function(b){"CallExpression"===b.type&&"Identifier"===b.callee.type&&c.push(b.callee.name.toLowerCase());return!0});return c}Object.defineProperty(p,"__esModule",{value:!0});p.functionDecls={concatenate:{min:"0",max:"*"},split:{min:"2",max:"4"},guid:{min:"0",max:"1"},today:{min:"0",max:"0"},angle:{min:"2",max:"3"},bearing:{min:"2",max:"3"},urlencode:{min:"1",max:"1"},now:{min:"0",max:"0"},timestamp:{min:"0",
max:"0"},day:{min:"1",max:"1"},month:{min:"1",max:"1"},year:{min:"1",max:"1"},hour:{min:"1",max:"1"},second:{min:"1",max:"1"},millisecond:{min:"1",max:"1"},minute:{min:"1",max:"1"},weekday:{min:"1",max:"1"},toutc:{min:"1",max:"1"},tolocal:{min:"1",max:"1"},date:{min:"0",max:"7"},datediff:{min:"2",max:"3"},dateadd:{min:"2",max:"3"},trim:{min:"1",max:"1"},text:{min:"1",max:"2"},left:{min:"2",max:"2"},right:{min:"2",max:"2"},mid:{min:"2",max:"3"},upper:{min:"1",max:"1"},proper:{min:"1",max:"2"},lower:{min:"1",
max:"1"},find:{min:"2",max:"3"},iif:{min:"3",max:"3"},decode:{min:"2",max:"*"},when:{min:"2",max:"*"},defaultvalue:{min:"2",max:"2"},isempty:{min:"1",max:"1"},domaincode:{min:"2",max:"4"},domainname:{min:"2",max:"4"},polygon:{min:"1",max:"1"},point:{min:"1",max:"1"},polyline:{min:"1",max:"1"},extent:{min:"1",max:"1"},multipoint:{min:"1",max:"1"},ringisclockwise:{min:"1",max:"1"},geometry:{min:"1",max:"1"},count:{min:"0",max:"*"},number:{min:"1",max:"2"},acos:{min:"1",max:"1"},asin:{min:"1",max:"1"},
atan:{min:"1",max:"1"},atan2:{min:"2",max:"2"},ceil:{min:"1",max:"2"},floor:{min:"1",max:"2"},round:{min:"1",max:"2"},cos:{min:"1",max:"1"},exp:{min:"1",max:"1"},log:{min:"1",max:"1"},min:{min:"0",max:"*"},constrain:{min:"3",max:"3"},console:{min:"0",max:"*"},max:{min:"0",max:"*"},pow:{min:"2",max:"2"},random:{min:"0",max:"0"},sqrt:{min:"1",max:"1"},sin:{min:"1",max:"1"},tan:{min:"1",max:"1"},abs:{min:"1",max:"1"},isnan:{min:"1",max:"1"},stdev:{min:"0",max:"*"},average:{min:"0",max:"*"},mean:{min:"0",
max:"*"},sum:{min:"0",max:"*"},variance:{min:"0",max:"*"},distinct:{min:"0",max:"*"},first:{min:"1",max:"1"},top:{min:"2",max:"2"},boolean:{min:"1",max:"1"},dictionary:{min:"0",max:"*"},typeof:{min:"1",max:"1"},reverse:{min:"1",max:"1"},replace:{min:"3",max:"4"},sort:{min:"1",max:"2"},feature:{min:"1",max:"*"},haskey:{min:"2",max:"2"},indexof:{min:"2",max:"2"},disjoint:{min:"2",max:"2"},intersects:{min:"2",max:"2"},touches:{min:"2",max:"2"},crosses:{min:"2",max:"2"},within:{min:"2",max:"2"},contains:{min:"2",
max:"2"},overlaps:{min:"2",max:"2"},equals:{min:"2",max:"2"},relate:{min:"3",max:"3"},intersection:{min:"2",max:"2"},union:{min:"1",max:"2"},difference:{min:"2",max:"2"},symmetricdifference:{min:"2",max:"2"},clip:{min:"2",max:"2"},cut:{min:"2",max:"2"},area:{min:"1",max:"2"},areageodetic:{min:"1",max:"2"},length:{min:"1",max:"2"},lengthgeodetic:{min:"1",max:"2"},distancegeodetic:{min:"2",max:"3"},distance:{min:"2",max:"3"},densify:{min:"2",max:"3"},densifygeodetic:{min:"2",max:"3"},generalize:{min:"2",
max:"4"},buffer:{min:"2",max:"3"},buffergeodetic:{min:"2",max:"3"},offset:{min:"2",max:"6"},rotate:{min:"2",max:"3"},issimple:{min:"1",max:"1"},simplify:{min:"1",max:"1"},centroid:{min:"1",max:"1"},isselfintersecting:{min:"1",max:"1"},multiparttosinglepart:{min:"1",max:"1"},setgeometry:{min:"2",max:"2"},portal:{min:"1",max:"1"},subtypes:{min:"1",max:"1"},subtypecode:{min:"1",max:"1"},subtypename:{min:"1",max:"1"},domain:{min:"2",max:"3"},schema:{min:"1",max:"1"}};for(var w in p.functionDecls)p.functionDecls[w].fmin=
p.functionDecls[w].min,p.functionDecls[w].fmax=p.functionDecls[w].max;var y="featureset featuresetbyid featuresetbyname featuresetbyassociation featuresetbyrelationshipname featuresetbyurl attachments featuresetbyportalitem".split(" "),z="disjoint intersects touches crosses within contains overlaps equals relate intersection union difference symmetricdifference clip cut area areageodetic length lengthgeodetic distance distancegeodetic densify densifygeodetic generalize buffer buffergeodetic offset rotate issimple simplify multiparttosinglepart".split(" ");
p.addFunctionDeclaration=function(b,c){var d=p.functionDecls[b.name.toLowerCase()];void 0===d?"sync"===c?p.functionDecls[b.name.toLowerCase()]={min:b.min,max:b.max}:p.functionDecls[b.name.toLowerCase()]={fmin:b.min,fmax:b.max}:"sync"===c?(d.min=b.min,d.max=b.max):(d.fmin=b.min,d.fmax=b.max)};p.checkFunctionSignature=f;p.findFunction=l;p.walk=h;p.validateLanguageNode=q;p.testValidityOfExpression=g;p.referencesMember=e;p.referencesFunction=function(b,c){var d=!1,e=c.toLowerCase();h(b,function(b){return d?
!1:"CallExpression"===b.type&&"Identifier"===b.callee.type&&b.callee.name&&b.callee.name.toLowerCase()===e?(d=!0,!1):!0});return d};p.findFieldLiterals=function(b){var c=[];h(b,function(b){if("MemberExpression"!==b.type||"Identifier"!==b.object.type)return!0;!1===b.computed&&b.object&&b.object.name&&b.property&&"Identifier"===b.property.type&&b.property.name?c.push(b.object.name.toLowerCase()+"."+b.property.name.toLowerCase()):b.object&&b.object.name&&b.property&&"Literal"===b.property.type&&"string"===
typeof b.property.value&&c.push(b.object.name.toLowerCase()+"."+b.property.value.toString().toLowerCase());return!1});return c};p.extractFunctionDeclaration=c;p.validateFunction=b;p.constructGlobalScope=d;p.validateScript=function(b,c,e,f){void 0===e&&(e="async");void 0===f&&(f=p.functionDecls);c={globalScope:d(c.vars,f,c.customFunctions,e),localScope:null};return g(b.body[0].body,c)};p.validateLanguage=function(b){return"BlockStatement"!==b.body[0].body.type?"Invalid formula content.":q(b.body[0].body)};
p.nodeErrorMessage=r;p.makeError=v;p.extractAllIssuesInFunction=u;p.extractAllIssues=t;p.checkScript=function(b,c,e,g,f){void 0===g&&(g="async");void 0===f&&(f=p.functionDecls);var h=[];if("BlockStatement"!==b.body[0].body.type)return[{line:0,character:0,reason:"Invalid Body"}];if(null===c||void 0===c)c={vars:{},customFunctions:[]};c={globalScope:d(c.vars,f,c.customFunctions,g),localScope:null};try{t(b.body[0].body,c,e,h)}catch(D){}return h};p.findFunctionCalls=x;p.findScriptDependencies=function(b,
c){void 0===c&&(c=[]);var d=null;if(void 0===b.usesFeatureSet){null===d&&(d=x(b));b.usesFeatureSet=!1;for(var g=0;g<d.length;g++)-1<y.indexOf(d[g])&&(b.usesFeatureSet=!0,b.isAsync=!0);if(!1===b.usesFeatureSet&&c&&0<c.length)for(g=0;g<c.length;g++)if(e(b,c[g])){b.usesFeatureSet=!0;b.isAsync=!0;break}}if(void 0===b.usesGeometry)for(b.usesGeometry=!1,null===d&&(d=x(b)),g=0;g<d.length;g++)-1<z.indexOf(d[g])&&(b.usesGeometry=!0)};p.scriptUsesFeatureSet=function(b){b=x(b);for(var c=0;c<b.length;c++)if(-1<
y.indexOf(b[c]))return!0;return!1}})},"esri/arcade/functions/date":function(){define("esri/arcade/functions/date",["require","exports","../languageUtils"],function(m,p,f){function l(f){return null===f?f:isNaN(f.getTime())?null:f}Object.defineProperty(p,"__esModule",{value:!0});p.registerFunctions=function(k,h){k.today=function(k,g){return h(k,g,function(e,c,b){f.pcCheck(b,0,0);e=new Date;e.setHours(0,0,0,0);return e})};k.now=function(k,g){return h(k,g,function(e,c,b){f.pcCheck(b,0,0);return new Date})};
k.timestamp=function(k,g){return h(k,g,function(e,c,b){f.pcCheck(b,0,0);e=new Date;return e=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())})};k.toutc=function(k,g){return h(k,g,function(e,c,b){f.pcCheck(b,1,1);e=f.toDate(b[0]);return null===e?null:new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())})};k.tolocal=function(k,g){return h(k,
g,function(e,c,b){f.pcCheck(b,1,1);e=f.toDate(b[0]);return null===e?null:f.MomentLibrary.Moment.utc([e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()]).toDate()})};k.day=function(k,g){return h(k,g,function(e,c,b){f.pcCheck(b,1,1);e=f.toDate(b[0]);return null===e?NaN:e.getDate()})};k.month=function(k,g){return h(k,g,function(e,c,b){f.pcCheck(b,1,1);e=f.toDate(b[0]);return null===e?NaN:e.getMonth()})};k.year=function(k,g){return h(k,g,function(e,
c,b){f.pcCheck(b,1,1);e=f.toDate(b[0]);return null===e?NaN:e.getFullYear()})};k.hour=function(k,g){return h(k,g,function(e,c,b){f.pcCheck(b,1,1);e=f.toDate(b[0]);return null===e?NaN:e.getHours()})};k.second=function(k,g){return h(k,g,function(e,c,b){f.pcCheck(b,1,1);e=f.toDate(b[0]);return null===e?NaN:e.getSeconds()})};k.millisecond=function(k,g){return h(k,g,function(e,c,b){f.pcCheck(b,1,1);e=f.toDate(b[0]);return null===e?NaN:e.getMilliseconds()})};k.minute=function(k,g){return h(k,g,function(e,
c,b){f.pcCheck(b,1,1);e=f.toDate(b[0]);return null===e?NaN:e.getMinutes()})};k.weekday=function(k,g){return h(k,g,function(e,c,b){f.pcCheck(b,1,1);e=f.toDate(b[0]);return null===e?NaN:e.getDay()})};k.date=function(k,g){return h(k,g,function(e,c,b){f.pcCheck(b,0,7);if(3===b.length)return l(new Date(f.toNumber(b[0]),f.toNumber(b[1]),f.toNumber(b[2]),0,0,0,0));if(4===b.length)return l(new Date(f.toNumber(b[0]),f.toNumber(b[1]),f.toNumber(b[2]),f.toNumber(b[3]),0,0,0));if(5===b.length)return l(new Date(f.toNumber(b[0]),
f.toNumber(b[1]),f.toNumber(b[2]),f.toNumber(b[3]),f.toNumber(b[4]),0,0));if(6===b.length)return l(new Date(f.toNumber(b[0]),f.toNumber(b[1]),f.toNumber(b[2]),f.toNumber(b[3]),f.toNumber(b[4]),f.toNumber(b[5]),0));if(7===b.length)return l(new Date(f.toNumber(b[0]),f.toNumber(b[1]),f.toNumber(b[2]),f.toNumber(b[3]),f.toNumber(b[4]),f.toNumber(b[5]),f.toNumber(b[6])));if(2===b.length){e=f.toString(b[1]);if(""===e)return null;e=f.standardiseDateFormat(e);b=f.MomentLibrary.Moment(f.toString(b[0]),e,!0);
return!0===b.isValid()?b.toDate():null}if(1===b.length){if(f.isString(b[0])&&""===b[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;e=f.toNumber(b[0]);return!1===isNaN(e)?l(new Date(e)):f.toDate(b[0])}if(0===b.length)return new Date})};k.datediff=function(k,g){return h(k,g,function(e,c,b){f.pcCheck(b,2,3);e=f.toDateM(b[0]);c=f.toDateM(b[1]);if(null===e||null===c)return NaN;switch(f.toString(b[2]).toLowerCase()){case "days":case "day":case "d":return e.diff(c,"days",!0);case "months":case "month":return e.diff(c,
"months",!0);case "minutes":case "minute":case "m":return"M"===b[2]?e.diff(c,"months",!0):e.diff(c,"minutes",!0);case "seconds":case "second":case "s":return e.diff(c,"seconds",!0);case "milliseconds":case "millisecond":case "ms":return e.diff(c);case "hours":case "hour":case "h":return e.diff(c,"hours",!0);case "years":case "year":case "y":return e.diff(c,"years",!0);default:return e.diff(c)}})};k.dateadd=function(k,g){return h(k,g,function(e,c,b){f.pcCheck(b,2,3);e=f.toDateM(b[0]);if(null===e)return null;
c="milliseconds";switch(f.toString(b[2]).toLowerCase()){case "days":case "day":case "d":c="days";break;case "months":case "month":c="months";break;case "minutes":case "minute":case "m":c="M"===b[2]?"months":"minutes";break;case "seconds":case "second":case "s":c="seconds";break;case "milliseconds":case "millisecond":case "ms":c="milliseconds";break;case "hours":case "hour":case "h":c="hours";break;case "years":case "year":case "y":c="years"}e.add(f.toNumber(b[1]),c);return e.toDate()})}}})},"esri/arcade/functions/geometry":function(){define("esri/arcade/functions/geometry",
"require exports ../Dictionary ../Feature ../ImmutablePointArray ../languageUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ./centroid ../../geometry/jsonUtils".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d,r,v){Object.defineProperty(p,"__esModule",{value:!0});p.registerFunctions=function(u,t){u.ringisclockwise=function(d,e){return t(d,e,function(d,e,g){h.pcCheck(g,1,1);d=[];if(null===g[0])return!1;if(h.isArray(g[0])){var f=
0;for(g=g[0];f<g.length;f++)if(e=g[f],e instanceof c)d.push([e.x,e.y]);else throw Error("Invalid Argument");}else if(g[0]instanceof k)d=g[0]._elements;else if(h.isImmutableArray(g[0])){for(var f=0,r=g[0].toArray();f<r.length;f++)if(e=r[f],e instanceof c)d.push([e.x,e.y]);else throw Error("Invalid Argument");0<d.length&&(g[0].get(0),g[0].get(0))}else throw Error("Invalid Argument");return 3>d.length?!1:(new b({rings:[],spatialReference:{wkid:4326}})).isClockwise(d)})};u.polygon=function(c,d){return t(c,
d,function(d,e,g){h.pcCheck(g,1,1);d=null;if(g[0]instanceof f){if(d=h.fixSpatialReference(l.parseGeometryFromDictionary(g[0]),c.spatialReference),!1===d instanceof b)throw Error("Illegal Parameter");}else d=g[0]instanceof b?v.fromJson(g[0].toJson()):h.fixSpatialReference(new b(JSON.parse(g[0])),c.spatialReference);if(null!==d&&!1===d.spatialReference.equals(c.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return h.fixNullGeometry(d)})};
u.polyline=function(b,c){return t(b,c,function(c,e,g){h.pcCheck(g,1,1);c=null;if(g[0]instanceof f){if(c=h.fixSpatialReference(l.parseGeometryFromDictionary(g[0]),b.spatialReference),!1===c instanceof d)throw Error("Illegal Parameter");}else c=g[0]instanceof d?v.fromJson(g[0].toJson()):h.fixSpatialReference(new d(JSON.parse(g[0])),b.spatialReference);if(null!==c&&!1===c.spatialReference.equals(b.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return h.fixNullGeometry(c)})};u.point=function(b,d){return t(b,d,function(d,e,g){h.pcCheck(g,1,1);d=null;if(g[0]instanceof f){if(d=h.fixSpatialReference(l.parseGeometryFromDictionary(g[0]),b.spatialReference),!1===d instanceof c)throw Error("Illegal Parameter");}else d=g[0]instanceof c?v.fromJson(g[0].toJson()):h.fixSpatialReference(new c(JSON.parse(g[0])),b.spatialReference);if(null!==d&&!1===d.spatialReference.equals(b.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return h.fixNullGeometry(d)})};u.multipoint=function(b,c){return t(b,c,function(c,d,g){h.pcCheck(g,1,1);c=null;if(g[0]instanceof f){if(c=h.fixSpatialReference(l.parseGeometryFromDictionary(g[0]),b.spatialReference),!1===c instanceof e)throw Error("Illegal Parameter");}else c=g[0]instanceof e?v.fromJson(g[0].toJson()):h.fixSpatialReference(new e(JSON.parse(g[0])),b.spatialReference);if(null!==c&&!1===c.spatialReference.equals(b.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return h.fixNullGeometry(c)})};u.extent=function(g,k){return t(g,k,function(k,r,t){t=h.autoCastFeatureToGeometry(t);h.pcCheck(t,1,1);k=null;t[0]instanceof f?k=h.fixSpatialReference(l.parseGeometryFromDictionary(t[0]),g.spatialReference):t[0]instanceof c?(k={xmin:t[0].x,ymin:t[0].y,xmax:t[0].x,ymax:t[0].y,spatialReference:t[0].spatialReference.toJson()},t[0].hasZ?(k.zmin=t[0].z,k.zmax=t[0].z):t[0].hasM&&(k.mmin=t[0].m,k.mmax=t[0].m),k=v.fromJson(k)):k=t[0]instanceof b?v.fromJson(t[0].getExtent().toJson()):
t[0]instanceof d?v.fromJson(t[0].getExtent().toJson()):t[0]instanceof e?v.fromJson(t[0].getExtent().toJson()):t[0]instanceof q?v.fromJson(t[0].toJson()):h.fixSpatialReference(new q(JSON.parse(t[0])),g.spatialReference);if(null!==k&&!1===k.spatialReference.equals(g.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return h.fixNullGeometry(k)})};u.geometry=function(b,c){return t(b,c,function(c,d,e){h.pcCheck(e,1,1);c=null;
c=e[0]instanceof l?h.fixSpatialReference(e[0].geometry(),b.spatialReference):e[0]instanceof f?h.fixSpatialReference(l.parseGeometryFromDictionary(e[0]),b.spatialReference):h.fixSpatialReference(v.fromJson(JSON.parse(e[0])),b.spatialReference);if(null!==c&&!1===c.spatialReference.equals(b.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return h.fixNullGeometry(c)})};u.setgeometry=function(b,c){return t(b,c,function(b,
c,d){h.pcCheck(d,2,2);if(d[0]instanceof l){if(!0===d[0].immutable)throw Error("Feature is Immutable");if(d[1]instanceof g||null===d[1])d[0]._geometry=d[1];else throw Error("Illegal Argument");}else throw Error("Illegal Argument");return h.voidOperation})};u.feature=function(b,c){return t(b,c,function(c,d,e){if(0===e.length)throw Error("Missing Parameters");c=null;if(1===e.length)if(h.isString(e[0]))c=l.fromJson(JSON.parse(e[0]));else if(e[0]instanceof l)c=l.createFromArcadeFeature(e[0]);else if(e[0]instanceof
g)c=l.createFromGraphicLikeObject(e[0],null,null);else if(e[0]instanceof f)c=e[0].hasField("geometry")?e[0].field("geometry"):null,d=e[0].hasField("attributes")?e[0].field("attributes"):null,null!==c&&c instanceof f&&(c=l.parseGeometryFromDictionary(c)),null!==d&&(d=l.parseAttributesFromDictionary(d)),c=l.createFromGraphicLikeObject(c,d,null);else throw Error("Illegal Argument");else{if(2===e.length){d=c=null;if(null!==e[0])if(e[0]instanceof g)c=e[0];else if(c instanceof f)c=l.parseGeometryFromDictionary(e[0]);
else throw Error("Illegal Argument");if(null!==e[1])if(e[1]instanceof f)d=l.parseAttributesFromDictionary(e[1]);else throw Error("Illegal Argument");}else{c=null;d={};if(null!==e[0])if(e[0]instanceof g)c=e[0];else if(c instanceof f)c=l.parseGeometryFromDictionary(e[0]);else throw Error("Illegal Argument");for(var k=1;k<e.length;k+=2){var r=h.toString(e[k]),q=e[k+1];if(null===q||void 0===q||h.isString(q)||isNaN(q)||h.isDate(q)||h.isNumber(q)||h.isBoolean(q)){if(h.isFunctionParameter(q)||!1===h.isSimpleType(q))throw Error("Illegal Argument");
d[r]=q===h.voidOperation?null:q}else throw Error("Illegal Argument");}}c=l.createFromGraphicLikeObject(c,d,null)}c._geometry=h.fixSpatialReference(c.geometry(),b.spatialReference);c.immutable=!1;return c})};u.dictionary=function(b,c){return t(b,c,function(b,c,d){if(0===d.length)return d=new f,d.immutable=!1,d;if(1===d.length&&h.isString(d[0]))try{var e=JSON.parse(d[0]),g=f.convertObjectToArcadeDictionary(e);g.immutable=!1;return g}catch(F){throw Error("Missing Parameters or Illegal Json");}if(0!==
d.length%2)throw Error("Missing Parameters");b={};for(c=0;c<d.length;c+=2)if(e=h.toString(d[c]),g=d[c+1],null===g||void 0===g||h.isString(g)||isNaN(g)||h.isDate(g)||h.isNumber(g)||h.isBoolean(g)||h.isArray(g)||h.isImmutableArray(g)){if(h.isFunctionParameter(g))throw Error("Illegal Argument");b[e]=g===h.voidOperation?null:g}else throw Error("Illegal Argument");d=new f(b);d.immutable=!1;return d})};u.haskey=function(b,c){return t(b,c,function(b,c,d){h.pcCheck(d,2,2);b=h.toString(d[1]);if(d[0]instanceof
l||d[0]instanceof f)return d[0].hasField(b);throw Error("Illegal Argument");})};u.indexof=function(b,c){return t(b,c,function(b,c,d){h.pcCheck(d,2,2);b=d[1];if(h.isArray(d[0])){for(c=0;c<d[0].length;c++)if(h.equalityTest(b,d[0][c]))return c;return-1}if(h.isImmutableArray(d[0])){var e=d[0].length();for(c=0;c<e;c++)if(h.equalityTest(b,d[0].get(c)))return c;return-1}throw Error("Illegal Argument");})};u.angle=function(b,d){return t(b,d,function(b,d,e){e=h.autoCastFeatureToGeometry(e);h.pcCheck(e,2,3);
if(!(e[0]instanceof c))throw Error("Illegal Argument");if(!(e[1]instanceof c))throw Error("Illegal Argument");if(2<e.length&&!(e[2]instanceof c))throw Error("Illegal Argument");return 2===e.length?r.angle2D(e[0],e[1]):r.angleBetween2D(e[0],e[1],e[2])})};u.bearing=function(b,d){return t(b,d,function(b,d,e){e=h.autoCastFeatureToGeometry(e);h.pcCheck(e,2,3);if(!(e[0]instanceof c))throw Error("Illegal Argument");if(!(e[1]instanceof c))throw Error("Illegal Argument");if(2<e.length&&!(e[2]instanceof c))throw Error("Illegal Argument");
return 2===e.length?r.bearing2D(e[0],e[1]):r.bearingBetween2D(e[0],e[1],e[2])})};u.isselfintersecting=function(c,g){return t(c,g,function(g,f,k){k=h.autoCastFeatureToGeometry(k);h.pcCheck(k,1,1);g=k[0];if(g instanceof b)return g.isSelfIntersecting(g);if(g instanceof d)return g=g.paths,r.pathsSelfIntersecting(g);if(g instanceof e)for(f=g.points,k=0;k<f.length;k++)for(var q=0;q<f.length;q++)if(q!==k){for(var t=!0,l=0;l<f[k].length;l++)if(f[k][l]!==f[q][l]){t=!1;break}if(!0===t)return!0}return h.isArray(g)||
h.isImmutableArray(g)?(g=h.autoCastArrayOfPointsToPolyline(g,c.spatialReference),null!==g&&(g=g.paths),r.pathsSelfIntersecting(g)):!1})}}})},"esri/arcade/functions/centroid":function(){define("esri/arcade/functions/centroid",["require","exports","../../geometry/Point"],function(m,p,f){function l(b,c,e){var d={x:0,y:0};c&&(d.z=0);e&&(d.m=0);for(var g=0,f=b[0],h=0;h<b.length;h++){var r=b[h],q;a:if(r.length!==f.length)q=!1;else{for(q=0;q<r.length;q++)if(r[q]!==f[q]){q=!1;break a}q=!0}if(!1===q){q=k(f,
r,c);var l=r,m=c,p=e,C={x:(f[0]+l[0])/2,y:(f[1]+l[1])/2};m&&(C.z=(f[2]+l[2])/2);m&&p?C.m=(f[3]+l[3])/2:p&&(C.m=(f[2]+l[2])/2);f=C;f.x*=q;f.y*=q;d.x+=f.x;d.y+=f.y;c&&(f.z*=q,d.z+=f.z);e&&(f.m*=q,d.m+=f.m);g+=q;f=r}}0<g?(d.x/=g,d.y/=g,c&&(d.z/=g),e&&(d.m/=g)):(d.x=b[0][0],d.y=b[0][1],c&&(d.z=b[0][2]),e&&c?d.m=b[0][3]:e&&(d.m=b[0][2]));return d}function k(b,c,e){var d=c[0]-b[0];b=c[1]-b[1];return e?(c=c[2]-c[2],Math.sqrt(d*d+b*b+c*c)):Math.sqrt(d*d+b*b)}function h(b,c,e){for(void 0===e&&(e=0);b<e;)b+=
c;for(e+=c;b>=e;)b-=c;return b}function q(b,c){return Math.atan2(c.y-b.y,c.x-b.x)}function g(b,c,e){var d=b.x-c.x;b=b.y-c.y;var g=e.x-c.x;c=e.y-c.y;return Math.atan2(g*b-d*c,g*d+c*b)}function e(b,c,e,g,f){var d=b[0];b=b[1];var h=c[0];c=c[1];var k=e[0],r=e[1];e=g[0]-k;var k=d-k,q=h-d;g=g[1]-r;var r=b-r,l=c-b,u=g*q-e*l;if(0===u)return!1;e=(e*r-g*k)/u;k=(q*r-l*k)/u;return 0<=e&&1>=e&&0<=k&&1>=k?(f&&(f[0]=d+e*(h-d),f[1]=b+e*(c-b)),!0):!1}Object.defineProperty(p,"__esModule",{value:!0});p.centroidPolyline=
function(b){for(var c={x:0,y:0,spatialReference:b.spatialReference.toJson()},e={x:0,y:0,spatialReference:b.spatialReference.toJson()},g=0,h=0,q=0;q<b.paths.length;q++)if(0!==b.paths[q].length){var m;m=b.paths[q];var p=!0===b.hasZ;if(1>=m.length)m=0;else{for(var y=0,z=1;z<m.length;z++)y+=k(m[z-1],m[z],p);m=y}0===m?(p=l(b.paths[q],!0===b.hasZ,!0===b.hasM),c.x+=p.x,c.y+=p.y,!0===b.hasZ&&(c.z+=p.z),!0===b.hasM&&(c.m+=p.m),++g):(p=l(b.paths[q],!0===b.hasZ,!0===b.hasM),e.x+=p.x*m,e.y+=p.y*m,!0===b.hasZ&&
(e.z+=p.z*m),!0===b.hasM&&(e.m+=p.m*m),h+=m)}return 0<h?(e.x/=h,e.y/=h,!0===b.hasZ&&(e.z/=h),!0===b.hasM&&(e.m/=h),new f(e)):0<g?(c.x/=g,c.y/=g,!0===b.hasZ&&(e.z/=g),!0===b.hasM&&(c.m/=g),new f(c)):null};p.centroidMultiPoint=function(b){if(0===b.points.length)return null;for(var c=0,e=0,g=0,h=0,k=0;k<b.points.length;k++){var q=b.getPoint(k);!0===q.hasZ&&(g+=q.z);!0===q.hasM&&(h+=q.m);c+=q.x;e+=q.y;h+=q.m}c={x:c/b.points.length,y:e/b.points.length,spatialReference:null};c.spatialReference=b.spatialReference.toJson();
!0===b.hasZ&&(c.z=g/b.points.length);!0===b.hasM&&(c.m=h/b.points.length);return new f(c)};p.angleRad=q;p.angle2D=function(b,c){return h(q(b,c),2*Math.PI)*(180/Math.PI)};p.bearing2D=function(b,c){return h(Math.PI/2-q(b,c),2*Math.PI)*(180/Math.PI)};p.angleBetweenRad=g;p.angleBetween2D=function(b,c,e){return h(g(b,c,e),2*Math.PI)*(180/Math.PI)};p.bearingBetween2D=function(b,c,e){return h(-1*g(b,c,e),2*Math.PI)*(180/Math.PI)};var c=[0,0];p.pathsSelfIntersecting=function(b){for(var d=0;d<b.length;d++){for(var g=
b[d],f=0;f<g.length-1;f++)for(var h=g[f],k=g[f+1],q=d+1;q<b.length;q++)for(var l=0;l<b[q].length-1;l++){var m=b[q][l],p=b[q][l+1],B=e(h,k,m,p,c);if(B&&!(c[0]===h[0]&&c[1]===h[1]||c[0]===m[0]&&c[1]===m[1]||c[0]===k[0]&&c[1]===k[1]||c[0]===p[0]&&c[1]===p[1]))return!0}l=g.length;if(!(3>l))for(f=0;f<=l-2;f++)for(h=g[f],k=g[f+1],q=f+2;q<=l-2;q++)if(m=g[q],p=g[q+1],(B=e(h,k,m,p,c))&&!(c[0]===h[0]&&c[1]===h[1]||c[0]===m[0]&&c[1]===m[1]||c[0]===k[0]&&c[1]===k[1]||c[0]===p[0]&&c[1]===p[1]))return!0}return!1}})},
"esri/arcade/functions/geomsync":function(){define("esri/arcade/functions/geomsync","require exports ../../kernel ../kernel ../languageUtils ./centroid ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/jsonUtils".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d,r){function v(c){return 0===f.version.indexOf("4.")?b.fromExtent(c):new b({spatialReference:c.spatialReference,rings:[[[c.xmin,c.ymin],[c.xmin,
c.ymax],[c.xmax,c.ymax],[c.xmax,c.ymin],[c.xmin,c.ymin]]]})}Object.defineProperty(p,"__esModule",{value:!0});var u=null;p.setGeometryEngine=function(b){u=b};p.registerFunctions=function(f,m){function t(b){k.pcCheck(b,2,2);if(!(b[0]instanceof g&&b[1]instanceof g||b[0]instanceof g&&null===b[1]||b[1]instanceof g&&null===b[0]||null===b[0]&&null===b[1]))throw Error("Illegal Argument");}f.disjoint=function(b,c){return m(b,c,function(b,c,d){d=k.autoCastFeatureToGeometry(d);t(d);return null===d[0]||null===
d[1]?!0:u.disjoint(d[0],d[1])})};f.intersects=function(b,c){return m(b,c,function(b,c,d){d=k.autoCastFeatureToGeometry(d);t(d);return null===d[0]||null===d[1]?!1:u.intersects(d[0],d[1])})};f.touches=function(b,c){return m(b,c,function(b,c,d){d=k.autoCastFeatureToGeometry(d);t(d);return null===d[0]||null===d[1]?!1:u.touches(d[0],d[1])})};f.crosses=function(b,c){return m(b,c,function(b,c,d){d=k.autoCastFeatureToGeometry(d);t(d);return null===d[0]||null===d[1]?!1:u.crosses(d[0],d[1])})};f.within=function(b,
c){return m(b,c,function(b,c,d){d=k.autoCastFeatureToGeometry(d);t(d);return null===d[0]||null===d[1]?!1:u.within(d[0],d[1])})};f.contains=function(b,c){return m(b,c,function(b,c,d){d=k.autoCastFeatureToGeometry(d);t(d);return null===d[0]||null===d[1]?!1:u.contains(d[0],d[1])})};f.overlaps=function(b,c){return m(b,c,function(b,c,d){d=k.autoCastFeatureToGeometry(d);t(d);return null===d[0]||null===d[1]?!1:u.overlaps(d[0],d[1])})};f.equals=function(b,c){return m(b,c,function(b,c,d){k.pcCheck(d,2,2);
return d[0]===d[1]?!0:d[0]instanceof g&&d[1]instanceof g?u.equals(d[0],d[1]):k.isDate(d[0])&&k.isDate(d[1])?d[0].getTime()===d[1].getTime():!1})};f.relate=function(b,c){return m(b,c,function(b,c,d){d=k.autoCastFeatureToGeometry(d);k.pcCheck(d,3,3);if(d[0]instanceof g&&d[1]instanceof g)return u.relate(d[0],d[1],k.toString(d[2]));if(d[0]instanceof g&&null===d[1]||d[1]instanceof g&&null===d[0]||null===d[0]&&null===d[1])return!1;throw Error("Illegal Argument");})};f.intersection=function(b,c){return m(b,
c,function(b,c,d){d=k.autoCastFeatureToGeometry(d);t(d);return null===d[0]||null===d[1]?null:u.intersect(d[0],d[1])})};f.union=function(b,c){return m(b,c,function(c,d,e){e=k.autoCastFeatureToGeometry(e);c=[];if(0===e.length)throw Error("Function called with wrong number of Parameters");if(1===e.length)if(k.isArray(e[0]))for(e=k.autoCastFeatureToGeometry(e[0]),d=0;d<e.length;d++){if(null!==e[d]){if(!(e[d]instanceof g))throw Error("Illegal Argument");c.push(e[d])}}else if(k.isImmutableArray(e[0]))for(e=
k.autoCastFeatureToGeometry(e[0].toArray()),d=0;d<e.length;d++){if(null!==e[d]){if(!(e[d]instanceof g))throw Error("Illegal Argument");c.push(e[d])}}else{if(e[0]instanceof g)return k.fixSpatialReference(l.cloneGeometry(e[0]),b.spatialReference);if(null===e[0])return null;throw Error("Illegal Argument");}else for(d=0;d<e.length;d++)if(null!==e[d]){if(!(e[d]instanceof g))throw Error("Illegal Argument");c.push(e[d])}return 0===c.length?null:u.union(c)})};f.difference=function(b,c){return m(b,c,function(b,
c,d){d=k.autoCastFeatureToGeometry(d);t(d);return null!==d[0]&&null===d[1]?l.cloneGeometry(d[0]):null===d[0]?null:u.difference(d[0],d[1])})};f.symmetricdifference=function(b,c){return m(b,c,function(b,c,d){d=k.autoCastFeatureToGeometry(d);t(d);return null===d[0]&&null===d[1]?null:null===d[0]?l.cloneGeometry(d[1]):null===d[1]?l.cloneGeometry(d[0]):u.symmetricDifference(d[0],d[1])})};f.clip=function(b,c){return m(b,c,function(b,c,d){d=k.autoCastFeatureToGeometry(d);k.pcCheck(d,2,2);if(!(d[1]instanceof
q)&&null!==d[1])throw Error("Illegal Argument");if(null===d[0])return null;if(!(d[0]instanceof g))throw Error("Illegal Argument");return null===d[1]?null:u.clip(d[0],d[1])})};f.cut=function(b,c){return m(b,c,function(b,c,e){e=k.autoCastFeatureToGeometry(e);k.pcCheck(e,2,2);if(!(e[1]instanceof d)&&null!==e[1])throw Error("Illegal Argument");if(null===e[0])return[];if(!(e[0]instanceof g))throw Error("Illegal Argument");return null===e[1]?[l.cloneGeometry(e[0])]:u.cut(e[0],e[1])})};f.area=function(b,
c){return m(b,c,function(c,d,e){k.pcCheck(e,1,2);e=k.autoCastFeatureToGeometry(e);if(null===e[0])return 0;if(k.isArray(e[0])||k.isImmutableArray(e[0]))return c=k.autoCastArrayOfPointsToPolygon(e[0],b.spatialReference),null===c?0:u.planarArea(c,l.convertSquareUnitsToCode(k.defaultUndefined(e[1],-1)));if(!(e[0]instanceof g))throw Error("Illegal Argument");return u.planarArea(e[0],l.convertSquareUnitsToCode(k.defaultUndefined(e[1],-1)))})};f.areageodetic=function(b,c){return m(b,c,function(c,d,e){k.pcCheck(e,
1,2);e=k.autoCastFeatureToGeometry(e);if(null===e[0])return 0;if(k.isArray(e[0])||k.isImmutableArray(e[0]))return c=k.autoCastArrayOfPointsToPolygon(e[0],b.spatialReference),null===c?0:u.geodesicArea(c,l.convertSquareUnitsToCode(k.defaultUndefined(e[1],-1)));if(!(e[0]instanceof g))throw Error("Illegal Argument");return u.geodesicArea(e[0],l.convertSquareUnitsToCode(k.defaultUndefined(e[1],-1)))})};f.length=function(b,c){return m(b,c,function(c,d,e){k.pcCheck(e,1,2);e=k.autoCastFeatureToGeometry(e);
if(null===e[0])return 0;if(k.isArray(e[0])||k.isImmutableArray(e[0]))return c=k.autoCastArrayOfPointsToPolyline(e[0],b.spatialReference),null===c?0:u.planarLength(c,l.convertLinearUnitsToCode(k.defaultUndefined(e[1],-1)));if(!(e[0]instanceof g))throw Error("Illegal Argument");return u.planarLength(e[0],l.convertLinearUnitsToCode(k.defaultUndefined(e[1],-1)))})};f.lengthgeodetic=function(b,c){return m(b,c,function(c,d,e){k.pcCheck(e,1,2);e=k.autoCastFeatureToGeometry(e);if(null===e[0])return 0;if(k.isArray(e[0])||
k.isImmutableArray(e[0]))return c=k.autoCastArrayOfPointsToPolyline(e[0],b.spatialReference),null===c?0:u.geodesicLength(c,l.convertLinearUnitsToCode(k.defaultUndefined(e[1],-1)));if(!(e[0]instanceof g))throw Error("Illegal Argument");return u.geodesicLength(e[0],l.convertLinearUnitsToCode(k.defaultUndefined(e[1],-1)))})};f.distance=function(b,c){return m(b,c,function(c,d,e){e=k.autoCastFeatureToGeometry(e);k.pcCheck(e,2,3);c=e[0];if(k.isArray(e[0])||k.isImmutableArray(e[0]))c=k.autoCastArrayOfPointsToMultiPoint(e[0],
b.spatialReference);d=e[1];if(k.isArray(e[1])||k.isImmutableArray(e[1]))d=k.autoCastArrayOfPointsToMultiPoint(e[1],b.spatialReference);if(!(c instanceof g))throw Error("Illegal Argument");if(!(d instanceof g))throw Error("Illegal Argument");return u.distance(c,d,l.convertLinearUnitsToCode(k.defaultUndefined(e[2],-1)))})};f.distancegeodetic=function(b,e){return m(b,e,function(b,e,g){g=k.autoCastFeatureToGeometry(g);k.pcCheck(g,2,3);b=g[0];e=g[1];if(!(b instanceof c))throw Error("Illegal Argument");
if(!(e instanceof c))throw Error("Illegal Argument");var f=new d({paths:[],spatialReference:b.spatialReference});f.addPath([b,e]);return u.geodesicLength(f,l.convertLinearUnitsToCode(k.defaultUndefined(g[2],-1)))})};f.densify=function(c,e){return m(c,e,function(c,e,f){f=k.autoCastFeatureToGeometry(f);k.pcCheck(f,2,3);if(null===f[0])return null;if(!(f[0]instanceof g))throw Error("Illegal Argument");c=k.toNumber(f[1]);if(isNaN(c))throw Error("Illegal Argument");if(0>=c)throw Error("Illegal Argument");
return f[0]instanceof b||f[0]instanceof d?u.densify(f[0],c,l.convertLinearUnitsToCode(k.defaultUndefined(f[2],-1))):f[0]instanceof q?u.densify(v(f[0]),c,l.convertLinearUnitsToCode(k.defaultUndefined(f[2],-1))):f[0]})};f.densifygeodetic=function(c,e){return m(c,e,function(c,e,f){f=k.autoCastFeatureToGeometry(f);k.pcCheck(f,2,3);if(null===f[0])return null;if(!(f[0]instanceof g))throw Error("Illegal Argument");c=k.toNumber(f[1]);if(isNaN(c))throw Error("Illegal Argument");if(0>=c)throw Error("Illegal Argument");
return f[0]instanceof b||f[0]instanceof d?u.geodesicDensify(f[0],c,l.convertLinearUnitsToCode(k.defaultUndefined(f[2],-1))):f[0]instanceof q?u.geodesicDensify(v(f[0]),c,l.convertLinearUnitsToCode(k.defaultUndefined(f[2],-1))):f[0]})};f.generalize=function(b,c){return m(b,c,function(b,c,d){d=k.autoCastFeatureToGeometry(d);k.pcCheck(d,2,4);if(null===d[0])return null;if(!(d[0]instanceof g))throw Error("Illegal Argument");b=k.toNumber(d[1]);if(isNaN(b))throw Error("Illegal Argument");return u.generalize(d[0],
b,k.toBoolean(k.defaultUndefined(d[2],!0)),l.convertLinearUnitsToCode(k.defaultUndefined(d[3],-1)))})};f.buffer=function(b,c){return m(b,c,function(b,c,d){d=k.autoCastFeatureToGeometry(d);k.pcCheck(d,2,3);if(null===d[0])return null;if(!(d[0]instanceof g))throw Error("Illegal Argument");b=k.toNumber(d[1]);if(isNaN(b))throw Error("Illegal Argument");return 0===b?l.cloneGeometry(d[0]):u.buffer(d[0],b,l.convertLinearUnitsToCode(k.defaultUndefined(d[2],-1)))})};f.buffergeodetic=function(b,c){return m(b,
c,function(b,c,d){d=k.autoCastFeatureToGeometry(d);k.pcCheck(d,2,3);if(null===d[0])return null;if(!(d[0]instanceof g))throw Error("Illegal Argument");b=k.toNumber(d[1]);if(isNaN(b))throw Error("Illegal Argument");return 0===b?l.cloneGeometry(d[0]):u.geodesicBuffer(d[0],b,l.convertLinearUnitsToCode(k.defaultUndefined(d[2],-1)))})};f.offset=function(c,e){return m(c,e,function(c,e,g){g=k.autoCastFeatureToGeometry(g);k.pcCheck(g,2,6);if(null===g[0])return null;if(!(g[0]instanceof b||g[0]instanceof d))throw Error("Illegal Argument");
c=k.toNumber(g[1]);if(isNaN(c))throw Error("Illegal Argument");e=k.toNumber(k.defaultUndefined(g[4],10));if(isNaN(e))throw Error("Illegal Argument");var f=k.toNumber(k.defaultUndefined(g[5],0));if(isNaN(f))throw Error("Illegal Argument");return u.offset(g[0],c,l.convertLinearUnitsToCode(k.defaultUndefined(g[2],-1)),k.toString(k.defaultUndefined(g[3],"round")).toLowerCase(),e,f)})};f.rotate=function(d,e){return m(d,e,function(d,e,f){f=k.autoCastFeatureToGeometry(f);k.pcCheck(f,2,3);d=f[0];if(null===
d)return null;if(!(d instanceof g))throw Error("Illegal Argument");d instanceof q&&(d=b.fromExtent(d));e=k.toNumber(f[1]);if(isNaN(e))throw Error("Illegal Argument");f=k.defaultUndefined(f[2],null);if(null===f)return u.rotate(d,e);if(f instanceof c)return u.rotate(d,e,f);throw Error("Illegal Argument");})};f.centroid=function(f,r){return m(f,r,function(r,t,u){u=k.autoCastFeatureToGeometry(u);k.pcCheck(u,1,1);if(null===u[0])return null;r=u[0];if(k.isArray(u[0])||k.isImmutableArray(u[0]))r=k.autoCastArrayOfPointsToMultiPoint(u[0],
f.spatialReference);if(null===r)return null;if(!(r instanceof g))throw Error("Illegal Argument");return r instanceof c?k.fixSpatialReference(l.cloneGeometry(u[0]),f.spatialReference):r instanceof b?r.getCentroid():r instanceof d?h.centroidPolyline(r):r instanceof e?h.centroidMultiPoint(r):r instanceof q?r.getCenter():null})};f.multiparttosinglepart=function(f,h){return m(f,h,function(h,t,m){m=k.autoCastFeatureToGeometry(m);k.pcCheck(m,1,1);t=[];if(null===m[0])return null;if(!(m[0]instanceof g))throw Error("Illegal Argument");
if(m[0]instanceof c||m[0]instanceof q)return[k.fixSpatialReference(l.cloneGeometry(m[0]),f.spatialReference)];h=u.simplify(m[0]);if(h instanceof b){t=[];var p=[];for(m=0;m<h.rings.length;m++)if(h.isClockwise(h.rings[m])){var v=r.fromJson({rings:[h.rings[m]],hasZ:!0===h.hasZ,hasM:!0===h.hasM,spatialReference:h.spatialReference.toJson()});t.push(v)}else p.push({ring:h.rings[m],pt:h.getPoint(m,0)});for(h=0;h<p.length;h++)for(m=0;m<t.length;m++)if(t[m].contains(p[h].pt)){t[m].addRing(p[h].ring);break}return t}if(h instanceof
d){t=[];for(m=0;m<h.paths.length;m++)p=r.fromJson({paths:[h.paths[m]],hasZ:!0===h.hasZ,hasM:!0===h.hasM,spatialReference:h.spatialReference.toJson()}),t.push(p);return t}if(m[0]instanceof e){h=k.fixSpatialReference(l.cloneGeometry(m[0]),f.spatialReference);for(m=0;m<h.points.length;m++)t.push(h.getPoint(m));return t}return null})};f.issimple=function(b,c){return m(b,c,function(b,c,d){d=k.autoCastFeatureToGeometry(d);k.pcCheck(d,1,1);if(null===d[0])return!0;if(!(d[0]instanceof g))throw Error("Illegal Argument");
return u.isSimple(d[0])})};f.simplify=function(b,c){return m(b,c,function(b,c,d){d=k.autoCastFeatureToGeometry(d);k.pcCheck(d,1,1);if(null===d[0])return null;if(!(d[0]instanceof g))throw Error("Illegal Argument");return u.simplify(d[0])})}}})},"esri/arcade/kernel":function(){define("esri/arcade/kernel",["require","exports","../geometry/Extent","../geometry/jsonUtils"],function(m,p,f,l){Object.defineProperty(p,"__esModule",{value:!0});p.convertSquareUnitsToCode=function(f){if(void 0===f)return null;
if("number"===typeof f)return f;switch(f.toLowerCase()){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":case "square-meter":case "square-meters":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":case "square-miles":case "square-mile":return 109413;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "square-kilometers":case "square-kilometer":case "km":return 109414;case "acres":case "acre":case "ac":return 109402;
case "hectares":case "hectare":case "ha":return 109401;case "yard":case "yd":case "yards":case "square-yards":case "square-yard":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "square-feet":case "square-foot":case "squarefeet":case "squarefoot":return 109405}return null};p.shapeExtent=function(k){if(null===k)return null;switch(k.type){case "polygon":case "multipoint":case "polyline":return k.extent;case "point":return new f({xmin:k.x,ymin:k.y,xmax:k.x,ymax:k.y,
spatialReference:k.spatialReference});case "extent":return k}return null};p.convertLinearUnitsToCode=function(f){if(void 0===f)return null;if("number"===typeof f||"number"===typeof f)return f;switch(f.toLowerCase()){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":case "square-meter":case "square-meters":return 9001;case "miles":case "mile":case "squaremile":case "squaremiles":case "square-miles":case "square-mile":return 9035;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "square-kilometers":case "square-kilometer":case "km":return 9036;
case "yard":case "yd":case "yards":case "square-yards":case "square-yard":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "square-feet":case "square-foot":case "squarefeet":case "squarefoot":return 9002}return null};p.sameGeomType=function(f,h){return f===h||"point"===f&&"esriGeometryPoint"===h||"polyline"===f&&"esriGeometryPolyline"===h||"polygon"===f&&"esriGeometryPolygon"===h||"extent"===f&&"esriGeometryEnvelope"===h||"multipoint"===f&&"esriGeometryMultipoint"===
h||"point"===h&&"esriGeometryPoint"===f||"polyline"===h&&"esriGeometryPolyline"===f||"polygon"===h&&"esriGeometryPolygon"===f||"extent"===h&&"esriGeometryEnvelope"===f||"multipoint"===h&&"esriGeometryMultipoint"===f?!0:!1};p.cloneGeometry=function(f){if(null===f)return null;var h=l.fromJson(f.toJson());f.getCacheValue("_geVersion")&&h.setCacheValue("_geVersion",f.getCacheValue("_geVersion"));return h}})},"esri/arcade/functions/maths":function(){define("esri/arcade/functions/maths",["require","exports",
"../languageUtils","dojo/number"],function(m,p,f,l){function k(f,k,g){if("undefined"===typeof g||0===+g)return Math[f](k);k=+k;g=+g;if(isNaN(k)||"number"!==typeof g||0!==g%1)return NaN;k=k.toString().split("e");k=Math[f](+(k[0]+"e"+(k[1]?+k[1]-g:-g)));k=k.toString().split("e");return+(k[0]+"e"+(k[1]?+k[1]+g:g))}Object.defineProperty(p,"__esModule",{value:!0});p.registerFunctions=function(h,q){function g(e,c,b){e=f.toNumber(e);return isNaN(e)?e:isNaN(c)||isNaN(b)||c>b?NaN:e<c?c:e>b?b:e}h.number=function(e,
c){return q(e,c,function(b,c,e){f.pcCheck(e,1,2);b=e[0];return f.isNumber(b)?b:null===b?0:f.isDate(b)||f.isBoolean(b)?Number(b):f.isArray(b)?NaN:""===b||void 0===b?Number(b):f.isString(b)?void 0!==e[1]?(e=f.multiReplace(e[1],"\u2030",""),e=f.multiReplace(e,"\u00a4",""),l.parse(b,{pattern:e})):Number(b.trim()):Number(b)})};h.abs=function(e,c){return q(e,c,function(b,c,e){f.pcCheck(e,1,1);return Math.abs(f.toNumber(e[0]))})};h.acos=function(e,c){return q(e,c,function(b,c,e){f.pcCheck(e,1,1);return Math.acos(f.toNumber(e[0]))})};
h.asin=function(e,c){return q(e,c,function(b,c,e){f.pcCheck(e,1,1);return Math.asin(f.toNumber(e[0]))})};h.atan=function(e,c){return q(e,c,function(b,c,e){f.pcCheck(e,1,1);return Math.atan(f.toNumber(e[0]))})};h.atan2=function(e,c){return q(e,c,function(b,c,e){f.pcCheck(e,2,2);return Math.atan2(f.toNumber(e[0]),f.toNumber(e[1]))})};h.ceil=function(e,c){return q(e,c,function(b,c,e){f.pcCheck(e,1,2);return 2===e.length?(b=f.toNumber(e[1]),isNaN(b)&&(b=0),k("ceil",f.toNumber(e[0]),-1*b)):Math.ceil(f.toNumber(e[0]))})};
h.round=function(e,c){return q(e,c,function(b,c,e){f.pcCheck(e,1,2);return 2===e.length?(b=f.toNumber(e[1]),isNaN(b)&&(b=0),k("round",f.toNumber(e[0]),-1*b)):Math.round(f.toNumber(e[0]))})};h.floor=function(e,c){return q(e,c,function(b,c,e){f.pcCheck(e,1,2);return 2===e.length?(b=f.toNumber(e[1]),isNaN(b)&&(b=0),k("floor",f.toNumber(e[0]),-1*b)):Math.floor(f.toNumber(e[0]))})};h.cos=function(e,c){return q(e,c,function(b,c,e){f.pcCheck(e,1,1);return Math.cos(f.toNumber(e[0]))})};h.isnan=function(e,
c){return q(e,c,function(b,c,e){f.pcCheck(e,1,1);return"number"===typeof e[0]&&isNaN(e[0])})};h.exp=function(e,c){return q(e,c,function(b,c,e){f.pcCheck(e,1,1);return Math.exp(f.toNumber(e[0]))})};h.log=function(e,c){return q(e,c,function(b,c,e){f.pcCheck(e,1,1);return Math.log(f.toNumber(e[0]))})};h.pow=function(e,c){return q(e,c,function(b,c,e){f.pcCheck(e,2,2);return Math.pow(f.toNumber(e[0]),f.toNumber(e[1]))})};h.random=function(e,c){return q(e,c,function(b,c,e){f.pcCheck(e,0,0);return Math.random()})};
h.sin=function(e,c){return q(e,c,function(b,c,e){f.pcCheck(e,1,1);return Math.sin(f.toNumber(e[0]))})};h.sqrt=function(e,c){return q(e,c,function(b,c,e){f.pcCheck(e,1,1);return Math.sqrt(f.toNumber(e[0]))})};h.tan=function(e,c){return q(e,c,function(b,c,e){f.pcCheck(e,1,1);return Math.tan(f.toNumber(e[0]))})};h.defaultvalue=function(e,c){return q(e,c,function(b,c,e){f.pcCheck(e,2,2);return null===e[0]||""===e[0]||void 0===e[0]?e[1]:e[0]})};h.isempty=function(e,c){return q(e,c,function(b,c,e){f.pcCheck(e,
1,1);return null===e[0]||""===e[0]||void 0===e[0]?!0:!1})};h["boolean"]=function(e,c){return q(e,c,function(b,c,e){f.pcCheck(e,1,1);return f.toBoolean(e[0])})};h.constrain=function(e,c){return q(e,c,function(b,c,e){f.pcCheck(e,3,3);b=f.toNumber(e[1]);c=f.toNumber(e[2]);if(f.isArray(e[0])){var d=[],h=0;for(e=e[0];h<e.length;h++)d.push(g(e[h],b,c));return d}if(f.isImmutableArray(e[0])){d=[];for(h=0;h<e[0].length();h++)d.push(g(e[0].get(h),b,c));return d}return g(e[0],b,c)})}}})},"esri/arcade/functions/stats":function(){define("esri/arcade/functions/stats",
["require","exports","../languageUtils","./fieldStats"],function(m,p,f,l){function k(h,k,g,e){if(1===e.length){if(f.isArray(e[0]))return l.calculateStat(h,e[0],-1);if(f.isImmutableArray(e[0]))return l.calculateStat(h,e[0].toArray(),-1)}return l.calculateStat(h,e,-1)}Object.defineProperty(p,"__esModule",{value:!0});p.registerFunctions=function(h,q){h.stdev=function(g,e){return q(g,e,function(c,b,d){return k("stdev",c,b,d)})};h.variance=function(g,e){return q(g,e,function(c,b,d){return k("variance",
c,b,d)})};h.average=function(g,e){return q(g,e,function(c,b,d){return k("mean",c,b,d)})};h.mean=function(g,e){return q(g,e,function(c,b,d){return k("mean",c,b,d)})};h.sum=function(g,e){return q(g,e,function(c,b,d){return k("sum",c,b,d)})};h.min=function(g,e){return q(g,e,function(c,b,d){return k("min",c,b,d)})};h.max=function(g,e){return q(g,e,function(c,b,d){return k("max",c,b,d)})};h.distinct=function(g,e){return q(g,e,function(c,b,d){return k("distinct",c,b,d)})};h.count=function(g,e){return q(g,
e,function(c,b,d){f.pcCheck(d,1,1);if(f.isArray(d[0])||f.isString(d[0]))return d[0].length;if(f.isImmutableArray(d[0]))return d[0].length();throw Error("Invalid Parameters for Count");})}}})},"esri/arcade/functions/fieldStats":function(){define("esri/arcade/functions/fieldStats",["require","exports","../languageUtils"],function(m,p,f){function l(f){for(var h=0,g=0;g<f.length;g++)h+=f[g];return h/f.length}function k(f){for(var h=l(f),g=0,e=0;e<f.length;e++)g+=Math.pow(h-f[e],2);return g/f.length}Object.defineProperty(p,
"__esModule",{value:!0});p.decodeStatType=function(f){switch(f.toLowerCase()){case "distinct":return"distinct";case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";case "count":return"count"}return""};p.calculateStat=function(h,q,g){void 0===g&&(g=1E3);switch(h.toLowerCase()){case "distinct":a:{h=g;g=[];for(var e={},c=[],b=0;b<q.length;b++){if(void 0!==q[b]&&null!==q[b]&&
q[b]!==f.voidOperation){var d=q[b];if(f.isNumber(d)||f.isString(d))void 0===e[d]&&(g.push(d),e[d]=1);else{for(var r=!1,m=0;m<c.length;m++)!0===f.equalityTest(c[m],d)&&(r=!0);!1===r&&(c.push(d),g.push(d))}}if(g.length>=h&&-1!==h){q=g;break a}}q=g}return q;case "avg":case "mean":return l(f.toNumberArray(q));case "min":return Math.min.apply(Math,f.toNumberArray(q));case "sum":q=f.toNumberArray(q);for(g=h=0;g<q.length;g++)h+=q[g];return h;case "max":return Math.max.apply(Math,f.toNumberArray(q));case "stdev":case "stddev":return Math.sqrt(k(f.toNumberArray(q)));
case "var":case "variance":return k(f.toNumberArray(q));case "count":return q.length}return 0}})},"esri/arcade/functions/string":function(){define("esri/arcade/functions/string","require exports ../ArcadePortal ../Dictionary ../Feature ../languageUtils ../featureset/support/shared".split(" "),function(m,p,f,l,k,h,q){Object.defineProperty(p,"__esModule",{value:!0});p.registerFunctions=function(g,e){g.portal=function(c,b){return e(c,b,function(b,c,e){h.pcCheck(e,1,1);return new f(h.toString(e[0]))})};
g.trim=function(c,b){return e(c,b,function(b,c,e){h.pcCheck(e,1,1);return h.toString(e[0]).trim()})};g.upper=function(c,b){return e(c,b,function(b,c,e){h.pcCheck(e,1,1);return h.toString(e[0]).toUpperCase()})};g.proper=function(c,b){return e(c,b,function(b,c,e){h.pcCheck(e,1,2);b=1;2===e.length&&"firstword"===h.toString(e[1]).toLowerCase()&&(b=2);c=/\s/;e=h.toString(e[0]);for(var d="",g=!0,f=0;f<e.length;f++){var k=e[f];c.test(k)?1===b&&(g=!0):k.toUpperCase()!==k.toLowerCase()&&(g?(k=k.toUpperCase(),
g=!1):k=k.toLowerCase());d+=k}return d})};g.lower=function(c,b){return e(c,b,function(b,c,e){h.pcCheck(e,1,1);return h.toString(e[0]).toLowerCase()})};g.guid=function(c,b){return e(c,b,function(b,c,e){h.pcCheck(e,0,1);if(0<e.length)switch(h.toString(e[0]).toLowerCase()){case "digits":return h.generateUUID().replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return h.generateUUID();case "digits-hyphen-parentheses":return"("+h.generateUUID()+")"}return"{"+h.generateUUID()+
"}"})};g.console=function(c,b){return e(c,b,function(b,e,g){0!==g.length&&(1===g.length?c.console(h.toString(g[0])):c.console(h.toString(g)));return h.voidOperation})};g.mid=function(c,b){return e(c,b,function(b,c,e){h.pcCheck(e,2,3);b=h.toNumber(e[1]);if(isNaN(b))return"";0>b&&(b=0);if(2===e.length)return h.toString(e[0]).substr(b);c=h.toNumber(e[2]);if(isNaN(c))return"";0>c&&(c=0);return h.toString(e[0]).substr(b,c)})};g.find=function(c,b){return e(c,b,function(b,c,e){h.pcCheck(e,2,3);b=0;if(2<
e.length){b=h.toNumber(h.defaultUndefined(e[2],0));if(isNaN(b))return-1;0>b&&(b=0)}return h.toString(e[1]).indexOf(h.toString(e[0]),b)})};g.left=function(c,b){return e(c,b,function(b,c,e){h.pcCheck(e,2,2);b=h.toNumber(e[1]);if(isNaN(b))return"";0>b&&(b=0);return h.toString(e[0]).substr(0,b)})};g.right=function(c,b){return e(c,b,function(b,c,e){h.pcCheck(e,2,2);b=h.toNumber(e[1]);if(isNaN(b))return"";0>b&&(b=0);return h.toString(e[0]).substr(-1*b,b)})};g.split=function(c,b){return e(c,b,function(b,
c,e){h.pcCheck(e,2,4);b=h.toNumber(h.defaultUndefined(e[2],-1));c=h.toBoolean(h.defaultUndefined(e[3],!1));-1===b||null===b||!0===c?e=h.toString(e[0]).split(h.toString(e[1])):(isNaN(b)&&(b=-1),-1>b&&(b=-1),e=h.toString(e[0]).split(h.toString(e[1]),b));if(!1===c)return e;c=[];for(var d=0;d<e.length&&!(-1!==b&&c.length>=b);d++)""!==e[d]&&void 0!==e[d]&&c.push(e[d]);return c})};g.text=function(c,b){return e(c,b,function(b,c,e){h.pcCheck(e,1,2);return h.toStringExplicit(e[0],e[1])})};g.concatenate=function(c,
b){return e(c,b,function(b,c,e){b=[];if(1>e.length)return"";if(h.isArray(e[0])){c=h.defaultUndefined(e[2],"");for(var d=0;d<e[0].length;d++)b[d]=h.toStringExplicit(e[0][d],c);return 1<e.length?b.join(e[1]):b.join("")}if(h.isImmutableArray(e[0])){c=h.defaultUndefined(e[2],"");for(d=0;d<e[0].length();d++)b[d]=h.toStringExplicit(e[0].get(d),c);return 1<e.length?b.join(e[1]):b.join("")}for(d=0;d<e.length;d++)b[d]=h.toStringExplicit(e[d]);return b.join("")})};g.reverse=function(c,b){return e(c,b,function(b,
c,e){h.pcCheck(e,1,1);if(h.isArray(e[0]))return b=e[0].slice(0),b.reverse(),b;if(h.isImmutableArray(e[0]))return b=e[0].toArray().slice(0),b.reverse(),b;throw Error("Invalid Parameter");})};g.replace=function(c,b){return e(c,b,function(b,c,e){h.pcCheck(e,3,4);b=h.toString(e[0]);c=h.toString(e[1]);var d=h.toString(e[2]);return(4===e.length?h.toBoolean(e[3]):1)?h.multiReplace(b,c,d):b.replace(c,d)})};g.schema=function(c,b){return e(c,b,function(b,c,e){if(e[0]instanceof k)return(b=e[0].schema())?l.convertObjectToArcadeDictionary(b):
null;throw Error("Invalid Parameter");})};g.subtypes=function(c,b){return e(c,b,function(b,c,e){h.pcCheck(e,1,1);if(e[0]instanceof k)return(b=e[0].subtypes())?l.convertObjectToArcadeDictionary(b):null;throw Error("Invalid Parameter");})};g.subtypecode=function(c,b){return e(c,b,function(b,c,e){h.pcCheck(e,1,1);if(e[0]instanceof k){c=e[0].subtypes();if(!c)return null;if(c.subtypeField&&e[0].hasField(c.subtypeField))for(e=e[0].field(c.subtypeField),b=0,c=c.subtypes;b<c.length;b++){var d=c[b];if(d.code===
e)return d.code}return null}throw Error("Invalid Parameter");})};g.subtypename=function(c,b){return e(c,b,function(b,c,e){h.pcCheck(e,1,1);if(e[0]instanceof k){c=e[0].subtypes();if(!c)return"";if(c.subtypeField&&e[0].hasField(c.subtypeField))for(e=e[0].field(c.subtypeField),b=0,c=c.subtypes;b<c.length;b++){var d=c[b];if(d.code===e)return d.name}return""}throw Error("Invalid Parameter");})};g.domain=function(c,b){return e(c,b,function(b,c,e){h.pcCheck(e,2,3);if(e[0]instanceof k)return(b=e[0].fullDomain(h.toString(e[1]),
void 0===e[2]?void 0:h.toNumber(e[2])))&&b.domain?"coded-value"===b.domain.type||"codedValue"===b.domain.type?l.convertObjectToArcadeDictionary({type:"codedValue",name:b.domain.name,dataType:q.layerFieldEsriConstants[b.field.type],codedValues:b.domain.codedValues.map(function(b){return{name:b.name,code:b.code}})}):l.convertObjectToArcadeDictionary({type:"range",name:b.domain.name,dataType:q.layerFieldEsriConstants[b.field.type],min:b.domain.min,max:b.domain.max}):null;throw Error("Invalid Parameter");
})};g.domainname=function(c,b){return e(c,b,function(b,c,e){h.pcCheck(e,2,4);if(e[0]instanceof k)return e[0].domainValueLookup(h.toString(e[1]),e[2],void 0===e[3]?void 0:h.toNumber(e[3]));throw Error("Invalid Parameter");})};g.domaincode=function(c,b){return e(c,b,function(b,c,e){h.pcCheck(e,2,4);if(e[0]instanceof k)return e[0].domainCodeLookup(h.toString(e[1]),e[2],void 0===e[3]?void 0:h.toNumber(e[3]));throw Error("Invalid Parameter");})};g.urlencode=function(c,b){return e(c,b,function(b,c,e){h.pcCheck(e,
1,1);if(null===e[0])return"";if(e[0]instanceof l){b="";c=0;for(var d=e[0].keys();c<d.length;c++){var g=d[c],f=e[0].field(g);""!==b&&(b+="\x26");b=null===f?b+(encodeURIComponent(g)+"\x3d"):b+(encodeURIComponent(g)+"\x3d"+encodeURIComponent(f))}return b}return encodeURIComponent(h.toString(e[0]))})}}})},"esri/arcade/arcadeRuntime":function(){define("esri/arcade/arcadeRuntime","require exports ./ArcadePortal ./Attachment ./Dictionary ./Feature ./FunctionWrapper ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../SpatialReference".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x,w,y,z,B,A,C,F){function E(b,c){for(var d=[],e=0;e<c.arguments.length;e++)d.push(D(b,c.arguments[e]));return d}function H(b,c,d){try{return d(b,c,E(b,c))}catch(ja){throw ja;}}function D(d,e){try{switch(e.type){case "EmptyStatement":return c.voidOperation;case "VariableDeclarator":var g=null===e.init?null:D(d,e.init);g===c.voidOperation&&(g=null);if("Identifier"!==e.id.type)throw Error("Can only assign a regular variable");var f=e.id.name.toLowerCase();null!==
d.localScope?d.localScope[f]={value:g,valueset:!0,node:e.init}:d.globalScope[f]={value:g,valueset:!0,node:e.init};return c.voidOperation;case "VariableDeclaration":for(var r=0;r<e.declarations.length;r++)D(d,e.declarations[r]);return c.voidOperation;case "BlockStatement":var l;a:{for(var t=c.voidOperation,r=0;r<e.body.length;r++)if(t=D(d,e.body[r]),t instanceof c.ReturnResult||t===c.breakResult||t===c.continueResult){l=t;break a}l=t}return l;case "FunctionDeclaration":var u=e.id.name.toLowerCase();
d.globalScope[u]={valueset:!0,node:null,value:new q(e,d)};return c.voidOperation;case "ReturnStatement":var m;if(null===e.argument)m=new c.ReturnResult(c.voidOperation);else{var p=D(d,e.argument);m=new c.ReturnResult(p)}return m;case "IfStatement":var v;if("AssignmentExpression"===e.test.type||"UpdateExpression"===e.test.type)throw Error(b.nodeErrorMessage(e.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var x=D(d,e.test);if(!0===x)v=D(d,e.consequent);else if(!1===x)v=null!==e.alternate?D(d,
e.alternate):c.voidOperation;else throw Error(b.nodeErrorMessage(e,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));return v;case "ExpressionStatement":var w;if("AssignmentExpression"===e.expression.type||"UpdateExpression"===e.expression.type)w=D(d,e.expression);else{var y=D(d,e.expression);w=y===c.voidOperation?c.voidOperation:new c.ImplicitResult(y)}return w;case "AssignmentExpression":var C,E=D(d,e.right),r=null,A="";if("MemberExpression"===e.left.type){r=D(d,e.left.object);!0===e.left.computed?
A=D(d,e.left.property):"Identifier"===e.left.property.type&&(A=e.left.property.name);if(c.isArray(r))if(c.isNumber(A)){0>A&&(A=r.length+A);if(0>A||A>r.length)throw Error("Assignment outside of array bounds");if(A===r.length&&"\x3d"!==e.operator)throw Error("Invalid Parameter");r[A]=I(E,e.operator,r[A],e)}else throw Error("Invalid Parameter");else if(r instanceof k){if(!1===c.isString(A))throw Error("Dictionary accessor must be a string");if(!0===r.hasField(A))r.setField(A,I(E,e.operator,r.field(A),
e));else{if("\x3d"!==e.operator)throw Error("Invalid Parameter");r.setField(A,I(E,e.operator,null,e))}}else if(r instanceof h){if(!1===c.isString(A))throw Error("Feature accessor must be a string");if(!0===r.hasField(A))r.setField(A,I(E,e.operator,r.field(A),e));else{if("\x3d"!==e.operator)throw Error("Invalid Parameter");r.setField(A,I(E,e.operator,null,e))}}else{if(c.isImmutableArray(r))throw Error("Array is Immutable");throw Error("Invalid Parameter");}C=c.voidOperation}else if(r=e.left.name.toLowerCase(),
null!==d.localScope&&void 0!==d.localScope[r])d.localScope[r]={value:I(E,e.operator,d.localScope[r].value,e),valueset:!0,node:e.right},C=c.voidOperation;else if(void 0!==d.globalScope[r])d.globalScope[r]={value:I(E,e.operator,d.globalScope[r].value,e),valueset:!0,node:e.right},C=c.voidOperation;else throw Error("Variable not recognised");return C;case "UpdateExpression":var F,B,r=null,A="";if("MemberExpression"===e.argument.type){r=D(d,e.argument.object);!0===e.argument.computed?A=D(d,e.argument.property):
"Identifier"===e.argument.property.type&&(A=e.argument.property.name);if(c.isArray(r))if(c.isNumber(A)){0>A&&(A=r.length+A);if(0>A||A>=r.length)throw Error("Assignment outside of array bounds");B=c.toNumber(r[A]);r[A]="++"===e.operator?B+1:B-1}else throw Error("Invalid Parameter");else if(r instanceof k){if(!1===c.isString(A))throw Error("Dictionary accessor must be a string");if(!0===r.hasField(A))B=c.toNumber(r.field(A)),r.setField(A,"++"===e.operator?B+1:B-1);else throw Error("Invalid Parameter");
}else if(r instanceof h){if(!1===c.isString(A))throw Error("Feature accessor must be a string");if(!0===r.hasField(A))B=c.toNumber(r.field(A)),r.setField(A,"++"===e.operator?B+1:B-1);else throw Error("Invalid Parameter");}else{if(c.isImmutableArray(r))throw Error("Array is Immutable");throw Error("Invalid Parameter");}F=!1===e.prefix?B:"++"===e.operator?B+1:B-1}else{r="Identifier"===e.argument.type?e.argument.name.toLowerCase():"";if(!r)throw Error("Invalid identifier");if(null!==d.localScope&&void 0!==
d.localScope[r])B=c.toNumber(d.localScope[r].value),d.localScope[r]={value:"++"===e.operator?B+1:B-1,valueset:!0,node:e},F=!1===e.prefix?B:"++"===e.operator?B+1:B-1;else if(void 0!==d.globalScope[r])B=c.toNumber(d.globalScope[r].value),d.globalScope[r]={value:"++"===e.operator?B+1:B-1,valueset:!0,node:e},F=!1===e.prefix?B:"++"===e.operator?B+1:B-1;else throw Error("Variable not recognised");}return F;case "BreakStatement":return c.breakResult;case "ContinueStatement":return c.continueResult;case "TemplateElement":return e.value?
e.value.cooked:"";case "TemplateLiteral":var H="",z=0;C=0;for(r=e.quasis;C<r.length;C++)if(A=r[C],H+=A.value?A.value.cooked:"",!1===A.tail){var P=e.expressions[z]?c.toString(D(d,e.expressions[z])):"",H=H+P;z++}return H;case "ForStatement":null!==e.init&&D(d,e.init);z={testResult:!0,lastAction:c.voidOperation};do a:{r=d;A=e;P=z;if(null!==A.test){P.testResult=D(r,A.test);if(!1===P.testResult)break a;if(!0!==P.testResult)throw Error(b.nodeErrorMessage(A,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));
}P.lastAction=D(r,A.body);P.lastAction===c.breakResult?P.testResult=!1:P.lastAction instanceof c.ReturnResult?P.testResult=!1:null!==A.update&&D(r,A.update)}while(!0===z.testResult);return H=z.lastAction instanceof c.ReturnResult?z.lastAction:c.voidOperation;case "ForInStatement":return G(d,e);case "Identifier":return J(d,e);case "MemberExpression":return Q(d,e);case "Literal":return e.value;case "CallExpression":return K(d,e);case "UnaryExpression":return O(d,e);case "BinaryExpression":return N(d,
e);case "LogicalExpression":return M(d,e);case "ConditionalExpression":throw Error(b.nodeErrorMessage(e,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{for(r=[],A=0;A<e.elements.length;A++){var ka=D(d,e.elements[A]);if(c.isFunctionParameter(ka))throw Error(b.nodeErrorMessage(e,"RUNTIME","FUNCTIONCONTEXTILLEGAL"));ka===c.voidOperation?r.push(null):r.push(ka)}}catch(Sa){throw Sa;}return r;case "ObjectExpression":r={};for(A=0;A<e.properties.length;A++){var U=D(d,e.properties[A]);if(c.isFunctionParameter(U.value))throw Error("Illegal Argument");
if(!1===c.isString(U.key))throw Error("Illegal Argument");r[U.key.toString()]=U.value===c.voidOperation?null:U.value}var Y=new k(r);Y.immutable=!1;return Y;case "Property":return{key:"Identifier"===e.key.type?e.key.name:D(d,e.key),value:D(d,e.value)};default:throw Error(b.nodeErrorMessage(e,"RUNTIME","UNREOGNISED"));}}catch(Sa){throw Sa;}}function G(d,e){var g=D(d,e.right);"VariableDeclaration"===e.left.type&&D(d,e.left);var f=null,r="";if("VariableDeclaration"===e.left.type){var q=e.left.declarations[0].id;
"Identifier"===q.type&&(r=q.name)}else"Identifier"===e.left.type&&(r=e.left.name);if(!r)throw Error(b.nodeErrorMessage(e,"RUNTIME","INVALIDVARIABLE"));r=r.toLowerCase();null!==d.localScope&&void 0!==d.localScope[r]&&(f=d.localScope[r]);null===f&&void 0!==d.globalScope[r]&&(f=d.globalScope[r]);if(null===f)throw Error(b.nodeErrorMessage(e,"RUNTIME","VARIABLENOTDECLARED"));if(c.isArray(g)||c.isString(g)){g=g.length;for(q=0;q<g;q++){f.value=q;r=D(d,e.body);if(r===c.breakResult)break;if(r instanceof c.ReturnResult)return r}return c.voidOperation}if(c.isImmutableArray(g)){for(q=
0;q<g.length();q++){f.value=q;r=D(d,e.body);if(r===c.breakResult)break;if(r instanceof c.ReturnResult)return r}return c.voidOperation}if(g instanceof k||g instanceof h)for(g=g.keys(),q=0;q<g.length;q++){f.value=g[q];r=D(d,e.body);if(r===c.breakResult)break;if(r instanceof c.ReturnResult)return r}else return c.voidOperation}function I(d,e,g,f){switch(e){case "\x3d":return d===c.voidOperation?null:d;case "/\x3d":return c.toNumber(g)/c.toNumber(d);case "*\x3d":return c.toNumber(g)*c.toNumber(d);case "-\x3d":return c.toNumber(g)-
c.toNumber(d);case "+\x3d":return c.isString(g)||c.isString(d)?c.toString(g)+c.toString(d):c.toNumber(g)+c.toNumber(d);case "%\x3d":return c.toNumber(g)%c.toNumber(d);default:throw Error(b.nodeErrorMessage(f,"RUNTIME","OPERATORNOTRECOGNISED"));}}function P(c,d,f){d=d.toLowerCase();switch(d){case "hasz":return c=c.hasZ,void 0===c?!1:c;case "hasm":return c=c.hasM,void 0===c?!1:c;case "spatialreference":return d=c.spatialReference._arcadeCacheId,void 0===d&&(f=!0,Object.freeze&&Object.isFrozen(c.spatialReference)&&
(f=!1),f&&(ca++,d=c.spatialReference._arcadeCacheId=ca)),c=new k({wkt:c.spatialReference.wkt,wkid:c.spatialReference.wkid}),void 0!==d&&(c._arcadeCacheId="SPREF"+d.toString()),c}switch(c.type){case "extent":switch(d){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return c=c[d],void 0!==c?c:null;case "type":return"Extent"}break;case "polygon":switch(d){case "rings":return d=c.getCacheValue("_arcadeCacheId"),void 0===d&&(ca++,d=ca,c.setCacheValue("_arcadeCacheId",
d)),c=new g(c.rings,c.spatialReference,!0===c.hasZ,!0===c.hasM,d);case "type":return"Polygon"}break;case "point":switch(d){case "x":case "y":case "z":case "m":return void 0!==c[d]?c[d]:null;case "type":return"Point"}break;case "polyline":switch(d){case "paths":return d=c.getCacheValue("_arcadeCacheId"),void 0===d&&(ca++,d=ca,c.setCacheValue("_arcadeCacheId",d)),c=new g(c.paths,c.spatialReference,!0===c.hasZ,!0===c.hasM,d);case "type":return"Polyline"}break;case "multipoint":switch(d){case "points":return d=
c.getCacheValue("_arcadeCacheId"),void 0===d&&(ca++,d=ca,c.setCacheValue("_arcadeCacheId",d)),c=new e(c.points,c.spatialReference,!0===c.hasZ,!0===c.hasM,d,1);case "type":return"Multipoint"}}throw Error(b.nodeErrorMessage(f,"RUNTIME","PROPERTYNOTFOUND"));}function Q(d,e){try{var g=D(d,e.object);if(null===g)throw Error(b.nodeErrorMessage(e,"RUNTIME","NOTFOUND"));if(!1===e.computed){if("Identifier"===e.property.type){if(g instanceof k||g instanceof h)return g.field(e.property.name);if(g instanceof y)return P(g,
e.property.name,e)}throw Error(b.nodeErrorMessage(e,"RUNTIME","INVALIDTYPE"));}var f=D(d,e.property);if(g instanceof k||g instanceof h){if(c.isString(f))return g.field(f);throw Error(b.nodeErrorMessage(e,"RUNTIME","INVALIDTYPE"));}if(g instanceof y){if(c.isString(f))return P(g,f,e);throw Error(b.nodeErrorMessage(e,"RUNTIME","INVALIDTYPE"));}if(c.isArray(g)){if(c.isNumber(f)&&isFinite(f)&&Math.floor(f)===f){0>f&&(f=g.length+f);if(f>=g.length||0>f)throw Error(b.nodeErrorMessage(e,"RUNTIME","OUTOFBOUNDS"));
return g[f]}throw Error(b.nodeErrorMessage(e,"RUNTIME","INVALIDTYPE"));}if(c.isString(g)){if(c.isNumber(f)&&isFinite(f)&&Math.floor(f)===f){0>f&&(f=g.length+f);if(f>=g.length||0>f)throw Error(b.nodeErrorMessage(e,"RUNTIME","OUTOFBOUNDS"));return g[f]}throw Error(b.nodeErrorMessage(e,"RUNTIME","INVALIDTYPE"));}if(c.isImmutableArray(g)&&c.isNumber(f)&&isFinite(f)&&Math.floor(f)===f){0>f&&(f=g.length()+f);if(f>=g.length()||0>f)throw Error(b.nodeErrorMessage(e,"RUNTIME","OUTOFBOUNDS"));return g.get(f)}throw Error(b.nodeErrorMessage(e,
"RUNTIME","INVALIDTYPE"));}catch(Fa){throw Fa;}}function O(d,e){try{var g=D(d,e.argument);if(c.isBoolean(g)){if("!"===e.operator)return!g;if("-"===e.operator)return-1*c.toNumber(g);if("+"===e.operator)return 1*c.toNumber(g);if("~"===e.operator)return~c.toNumber(g);throw Error(b.nodeErrorMessage(e,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("~"===e.operator)return~c.toNumber(g);if("-"===e.operator)return-1*c.toNumber(g);if("+"===e.operator)return 1*c.toNumber(g);throw Error(b.nodeErrorMessage(e,"RUNTIME",
"NOTSUPPORTEDUNARYOPERATOR"));}catch(ja){throw ja;}}function N(d,e){try{var g=[D(d,e.left),D(d,e.right)],f=g[0],h=g[1];switch(e.operator){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return c.binaryOperator(c.toNumber(f),c.toNumber(h),e.operator);case "\x3d\x3d":return c.equalityTest(f,h);case "!\x3d":return!c.equalityTest(f,h);case "\x3c":return c.greaterThanLessThan(f,h,e.operator);case "\x3e":return c.greaterThanLessThan(f,h,e.operator);case "\x3c\x3d":return c.greaterThanLessThan(f,
h,e.operator);case "\x3e\x3d":return c.greaterThanLessThan(f,h,e.operator);case "+":return c.isString(f)||c.isString(h)?c.toString(f)+c.toString(h):c.toNumber(f)+c.toNumber(h);case "-":return c.toNumber(f)-c.toNumber(h);case "*":return c.toNumber(f)*c.toNumber(h);case "/":return c.toNumber(f)/c.toNumber(h);case "%":return c.toNumber(f)%c.toNumber(h);default:throw Error(b.nodeErrorMessage(e,"RUNTIME","OPERATORNOTRECOGNISED"));}}catch(Ga){throw Ga;}}function M(d,e){try{if("AssignmentExpression"===e.left.type||
"UpdateExpression"===e.left.type)throw Error(b.nodeErrorMessage(e.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===e.right.type||"UpdateExpression"===e.right.type)throw Error(b.nodeErrorMessage(e.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var g=D(d,e.left);if(c.isBoolean(g))switch(e.operator){case "||":if(!0===g)return g;var f=D(d,e.right);if(c.isBoolean(f))return f;throw Error(b.nodeErrorMessage(e,"RUNTIME","ONLYORORAND"));case "\x26\x26":if(!1===g)return g;
f=D(d,e.right);if(c.isBoolean(f))return f;throw Error(b.nodeErrorMessage(e,"RUNTIME","ONLYORORAND"));default:throw Error(b.nodeErrorMessage(e,"RUNTIME","ONLYORORAND"));}throw Error(b.nodeErrorMessage(e,"RUNTIME","ONLYBOOLEAN"));}catch(Fa){throw Fa;}}function J(c,d){var e;try{var g=d.name.toLowerCase();if(null!==c.localScope&&void 0!==c.localScope[g]){e=c.localScope[g];if(!0===e.valueset)return e.value;e.value=D(c,e.node);e.valueset=!0;return e.value}if(void 0!==c.globalScope[g]){e=c.globalScope[g];
if(!0===e.valueset)return e.value;e.value=D(c,e.node);e.valueset=!0;return e.value}throw Error(b.nodeErrorMessage(d,"RUNTIME","VARIABLENOTFOUND"));}catch(Fa){throw Fa;}}function K(d,e){try{if("Identifier"!==e.callee.type)throw Error(b.nodeErrorMessage(e,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==d.localScope&&void 0!==d.localScope[e.callee.name.toLowerCase()]){var g=d.localScope[e.callee.name.toLowerCase()];if(g.value instanceof c.NativeFunction)return g.value.fn(d,e);if(g.value instanceof q)return ma(d,
e,g.value.definition);throw Error(b.nodeErrorMessage(e,"RUNTIME","NOTAFUNCTION"));}if(void 0!==d.globalScope[e.callee.name.toLowerCase()]){g=d.globalScope[e.callee.name.toLowerCase()];if(g.value instanceof c.NativeFunction)return g.value.fn(d,e);if(g.value instanceof q)return ma(d,e,g.value.definition);throw Error(b.nodeErrorMessage(e,"RUNTIME","NOTAFUNCTION"));}throw Error(b.nodeErrorMessage(e,"RUNTIME","NOTFOUND"));}catch(ja){throw ja;}}function U(b){return null==b?"":c.isArray(b)||c.isImmutableArray(b)?
"Array":c.isDate(b)?"Date":c.isString(b)?"String":c.isBoolean(b)?"Boolean":c.isNumber(b)?"Number":b instanceof l?"Attachment":b instanceof f?"Portal":b instanceof k?"Dictionary":b instanceof h?"Feature":b instanceof B?"Point":b instanceof A?"Polygon":b instanceof C?"Polyline":b instanceof z?"Multipoint":b instanceof w?"Extent":c.isFunctionParameter(b)?"Function":c.isFeatureSet(b)?"FeatureSet":c.isFeatureSetCollection(b)?"FeatureSetCollection":b===c.voidOperation?"":"number"===typeof b&&isNaN(b)?"Number":
"Unrecognised Type"}function R(b,d,e,g){try{var f=D(b,d.arguments[e]);if(c.equalityTest(f,g))return D(b,d.arguments[e+1]);var h=d.arguments.length-e;return 1===h?D(b,d.arguments[e]):2===h?null:3===h?D(b,d.arguments[e+2]):R(b,d,e+2,g)}catch(ga){throw ga;}}function Y(b,d,e,g){try{if(!0===g)return D(b,d.arguments[e+1]);if(3===d.arguments.length-e)return D(b,d.arguments[e+2]);var f=D(b,d.arguments[e+2]);if(!1===c.isBoolean(f))throw Error("WHEN needs boolean test conditions");return Y(b,d,e+2,f)}catch(Ga){throw Ga;
}}function aa(b,c){var d=b.length,e=Math.floor(d/2);if(0===d)return[];if(1===d)return[b[0]];var g=aa(b.slice(0,e),c);b=aa(b.slice(e,d),c);for(d=[];0<g.length||0<b.length;)0<g.length&&0<b.length?(e=c(g[0],b[0]),isNaN(e)&&(e=0),0>=e?(d.push(g[0]),g=g.slice(1)):(d.push(b[0]),b=b.slice(1))):0<g.length?(d.push(g[0]),g=g.slice(1)):0<b.length&&(d.push(b[0]),b=b.slice(1));return d}function S(b,d,e){try{var g=b.body;if(e.length!==b.params.length)throw Error("Invalid Parameter calls to function.");for(var f=
0;f<e.length;f++)d.localScope[b.params[f].name.toLowerCase()]={value:e[f],valueset:!0,node:null};var h=D(d,g);if(h instanceof c.ReturnResult)return h.value;if(h===c.breakResult)throw Error("Cannot Break from a Function");if(h===c.continueResult)throw Error("Cannot Continue from a Function");return h instanceof c.ImplicitResult?h.value:h}catch(ga){throw ga;}}function ma(b,c,d){return H(b,c,function(c,e,g){c={spatialReference:b.spatialReference,globalScope:b.globalScope,depthCounter:b.depthCounter+
1,console:b.console,lrucache:b.lrucache,localScope:{}};if(64<c.depthCounter)throw Error("Exceeded maximum function depth");return S(d,c,g)})}function ha(b){return function(){var c={spatialReference:b.context.spatialReference,console:b.context.console,lrucache:b.context.lrucache,localScope:{},depthCounter:b.context.depthCounter+1,globalScope:b.context.globalScope};if(64<c.depthCounter)throw Error("Exceeded maximum function depth");return S(b.definition,c,arguments)}}function la(b){}Object.defineProperty(p,
"__esModule",{value:!0});var ca=0,ia={};d.registerFunctions(ia,H);x.registerFunctions(ia,H);u.registerFunctions(ia,H);r.registerFunctions(ia,H);t.registerFunctions(ia,H);v.registerFunctions(ia,H);ia["typeof"]=function(b,d){return H(b,d,function(b,d,e){c.pcCheck(e,1,1);b=U(e[0]);if("Unrecognised Type"===b)throw Error("Unrecognised Type");return b})};ia.iif=function(b,d){try{c.pcCheck(null===d.arguments?[]:d.arguments,3,3);var e=D(b,d.arguments[0]);if(!1===c.isBoolean(e))throw Error("IF Function must have a boolean test condition");
var g=D(b,d.arguments[1]),f=D(b,d.arguments[2]);return!0===e?g:f}catch(Ga){throw Ga;}};ia.decode=function(b,c){try{if(2>c.arguments.length)throw Error("Missing Parameters");if(2===c.arguments.length)return D(b,c.arguments[1]);if(0===(c.arguments.length-1)%2)throw Error("Must have a default value result.");var d=D(b,c.arguments[0]);return R(b,c,1,d)}catch(ja){throw ja;}};ia.when=function(b,d){try{if(3>d.arguments.length)throw Error("Missing Parameters");if(0===d.arguments.length%2)throw Error("Must have a default value result.");
var e=D(b,d.arguments[0]);if(!1===c.isBoolean(e))throw Error("WHEN needs boolean test conditions");return Y(b,d,0,e)}catch(ja){throw ja;}};ia.top=function(b,d){return H(b,d,function(b,d,e){c.pcCheck(e,2,2);if(c.isArray(e[0]))return c.toNumber(e[1])>=e[0].length?e[0].slice(0):e[0].slice(0,c.toNumber(e[1]));if(c.isImmutableArray(e[0]))return c.toNumber(e[1])>=e[0].length()?e[0].slice(0):e[0].slice(0,c.toNumber(e[1]));throw Error("Top cannot accept this parameter type");})};ia.first=function(b,d){return H(b,
d,function(b,d,e){c.pcCheck(e,1,1);return c.isArray(e[0])?0===e[0].length?null:e[0][0]:c.isImmutableArray(e[0])?0===e[0].length()?null:e[0].get(0):null})};ia.sort=function(b,d){return H(b,d,function(b,d,e){c.pcCheck(e,1,2);b=e[0];c.isImmutableArray(b)&&(b=b.toArray());if(!1===c.isArray(b))throw Error("Illegal Argument");if(1<e.length){if(!1===c.isFunctionParameter(e[1]))throw Error("Illegal Argument");var g=ha(e[1]);return b=aa(b,function(b,c){return g(b,c)})}if(0===b.length)return[];e={};for(d=0;d<
b.length;d++){var f=U(b[d]);""!==f&&(e[f]=!0)}if(!0===e.Array||!0===e.Dictionary||!0===e.Feature||!0===e.Point||!0===e.Polygon||!0===e.Polyline||!0===e.Multipoint||!0===e.Extent||!0===e.Function)return b.slice(0);d=0;var f="",h;for(h in e)d++,f=h;return b=1<d||"String"===f?aa(b,function(b,d){if(null===b||void 0===b||b===c.voidOperation)return null===d||void 0===d||d===c.voidOperation?0:1;if(null===d||void 0===d||d===c.voidOperation)return-1;b=c.toString(b);d=c.toString(d);return b<d?-1:b===d?0:1}):
"Number"===f?aa(b,function(b,c){return b-c}):"Boolean"===f?aa(b,function(b,c){return b===c?0:c?-1:1}):"Date"===f?aa(b,function(b,c){return c-b}):b.slice(0)})};for(var fa in ia)ia[fa]={value:new c.NativeFunction(ia[fa]),valueset:!0,node:null};var ea=function(){};ea.prototype=ia;ea.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};ea.prototype.pi={value:Math.PI,valueset:!0,node:null};p.functionHelper={fixSpatialReference:c.fixSpatialReference,parseArguments:E,standardFunction:H};
p.extend=function(d){for(var e={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:H,evaluateIdentifier:J,arcadeCustomFunctionHandler:ha},g=0;g<d.length;g++)d[g].registerFunctions(e);for(var f in e.functions)ia[f]={value:new c.NativeFunction(e.functions[f]),valueset:!0,node:null},ea.prototype[f]=ia[f];for(g=0;g<e.signatures.length;g++)b.addFunctionDeclaration(e.signatures[g],"async")};p.executeScript=function(b,d){var e=d.spatialReference;if(null===e||void 0===e)e=new F({wkid:102100});
var g=d.vars,f=d.customfunctions,r=new ea;g||(g={});f||(f={});var l=new k({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});l.immutable=!1;r.textformatting={value:l,valueset:!0,node:null};for(var t in f)r[t]={value:new c.NativeFunction(f[t]),native:!0,valueset:!0,node:null};for(t in g)r[t]=g[t]&&"esri.Graphic"===g[t].declaredClass?{value:h.createFromGraphic(g[t]),valueset:!0,node:null}:{value:g[t],valueset:!0,node:null};b=D({spatialReference:e,globalScope:r,
localScope:null,console:d.console?d.console:la,lrucache:d.lrucache,depthCounter:1},b.body[0].body);b instanceof c.ReturnResult&&(b=b.value);b instanceof c.ImplicitResult&&(b=b.value);b===c.voidOperation&&(b=null);if(b===c.breakResult)throw Error("Cannot return BREAK");if(b===c.continueResult)throw Error("Cannot return CONTINUE");if(b instanceof q)throw Error("Cannot return FUNCTION");if(b instanceof c.NativeFunction)throw Error("Cannot return FUNCTION");return b};p.extractFieldLiterals=function(c,
d){void 0===d&&(d=!1);return b.findFieldLiterals(c)};p.validateScript=function(c,d){return b.validateScript(c,d,"simple")};p.referencesMember=function(c,d){return b.referencesMember(c,d)};p.referencesFunction=function(c,d){return b.referencesFunction(c,d)};p.findFunctionCalls=function(c){return b.findFunctionCalls(c)}})},"esri/arcade/parser":function(){define("esri/arcade/parser",["require","exports","./treeAnalysis","./lib/esprima"],function(m,p,f,l){Object.defineProperty(p,"__esModule",{value:!0});
p.parseScript=function(k,h){void 0===h&&(h=[]);k=l.parse("function _() { "+k+"\n}");if(null===k.body||void 0===k.body)throw Error("No formula provided.");if(0===k.body.length)throw Error("No formula provided.");if(0===k.body.length)throw Error("No formula provided.");if("BlockStatement"!==k.body[0].body.type)throw Error("Invalid formula content.");var q=f.validateLanguage(k);if(""!==q)throw Error(q);f.findScriptDependencies(k,h);return k};p.scriptCheck=function(k,h,q,g,e){var c=[];try{var b=l.parse("function _() { "+
k+"\n}",{tolerant:!0,loc:!0}),d=b.errors;if(0<d.length)for(var r=0;r<d.length;r++)c.push({line:d[r].lineNumber,character:d[r].column,reason:d[r].description});var m=f.checkScript(b,h,q,g,e);for(h=0;h<m.length;h++)c.push(m[h])}catch(u){try{"Unexpected token }"===u.description?(u.index=("function _() { "+k+"\n}").length-1,c.push({line:u.lineNumber,character:u.column,reason:"Unexpected end of script"})):c.push({line:u.lineNumber,character:u.column,reason:u.description})}catch(t){}}return c};p.extractFieldLiterals=
function(k,h){void 0===h&&(h=!1);return f.findFieldLiterals(k)};p.validateScript=function(k,h,q){return f.validateScript(k,h,q)};p.referencesMember=function(k,h){return f.referencesMember(k,h)};p.referencesFunction=function(k,h){return f.referencesFunction(k,h)}})},"esri/arcade/lib/esprima":function(){(function(m,p){"function"===typeof define&&define.amd?define("esri/arcade/lib/esprima",["exports"],p):"undefined"!==typeof exports?p(exports):p(m.esprima={})})(this,function(m){function p(b,c){if(!b)throw Error("ASSERT: "+
c);}function f(b){return 48<=b&&57>=b}function l(b){return 0<="0123456789abcdefABCDEF".indexOf(b)}function k(b){return 0<="01234567".indexOf(b)}function h(b){return 10===b||13===b||8232===b||8233===b}function q(b){return 65536>b?String.fromCharCode(b):String.fromCharCode(55296+(b-65536>>10))+String.fromCharCode(56320+(b-65536&1023))}function g(b){return 36===b||95===b||65<=b&&90>=b||97<=b&&122>=b||92===b||128<=b&&Ea.NonAsciiIdentifierStart.test(q(b))}function e(b){return 36===b||95===b||65<=b&&90>=
b||97<=b&&122>=b||48<=b&&57>=b||92===b||128<=b&&Ea.NonAsciiIdentifierPart.test(q(b))}function c(b){b=b.toLowerCase();switch(b.length){case 2:return"if"===b||"in"===b;case 3:return"var"===b||"for"===b;case 4:return"else"===b;case 5:return"break"===b;case 6:return"return"===b;case 8:return"function"===b||"continue"===b;default:return!1}}function b(b,c,d,e,g){p("number"===typeof d,"Comment must have valid position");X.lastCommentStart=d;b={type:b,value:c};T.range&&(b.range=[d,e]);T.loc&&(b.loc=g);T.comments.push(b);
T.attachComment&&(T.leadingComments.push(b),T.trailingComments.push(b));T.tokenize&&(b.type+="Comment",T.delegate&&(b=T.delegate(b)),T.tokens.push(b))}function d(c){var d,e,g;d=L-c;for(e={start:{line:sa,column:L-wa-c}};L<Aa;)if(g=V.charCodeAt(L),++L,h(g)){Va=!0;T.comments&&(c=V.slice(d+c,L-1),e.end={line:sa,column:L-wa-1},b("Line",c,d,L-1,e));13===g&&10===V.charCodeAt(L)&&++L;++sa;wa=L;return}T.comments&&(c=V.slice(d+c,L),e.end={line:sa,column:L-wa},b("Line",c,d,L,e))}function r(){var c,e;Va=!1;for(e=
0===L;L<Aa;)if(c=V.charCodeAt(L),32===c||9===c||11===c||12===c||160===c||5760<=c&&0<=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(c))++L;else if(h(c))Va=!0,++L,13===c&&10===V.charCodeAt(L)&&++L,++sa,wa=L,e=!0;else if(47===c)if(c=V.charCodeAt(L+1),47===c)++L,++L,d(2),e=!0;else if(42===c){++L;++L;a:{var g=c=void 0,f=void 0,f=void 0;for(T.comments&&(c=L-2,g={start:{line:sa,column:L-wa-2}});L<Aa;)if(f=V.charCodeAt(L),h(f))13===f&&10===V.charCodeAt(L+
1)&&++L,Va=!0,++sa,++L,wa=L;else{if(42===f&&47===V.charCodeAt(L+1)){++L;++L;T.comments&&(f=V.slice(c+2,L-2),g.end={line:sa,column:L-wa},b("Block",f,c,L,g));break a}++L}T.comments&&(g.end={line:sa,column:L-wa},f=V.slice(c+2,L),b("Block",f,c,L,g));U()}}else break;else if(e&&45===c)if(45===V.charCodeAt(L+1)&&62===V.charCodeAt(L+2))L+=3,d(3);else break;else if(60===c)if("!--"===V.slice(L+1,L+4))++L,++L,++L,++L,d(4);else break;else break}function v(b){var c,d,e=0;c="u"===b?4:2;for(b=0;b<c;++b)if(L<Aa&&
l(V[L]))d=V[L++],e=16*e+"0123456789abcdef".indexOf(d.toLowerCase());else return"";return String.fromCharCode(e)}function u(){var b,c;b=V[L];c=0;for("}"===b&&K();L<Aa;){b=V[L++];if(!l(b))break;c=16*c+"0123456789abcdef".indexOf(b.toLowerCase())}(1114111<c||"}"!==b)&&K();return q(c)}function t(b){var c;c=V.charCodeAt(b);55296<=c&&56319>=c&&(b=V.charCodeAt(b+1),56320<=b&&57343>=b&&(c=1024*(c-55296)+b-56320+65536));return c}function x(){var b,c,d;b=t(L);d=q(b);L+=d.length;for(92===b&&(117!==V.charCodeAt(L)&&
K(),++L,"{"===V[L]?(++L,c=u()):(c=v("u"),b=c.charCodeAt(0),c&&"\\"!==c&&g(b)||K()),d=c);L<Aa;){b=t(L);if(!e(b))break;c=q(b);d+=c;L+=c.length;92===b&&(d=d.substr(0,d.length-1),117!==V.charCodeAt(L)&&K(),++L,"{"===V[L]?(++L,c=u()):(c=v("u"),b=c.charCodeAt(0),c&&"\\"!==c&&e(b)||K()),d+=c)}return d}function w(){var b,d;b=L;if(92===V.charCodeAt(L))d=x();else a:{var g;for(d=L++;L<Aa;){g=V.charCodeAt(L);if(92===g||55296<=g&&57343>g){d=(L=d,x());break a}if(e(g))++L;else break}d=V.slice(d,L)}return{type:1===
d.length?W.Identifier:c(d)?W.Keyword:"null"===d.toLowerCase()?W.NullLiteral:"true"===d.toLowerCase()||"false"===d.toLowerCase()?W.BooleanLiteral:W.Identifier,value:d,lineNumber:sa,lineStart:wa,start:b,end:L}}function y(){var b,c;b={type:W.Punctuator,value:"",lineNumber:sa,lineStart:wa,start:L,end:L};c=V[L];switch(c){case "(":T.tokenize&&(T.openParenToken=T.tokenValues.length);++L;break;case "{":T.tokenize&&(T.openCurlyToken=T.tokenValues.length);X.curlyStack.push("{");++L;break;case ".":++L;"."===
V[L]&&"."===V[L+1]&&(L+=2,c="...");break;case "}":++L;X.curlyStack.pop();break;case ")":case ";":case ",":case "[":case "]":case ":":case "?":case "~":++L;break;default:c=V.substr(L,4),"\x3e\x3e\x3e\x3d"===c?L+=4:(c=c.substr(0,3),"\x3d\x3d\x3d"===c||"!\x3d\x3d"===c||"\x3e\x3e\x3e"===c||"\x3c\x3c\x3d"===c||"\x3e\x3e\x3d"===c?L+=3:(c=c.substr(0,2),"\x26\x26"===c||"||"===c||"\x3d\x3d"===c||"!\x3d"===c||"+\x3d"===c||"-\x3d"===c||"*\x3d"===c||"/\x3d"===c||"++"===c||"--"===c||"\x3c\x3c"===c||"\x3e\x3e"===
c||"\x26\x3d"===c||"|\x3d"===c||"^\x3d"===c||"%\x3d"===c||"\x3c\x3d"===c||"\x3e\x3d"===c||"\x3d\x3e"===c?L+=2:(c=V[L],0<="\x3c\x3e\x3d!+-*%\x26|^/".indexOf(c)&&++L)))}L===b.start&&K();b.end=L;b.value=c;return b}function z(){var b,c,d;d=V[L];p(f(d.charCodeAt(0))||"."===d,"Numeric literal must start with a decimal digit or a decimal point");c=L;b="";if("."!==d){b=V[L++];d=V[L];if("0"===b){if("x"===d||"X"===d){++L;for(b="";L<Aa&&l(V[L]);)b+=V[L++];0===b.length&&K();g(V.charCodeAt(L))&&K();return{type:W.NumericLiteral,
value:parseInt("0x"+b,16),lineNumber:sa,lineStart:wa,start:c,end:L}}if("b"===d||"B"===d){++L;for(d="";L<Aa;){b=V[L];if("0"!==b&&"1"!==b)break;d+=V[L++]}0===d.length&&K();L<Aa&&(b=V.charCodeAt(L),(g(b)||f(b))&&K());return{type:W.NumericLiteral,value:parseInt(d,2),lineNumber:sa,lineStart:wa,start:c,end:L}}if("o"===d||"O"===d){for(k(d)?(d=!0,b="0"+V[L++]):(d=!1,++L,b="");L<Aa&&k(V[L]);)b+=V[L++];d||0!==b.length||K();(g(V.charCodeAt(L))||f(V.charCodeAt(L)))&&K();return{type:W.NumericLiteral,value:parseInt(b,
8),octal:d,lineNumber:sa,lineStart:wa,start:c,end:L}}}for(;f(V.charCodeAt(L));)b+=V[L++];d=V[L]}if("."===d){for(b+=V[L++];f(V.charCodeAt(L));)b+=V[L++];d=V[L]}if("e"===d||"E"===d){b+=V[L++];d=V[L];if("+"===d||"-"===d)b+=V[L++];if(f(V.charCodeAt(L)))for(;f(V.charCodeAt(L));)b+=V[L++];else K()}g(V.charCodeAt(L))&&K();return{type:W.NumericLiteral,value:parseFloat(b),lineNumber:sa,lineStart:wa,start:c,end:L}}function B(){function b(b){return b&&1<b.length&&"a"<=b[0]&&"z">=b[0]}var c,d;d=T.tokenValues[T.tokenValues.length-
1];c=null!==d;switch(d){case "this":case "]":c=!1;break;case ")":(c=T.tokenValues[T.openParenToken-1])&&(c=c.toLowerCase());c="if"===c||"while"===c||"for"===c||"with"===c;break;case "}":c=!1,b(T.tokenValues[T.openCurlyToken-3])?((c=T.tokenValues[T.openCurlyToken-4])&&(c=c.toLowerCase()),c=c?0>hb.indexOf(c):!1):b(T.tokenValues[T.openCurlyToken-4])&&(c=(c=T.tokenValues[T.openCurlyToken-5])?0>hb.indexOf(c):!0)}return c?collectRegex():y()}function A(){var b,c,d;if(L>=Aa)return{type:W.EOF,lineNumber:sa,
lineStart:wa,start:L,end:L};d=V.charCodeAt(L);if(g(d))return d=w();if(40===d||41===d||59===d)return y();if(39===d||34===d){d="";var e,r,q=!1;e=V[L];p("'"===e||'"'===e,"String literal must starts with a quote");r=L;for(++L;L<Aa;)if(c=V[L++],c===e){e="";break}else if("\\"===c)if((c=V[L++])&&h(c.charCodeAt(0)))++sa,"\r"===c&&"\n"===V[L]&&++L,wa=L;else switch(c){case "u":case "x":if("{"===V[L])++L,d+=u();else{c=v(c);if(!c)throw K();d+=c}break;case "n":d+="\n";break;case "r":d+="\r";break;case "t":d+=
"\t";break;case "b":d+="\b";break;case "f":d+="\f";break;case "v":d+="\x0B";break;case "8":case "9":d+=c;U();break;default:if(k(c)){b=c;c="0"!==b;var l="01234567".indexOf(b);L<Aa&&k(V[L])&&(c=!0,l=8*l+"01234567".indexOf(V[L++]),0<="0123".indexOf(b)&&L<Aa&&k(V[L])&&(l=8*l+"01234567".indexOf(V[L++])));b=l;q=c||q;d+=String.fromCharCode(b)}else d+=c}else if(h(c.charCodeAt(0)))break;else d+=c;""!==e&&(L=r,K());return{type:W.StringLiteral,value:d,octal:q,lineNumber:eb,lineStart:Ra,start:r,end:L}}if(46===
d)return f(V.charCodeAt(L+1))?z():y();if(f(d))return z();if(T.tokenize&&47===d)return B();if(96===d||125===d&&"${"===X.curlyStack[X.curlyStack.length-1]){d="";var m,x,l=c=!1;r=L;b="`"===V[L];q=2;for(++L;L<Aa;)if(e=V[L++],"`"===e){q=1;c=l=!0;break}else if("$"===e){if("{"===V[L]){X.curlyStack.push("${");++L;c=!0;break}d+=e}else if("\\"===e)if(e=V[L++],h(e.charCodeAt(0)))++sa,"\r"===e&&"\n"===V[L]&&++L,wa=L;else switch(e){case "n":d+="\n";break;case "r":d+="\r";break;case "t":d+="\t";break;case "u":case "x":"{"===
V[L]?(++L,d+=u()):(m=L,(x=v(e))?d+=x:(L=m,d+=e));break;case "b":d+="\b";break;case "f":d+="\f";break;case "v":d+="\v";break;default:"0"===e?(f(V.charCodeAt(L))&&N(ua.TemplateOctalLiteral),d+="\x00"):k(e)?N(ua.TemplateOctalLiteral):d+=e}else h(e.charCodeAt(0))?(++sa,"\r"===e&&"\n"===V[L]&&++L,wa=L,d+="\n"):d+=e;c||K();b||X.curlyStack.pop();return{type:W.Template,value:{cooked:d,raw:V.slice(r+1,L-q)},head:b,tail:l,lineNumber:sa,lineStart:wa,start:r,end:L}}return 55296<=d&&57343>d&&(d=t(L),g(d))?w():
y()}function C(){var b,c,d;b={start:{line:sa,column:L-wa}};c=A();b.end={line:sa,column:L-wa};c.type!==W.EOF&&(d=V.slice(c.start,c.end),b={type:Wa[c.type],value:d,range:[c.start,c.end],loc:b},c.regex&&(b.regex={pattern:c.regex.pattern,flags:c.regex.flags}),T.tokenValues&&T.tokenValues.push("Punctuator"===b.type||"Keyword"===b.type?b.value:null),T.tokenize&&(T.range||delete b.range,T.loc||delete b.loc,T.delegate&&(b=T.delegate(b))),T.tokens.push(b));return c}function F(){var b;Ya=!0;Qa=L;$a=sa;ab=wa;
r();b=Z;Ia=L;eb=sa;Ra=wa;Z="undefined"!==typeof T.tokens?C():A();Ya=!1;return b}function E(){Ya=!0;r();Qa=L;$a=sa;ab=wa;Ia=L;eb=sa;Ra=wa;Z="undefined"!==typeof T.tokens?C():A();Ya=!1}function H(){this.line=eb;this.column=Ia-Ra}function D(){this.start=new H;this.end=null}function G(b){this.start={line:b.lineNumber,column:b.start-b.lineStart};this.end=null}function I(){T.range&&(this.range=[Ia,0]);T.loc&&(this.loc=new D)}function P(b){T.range&&(this.range=[b.start,0]);T.loc&&(this.loc=new G(b))}function Q(b){var c,
d;for(c=0;c<T.errors.length;c++)if(d=T.errors[c],d.index===b.index&&d.message===b.message)return;T.errors.push(b)}function O(b,c,d){var e;a:{e=c-(Ya?wa:ab)+1;var g=Error("Line "+b+": "+d);try{throw g;}catch(fb){Object.create&&Object.defineProperty&&(g=Object.create(fb),Object.defineProperty(g,"column",{value:e}))}finally{e=g;break a}}e.lineNumber=b;e.description=d;e.index=c;return e}function N(b){var c,d;c=Array.prototype.slice.call(arguments,1);d=b.replace(/%(\d)/g,function(b,d){p(d<c.length,"Message reference must be in range");
return c[d]});throw O($a,Qa,d);}function M(b){var c,d;c=Array.prototype.slice.call(arguments,1);d=b.replace(/%(\d)/g,function(b,d){p(d<c.length,"Message reference must be in range");return c[d]});d=O(sa,Qa,d);if(T.errors)Q(d);else throw d;}function J(b,c){var d=c||ua.UnexpectedToken;b?(c||(d=b.type===W.EOF?ua.UnexpectedEOS:b.type===W.Identifier?ua.UnexpectedIdentifier:b.type===W.NumericLiteral?ua.UnexpectedNumber:b.type===W.StringLiteral?ua.UnexpectedString:b.type===W.Template?ua.UnexpectedTemplate:
ua.UnexpectedToken),c=b.type===W.Template?b.value.raw:b.value):c="ILLEGAL";d=d.replace("%0",c);return b&&"number"===typeof b.lineNumber?O(b.lineNumber,b.start,d):O(Ya?sa:$a,Ya?L:Qa,d)}function K(b,c){throw J(b,c);}function U(b,c){b=J(b,c);if(T.errors)Q(b);else throw b;}function R(b){var c=F();c.type===W.Punctuator&&c.value===b||K(c)}function Y(){var b;T.errors?(b=Z,b.type===W.Punctuator&&","===b.value?F():b.type===W.Punctuator&&";"===b.value?(F(),U(b)):U(b,ua.UnexpectedToken)):R(",")}function aa(b){var c=
F();c.type===W.Keyword&&c.value.toLowerCase()===b.toLowerCase()||K(c)}function S(b){return Z.type===W.Punctuator&&Z.value===b}function ma(b){return Z.type===W.Keyword&&Z.value.toLowerCase()===b.toLowerCase()}function ha(){59===V.charCodeAt(Ia)||S(";")?F():Va||(Qa=Ia,$a=eb,ab=Ra,Z.type===W.EOF||S("}")||K(Z))}function la(b){var c=za,d=xa,e=Oa;xa=za=!0;Oa=null;b=b();null!==Oa&&K(Oa);za=c;xa=d;Oa=e;return b}function ca(b){var c=za,d=xa,e=Oa;xa=za=!0;Oa=null;b=b();za=za&&c;xa=xa&&d;Oa=e||Oa;return b}function ia(b,
c){var d=new I,e,g,f=S("[");if(Z.type===W.Identifier){g=Z;e=Ba();if(S("\x3d"))return b.push(g),F(),b=oa(),d.finishProperty("init",e,!1,(new P(g)).finishAssignmentPattern(e,b),!1,!0);if(!S(":"))return b.push(g),d.finishProperty("init",e,!1,e,!1,!0)}else e=na();R(":");b=ea(b,c);return d.finishProperty("init",e,f,b,!1,!1)}function fa(b,c){if(S("[")){var d=new I,e=[],g;for(R("[");!S("]");)if(S(","))F(),e.push(null);else{if(S("...")){g=new I;F();b.push(Z);b=Ba(c);e.push(g.finishRestElement(b));break}else e.push(ea(b,
c));S("]")||R(",")}R("]");return d.finishArrayPattern(e)}if(S("{")){d=new I;e=[];for(R("{");!S("}");)e.push(ia(b,c)),S("}")||R(",");F();return d.finishObjectPattern(e)}ma("let")&&("const"!==c&&"let"!==c||U(Z,ua.UnexpectedToken));b.push(Z);return Ba(c)}function ea(b,c){var d=Z,e;b=fa(b,c);S("\x3d")&&(F(),c=X.allowYield,X.allowYield=!0,e=la(oa),X.allowYield=c,b=(new P(d)).finishAssignmentPattern(b,e));return b}function pa(){var b=[],c=new I,d;for(R("[");!S("]");)S(",")?(F(),b.push(null)):S("...")?(d=
new I,F(),d.finishSpreadElement(ca(oa)),S("]")||(xa=za=!1,R(",")),b.push(d)):(b.push(ca(oa)),S("]")||R(","));F();return c.finishArrayExpression(b)}function ka(b,c,d){var e,g;xa=za=!1;e=ta;g=la(Sa);ta&&c.firstRestricted&&U(c.firstRestricted,c.message);ta&&c.stricted&&U(c.stricted,c.message);ta=e;return b.finishFunctionExpression(null,c.params,c.defaults,g,d)}function na(){var b,c=new I;b=F();switch(b.type){case W.StringLiteral:case W.NumericLiteral:return ta&&b.octal&&U(b,ua.StrictOctalLiteral),c.finishLiteral(b);
case W.Identifier:case W.BooleanLiteral:case W.NullLiteral:case W.Keyword:return c.finishIdentifier(b.value);case W.Punctuator:if("["===b.value)return b=la(oa),R("]"),b}K(b)}function ja(){switch(Z.type){case W.Identifier:case W.StringLiteral:case W.BooleanLiteral:case W.NullLiteral:case W.NumericLiteral:case W.Keyword:return!0;case W.Punctuator:return"["===Z.value}return!1}function Fa(b,c,d,e){var g,f=X.allowYield;if(b.type===W.Identifier){if("get"===b.value&&ja())return d=S("["),c=na(),b=new I,R("("),
R(")"),X.allowYield=!1,b=ka(b,{params:[],defaults:[],stricted:null,firstRestricted:null,message:null},!1),X.allowYield=f,e.finishProperty("get",c,d,b,!1,!1);if("set"===b.value&&ja())return d=S("["),c=na(),b=new I,R("("),g={params:[],defaultCount:0,defaults:[],firstRestricted:null,paramSet:{}},S(")")?U(Z):(X.allowYield=!1,db(g),X.allowYield=f,0===g.defaultCount&&(g.defaults=[])),R(")"),X.allowYield=!1,b=ka(b,g,!1),X.allowYield=f,e.finishProperty("set",c,d,b,!1,!1)}else if(b.type===W.Punctuator&&"*"===
b.value&&ja())return d=S("["),c=na(),b=new I,X.allowYield=!0,g=Ua(),X.allowYield=f,X.allowYield=!1,b=ka(b,g,!0),X.allowYield=f,e.finishProperty("init",c,d,b,!0,!1);return c&&S("(")?(g=new I,f=X.allowYield,X.allowYield=!1,b=Ua(),X.allowYield=f,X.allowYield=!1,b=ka(g,b,!1),X.allowYield=f,e.finishProperty("init",c,d,b,!0,!1)):null}function Ga(b){var c=Z,d=new I,e,g,f;e=S("[");S("*")?F():g=na();if(f=Fa(c,g,e,d))return f;g||K(Z);e||(f=g.type===da.Identifier&&"__proto__"===g.name||g.type===da.Literal&&
"__proto__"===g.value,b.value&&f&&M(ua.DuplicateProtoProperty),b.value|=f);if(S(":"))return F(),b=ca(oa),d.finishProperty("init",g,e,b,!1,!1);if(c.type===W.Identifier)return S("\x3d")?(Oa=Z,F(),b=la(oa),d.finishProperty("init",g,e,(new P(c)).finishAssignmentPattern(g,b),!1,!0)):d.finishProperty("init",g,e,g,!1,!0);K(Z)}function ga(b){var c=[],d={value:!1},e=new I;for(b||R("{");!S("}");)c.push(Ga(d)),S("}")||Y();R("}");return e.finishObjectExpression(c)}function va(b){var c;switch(b.type){case da.ArrayExpression:b.type=
da.ArrayPattern;for(c=0;c<b.elements.length;c++)null!==b.elements[c]&&va(b.elements[c]);break;case da.ObjectExpression:b.type=da.ObjectPattern;for(c=0;c<b.properties.length;c++)va(b.properties[c].value);break;case da.AssignmentExpression:b.type=da.AssignmentPattern,va(b.left)}}function ra(b){var c;(Z.type!==W.Template||b.head&&!Z.head)&&K();b=new I;c=F();return b.finishTemplateElement({raw:c.value.raw,cooked:c.value.cooked},c.tail)}function qa(){var b,c;R("(");if(S(")"))return F(),S("\x3d\x3e")||
R("\x3d\x3e"),{type:gb.ArrowParameterPlaceHolder,params:[],rawParams:[]};c=Z;za=!0;b=ca(oa);if(S(",")){xa=!1;for(b=[b];Ia<Aa&&S(",");)F(),b.push(ca(oa));b=(new P(c)).finishSequenceExpression(b)}R(")");if(S("\x3d\x3e")){if(b.type===da.Identifier&&"yield"===b.name)return{type:gb.ArrowParameterPlaceHolder,params:[b]};za||K(Z);if(b.type===da.SequenceExpression)for(c=0;c<b.expressions.length;c++)va(b.expressions[c]);else va(b);b={type:gb.ArrowParameterPlaceHolder,params:b.type===da.SequenceExpression?
b.expressions:[b]}}za=!1;return b}function Ma(){var b,c,d;if(S("("))return za=!1,ca(qa);if(S("["))return ca(pa);if(S("{"))return ca(ga);b=Z.type;d=new I;if(b===W.Identifier)c=d.finishIdentifier(F().value);else if(b===W.StringLiteral||b===W.NumericLiteral)xa=za=!1,ta&&Z.octal&&U(Z,ua.StrictOctalLiteral),c=d.finishLiteral(F());else if(b===W.Keyword){xa=za=!1;if(ma("function"))return parseFunctionExpression();K(F())}else if(b===W.BooleanLiteral)xa=za=!1,b=F(),b.value="true"===b.value.toLowerCase(),c=
d.finishLiteral(b);else if(b===W.NullLiteral)xa=za=!1,b=F(),b.value=null,c=d.finishLiteral(b);else if(b===W.Template){var e=new I;d=ra({head:!0});b=[d];for(c=[];!d.tail;)c.push(Da()),d=ra({head:!1}),b.push(d);c=e.finishTemplateLiteral(b,c)}else K(F());return c}function ya(){var b,c,d,e=X.allowIn;d=Z;X.allowIn=!0;for(b=ca(Ma);;)if(S(".")){za=!1;xa=!0;R(".");c=void 0;var g=new I;c=F();c.type===W.Identifier||c.type===W.Keyword||c.type===W.BooleanLiteral||c.type===W.NullLiteral||K(c);c=g.finishIdentifier(c.value);
b=(new P(d)).finishMemberExpression(".",b,c)}else if(S("(")){xa=za=!1;c=[];g=void 0;R("(");if(!S(")"))for(;Ia<Aa;){g=la(oa);c.push(g);if(S(")"))break;Y()}R(")");b=(new P(d)).finishCallExpression(b,c)}else if(S("["))za=!1,xa=!0,c=void 0,R("["),c=la(Da),R("]"),b=(new P(d)).finishMemberExpression("[",b,c);else break;X.allowIn=e;return b}function Ja(){var b,c,d=Z;b=ca(ya);Va||Z.type!==W.Punctuator||!S("++")&&!S("--")||(xa||M(ua.InvalidLHSInAssignment),xa=za=!1,c=F(),b=(new P(d)).finishPostfixExpression(c.value,
b));return b}function ba(){var b,c,d;Z.type!==W.Punctuator&&Z.type!==W.Keyword?c=Ja():S("++")||S("--")?(d=Z,b=F(),c=ca(ba),xa||M(ua.InvalidLHSInAssignment),c=(new P(d)).finishUnaryExpression(b.value,c),xa=za=!1):S("+")||S("-")||S("~")||S("!")?(d=Z,b=F(),c=ca(ba),c=(new P(d)).finishUnaryExpression(b.value,c),xa=za=!1):ma("delete")||ma("void")||ma("typeof")?(d=Z,b=F(),c=ca(ba),c=(new P(d)).finishUnaryExpression(b.value,c),ta&&"delete"===c.operator&&c.argument.type===da.Identifier&&M(ua.StrictDelete),
xa=za=!1):c=Ja();return c}function Ta(b,c){var d=0;if(b.type!==W.Punctuator&&b.type!==W.Keyword)return 0;switch(b.value){case "||":d=1;break;case "\x26\x26":d=2;break;case "|":d=3;break;case "^":d=4;break;case "\x26":d=5;break;case "\x3d\x3d":case "!\x3d":case "\x3d\x3d\x3d":case "!\x3d\x3d":d=6;break;case "\x3c":case "\x3e":case "\x3c\x3d":case "\x3e\x3d":case "instanceof":d=7;break;case "in":d=c?7:0;break;case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":d=8;break;case "+":case "-":d=9;break;
case "*":case "/":case "%":d=11}return d}function Ca(){var b,c,d,e,g,f;b=Z;c=ca(ba);d=Z;e=Ta(d,X.allowIn);if(0===e)return c;xa=za=!1;d.prec=e;F();b=[b,Z];f=la(ba);for(g=[c,d,f];0<(e=Ta(Z,X.allowIn));){for(;2<g.length&&e<=g[g.length-2].prec;)f=g.pop(),d=g.pop().value,c=g.pop(),b.pop(),c=(new P(b[b.length-1])).finishBinaryExpression(d,c,f),g.push(c);d=F();d.prec=e;g.push(d);b.push(Z);c=la(ba);g.push(c)}e=g.length-1;c=g[e];for(b.pop();1<e;)c=(new P(b.pop())).finishBinaryExpression(g[e-1].value,g[e-2],
c),e-=2;return c}function Ha(b,c){var d;switch(c.type){case da.Identifier:Pa(b,c,c.name);break;case da.RestElement:Ha(b,c.argument);break;case da.AssignmentPattern:Ha(b,c.left);break;case da.ArrayPattern:for(d=0;d<c.elements.length;d++)null!==c.elements[d]&&Ha(b,c.elements[d]);break;case da.YieldExpression:break;default:for(p(c.type===da.ObjectPattern,"Invalid type"),d=0;d<c.properties.length;d++)Ha(b,c.properties[d].value)}}function oa(){var b,c,d,e;b=e=Z;var g;d=Z;c=ca(Ca);S("?")&&(F(),g=X.allowIn,
X.allowIn=!0,b=la(oa),X.allowIn=g,R(":"),g=la(oa),c=(new P(d)).finishConditionalExpression(c,b,g),xa=za=!1);if(c.type===gb.ArrowParameterPlaceHolder||S("\x3d\x3e")){xa=za=!1;a:{var f,h,k,r;d=[];g=0;b=[c];switch(c.type){case da.Identifier:break;case gb.ArrowParameterPlaceHolder:b=c.params;break;default:b=null;break a}r={paramSet:{}};f=0;for(h=b.length;f<h;f+=1)switch(k=b[f],k.type){case da.AssignmentPattern:b[f]=k.left;k.right.type===da.YieldExpression&&(k.right.argument&&K(Z),k.right.type=da.Identifier,
k.right.name="yield",delete k.right.argument,delete k.right.delegate);d.push(k.right);++g;Ha(r,k.left);break;default:Ha(r,k),b[f]=k,d.push(null)}if(ta||!X.allowYield)for(f=0,h=b.length;f<h;f+=1)k=b[f],k.type===da.YieldExpression&&K(Z);r.message===ua.StrictParamDupe&&(f=ta?r.stricted:r.firstRestricted,K(f,r.message));0===g&&(d=[]);b={params:b,defaults:d,stricted:r.stricted,firstRestricted:r.firstRestricted,message:r.message}}return b?(Oa=null,parseArrowFunctionExpression(b,new P(e))):c}Z.type!==W.Punctuator?
b=!1:(b=Z.value,b="\x3d"===b||"*\x3d"===b||"/\x3d"===b||"%\x3d"===b||"+\x3d"===b||"-\x3d"===b||"\x3c\x3c\x3d"===b||"\x3e\x3e\x3d"===b||"\x3e\x3e\x3e\x3d"===b||"\x26\x3d"===b||"^\x3d"===b||"|\x3d"===b);b&&(xa||M(ua.InvalidLHSInAssignment),S("\x3d")?va(c):xa=za=!1,b=F(),d=la(oa),c=(new P(e)).finishAssignmentExpression(b.value,c,d),Oa=null);return c}function Da(){var b,c=Z;b=la(oa);if(S(",")){for(b=[b];Ia<Aa&&S(",");)F(),b.push(la(oa));b=(new P(c)).finishSequenceExpression(b)}return b}function La(){if(Z.type===
W.Keyword)switch(Z.value.toLowerCase()){case "function":return bb(new I)}return Za()}function Ba(b){var c,d=new I;c=F();c.type!==W.Identifier&&(ta||"let"!==c.value||"var"!==b)&&K(c);return d.finishIdentifier(c.value)}function Na(b){var c=null,d,e=new I;d=fa([],"var");S("\x3d")?(F(),c=la(oa)):d.type===da.Identifier||b.inFor||R("\x3d");return e.finishVariableDeclarator(d,c)}function Ka(b){var c;b={inFor:b.inFor};for(c=[Na(b)];S(",");)F(),c.push(Na(b));return c}function Xa(){return Za(!0)}function Za(b){var c=
Z.type,d,e;c===W.EOF&&K(Z);if(c===W.Punctuator&&"{"===Z.value){if(b){R("{");var f=Z;b=L;d=sa;e=wa;F();c=S(":");Z=f;L=b;sa=d;wa=e;if((Z.type===W.Identifier||Z.type===W.StringLiteral)&&c)return ga(!0);b=new I;for(d=[];Ia<Aa&&!S("}");)d.push(La());R("}");return b.finishBlockStatement(d)}return ga()}xa=za=!0;b=new I;if(c===W.Punctuator)switch(Z.value){case ";":return R(";"),b.finishEmptyStatement();case "(":return d=Da(),ha(),b.finishExpressionStatement(d)}else if(c===W.Keyword)switch(Z.value.toLowerCase()){case "break":return d=
null,aa("break"),59===V.charCodeAt(Qa)?(F(),X.inIteration||X.inSwitch||N(ua.IllegalBreak),b=b.finishBreakStatement(null)):(Va?X.inIteration||X.inSwitch||N(ua.IllegalBreak):Z.type===W.Identifier&&(d=Ba(),e="$"+d.name,Object.prototype.hasOwnProperty.call(X.labelSet,e)||N(ua.UnknownLabel,d.name)),ha(),null!==d||X.inIteration||X.inSwitch||N(ua.IllegalBreak),b=b.finishBreakStatement(d)),b;case "continue":return d=null,aa("continue"),59===V.charCodeAt(Ia)?(F(),X.inIteration||N(ua.IllegalContinue),b=b.finishContinueStatement(null)):
Va?(X.inIteration||N(ua.IllegalContinue),b=b.finishContinueStatement(null)):(Z.type===W.Identifier&&(d=Ba(),e="$"+d.name,Object.prototype.hasOwnProperty.call(X.labelSet,e)||N(ua.UnknownLabel,d.name)),ha(),null!==d||X.inIteration||N(ua.IllegalContinue),b=b.finishContinueStatement(d)),b;case "for":var h,k,r,q;q=X.allowIn;h=f=r=null;c=!0;aa("for");R("(");if(S(";"))F();else if(ma("var"))h=new I,F(),X.allowIn=!1,k=Ka({inFor:!0}),X.allowIn=q,1===k.length&&ma("in")?(h=h.finishVariableDeclaration(k),F(),
d=h,e=Da(),h=null):1===k.length&&null===k[0].init&&Z.type===W.Identifier&&"of"===Z.value?(h=h.finishVariableDeclaration(k),F(),d=h,e=oa(),h=null,c=!1):(h=h.finishVariableDeclaration(k),R(";"));else if(k=Z,X.allowIn=!1,h=ca(oa),X.allowIn=q,ma("in"))xa||M(ua.InvalidLHSInForIn),F(),va(h),d=h,e=Da(),h=null;else{if(S(",")){for(h=[h];S(",");)F(),h.push(la(oa));h=(new P(k)).finishSequenceExpression(h)}R(";")}"undefined"===typeof d&&(S(";")||(f=Da()),R(";"),S(")")||(r=Da()));R(")");q=X.inIteration;X.inIteration=
!0;k=la(Xa);X.inIteration=q;return"undefined"===typeof d?b.finishForStatement(h,f,r,k):c?b.finishForInStatement(d,e,k):b.finishForOfStatement(d,e,k);case "function":return bb(b);case "if":return aa("if"),R("("),d=Da(),R(")"),e=Za(!0),ma("else")?(F(),c=Za(!0)):c=null,b.finishIfStatement(d,e,c);case "return":return d=null,aa("return"),X.inFunctionBody||M(ua.IllegalReturn),32===V.charCodeAt(Qa)&&g(V.charCodeAt(Qa+1))?(d=Da(),ha(),b=b.finishReturnStatement(d)):Va?b=b.finishReturnStatement(null):(S(";")||
S("}")||Z.type===W.EOF||(d=Da()),ha(),b=b.finishReturnStatement(d)),b;case "switch":return parseSwitchStatement(b);case "var":return aa("var"),d=Ka({inFor:!1}),ha(),b.finishVariableDeclaration(d)}d=Da();if(d.type===da.Identifier&&S(":"))return F(),c="$"+d.name,Object.prototype.hasOwnProperty.call(X.labelSet,c)&&N(ua.Redeclaration,"Label",d.name),X.labelSet[c]=!0,e=Za(),delete X.labelSet[c],b.finishLabeledStatement(d,e);ha();return b.finishExpressionStatement(d)}function Sa(){var b,c=[],d,e,g,f=new I;
for(R("{");Ia<Aa&&Z.type===W.StringLiteral;){d=Z;b=La();c.push(b);if(b.expression.type!==da.Literal)break;b=V.slice(d.start+1,d.end-1);"use strict"===b?(ta=!0,e&&U(e,ua.StrictOctalLiteral)):!e&&d.octal&&(e=d)}d=X.labelSet;e=X.inIteration;b=X.inSwitch;g=X.inFunctionBody;X.labelSet={};X.inIteration=!1;X.inSwitch=!1;for(X.inFunctionBody=!0;Ia<Aa&&!S("}");)c.push(La());R("}");X.labelSet=d;X.inIteration=e;X.inSwitch=b;X.inFunctionBody=g;return f.finishBlockStatement(c)}function Pa(b,c,d){d="$"+d;ta?Object.prototype.hasOwnProperty.call(b.paramSet,
d)&&(b.stricted=c,b.message=ua.StrictParamDupe):!b.firstRestricted&&Object.prototype.hasOwnProperty.call(b.paramSet,d)&&(b.stricted=c,b.message=ua.StrictParamDupe);b.paramSet[d]=!0}function db(b){var c,d=[],e,g;if("..."===Z.value)return c=new I,F(),S("{")&&N(ua.ObjectPatternAsRestParameter),d.push(Z),d=Ba(),S("\x3d")&&N(ua.DefaultRestParameter),S(")")||N(ua.ParameterAfterRestParameter),c=c.finishRestElement(d),Pa(b,c.argument,c.argument.name),b.params.push(c),b.defaults.push(null),!1;c=ea(d);for(e=
0;e<d.length;e++)Pa(b,d[e],d[e].value);c.type===da.AssignmentPattern&&(g=c.right,c=c.left,++b.defaultCount);b.params.push(c);b.defaults.push(g);return!S(")")}function Ua(b){b={params:[],defaultCount:0,defaults:[],firstRestricted:b};R("(");if(!S(")"))for(b.paramSet={};Ia<Aa&&db(b);)R(",");R(")");0===b.defaultCount&&(b.defaults=[]);return{params:b.params,defaults:b.defaults,stricted:b.stricted,firstRestricted:b.firstRestricted,message:b.message}}function bb(b,c){var d=null,e=[],g=[],f,h,k,r,q;q=X.allowYield;
aa("function");c&&S("(")||(d=Ba());X.allowYield=!0;f=Ua(h);e=f.params;g=f.defaults;c=f.stricted;h=f.firstRestricted;f.message&&(k=f.message);r=ta;f=Sa();ta&&h&&K(h,k);ta&&c&&U(c,k);ta=r;X.allowYield=q;return b.finishFunctionDeclaration(d,e,g,f,void 0)}var W,Wa,hb,da,gb,ua,Ea,V,ta,L,sa,wa,Va,Qa,$a,ab,Ia,eb,Ra,Ya,Aa,Z,X,T,za,xa,Oa;W={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9,Template:10};Wa={};Wa[W.BooleanLiteral]="Boolean";
Wa[W.EOF]="\x3cend\x3e";Wa[W.Identifier]="Identifier";Wa[W.Keyword]="Keyword";Wa[W.NullLiteral]="Null";Wa[W.NumericLiteral]="Numeric";Wa[W.Punctuator]="Punctuator";Wa[W.StringLiteral]="String";Wa[W.RegularExpression]="RegularExpression";Wa[W.Template]="Template";hb="( { [ in typeof instanceof new return case delete throw void \x3d +\x3d -\x3d *\x3d /\x3d %\x3d \x3c\x3c\x3d \x3e\x3e\x3d \x3e\x3e\x3e\x3d \x26\x3d |\x3d ^\x3d , + - * / % ++ -- \x3c\x3c \x3e\x3e \x3e\x3e\x3e \x26 | ^ ! ~ \x26\x26 || ? : \x3d\x3d\x3d \x3d\x3d \x3e\x3d \x3c\x3d \x3c \x3e !\x3d !\x3d\x3d".split(" ");
da={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",
FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator"};
gb={ArrowParameterPlaceHolder:"ArrowParameterPlaceHolder"};ua={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",
InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",
StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",
StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",DefaultRestParameter:"Unexpected token \x3d",
ObjectPatternAsRestParameter:"Unexpected token {",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ConstructorSpecialMethod:"Class constructor may not be an accessor",DuplicateConstructor:"A class may only have one constructor",StaticPrototype:"Classes may not have static property named prototype",MissingFromClause:"Unexpected token",NoAsAfterImportNamespace:"Unexpected token",InvalidModuleSpecifier:"Unexpected token",IllegalImportDeclaration:"Unexpected token",
IllegalExportDeclaration:"Unexpected token",DuplicateBinding:"Duplicate binding %0"};Ea={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B2\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDE00-\uDE11\uDE13-\uDE2B\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDE00-\uDE2F\uDE44\uDE80-\uDEAA]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF98]|\uD809[\uDC00-\uDC6E]|[\uD80C\uD840-\uD868\uD86A-\uD86C][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D]|\uD87E[\uDC00-\uDE1D]/,
NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B2\u08E4-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58\u0C59\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D60-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA69D\uA69F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2D\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDD0-\uDDDA\uDE00-\uDE11\uDE13-\uDE37\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF01-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF98]|\uD809[\uDC00-\uDC6E]|[\uD80C\uD840-\uD868\uD86A-\uD86C][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};
P.prototype=I.prototype={processComment:function(){var b,c,d,e,g=T.bottomRightStack,f,h,k=g[g.length-1];if(!(this.type===da.Program&&0<this.body.length)){if(this.type===da.BlockStatement&&0===this.body.length){c=[];for(f=T.leadingComments.length-1;0<=f;--f)h=T.leadingComments[f],this.range[1]>=h.range[1]&&(c.unshift(h),T.leadingComments.splice(f,1),T.trailingComments.splice(f,1));if(c.length){this.innerComments=c;return}}if(0<T.trailingComments.length){e=[];for(f=T.trailingComments.length-1;0<=f;--f)h=
T.trailingComments[f],h.range[0]>=this.range[1]&&(e.unshift(h),T.trailingComments.splice(f,1));T.trailingComments=[]}else k&&k.trailingComments&&k.trailingComments[0].range[0]>=this.range[1]&&(e=k.trailingComments,delete k.trailingComments);for(;k&&k.range[0]>=this.range[0];)b=g.pop(),k=g[g.length-1];if(b){if(b.leadingComments){d=[];for(f=b.leadingComments.length-1;0<=f;--f)h=b.leadingComments[f],h.range[1]<=this.range[0]&&(d.unshift(h),b.leadingComments.splice(f,1));b.leadingComments.length||(b.leadingComments=
void 0)}}else if(0<T.leadingComments.length)for(d=[],f=T.leadingComments.length-1;0<=f;--f)h=T.leadingComments[f],h.range[1]<=this.range[0]&&(d.unshift(h),T.leadingComments.splice(f,1));d&&0<d.length&&(this.leadingComments=d);e&&0<e.length&&(this.trailingComments=e);g.push(this)}},finish:function(){T.range&&(this.range[1]=Qa);T.loc&&(this.loc.end={line:$a,column:Qa-ab},T.source&&(this.loc.source=T.source));T.attachComment&&this.processComment()},finishArrayExpression:function(b){this.type=da.ArrayExpression;
this.elements=b;this.finish();return this},finishArrayPattern:function(b){this.type=da.ArrayPattern;this.elements=b;this.finish();return this},finishAssignmentExpression:function(b,c,d){this.type=da.AssignmentExpression;this.operator=b;this.left=c;this.right=d;this.finish();return this},finishAssignmentPattern:function(b,c){this.type=da.AssignmentPattern;this.left=b;this.right=c;this.finish();return this},finishBinaryExpression:function(b,c,d){this.type="||"===b||"\x26\x26"===b?da.LogicalExpression:
da.BinaryExpression;this.operator=b;this.left=c;this.right=d;this.finish();return this},finishBlockStatement:function(b){this.type=da.BlockStatement;this.body=b;this.finish();return this},finishBreakStatement:function(b){this.type=da.BreakStatement;this.label=b;this.finish();return this},finishCallExpression:function(b,c){this.type=da.CallExpression;this.callee=b;this.arguments=c;this.finish();return this},finishConditionalExpression:function(b,c,d){this.type=da.ConditionalExpression;this.test=b;
this.consequent=c;this.alternate=d;this.finish();return this},finishContinueStatement:function(b){this.type=da.ContinueStatement;this.label=b;this.finish();return this},finishEmptyStatement:function(){this.type=da.EmptyStatement;this.finish();return this},finishExpressionStatement:function(b){this.type=da.ExpressionStatement;this.expression=b;this.finish();return this},finishForStatement:function(b,c,d,e){this.type=da.ForStatement;this.init=b;this.test=c;this.update=d;this.body=e;this.finish();return this},
finishForInStatement:function(b,c,d){this.type=da.ForInStatement;this.left=b;this.right=c;this.body=d;this.each=!1;this.finish();return this},finishFunctionDeclaration:function(b,c,d,e,g){this.type=da.FunctionDeclaration;this.id=b;this.params=c;this.defaults=d;this.body=e;this.generator=g;this.expression=!1;this.finish();return this},finishFunctionExpression:function(b,c,d,e,g){this.type=da.FunctionExpression;this.id=b;this.params=c;this.defaults=d;this.body=e;this.generator=g;this.expression=!1;
this.finish();return this},finishIdentifier:function(b){this.type=da.Identifier;this.name=b;this.finish();return this},finishIfStatement:function(b,c,d){this.type=da.IfStatement;this.test=b;this.consequent=c;this.alternate=d;this.finish();return this},finishLiteral:function(b){this.type=da.Literal;this.value=b.value;this.raw=V.slice(b.start,b.end);b.regex&&(this.regex=b.regex);this.finish();return this},finishMemberExpression:function(b,c,d){this.type=da.MemberExpression;this.computed="["===b;this.object=
c;this.property=d;this.finish();return this},finishObjectExpression:function(b){this.type=da.ObjectExpression;this.properties=b;this.finish();return this},finishObjectPattern:function(b){this.type=da.ObjectPattern;this.properties=b;this.finish();return this},finishPostfixExpression:function(b,c){this.type=da.UpdateExpression;this.operator=b;this.argument=c;this.prefix=!1;this.finish();return this},finishProgram:function(b,c){this.type=da.Program;this.body=b;this.sourceType=c;this.finish();return this},
finishProperty:function(b,c,d,e,g,f){this.type=da.Property;this.key=c;this.computed=d;this.value=e;this.kind=b;this.method=g;this.shorthand=f;this.finish();return this},finishRestElement:function(b){this.type=da.RestElement;this.argument=b;this.finish();return this},finishReturnStatement:function(b){this.type=da.ReturnStatement;this.argument=b;this.finish();return this},finishTemplateElement:function(b,c){this.type=da.TemplateElement;this.value=b;this.tail=c;this.finish();return this},finishTemplateLiteral:function(b,
c){this.type=da.TemplateLiteral;this.quasis=b;this.expressions=c;this.finish();return this},finishUnaryExpression:function(b,c){this.type="++"===b||"--"===b?da.UpdateExpression:da.UnaryExpression;this.operator=b;this.argument=c;this.prefix=!0;this.finish();return this},finishVariableDeclaration:function(b){this.type=da.VariableDeclaration;this.declarations=b;this.kind="var";this.finish();return this},finishLexicalDeclaration:function(b,c){this.type=da.VariableDeclaration;this.declarations=b;this.kind=
c;this.finish();return this},finishVariableDeclarator:function(b,c){this.type=da.VariableDeclarator;this.id=b;this.init=c;this.finish();return this}};m.version="2.7.3";m.tokenize=function(b,c,d){var e,g;e=String;"string"===typeof b||b instanceof String||(b=e(b));V=b;L=0;sa=0<V.length?1:0;wa=0;Ia=L;eb=sa;Ra=wa;Aa=V.length;Z=null;X={allowIn:!0,allowYield:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1,curlyStack:[]};T={};c=c||{};c.tokens=!0;T.tokens=[];T.tokenValues=
[];T.tokenize=!0;T.delegate=d;T.openParenToken=-1;T.openCurlyToken=-1;T.range="boolean"===typeof c.range&&c.range;T.loc="boolean"===typeof c.loc&&c.loc;"boolean"===typeof c.comment&&c.comment&&(T.comments=[]);"boolean"===typeof c.tolerant&&c.tolerant&&(T.errors=[]);try{E();if(Z.type===W.EOF)return T.tokens;for(F();Z.type!==W.EOF;)try{F()}catch(fb){if(T.errors){Q(fb);break}else throw fb;}g=T.tokens;"undefined"!==typeof T.errors&&(g.errors=T.errors)}catch(fb){throw fb;}finally{T={}}return g};m.parse=
function(b,c){var d,e;e=String;"string"===typeof b||b instanceof String||(b=e(b));V=b;L=0;sa=0<V.length?1:0;wa=0;Ia=L;eb=sa;Ra=wa;Aa=V.length;Z=null;X={allowIn:!0,allowYield:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1,curlyStack:[],sourceType:"script"};ta=!1;T={};"undefined"!==typeof c&&(T.range="boolean"===typeof c.range&&c.range,T.loc="boolean"===typeof c.loc&&c.loc,T.attachComment="boolean"===typeof c.attachComment&&c.attachComment,T.loc&&null!==c.source&&void 0!==
c.source&&(T.source=e(c.source)),"boolean"===typeof c.tokens&&c.tokens&&(T.tokens=[]),"boolean"===typeof c.comment&&c.comment&&(T.comments=[]),"boolean"===typeof c.tolerant&&c.tolerant&&(T.errors=[]),T.attachComment&&(T.range=!0,T.comments=[],T.bottomRightStack=[],T.trailingComments=[],T.leadingComments=[]),"module"===c.sourceType&&(X.sourceType=c.sourceType,ta=!0));try{var g;E();g=new I;var f;b=[];for(var h,k,r;Ia<Aa;){h=Z;if(h.type!==W.StringLiteral)break;f=La();b.push(f);if(f.expression.type!==
da.Literal)break;k=V.slice(h.start+1,h.end-1);"use strict"===k?(ta=!0,r&&U(r,ua.StrictOctalLiteral)):!r&&h.octal&&(r=h)}for(;Ia<Aa;){f=La();if("undefined"===typeof f)break;b.push(f)}d=g.finishProgram(b,X.sourceType);"undefined"!==typeof T.comments&&(d.comments=T.comments);if("undefined"!==typeof T.tokens){var q,l,t;g=[];for(q=0;q<T.tokens.length;++q)l=T.tokens[q],t={type:l.type,value:l.value},l.regex&&(t.regex={pattern:l.regex.pattern,flags:l.regex.flags}),T.range&&(t.range=l.range),T.loc&&(t.loc=
l.loc),g.push(t);T.tokens=g;d.tokens=T.tokens}"undefined"!==typeof T.errors&&(d.errors=T.errors)}catch(ob){throw ob;}finally{T={}}return d};m.Syntax=function(){var b,c={};"function"===typeof Object.create&&(c=Object.create(null));for(b in da)da.hasOwnProperty(b)&&(c[b]=da[b]);"function"===typeof Object.freeze&&Object.freeze(c);return c}()})},"esri/moment":function(){define("esri/moment",["require","exports","./plugins/moment!"],function(m,p,f){return f})},"esri/plugins/moment":function(){define("esri/plugins/moment",
["require","exports","dojo/_base/kernel","moment/moment"],function(m,p,f,l){Object.defineProperty(p,"__esModule",{value:!0});var k={ar:1,"ar-dz":1,"ar-kw":1,"ar-ly":1,"ar-ma":1,"ar-sa":1,"ar-tn":1,bs:1,ca:1,cs:1,da:1,de:1,"de-at":1,"de-ch":1,el:1,"en-au":1,"en-ca":1,"en-gb":1,"en-ie":1,"en-il":1,"en-nz":1,es:1,"es-do":1,"es-us":1,et:1,fi:1,fr:1,"fr-ca":1,"fr-ch":1,he:1,hr:1,hu:1,id:1,it:1,"it-ch":1,ja:1,ko:1,lt:1,lv:1,nb:1,nl:1,"nl-be":1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,sl:1,sr:1,"sr-cyrl":1,sv:1,th:1,
tr:1,uk:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1};p.load=function(h,q,g){h=f.locale;var e=h in k;if(!e){var c=h.split("-");1<c.length&&c[0]in k&&(h=c[0],e=!0)}e?q(["moment/locale/"+h],function(){g(l)}):g(l)}})},"esri/arcadeProfiles/visualizationProfile":function(){define("esri/arcadeProfiles/visualizationProfile","dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../promiseList ../support/expressionUtils ./utils".split(" "),function(m,p,f,l,k,h,q){m=new (m(null,{declaredClass:"esri.arcadeProfiles.VisualizationProfile",
initialize:function(g){var e=[];q.hasGeometryOperations(g)&&e.push(h.enableGeometryOperations());return k(e)}}));f("extend-esri")&&p.setObject("arcadeProfiles.visualizationProfile",m,l);return m})},"esri/arcadeProfiles/utils":function(){define("esri/arcadeProfiles/utils",["dojo/_base/lang","dojo/_base/array","dojo/has","../kernel","../support/expressionUtils"],function(m,p,f,l,k){var h=/(\/(MapServer|FeatureServer)).*/ig,q={hasGeometryOperations:function(g){return p.some(g,function(e){return e.hasGeometryOperations?
e.hasGeometryOperations():k.hasGeometryOperations(e)})},hasFeatureSetOperations:function(g){return p.some(g,function(e){return e.hasFeatureSetOperations?e.hasFeatureSetOperations():k.hasFeatureSetOperations(e)})},hasVariables:function(g,e){return p.some(g,function(c){return p.some(e,function(b){return c.hasVariable?c.hasVariable(b):k.hasVariable(c,b)})})},isAsync:function(g){return p.some(g,function(e){return e.async})},getServiceUrl:function(g){return h.test(g)?g.replace(h,"$1"):null}};f("extend-esri")&&
m.setObject("arcadeProfiles.utils",q,l);return q})},"esri/renderers/UniqueValueRenderer":function(){define("esri/renderers/UniqueValueRenderer","dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ../support/expressionUtils".split(" "),function(m,p,f,l,k,h,q,g,e){m=m(g,{declaredClass:"esri.renderer.UniqueValueRenderer",constructor:function(c,b,d,e,g,f){this.values=[];this._symbols={};this.infos=[];c&&!c.declaredClass?(b=c,d=f&&f.geometryType,
this.defaultSymbol=(c=b.defaultSymbol)&&(c.declaredClass?c:q.fromJson(c,f)),this.attributeField=b.field1,this.attributeField2=b.field2,this.attributeField3=b.field3,this.fieldDelimiter=b.fieldDelimiter,this.defaultLabel=b.defaultLabel,this.setValueExpression(b.valueExpression),this.valueExpressionTitle=b.valueExpressionTitle,this.legendOptions=b.legendOptions,b.backgroundFillSymbol&&(this.backgroundFillSymbol=q.fromJson(b.backgroundFillSymbol,d?{geometryType:"esriGeometryPolygon"}:null)),"esriGeometryPolygon"===
d&&this.hasVisualVariables("sizeInfo",!1)&&(f={geometryType:"esriGeometryPoint"}),p.forEach(b.uniqueValueInfos,function(b){this._addValueInfo(b,f)},this)):(this.defaultSymbol=c,this.attributeField=b,this.attributeField2=d,this.attributeField3=e,this.fieldDelimiter=g);this._multiple=!!this.attributeField2},addValue:function(c,b){c=f.isObject(c)?c:{value:c,symbol:b};this._addValueInfo(c)},removeValue:function(c){var b=p.indexOf(this.values,c);-1!==b&&(this.values.splice(b,1),this._hasNullKeyword=this._evalNullKeyword(this.values),
delete this._symbols[c],this.infos.splice(b,1))},getUniqueValueInfo:function(c){var b=this.attributeField,d=c.attributes;if(this.valueExpression)b=this._getDataValue(c,this._uvInfo,null,this._cache.uvInfo),b=this._normalizeNullValue(b);else if(this._multiple){c=this.attributeField2;var e=this.attributeField3,g=[];b&&g.push(this._normalizeNullValue(d[b]));c&&g.push(this._normalizeNullValue(d[c]));e&&g.push(this._normalizeNullValue(d[e]));b=g.join(this.fieldDelimiter||"")}else b=f.isFunction(b)?b(c):
d[b],b=this._normalizeNullValue(b);return this._symbols[b]},setValueExpression:function(c){this.valueExpression=c;this._uvInfo={valueExpression:c};this._cache.uvInfo=this._createCache(this._uvInfo,!0)},getFieldsUsedInExpressions:function(){var c=this.inherited(arguments);this.valueExpression&&(c=c.concat(e.extractFieldNames(this.valueExpression)));c.sort();return p.filter(c,function(b,d){return 0===d||c[d-1]!==b})},getSymbol:function(c){return(c=this.getUniqueValueInfo(c))&&c.symbol||this.defaultSymbol},
_addValueInfo:function(c,b){var d=c.value;this.values.push(d);this._hasNullKeyword=this._evalNullKeyword(this.values);this.infos.push(c);var e=c.symbol;e&&!e.declaredClass&&(c.symbol=q.fromJson(e,b));this._symbols[d]=c},_nullCode:"\x3cNull\x3e",_normalizeNullValue:function(c){return this._hasNullKeyword&&null==c?this._nullCode:c},_evalNullKeyword:function(c){var b=this.fieldDelimiter||"",d=new RegExp("(^|"+b+")("+this._nullCode+")("+b+"|$)");return p.some(c,function(b){return d.test(b)})},toJson:function(){var c=
h.fixJson,b;b={type:"uniqueValue",field1:this.attributeField,field2:this.attributeField2,field3:this.attributeField3,fieldDelimiter:this.fieldDelimiter,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:f.clone(this.legendOptions),defaultSymbol:this.defaultSymbol&&this.defaultSymbol.toJson(),defaultLabel:this.defaultLabel,uniqueValueInfos:p.map(this.infos||[],function(b){b=f.mixin({},b);b.symbol=b.symbol&&b.symbol.toJson();b.value+="";return c(b)})};
this.backgroundFillSymbol&&(b.backgroundFillSymbol=this.backgroundFillSymbol.toJson());b=f.mixin(this.inherited(arguments),b);return c(b)}});l("extend-esri")&&f.setObject("renderer.UniqueValueRenderer",m,k);return m})},"esri/renderers/ClassBreaksRenderer":function(){define("esri/renderers/ClassBreaksRenderer","dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ../support/expressionUtils".split(" "),function(m,p,f,l,k,h,q,g,e){m=m(g,{declaredClass:"esri.renderer.ClassBreaksRenderer",
constructor:function(c,b,d){this.breaks=[];this._symbols={};this.infos=[];this.isMaxInclusive=!0;if(c&&!c.declaredClass){var e=c;b=d&&d.geometryType;this.attributeField=e.field;this.setValueExpression(e.valueExpression);this.valueExpressionTitle=e.valueExpressionTitle;this.legendOptions=e.legendOptions;this.defaultSymbol=(c=e.defaultSymbol)&&(c.declaredClass?c:q.fromJson(c,d));this.backgroundFillSymbol=(c=e.backgroundFillSymbol)&&(c.declaredClass?c:q.fromJson(c,b?{geometryType:"esriGeometryPolygon"}:
null));this._copy(["defaultLabel","classificationMethod:rest","normalizationType:rest","normalizationField","normalizationTotal"],e,this);var g=e.minValue;(c=e.classBreakInfos)&&c[0]&&h.isDefined(c[0].classMaxValue)&&p.forEach(c,function(b){var c=b.classMaxValue;b.minValue=g;g=b.maxValue=c},this);"esriGeometryPolygon"===b&&(this.hasVisualVariables("sizeInfo",!1)||q.isPointSymbol(q.getFirstSupportedSymbol(p.map(c,function(b){return b.symbol}))))&&(d={geometryType:"esriGeometryPoint"});p.forEach(c,
function(b){this._addBreakInfo(b,d)},this)}else this.defaultSymbol=c,this.attributeField=b},addBreak:function(c,b,d){c=f.isObject(c)?c:{minValue:c,maxValue:b,symbol:d};this._addBreakInfo(c)},removeBreak:function(c,b){var d,e=this.breaks,g,f=e.length,h=this._symbols;for(g=0;g<f;g++)if(d=e[g],d[0]==c&&d[1]==b){e.splice(g,1);delete h[c+"-"+b];this.infos.splice(g,1);break}},clearBreaks:function(){this.breaks=[];this._symbols={};this.infos=[]},getBreakIndex:function(c){var b=this.attributeField,d=c.attributes,
e=this.breaks,g=e.length,h=this.isMaxInclusive;if(this.valueExpression)c=this._getDataValue(c,this._cbInfo,null,this._cache.cbInfo);else if(f.isFunction(b))c=b(c);else{c=parseFloat(d[b]);var b=this.normalizationType,k;if(b)if(k=parseFloat(this.normalizationTotal),d=parseFloat(d[this.normalizationField]),"log"===b)c=Math.log(c)*Math.LOG10E;else if("percent-of-total"===b&&!isNaN(k))c=c/k*100;else if("field"===b){if(isNaN(c)||isNaN(d))return-1;c/=d}}if(null!=c&&!isNaN(c)&&"number"===typeof c)for(d=0;d<
g;d++)if(b=e[d],b[0]<=c&&(h?c<=b[1]:c<b[1]))return d;return-1},getBreakInfo:function(c){c=this.getBreakIndex(c);return-1!==c?this.infos[c]:null},getSymbol:function(c){return(c=this.breaks[this.getBreakIndex(c)])?this._symbols[c[0]+"-"+c[1]]:this.defaultSymbol},setMaxInclusive:function(c){this.isMaxInclusive=c},setValueExpression:function(c){this.valueExpression=c;this._cbInfo={valueExpression:c};this._cache.cbInfo=this._createCache(this._cbInfo)},getFieldsUsedInExpressions:function(){var c=this.inherited(arguments);
this.valueExpression&&(c=c.concat(e.extractFieldNames(this.valueExpression)));c.sort();return p.filter(c,function(b,d){return 0===d||c[d-1]!==b})},isContinuousRenderer:function(){var c=!1;if(this.infos&&1===this.infos.length)var b=this.attributeField,d=this.normalizationField,e=this.valueExpression,c=this.getVisualVariablesForType("colorInfo",!1)||[],g=this.getVisualVariablesForType("sizeInfo",!1)||[],f=this.getVisualVariablesForType("opacityInfo",!1)||[],c=c.concat(g).concat(f),c=p.some(c,function(c){return(c.field===
b||c.valueExpression===e)&&c.normalizationField==d});return c},_normalizationTypeEnums:[["field","esriNormalizeByField"],["log","esriNormalizeByLog"],["percent-of-total","esriNormalizeByPercentOfTotal"]],_classificationMethodEnums:[["natural-breaks","esriClassifyNaturalBreaks"],["equal-interval","esriClassifyEqualInterval"],["quantile","esriClassifyQuantile"],["standard-deviation","esriClassifyStandardDeviation"],["geometrical-interval","esriClassifyGeometricalInterval"],["defined-interval","esriClassifyDefinedInterval"]],
_copy:function(c,b,d){p.forEach(c,function(c){var e=c.split(":"),g,f,h;1<e.length&&(c=e[0],g=this["_"+c+"Enums"],"rest"===e[1]?(f="1",h="0"):"sdk"===e[1]&&(f="0",h="1"));e=b[c];if(void 0!==e&&(d[c]=e,g&&f)){var k,r=g.length;for(k=0;k<r;k++)if(g[k][f]===e){d[c]=g[k][h];break}}},this)},_addBreakInfo:function(c,b){var d=c.minValue,e=c.maxValue;this.breaks.push([d,e]);this.infos.push(c);var g=c.symbol;g&&!g.declaredClass&&(c.symbol=q.fromJson(g,b));this._symbols[d+"-"+e]=c.symbol},toJson:function(){var c=
this.infos||[],b=h.fixJson,d=c[0]&&c[0].minValue,e=this.backgroundFillSymbol,c=f.mixin(this.inherited(arguments),{type:"classBreaks",field:this.attributeField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:f.clone(this.legendOptions),defaultSymbol:this.defaultSymbol&&this.defaultSymbol.toJson(),backgroundFillSymbol:e&&e.toJson(),minValue:-Infinity===d?-Number.MAX_VALUE:d,classBreakInfos:p.map(c,function(c){c=f.mixin({},c);c.symbol=c.symbol&&c.symbol.toJson();
c.classMaxValue=Infinity===c.maxValue?Number.MAX_VALUE:c.maxValue;delete c.minValue;delete c.maxValue;return b(c)})});this._copy(["defaultLabel","classificationMethod:sdk","normalizationType:sdk","normalizationField","normalizationTotal"],this,c);c.hasOwnProperty("normalizationType")&&!c.normalizationType&&delete c.normalizationType;c.hasOwnProperty("classificationMethod")&&!c.classificationMethod&&delete c.classificationMethod;return b(c)}});l("extend-esri")&&f.setObject("renderer.ClassBreaksRenderer",
m,k);return m})},"esri/renderers/VectorFieldRenderer":function(){define("esri/renderers/VectorFieldRenderer","dojo/_base/declare dojo/_base/lang dojo/has dojo/_base/array ../kernel ../lang ../Color ./Renderer ./ClassBreaksRenderer ../symbols/SimpleMarkerSymbol ../symbols/PictureMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/jsonUtils require".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d,r,v){var u=m(g,{declaredClass:"esri.renderer.VectorFieldRenderer",iconFolderPath:"../images/symbol/sfs/",constructor:function(b){h.isDefined(b)||
(b={});b.attributeField=b.attributeField||"Magnitude";b.rotationInfo=b.rotationInfo||this._getRotationInfo(b);m.safeMixin(this,b);this.setRotationInfo(this.rotationInfo);this.style=this.style||u.STYLE_SINGLE_ARROW;this.singleArrowSymbol&&(this.singleArrowSymbol=this.singleArrowSymbol.declaredClass?this.singleArrowSymbol:r.fromJson(this.singleArrowSymbol));this.renderer=new e(this._getDefaultSymbol(),b.attributeField);this._updateRenderer(this.style);this.flowRepresentation=this.flowRepresentation||
this.FLOW_FROM},getSymbol:function(b){return this.renderer&&this.renderer.getSymbol(b)},setVisualVariables:function(b){b=l.filter(b,function(b){if("sizeInfo"===b.type)return h.isDefined(this._updateSizeInfo(b))},this);this.inherited(arguments);return this},setSizeInfo:function(b){this._updateSizeInfo(b);this.inherited(arguments);return this},setProportionalSymbolInfo:function(b){this.setSizeInfo(b);return this},setColorInfo:function(b){return this},_updateRenderer:function(b){return h.isDefined(this.renderer)?
b===u.STYLE_SINGLE_ARROW?this._createSingleArrowRenderer():b===u.STYLE_BEAUFORT_KN?this._createBeaufortKnotsRenderer():b===u.STYLE_BEAUFORT_METER?this._createBeaufortMeterRenderer():b===u.STYLE_BEAUFORT_FEET?this._createBeaufortFeetRenderer():b===u.STYLE_BEAUFORT_MILE?this._createBeaufortMilesRenderer():b===u.STYLE_BEAUFORT_KM?this._createBeaufortKilometersRenderer():b===u.STYLE_OCEAN_CURRENT_M?this._createCurrentMeterRenderer():b===u.STYLE_OCEAN_CURRENT_KN?this._createCurrentKnotsRenderer():b===
u.STYLE_SCALAR?this._createSimpleScalarRenderer():b===u.STYLE_WIND_BARBS?this._createWindBarbsRenderer():this._createClassifiedArrowRenderer():Error("Invalid Renderer!")},_updateSizeInfo:function(b){return b&&h.isDefined(b.minSize)&&h.isDefined(b.maxSize)&&h.isDefined(b.minDataValue)&&h.isDefined(b.maxDataValue)?(this.style===u.STYLE_WIND_BARBS&&(b.minSize=b.maxSize),b.field=b.field||"Magnitude",b.type="sizeInfo",this.minDataValue=b.minDataValue,this.maxDataValue=b.maxDataValue,b):null},_createClassifiedArrowRenderer:function(){this.renderer.defaultSymbol=
this._getDefaultSymbol(new q([56,168,0]));var b=[0,1E-6,3.5,7,10.5,14];if(h.isDefined(this.minDataValue)&&h.isDefined(this.maxDataValue)){var c=(this.maxDataValue-this.minDataValue)/5,b=[],d,e;e=this.minDataValue;for(d=0;6>d;d++)b[d]=e,e+=c}this._addBreaks(b,[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]])},_createSingleArrowRenderer:function(){this.renderer.defaultSymbol=this.singleArrowSymbol||this._getDefaultSymbol()},_createBeaufortMeterRenderer:function(){this.renderer.defaultSymbol=
this._getDefaultSymbol(new q([214,47,39]));this._addBreaks([0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createBeaufortKnotsRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new q([214,47,39]));this._addBreaks([0,1,3,6,10,16,21,27,33,40,47,55,63],[[40,146,199],[89,162,186],[129,179,171],[160,194,155],
[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]])},_createBeaufortFeetRenderer:function(){var b=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];l.forEach(b,function(c,d){b[d]*=3.28084});this.renderer.defaultSymbol=this._getDefaultSymbol(new q([214,47,39]));this._addBreaks(b,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,
21]])},_createBeaufortMilesRenderer:function(){var b=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];l.forEach(b,function(c,d){b[d]*=2.23694});this.renderer.defaultSymbol=this._getDefaultSymbol(new q([214,47,39]));this._addBreaks(b,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createBeaufortKilometersRenderer:function(){var b=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,
28.6,32.7];l.forEach(b,function(c,d){b[d]*=3.6});this.renderer.defaultSymbol=this._getDefaultSymbol(new q([214,47,39]));this._addBreaks(b,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createCurrentMeterRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new q([177,177,177]));this._addBreaks([0,.5,1,1.5,2],[[78,26,153],[179,27,26],[202,128,26],[177,177,177]])},
_createCurrentKnotsRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new q([177,177,177]));this._addBreaks([0,.25,.5,1,1.5,2,2.5,3,3.5,4],[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]])},_createSimpleScalarRenderer:function(){this.renderer.defaultSymbol=new b({url:v.toUrl(this.iconFolderPath+"scalar.png"),height:20,width:20,type:"esriPMS",angle:0})},_createWindBarbsRenderer:function(){var e=[],g,f;for(g=0;150>=g;g+=
5)e.push(g);f="M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20;M25 0 L25 40 M25 35 L17.5 37.5;M25 0 L25 40 L10 45 L25 40;M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35;M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L10 15;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L10 15 M25 10 M25 5 L17.5 7.5".split(";");
var h=new b({url:v.toUrl(this.iconFolderPath+"windbarb.png"),height:20,width:20,type:"esriPMS",angle:0});this.renderer.defaultSymbol=h;for(g=0;g<e.length-1;g++)0===g?this.renderer.addBreak({minValue:e[g],maxValue:e[g+1],symbol:h}):this.renderer.addBreak({minValue:e[g],maxValue:e[g+1],symbol:(new c).setPath(f[g]).setOutline((new d).setWidth(1.5)).setSize(20).setColor(new q([0,0,0,255]))})},_getDefaultSymbol:function(b){return(new c).setPath("M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z").setOutline((new d).setWidth(0)).setSize(20).setColor(b||
new q([0,92,230]))},_getRotationInfo:function(b){var c=b&&b.flowRepresentation||u.FLOW_FROM,d=b&&b.rotationField||"Direction",e=u.FLOW_FROM;return{field:function(b){b=b.attributes[d];return c===e?b:b+180},type:"geographic"}},_addBreaks:function(b,c){if(!h.isDefined(this.renderer))return Error("Invalid Renderer!");if(!(b&&c&&b.length&&c.length&&b.length>=c.length))return Error("AddBreaks: Input arguments break values and colors not valid");var d;for(d=0;d<c.length;d++)this.renderer.addBreak({minValue:b[d],
maxValue:b[d+1],symbol:this._getDefaultSymbol(new q(c[d]))})},toJson:function(){var b=p.mixin(this.inherited(arguments),{type:"vectorField",style:this.style,attributeField:this.attributeField,flowRepresentation:this.flowRepresentation,inputUnit:this.inputUnit,outputUnit:this.outputUnit});this.renderer&&this.renderer.defaultSymbol&&this.style===u.STYLE_SINGLE_ARROW&&(b.singleArrowSymbol=this.renderer.defaultSymbol.toJson());return h.fixJson(b)}});p.mixin(u,{STYLE_WIND_BARBS:"wind_speed",STYLE_SINGLE_ARROW:"single_arrow",
STYLE_CLASSIFIED_ARROW:"classified_arrow",STYLE_BEAUFORT_KN:"beaufort_kn",STYLE_BEAUFORT_METER:"beaufort_m",STYLE_BEAUFORT_MILE:"beaufort_mi",STYLE_BEAUFORT_FEET:"beaufort_ft",STYLE_BEAUFORT_KM:"beaufort_km",STYLE_OCEAN_CURRENT_M:"ocean_current_m",STYLE_OCEAN_CURRENT_KN:"ocean_current_kn",STYLE_SCALAR:"simple_scalar"},{FLOW_FROM:"flow_from",FLOW_TO:"flow_to"});f("extend-esri")&&p.setObject("renderer.VectorFieldRenderer",u,k);return u})},"esri/renderers/DotDensityRenderer":function(){define("esri/renderers/DotDensityRenderer",
"dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/has dojox/gfx/_base ../kernel ../lang ../Color ./Renderer ../symbols/PictureFillSymbol ../geometry/ScreenPoint ../geometry/Point".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d,r){m=m(c,{declaredClass:"esri.renderer.DotDensityRenderer",constructor:function(b){this.dotSize=b.dotSize||3;this.dotValue=b.dotValue;this.fields=b.fields;this.outline=b.outline;this.backgroundColor=b.backgroundColor;this.exactCount=b.exactCount||!0;
this.dotShape=b.dotShape||"square";this.legendOptions=b.legendOptions;this._exactCountMinArea=1E4;this._currentMapScale=this._map=this._canvas=null;this._symbolMap={};this._currentGraphic=this._currentResolution=this._objectIdField=null;this._supportsCanvas=window.CanvasRenderingContext2D?!0:!1},getSymbol:function(c){var d,e;this._currentGraphic=c;if(!this._supportsCanvas)return null;this._map||(this._map=c.getLayer()._map,this._objectIdField=c.getLayer().objectIdField,this._currentMapScale=this._map.getScale(),
this._currentResolution=this._map.extent.getWidth()/this._map.width,this._map.on("zoom-end",p.hitch(this,function(b){this._currentMapScale=this._map.getScale();this._currentResolution=b.extent.getWidth()/this._map.width;this._symbolMap[this._currentMapScale]={}})));if(this._symbolMap[this._currentMapScale]&&this._symbolMap[this._currentMapScale][c.attributes[this._objectIdField]])return d=this._symbolMap[this._currentMapScale][c.attributes[this._objectIdField]],e=this._getShapeProperties(c),d.setOffset(e.dx,
e.dy),d;d=this._generateFieldsCount(this.fields,c.attributes,this.dotValue);e=this._getShapeProperties(c);if(!e.width||!e.height)return null;d=new b(this._generateImageSrc(e.width,e.height,d,e.minXY,e.maxXY),this.outline,e.width,e.height);d.setOffset(e.dx,e.dy);this._symbolMap[this._currentMapScale]||(this._symbolMap[this._currentMapScale]={});return this._symbolMap[this._currentMapScale][c.attributes[this._objectIdField]]=d},_generateFieldsCount:function(b,c,d){var e,g;for(g=b.length-1;0<=g;g--)e=
c[b[g].name]/d,b[g].numPoints=Math.round(e);return b},_getShapeProperties:function(b){var c,d,e,g;c=b.geometry.getExtent();c.contains(this._map.extent)&&(c=this._map.extent);e=Math.ceil(c.getWidth()/this._currentResolution);g=Math.ceil(c.getHeight()/this._currentResolution);d=this._map.toScreen(new r(c.xmin,c.ymin,c.spatialReference));c=this._map.toScreen(new r(c.xmax,c.ymax,c.spatialReference));b=b.getLayer().getNavigationTransform();return{minXY:d,maxXY:c,dx:(d.x-b.dx)%e,dy:(c.y-b.dy)%g,width:e,
height:g}},_generateImageSrc:function(b,c,d,e,g,f){var h=this.dotSize,k,r,q;this._canvas?(this._canvas.width=b,this._canvas.height=c):this._canvas=this._initCanvas(b,c);k=this._canvas.getContext("2d");if(f=f||this.backgroundColor)k.fillStyle=f.toCss(!0),k.fillRect(0,0,b,c),k.fill();for(f=d.length-1;0<=f;f--)for(k.fillStyle=d[f].color.toCss(!0),r=d[f].numPoints-1;0<=r;r--)q=this._getRandomPoint(b,c,e,g),"square"===this.dotShape?k.fillRect(q.x,q.y,h,h):"circle"===this.dotShape&&(k.beginPath(),k.arc(q.x,
q.y,h/2,0,2*Math.PI,!0)),k.fill();return this._canvas.toDataURL()},_initCanvas:function(b,c){b=l.create("canvas",{id:"canvas",width:b+"px",height:c+"px",style:"position: absolute; left: -10000px; top: 0px;"},null);document.body.appendChild(b);return b},_getRandomInt:function(b,c){return Math.floor(Math.random()*(c-b+1)+b)},_getRandomPoint:function(b,c,e,g){var f={},h=this.outline&&this.outline.width?this.outline.width:0;if(!0===this.exactCount&&b*c>this._exactCountMinArea){b=!1;do f.x=this._getRandomInt(e.x,
g.x),f.y=this._getRandomInt(g.y,e.y),b=new d(f.x,f.y),b=this._checkPointShapeBounds(b,this.dotSize+h,this._currentGraphic.geometry),!0===b&&(f.x-=e.x,f.y-=g.y);while(!1===b)}else f.x=this._getRandomInt(0,b),f.y=this._getRandomInt(0,c);return f},_checkPointShapeBounds:function(b,c,d){var e=null,e=!1,g=!0,f=0;do{switch(f){case 1:b.x+=c;break;case 2:b.y+=c;break;case 3:b.x-=c}e=this._map.toMap(b);e=d.contains(e);!1===e&&(g=!1);f+=1}while(3>=f&&!0===g);return e},setDotSize:function(b){0<b&&(this.dotSize=
b)},setDotValue:function(b){0<b&&(this.dotValue=b)},setOutline:function(b){this.outline=b},setBackgroundColor:function(b){this.backgroundColor=b},toJson:function(){var b=p.mixin(this.inherited(arguments),{type:"dotDensity",backgroundColor:e.toJsonColor(this.backgroundColor),dotShape:this.dotShape,dotSize:0<this.dotSize?h.px2pt(this.dotSize):0,dotValue:this.dotValue,fields:f.map(this.fields,function(b){return g.fixJson({color:e.toJsonColor(b.color),name:b.name})}),legendOptions:this.legendOptions&&
g.fixJson({backgroundColor:e.toJsonColor(this.legendOptions.backgroundColor),dotCoverage:this.legendOptions.dotCoverage,outline:this.legendOptions.outline&&this.legendOptions.outline.toJson(),valueUnit:this.legendOptions.valueUnit}),outline:this.outline&&this.outline.toJson()});return g.fixJson(b)}});k("extend-esri")&&p.setObject("renderer.DotDensityRenderer",m,q);return m})},"esri/renderers/ScaleDependentRenderer":function(){define("esri/renderers/ScaleDependentRenderer","dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ./Renderer".split(" "),
function(m,p,f,l,k,h,q){m=m(q,{declaredClass:"esri.renderer.ScaleDependentRenderer",constructor:function(g){this.setRendererInfos(g&&g.rendererInfos||[])},setRendererInfos:function(g){this.rendererInfos=g;this._setRangeType();return this},getSymbol:function(g){var e=this.getRendererInfo(g);return e&&e.renderer&&e.renderer.getSymbol(g)},getRendererInfo:function(g){g=g.getLayer().getMap();return"zoom"===this.rangeType?this.getRendererInfoByZoom(g.getZoom()):this.getRendererInfoByScale(g.getScale())},
getRendererInfoByZoom:function(g){var e,c=this.rendererInfos,b,d=0;do e=c[d],g>=e.minZoom&&g<=e.maxZoom&&(b=e),d++;while(!b&&d<c.length);return b},getRendererInfoByScale:function(g){var e,c=this.rendererInfos,b,d=0,f,h,k,q;do e=c[d],f=e.minScale,h=e.maxScale,k=!f,q=!h,!k&&g<=f&&(k=!0),!q&&g>=h&&(q=!0),k&&q&&(b=e),d++;while(!b&&d<c.length);return b},addRendererInfo:function(g){var e,c=0,b,d=this.rendererInfos,f=g.hasOwnProperty("minZoom")?"minZoom":"minScale",h=d.length;do{b=d[c];if(h===c||g[f]<b[f])d.splice(c,
0,g),this._setRangeType(),e=!0;c++}while(!e&&c<h);return this},_setRangeType:function(){var g=this.rendererInfos;if(g=g&&g[0])this.rangeType=g.hasOwnProperty("minZoom")?"zoom":g.hasOwnProperty("minScale")?"scale":""},toJson:function(){if("zoom"===this.rangeType)return null;var g=this.rendererInfos||[],e=g[0]&&g[0].minScale,g=f.mixin(this.inherited(arguments),{type:"scaleDependent",minScale:0<e?e:0,rendererInfos:p.map(g,function(c){return h.fixJson({maxScale:0<c.maxScale?c.maxScale:0,renderer:c.renderer&&
c.renderer.toJson()})})});return h.fixJson(g)}});l("extend-esri")&&f.setObject("renderer.ScaleDependentRenderer",m,k);return m})},"esri/renderers/TimeClassBreaksAger":function(){define("esri/renderers/TimeClassBreaksAger","dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has dojo/date ../kernel ../lang ../symbols/jsonUtils ../Color ./SymbolAger".split(" "),function(m,p,f,l,k,h,q,g,e,c){var b=m(c,{declaredClass:"esri.renderer.TimeClassBreaksAger",constructor:function(b,c){this.infos=b;this.timeUnits=
c||"day";b.sort(function(b,c){return b.minAge<c.minAge?-1:b.minAge>c.minAge?1:0})},getAgedSymbol:function(b,c){var d=c.getLayer();c=c.attributes;var e=q.isDefined;b=g.fromJson(b.toJson());var f=d._map.timeExtent.endTime;if(!f)return b;var h=k.difference(new Date(c[d._startTimeField]),f,this.timeUnits);p.some(this.infos,function(c){if(h>=c.minAge&&h<=c.maxAge){var d=c.color,g=c.size;c=c.alpha;d&&b.setColor(d);e(g)&&this._setSymbolSize(b,g);e(c)&&b.color&&(b.color.a=c);return!0}},this);return b},toJson:function(){var b=
{agerClassBreakInfos:[]},c,g,f;b.timeUnits=this._getRestUnits(this.timeUnits);for(c=0;c<this.infos.length;c+=1)g=this.infos[c],f={},f.oldestAge=Infinity===g.maxAge?null:g.maxAge,f.size=g.size,g.color&&(f.color=e.toJsonColor(g.color)),g.alpha&&(f.alpha=Math.round(255*g.alpha)),b.agerClassBreakInfos[c]=f;return b},_getRestUnits:function(c){var d="esriTimeUnitsDays";switch(c){case b.UNIT_SECONDS:d="esriTimeUnitsSeconds";break;case b.UNIT_MILLISECONDS:d="esriTimeUnitsMilliseconds";break;case b.UNIT_HOURS:d=
"esriTimeUnitsHours";break;case b.UNIT_MINUTES:d="esriTimeUnitsMinutes";break;case b.UNIT_MONTHS:d="esriTimeUnitsMonths";break;case b.UNIT_WEEKS:d="esriTimeUnitsWeeks";break;case b.UNIT_YEARS:d="esriTimeUnitsYears"}return d}});f.mixin(b,{UNIT_DAYS:"day",UNIT_HOURS:"hour",UNIT_MILLISECONDS:"millisecond",UNIT_MINUTES:"minute",UNIT_MONTHS:"month",UNIT_SECONDS:"second",UNIT_WEEKS:"week",UNIT_YEARS:"year"});l("extend-esri")&&f.setObject("renderer.TimeClassBreaksAger",b,h);return b})},"esri/renderers/SymbolAger":function(){define("esri/renderers/SymbolAger",
["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(m,p,f,l){m=m(null,{declaredClass:"esri.renderer.SymbolAger",getAgedSymbol:function(f,h){},_setSymbolSize:function(f,h){switch(f.type){case "simplemarkersymbol":f.setSize(h);break;case "picturemarkersymbol":f.setWidth(h);f.setHeight(h);break;case "simplelinesymbol":case "cartographiclinesymbol":f.setWidth(h);break;case "simplefillsymbol":case "picturefillsymbol":f.outline&&f.outline.setWidth(h)}}});f("extend-esri")&&p.setObject("renderer.SymbolAger",
m,l);return m})},"esri/renderers/TimeRampAger":function(){define("esri/renderers/TimeRampAger","dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has ../kernel ../symbols/jsonUtils ../Color ./SymbolAger".split(" "),function(m,p,f,l,k,h,q,g){m=m(g,{declaredClass:"esri.renderer.TimeRampAger",constructor:function(e,c,b){this.colorRange=e;this.sizeRange=c;this.alphaRange=b},getAgedSymbol:function(e,c){var b=c.getLayer(),d=c.attributes;e=h.fromJson(e.toJson());var g=b._map.timeExtent;c=g.startTime;
g=g.endTime;if(!c||!g)return e;c=c.getTime();g=g.getTime();b=new Date(d[b._startTimeField]);b=b.getTime();b<c&&(b=c);b=g===c?1:(b-c)/(g-c);if(c=this.sizeRange)d=c[0],g=c[1],c=Math.abs(g-d)*b,this._setSymbolSize(e,d<g?d+c:d-c);if(c=this.colorRange){var g=c[0],k=c[1],q=Math.round,d=new f,l=g.r,m=k.r;c=Math.abs(m-l)*b;d.r=q(l<m?l+c:l-c);l=g.g;m=k.g;c=Math.abs(m-l)*b;d.g=q(l<m?l+c:l-c);l=g.b;m=k.b;c=Math.abs(m-l)*b;d.b=q(l<m?l+c:l-c);g=g.a;k=k.a;c=Math.abs(k-g)*b;d.a=g<k?g+c:g-c;e.setColor(d)}d=e.color;
(c=this.alphaRange)&&d&&(g=c[0],k=c[1],c=Math.abs(k-g)*b,d.a=g<k?g+c:g-c);return e},toJson:function(){var e={};this.sizeRange&&(e.sizeRange=this.sizeRange);this.colorRange&&(e.colorRange=[q.toJsonColor(this.colorRange[0]),q.toJsonColor(this.colorRange[1])]);this.alphaRange&&(e.alphaRange=[Math.round(255*this.alphaRange[0]),Math.round(255*this.alphaRange[1])]);return e}});l("extend-esri")&&p.setObject("renderer.TimeRampAger",m,k);return m})},"esri/renderers/TemporalRenderer":function(){define("esri/renderers/TemporalRenderer",
["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./Renderer"],function(m,p,f,l,k){m=m(k,{declaredClass:"esri.renderer.TemporalRenderer",constructor:function(f,k,g,e){this.observationRenderer=f;this.latestObservationRenderer=k;this.trackRenderer=g;this.observationAger=e},getSymbol:function(f){var h=f.getLayer(),g=this.getObservationRenderer(f),e=g&&g.getSymbol(f),c=this.observationAger;h.timeInfo&&h._map.timeExtent&&g===this.observationRenderer&&c&&e&&(e=c.getAgedSymbol(e,f));return e},
getObservationRenderer:function(f){return 0===f.getLayer()._getKind(f)?this.observationRenderer:this.latestObservationRenderer||this.observationRenderer},toJson:function(){var f={type:"temporal"};f.observationRenderer=this.observationRenderer.toJson();this.latestObservationRenderer&&(f.latestObservationRenderer=this.latestObservationRenderer.toJson());this.trackRenderer&&(f.trackRenderer=this.trackRenderer.toJson());this.observationAger&&(f.observationAger=this.observationAger.toJson());return f}});
f("extend-esri")&&p.setObject("renderer.TemporalRenderer",m,l);return m})},"esri/renderers/HeatmapRenderer":function(){define("esri/renderers/HeatmapRenderer","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct ../sniff ../kernel ../lang ../symbols/PictureMarkerSymbol ../Color ./Renderer".split(" "),function(m,p,f,l,k,h,q,g,e,c){m=m([c],{declaredClass:"esri.renderer.HeatmapRenderer",colors:null,blurRadius:10,maxPixelIntensity:100,minPixelIntensity:0,field:null,fieldOffset:null,
colorStops:null,constructor:function(b){(this._supportsCanvas=window.CanvasRenderingContext2D?!0:!1)&&("string"==typeof b&&(b=JSON.parse(b)),p.mixin(this,b),this._canvas=null,this.colors||this.colorStops||(this.colorStops=[{ratio:0,color:"rgba(255, 140, 0, 0)"},{ratio:.75,color:"rgba(255, 140, 0, 1)"},{ratio:.9,color:"rgba(255, 0,   0, 1)"}]),this.gradient=this._generateGradient(this.colorStops||this.colors))},getSymbol:function(b){if(!this._supportsCanvas)return!1;var c=b.attributes.imageData;b=
b.attributes.size;if(!b)return null;var e=this._getContext(b[0],b[1]),f=e.getImageData(0,0,b[0],b[1]);window.ArrayBuffer&&c instanceof ArrayBuffer?c=window.Uint8ClampedArray?new Uint8ClampedArray(c):new Uint8Array(c):c.BYTES_PER_ELEMENT&&1!==c.BYTES_PER_ELEMENT&&(c=window.Uint8ClampedArray?new Uint8ClampedArray(c.buffer):new Uint8Array(c.buffer));if(window.CanvasPixelArray&&f.data instanceof window.CanvasPixelArray)for(var h=f.data,k=h.length;k--;)h[k]=c[k];else f.data.set(c);e.putImageData(f,0,0);
return new g(e.canvas.toDataURL(),b[0],b[1])},setColors:function(b){b&&(b instanceof Array||b.colors)&&(this.gradient=this._generateGradient(b.colors||b),this.colors=b);return this},setColorStops:function(b){b&&(b instanceof Array||b.colorStops)&&(this.gradient=this._generateGradient(b.colorStops||b),this.colorStops=b);return this},setMaxPixelIntensity:function(b){this.maxPixelIntensity=b;return this},setMinPixelIntensity:function(b){this.minPixelIntensity=b;return this},setField:function(b){this.field=
b;return this},setFieldOffset:function(b){this.fieldOffset=b;return this},setBlurRadius:function(b){this.blurRadius=b;return this},getStats:function(){},getHistogramData:function(){},toJson:function(){var b=p.mixin(this.inherited(arguments),{type:"heatmap",blurRadius:this.blurRadius,colorStops:this._colorsToStops(this.colorStops||this.colors),maxPixelIntensity:this.maxPixelIntensity,minPixelIntensity:this.minPixelIntensity,field:this.field});null!=this.fieldOffset&&(b.fieldOffset=this.fieldOffset);
f.forEach(b.colorStops,function(b){b.color=e.toJsonColor(b.color)});return q.fixJson(b)},_getContext:function(b,c){this._canvas?(this._canvas.width=b,this._canvas.height=c):this._canvas=this._initCanvas(b,c);return this._canvas.getContext("2d")},_initCanvas:function(b,c){var d=l.create("canvas",{id:"hm_canvas-"+Math.floor(1E3*Math.random()),style:"position: absolute; left: 0px; top: -10000px;"},null);d.width=b;d.height=c;document.body.appendChild(d);return d},_generateGradient:function(b,c){c||(c=
512);b=this._colorsToStops(b);for(var d=this._getContext(1,c||512),e=d.createLinearGradient(0,0,0,c),g=0,f;g<b.length;g++)f=b[g],e.addColorStop(f.ratio,f.color.toCss(!0));d.fillStyle=e;d.fillRect(0,0,1,c);return d.getImageData(0,0,1,c).data},_colorsToStops:function(b){var c=[];if(!b[0])return c;if(null!=b[0].ratio)c=f.map(b,function(b){return{ratio:b.ratio,color:this._toColor(b.color)}},this);else if(null!=b[0].value){var e=Infinity,c=-Infinity,g=0,h;for(h=0;h<b.length;h++){var k=b[h].value;k<e&&
(e=k);k>c&&(c=k)}g=c-e;this.maxPixelIntensity=c;this.minPixelIntensity=e;c=f.map(b,function(b){var c=b.value;b=this._toColor(b.color);return{value:c,ratio:(c-e)/g,color:b}},this)}else var q=b.length-1,c=f.map(b,function(b,c){return{color:this._toColor(b),ratio:c/q}},this);return c},_toColor:function(b){b.toRgba||b.declaredClass||(b=new e(b));return b}});k("extend-esri")&&p.setObject("renderer.HeatmapRenderer",m,h);return m})},"esri/renderers/StretchRenderer":function(){define("esri/renderers/StretchRenderer",
"dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../layers/RasterFunction ./colorRampUtils".split(" "),function(m,p,f,l,k,h,q,g){var e={TYPE_NONE:"none",TYPE_STANDARDDEVIATION:"standardDeviation",TYPE_HISTOGRAMEQUALIZATION:"histogramEqualization",TYPE_MINMAX:"minMax",TYPE_PERCENTCLIP:"percentClip",TYPE_SIGMOID:"sigmoid"};m=m(null,{declaredClass:"esri.renderer.StretchRenderer",constructor:function(c){c=c||{};this.stretchType=e.TYPE_NONE;this.dra=!0;this.statistics=[];
this.gamma=[];this.computeGamma=this.useGamma=!1;this.sigmoidStrengthLevel=this.numberOfStandardDeviations=this.minPercent=this.maxPercent=this.min=this.max=null;f.mixin(this,c);this.colorRamp=g.fromJson(c.colorRamp)},toJson:function(){var c={type:"rasterStretch",stretchType:this.stretchType,colorRamp:this.colorRamp&&this.colorRamp.toJson(),min:this.min,max:this.max,numberOfStandardDeviations:this.numberOfStandardDeviations,statistics:f.clone(this.statistics),dra:this.dra,minPercent:this.minPercent,
maxPercent:this.maxPercent,useGamma:this.useGamma,gamma:f.clone(this.gamma),computeGamma:this.computeGamma,sigmoidStrengthLevel:this.sigmoidStrengthLevel};return h.fixJson(c)},toRenderingRule:function(c){c=c||{};var b=new q;b.functionName="Stretch";var d=this._convertStretchTypeEnumToIndex(this.stretchType),e={StretchType:d,Statistics:this.statistics,DRA:this.dra,UseGamma:this.useGamma,Gamma:this.gamma,ComputeGamma:this.computeGamma};h.isDefined(this.min)&&(e.Min=this.min);h.isDefined(this.min)&&
(e.Max=this.max);3===d?(e.NumberOfStandardDeviations=this.numberOfStandardDeviations,b.outputPixelType="U8"):6===d?(e.MinPercent=parseFloat(this.minPercent),e.MaxPercent=parseFloat(this.maxPercent),b.outputPixelType="U8"):5===d?b.outputPixelType="U8":9===d&&(e.SigmoidStrengthLevel=this.sigmoidStrengthLevel);b.functionArguments=e;b.variableName="Raster";return this.colorRamp?(d=new q,d.functionArguments=c.convertToColormap?{Colormap:g.convertColorRampToColormap(this.colorRamp,256)}:{colorRamp:this.colorRamp.toJson()},
d.variableName="Raster",d.functionName="Colormap",d.functionArguments.Raster=b,d):b},_convertStretchTypeEnumToIndex:function(c){var b=0;c===e.TYPE_STANDARDDEVIATION?b=3:c===e.TYPE_HISTOGRAMEQUALIZATION?b=4:c===e.TYPE_MINMAX?b=5:c===e.TYPE_PERCENTCLIP?b=6:c===e.TYPE_SIGMOID&&(b=9);return b},_convertStretchTypeIndexToEnum:function(c){var b=e.TYPE_NONE;3===c?b=e.TYPE_STANDARDDEVIATION:4===c?b=e.TYPE_HISTOGRAMEQUALIZATION:5===c?b=e.TYPE_MINMAX:6===c?b=e.TYPE_PERCENTCLIP:9===c&&(b=e.TYPE_SIGMOID);return b}});
f.mixin(m,e);l("extend-esri")&&f.setObject("renderer.StretchRenderer",m,k);return m})},"esri/layers/RasterFunction":function(){define("esri/layers/RasterFunction",["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(m,p,f,l,k){var h=m(null,{declaredClass:"esri.layers.RasterFunction",functionName:null,arguments:null,functionArguments:null,variableName:null,outputPixelType:null,_isTemplate:null,_templateJson:null,constructor:function(f){if(p.isObject(f)){this._isRFTJson(f)&&
(this._isTemplate=!0,this._templateJson=f);var g=0;this.functionName=f.rasterFunction||f.name;this.functionArguments=p.clone(f.rasterFunctionArguments||f.arguments);p.mixin(this,f);if(f=this.functionArguments)if(f.Raster=this._toRasterFunction(f.Raster),f.Raster2=this._toRasterFunction(f.Raster2),f.DEM=this._toRasterFunction(f.DEM),f.FillRaster=this._toRasterFunction(f.FillRaster),f.Rasters&&f.Rasters.length)for(g=0;g<f.Rasters.length;g++)f.Rasters[g]=this._toRasterFunction(f.Rasters[g])}},_isRFTJson:function(f){return f.name&&
f.arguments&&f.function&&f.hasOwnProperty("functionType")},_toRasterFunction:function(f){return f&&(f.rasterFunction||f.functionName)?new h(f):f},_rfToJson:function(f){f&&"esri.layers.RasterFunction"===f.declaredClass&&(f=f.toJson());return f},toJson:function(){if(this._isTemplate)return this._templateJson;var f=p.clone(this.functionArguments||this.arguments);if(f&&(f.Raster=this._rfToJson(f.Raster),f.Raster2=this._rfToJson(f.Raster2),f.DEM=this._rfToJson(f.DEM),f.FillRaster=this._rfToJson(f.FillRaster),
f.Rasters&&f.Rasters.length)){var g,e=[];for(g=0;g<f.Rasters.length;g++)e.push(this._rfToJson(f.Rasters[g]));f.Rasters=e}return k.filter({rasterFunction:this.functionName,rasterFunctionArguments:f,variableName:this.variableName,outputPixelType:this.outputPixelType?this.outputPixelType:null},function(c){if(null!==c&&void 0!==c)return!0})}});f("extend-esri")&&p.setObject("layers.RasterFunction",h,l);return h})},"esri/renderers/colorRampUtils":function(){define("esri/renderers/colorRampUtils","dojo/_base/lang dojo/_base/array dojo/store/Memory ../tasks/AlgorithmicColorRamp ../tasks/MultipartColorRamp ../Color ./colorUtils".split(" "),
function(m,p,f,l,k,h,q){function g(b,d,e){if(b){d=d||r;e=e||v;var g=null,f=b.declaredClass,h,k;if((h="string"===typeof b?b:b.name)&&p.some(e,function(b){if(b.name===h)return g=b.id,!0})&&g)return g;"esri.tasks.AlgorithmicColorRamp"===f?p.some(d,function(d){if(c(b.fromColor.toRgb(),d.fromColor)&&c(b.toColor.toRgb(),d.toColor))return g=d.id,!0},this):"esri.tasks.MultipartColorRamp"===f&&p.some(d,function(d){if(b.colorRamps&&d.colorRamps&&b.colorRamps.length===d.colorRamps.length&&(k=b.colorRamps,!p.some(d.colorRamps,
function(b,d){if(!c(k[d].fromColor.toRgb(),b.fromColor)||!c(k[d].toColor.toRgb(),b.toColor))return!0},this))){if(g)return!0;g=d.id}},this);return g}}function e(b){var c=new l,d=b.algorithm;c.fromColor=h.toDojoColor(b.fromColor);c.toColor=h.toDojoColor(b.toColor);d?"esriCIELabAlgorithm"===d?c.algorithm="cie-lab":"esriHSVAlgorithm"===d?c.algorithm="hsv":"esriLabLChAlgorithm"===d&&(c.algorithm="lab-lch"):c.algorithm="hsv";return c}function c(b,c){return b&&c&&b.length&&c.length&&b.length===c.length?
!p.some(b,function(b,d){if(b>c[d]+2||b<c[d]-2)return!0}):!1}function b(b,c,d){b=q.toLAB(b);c=q.toLAB(c);return q.toRGB({l:b.l*(1-d)+d*c.l,a:b.a*(1-d)+d*c.a,b:b.b*(1-d)+d*c.b})}var d={},r=[{id:"none",selected:!0},{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,
253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",
fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficientBias_predefined",fromColor:[214,
214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",
type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,
171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2_predefined",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,
10,10]},{id:"grayLightToDark_predefined",fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orangeBright_predefined",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,
233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],
toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",
colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation_predefined",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,
250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,
12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,
255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,
191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],
toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],
toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,
128,0],toColor:[128,0,0]}]},{id:"whiteToBlack_predefined",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,
245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",fromColor:[215,240,175],toColor:[96,107,45]}],v=[{name:"Aspect",id:"aspect_predefined"},{name:"Black to White",id:"blackToWhite_predefined"},{name:"Blue Bright",id:"blueBright_predefined"},{name:"Blue Light to Dark",id:"blueLightToDark_predefined"},{name:"Blue-Green Bright",id:"blueGreenBright_predefined"},{name:"Blue-Green Light to Dark",id:"blueGreenLightToDark_predefined"},
{name:"Brown Light to Dark",id:"brownLightToDark_predefined"},{name:"Brown to Blue Green Diverging, Bright",id:"brownToBlueGreenDivergingBright_predefined"},{name:"Brown to Blue Green Diverging, Dark",id:"brownToBlueGreenDivergingDark_predefined"},{name:"Coefficient Bias",id:"coefficientBias_predefined"},{name:"Cold to Hot Diverging",id:"coldToHotDiverging_predefined"},{name:"Condition Number",id:"conditionNumber_predefined"},{name:"Cyan to Purple",id:"cyanToPurple_predefined"},{name:"Cyan-Light to Blue-Dark",
id:"cyanLightToBlueDark_predefined"},{name:"Distance",id:"distance_predefined"},{id:"elevation1_predefined",name:"Elevation #1"},{id:"elevation2_predefined",name:"Elevation #2"},{id:"errors_predefined",name:"Errors"},{id:"grayLightToDark_predefined",name:"Gray Light to Dark"},{id:"greenBright_predefined",name:"Green Bright"},{id:"greenLightToDark_predefined",name:"Green Light to Dark"},{name:"Green to Blue",id:"greenToBlue_predefined"},{name:"Orange Bright",id:"orangeBright_predefined"},{name:"Orange Light to Dark",
id:"orangeLightToDark_predefined"},{id:"partialSpectrum_predefined",name:"Partial Spectrum"},{id:"partialSpectrum1Diverging_predefined",name:"Partial Spectrum 1 Diverging",type:"multipart"},{id:"partialSpectrum2Diverging_predefined",name:"Partial Spectrum 2 Diverging"},{name:"Pink to YellowGreen Diverging, Bright",id:"pinkToYellowGreenDivergingBright_predefined"},{name:"Pink to YellowGreen Diverging, Dark",id:"pinkToYellowGreenDivergingDark_predefined"},{id:"precipitation_predefined",name:"Precipitation"},
{id:"prediction_predefined",name:"Prediction"},{name:"Purple Bright",id:"purpleBright_predefined"},{id:"purpleToGreenDivergingBright_predefined",name:"Purple to Green Diverging, Bright"},{id:"purpleToGreenDivergingDark_predefined",name:"Purple to Green Diverging, Dark"},{name:"Purple-Blue Bright",id:"purpleBlueBright_predefined"},{name:"Purple-Blue Light to Dark",id:"purpleBlueLightToDark_predefined"},{name:"Purple-Red Bright",id:"purpleRedBright_predefined"},{name:"Purple-Red Light to Dark",id:"purpleRedLightToDark_predefined"},
{name:"Red Bright",id:"redBright_predefined"},{name:"Red Light to Dark",id:"redLightToDark_predefined"},{id:"redToBlueDivergingBright_predefined",name:"Red to Blue Diverging, Bright"},{id:"redToBlueDivergingDark_predefined",name:"Red to Blue Diverging, Dark"},{id:"redToGreen_predefined",name:"Red to Green"},{id:"redToGreenDivergingBright_predefined",name:"Red to Green Diverging, Bright"},{id:"redToGreenDivergingDark_predefined",name:"Red to Green Diverging, Dark"},{name:"Slope",id:"slope_predefined"},
{id:"spectrumFullBright_predefined",name:"Spectrum-Full Bright"},{id:"spectrumFullDark_predefined",name:"Spectrum-Full Dark"},{id:"spectrumFullLight_predefined",name:"Spectrum-Full Light"},{id:"surface_predefined",name:"Surface"},{id:"temperature_predefined",name:"Temperature"},{name:"White to Black",id:"whiteToBlack_predefined"},{id:"yellowToDarkRed_predefined",name:"Yellow to Dark Red"},{id:"yellowToGreenToDarkBlue_predefined",name:"Yellow to Green to Dark Blue"},{name:"Yellow to Red",id:"yellowToRed_predefined"},
{name:"Yellow-Green Bright",id:"yellowGreenBright_predefined"},{name:"Yellow-Green Light to Dark",id:"yellowGreenLightToDark_predefined"}],u=new f({data:v});m.mixin(d,{predefinedColorRamps:r,predefinedColorRampNameMap:v,getColorRampName:function(b){return(b=g(b))?(b=u.query({id:b}),b[0]?b[0].name:null):null},fromJson:function(b){var c=null;if(!b)return c;"multipart"===b.type?(c=new k,c.colorRamps=p.map(b.colorRamps,function(b){return e(b)},this)):"algorithmic"===b.type&&(c=e(b));return c},colorsEqual:c,
getColorRampId:g,convertColorRampToColormap:function(c,d){if(c&&d){for(var e=c.colorRamps?c.colorRamps.length:1,g=[],f=[],h,k,r,l,t,u=0,m=0,u=0;u<e;u++)g[u]={},g[u].start=m,g[u].end=m+1/e,m=g[u].end;for(u=0;u<d;u++)l=(u+.5)/d,p.forEach(g,function(d,e){l>=d.start&&l<d.end&&(t=(l-d.start)/(d.end-d.start),1<g.length?(h=q.getDojoColor(c.colorRamps[e].fromColor),k=q.getDojoColor(c.colorRamps[e].toColor)):(h=q.getDojoColor(c.fromColor),k=q.getDojoColor(c.toColor)),r=b(h,k,t),f.push([u,r.r,r.g,r.b]))},this);
return f}},interpolateLabColor:b});return d})},"dojo/store/Memory":function(){define("dojo/store/Memory",["../_base/declare","./util/QueryResults","./util/SimpleQueryEngine"],function(m,p,f){return m("dojo.store.Memory",null,{constructor:function(f){for(var k in f)this[k]=f[k];this.setData(this.data||[])},data:null,idProperty:"id",index:null,queryEngine:f,get:function(f){return this.data[this.index[f]]},getIdentity:function(f){return f[this.idProperty]},put:function(f,k){var h=this.data,q=this.index,
g=this.idProperty,g=f[g]=k&&"id"in k?k.id:g in f?f[g]:Math.random();if(g in q){if(k&&!1===k.overwrite)throw Error("Object already exists");h[q[g]]=f}else q[g]=h.push(f)-1;return g},add:function(f,k){(k=k||{}).overwrite=!1;return this.put(f,k)},remove:function(f){var k=this.index,h=this.data;if(f in k)return h.splice(k[f],1),this.setData(h),!0},query:function(f,k){return p(this.queryEngine(f,k)(this.data))},setData:function(f){f.items?(this.idProperty=f.identifier||this.idProperty,f=this.data=f.items):
this.data=f;this.index={};for(var k=0,h=f.length;k<h;k++)this.index[f[k][this.idProperty]]=k}})})},"dojo/store/util/QueryResults":function(){define("dojo/store/util/QueryResults",["../../_base/array","../../_base/lang","../../when"],function(m,p,f){var l=function(k){function h(g){k[g]=function(){var e=arguments,c=f(k,function(b){Array.prototype.unshift.call(e,b);return l(m[g].apply(m,e))});if("forEach"!==g||q)return c}}if(!k)return k;var q=!!k.then;q&&(k=p.delegate(k));h("forEach");h("filter");h("map");
null==k.total&&(k.total=f(k,function(g){return g.length}));return k};p.setObject("dojo.store.util.QueryResults",l);return l})},"dojo/store/util/SimpleQueryEngine":function(){define("dojo/store/util/SimpleQueryEngine",["../../_base/array"],function(m){return function(p,f){function l(h){h=m.filter(h,p);var k=f&&f.sort;k&&h.sort("function"==typeof k?k:function(e,c){for(var b,d=0;b=k[d];d++){var g=e[b.attribute],f=c[b.attribute],g=null!=g?g.valueOf():g,f=null!=f?f.valueOf():f;if(g!=f)return!!b.descending==
(null==g||g>f)?-1:1}return 0});if(f&&(f.start||f.count)){var g=h.length;h=h.slice(f.start||0,(f.start||0)+(f.count||Infinity));h.total=g}return h}switch(typeof p){default:throw Error("Can not query with a "+typeof p);case "object":case "undefined":var k=p;p=function(f){for(var h in k){var g=k[h];if(g&&g.test){if(!g.test(f[h],f))return!1}else if(g!=f[h])return!1}return!0};break;case "string":if(!this[p])throw Error("No filter function "+p+" was found in store");p=this[p];case "function":}l.matches=
p;return l}})},"esri/tasks/AlgorithmicColorRamp":function(){define("esri/tasks/AlgorithmicColorRamp","dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../Color ./ColorRamp".split(" "),function(m,p,f,l,k,h){m=m(h,{declaredClass:"esri.tasks.AlgorithmicColorRamp",type:"algorithmic",fromColor:null,toColor:null,algorithm:null,toJson:function(){var f;switch(this.algorithm&&this.algorithm.toLowerCase()){case "cie-lab":f="esriCIELabAlgorithm";break;case "hsv":f="esriHSVAlgorithm";break;case "lab-lch":f=
"esriLabLChAlgorithm"}f={type:"algorithmic",algorithm:f};f.fromColor=k.toJsonColor(this.fromColor);f.toColor=k.toJsonColor(this.toColor);return f}});f("extend-esri")&&p.setObject("tasks.AlgorithmicColorRamp",m,l);return m})},"esri/tasks/ColorRamp":function(){define("esri/tasks/ColorRamp",["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(m,p,f,l){m=m(null,{declaredClass:"esri.tasks.ColorRamp",type:null});f("extend-esri")&&p.setObject("tasks.ColorRamp",m,l);return m})},"esri/tasks/MultipartColorRamp":function(){define("esri/tasks/MultipartColorRamp",
"dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../symbols/Symbol ./ColorRamp".split(" "),function(m,p,f,l,k,h){m=m(h,{declaredClass:"esri.tasks.MultipartColorRamp",type:"multipart",constructor:function(){this.colorRamps=[]},addColorRamp:function(f){this.colorRamps.push(f)},toJson:function(){return{type:"multipart",colorRamps:f.map(this.colorRamps,function(f){return f.toJson()})}}});l("extend-esri")&&p.setObject("tasks.MultipartColorRamp",m,k);return m})},"esri/renderers/colorUtils":function(){define("esri/renderers/colorUtils",
["dojo/_base/Color","dojo/_base/array"],function(m,p){var f={COEF_RGB2XYZ:[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],COEF_XYZ2RGB:[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],matrixProduct:function(f,h){var k=[],g,e;if(f[0].length!==h.length)throw"dimensions do not match";var c=f.length,b=f[0].length,d=0;for(g=0;g<c;g++){for(e=d=0;e<b;e++)d+=f[g][e]*h[e];k.push(d)}return k},rgb2xyz:function(f){f=[f.r/255,f.g/255,f.b/255].map(function(f){return.04045>=f?f/
12.92:Math.pow((f+.055)/1.055,2.4)});f=this.matrixProduct(this.COEF_RGB2XYZ,f);return{x:100*f[0],y:100*f[1],z:100*f[2]}},xyz2rgb:function(f){f=this.matrixProduct(this.COEF_XYZ2RGB,[f.x/100,f.y/100,f.z/100]).map(function(f){return Math.min(1,Math.max(.0031308>=f?12.92*f:1.055*Math.pow(f,1/2.4)-.055,0))});return{r:Math.round(255*f[0]),g:Math.round(255*f[1]),b:Math.round(255*f[2])}},xyz2lab:function(f){f=[f.x/95.047,f.y/100,f.z/108.883].map(function(f){return f>Math.pow(6/29,3)?Math.pow(f,1/3):1/3*Math.pow(29/
6,2)*f+4/29});return{l:116*f[1]-16,a:500*(f[0]-f[1]),b:200*(f[1]-f[2])}},lab2xyz:function(f){var h=f.l;f=[(h+16)/116+f.a/500,(h+16)/116,(h+16)/116-f.b/200].map(function(f){return f>6/29?Math.pow(f,3):3*Math.pow(6/29,2)*(f-4/29)});return{x:95.047*f[0],y:100*f[1],z:108.883*f[2]}},lab2lch:function(f){var h=f.l,k=f.a,g=f.b;f=Math.sqrt(k*k+g*g);k=Math.atan2(g,k);k=0<k?k:k+2*Math.PI;return{l:h,c:f,h:k}},lch2lab:function(f){var h=f.c,k=f.h;return{l:f.l,a:h*Math.cos(k),b:h*Math.sin(k)}},rgb2lab:function(f){return this.xyz2lab(this.rgb2xyz(f))},
lab2rgb:function(f){return this.xyz2rgb(this.lab2xyz(f))},rgb2lch:function(f){return this.lab2lch(this.xyz2lab(this.rgb2xyz(f)))},lch2rgb:function(f){return this.xyz2rgb(this.lab2xyz(this.lch2lab(f)))}},l={rgb2hsv:function(f){var h=f.r,k=f.g;f=f.b;var g=Math.max(h,k,f),e=g-Math.min(h,k,f),c;0===e?c=0:g===h?c=(k-f)/e%6:g===k?c=(f-h)/e+2:g===f&&(c=(h-k)/e+4);0>c&&(c+=6);return{h:60*c,s:100*(0===e?0:e/g),v:100/255*g}},hsv2rgb:function(f){var h=(f.h+360)%360/60,k=f.v/100*255;f=f.s/100*k;var g=f*(1-Math.abs(h%
2-1));switch(Math.floor(h)){case 0:h={r:f,g:g,b:0};break;case 1:h={r:g,g:f,b:0};break;case 2:h={r:0,g:f,b:g};break;case 3:h={r:0,g:g,b:f};break;case 4:h={r:g,g:0,b:f};break;case 5:case 6:h={r:f,g:0,b:g};break;default:h={r:0,g:0,b:0}}h.r=Math.round(h.r+k-f);h.g=Math.round(h.g+k-f);h.b=Math.round(h.b+k-f);return h}};return{toRGB:function(k){var h;void 0!==k.r&&void 0!==k.g&&void 0!==k.b?h=k:void 0!==k.l&&void 0!==k.c&&void 0!==k.h?h=f.lch2rgb(k):void 0!==k.l&&void 0!==k.a&&void 0!==k.b?h=f.lab2rgb(k):
void 0!==k.x&&void 0!==k.y&&void 0!==k.z?h=f.xyz2rgb(k):void 0!==k.h&&void 0!==k.s&&void 0!==k.v&&(h=l.hsv2rgb(k));return h},toHSV:function(f){if(void 0!==f.h&&void 0!==f.s&&void 0!==f.v)return f;f=this.toRGB(f);return l.rgb2hsv(f)},toLAB:function(k){return void 0!==k.l&&void 0!==k.a&&void 0!==k.b?k:f.rgb2lab(this.toRGB(k))},toLCH:function(k){return void 0!==k.l&&void 0!==k.c&&void 0!==k.h?k:f.rgb2lch(this.toRGB(k))},toXYZ:function(k){return void 0!==k.x&&void 0!==k.y&&void 0!==k.z?k:f.rgb2xyz(this.toRGB(k))},
getDojoColor:function(f){if(f){if(Array.isArray(f))return m.fromArray(f);if(void 0!==f.r&&void 0!==f.g&&void 0!==f.b)return f}},correctRGBLimits:function(f){var h=[f.r,f.g,f.b];p.forEach(h,function(f,g){0>h[g]?h[g]=0:255<h[g]&&(h[g]=255);h[g]=Math.floor(h[g])});return{r:h[0],g:h[1],b:h[2],a:1}}}})},"esri/renderers/ShadedReliefRenderer":function(){define("esri/renderers/ShadedReliefRenderer","dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../layers/RasterFunction ./colorRampUtils".split(" "),
function(m,p,f,l,k,h,q,g){m=m(null,{declaredClass:"esri.renderer.ShadedReliefRenderer",constructor:function(e){e=e||{};this.hillshadeType=e.hillshadeType||"traditional";this.azimuth=null!=e.azimuth?e.azimuth:315;this.altitude=null!=e.altitude?e.altitude:45;this.zFactor=e.zFactor||1;this.scalingType=e.scalingType||"none";this.pixelSizePower=null!=e.pixelSizePower?e.pixelSizePower:.664;this.pixelSizeFactor=null!=e.pixelSizeFactor?e.pixelSizeFactor:.024;this.removeEdgeEffect=e.removeEdgeEffect||!1;this.colorRamp=
g.fromJson(e.colorRamp)},toJson:function(){var e={type:"rasterShadedRelief",hillshadeType:this.hillshadeType,azimuth:this.azimuth,altitude:this.altitude,zFactor:this.zFactor,scalingType:this.scalingType,pixelSizePower:this.pixelSizePower,pixelSizeFactor:this.pixelSizeFactor,colorRamp:this.colorRamp&&this.colorRamp.toJson()};return h.fixJson(e)},toRenderingRule:function(e){}});l("extend-esri")&&f.setObject("renderer.ShadedReliefRenderer",m,k);return m})},"esri/renderers/ColormapRenderer":function(){define("esri/renderers/ColormapRenderer",
"dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ./arcadeUtils".split(" "),function(m,p,f,l,k,h,q,g,e){m=m(g,{declaredClass:"esri.renderer.ColormapRenderer",constructor:function(c){this.colormapInfos=c&&c.colormapInfos},toJson:function(){var c=h.fixJson,b;b={type:"rasterColormap",colormapInfos:p.map(this.colormapInfos||[],function(b,e){var d={};b.color&&null!==b.color&&3<=b.color.length&&(d.color=b.color,d.value=b.value||e,d.label=(b.label||
e)+"");return c(d)})};b=f.mixin(this.inherited(arguments),b);return c(b)}});l("extend-esri")&&f.setObject("renderer.ColormapRenderer",m,k);return m})},"esri/renderers/arcadeUtils":function(){define("esri/renderers/arcadeUtils",["dojo/_base/lang","dojo/has","../kernel","../support/expressionUtils"],function(m,p,f,l){p("extend-esri")&&m.setObject("renderer.arcadeUtils",l,f);return l})},"esri/dijit/PopupTemplate":function(){define("esri/dijit/PopupTemplate","dojo/_base/declare dojo/_base/lang dojo/has dojo/dom-construct ../kernel ../InfoTemplate ../PopupInfo ./PopupRenderer".split(" "),
function(m,p,f,l,k,h,q,g){m=m([h,q],{declaredClass:"esri.dijit.PopupTemplate","-chains-":{constructor:"manual"},chartTheme:null,constructor:function(e,c){p.mixin(this,c);this.initialize(e,c)},getTitle:function(e){var c;this.info&&(c=this.titleHasRelatedFields||this.titleHasAsyncExpressions?"":this._getPopupValues(e,this._fetchAttributes(e,null,this.getExpressionFieldsInTitle()),!0).title);return c||""},getContent:function(e){return this.info?(new g({template:this,graphic:e,chartTheme:this.chartTheme},
l.create("div"))).domNode:""}});f("extend-esri")&&p.setObject("dijit.PopupTemplate",m,k);return m})},"esri/PopupInfo":function(){define("esri/PopupInfo","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/i18n dojo/has dojo/Deferred dojo/sniff dojo/promise/all dojox/html/entities ./lang ./kernel ./request ./promiseList ./ArcadeExpression ./tasks/query ./tasks/QueryTask ./tasks/RelationshipQuery ./tasks/StatisticDefinition ./arcadeProfiles/popupProfile ./layers/support/attributeUtils dojo/i18n!dojo/cldr/nls/number".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x,w,y,z,B,A){m=m(null,{declaredClass:"esri.PopupInfo",_reNewline:/(\n)/ig,_reExprField:/^\s*expression\//i,_reExprFieldPattern:/\{expression\/([^\}]+)\}/ig,_exprPrefix:"expression/",_relatedFieldPrefix:"relationships/",initialize:function(b,c){if(b){p.mixin(this,c);this.info=b;this.title=this.getTitle;this.content=this.getContent;this._exprCache=this._compileExpressions(this.info.expressionInfos);var d=this._fieldLabels={},e=this._fieldsMap={};this.info.fieldInfos&&
f.forEach(this.info.fieldInfos,function(b){var c=b.fieldName.toLowerCase(),g=this._isExpressionField(c)?this.getExpressionInfo(c):null;d[c]=g?g.title:b.label;e[c]=b},this);this.titleHasRelatedFields=!(!this.info.title||-1===this.info.title.indexOf("{"+this._relatedFieldPrefix));this.titleHasAsyncExpressions=this._titleHasAsyncExpressions();this.contentHasAsyncExpressions=this._contentHasAyncExpressions()}},toJson:function(){return l.fromJson(l.toJson(this.info))},getTitle:function(){},getContent:function(){},
getFieldInfo:function(b){var c;f.some(this.info&&this.info.fieldInfos,function(d){d.fieldName===b&&(c=d);return!!c});return c},getExpressionInfo:function(b){if(b=this._getExprField(b)){b=b.toLowerCase();var c;f.some(this.info.expressionInfos,function(d){d.name.toLowerCase()===b&&(c=d);return!!c});return c}},getExpressionFieldsInTitle:function(){return this._getExprFieldsFromTemplatedString(this.info.title)},getExpressionFieldsInContent:function(){var b=this._collectExprFieldsFromTemplatedString(this.info.description,
[]);this.info.description||f.forEach(this.info.fieldInfos,function(c){c.visible&&this._collectExprField(c.fieldName,b)},this);f.forEach(this.info.mediaInfos,function(c){this._collectExprFieldsFromTemplatedString(c.title,b);this._collectExprFieldsFromTemplatedString(c.caption,b);if(c=c.value)this._collectExprFieldsFromTemplatedString(c.linkURL,b),this._collectExprFieldsFromTemplatedString(c.sourceURL,b),f.forEach(c.fields,function(c){this._collectExprField(c,b)},this),this._collectExprField(c.normalizeField,
b),this._collectExprField(c.tooltipField,b)},this);return b},getRequiredExpressionFields:function(){return this.getExpressionFieldsInTitle().concat(this.getExpressionFieldsInContent())},hasGeometryOperations:function(){return f.some(this._getArcadeExpressions(),function(b){return b.hasGeometryOperations()})},hasAsyncExpressions:function(){return f.some(this._getArcadeExpressions(),function(b){return b.async})},initializeArcadeEngine:function(){return z.initialize(this._getArcadeExpressions())},getComponents:function(b,
c){var d=this.info,e={initArcadeEngine:this.initializeArcadeEngine()};d.fieldInfos&&(d=f.filter(d.fieldInfos,function(b){return-1!==b.fieldName.indexOf(this._relatedFieldPrefix)},this))&&0<d.length&&(e.relatedInfo=this._getRelatedRecords({graphic:b,fieldsInfo:d}));this._needFullResolutionFeature(b)&&(e.fullResolutionFeature=this._getFullResolutionFeature(b));return v(e).then(p.hitch(this,function(d){d=d.fullResolutionFeature;var e=c&&c.evaluateAllExpressions,g=e?null:this.getRequiredExpressionFields();
d=(e?this.hasAsyncExpressions():this._hasAsyncExpressions(g))?this._fetchAttributesAsync(b,d,g):this._fetchAttributes(b,d,g);return v([d]).then(p.hitch(this,function(c){return this._getPopupValues(b,c[0])}))}))},getAttachments:function(b){var c=b.getSourceLayer();b=b.attributes;if(this.info.showAttachments&&c&&c.hasAttachments&&c.objectIdField&&(b=b&&b[c.objectIdField]))return c.queryAttachmentInfos(b)},_needFullResolutionFeature:function(b){return(b=b.getSourceLayer())?"function"===typeof b.getMaxAllowableOffset&&
0<b.getMaxAllowableOffset()&&this.hasGeometryOperations():!1},_getFullResolutionFeature:function(b){var c=b.getSourceLayer(),d=c.objectIdField;b=(b=b.attributes)&&d&&b[d];if(null==b)return null;var e=new t;e.where=d+"\x3d"+b;e.maxAllowableOffset=0;e.outFields=[d];c._enableCacheHint(e);return c.queryFeatures(e).then(function(b){return b.features&&b.features[0]})},_isExpressionField:function(b){return this._reExprField.test(b)},_getExprField:function(b){return this._isExpressionField(b)?b.replace(this._reExprField,
""):null},_collectExprField:function(b,c){(b=this._getExprField(b))&&c.push(b);return c},_collectExprFieldsFromTemplatedString:function(b,c){b=this._getExprFieldsFromTemplatedString(b);b.length&&Array.prototype.push.apply(c,b);return c},_getExprFieldsFromTemplatedString:function(b){b=b?b.match(this._reExprFieldPattern):null;return f.map(b,function(b){return b.replace(this._reExprFieldPattern,"$1")},this)},_titleHasAsyncExpressions:function(){return this._hasAsyncExpressions(this.getExpressionFieldsInTitle())},
_contentHasAyncExpressions:function(){return this._hasAsyncExpressions(this.getExpressionFieldsInContent())},_hasAsyncExpressions:function(b){return f.some(b,function(b){b=this._exprCache[b];return!(!b||!b.async)},this)},_compileExpressions:function(b){var c={};f.forEach(b,function(b){var d=b.returnType&&b.returnType.toLowerCase();c[b.name]=new u({expression:b.expression,returnType:"number"===d?"number":"string",profile:z})});return c},_getArcadeExpressions:function(){var b=[],c;for(c in this._exprCache)b.push(this._exprCache[c]);
return b},_fetchAttributesAsync:function(b,c,d){var e=this._fetchAttributes(b,c,d);b={};for(var g in e)(c=e[g])&&c.then&&(b[g]=c);return v(b).then(p.hitch(this,function(b){for(var c in b){var d=b[c];e[c]=d instanceof Error?null:this._processArcadeResult(d)}return e}))},_processArcadeResult:function(b){"string"===typeof b&&(b=c.encode(b));return b},_fetchAttributes:function(b,c,d){var e=p.clone(b.attributes)||{},g=c&&c.geometry,h=this._exprPrefix,k=this._exprCache;d=d||f.map(this.info.expressionInfos,
function(b){return b.name});f.forEach(d,function(c){var d=h+c;c=(c=k[c])?b.evaluateExpression(c,this._getEvalOptions(c,b,g)):null;e[d]=this._processArcadeResult(c)},this);return e},_getEvalOptions:function(b,c,d){var e=b.hasGeometryOperations(),g=c.getSourceLayer(),f=g&&(g.getMap()||g.parentLayer&&g.parentLayer.getMap());b=z.getEvalOptions({expression:b,feature:c,layer:g,map:f,spatialReference:f&&f.spatialReference});c=b.context.vars.$feature;e=!(!e||!d);c&&e&&(c._geometry=d);b.skipCache=e;return b},
_getPopupValues:function(c,d,e){d=d||this._fetchAttributes(c);var g=this.info,h=c.getSourceLayer(),k=p.clone(d),r="",l="",q,t,u,m,v,x=h&&h._getDateOpts&&h._getDateOpts().properties,x=x&&x.slice(0),w={dateFormat:{properties:x,formatter:"DateFormat"+this._insertOffset(this._dateFormats.shortDateShortTime)},format:null};if(this._relatedInfo)for(m in this._relatedInfo)if(this._relatedInfo.hasOwnProperty(m)){var y=this._relatedInfo[m],C=this._relatedLayersInfo[m];y&&(f.forEach(y.relatedFeatures,function(b){for(v in b.attributes)if(b.attributes.hasOwnProperty(v)&&
"esriRelCardinalityOneToOne"===C.relation.cardinality){var c=this._toRelatedFieldName([C.relation.id,v]);d[c]=k[c]=b.attributes[v]}},this),f.forEach(y.relatedStatsFeatures,function(b){for(v in b.attributes)if(b.attributes.hasOwnProperty(v)){var c=this._toRelatedFieldName([C.relation.id,v]);d[c]=k[c]=b.attributes[v]}},this))}for(t in k)m=this._fieldsMap[t.toLowerCase()],y=this._getLayerFieldInfo(h,t),m&&y&&(m.fieldName=y.name),k[t]=this._formatValue(k[t],t,w),x&&m&&m.format&&m.format.dateFormat&&(m=
f.indexOf(x,t),-1<m&&x.splice(m,1));if(h)for(t in x=h.typeIdField,d)d.hasOwnProperty(t)&&-1===t.indexOf(this._relatedFieldPrefix)&&(u=d[t],b.isDefined(u)&&(m=this._getDomainName(h,c,t,u),b.isDefined(m)?k[t]=m:t===x&&(m=this._getTypeName(h,c,u),b.isDefined(m)&&(k[t]=m))));g.title&&(r=this._processFieldsInLinks(this._fixTokens(g.title,h),d),r=p.trim(this._removeEmptyHref(b.substitute(k,r,w)||"")));if(e)return{title:r};g.description&&(l=this._processFieldsInLinks(this._fixTokens(g.description,h),d),
l=p.trim(this._removeEmptyHref(b.substitute(k,l,w)||"")));g.fieldInfos&&(q=[],f.forEach(g.fieldInfos,function(c){(t=c.fieldName)&&c.visible&&q.push([this._fieldLabels[t.toLowerCase()]||t,b.substitute(k,"${"+t+"}",w)||""])},this));var A,E;g.mediaInfos&&(A=[],f.forEach(g.mediaInfos,function(c){E=0;u=c.value;switch(c.type){case "image":var e=u.sourceURL,e=e&&p.trim(this._removeEmptyHref(b.substitute(d,this._fixTokens(e,h))));E=!!e;break;case "piechart":case "linechart":case "columnchart":case "barchart":var g,
e=u.normalizeField;u.fields=f.map(u.fields,function(b){return(g=this._getLayerFieldInfo(h,b))?g.name:b},this);e&&(g=this._getLayerFieldInfo(h,e),u.normalizeField=g?g.name:e);E=f.some(u.fields,function(c){return b.isDefined(d[c])||-1!==c.indexOf(this._relatedFieldPrefix)&&this._relatedInfo},this);break;default:return}if(E){c=p.clone(c);u=c.value;var e=c.title?this._processFieldsInLinks(this._fixTokens(c.title,h),d):"",r=c.caption?this._processFieldsInLinks(this._fixTokens(c.caption,h),d):"";c.title=
e?p.trim(this._removeEmptyHref(b.substitute(k,e,w)||"")):"";c.caption=r?p.trim(this._removeEmptyHref(b.substitute(k,r,w)||"")):"";if("image"===c.type)u.sourceURL=b.substitute(d,this._fixTokens(u.sourceURL,h)),u.linkURL&&(u.linkURL=p.trim(b.substitute(d,this._fixTokens(u.linkURL,h))||""));else{var l,q;f.forEach(u.fields,function(b,c){if(-1!==b.indexOf(this._relatedFieldPrefix))q=this._getRelatedChartInfos(b,u,d,w),q instanceof Array?u.fields=q:u.fields[c]=q;else{var e=d[b],e=void 0===e?null:e;l=d[u.normalizeField]||
0;e&&l&&(e/=l);u.fields[c]={y:e,tooltip:(this._fieldLabels[b.toLowerCase()]||b)+":\x3cbr/\x3e"+this._formatValue(e,b,w,!!l)}}},this)}A.push(c)}},this));return{title:r,description:l,hasDescription:!!g.description,fields:q&&q.length?q:null,mediaInfos:A&&A.length?A:null,formatted:k,editSummary:!1!==g.showLastEditInfo&&h&&h.getEditSummary?h.getEditSummary(c):""}},_getRelatedChartInfos:function(c,d,e,g){var h,k,r,l,q,t;h=[];t=this._fromRelatedFieldName(c);q=t[0];k=this._relatedInfo[q];q=this._relatedLayersInfo[q];
k&&f.forEach(k.relatedFeatures,function(f){f=f.attributes;var k,q;for(q in f)if(f.hasOwnProperty(q)&&q===t[1]){k={};l=f[q];d.normalizeField&&(r=-1!==d.normalizeField.indexOf(this._relatedFieldPrefix)?f[this._fromRelatedFieldName(d.normalizeField)[1]]:e[d.normalizeField]);l&&r&&(l/=r);if(d.tooltipField)if(-1!==d.tooltipField.indexOf(this._relatedFieldPrefix)){var u=this._fromRelatedFieldName(d.tooltipField)[1],m=b.isDefined(f[u])?this._formatValue(f[u],d.tooltipField,g,!!r):u;k.tooltip=m+":\x3cbr/\x3e"+
this._formatValue(l,u,g,!!r)}else k.tooltip=(this._fieldLabels[c.toLowerCase()]||c)+":\x3cbr/\x3e"+this._formatValue(l,d.tooltipField,g,!!r);else k.tooltip=l;k.y=l;h.push(k)}},this);return"esriRelCardinalityOneToMany"===q.relation.cardinality||"esriRelCardinalityManyToMany"===q.relation.cardinality?h:h[0]},_dateFormats:{shortDate:"(datePattern: 'M/d/y', selector: 'date')",shortDateShortTime:"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')",shortDateShortTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')",
shortDateLongTime:"(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')",shortDateLongTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')",shortDateLE:"(datePattern: 'd/M/y', selector: 'date')",shortDateLEShortTime:"(datePattern: 'd/M/y', timePattern: 'h:mm a', selector: 'date and time')",shortDateLEShortTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm', selector: 'date and time')",shortDateLELongTime:"(datePattern: 'd/M/y', timePattern: 'h:mm:ss a', selector: 'date and time')",
shortDateLELongTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm:ss', selector: 'date and time')",longMonthDayYear:"(datePattern: 'MMMM d, y', selector: 'date')",longMonthDayYearShortTime:"(datePattern: 'MMMM d, y', timePattern: 'h:mm a', selector: 'date and time')",longMonthDayYearShortTime24:"(datePattern: 'MMMM d, y', timePattern: 'H:mm', selector: 'date and time')",longMonthDayYearLongTime:"(datePattern: 'MMMM d, y', timePattern: 'h:mm:ss a', selector: 'date and time')",longMonthDayYearLongTime24:"(datePattern: 'MMMM d, y', timePattern: 'H:mm:ss', selector: 'date and time')",
dayShortMonthYear:"(datePattern: 'd MMM y', selector: 'date')",dayShortMonthYearShortTime:"(datePattern: 'd MMM y', timePattern: 'h:mm a', selector: 'date and time')",dayShortMonthYearShortTime24:"(datePattern: 'd MMM y', timePattern: 'H:mm', selector: 'date and time')",dayShortMonthYearLongTime:"(datePattern: 'd MMM y', timePattern: 'h:mm:ss a', selector: 'date and time')",dayShortMonthYearLongTime24:"(datePattern: 'd MMM y', timePattern: 'H:mm:ss', selector: 'date and time')",longDate:"(datePattern: 'EEEE, MMMM d, y', selector: 'date')",
longDateShortTime:"(datePattern: 'EEEE, MMMM d, y', timePattern: 'h:mm a', selector: 'date and time')",longDateShortTime24:"(datePattern: 'EEEE, MMMM d, y', timePattern: 'H:mm', selector: 'date and time')",longDateLongTime:"(datePattern: 'EEEE, MMMM d, y', timePattern: 'h:mm:ss a', selector: 'date and time')",longDateLongTime24:"(datePattern: 'EEEE, MMMM d, y', timePattern: 'H:mm:ss', selector: 'date and time')",longMonthYear:"(datePattern: 'MMMM y', selector: 'date')",shortMonthYear:"(datePattern: 'MMM y', selector: 'date')",
year:"(datePattern: 'y', selector: 'date')"},_dateFormatsJson:{shortDate:{datePattern:"M/d/y",selector:"date"},shortDateShortTime:{datePattern:"M/d/y",timePattern:"h:mm a",selector:"date and time"},shortDateShortTime24:{datePattern:"M/d/y",timePattern:"H:mm",selector:"date and time"},shortDateLongTime:{datePattern:"M/d/y",timePattern:"h:mm:ss a",selector:"date and time"},shortDateLongTime24:{datePattern:"M/d/y",timePattern:"H:mm:ss",selector:"date and time"},shortDateLE:{datePattern:"d/M/y",selector:"date"},
shortDateLEShortTime:{datePattern:"d/M/y",timePattern:"h:mm a",selector:"date and time"},shortDateLEShortTime24:{datePattern:"d/M/y",timePattern:"H:mm",selector:"date and time"},shortDateLELongTime:{datePattern:"d/M/y",timePattern:"h:mm:ss a",selector:"date and time"},shortDateLELongTime24:{datePattern:"d/M/y",timePattern:"H:mm:ss",selector:"date and time"},longMonthDayYear:{datePattern:"MMMM d, y",selector:"date"},longMonthDayYearShortTime:{datePattern:"MMMM d, y",timePattern:"h:mm a",selector:"date and time"},
longMonthDayYearShortTime24:{datePattern:"MMMM d, y",timePattern:"H:mm",selector:"date and time"},longMonthDayYearLongTime:{datePattern:"MMMM d, y",timePattern:"h:mm:ss a",selector:"date and time"},longMonthDayYearLongTime24:{datePattern:"MMMM d, y",timePattern:"H:mm:ss",selector:"date and time"},dayShortMonthYear:{datePattern:"d MMM y",selector:"date"},dayShortMonthYearShortTime:{datePattern:"d MMM y",timePattern:"h:mm a",selector:"date and time"},dayShortMonthYearShortTime24:{datePattern:"d MMM y",
timePattern:"H:mm",selector:"date and time"},dayShortMonthYearLongTime:{datePattern:"d MMM y",timePattern:"h:mm:ss a",selector:"date and time"},dayShortMonthYearLongTime24:{datePattern:"d MMM y",timePattern:"H:mm:ss",selector:"date and time"},longDate:{datePattern:"EEEE, MMMM d, y",selector:"date"},longDateShortTime:{datePattern:"EEEE, MMMM d, y",timePattern:"h:mm a",selector:"date and time"},longDateShortTime24:{datePattern:"EEEE, MMMM d, y",timePattern:"H:mm",selector:"date and time"},longDateLongTime:{datePattern:"EEEE, MMMM d, y",
timePattern:"h:mm:ss a",selector:"date and time"},longDateLongTime24:{datePattern:"EEEE, MMMM d, y",timePattern:"H:mm:ss",selector:"date and time"},longMonthYear:{datePattern:"MMMM y",selector:"date"},shortMonthYear:{datePattern:"MMM y",selector:"date"},year:{datePattern:"y",selector:"date"}},_reHref:/href\s*=\s*(\")([^\"]+)\"/ig,_reHrefApos:/href\s*=\s*(\')([^\']+)\'/ig,_fixTokens:function(b,c){var d=this;return b.replace(/(\{([^\{\r\n]+)\})/g,function(b,e,g){b=d._getLayerFieldInfo(c,g);return"$"+
(b?"{"+b.name+"}":e)})},_encodeAttributes:function(b,c){b=p.clone(b)||{};var d,e;for(d in b)(e=b[d])&&"string"===typeof e&&(e=c?e:encodeURIComponent(e),e=e.replace(/\'/g,"\x26apos;"),b[d]=e);return b},_processFieldsInLinks:function(b,c){var d=this._encodeAttributes(c),e=this._encodeAttributes(c,!0);c=p.hitch(this,this._addValuesToHref,c,d,e);b&&(b=b.replace(this._reHref,c).replace(this._reHrefApos,c));return b},_addValuesToHref:function(c,d,e,g,f,h){h=h&&p.trim(h);return g=b.substitute(h&&0===h.indexOf("${")?
"'"===f?e:c:d,g)},_getLayerFieldInfo:function(b,c){return b&&b.getField?b.getField(c):null},_formatValue:function(c,d,e,g){var h=this._fieldsMap[d.toLowerCase()],k=h&&h.format;d=-1!==f.indexOf(e.dateFormat.properties,d);var r="number"===typeof c&&!d&&(!k||!k.dateFormat);if(!b.isDefined(c)||!h||!b.isDefined(k))return this._applyFormatting(c,r);var l,h=k.hasOwnProperty("places")||k.hasOwnProperty("digitSeparator"),q=k.hasOwnProperty("digitSeparator")?k.digitSeparator:!0;if(h&&!d)l={formatType:"NumberFormat",
places:b.isDefined(k.places)&&(!g||0<k.places)?Number(k.places):Infinity};else if(k.dateFormat)l=p.mixin({formatType:"DateFormat",utcOffset:this.utcOffset},this._dateFormatsJson[k.dateFormat]||this._dateFormatsJson.shortDateShortTime);else return this._applyFormatting(c,r);var t=this._applyFormatFunctions(c,l,e);h&&-1<c.constructor.toString().indexOf("Array")&&(t="",f.forEach(c,p.hitch(this,function(b,c){c&&(t+=" ");t+=this._applyFormatFunctions(b,l,e)})));h&&!q&&A.group&&(t=t.replace(new RegExp("\\"+
A.group,"g"),""));d&&(t='\x3cspan class\x3d"esriDateValue"\x3e'+t+"\x3c/span\x3e");return this._applyFormatting(t,r)},_applyFormatFunctions:function(c,d,e){d&&e&&(e.format={myKey:d});c=b.substitute({myKey:c},"${myKey}",e)||"";d&&e&&(e.format=null);return c},_applyFormatting:function(b,c){return c?this._forceLTR(b):this._applyPreWrap(b)},_forceLTR:function(b){var c=g("ie");return c&&10>=c?b:"\x3cspan class\x3d'esriNumericValue'\x3e"+b+"\x3c/span\x3e"},_applyPreWrap:function(b){return"string"===typeof b?
b.replace(this._reNewline,"\x3cspan class\x3d'charNewLine'\x3e$1\x3c/span\x3e"):b},_insertOffset:function(c){c&&(c=b.isDefined(this.utcOffset)?c.replace(/\)\s*$/,", utcOffset:"+this.utcOffset+")"):c);return c},_getDomainName:function(b,c,d,e){return(b=b.getDomain&&b.getDomain(d,{feature:c}))&&b.codedValues?b.getName(e):null},_getTypeName:function(b,c,d){return(b=b.getType&&b.getType(c))&&b.name},_getRelatedRecords:function(b){var c=b.graphic,d;this._relatedLayersInfoPromise||(this._relatedLayersInfoPromise=
this._getRelatedLayersInfo(b).then(p.hitch(this,function(b){for(d in b)b.hasOwnProperty(d)&&b[d]&&(this._relatedLayersInfo[d].relatedLayerInfo=b[d])})));return this._relatedLayersInfoPromise.then(p.hitch(this,function(){return this._queryRelatedLayers(c)})).then(p.hitch(this,function(b){this._setRelatedRecords(c,b);return b}))},_getRelatedLayersInfo:function(b){var c=b.fieldsInfo,d,g,h={};d=b.graphic.getSourceLayer();this._relatedLayersInfo||(this._relatedLayersInfo={});f.forEach(c,function(b){var c,
e,g,h;c=this._fromRelatedFieldName(b.fieldName);e=c[0];c=c[1];e&&(!this._relatedLayersInfo[e]&&d&&d.relationships&&(f.some(d.relationships,function(b){if(b.id==e)return h=b,!0}),h&&(this._relatedLayersInfo[e]={relation:h,relatedFields:[],outStatistics:[]})),this._relatedLayersInfo[e]&&(this._relatedLayersInfo[e].relatedFields.push(c),b.statisticType&&(g=new y,g.statisticType=b.statisticType,g.onStatisticField=c,g.outStatisticFieldName=c,this._relatedLayersInfo[e].outStatistics.push(g))))},this);for(g in this._relatedLayersInfo)this._relatedLayersInfo.hasOwnProperty(g)&&
this._relatedLayersInfo[g]&&(b=this._relatedLayersInfo[g].relation,b=d.url.replace(/[0-9]+$/,b.relatedTableId),this._relatedLayersInfo[g].relatedLayerUrl=b,h[g]=r({url:b,content:{f:"json"},callbackParamName:"callback"}));return e(h)},_queryRelatedLayers:function(b){var c={},d;for(d in this._relatedLayersInfo)this._relatedLayersInfo.hasOwnProperty(d)&&(c[d]=this._queryRelatedLayer({graphic:b,relatedInfo:this._relatedLayersInfo[d]}));return e(c)},_queryRelatedLayer:function(b){var c,d,g,h,k,r,l,u,m,
v,w,y,A;c=b.graphic;d=c.getSourceLayer();g=d.url.match(/[0-9]+$/g)[0];w=b.relatedInfo;v=w.relatedLayerInfo;y=w.relatedLayerUrl;b=w.relation;f.some(v.relationships,function(b){if(b.relatedTableId===parseInt(g,10))return h=b,!0},this);h&&(k=new t,f.some(v.fields,function(b){if(b.name===h.keyField)return u=-1!==f.indexOf(["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],b.type)?"number":"string",!0}),h.relationshipTableId&&h.keyFieldInRelationshipTable?
(A=new q,this._queryRelatedRecords(c,h).then(p.hitch(this,function(b){var e;(e=b[c.attributes[d.objectIdField]])?(b=f.map(e.features,function(b){return b.attributes[v.objectIdField]},this),w.outStatistics&&0<w.outStatistics.length&&v.supportsStatistics&&(m=new t,m.where=this._chunkWhereInClause(v.objectIdField,b,1E3),m.outFields=k.outFields,m.outStatistics=w.outStatistics),m&&(r=new x(y),r.execute(m).then(p.hitch(this,function(b){var c=[];c.push(e);c.push(b);A.resolve(c)})))):A.resolve()}))):(l="string"===
u?h.keyField+"\x3d'"+c.attributes[b.keyField]+"'":h.keyField+"\x3d"+c.attributes[b.keyField],k.where=l,k.outFields=w.relatedFields,w.outStatistics&&0<w.outStatistics.length&&v.supportsStatistics&&(m=new t,m.where=k.where,m.outFields=k.outFields,m.outStatistics=w.outStatistics),r=new x(y),l=[],l.push(r.execute(k)),m&&l.push(r.execute(m))));return l?e(l):A?A.promise:void 0},_setRelatedRecords:function(c,d){this._relatedInfo=[];for(var e in d)d.hasOwnProperty(e)&&d[e]&&(c=d[e],this._relatedInfo[e]={},
this._relatedInfo[e].relatedFeatures=c[0].features,b.isDefined(c[1])&&(this._relatedInfo[e].relatedStatsFeatures=c[1].features))},_handlerErrorResponse:function(b,c){b.reject(c)},_fromRelatedFieldName:function(b){var c=[];-1!==b.indexOf(this._relatedFieldPrefix)&&(b=b.split("/"),c=b.slice(1));return c},_toRelatedFieldName:function(b){var c="";b&&0<b.length&&(c=this._relatedFieldPrefix+b[0]+"/"+b[1]);return c},_queryRelatedRecords:function(b,c){var d=b.getSourceLayer(),e=new w;e.outFields=["*"];e.relationshipId=
c.id;e.objectIds=[b.attributes[d.objectIdField]];return d.queryRelatedFeatures(e)},_removeEmptyHref:function(b){return b.replace(/href=(""|'')/gi,"")},_chunkWhereInClause:function(b,c,d){for(var e=0,g=[];e<c.length;)g.push(b+" IN ("+c.slice(e,d+e)+")"),e+=d;return g.join(" OR ")}});h("extend-esri")&&(d.PopupInfo=d.PopupInfoTemplate=m);return m})},"dojox/html/entities":function(){define("dojox/html/entities",["dojo/_base/lang"],function(m){var p=m.getObject("dojox.html.entities",!0),f=function(f,h){var k,
g;if(h._encCache&&h._encCache.regexp&&h._encCache.mapper&&h.length==h._encCache.length)k=h._encCache.mapper,g=h._encCache.regexp;else{k={};g=["["];var e;for(e=0;e<h.length;e++)k[h[e][0]]="\x26"+h[e][1]+";",g.push(h[e][0]);g.push("]");g=new RegExp(g.join(""),"g");h._encCache={mapper:k,regexp:g,length:h.length}}return f=f.replace(g,function(c){return k[c]})},l=function(f,h){var k,g;if(h._decCache&&h._decCache.regexp&&h._decCache.mapper&&h.length==h._decCache.length)k=h._decCache.mapper,g=h._decCache.regexp;
else{k={};g=["("];var e;for(e=0;e<h.length;e++){var c="\x26"+h[e][1]+";";e&&g.push("|");k[c]=h[e][0];g.push(c)}g.push(")");g=new RegExp(g.join(""),"g");h._decCache={mapper:k,regexp:g,length:h.length}}return f=f.replace(g,function(b){return k[b]})};p.html=[["\x26","amp"],['"',"quot"],["\x3c","lt"],["\x3e","gt"],["\u00a0","nbsp"]];p.latin=[["\u00a1","iexcl"],["\u00a2","cent"],["\u00a3","pound"],["\u20ac","euro"],["\u00a4","curren"],["\u00a5","yen"],["\u00a6","brvbar"],["\u00a7","sect"],["\u00a8","uml"],
["\u00a9","copy"],["\u00aa","ordf"],["\u00ab","laquo"],["\u00ac","not"],["\u00ad","shy"],["\u00ae","reg"],["\u00af","macr"],["\u00b0","deg"],["\u00b1","plusmn"],["\u00b2","sup2"],["\u00b3","sup3"],["\u00b4","acute"],["\u00b5","micro"],["\u00b6","para"],["\u00b7","middot"],["\u00b8","cedil"],["\u00b9","sup1"],["\u00ba","ordm"],["\u00bb","raquo"],["\u00bc","frac14"],["\u00bd","frac12"],["\u00be","frac34"],["\u00bf","iquest"],["\u00c0","Agrave"],["\u00c1","Aacute"],["\u00c2","Acirc"],["\u00c3","Atilde"],
["\u00c4","Auml"],["\u00c5","Aring"],["\u00c6","AElig"],["\u00c7","Ccedil"],["\u00c8","Egrave"],["\u00c9","Eacute"],["\u00ca","Ecirc"],["\u00cb","Euml"],["\u00cc","Igrave"],["\u00cd","Iacute"],["\u00ce","Icirc"],["\u00cf","Iuml"],["\u00d0","ETH"],["\u00d1","Ntilde"],["\u00d2","Ograve"],["\u00d3","Oacute"],["\u00d4","Ocirc"],["\u00d5","Otilde"],["\u00d6","Ouml"],["\u00d7","times"],["\u00d8","Oslash"],["\u00d9","Ugrave"],["\u00da","Uacute"],["\u00db","Ucirc"],["\u00dc","Uuml"],["\u00dd","Yacute"],["\u00de",
"THORN"],["\u00df","szlig"],["\u00e0","agrave"],["\u00e1","aacute"],["\u00e2","acirc"],["\u00e3","atilde"],["\u00e4","auml"],["\u00e5","aring"],["\u00e6","aelig"],["\u00e7","ccedil"],["\u00e8","egrave"],["\u00e9","eacute"],["\u00ea","ecirc"],["\u00eb","euml"],["\u00ec","igrave"],["\u00ed","iacute"],["\u00ee","icirc"],["\u00ef","iuml"],["\u00f0","eth"],["\u00f1","ntilde"],["\u00f2","ograve"],["\u00f3","oacute"],["\u00f4","ocirc"],["\u00f5","otilde"],["\u00f6","ouml"],["\u00f7","divide"],["\u00f8",
"oslash"],["\u00f9","ugrave"],["\u00fa","uacute"],["\u00fb","ucirc"],["\u00fc","uuml"],["\u00fd","yacute"],["\u00fe","thorn"],["\u00ff","yuml"],["\u0192","fnof"],["\u0391","Alpha"],["\u0392","Beta"],["\u0393","Gamma"],["\u0394","Delta"],["\u0395","Epsilon"],["\u0396","Zeta"],["\u0397","Eta"],["\u0398","Theta"],["\u0399","Iota"],["\u039a","Kappa"],["\u039b","Lambda"],["\u039c","Mu"],["\u039d","Nu"],["\u039e","Xi"],["\u039f","Omicron"],["\u03a0","Pi"],["\u03a1","Rho"],["\u03a3","Sigma"],["\u03a4","Tau"],
["\u03a5","Upsilon"],["\u03a6","Phi"],["\u03a7","Chi"],["\u03a8","Psi"],["\u03a9","Omega"],["\u03b1","alpha"],["\u03b2","beta"],["\u03b3","gamma"],["\u03b4","delta"],["\u03b5","epsilon"],["\u03b6","zeta"],["\u03b7","eta"],["\u03b8","theta"],["\u03b9","iota"],["\u03ba","kappa"],["\u03bb","lambda"],["\u03bc","mu"],["\u03bd","nu"],["\u03be","xi"],["\u03bf","omicron"],["\u03c0","pi"],["\u03c1","rho"],["\u03c2","sigmaf"],["\u03c3","sigma"],["\u03c4","tau"],["\u03c5","upsilon"],["\u03c6","phi"],["\u03c7",
"chi"],["\u03c8","psi"],["\u03c9","omega"],["\u03d1","thetasym"],["\u03d2","upsih"],["\u03d6","piv"],["\u2022","bull"],["\u2026","hellip"],["\u2032","prime"],["\u2033","Prime"],["\u203e","oline"],["\u2044","frasl"],["\u2118","weierp"],["\u2111","image"],["\u211c","real"],["\u2122","trade"],["\u2135","alefsym"],["\u2190","larr"],["\u2191","uarr"],["\u2192","rarr"],["\u2193","darr"],["\u2194","harr"],["\u21b5","crarr"],["\u21d0","lArr"],["\u21d1","uArr"],["\u21d2","rArr"],["\u21d3","dArr"],["\u21d4",
"hArr"],["\u2200","forall"],["\u2202","part"],["\u2203","exist"],["\u2205","empty"],["\u2207","nabla"],["\u2208","isin"],["\u2209","notin"],["\u220b","ni"],["\u220f","prod"],["\u2211","sum"],["\u2212","minus"],["\u2217","lowast"],["\u221a","radic"],["\u221d","prop"],["\u221e","infin"],["\u2220","ang"],["\u2227","and"],["\u2228","or"],["\u2229","cap"],["\u222a","cup"],["\u222b","int"],["\u2234","there4"],["\u223c","sim"],["\u2245","cong"],["\u2248","asymp"],["\u2260","ne"],["\u2261","equiv"],["\u2264",
"le"],["\u2265","ge"],["\u2282","sub"],["\u2283","sup"],["\u2284","nsub"],["\u2286","sube"],["\u2287","supe"],["\u2295","oplus"],["\u2297","otimes"],["\u22a5","perp"],["\u22c5","sdot"],["\u2308","lceil"],["\u2309","rceil"],["\u230a","lfloor"],["\u230b","rfloor"],["\u2329","lang"],["\u232a","rang"],["\u25ca","loz"],["\u2660","spades"],["\u2663","clubs"],["\u2665","hearts"],["\u2666","diams"],["\u0152","OElig"],["\u0153","oelig"],["\u0160","Scaron"],["\u0161","scaron"],["\u0178","Yuml"],["\u02c6","circ"],
["\u02dc","tilde"],["\u2002","ensp"],["\u2003","emsp"],["\u2009","thinsp"],["\u200c","zwnj"],["\u200d","zwj"],["\u200e","lrm"],["\u200f","rlm"],["\u2013","ndash"],["\u2014","mdash"],["\u2018","lsquo"],["\u2019","rsquo"],["\u201a","sbquo"],["\u201c","ldquo"],["\u201d","rdquo"],["\u201e","bdquo"],["\u2020","dagger"],["\u2021","Dagger"],["\u2030","permil"],["\u2039","lsaquo"],["\u203a","rsaquo"]];p.encode=function(k,h){k&&(h?k=f(k,h):(k=f(k,p.html),k=f(k,p.latin)));return k};p.decode=function(f,h){f&&
(h?f=l(f,h):(f=l(f,p.html),f=l(f,p.latin)));return f};return p})},"esri/ArcadeExpression":function(){define("esri/ArcadeExpression","dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./layers/support/attributeUtils ./support/expressionUtils".split(" "),function(m,p,f,l,k,h){m=m(null,{declaredClass:"esri.ArcadeExpression",expression:null,profile:null,returnType:null,async:null,id:null,syntaxTree:null,_traits:null,_attributeDef:null,_attributeCache:null,_compiled:!1,constructor:function(f){p.mixin(this,
f);this.returnType=this.returnType||"string";this.id=k.getAttributeId(this.expression);this._setSyntaxTree(this.profile.parse(this));this.async=this.async||this.profile.isAsync(this)},hasGeometryOperations:function(){var f=this._traits.geometryOperations;void 0===f&&(f=this._traits.geometryOperations=h.hasGeometryOperations(this.syntaxTree));return f},hasFeatureSetOperations:function(){var f=this._traits.featureSetOperations;void 0===f&&(f=this._traits.featureSetOperations=h.hasFeatureSetOperations(this.syntaxTree));
return f},hasVariable:function(f){var g=this._traits.variables;void 0===g[f]&&(g[f]=h.hasVariable(this.syntaxTree,f));return g[f]},hasFunction:function(f){var g=this._traits.functions;void 0===g[f]&&(g[f]=h.hasFunction(this.syntaxTree,f));return g[f]},evaluate:function(f){this._compile();var g=this._attributeCache.compiledFunc;return this.async?h.executeAsyncFunction(g,f):h.executeFunction(g,f)},_setSyntaxTree:function(f){this.syntaxTree=f;this._compiled=!1;this._traits={variables:{},functions:{}};
this._createLegacyValueObjects()},_createLegacyValueObjects:function(){this._attributeDef={valueExpression:this.expression};this._attributeCache={attributeInfo:this._attributeDef,isNumeric:"number"===this.returnType,idSource:this.expression,id:this.id,hasExpr:!0,compiledFunc:null,syntaxTree:this.syntaxTree,isScaleDriven:!1,dependsOnView:this.hasVariable("$view"),dependsOnGeometry:this.hasGeometryOperations(),isJSFunc:!1}},_compile:function(){this._compiled||(this._attributeCache.compiledFunc=this.profile.compile(this),
this._compiled=!0)}});f("extend-esri")&&(l.ArcadeExpression=m);return m})},"esri/tasks/QueryTask":function(){define("esri/tasks/QueryTask","require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/DeferredList ../kernel ../sniff ../request ../deferredUtils ../geometry/Extent ../geometry/normalizeUtils ./Task ./FeatureSet".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u){var t=e("esri-pbf"),x=p(null,{url:null,query:null,requestOptions:null,pagination:null,
pageSize:null,_fetchDfd:null,_startPage:null,_result:null,constructor:function(b){this._handleSuccess=f.hitch(this,this._handleSuccess);this._handleError=f.hitch(this,this._handleError);f.mixin(this,b);null==this.pagination&&(this.pagination=!1);null==this.pageSize&&(this.pageSize=1E3)},execute:function(){var b=new k(this._canceler);this._fetchDfd=b;this._result=null;this._sendRequest();return b.promise},_canceler:function(b){var c=b._pendingRequest,d;b.isFulfilled()||!c||c.isFulfilled()||(c.cancel(),
d=c.results&&c.results[1]);b._pendingRequest=null;return d},_sendRequest:function(b){var d=this.query;this.pagination&&(this._startPage=d.resultOffset=null==b?0:b,d.resultRecordCount=this.pageSize);b=this.requestOptions;this._fetchDfd._pendingRequest=c({url:this.url,content:d,handleAs:"pbf"===d.f?"arraybuffer":"json",callbackParamName:"callback",timeout:b&&b.timeout},b);this._fetchDfd._pendingRequest.then(this._handleSuccess).otherwise(this._handleError)},_handleSuccess:function(b){this.pagination?
(b.exceededTransferLimit&&this._sendRequest(this._startPage+this.pageSize),this._result?this._result.features=this._result.features.concat(b.features):this._result=b,this._fetchDfd.progress(b),b.exceededTransferLimit||this._fetchDfd.resolve(this._result)):(this._fetchDfd.progress(b),this._fetchDfd.resolve(b))},_handleError:function(b){this._fetchDfd.reject(b)}}),w=p(v,{declaredClass:"esri.tasks.QueryTask",_eventMap:{complete:["featureSet"],"execute-for-count-complete":["count"],"execute-for-ids-complete":["objectIds"],
"execute-relationship-query-complete":["featureSets"]},constructor:function(b,c){this._handler=f.hitch(this,this._handler);this._relationshipQueryHandler=f.hitch(this,this._relationshipQueryHandler);this._executeForIdsHandler=f.hitch(this,this._executeForIdsHandler);this._countHandler=f.hitch(this,this._countHandler);this._extentHandler=f.hitch(this,this._extentHandler);this.source=c&&c.source;this.gdbVersion=c&&c.gdbVersion;this.registerConnectEvents()},__msigns:[{n:"execute",c:4,a:[{i:0,p:["geometry"]}],
e:2},{n:"rawExecute",c:2,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForIds",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForCount",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForExtent",c:3,a:[{i:0,p:["geometry"]}],e:2}],onComplete:function(){},onRawExecuteComplete:function(){},onExecuteRelationshipQueryComplete:function(){},onExecuteForIdsComplete:function(){},onExecuteForCountComplete:function(){},onExecuteForExtentComplete:function(){},execute:function(b,d,e,g,r){var l=r.assembly;b=this._encode(f.mixin({},
this._url.query,{f:g&&g.format||"json"},b.toJson(l&&l[0])));var u=this._handler,m=this._errorHandler;this.source&&(g={source:this.source.toJson()},b.layer=h.toJson(g));this.gdbVersion&&(b.gdbVersion=this.gdbVersion);var p="pbf"===b.f;if(p){var v;t||(v="QueryTask.execute: 'pbf' format is not supported in your browser.");if(v)return b=new k,b.addErrback(function(b){m(b,e,r.dfd)}),b.reject(Error(v)),b}v=this.requestOptions;v=c({url:this._url.path+"/query",content:b,callbackParamName:"callback",handleAs:p?
"arraybuffer":"json",timeout:v&&v.timeout},v);b=[v];p&&b.push(w.loadPBFReader());(new q(b)).then(function(b){r.dfd.isFulfilled()||(b=b[0],b[0]?u(b[1],p,d,e,r.dfd):m(b[1],e,r.dfd))});return v},rawExecute:function(b,c,d){c=c||{};b=this._encode(f.mixin({},this._url.query,{f:c.format||"json"},b.toJson(d.assembly&&d.assembly[0])));this.source&&(b.layer=h.toJson({source:this.source.toJson()}));this.gdbVersion&&(b.gdbVersion=this.gdbVersion);return(new x({url:this._url.path+"/query",query:b,requestOptions:this.requestOptions,
pagination:c.pagination,pageSize:c.pageSize})).execute().then(null,null,function(b){d.dfd.progress(b)}).then(f.hitch(this,function(b){this._successHandler([b],"onRawExecuteComplete",null,d.dfd)})).otherwise(f.hitch(this,function(b){this._errorHandler(b,null,d.dfd)}))},executeRelationshipQuery:function(d,e,g){d=this._encode(f.mixin({},this._url.query,{f:"json"},d.toJson()));var h=this._relationshipQueryHandler,r=this._errorHandler;this.gdbVersion&&(d.gdbVersion=this.gdbVersion);var l=new k(b._dfdCanceller),
q=this.requestOptions,t=this._url.path;this.source&&void 0!==this.source.mapLayerId&&null!==this.source.mapLayerId&&t.endsWith("/dynamicLayer")&&(t=t.slice(0,-13),t=t+"/"+this.source.mapLayerId);l._pendingDfd=c({url:t+"/queryRelatedRecords",content:d,callbackParamName:"callback",timeout:q&&q.timeout,load:function(b,c){h(b,c,e,g,l)},error:function(b){r(b,g,l)}},q);return l},executeForIds:function(b,d,e,g){var k=g.assembly;b=this._encode(f.mixin({},this._url.query,{f:"json",returnIdsOnly:!0},b.toJson(k&&
k[0])));var r=this._executeForIdsHandler,l=this._errorHandler;this.source&&(k={source:this.source.toJson()},b.layer=h.toJson(k));this.gdbVersion&&(b.gdbVersion=this.gdbVersion);k=this.requestOptions;return c({url:this._url.path+"/query",content:b,callbackParamName:"callback",timeout:k&&k.timeout,load:function(b,c){r(b,c,d,e,g.dfd)},error:function(b){l(b,e,g.dfd)}},k)},executeForCount:function(b,d,e,g){var k=g.assembly;b=this._encode(f.mixin({},this._url.query,{f:"json",returnIdsOnly:!0,returnCountOnly:!0},
b.toJson(k&&k[0])));var r=this._countHandler,l=this._errorHandler;this.source&&(k={source:this.source.toJson()},b.layer=h.toJson(k));this.gdbVersion&&(b.gdbVersion=this.gdbVersion);k=this.requestOptions;return c({url:this._url.path+"/query",content:b,callbackParamName:"callback",timeout:k&&k.timeout,load:function(b,c){r(b,c,d,e,g.dfd)},error:function(b){l(b,e,g.dfd)}},k)},executeForExtent:function(b,d,e,g){var k=g.assembly;b=this._encode(f.mixin({},this._url.query,{f:"json",returnExtentOnly:!0,returnCountOnly:!0},
b.toJson(k&&k[0])));var r=this._extentHandler,l=this._errorHandler;this.source&&(k={source:this.source.toJson()},b.layer=h.toJson(k));this.gdbVersion&&(b.gdbVersion=this.gdbVersion);k=this.requestOptions;return c({url:this._url.path+"/query",content:b,callbackParamName:"callback",timeout:k&&k.timeout,load:function(b,c){r(b,c,d,e,g.dfd)},error:function(b){l(b,e,g.dfd)}},k)},_handler:function(b,c,d,e,g){try{b&&c&&(b=w.pbfDeps.optimizedFeatures.convertToFeatureSet(w.pbfDeps.pbfQueryUtils.parsePBFFeatureQuery(b)));
var f=new u(b);this._successHandler([f],"onComplete",d,g)}catch(E){this._errorHandler(E,e,g)}},_relationshipQueryHandler:function(b,c,d,e,g){try{var f=b.geometryType,h=b.spatialReference,k={};l.forEach(b.relatedRecordGroups,function(b){var c={};c.geometryType=f;c.spatialReference=h;c.features=b.relatedRecords;c=new u(c);if(null!=b.objectId)k[b.objectId]=c;else for(var d in b)b.hasOwnProperty(d)&&"relatedRecords"!==d&&(k[b[d]]=c)});this._successHandler([k],"onExecuteRelationshipQueryComplete",d,g)}catch(D){this._errorHandler(D,
e,g)}},_executeForIdsHandler:function(b,c,d,e,g){try{this._successHandler([b.objectIds],"onExecuteForIdsComplete",d,g)}catch(F){this._errorHandler(F,e,g)}},_countHandler:function(b,c,d,e,g){try{var f,h=b.features,k=b.objectIds;if(k)f=k.length;else{if(h)throw Error("Unable to perform query. Please check your parameters.");f=b.count}this._successHandler([f],"onExecuteForCountComplete",d,g)}catch(D){this._errorHandler(D,e,g)}},_extentHandler:function(b,c,e,g,f){try{b.extent&&(b.extent=new d(b.extent)),
this._successHandler([b],"onExecuteForExtentComplete",e,f)}catch(F){this._errorHandler(F,g,f)}}});w.loadPBFReader=function(){var b=new k;w.pbfDeps?b.resolve():m(["./support/pbfDeps"],function(c){w.pbfDeps=c;b.isFulfilled()||b.resolve()});return b.promise};r._createWrappers(w);e("extend-esri")&&f.setObject("tasks.QueryTask",w,g);return w})},"esri/tasks/Task":function(){define("esri/tasks/Task","dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../deferredUtils ../urlUtils ../Evented".split(" "),
function(m,p,f,l,k,h,q,g){m=m(g,{declaredClass:"esri.tasks._Task",_eventMap:{error:["error"],complete:["result"]},constructor:function(e,c){e&&p.isString(e)&&(this._url=q.urlToObject(this.url=e));c&&c.requestOptions&&(this.requestOptions=c.requestOptions);this.normalization=!0;this._errorHandler=p.hitch(this,this._errorHandler);this.registerConnectEvents()},_useSSL:function(){var e=this._url,c=/^http:/i;this.url&&(this.url=this.url.replace(c,"https:"));e&&e.path&&(e.path=e.path.replace(c,"https:"))},
_encode:function(e,c,b){var d,g,h={},k,l;for(k in e)if("declaredClass"!==k&&(d=e[k],g=typeof d,null!==d&&void 0!==d&&"function"!==g))if(p.isArray(d))for(h[k]=[],l=d.length,g=0;g<l;g++)h[k][g]=this._encode(d[g]);else"object"===g?d.toJson&&(g=d.toJson(b&&b[k]),"esri.tasks.FeatureSet"===d.declaredClass&&g.spatialReference&&(g.sr=g.spatialReference,delete g.spatialReference),h[k]=c?g:f.toJson(g)):h[k]=d;return h},_successHandler:function(e,c,b,d){c&&this[c].apply(this,e);b&&b.apply(null,e);d&&h._resDfd(d,
e)},_errorHandler:function(e,c,b){this.onError(e);c&&c(e);b&&b.errback(e)},setNormalization:function(e){this.normalization=e},onError:function(){}});l("extend-esri")&&(k.Task=m);return m})},"esri/tasks/FeatureSet":function(){define("esri/tasks/FeatureSet","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../graphic ../SpatialReference ../graphicsUtils ../geometry/Polygon ../geometry/jsonUtils ../symbols/jsonUtils".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d){m=m(null,
{declaredClass:"esri.tasks.FeatureSet",constructor:function(c,e){if(c){p.mixin(this,c);var h=this.features=this.features||[],k=c.spatialReference,k=this.spatialReference=b.createInstance(g.simpleConstructor,k),l=b.getGeometryType(c.geometryType);this.geometryType=c.geometryType;c.fields&&(this.fields=c.fields);c=b.supportsLazyUnquantization(this.geometryType);var r=b.unquantizeFunction(this.geometryType,this.transform),m=!!(e&&c&&r),v=l&&(m?l.accessorConstructor:l.simpleConstructor);f.forEach(h,function(c,
e){var f=b.createInstance(q.simpleConstructor),t=c.geometry;if(l&&t){var u=f.geometry=b.createInstance(v,m?null:t);u.setSpatialReference(t.spatialReference?b.createInstance(g.simpleConstructor,t.spatialReference):k);m&&u.setupLazyUnquantization(r,t)}f.symbol=c.symbol?d.fromJson(c.symbol):null;f.attributes=c.attributes;h[e]=f});m||this._hydrate()}else this.features=[]},displayFieldName:null,geometryType:null,spatialReference:null,fieldAliases:null,toJson:function(c){var d={};this.displayFieldName&&
(d.displayFieldName=this.displayFieldName);this.fields&&(d.fields=this.fields);this.spatialReference?d.spatialReference=this.spatialReference.toJson():this.features[0]&&this.features[0].geometry&&(d.spatialReference=this.features[0].geometry.spatialReference.toJson());this.features[0]&&(this.features[0].geometry&&(d.geometryType=b.getJsonType(this.features[0].geometry)),d.features=e._encodeGraphics(this.features,c));d.geometryType=d.geometryType||this.geometryType;d.exceededTransferLimit=this.exceededTransferLimit;
d.transform=this.transform;return h.fixJson(d)},_hydrate:function(){b.unquantize(this.features,this.geometryType,this.transform);this.transform=null},quantize:function(b){if(!this.geometryType)return this.transform=null,this;var c=b.translate[0],d=b.translate[1],e=b.scale[0],g=b.scale[1],f=this.features,h=function(b,c,d){var e,g,f,h,k,l,r=[];e=0;for(g=b.length;e<g;e++)if(f=b[e],0<e){if(l=c(f[0]),f=d(f[1]),l!==h||f!==k)r.push([l-h,f-k]),h=l,k=f}else h=c(f[0]),k=d(f[1]),r.push([h,k]);return 0<r.length?
r:null},k=function(b,c,d){if("esriGeometryPoint"===b)return function(b){b.x=c(b.x);b.y=d(b.y);return b};if("esriGeometryPolyline"===b||"esriGeometryPolygon"===b)return function(b){var e,g,f,k,l;f=b.rings||b.paths;l=[];e=0;for(g=f.length;e<g;e++)k=f[e],(k=h(k,c,d))&&l.push(k);return 0<l.length?(b.rings?b.rings=l:b.paths=l,b):null};if("esriGeometryMultipoint"===b)return function(b){var e;e=h(b.points,c,d);return 0<e.length?(b.points=e,b):null};if("esriGeometryEnvelope"===b)return function(b){return b}}(this.geometryType,
function(b){return Math.round((b-c)/e)},function(b){return Math.round((d-b)/g)}),l,r;l=0;for(r=f.length;l<r;l++)f[l].geometry&&(k(f[l].geometry)||f[l].setGeometry(null));this.transform=b;return this}});m.createGraphics=function(c){var d=c.geometryType,e=b.createInstance(g.simpleConstructor,c.spatialReference),h=b.getGeometryType(d).accessorConstructor,k=b.unquantizeFunction(d,c.transform);return f.map(c.features,function(c,d){d=b.createInstance(q.simpleConstructor);var g=c.geometry;if(g){var f=d.geometry=
b.createInstance(h);f.setSpatialReference(e);f.setupLazyUnquantization(k,g)}d.attributes=c.attributes;return d})};m.createPolygon=function(d,e,g){var f;d&&(f=b.createInstance(c.accessorConstructor),f.setSpatialReference(e),e=b.unquantizeFunction("esriGeometryPolygon",g),f.setupLazyUnquantization(e,d));return f};l("extend-esri")&&p.setObject("tasks.FeatureSet",m,k);return m})},"esri/graphicsUtils":function(){define("esri/graphicsUtils",["dojo/_base/lang","dojo/_base/array","dojo/has","./kernel","./geometry/Extent"],
function(m,p,f,l,k){var h={graphicsExtent:function(f){if(!f||!f.length)return null;var g=null,e,c=f.length;for(e=0;e<c;e++){var b=f[e].geometry;if(b){var d=b.getExtent();d||"point"!==b.type||null==b.x||null==b.y||(d=new k(b.x,b.y,b.x,b.y,b.spatialReference));d&&(g=g?g.union(d):d)}}return 0>g.getWidth()&&0>g.getHeight()?null:g},getGeometries:function(f){return p.map(f,function(g){return g.geometry})},_encodeGraphics:function(f,g){return p.map(f,function(e,c){e=e.toJson();var b={};e.geometry&&(c=g&&
g[c],b.geometry=c&&c.toJson()||e.geometry);e.attributes&&(b.attributes=e.attributes);return b})}};f("extend-esri")&&m.mixin(l,h);return h})},"esri/tasks/RelationshipQuery":function(){define("esri/tasks/RelationshipQuery",["dojo/_base/declare","dojo/_base/lang","dojo/_base/json","dojo/has","../kernel"],function(m,p,f,l,k){m=m(null,{declaredClass:"esri.tasks.RelationshipQuery",definitionExpression:"",relationshipId:null,returnGeometry:!1,objectIds:null,outSpatialReference:null,outFields:null,orderByFields:null,
toJson:function(){var h={definitionExpression:this.definitionExpression,relationshipId:this.relationshipId,returnGeometry:this.returnGeometry,maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision},k=this.objectIds,g=this.outFields,e=this.outSpatialReference,c=this.orderByFields;k&&(h.objectIds=k.join(","));g&&(h.outFields=g.join(","));e&&(h.outSR=e.wkid||f.toJson(e.toJson()));c&&(h.orderByFields=c.join(","));h._ts=this._ts;return h}});l("extend-esri")&&p.setObject("tasks.RelationshipQuery",
m,k);return m})},"esri/tasks/StatisticDefinition":function(){define("esri/tasks/StatisticDefinition",["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(m,p,f,l){m=m(null,{declaredClass:"esri.tasks.StatisticDefinition",toJson:function(){return{statisticType:this.statisticType,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount}}});f("extend-esri")&&
p.setObject("tasks.StatisticDefinition",m,l);return m})},"esri/arcadeProfiles/popupProfile":function(){define("esri/arcadeProfiles/popupProfile","dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../promiseList ../arcade/Feature ../support/expressionUtils ./utils".split(" "),function(m,p,f,l,k,h,q,g){m=new (m(null,{declaredClass:"esri.arcadeProfiles.PopupProfile",defaults:{globals:{featureSet:["$layer","$datastore","$map"],async:["$layer","$datastore","$map"]},context:{vars:{$feature:"any",$layer:"any",
$datastore:"any",$map:"any"}}},initialize:function(e){var c=[];g.hasGeometryOperations(e)&&c.push(q.enableGeometryOperations());(g.hasFeatureSetOperations(e)||g.hasVariables(e,this.defaults.globals.featureSet))&&c.push(q.enableFeatureSetOperations());g.isAsync(e)&&c.push(q.enableAsyncOperations());return k(c)},isAsync:function(e){e=[e];return g.hasFeatureSetOperations(e)||g.hasVariables(e,this.defaults.globals.async)},parse:function(e){return q.createSyntaxTree(e.expression)},compile:function(e){var c=
p.clone(this.defaults.context);c.useAsync=e.async;return e.syntaxTree?q.createFunction(e.syntaxTree,c):null},getEvalOptions:function(e){var c=e.expression,b=e.feature,d=e.layer,f=e.map;e=e.spatialReference;var b=b&&c.hasVariable("$feature")?h.createFromGraphicLikeObject(b.geometry,b.attributes,d):null,k,l;if(d){var t={spatialReference:e};c.hasVariable("$layer")&&(k=d.getMap()?q.createFeatureSetFromLayer(d,t):q.createFeatureSetFromLayerUrl(d.url,t));c.hasVariable("$datastore")&&(l=(l=g.getServiceUrl(d.url))?
q.createFeatureSetCollectionFromServiceUrl(l,t):null)}c=f&&c.hasVariable("$map")?q.createFeatureSetCollectionFromMap(f):null;return{context:{vars:{$feature:b,$layer:k,$datastore:l,$map:c},spatialReference:e}}}}));f("extend-esri")&&p.setObject("arcadeProfiles.popupProfile",m,l);return m})},"esri/dijit/PopupRenderer":function(){define("esri/dijit/PopupRenderer","require dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/kernel dojo/sniff dojo/query dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojox/html/entities dijit/_Widget dijit/_Templated ../kernel ../lang ../urlUtils ./_EventedWidget dojo/i18n!../nls/jsapi dojo/NodeList-dom".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x,w,y,z,B){var A=0,C=B.widgets.popup,F=B.widgets.templatePicker;p=p([z,u,t],{declaredClass:"esri.dijit._PopupRenderer",constructor:function(){this._nls=l.mixin({},C)},templateString:"\x3cdiv class\x3d'esriViewPopup'\x3e\x3cdiv class\x3d'statusSection hidden' dojoAttachPoint\x3d'_status'\x3e\x3c/div\x3e\x3cdiv class\x3d'mainSection'\x3e\x3cdiv class\x3d'header' dojoAttachPoint\x3d'_title'\x3e\x3c/div\x3e\x3cdiv class\x3d'hzLine'\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d'_description'\x3e\x3c/div\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'attachmentsSection hidden'\x3e\x3cdiv\x3e${_nls.NLS_attach}:\x3c/div\x3e\x3cul dojoAttachPoint\x3d'_attachmentsList'\x3e\x3c/ul\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'mediaSection hidden'\x3e\x3cdiv class\x3d'header' dojoAttachPoint\x3d'_mediaTitle'\x3e\x3c/div\x3e\x3cdiv class\x3d'hzLine'\x3e\x3c/div\x3e\x3cdiv class\x3d'caption' dojoAttachPoint\x3d'_mediaCaption'\x3e\x3c/div\x3e\x3cdiv class\x3d'gallery' dojoAttachPoint\x3d'_gallery'\x3e\x3cdiv class\x3d'mediaHandle prev' dojoAttachPoint\x3d'_prevMedia' dojoAttachEvent\x3d'onclick: _goToPrevMedia'\x3e\x3c/div\x3e\x3cdiv class\x3d'mediaHandle next' dojoAttachPoint\x3d'_nextMedia' dojoAttachEvent\x3d'onclick: _goToNextMedia'\x3e\x3c/div\x3e\x3cul class\x3d'summary'\x3e\x3cli class\x3d'image mediaCount hidden' dojoAttachPoint\x3d'_imageCount'\x3e0\x3c/li\x3e\x3cli class\x3d'image mediaIcon hidden'\x3e\x3c/li\x3e\x3cli class\x3d'chart mediaCount hidden' dojoAttachPoint\x3d'_chartCount'\x3e0\x3c/li\x3e\x3cli class\x3d'chart mediaIcon hidden'\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d'frame' dojoAttachPoint\x3d'_mediaFrame'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'editSummarySection hidden' dojoAttachPoint\x3d'_editSummarySection'\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3cdiv class\x3d'break hidden' dojoAttachPoint\x3d'_mediaBreak'\x3e\x3c/div\x3e\x3cdiv class\x3d'editSummary' dojoAttachPoint\x3d'_editSummary'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e",
showTitle:!0,startup:function(){this.inherited(arguments);this._showStatus(F.loading);this._contentDfd=this.template.getComponents(this.graphic).then(l.hitch(this,this._handleComponentsSuccess)).otherwise(l.hitch(this,this._handleComponentsError))},destroy:function(){this._contentDfd&&this._contentDfd.cancel();this._attachmentsDfd&&this._attachmentsDfd.cancel();this._destroyFrame();this.template=this.graphic=this._nls=this._mediaInfos=this._mediaPtr=this._contentDfd=this._attachmentsDfd=null;this.inherited(arguments)},
_goToPrevMedia:function(){0>this._mediaPtr-1||(this._mediaPtr--,this._updateUI(),this._displayMedia())},_goToNextMedia:function(){this._mediaPtr+1!==this._mediaInfos.length&&(this._mediaPtr++,this._updateUI(),this._displayMedia())},_updateUI:function(){var d=this._mediaInfos,e=d.length,g=this.domNode,f=this._prevMedia,l=this._nextMedia;if(1<e){var r=0,q=0;k.forEach(d,function(b){"image"===b.type?r++:-1!==b.type.indexOf("chart")&&q++});r&&(c.set(this._imageCount,"innerHTML",r),h.query(".summary .image",
g).removeClass("hidden"));q&&(c.set(this._chartCount,"innerHTML",q),h.query(".summary .chart",g).removeClass("hidden"))}else h.query(".summary",g).addClass("hidden"),b.add(f,"hidden"),b.add(l,"hidden");d=this._mediaPtr;0===d?b.add(f,"hidden"):b.remove(f,"hidden");d===e-1?b.add(l,"hidden"):b.remove(l,"hidden");this._destroyFrame()},_displayMedia:function(){var d=this._mediaInfos[this._mediaPtr],e=d.title,g=d.caption,f=h.query(".mediaSection .hzLine",this.domNode)[0];c.set(this._mediaTitle,"innerHTML",
e);b[e?"remove":"add"](this._mediaTitle,"hidden");c.set(this._mediaCaption,"innerHTML",g);b[g?"remove":"add"](this._mediaCaption,"hidden");b[e&&g?"remove":"add"](f,"hidden");this._rid=null;if("image"===d.type)this._showImage(d);else{var k=this,e=["dojox/charting/Chart2D","dojox/charting/action2d/Tooltip"],g=d.value.theme||this.chartTheme;l.isString(g)&&(g=g.replace(/\./gi,"/"),-1===g.indexOf("/")&&(g="dojox/charting/themes/"+g));g||(g="./Rainbow");e.push(g);try{var r=this._rid=A++;m(e,function(b,
c,e){r===k._rid&&(k._rid=null,k._showChart(d.type,d.value,b,c,e))})}catch(Q){}}},_preventNewTab:function(b){return(b=b&&l.trim(b).toLowerCase())&&(0===b.indexOf("mailto:")||0===b.indexOf("tel:"))},_showImage:function(c){b.add(this._mediaFrame,"image");var e=r.get(this._gallery,"height"),g=c.value,k=v.decode(g.linkURL),g=v.decode(g.sourceURL),l;k&&(l=d.create("a",{href:k,target:this._preventNewTab(k)?"":"_blank"},this._mediaFrame));k=c.refreshInterval?this._addURLParameter(g,"timestamp",Date.now()):
g;d.create("img",{className:"esriPopupMediaImage",src:k},l||this._mediaFrame);var q=h.query(".esriPopupMediaImage",this._mediaFrame)[0];this._imageLoadHandle=f.connect(q,"onload",this,function(){this._clearImageHandles();this._imageLoaded(q,e);this._initImageRefresh(c)})},_addURLParameter:function(b,c,d){var e=-1===b.indexOf("?")?"?":"\x26";return b+e+c+"\x3d"+d},_initImageRefresh:function(b){if(b.refreshInterval){var c=6E4*b.refreshInterval;this._imageRefreshHandle=setTimeout(l.hitch(this,function(){this._destroyFrame();
this._showImage(b)}),c)}},_clearImageHandles:function(){f.disconnect(this._imageLoadHandle);this._imageLoadHandle=null;clearTimeout(this._imageRefreshHandle);this._imageRefreshHandle=null},_showChart:function(c,e,g,f,h){b.remove(this._mediaFrame,"image");g=this._chart=new g(d.create("div",{"class":"chart"},this._mediaFrame),{margins:{l:4,t:4,r:4,b:4}});h&&g.setTheme(h);switch(c){case "piechart":g.addPlot("default",{type:"Pie",labels:!1});g.addSeries("Series A",e.fields);break;case "linechart":g.addPlot("default",
{type:"Markers"});g.addAxis("x",{min:0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1});g.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});k.forEach(e.fields,function(b,c){b.x=c+1});g.addSeries("Series A",e.fields);break;case "columnchart":g.addPlot("default",{type:"Columns",gap:3});g.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});g.addSeries("Series A",e.fields);break;case "barchart":g.addPlot("default",{type:"Bars",gap:3}),g.addAxis("x",{includeZero:!0,fixUpper:"minor",
minorLabels:!1}),g.addAxis("y",{vertical:!0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1}),g.addSeries("Series A",e.fields)}this._action=new f(g);g.render()},_destroyFrame:function(){this._rid=null;this._clearImageHandles();this._chart&&(this._chart.destroy(),this._chart=null);this._action&&(this._action.destroy(),this._action=null);c.set(this._mediaFrame,"innerHTML","")},_imageLoaded:function(b,c){var d=b.height;d<c&&r.set(b,"marginTop",Math.round((c-d)/2)+"px")},_attListHandler:function(b,
d){if(b===this._attachmentsDfd){this._attachmentsDfd=null;var e="";d instanceof Error||!d||!d.length||k.forEach(d,function(b){e+="\x3cli\x3e";e+="\x3ca href\x3d'"+y.addProxy(b.url)+"' target\x3d'_blank'\x3e"+(b.name||"[No name]")+"\x3c/a\x3e";e+="\x3c/li\x3e"});c.set(this._attachmentsList,"innerHTML",e||"\x3cli\x3e"+this._nls.NLS_noAttach+"\x3c/li\x3e")}},_createLinkIfURI:function(b,e){var g=y.getURIInfo(b);if(g){var f=b.match(g.pattern);b=f&&f[2];f=v.decode(f[1]);d.create("a",{target:"_blank",href:f,
title:f,innerHTML:w.substitute({appName:g.appName,hierPart:b},g.label)},e)}else c.set(e,"innerHTML",b)},_showStatus:function(d){c.set(this._status,"innerHTML",d);b.remove(this._status,"hidden");h.query(".mainSection",this.domNode).addClass("hidden")},_hideStatus:function(){c.set(this._status,"innerHTML","");b.add(this._status,"hidden");h.query(".mainSection",this.domNode).removeClass("hidden")},_handleComponentsSuccess:function(g){if(g){this._hideStatus();var f=this.showTitle?g.title:"",r=g.description,
q,t=g.fields,u=g.mediaInfos,m=this.domNode,p=this._nls,x=this,w=this.template,y=this.graphic;this._prevMedia.title=p.NLS_prevMedia;this._nextMedia.title=p.NLS_nextMedia;c.set(this._title,"innerHTML",f);f||b.add(this._title,"hidden");!g.hasDescription&&t&&(r="",t=k.map(t,function(b){var c=d.create("tr",{vAlign:"top"});d.create("td",{className:"attrName",innerHTML:v.encode(b[0])},c);var e=d.create("td",{className:"attrValue"},c);this._createLinkIfURI(b[1],e);return c},this),t.length&&(q=d.create("table",
{className:"attrTable",cellPadding:"0px",cellSpacing:"0px"}),k.forEach(t,function(b){q.appendChild(b)})));q?(this._description.appendChild(q),r=!0):c.set(this._description,"innerHTML",r);r||b.add(this._description,"hidden");h.query("a",this._description).forEach(function(b){x._preventNewTab(b.href)?"_blank"===b.target&&c.remove(b,"target"):c.set(b,"target","_blank")});f&&r?h.query(".mainSection .hzLine",m).removeClass("hidden"):f||r?h.query(".mainSection .hzLine",m).addClass("hidden"):h.query(".mainSection",
m).addClass("hidden");if(f=this._attachmentsDfd=w.getAttachments(y))f.addBoth(l.hitch(this,this._attListHandler,f)),c.set(this._attachmentsList,"innerHTML","\x3cli\x3e"+p.NLS_searching+"...\x3c/li\x3e"),h.query(".attachmentsSection",m).removeClass("hidden");u&&u.length&&(h.query(".mediaSection",m).removeClass("hidden"),e.setSelectable(this._mediaFrame,!1),this._mediaInfos=u,this._mediaPtr=0,this._updateUI(),this._displayMedia());g.editSummary&&(c.set(this._editSummary,"innerHTML",g.editSummary),u&&
u.length&&b.remove(this._mediaBreak,"hidden"),b.remove(this._editSummarySection,"hidden"));this.emit("content-update")}else this._showStatus(C.NLS_noInfo)},_handleComponentsError:function(b){b&&"cancel"===b.dojoType||this._showStatus(C.NLS_noInfo)}});q("extend-esri")&&l.setObject("dijit._PopupRenderer",p,x);return p})},"dijit/_Templated":function(){define("dijit/_Templated","./_WidgetBase ./_TemplatedMixin ./_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/kernel".split(" "),
function(m,p,f,l,k,h,q){h.extend(m,{waiRole:"",waiState:""});return k("dijit._Templated",[p,f],{constructor:function(){q.deprecated(this.declaredClass+": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin","","2.0")},_processNode:function(g,e){var c=this.inherited(arguments),b=e(g,"waiRole");b&&g.setAttribute("role",b);(b=e(g,"waiState"))&&l.forEach(b.split(/\s*,\s*/),function(b){-1!=b.indexOf("-")&&(b=b.split("-"),g.setAttribute("aria-"+b[0],b[1]))});
return c}})})},"esri/dijit/_EventedWidget":function(){define("esri/dijit/_EventedWidget","dojo/_base/declare dojo/_base/lang dojo/aspect dojo/on ../Evented dijit/_WidgetBase".split(" "),function(m,p,f,l,k,h){return m([h,k],{_onMap:function(f){var g=this.constructor._onMap,e;g&&g.FINAL||(delete this.constructor._onMap,g=this.registerConnectEvents(),g.FINAL=!0);f=f.toLowerCase();g[f]?e=this[g[f].method]:(f=this._onCamelCase(f),this[f]&&(e=f));return e},on:function(f,g){var e=this._onMap(f),c=f.replace(/\-/g,
""),b="on"+c in this.domNode;return e||!b?this.inherited(arguments):this.own(l(this.domNode,c,g))[0]},emit:function(f,g,e){var c,b,d,h=f.toLowerCase(),k=this.constructor._onMap||this.registerConnectEvents();b=this[this._onMap(h)];g=g||{};g.target||(g.target=this);b&&k&&k[h]&&(this._onObj2Arr(function(){c=Array.prototype.slice.call(arguments)},k[h].argKeys)(g),d=p.mixin({},arguments),d[2]=c,d[0]=k[h].name.replace(/^on/,""));return this.inherited(d||arguments)}})})},"esri/tasks/GeometryService":function(){define("esri/tasks/GeometryService",
"dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/has ../kernel ../request ../deferredUtils ./Task ../geometry/Extent ../geometry/Polyline ../geometry/Polygon ../geometry/Multipoint ../geometry/jsonUtils".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u){m=m(c,{declaredClass:"esri.tasks.GeometryService",_eventMap:{"areas-and-lengths-complete":["result"],"auto-complete-complete":["geometries"],"buffer-complete":["geometries"],"convex-hull-complete":["geometry"],
"cut-complete":["result"],"densify-complete":["geometries"],"difference-complete":["geometries"],"distance-complete":["distance"],"generalize-complete":["geometries"],"intersect-complete":["geometries"],"label-points-complete":["geometries"],"lengths-complete":["result"],"offset-complete":["geometries"],"project-complete":["geometries"],"relation-complete":["relations"],"reshape-complete":["geometry"],"simplify-complete":["geometries"],"trim-extend-complete":["geometries"],"union-complete":["geometry"]},
constructor:function(b){b=p.hitch;this._projectHandler=b(this,this._projectHandler);this._simplifyHandler=b(this,this._simplifyHandler);this._bufferHandler=b(this,this._bufferHandler);this._areasAndLengthsHandler=b(this,this._areasAndLengthsHandler);this._lengthsHandler=b(this,this._lengthsHandler);this._labelPointsHandler=b(this,this._labelPointsHandler);this._relationHandler=b(this,this._relationHandler);this._convexHullHandler=b(this,this._convexHullHandler);this._unionHandler=b(this,this._unionHandler);
this._autoCompleteHandler=b(this,this._autoCompleteHandler);this._reshapeHandler=b(this,this._reshapeHandler);this._cutHandler=b(this,this._cutHandler);this._intersectHandler=b(this,this._intersectHandler);this._differenceHandler=b(this,this._differenceHandler);this._trimExtendHandler=b(this,this._trimExtendHandler);this._densifyHandler=b(this,this._densifyHandler);this._generalizeHandler=b(this,this._densifyHandler);this._offsetHandler=b(this,this._offsetHandler);this._distanceHandler=b(this,this._distanceHandler);
this._toGeoCoordinateHandler=b(this,this._toGeoCoordinateHandler);this._fromGeoCoordinateHandler=b(this,this._fromGeoCoordinateHandler);this.registerConnectEvents()},_encodeGeometries:function(b){var c=[],d,e=b.length;for(d=0;d<e;d++)c.push(b[d].toJson());return{geometryType:u.getJsonType(b[0]),geometries:c}},_decodeGeometries:function(b,c,d){var e=u.getGeometryType(c);b=b.geometries;var g=[],h={spatialReference:d.toJson()},k=p.mixin;f.forEach(b,function(b,c){g[c]=new e(k(b,h))});return g},_toProjectGeometry:function(c){var e=
c.spatialReference.toJson();return c instanceof b?new r({rings:[[[c.xmin,c.ymin],[c.xmin,c.ymax],[c.xmax,c.ymax],[c.xmax,c.ymin],[c.xmin,c.ymin]]],spatialReference:e}):new d({paths:[[].concat(c.points)],spatialReference:e})},_fromProjectedGeometry:function(c,d,e){return"esriGeometryEnvelope"===d?(c=c.rings[0],new b(c[0][0],c[0][1],c[2][0],c[2][1],e)):new v({points:c.paths[0],spatialReference:e.toJson()})},project:function(b,c,d,f){var h=p.mixin({},this._url.query,{f:"json"}),r;b.geometries?(f=d,d=
c,c=b.outSR,r=b.geometries[0],h=p.mixin(h,b.toJson())):(r=b[0],h=p.mixin(h,{outSR:c.wkid||l.toJson(c.toJson()),inSR:r.spatialReference.wkid||l.toJson(r.spatialReference.toJson()),geometries:l.toJson(this._encodeGeometries(b))}));var q=u.getJsonType(r),t=this._projectHandler,m=this._errorHandler,v=new k(e._dfdCanceller);v._pendingDfd=g({url:this._url.path+"/project",content:h,callbackParamName:"callback",load:function(b,e){t(b,e,q,c,d,f,v)},error:function(b){m(b,f,v)}});return v},_projectHandler:function(b,
c,d,e,g,f,h){try{var k=this._decodeGeometries(b,d,e);this._successHandler([k],"onProjectComplete",g,h)}catch(F){this._errorHandler(F,f,h)}},onProjectComplete:function(){},simplify:function(b,c,d){var f=b[0].spatialReference,h=p.mixin({},this._url.query,{f:"json",sr:f.wkid?f.wkid:l.toJson(f.toJson()),geometries:l.toJson(this._encodeGeometries(b))}),r=u.getJsonType(b[0]),q=this._simplifyHandler,t=this._errorHandler,m=new k(e._dfdCanceller);m._pendingDfd=g({url:this._url.path+"/simplify",content:h,callbackParamName:"callback",
load:function(b,e){q(b,e,r,f,c,d,m)},error:function(b){t(b,d,m)}});return m},_simplifyHandler:function(b,c,d,e,g,f,h){try{var k=this._decodeGeometries(b,d,e);this._successHandler([k],"onSimplifyComplete",g,h)}catch(F){this._errorHandler(F,f,h)}},onSimplifyComplete:function(){},convexHull:function(b,c,d){var f=b[0].spatialReference;b=p.mixin({},this._url.query,{f:"json",sr:l.toJson(f.toJson()),geometries:l.toJson(this._encodeGeometries(b))});var h=this._convexHullHandler,r=this._errorHandler,q=new k(e._dfdCanceller);
q._pendingDfd=g({url:this._url.path+"/convexHull",content:b,callbackParamName:"callback",load:function(b,e){h(b,e,f,c,d,q)},error:function(b){r(b,d,q)}});return q},_convexHullHandler:function(b,c,d,e,g,f){try{var h=u.fromJson(b.geometry).setSpatialReference(d);this._successHandler([h],"onConvexHullComplete",e,f)}catch(C){this._errorHandler(C,g,f)}},onConvexHullComplete:function(){},union:function(b,c,d){var f=b[0].spatialReference;b=p.mixin({},this._url.query,{f:"json",sr:l.toJson(f.toJson()),geometries:l.toJson(this._encodeGeometries(b))});
var h=this._unionHandler,r=this._errorHandler,q=new k(e._dfdCanceller);q._pendingDfd=g({url:this._url.path+"/union",content:b,callbackParamName:"callback",load:function(b,e){h(b,e,f,c,d,q)},error:function(b){r(b,d,q)}});return q},_unionHandler:function(b,c,d,e,g,f){try{var h=u.fromJson(b.geometry).setSpatialReference(d);this._successHandler([h],"onUnionComplete",e,f)}catch(C){this._errorHandler(C,g,f)}},onUnionComplete:function(){},autoComplete:function(b,c,d,f){var h=b[0].spatialReference;b=p.mixin({},
this._url.query,{f:"json",sr:l.toJson(h.toJson()),polygons:l.toJson(this._encodeGeometries(b).geometries),polylines:l.toJson(this._encodeGeometries(c).geometries)});var r=this._autoCompleteHandler,q=this._errorHandler,u=new k(e._dfdCanceller);u._pendingDfd=g({url:this._url.path+"/autoComplete",content:b,callbackParamName:"callback",load:function(b,c){r(b,c,h,d,f,u)},error:function(b){q(b,f,u)}});return u},_autoCompleteHandler:function(b,c,d,e,g,f){try{var h=b.geometries;b=[];var k,l=h.length;for(k=
0;k<l;k++)b[k]=new r({spatialReference:d,rings:h[k].rings});this._successHandler([b],"onAutoCompleteComplete",e,f)}catch(E){this._errorHandler(E,g,f)}},onAutoCompleteComplete:function(){},reshape:function(b,c,d,f){var h=b.spatialReference;b=p.mixin({},this._url.query,{f:"json",sr:l.toJson(h.toJson()),target:l.toJson({geometryType:u.getJsonType(b),geometry:b.toJson()}),reshaper:l.toJson(c.toJson())});var r=this._reshapeHandler,q=this._errorHandler,t=new k(e._dfdCanceller);t._pendingDfd=g({url:this._url.path+
"/reshape",content:b,callbackParamName:"callback",load:function(b,c){r(b,c,h,d,f,t)},error:function(b){q(b,f,t)}});return t},_reshapeHandler:function(b,c,d,e,g,f){try{var h=u.fromJson(b.geometry).setSpatialReference(d);this._successHandler([h],"onReshapeComplete",e,f)}catch(C){this._errorHandler(C,g,f)}},onReshapeComplete:function(){},cut:function(b,c,d,h){var r=b[0].spatialReference,q=f.map(b,function(b){return b.toJson()});b=p.mixin({},this._url.query,{f:"json",sr:l.toJson(r.toJson()),target:l.toJson({geometryType:u.getJsonType(b[0]),
geometries:q}),cutter:l.toJson(c.toJson())});var t=this._cutHandler,m=this._errorHandler,v=new k(e._dfdCanceller);v._pendingDfd=g({url:this._url.path+"/cut",content:b,callbackParamName:"callback",load:function(b,c){t(b,c,r,d,h,v)},error:function(b){m(b,h,v)}});return v},_cutHandler:function(b,c,d,e,g,h){try{var k=b.geometries,l={};l.cutIndexes=b.cutIndexes;l.geometries=[];f.forEach(k,function(b){l.geometries.push(u.fromJson(b).setSpatialReference(d))});this._successHandler([l],"onCutComplete",e,h)}catch(F){this._errorHandler(F,
g,h)}},onCutComplete:function(){},intersect:function(b,c,d,f){var h=b[0].spatialReference;b=p.mixin({},this._url.query,{f:"json",sr:l.toJson(h.toJson()),geometries:l.toJson(this._encodeGeometries(b)),geometry:l.toJson({geometryType:u.getJsonType(c),geometry:c.toJson()})});var r=this._intersectHandler,q=this._errorHandler,t=new k(e._dfdCanceller);t._pendingDfd=g({url:this._url.path+"/intersect",content:b,callbackParamName:"callback",load:function(b,c){r(b,c,h,d,f,t)},error:function(b){q(b,f,t)}});
return t},_intersectHandler:function(b,c,d,e,g,h){try{var k=[];f.forEach(b.geometries,function(b){k.push(u.fromJson(b).setSpatialReference(d))});this._successHandler([k],"onIntersectComplete",e,h)}catch(C){this._errorHandler(C,g,h)}},onIntersectComplete:function(){},difference:function(b,c,d,f){var h=b[0].spatialReference;b=p.mixin({},this._url.query,{f:"json",sr:l.toJson(h.toJson()),geometries:l.toJson(this._encodeGeometries(b)),geometry:l.toJson({geometryType:u.getJsonType(c),geometry:c.toJson()})});
var r=this._differenceHandler,q=this._errorHandler,t=new k(e._dfdCanceller);t._pendingDfd=g({url:this._url.path+"/difference",content:b,callbackParamName:"callback",load:function(b,c){r(b,c,h,d,f,t)},error:function(b){q(b,f,t)}});return t},_differenceHandler:function(b,c,d,e,g,h){try{var k=[];f.forEach(b.geometries,function(b){k.push(u.fromJson(b).setSpatialReference(d))});this._successHandler([k],"onDifferenceComplete",e,h)}catch(C){this._errorHandler(C,g,h)}},onDifferenceComplete:function(){},buffer:function(b,
c,d){var f=p.mixin({},this._url.query,{f:"json"},b.toJson()),h=b.outSpatialReference||b.geometries[0].spatialReference,l=this._bufferHandler,r=this._errorHandler,q=new k(e._dfdCanceller);q._pendingDfd=g({url:this._url.path+"/buffer",content:f,callbackParamName:"callback",load:function(b,e){l(b,e,h,c,d,q)},error:function(b){r(b,d,q)}});return q},_bufferHandler:function(b,c,d,e,g,f){try{var h=b.geometries;b=[];var k,l=h.length;for(k=0;k<l;k++)b[k]=new r({spatialReference:d,rings:h[k].rings});this._successHandler([b],
"onBufferComplete",e,f)}catch(E){this._errorHandler(E,g,f)}},onBufferComplete:function(){},areasAndLengths:function(b,c,d){b=p.mixin({},this._url.query,{f:"json"},b.toJson());var f=this._areasAndLengthsHandler,h=this._errorHandler,l=new k(e._dfdCanceller);l._pendingDfd=g({url:this._url.path+"/areasAndLengths",content:b,callbackParamName:"callback",load:function(b,e){f(b,e,c,d,l)},error:function(b){h(b,d,l)}});return l},_areasAndLengthsHandler:function(b,c,d,e,g){try{this._successHandler([b],"onAreasAndLengthsComplete",
d,g)}catch(B){this._errorHandler(B,e,g)}},onAreasAndLengthsComplete:function(){},lengths:function(b,c,d){b=p.mixin({},this._url.query,{f:"json"},b.toJson());var f=this._lengthsHandler,h=this._errorHandler,l=new k(e._dfdCanceller);l._pendingDfd=g({url:this._url.path+"/lengths",content:b,callbackParamName:"callback",load:function(b,e){f(b,e,c,d,l)},error:function(b){h(b,d,l)}});return l},_lengthsHandler:function(b,c,d,e,g){try{this._successHandler([b],"onLengthsComplete",d,g)}catch(B){this._errorHandler(B,
e,g)}},onLengthsComplete:function(){},labelPoints:function(b,c,d){var h=f.map(b,function(b){return b.toJson()}),r=b[0].spatialReference,h=p.mixin({},this._url.query,{f:"json",sr:r.wkid?r.wkid:l.toJson(r.toJson()),polygons:l.toJson(h)}),q=this._labelPointsHandler,u=this._errorHandler,m=new k(e._dfdCanceller);m._pendingDfd=g({url:this._url.path+"/labelPoints",content:h,callbackParamName:"callback",load:function(e,g){q(e,g,b,r,c,d,m)},error:function(b){u(b,d,m)}});return m},_labelPointsHandler:function(b,
c,d,e,g,h,k){try{var l=[];f.forEach(b.labelPoints,function(b){l.push(u.fromJson(b).setSpatialReference(e))});this._successHandler([l],"onLabelPointsComplete",g,k)}catch(F){this._errorHandler(F,h,k)}},onLabelPointsComplete:function(){},relation:function(b,c,d){b=p.mixin({},this._url.query,{f:"json"},b.toJson());var f=this._relationHandler,h=this._errorHandler,l=new k(e._dfdCanceller);l._pendingDfd=g({url:this._url.path+"/relation",content:b,callbackParamName:"callback",load:function(b,e){f(b,e,c,d,
l)},error:function(b){h(b,d,l)}});return l},_relationHandler:function(b,c,d,e,g){try{this._successHandler([b.relations],"onRelationComplete",d,g)}catch(B){this._errorHandler(B,e,g)}},onRelationComplete:function(){},trimExtend:function(b,c,d){var f=p.mixin({},this._url.query,{f:"json"},b.toJson()),h=b.sr,l=this._trimExtendHandler,r=this._errorHandler,q=new k(e._dfdCanceller);q._pendingDfd=g({url:this._url.path+"/trimExtend",content:f,callbackParamName:"callback",load:function(b,e){l(b,e,h,c,d,q)},
error:function(b){r(b,d,q)}});return q},_trimExtendHandler:function(b,c,e,g,f,h){try{var k=b.geometries;b=[];var l,r=k.length;for(l=0;l<r;l++)b[l]=new d({spatialReference:e,paths:k[l].paths});this._successHandler([b],"onTrimExtendComplete",g,h)}catch(E){this._errorHandler(E,f,h)}},onTrimExtendComplete:function(){},densify:function(b,c,d){var f=p.mixin({},this._url.query,{f:"json"},b.toJson()),h=b.geometries[0].spatialReference,l=this._densifyHandler,r=this._errorHandler,q=new k(e._dfdCanceller);q._pendingDfd=
g({url:this._url.path+"/densify",content:f,callbackParamName:"callback",load:function(b,e){l(b,e,h,c,d,q)},error:function(b){r(b,d,q)}});return q},_densifyHandler:function(b,c,d,e,g,h){try{var k=[];f.forEach(b.geometries,function(b){k.push(u.fromJson(b).setSpatialReference(d))});this._successHandler([k],"onDensifyComplete",e,h)}catch(C){this._errorHandler(C,g,h)}},onDensifyComplete:function(){},generalize:function(b,c,d){var f=p.mixin({},this._url.query,{f:"json"},b.toJson()),h=b.geometries[0].spatialReference,
l=this._generalizeHandler,r=this._errorHandler,q=new k(e._dfdCanceller);q._pendingDfd=g({url:this._url.path+"/generalize",content:f,callbackParamName:"callback",load:function(b,e){l(b,e,h,c,d,q)},error:function(b){r(b,d,q)}});return q},_generalizeHandler:function(b,c,d,e,g,h){try{var k=[];f.forEach(b.geometries,function(b){k.push(u.fromJson(b).setSpatialReference(d))});this._successHandler([k],"onGeneralizeComplete",e,h)}catch(C){this._errorHandler(C,g,h)}},onGeneralizeComplete:function(){},offset:function(b,
c,d){var f=p.mixin({},this._url.query,{f:"json"},b.toJson()),h=b.geometries[0].spatialReference,l=this._offsetHandler,r=this._errorHandler,q=new k(e._dfdCanceller);q._pendingDfd=g({url:this._url.path+"/offset",content:f,callbackParamName:"callback",load:function(b,e){l(b,e,h,c,d,q)},error:function(b){r(b,d,q)}});return q},_offsetHandler:function(b,c,d,e,g,h){try{var k=[];f.forEach(b.geometries,function(b){k.push(u.fromJson(b).setSpatialReference(d))});this._successHandler([k],"onOffsetComplete",e,
h)}catch(C){this._errorHandler(C,g,h)}},onOffsetComplete:function(){},distance:function(b,c,d){var f=p.mixin({},this._url.query,{f:"json"},b.toJson()),h=b.geometry1.spatialReference,l=this._distanceHandler,r=this._errorHandler,q=new k(e._dfdCanceller);q._pendingDfd=g({url:this._url.path+"/distance",content:f,callbackParamName:"callback",load:function(b,e){l(b,e,h,c,d,q)},error:function(b){r(b,d,q)}});return q},_distanceHandler:function(b,c,d,e,g,f){try{b=b&&b.distance,this._successHandler([b],"onDistanceComplete",
e,f)}catch(A){this._errorHandler(A,g,f)}},onDistanceComplete:function(){},toGeoCoordinateString:function(b,c,d){var f={};p.isObject(b.sr)?f.sr=b.sr.wkid||l.toJson(b.sr.toJson()):f.sr=b.sr;f.coordinates=l.toJson(b.coordinates);f.conversionType=b.conversionType||"MGRS";f.conversionMode=b.conversionMode;f.numOfDigits=b.numOfDigits;f.rounding=b.rounding;f.addSpaces=b.addSpaces;b=p.mixin({},this._url.query,{f:"json"},f);var h=this._toGeoCoordinateHandler,r=this._errorHandler,q=new k(e._dfdCanceller);q._pendingDfd=
g({url:this._url.path+"/toGeoCoordinateString",content:b,callbackParamName:"callback",load:function(b,e){h(b,e,c,d,q)},error:function(b){r(b,d,q)}});return q},_toGeoCoordinateHandler:function(b,c,d,e,g){try{this._successHandler([b.strings],"onToGeoCoordinateStringComplete",d,g)}catch(B){this._errorHandler(B,e,g)}},onToGeoCoordinateStringComplete:function(){},fromGeoCoordinateString:function(b,c,d){var f={};p.isObject(b.sr)?f.sr=b.sr.wkid||l.toJson(b.sr.toJson()):f.sr=b.sr;f.strings=l.toJson(b.strings);
f.conversionType=b.conversionType||"MGRS";f.conversionMode=b.conversionMode;b=p.mixin({},this._url.query,{f:"json"},f);var h=this._fromGeoCoordinateHandler,r=this._errorHandler,q=new k(e._dfdCanceller);q._pendingDfd=g({url:this._url.path+"/fromGeoCoordinateString",content:b,callbackParamName:"callback",load:function(b,e){h(b,e,c,d,q)},error:function(b){r(b,d,q)}});return q},_fromGeoCoordinateHandler:function(b,c,d,e,g){try{this._successHandler([b.coordinates],"onToGeoCoordinateStringComplete",d,g)}catch(B){this._errorHandler(B,
e,g)}},onFromGeoCoordinateStringComplete:function(){}});p.mixin(m,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,
UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,
UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,
UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"});
h("extend-esri")&&p.setObject("tasks.GeometryService",m,q);return m})},"esri/layers/FeatureLayer":function(){define("esri/layers/FeatureLayer","require module dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/date/locale dojo/io-query dojo/dom-construct dojo/i18n dojo/when dojo/global dojo/promise/all ../sniff ../kernel ../lang ../request ../config ../deferredUtils ../promiseList ../SpatialReference ../urlUtils ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../symbols/jsonUtils ../renderers/SimpleRenderer ../renderers/UniqueValueRenderer ../renderers/jsonUtils ../support/expressionUtils ../arcadeProfiles/labelingProfile ../tasks/QueryTask ../tasks/query ../tasks/FeatureSet ../tasks/StatisticDefinition ../geometry/Extent ../geometry/jsonUtils ../geometry/normalizeUtils ../geometry/scaleUtils ./GraphicsLayer ./Field ./TimeInfo ./TimeReference ./FeatureType ./FeatureTemplate ./FeatureEditResult ./LabelClass ./SnapshotMode ./OnDemandMode ./SelectionMode ./StreamMode ./GridLayout ./TrackManager ./HeatmapManager ./clustering/ClusterManager dojo/i18n!../nls/jsapi dojo/has!extend-esri?./agscommon".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x,w,y,z,B,A,C,F,E,H,D,G,I,P,Q,O,N,M,J,K,U,R,Y,aa,S,ma,ha,la,ca,ia,fa,ea,pa,ka,na,ja,Fa,Ga,ga,va,ra,qa){var Ma=z.defaults,ya=!!t("esri-pbf"),Ja=!!t("esri-featurelayer-pbf"),ba=f(ma,{declaredClass:"esri.layers.FeatureLayer",invalidParams:"query contains one or more unsupported parameters",reSQLCurrentTimestamp:/current_timestamp|current_date|current_time/i,reHostedFS:/(https?:)?\/\/services.*\.arcgis\.com/i,maxPointCountForAuto:4E3,maxRecordCountForAuto:2E3,
maxVertexCountForAuto:25E4,generalizeForScale:4E3,_eventMap:{"add-attachment-complete":["result"],"before-apply-edits":["adds","updates","deletes"],"delete-attachments-complete":["results"],"edits-complete":["adds","updates","deletes"],"query-attachment-infos-complete":["results"],"query-count-complete":["count"],"query-features-complete":["featureSet"],"query-ids-complete":["objectIds"],"query-related-features-complete":["featureSets"],"selection-complete":["features","method"],"update-end":["error",
"info"]},constructor:function(b,c){this._preventInit||this._initFeatureLayer(b,c)},_initFeatureLayer:function(b,c){c=c||{};this._tileWidth=c.tileWidth||512;this._tileHeight=c.tileHeight||512;this.i18n=qa;this._featureReduction=this._featureReduction||c.featureReduction;this._featureReductionEnabled=null!=c.featureReductionEnabled?c.featureReductionEnabled:!0;this._featureUpdatesCheckEnabled=null!=c.featureUpdatesCheckEnabled?c.featureUpdatesCheckEnabled:!0;this.showLabels=null!=c.showLabels?c.showLabels:
!0;this._outFields=c.outFields;this._defnExpr=c.definitionExpression;this._loadCallback=c.loadCallback;this._trackIdField=c.trackIdField;this.objectIdField=c.objectIdField;var d=null!=c.resolution,e=null!=c.maxAllowableOffset;this._maxOffset=this._optMaxOffset=d||e?d?c.resolution:c.maxAllowableOffset:this.maxAllowableOffset;this.quantize=null!=c.quantize?c.quantize:!0;this._optEditable=c.editable;this._optAutoGen=c.autoGeneralize;this.editSummaryCallback=c.editSummaryCallback;this.userId=c.userId;
this.userIsAdmin=c.userIsAdmin;this.useMapTime=c.hasOwnProperty("useMapTime")?!!c.useMapTime:!0;this.source=c.source;this.gdbVersion=c.gdbVersion;this.orderByFields=c.orderByFields;this.maxPointCountForAuto=null!=c.maxPointCountForAuto?c.maxPointCountForAuto:this.maxPointCountForAuto;this.maxRecordCountForAuto=null!=c.maxRecordCountForAuto?c.maxRecordCountForAuto:this.maxRecordCountForAuto;this.maxVertexCountForAuto=null!=c.maxVertexCountForAuto?c.maxVertexCountForAuto:this.maxVertexCountForAuto;
this.generalizeForScale=null!=c.generalizeForScale?c.generalizeForScale:this.generalizeForScale;this.queryPagination=this._optQueryPagination=null!=c.queryPagination?c.queryPagination:!0;this.multipatchOption=c.multipatchOption;this._selectedFeatures={};this._newFeatures=[];this._deletedFeatures={};this._ulid=this._getUniqueId();d=w.isDefined(c.mode)?c.mode:ba.MODE_ONDEMAND;this._isStream&&(d=ba.MODE_STREAM);this.mode=d;switch(d){case ba.MODE_SNAPSHOT:this.currentMode=ba.MODE_SNAPSHOT;this._mode=
new ka(this);break;case ba.MODE_ONDEMAND:case ba.MODE_AUTO:this.currentMode=ba.MODE_ONDEMAND;this._mode=new na(this);this.latticeTiling=c.latticeTiling;break;case ba.MODE_SELECTION:this.currentMode=ba.MODE_SELECTION;this._mode=new ja(this);this._isSelOnly=!0;break;case ba.MODE_STREAM:this.currentMode=ba.MODE_STREAM,this._mode=new Fa(this),this._isStream=!0}this._initLayer=k.hitch(this,this._initLayer);this._selectHandler=k.hitch(this,this._selectHandler);this._editable=!1;if(k.isObject(b)&&b.layerDefinition)return this._collection=
!0,this.mode=this._isStream?ba.MODE_STREAM:ba.MODE_SNAPSHOT,this._isStream||this._outFields||(this._outFields=["*"]),this._initLayer(b),this;this.source&&(b={source:this.source.toJson()},this._url.query=k.mixin(this._url.query,{layer:q.toJson(b)}));this.gdbVersion&&(this._url.query=k.mixin(this._url.query,{gdbVersion:this.gdbVersion}));this._task=new M(this.url,{source:this.source,gdbVersion:this.gdbVersion});b=this._url.path;this._fserver=!1;-1!==b.search(/\/FeatureServer\//i)&&(this._fserver=!0);
this._checkFeatureLimit();(c=c.resourceInfo)?this._initLayer(c):y({url:b,content:k.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});this.registerConnectEvents()},_initLayer:function(b,c){if(b||c){this._json=b;this._findCredential();if(this.credential&&this.credential.ssl||b&&b._ssl)this._useSSL(),this._task._useSSL();this._collection&&(this._isStream||(this.currentMode=ba.MODE_SNAPSHOT,this._mode=new ka(this)),this._featureSet=b.featureSet,
this._nextId=b.nextObjectId,b=b.layerDefinition);(this.version=b.currentVersion)||(this.version="capabilities"in b||"drawingInfo"in b||"hasAttachments"in b||"htmlPopupType"in b||"relationships"in b||"timeInfo"in b||"typeIdField"in b||"types"in b?10:9.3);this.geometryType=b.geometryType;b.bandCount&&b.fields&&1<b.fields.length&&(this.geometryType="esriGeometryPolygon",this._isImageService=!0);"string"!==typeof this.multipatchOption&&"esriGeometryMultiPatch"===this.geometryType&&(this.multipatchOption=
"xyFootprint");b.hasOwnProperty("capabilities")?(c=this.capabilities=b.capabilities)&&-1!==c.toLowerCase().indexOf("editing")?this._editable=!0:this._editable=!1:this._collection||(this._editable=this._fserver);w.isDefined(this._optEditable)?(this._editable=this._optEditable,delete this._optEditable):"esriGeometryMultiPatch"===this.geometryType&&(this._editable=!1);this._isImageService&&(this._editable=!1);this._json=q.toJson(this._json);this.isEditable()?this._setMaxOffset(null):this._canAutoGeneralize()&&
(this._autoGeneralize=w.isDefined(this._optAutoGen)?this._optAutoGen:this.mode===ba.MODE_ONDEMAND||this.mode===ba.MODE_AUTO,delete this._optAutoGen);c=b.effectiveMinScale||b.minScale;var d=b.effectiveMaxScale||b.maxScale;!this._hasMin&&c&&this.setMinScale(c);!this._hasMax&&d&&this.setMaxScale(d);this.layerId=b.id;this.name=b.name;this.description=b.description;this.copyright=b.copyrightText;this.type=b.type;this.displayField=b.displayField;this.defaultDefinitionExpression=b.definitionExpression||
(b.isView?b.viewDefinitionQuery:b.definitionQuery);this.fullExtent=new R(b.extent);this.initialExtent=new R(this.fullExtent.toJson());this.fullExtent.spatialReference&&(this.spatialReference=new C(this.fullExtent.spatialReference.toJson()));this.defaultVisibility=b.defaultVisibility;this.editingInfo=b.editingInfo;this.supportsLastEditDate=!(!this.editingInfo||null==this.editingInfo.lastEditDate);if("esriGeometryPoint"===this.geometryType||"esriGeometryMultipoint"===this.geometryType)this.latticeTiling=
!1;this.hasM=b.hasM||!1;this.hasZ=b.hasZ||!1;this.indexedFields=b.indexedFields;this.indexes=b.indexes;this.maxRecordCount=b.maxRecordCount;this.canModifyLayer=b.canModifyLayer;this.supportsStatistics=b.supportsStatistics;this.supportsAdvancedQueries=this._collection?!1:b.supportsAdvancedQueries;this.supportsCalculate=b.supportsCalculate;this.supportsASyncCalculate=b.supportsASyncCalculate;this.supportsAttachmentsByUploadId=b.supportsAttachmentsByUploadId;this.supportsCoordinatesQuantization=b.supportsCoordinatesQuantization;
this.supportsQuantizationEditMode=b.supportsQuantizationEditMode;this.supportsFieldDescription=b.supportsFieldDescriptionProperty;this.supportsFormatPBF=b.supportedQueryFormats?-1!==h.map(b.supportedQueryFormats.toLowerCase().split(","),k.trim).indexOf("pbf"):!1;this.quantize=this.quantize&&this.supportsCoordinatesQuantization;this.hasLabels=b.hasLabels;this.canScaleSymbols=b.canScaleSymbols;this.supportsRollbackOnFailureParameter=this.supportsRollbackOnFailure=b.supportsRollbackOnFailure;this.syncCanReturnChanges=
b.syncCanReturnChanges;this.isDataVersioned=b.isDataVersioned;this.editFieldsInfo=b.editFieldsInfo;this.ownershipBasedAccessControlForFeatures=b.ownershipBasedAccessControlForFeatures;this.editFieldsInfo&&this.ownershipBasedAccessControlForFeatures&&(this.creatorField=this.editFieldsInfo.creatorField);this.relationships=b.relationships;this.allowGeometryUpdates=w.isDefined(b.allowGeometryUpdates)?b.allowGeometryUpdates:!0;this.allowUpdateWithoutMValues=!!b.allowUpdateWithoutMValues;this.enableZDefaults=
!!b.enableZDefaults;this.zDefault=w.isDefined(b.zDefault)?b.zDefault:null;this.advancedQueryCapabilities=b.advancedQueryCapabilities||{supportsStatistics:this.supportsStatistics,supportsOrderBy:this.supportsAdvancedQueries,supportsDistinct:this.supportsAdvancedQueries};this.geometryProperties=b.hasGeometryProperties&&b.geometryProperties||null;this.url&&(this.advancedQueryCapabilities.supportsPagination=this.advancedQueryCapabilities.supportsPagination&&(this.reHostedFS.test(this.url)||10.3<this.version));
this.queryPagination=this._optQueryPagination&&this.advancedQueryCapabilities.supportsPagination;this.useStandardizedQueries=b.useStandardizedQueries;this.tileMaxRecordCount=b.tileMaxRecordCount;this.standardMaxRecordCount=b.standardMaxRecordCount;if(c=b.dateFieldsTimeReference)this.dateFieldsTimeReference=new ca(c);this._setMaxOffset(this._maxOffset,!0);this._isTable="Table"===this.type;d=b.fields;this._createFields(d);if(!this.objectIdField&&(this.objectIdField=b.objectIdField,!this.objectIdField))for(d=
b.fields,c=0;c<d.length;c++){var e=d[c];if("esriFieldTypeOID"===e.type){this.objectIdField=e.name;break}}if(!w.isDefined(this._nextId)){d=this.objectIdField;e=-1;if(this._collection&&d){var g=(c=this._featureSet)&&c.features,f=g?g.length:0,l;for(c=0;c<f;c++)l=(l=g[c].attributes)&&l[d],l>e&&(e=l)}this._nextId=e+1}this.globalIdField=b.globalIdField;if(c=this.typeIdField=b.typeIdField)if(c=!this._getField(c)&&this._getField(c,!0))this.typeIdField=c.name;this.visibilityField=b.visibilityField;if(d=b.defaultSymbol)this.defaultSymbol=
G.fromJson(d);var r=this.types=[],u=b.types,m,p,e=(c=this.editFieldsInfo)&&c.creatorField,g=c&&c.editorField;l=e||g;f=[];if(u)for(c=0;c<u.length;c++)m=new ia(u[c]),p=m.templates,l&&p&&p.length&&(f=f.concat(p)),r.push(m);u=b.templates;m=this.templates=[];if(u)for(c=0;c<u.length;c++)r=new fa(u[c]),l&&f.push(r),m.push(r);for(c=0;c<f.length;c++)if(l=k.getObject("prototype.attributes",!1,f[c]))e&&delete l[e],g&&delete l[g];if(c=b.timeInfo)this.timeInfo=new la(c),this._startTimeField=c.startTimeField,this._endTimeField=
c.endTimeField,this._startTimeField&&this._endTimeField&&(this._twoTimeFields=!0),this._trackIdField?c.trackIdField=this._trackIdField:this._trackIdField=c.trackIdField;this.hasAttachments=!this._collection&&b.hasAttachments?!0:!1;this.htmlPopupType=b.htmlPopupType;c=b.drawingInfo;var v;(e=c&&c.labelingInfo)&&!this.labelingInfo&&(this.labelingInfo=h.map(e,function(b){return new pa(b)}),this._fixLabelExpr());if(!this.renderer)if(c&&c.renderer){if(v=c.renderer,this.setRenderer(Q.fromJson(v,{geometryType:this.geometryType})),
"classBreaks"===v.type&&this.renderer.setMaxInclusive(!0),!this._collection){var x=v.type,d=[];v=this.renderer;switch(x){case "simple":d.push(v.symbol);break;case "uniqueValue":case "classBreaks":d.push(v.defaultSymbol),d=d.concat(h.map(v.infos,function(b){return b.symbol}))}var d=h.filter(d,w.isDefined),y=this._url.path+"/images/",N=this._getToken();h.forEach(d,function(b){var c=b.url;c&&(-1===c.search(/https?\:/)&&-1===c.indexOf("data:")&&(b.url=y+c),N&&-1!==b.url.search(/https?\:/)&&(b.url+="?token\x3d"+
N))})}}else if(d)u=this.types,0<u.length?(v=new P(this.defaultSymbol,this.typeIdField),h.forEach(u,function(b){v.addValue(b.id,b.symbol)})):v=new I(this.defaultSymbol),this.setRenderer(v);else if(!this._isTable){switch(this.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":x=new E;break;case "esriGeometryPolyline":x=new H;break;case "esriGeometryPolygon":x=new D;break;default:this.hasXYFootprint()&&(x=new D)}this.setRenderer(x?new I(x):null)}x=c&&c.transparency||0;!this.hasOwnProperty("opacity")&&
0<x&&(this.opacity=1-x/100);(t("ie")||7<=t("trident")||t("safari"))&&this.isEditable()&&10.02>this.version&&(this._ts=!0);this.statistics=b.statistics;this._fixRendererFields();this._updateRequiredFieldsFromLabelingInfo();this._checkFields();this._updateCaps();var B=function(){null==this._maxOffset||this._isFractionalOffsetAllowed()||this._setMaxOffset(this._maxOffset);this.loaded=!0;this.setFeatureReduction(this.getFeatureReduction());this.currentMode!==ba.MODE_SNAPSHOT&&(this.queryPagination=!1);
this.onLoad(this);var b=this._loadCallback;b&&(delete this._loadCallback,b(this))};b=[];this._collection?(x=this._featureSet,this._featureSet=null,this._mode._drawFeatures(new K(x)),this._fcAdded=!0):(b.push(this._forceIdentity()),this._limitPromise&&b.push(this._limitPromise));b.push(this._evalArcadeSupport());b.length?A(b).then(k.hitch(this,function(){B.call(this)})):B.call(this)}},setShowLabels:function(b){var c=this.showLabels;this.showLabels=b;c!==this.showLabels&&(this._evalSurfaceType(),this.onShowLabelsChange())},
onShowLabelsChange:function(){},onRendererChange:function(b){this.inherited(arguments);var c=this._map;this._ager=!!(b&&b.observationAger&&b.observationRenderer);b&&"colors"in b&&"blurRadius"in b&&"maxPixelIntensity"in b?(this._evalSurfaceType(!0),"esriGeometryPoint"==this.geometryType&&!this._heatmapManager&&c&&(this._heatmapManager=new va(this),this._heatmapManager.initialize(c))):this.renderer&&this.renderer.getRendererInfo?h.some(this.renderer.rendererInfos,function(b){return b.renderer&&"colors"in
b.renderer&&"blurRadius"in b.renderer})||(this._heatmapManager=null):this._heatmapManager=null;this.timeInfo&&c&&(b&&(b.latestObservationRenderer||b.trackRenderer)?this._trackManager||(this._trackManager=new ga(this),this._trackManager.initialize(c),this._childLayer=this._trackManager.container,this._mode._applyTimeFilter()):this._trackManager&&!this._isStream&&(this._trackManager.destroy(),this._trackManager=null));if(b){var d=[],c=h.filter([b,b.observationRenderer,b.latestObservationRenderer,b.trackRenderer],
w.isDefined),e=function(b){return null!=b&&"function"!=typeof b&&b};h.forEach(c,function(b){var c=e(b.attributeField),g=e(b.attributeField2);b=e(b.attributeField3);!1!==c&&d.push(c);!1!==g&&d.push(g);!1!==b&&d.push(b)});this._requiredFields=d}else this._requiredFields=[];this.loaded&&(this._fixRendererFields(),this._checkFields(this._requiredFields),this._collection&&(this._typesDirty=!0))},setFeatureReduction:function(b){b&&(b=k.mixin({},b),null!=b.clusterSize&&null==b.clusterRadius&&(b.clusterRadius=
b.clusterSize),delete b.clusterSize);this.loaded?this._isFeatureReductionSupported(b)?this._featureReduction=b:this._featureReduction=null:this._featureReduction=b;this._evalFeatureReduction(this._featureReduction)},hasFeatureReduction:function(){return!!this._featureReduction},getFeatureReduction:function(){var b=this._featureReduction;if(b){var b=k.mixin({},b),c=this._clusterManager;if(c=c&&c.aggregationInfo)b.clusterRadius=c.clusterRadius,b.infoTemplate=c.infoTemplate}return b},isFeatureReductionActive:function(){var b=
this._clusterManager;return!!(b&&b.isClusteringEnabled()&&b.isClusteringActive())},isFeatureReductionEnabled:function(){return this._featureReductionEnabled},enableFeatureReduction:function(){this._featureReductionEnabled||(this._featureReductionEnabled=!0,this._evalFeatureReduction(this._featureReduction))},disableFeatureReduction:function(){this._featureReductionEnabled&&(this._featureReductionEnabled=!1,this._evalFeatureReduction(this._featureReduction))},isFeatureReductionApplied:function(){return this.hasFeatureReduction()&&
this.isFeatureReductionEnabled()&&this._canCluster(this.getFeatureReduction())},getAggregateGraphics:function(){return this._clusterManager?this._clusterManager.getAggregateGraphics():[]},getChildGraphics:function(b){return this._clusterManager?this._clusterManager.getFeaturesInCluster(b):[]},getSingleGraphics:function(){return this._clusterManager?this._clusterManager.getSingleGraphics():[]},getFeatureReductionRenderer:function(){return this.isFeatureReductionActive()?this._clusterManager.getClusterRenderer():
null},getFeatureReductionLayer:function(){return this._clusterManager?this._clusterManager.container:null},getFeatureReductionField:function(b){var c,d=this._clusterManager?this._clusterManager.getClusterFields():null;b=b?b.toLowerCase():"";h.some(d,function(d){b===d.name.toLowerCase()&&(c=d);return!!c});return c},_isFeatureReductionSupported:function(b){return b&&"cluster"===b.type&&"esriGeometryPoint"===this.geometryType&&(this._collection||this._isStream||this._optQueryPagination&&this.advancedQueryCapabilities.supportsPagination)},
_isReductionCompatibleRenderer:function(b){b=b&&b.declaredClass||"";b=b.toLowerCase();return-1<b.indexOf("simplerenderer")||-1<b.indexOf("classbreaksrenderer")||-1<b.indexOf("uniquevaluerenderer")},_evalFeatureReduction:function(b){this.loaded&&this.getMap()&&(b=b||this.getFeatureReduction(),this._evalModeFromFReduction(b),b&&this.isFeatureReductionEnabled()?this._canCluster(b)?this._clusterManager?this._updateClusterManager(b):(this._clusterManager=this._createClusterManager(b),this.onFeatureReductionChange()):
this._destroyClusterManager():this._destroyClusterManager())},_canCluster:function(b){var c=this._map;if(!c)return!1;c=c.spatialReference;return this._isFeatureReductionSupported(b)&&this._isReductionCompatibleRenderer(this.renderer)&&(c.isWebMercator()||4326===c.wkid)},_createClusterManager:function(b){b=new ra({layer:this,aggregationInfo:b});this._clusterHandles=[b.on("renderer-change",k.hitch(this,function(){this.onFeatureReductionRendererChange()}))];b.initialize(this._map);return b},_updateClusterManager:function(b){var c=
this._clusterManager;c&&c.setAggregationInfo(b)},_destroyClusterManager:function(b){h.forEach(this._clusterHandles,function(b){b.remove()});this._clusterHandles=null;this._clusterManager&&(this._clusterManager.destroy(b),this._clusterManager=null,this.onFeatureReductionChange())},redraw:function(){this.inherited(arguments);this._clusterManager&&this._clusterManager.redraw();this._trackManager&&this._trackManager.container&&this._trackManager.container.redraw()},_evalSDRenderer:function(b){this.inherited(arguments);
var c=this._getRenderer();this._ager=!!(c&&c.observationAger&&c.observationRenderer);this._trackManager&&this._trackManager.container&&this._trackManager.container.setRenderer(c&&c.trackRenderer);b&&this._evalFeatureReduction()},_graphicVisibilityChanged:function(b){this._clusterManager?this._clusterManager.toggleFeatureVisibility(b):this._heatmapManager&&this._heatmapManager.redraw()},setWebGLFetchOptions:function(b){this._hasOnDemandDrillMode()&&(b=b||{},null!=b.maxDrillLevel&&(this._mode.maxDrillLevel=
b.maxDrillLevel),null!=b.maxRecordCountFactor&&(this._mode.maxRecordCountFactor=b.maxRecordCountFactor),null!=b.enablePBFQuery&&(this._mode.enablePBFQuery=b.enablePBFQuery))},_isWebGLCompatible:function(){return this.loaded&&!this.isEditable()&&!this.isFeatureReductionApplied()&&(!this.labelingInfo||!1===this.showLabels)&&!this._isGeometryOperationsUsed()&&this._isRendererSupportedInWebGL()&&this.supportsCoordinatesQuantization&&("esriGeometryPolygon"!==this.geometryType||this.advancedQueryCapabilities.supportsReturningGeometryCentroid)&&
this.currentMode===ba.MODE_ONDEMAND&&(!this._preSurfaceChangeState||this._preSurfaceChangeState.currentMode===ba.MODE_ONDEMAND)},_isRendererSupportedInWebGL:function(){if(!this.renderer)return!1;var b=this.renderer,c=b.declaredClass?b.declaredClass.toLowerCase():"";return(-1<c.indexOf("simplerenderer")||-1<c.indexOf("classbreaksrenderer")||-1<c.indexOf("uniquevaluerenderer"))&&this._hasWebGLCompatibleSymbols(b)&&this._hasWebGLCompatibleVVs(b)},_hasWebGLCompatibleSymbols:function(b){b=this._getAllSymbolsInRenderer(b);
return!(this._hasSLSWithMarker(b)||this._hasIncompatibleSMSStyles(b)||this._hasGIFMarker(b))},_hasWebGLCompatibleVVs:function(b){return!h.some(b&&b.visualVariables,function(b){var c=b.type;return("colorInfo"===c||"opacityInfo"===c)&&b.stops&&8<b.stops.length||"sizeInfo"===c&&(b.field||b.valueExpression&&"$view.scale"!==b.valueExpression||b.expression&&"view.scale"!==b.expression)&&b.stops&&6<b.stops.length?!0:!1})},_hasSLSWithMarker:function(b){return h.some(b,function(b){return b&&"simplelinesymbol"===
b.type&&!!b.marker})},_hasIncompatibleSMSStyles:function(b){var c=void 0===t("ie")&&7==t("trident");return h.some(b,function(b){return b&&"simplemarkersymbol"===b.type&&("triangle"===b.style||"path"===b.style&&c)})},_hasGIFMarker:function(b){var c=/\.gif$/,d=/^image\/gif$/;return h.some(b,function(b){return b&&"picturemarkersymbol"===b.type?c.test(b.url)||d.test(b.contentType):!1})},_getAllSymbolsInRenderer:function(b){var c=[];b&&(c.push(b.symbol),c.push(b.defaultSymbol),h.forEach(b.infos,function(b){c.push(b.symbol)}),
c=h.filter(c,function(b){return!!b}));return c},_setMap:function(b){var c=this.inherited(arguments),d=this._mode,e=this;d&&b.loaded&&d.initialize(b);this.geometryType&&this.attr("data-geometry-type",this.geometryType.replace(/esriGeometry/i,"").toLowerCase());this._addHandle=this.on("graphic-node-add",function(b){b=b.graphic.attributes;(b=e._selectedFeatures[b&&b[e.objectIdField]])&&b.attr("data-selected","")});return c},_unsetMap:function(b){this._suspendImpl(!0);this._destroyClusterManager(!1);
this._trackManager&&(this._trackManager.destroy(),this._trackManager=null);l.disconnect(this._zoomConnect);l.disconnect(this._addHandle);this._zoomConnect=this._addHandle=null;this.inherited("_unsetMap",arguments)},onAttach:function(){this._evalModeFromSurface()},onRefreshTick:function(){this.isFeatureUpdatesCheckActive()&&this._evalFeatureUpdates()},refresh:function(b){!this._needsRefresh&&b&&b.scheduled&&this.isFeatureUpdatesCheckActive()||(this._needsRefresh=!1,(b=this._mode)&&b.refresh())},setFeatureUpdatesCheckEnabled:function(b){this._featureUpdatesCheckEnabled=
b},isFeatureUpdatesCheckEnabled:function(){return!!this._featureUpdatesCheckEnabled},isFeatureUpdatesCheckActive:function(){return this.supportsLastEditDate&&this.isFeatureUpdatesCheckEnabled()&&!!this.refreshInterval&&!!k.getObject("onFeatureUpdatesResult.after",!1,this)},hasFeatureUpdates:function(){var b=new g;if(!this.supportsLastEditDate)return b.reject(Error("FeatureLayer does not support supportsLastEditDate")),b.promise;if(!this._fetchMetadataPromise||this._fetchMetadataPromise.isFulfilled())this._fetchMetadataPromise=
y({url:this._url.path,content:k.mixin({f:"json"},this._url.query),callbackParamName:"callback"}).then(k.hitch(this,function(b){b=b.editingInfo.lastEditDate;var c=this.editingInfo.lastEditDate!==b;this.editingInfo.lastEditDate=b;return c}));this._fetchMetadataPromise.then(function(c){b.isFulfilled()||b.resolve(c)}).otherwise(function(c){b.isFulfilled()||b.reject(c)});return b.promise},hasXYFootprint:function(){return"esriGeometryMultiPatch"===this.geometryType&&"xyFootprint"===this.multipatchOption},
getOutFields:function(){return h.filter(this._getOutFields(),function(b){return"*"===b||!!this._getField(b)},this)},getField:function(b){return this._getField(b,!0)},isOutField:function(b){b=this.getField(b);if(!b)return!1;var c=this.getOutFields();return-1<h.indexOf(c,"*")||-1<h.indexOf(c,b.name)},getFieldLabel:function(b){var c=this.infoTemplate,c=c&&c.getFieldInfo&&c.getFieldInfo(b);b=k.isFunction(b)?null:this.getField(b);var d=c||b,e="";d&&(e=c&&c.label||b&&b.alias||d.name||d.fieldName);return e},
getDomain:function(b,c){var d,e,g=(c=c&&c.feature)&&this.typeIdField&&c.attributes&&c.attributes[this.typeIdField];null!=g&&h.some(this.types,function(c){return c.id==g?((d=c.domains&&c.domains[b])&&"inherited"===d.type&&(d=this._getLayerDomain(b),e=!0),!0):!1},this);e||d||(d=this._getLayerDomain(b));return d},_getLayerDomain:function(b){this._createFieldsIndex();var c=this._fieldsIndex;if(c)return c=c.caseSensitive,(c=c.get(b))?c.domain:null;var d;h.some(this.fields,function(c){c.name===b&&(d=c.domain);
return!!d});return d},getType:function(b){var c,d=b&&this.typeIdField&&b.attributes&&b.attributes[this.typeIdField];h.some(this.types,function(b){b.id==d&&(c=b);return!!c});return c},setEditable:function(b){if(!this._collection||this._isImageService)return this;if(!this.loaded)return this._optEditable=b,this;var c=this._editable;this._editable=b;this._updateCaps();if(c!==b)this.onCapabilitiesChange();return this},getEditCapabilities:function(b){var c={canCreate:!1,canUpdate:!1,canDelete:!1,canUpdateGeometry:!1};
if(!this.loaded||!this.isEditable())return c;var d=b&&b.feature;b=b&&b.userId||this.getUserId();var e=h.map(this.capabilities?this.capabilities.toLowerCase().split(","):[],k.trim),g=(c=-1<h.indexOf(e,"editing"))&&-1<h.indexOf(e,"create"),f=c&&-1<h.indexOf(e,"update"),e=c&&-1<h.indexOf(e,"delete"),l=this.ownershipBasedAccessControlForFeatures,r=this.editFieldsInfo,q=r&&r.creatorField,r=r&&r.realm,d=(d=d&&d.attributes)&&q?d[q]:void 0,u=!!this.userIsAdmin,q=!l||u||!(!l.allowOthersToUpdate&&!l.allowUpdateToOthers),
m=!l||u||!(!l.allowOthersToDelete&&!l.allowDeleteToOthers),t=!l||u||!l.hasOwnProperty("allowAnonymousToUpdate")||l.allowAnonymousToUpdate,l=!l||u||!l.hasOwnProperty("allowAnonymousToDelete")||l.allowAnonymousToDelete;b&&r&&(b=b+"@"+r);if(u||c&&!(g||f||e))g=f=e=!0;c={canCreate:g,canUpdate:f,canDelete:e,canUpdateGeometry:u||this.allowGeometryUpdates};b||(c.canUpdate=c.canUpdate&&t,c.canDelete=c.canDelete&&l);null===d?(c.canUpdate=c.canUpdate&&q,c.canDelete=c.canDelete&&m):""!==d&&d&&b.toLowerCase()!==
d.toLowerCase()&&(c.canUpdate=c.canUpdate&&q,c.canDelete=c.canDelete&&m);return c},getUserId:function(){var b;this.loaded&&(b=this.credential&&this.credential.userId||this.userId||"");return b},setUserIsAdmin:function(b){this.userIsAdmin=b},setEditSummaryCallback:function(b){this.editSummaryCallback=b},getEditSummary:function(b,c,d){d=w.isDefined(d)?d:(new Date).getTime();var e="";d=this.getEditInfo(b,c,d);(c=c&&c.callback||this.editSummaryCallback)&&(d=c(b,d)||"");if(k.isString(d))e=d;else{if(d){b=
d.action;c=d.userId;var g=d.timeValue,f=0;b&&f++;c&&f++;w.isDefined(g)&&f++;1<f&&(e=("edit"===b?"edit":"create")+(c?"User":"")+(w.isDefined(g)?d.displayPattern:""))}e=e&&w.substitute(d,this.i18n.layers.FeatureLayer[e])}return e},getEditInfo:function(b,c,d){if(this.loaded){d=w.isDefined(d)?d:(new Date).getTime();c=c&&c.action||"last";var e=this.editFieldsInfo,g=e&&e.creatorField,f=e&&e.creationDateField,h=e&&e.editorField,e=e&&e.editDateField,h=(b=b&&b.attributes)&&h?b[h]:void 0,e=b&&e?b[e]:null,g=
this._getEditData(b&&g?b[g]:void 0,b&&f?b[f]:null,d);d=this._getEditData(h,e,d);var k;switch(c){case "creation":k=g;break;case "edit":k=d;break;case "last":k=d||g}k&&(k.action=k===d?"edit":"creation");return k}},_getEditData:function(b,c,d){var g,f,h;w.isDefined(c)&&(f=d-c,h=0>f?"Full":6E4>f?"Seconds":12E4>f?"Minute":36E5>f?"Minutes":72E5>f?"Hour":864E5>f?"Hours":6048E5>f?"WeekDay":"Full");if(void 0!==b||h)g=g||{},g.userId=b,h&&(b=e.format,d=new Date(c),g.minutes=Math.floor(f/6E4),g.hours=Math.floor(f/
36E5),g.weekDay=b(d,{datePattern:"EEEE",selector:"date"}),g.formattedDate=b(d,{selector:"date"}),g.formattedTime=b(d,{selector:"time"}),g.displayPattern=h,g.timeValue=c);return g},isEditable:function(){return!(!this._editable&&!this.userIsAdmin)},isQueryable:function(){var b=h.map(this.capabilities?this.capabilities.toLowerCase().split(","):[],k.trim);return this._isStream||this.userIsAdmin||this._collection||-1!==h.indexOf(b,"query")||-1!==h.indexOf(b,"catalog")},setResolution:function(b){return this.setMaxAllowableOffset(b)},
setMaxAllowableOffset:function(b){this.isEditable()||(this._optMaxOffset=b,this._setMaxOffset(b,!0));return this},_resetMaxAllowableOffset:function(){this.setMaxAllowableOffset(this._optMaxOffset);this._prevScale=null;this._refreshMaxAllowableOffset()},_refreshMaxAllowableOffset:function(){this._calcMaxOffsetForAutoSnapshot();this._updateMaxOffset();this._needsRefresh=!1},getResolution:function(){return this.getMaxAllowableOffset()},getMaxAllowableOffset:function(){var b=this._quantizationParameters?
this._quantizationParameters.tolerance:void 0;return null!=this._maxOffset?this._maxOffset:b},_setMaxOffset:function(b,c){if(null==b)return delete this._maxOffset,delete this._quantizationParameters,this;this.quantize&&this.supportsCoordinatesQuantization?("esriGeometryPolyline"===this.geometryType?this._maxOffset=b:delete this._maxOffset,this._quantizationParameters=b?{mode:"view",originPosition:"upperLeft",tolerance:b,extent:this.fullExtent}:null):(this._isFractionalOffsetAllowed()&&c||(b=Math.floor(b)),
isNaN(b)||0===b?delete this._maxOffset:this._maxOffset=b,delete this._quantizationParameters);return this},_isFractionalOffsetAllowed:function(){return null==this.version||10.1<=this.version||navigator.languages&&this._isLangWithDot(navigator.languages[0])},_isLangWithDot:function(b){b=(b=b&&b.split("-"))&&b[0]&&b[0].toLowerCase();return-1!==h.indexOf(this._langsWithDot,b)},_langsWithDot:"ar en et fr he ja ko th vi zh".split(" "),setAutoGeneralize:function(b){this.loaded?this._canAutoGeneralize()&&
((this._autoGeneralize=b)?(this._isAutoSnapshotMode()&&(this._prevScale=null),this._updateMaxOffset()):this._setMaxOffset(null)):this._optAutoGen=b;return this},_canAutoGeneralize:function(){return!this.isEditable()&&this.mode!==ba.MODE_SNAPSHOT},setGDBVersion:function(b){this._collection||b===this.gdbVersion||!b&&!this.gdbVersion||(this.gdbVersion=b,this._task.gdbVersion=b,this._url.query=k.mixin(this._url.query,{gdbVersion:b}),this.loaded&&(this.clearSelection(),this._map&&this.refresh()),this.onGDBVersionChange());
return this},hasAllFeatures:function(){return this._mode?this._mode.hasAllFeatures():!0},hasUpdateError:function(){return this._mode?this._mode.hasUpdateError():!1},setDefinitionExpression:function(b){this._defnExpr=b;this._hasPendingLimitQuery()||((b=this._checkFeatureLimit())?this._evalModeAndApplyDefnExpr(b):this._applyDefnExpr());return this},_applyDefnExpr:function(){var b=this._mode;b&&b.propertyChangeHandler(1)},_evalModeAndApplyDefnExpr:function(b){b.then(k.hitch(this,function(b){b&&(b instanceof
Error||!b.modeChanged)&&this._applyDefnExpr()}))},getDefinitionExpression:function(){return this._defnExpr},hasDefinitionExpressionWithCurrentTimestamp:function(){return this.reSQLCurrentTimestamp.test(this.getDefinitionExpression())},setTimeDefinition:function(b){this._isSnapshotMode()&&(this._timeDefn=b,(b=this._mode)&&b.propertyChangeHandler(2));return this},getTimeDefinition:function(){return this._timeDefn},setTimeOffset:function(b,c){this._timeOffset=b;this._timeOffsetUnits=c;(b=this._mode)&&
b.propertyChangeHandler(0);return this},setUseMapTime:function(b){this.useMapTime=b;this._toggleTime(!this.suspended);(b=this._mode)&&b.propertyChangeHandler(0)},selectFeatures:function(b,c,d,e){c=c||ba.SELECTION_NEW;this._hasSelectionError=this._hasPartialSelectedFeatures=!1;b=this._getShallowClone(b);var f=this._map,h,k=this,l=B._fixDfd(new g(B._dfdCanceller));b.outFields=this.getOutFields();b.returnGeometry=!0;b.multipatchOption=this.multipatchOption;f&&(b.outSpatialReference=new C(f.spatialReference.toJson()));
if(!this._applyQueryFilters(b,!0))return h={features:[]},this._selectHandler(h,c,d,e,l),l;if(f=this._canDoClientSideQuery(b))l._pendingDfd=r(this._doQuery(b,f)),l._pendingDfd.then(function(b){h={features:b};k._selectHandler(h,c,d,e,l)});else{if(this._collection)return this._resolve([Error("FeatureLayer::selectFeatures - "+this.invalidParams)],null,e,l,!0),l;if(this.loaded&&!this.isQueryable())return this._resolve([Error("Layer does not support query capability.")],null,e,l,!0),l;var q=this;this._ts&&
(b._ts=(new Date).getTime());f=this._canFetchPBFForQuery(b);this._enableEditModeQuantization(b,f);(l._pendingDfd=this._task.execute(b,null,null,f?{format:"pbf"}:null)).addCallbacks(function(b){q._selectHandler(b,c,d,e,l)},function(b){q._hasPartialSelectedFeatures=!0;q._hasSelectionError=!0;q._resolve([b],null,e,l,!0)})}return l},getSelectedFeatures:function(){var b=this._selectedFeatures,c=[],d;for(d in b)b.hasOwnProperty(d)&&c.push(b[d]);return c},clearSelection:function(b){var c=this._selectedFeatures,
d=this._mode,e;for(e in c)c.hasOwnProperty(e)&&(this._unSelectFeatureIIf(e,d),d._removeFeatureIIf(e));this._selectedFeatures={};this._isSelOnly&&d._applyTimeFilter(!0);if(!b)this.onSelectionClear();return this},setSelectionSymbol:function(b){if(this._selectionSymbol=b){var c=this._selectedFeatures,d;for(d in c)c.hasOwnProperty(d)&&c[d].setSymbol(b)}return this},getSelectionSymbol:function(){return this._selectionSymbol},setLabelingInfo:function(b){b?(this.labelingInfo=b,this._fixLabelExpr()):delete this.labelingInfo;
this._collection&&(this._typesDirty=!0);this._evalSurfaceType();this.onLabelingInfoChange()},_fixLabelExpr:function(){var b=/\[([^\[\]]+)\]/ig,c,d=this,e=function(b,c){b=d._getField(c,!0);return"["+(b&&b.name||c)+"]"};h.forEach(this.labelingInfo,function(d){if(c=d.labelExpression)d.labelExpression=c.replace(b,e)})},_updateRequiredFieldsFromLabelingInfo:function(){var b=[];h.forEach(this.labelingInfo,function(c){var d=c.labelExpressionInfo;if(c.labelExpression){var e=/[\[\]]/ig;c=c.labelExpression.match(/\[[^\[\]]+\]/ig);
(c=h.map(c,function(b){return b.replace(e,"")}))&&(b=b.concat(c))}if(d){if(d.value){var g=/[\{\}]/ig;c=d.value.match(/\{[^\{\}]+\}/ig);(c=h.map(c,function(b){return b.replace(g,"")}))&&(b=b.concat(c))}d.expression&&(b=b.concat(O.extractFieldNames(d.expression)))}});b=h.map(b,function(b){var c=this.getField(b);return c?c.name:b},this);this._requiredFields&&(this._requiredFields=this._requiredFields.concat(b))},__msigns:[{n:"applyEdits",c:5,a:[{i:0},{i:1}],e:4,f:1}],applyEdits:function(b,c,d,e,g,f){var l=
f.assembly,r=f.dfd;this._applyNormalized(b,l&&l[0]);this._applyNormalized(c,l&&l[1]);this.onBeforeApplyEdits(b,c,d);var q={},u=this.objectIdField,l={f:"json"},m=!1;if(this._collection)f={},f.addResults=b?h.map(b,function(){m=!0;return{objectId:this._nextId++,success:!0}},this):null,f.updateResults=c?h.map(c,function(b){m=!0;var c=b.attributes[u];q[c]=b;return{objectId:c,success:!0}},this):null,f.deleteResults=d?h.map(d,function(b){m=!0;return{objectId:b.attributes[u],success:!0}},this):null,m?this._editHandler(f,
b,q,e,g,r):this._resolve([f.addResults,f.updateResults,f.deleteResults],null,e,r);else{b&&0<b.length&&(l.adds=this._convertFeaturesToJson(b,0,1),m=!0);if(c&&0<c.length){for(f=0;f<c.length;f++){var t=c[f];q[t.attributes[u]]=t}l.updates=this._convertFeaturesToJson(c,0,0,1);m=!0}if(d&&0<d.length){c=[];for(f=0;f<d.length;f++)c.push(d[f].attributes[u]);l.deletes=c.join(",");m=!0}if(m){var p=this;return y({url:this._url.path+"/applyEdits",content:k.mixin(l,this._url.query),callbackParamName:"callback",
load:function(c){p._editHandler(c,b,q,e,g,r)},error:function(b){p._resolve([b],null,g,r,!0)}},{usePost:!0})}this._resolve([],null,e,r)}},queryFeatures:function(b,c,d,e){return this._query("execute","onQueryFeaturesComplete",b,c,d,e)},queryRelatedFeatures:function(b,c,d){return this._query("executeRelationshipQuery","onQueryRelatedFeaturesComplete",b,c,d)},queryIds:function(b,c,d,e){return this._query("executeForIds","onQueryIdsComplete",b,c,d,e)},queryCount:function(b,c,d,e){return this._query("executeForCount",
"onQueryCountComplete",b,c,d,e)},queryExtent:function(b,c,d,e){return this._query("executeForExtent","onQueryExtentComplete",b,c,d,e)},queryAttachmentInfos:function(b,d,e){var f=this._url.path+"/"+b+"/attachments",l=new g(B._dfdCanceller),r=this,f=F.normalize(f);l._pendingDfd=y({url:f,content:k.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:function(e){e=e.attachmentInfos;var g;h.forEach(e,function(d){g=c.objectToQuery({gdbVersion:r._url.query&&r._url.query.gdbVersion,layer:r._url.query&&
r._url.query.layer,token:r._getToken()});d.url=f+"/"+d.id+(g?"?"+g:"");d.objectId=b});r._resolve([e],"onQueryAttachmentInfosComplete",d,l)},error:function(b){r._resolve([b],null,e,l,!0)}});return l},addAttachment:function(b,c,d,e){return this._sendAttachment("add",b,c,d,e)},updateAttachment:function(c,d,e,g,f){e.appendChild(b.create("input",{type:"hidden",name:"attachmentId",value:d}));return this._sendAttachment("update",c,e,g,f)},deleteAttachments:function(b,c,d,e){var f=this._url.path+"/"+b+"/deleteAttachments",
l=new g(B._dfdCanceller),r=this;c={f:"json",attachmentIds:c.join(",")};l._pendingDfd=y({url:f,content:k.mixin(c,this._url.query),callbackParamName:"callback",load:k.hitch(this,function(c){c=c.deleteAttachmentResults;c=h.map(c,function(c){c=new ea(c);c.attachmentId=c.objectId;c.objectId=b;return c});r._resolve([c],"onDeleteAttachmentsComplete",d,l)}),error:function(b){r._resolve([b],null,e,l,!0)}},{usePost:!0});return l},addType:function(b){var c=this.types;if(c){if(h.some(c,function(c){return c.id==
b.id?!0:!1}))return!1;c.push(b)}else this.types=[b];return this._typesDirty=!0},deleteType:function(b){if(this._collection){var c=this.types;if(c){var d=-1;h.some(c,function(c,e){return c.id==b?(d=e,!0):!1});if(-1<d)return this._typesDirty=!0,c.splice(d,1)[0]}}},toJson:function(){var b=this._json;if(b=k.isString(b)?q.fromJson(b):k.clone(b)){var b=b.layerDefinition?b:{layerDefinition:b},c=b.layerDefinition,d=this._collection;if(d&&this._typesDirty){c.types=h.map(this.types||[],function(b){return b.toJson()});
var e=this.renderer,g=this.labelingInfo,f=c.drawingInfo;!e&&!g||f||(f=c.drawingInfo={});f&&e&&-1===e.declaredClass.indexOf("TemporalRenderer")&&(f.renderer=e.toJson());g&&(f.labelingInfo=h.map(g,function(b){return b.toJson()}))}e=null;if(!d||this._fcAdded)e={geometryType:c.geometryType,features:this._convertFeaturesToJson(this.graphics,!0)};b.featureSet=k.mixin({},b.featureSet||{},e);b.featureSet.transform&&(g=b.featureSet.transform,delete b.featureSet.transform,e=new K(b.featureSet),e.quantize(g),
b.featureSet=e.toJson());d&&(b.nextObjectId=this._nextId,c.capabilities=this.capabilities);return b}},onSelectionComplete:function(){},onSelectionClear:function(){},onBeforeApplyEdits:function(){},onEditsComplete:function(){},onQueryFeaturesComplete:function(){},onQueryRelatedFeaturesComplete:function(){},onQueryIdsComplete:function(){},onQueryCountComplete:function(){},onQueryExtentComplete:function(){},onQueryAttachmentInfosComplete:function(){},onAddAttachmentComplete:function(){},onUpdateAttachmentComplete:function(){},
onDeleteAttachmentsComplete:function(){},onCapabilitiesChange:function(){},onGDBVersionChange:function(){},onQueryLimitExceeded:function(){},onLabelingInfoChange:function(){},onFeatureReductionRendererChange:function(){},onFeatureReductionChange:function(){},onFeatureUpdatesResult:function(){},_evalFeatureUpdates:function(){if(!this._featureUpdatesPromise||this._featureUpdatesPromise.isFulfilled())this._featureUpdatesPromise=this.hasFeatureUpdates().otherwise(function(b){return!(b&&"cancel"===b.dojoType)}).always(k.hitch(this,
function(b){this._featureUpdatesPromise=null;this.onFeatureUpdatesResult({hasUpdates:b})}))},_evalRefresh:function(b){(b.hasUpdates||this.hasDefinitionExpressionWithCurrentTimestamp())&&this.refresh()},_evalArcadeSupport:function(){var b=new g;setTimeout(k.hitch(this,function(){this._initializeArcadeEngine().always(function(){b.resolve()})}),0);return b.promise},_initializeArcadeEngine:function(){var b=[],c=this.infoTemplate;c&&c.initializeArcadeEngine&&b.push(c.initializeArcadeEngine());(c=this.renderer)&&
c.initializeArcadeEngine&&b.push(c.initializeArcadeEngine());var d=[];h.forEach(this.labelingInfo,function(b){(b=b.labelExpressionInfo)&&b.expression&&d.push(b.expression)});b.push(N.initialize(d));return A(b)},_isGeometryOperationsUsed:function(){var b=this.infoTemplate,c=this.renderer,d=this.labelingInfo;return b&&b.hasGeometryOperations&&b.hasGeometryOperations()||c&&c.hasGeometryOperations&&c.hasGeometryOperations()||h.some(d,function(b){return O.hasGeometryOperations(b.labelExpressionInfo&&b.labelExpressionInfo.expression)})?
!0:!1},_forceIdentity:function(){var b=new g,c=this,d,e=this._url&&this._url.path;d=e&&e.toLowerCase().indexOf("/rest/services");var f=this.editFieldsInfo,f=f&&(f.creatorField||f.editorField);(this.userIsAdmin||f)&&!this._getToken()&&-1<d&&x.id?(d=e.substring(0,d)+"/rest/info",y({url:d,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(function(b){if(b.owningSystemUrl)return x.id.checkSignInStatus(b.owningSystemUrl+"/sharing")}).then(function(b){if(b)return x.id.getCredential(e)}).then(function(b){b&&
c._findCredential()}).always(function(){b.resolve()})):b.resolve();return b.promise},_isSnapshotMode:function(){return this._mode?this._mode.isInstanceOf(ka):!1},_isOnDemandMode:function(){return this._mode?this._mode.isInstanceOf(na):!1},_isAutoSnapshotMode:function(){return this._isAutoModeEnabled()&&this.currentMode===ba.MODE_SNAPSHOT},_getMaxFeaturesForAutoSnapshotMode:function(){var b=this.geometryType,c;"esriGeometryPolyline"===b||"esriGeometryPolygon"===b||"esriGeometryMultipoint"===b||this.hasXYFootprint()?
c=this.maxRecordCountForAuto:"esriGeometryPoint"===b&&(c=this.maxPointCountForAuto);return c},getLastExceedsLimitResult:function(){return this._lastExceedsLimitResult},_canUseSnapshotMode:function(b){this._lastExceedsLimitResult=b=(b=b&&b.features&&b.features[0])&&b.attributes&&b.attributes.exceedslimit;return!(this.mode!==ba.MODE_AUTO||this.isEditable()||0!==b||!(this._isPaginationAllowed()||this.maxRecordCount>=this._getMaxFeaturesForAutoSnapshotMode()))},_evalModeFromFLimit:function(b){this._canUseSnapshotMode(b)?
this._enableAutoSnapshotMode():this._enableAutoOnDemandMode()},_enableAutoSnapshotMode:function(){var b=ba.MODE_SNAPSHOT;this.isFeatureReductionApplied()?this._updatePreFReductionState(b):this._preSurfaceChangeState?(this._updatePreSurfaceChangeState(b),this._evalSurfaceType(!0)):this.currentMode!==b&&this._setFetchMode(ba.MODE_AUTO,b)},_enableAutoOnDemandMode:function(){var b=ba.MODE_ONDEMAND;this.isFeatureReductionApplied()?this._updatePreFReductionState(b):this._preSurfaceChangeState?this._updatePreSurfaceChangeState(b):
this.currentMode!==b&&(this._setFetchMode(ba.MODE_AUTO,b),this._evalSurfaceType())},_evalModeFromFReduction:function(b){this.loaded&&(b&&this.isFeatureReductionEnabled()&&this._canCluster(b)?this._enableFReductionMode():this._disableFReductionMode())},_enableFReductionMode:function(){this._evalSurfaceType(!0);if(!this._preFReductionState){var b=this.currentMode;b!==ba.MODE_SNAPSHOT&&b!==ba.MODE_STREAM&&b!==ba.MODE_SELECTION&&(this._preFReductionState={mode:this.mode,currentMode:this.currentMode},
this._setFetchMode(this.mode===ba.MODE_AUTO?ba.MODE_AUTO:ba.MODE_SNAPSHOT,ba.MODE_SNAPSHOT))}},_disableFReductionMode:function(){var b=this._preFReductionState;this._preFReductionState=null;!b||b.mode===this.mode&&b.currentMode===this.currentMode||(this._setFetchMode(b.mode,b.currentMode),this._evalSurfaceType())},_updatePreFReductionState:function(b){this._preFReductionState=this._preFReductionState||{};this._preFReductionState.mode=ba.MODE_AUTO;this._preFReductionState.currentMode=b},_evalModeFromSurface:function(){this.hasWebGLSurface()?
this._enableWebGLSurfaceMode():this._disableWebGLSurfaceMode()},_enableWebGLSurfaceMode:function(){this._preSurfaceChangeState||(this._preSurfaceChangeState={mode:this.mode,currentMode:this.currentMode},this._setFetchMode(this.mode===ba.MODE_AUTO?ba.MODE_AUTO:ba.MODE_ONDEMAND,ba.MODE_ONDEMAND,this.webglDeps.OnDemandDrillMode))},_disableWebGLSurfaceMode:function(){var b=this._preSurfaceChangeState;b&&(this._preSurfaceChangeState=null,this._setFetchMode(b.mode,b.currentMode))},_updatePreSurfaceChangeState:function(b){this._preSurfaceChangeState=
this._preSurfaceChangeState||{};this._preSurfaceChangeState.mode=ba.MODE_AUTO;this._preSurfaceChangeState.currentMode=b},_setFetchMode:function(b,c,d){this.clearSelection();this._mode.suspend();this._mode.destroy();this.mode=b;this.currentMode=c;d=d||this._getModeConstructor(c);this._mode=new d(this);this.queryPagination=c===ba.MODE_ONDEMAND&&-1===d.prototype.declaredClass.toLowerCase().indexOf("ondemanddrillmode")?!1:this._isPaginationAllowed();(b=this.getMap())&&b.loaded&&(this._resetMaxAllowableOffset(),
this._mode.initialize(b),this._mode.startup())},_isPaginationAllowed:function(){return!(!this._optQueryPagination||this.loaded&&!this.advancedQueryCapabilities.supportsPagination)},_getModeConstructor:function(b){var c;b===ba.MODE_SNAPSHOT?c=ka:b===ba.MODE_ONDEMAND&&(c=na);return c},_hasOnDemandDrillMode:function(){var b=this._mode,b=b&&b.declaredClass;return!!(b&&-1<b.toLowerCase().indexOf("ondemanddrillmode"))},_checkFeatureLimit:function(){this._limitPromise&&(this._limitPromise.cancel(),this._limitPromise=
null);var b=this._queryLimit();b&&(this._lastExceedsLimitResult=null,this._limitPromise=b.then(k.hitch(this,function(b){var c=this.currentMode;this._evalModeFromFLimit(b);return{modeChanged:this.currentMode!==c}})).always(k.hitch(this,function(b){this._limitPromise=null;return b})));return this._limitPromise},_hasPendingLimitQuery:function(){return!!this._exceedsLimitTimer},_queryLimit:function(){if(this._isAutoModeEnabled()){var b,c,d=new g(function(){clearTimeout(b);b=null;c&&!c.isFulfilled()&&
c.cancel();c=null});this._exceedsLimitTimer=b=setTimeout(k.hitch(this,function(){this._exceedsLimitTimer=null;var b=new J,e=new U;e.statisticType="exceedslimit";e.maxPointCount=this.maxPointCountForAuto;e.maxRecordCount=this.maxRecordCountForAuto;e.maxVertexCount=this.maxVertexCountForAuto;e.outStatisticFieldName="exceedslimit";b.outStatistics=[e];c=this.queryFeatures(b).promise.then(function(b){d.resolve(b)}).otherwise(function(b){d.reject(b)})}),0);return d.promise}},_isAutoModeEnabled:function(){return this.mode===
ba.MODE_AUTO&&this.reHostedFS.test(this.url)},_updateCaps:function(){var b=this._editable,c=k.trim(this.capabilities||""),d=h.map(c?c.split(","):[],k.trim),e=h.map(c?c.toLowerCase().split(","):[],k.trim),c=h.indexOf(e,"editing"),g,e={Create:h.indexOf(e,"create"),Update:h.indexOf(e,"update"),Delete:h.indexOf(e,"delete")};if(b&&-1===c)d.push("Editing");else if(!b&&-1<c){b=[c];for(g in e)-1<e[g]&&b.push(e[g]);b.sort();for(g=b.length-1;0<=g;g--)d.splice(b[g],1)}this.capabilities=d.join(",")},_counter:{value:0},
_getUniqueId:function(){return this._counter.value++},onSuspend:function(){this.inherited(arguments);this._suspendImpl()},_suspendImpl:function(b){this._toggleTime(!1);this._refreshHandle&&(this._refreshHandle.remove(),this._refreshHandle=null);var c=this._mode;c&&(c.suspend(),b&&c.destroy())},onResume:function(b){this.inherited(arguments);this._toggleTime(!0);this._refreshHandle=this.on("feature-updates-result",k.hitch(this,this._evalRefresh));var c=this._map,d=this._getRenderer();if(b.firstOccurrence){if(this._fixRendererFields(),
this._updateRequiredFieldsFromLabelingInfo(),this._checkFields(),this.clearSelection(),this._evalFeatureReduction(),this.timeInfo&&!this._trackManager&&(this._trackIdField||d&&(d.latestObservationRenderer||d.trackRenderer))&&(this._trackManager=new ga(this),this._trackManager.initialize(c),this._childLayer=this._trackManager.container),d&&"colors"in d&&"blurRadius"in d&&"maxPixelIntensity"in d&&"esriGeometryPoint"==this.geometryType&&!this._heatmapManager&&(this._heatmapManager=new va(this),this._heatmapManager.initialize(c)),
this._zoomConnect=l.connect(c,"onZoomEnd",this,this._zoomEndHandler),this._refreshMaxAllowableOffset(),d=this._mode)d._init||d.initialize(c),d.startup()}else this._zoomEndHandler(),this._mode&&this._mode.resume()},_zoomEndHandler:function(){var b=this._map;this._updateMaxOffset();this._prevScale=b.getScale();!this.suspended&&this._needsRefresh&&this.refresh()},_updateMaxOffset:function(){var b=this._map;b&&b.loaded&&this._autoGeneralize&&(this._isAutoSnapshotMode()?(b=this.getMaxAllowableOffset(),
this._setMaxOffset(this._getMaxOffsetForScale(),!0),this._needsRefresh||(this._needsRefresh=b!=this.getMaxAllowableOffset())):this._setMaxOffset(b.extent.getWidth()/b.width,!b.extent.spatialReference.isWebMercator()))},_getMaxOffsetForScale:function(){if(this._map){var b=this._map.getScale(),c=this._calculatedScale,d=this._calcMaxOffset,e=this._prevScale;return b>=c&&(null==e||e<c)?d:b<c&&(null==e||e>=c)?null:this.getMaxAllowableOffset()}},_calcMaxOffsetForAutoSnapshot:function(){var b=this._map;
if(b&&this._canAutoGeneralize()&&this._isAutoSnapshotMode()&&this._autoGeneralize&&null==this.getMaxAllowableOffset()){var c=this.generalizeForScale;this._calculatedScale=c=this.maxScale?this.maxScale:this.minScale?Math.min(c,this.minScale):Math.min(c,S.getScale(b,this.initialExtent));this._calcMaxOffset=b.extent.getWidth()/b.width/b.getScale()*c}else this._calculatedScale=this._calcMaxOffset=void 0},_toggleTime:function(b){var c=this._map;b&&this.timeInfo&&this.useMapTime&&c?(this._mapTimeExtent=
c.timeExtent,this._timeConnect||(this._timeConnect=l.connect(c,"onTimeExtentChange",this,this._timeChangeHandler))):(this._mapTimeExtent=null,l.disconnect(this._timeConnect),this._timeConnect=null)},_timeChangeHandler:function(b){this._mapTimeExtent=b;(b=this._mode)&&b.propertyChangeHandler(0)},_getOffsettedTE:function(b){var c=this._timeOffset,d=this._timeOffsetUnits;return b&&c&&d?b.offset(-1*c,d):b},_getTimeOverlap:function(b,c){return b&&c?b.intersection(c):b||c},_getTimeFilter:function(b){var c=
this.getTimeDefinition(),d;if(c&&(d=this._getTimeOverlap(c,null),!d))return[!1];if(b){if(b=d?this._getTimeOverlap(b,d):b,!b)return[!1]}else b=d;return[!0,b]},_getAttributeFilter:function(b){var c=this.getDefinitionExpression();return b?c?"("+c+") AND ("+b+")":b:c},_applyQueryFilters:function(b,c){b.where=this._getAttributeFilter(b.where);b.returnGeometry&&null==b.maxAllowableOffset&&!b.quantizationParameters&&(b.maxAllowableOffset=this._maxOffset,b.quantizationParameters=this._quantizationParameters);
c&&this.supportsAdvancedQueries&&(b.orderByFields=b.orderByFields||this.getOrderByFields());if(this.timeInfo)if(c=this._getTimeFilter(b.timeExtent),c[0])b.timeExtent=c[1];else return!1;return!0},_add:function(b){var c=this._selectionSymbol,d=b.attributes,e=this.visibilityField;c&&this._isSelOnly&&b.setSymbol(c);if(e&&d&&d.hasOwnProperty(e))b[d[e]?"show":"hide"]();return this.add.apply(this,arguments)},_remove:function(){return this.remove.apply(this,arguments)},_canDoClientSideQuery:function(b,c){var d=
[],e=this._map,g;if((this._collection||!this._isTable&&e)&&!(b.text||b.where&&b.where!==this.getDefinitionExpression()||b.orderByFields&&b.orderByFields.length&&(g=this.getOrderByFields()||[])&&b.orderByFields.join()!==g.join()||b.outStatistics||b.returnDistinctValues)){g=this._isSnapshotMode();var f=this._isSelOnly;c=g?null:c?this._getExtentOfTiles(e.extent):e.extent;if(e=b.geometry){if(f||b.spatialRelationship!==J.SPATIAL_REL_INTERSECTS||"extent"!==e.type||!g&&!c.contains(e))return;d.push(1)}if(c=
b.objectIds)if(g)d.push(2);else{var e=c.length,k=this._mode,l=0,r;for(r=0;r<e;r++)k._getFeature(c[r])&&l++;if(l===e)d.push(2);else return}if(this.timeInfo)if(b=b.timeExtent,c=this._mapTimeExtent,g)b&&d.push(3);else if(f){if(b)return}else if(c)if(-1!==h.indexOf(d,2))b&&d.push(3);else if(-1!==h.indexOf(d,1))b==c&&d.push(3);else return;else if(0<d.length)b&&d.push(3);else if(b)return;return 0<d.length?d:null}},_getAbsMid:function(b){return m.toAbsMid?m.toAbsMid(b):p.id.replace(/\/[^\/]*$/ig,"/")+b},
_doQuery:function(b,c,d){var e=[],f=this.objectIdField,l=this,r=new g,q=new g,u=this.graphics;if(-1!==h.indexOf(c,1)){var m=this.spatialIndex||this._map&&this._map.spatialIndex,t,p=b.geometry._normalize(null,!0);null==m&&Ma.autoSpatialIndexing?t=(this._map||this).addPlugin(this._getAbsMid("../plugins/spatialIndex")).then(k.hitch(this,k.partial(this._getFromIndex,p,m)),function(b){q.resolve(k.hitch(this,k.partial(this._filterByExtent,u,p)))}):m&&(t=this._getFromIndex(p,m));t?t.then(function(b){for(var c=
0;c<b.length;c++)b[c].results&&(e=e.concat(b[c].results));q.resolve(e)}).otherwise(function(b){q.reject(b)}):q.resolve(this._filterByExtent(u,p))}else q.resolve(u);q.then(function(g){e=g;if(-1!==h.indexOf(c,2)){var k=b.objectIds;e=h.filter(e,function(b){return-1<h.indexOf(k,b.attributes[f])})}-1!==h.indexOf(c,3)&&l.timeInfo&&(g=b.timeExtent,e=l._filterByTime(e,g.startTime,g.endTime).match);d&&(e=h.map(e,function(b){return b.attributes[f]},this));r.resolve(e)});return r},_getFromIndex:function(b,c){c=
c||this.spatialIndex||this._map.spatialIndex;b instanceof Array||(b=[b]);var d=this.id;return u(h.map(b,function(b){return c.intersects(b,d)}))},_filterByExtent:function(b,c){for(var d=[],e=0,g=b.length;e<g;e++){var f=b[e],h=f.geometry;h&&(this.normalization&&c.length?(c[0].intersects(h)||c[1].intersects(h))&&d.push(f):c.intersects(h)&&d.push(f))}return d},_filterByTime:function(b,c,d){var e=this._startTimeField,g=this._endTimeField,f;this._twoTimeFields||(f=e||g);var h=w.isDefined,k=[],l=[],r,q=
b.length,u,m;c=c?c.getTime():-Infinity;d=d?d.getTime():Infinity;if(f)for(r=0;r<q;r++)u=b[r],m=u.attributes,e=m[f],e>=c&&e<=d?k.push(u):l.push(u);else for(r=0;r<q;r++)u=b[r],m=u.attributes,f=m[e],m=m[g],f=h(f)?f:-Infinity,m=h(m)?m:Infinity,f>=c&&f<=d||m>=c&&m<=d||c>=f&&d<=m?k.push(u):l.push(u);return{match:k,noMatch:l}},_getSizeVariables:function(b){return b&&h.filter(b.getVisualVariablesForType("sizeInfo",!1),function(b){return!(!b.field&&!b.valueExpression)})},_needClientSideSorting:function(b){return this._collection?
!(!b||!b.length):h.some(b,function(b){return!!b.valueExpression})},_sortFeatures:function(b){var c=this.renderer,d=this._getSizeVariables(c);if(b&&1<b.length&&this._needClientSideSorting(d)){var e=d[0],g=this;b.sort(function(b,d){b._layer||(b._layer=g);d._layer||(d._layer=g);b=c._getDataValue(b,e,"sizeInfo");d=c._getDataValue(d,e,"sizeInfo");return null==b?-1:null==d?1:d-b})}return b},_resolve:function(b,c,d,e,g){c&&this[c].apply(this,b);d&&d.apply(null,b);e&&B._resDfd(e,b,g)},_getShallowClone:function(b){var c=
new J,d;for(d in b)b.hasOwnProperty(d)&&(c[d]=b[d]);return c},_canFetchPBF:function(){return!!(ya&&Ja&&this.supportsFormatPBF)},_canFetchPBFForQuery:function(b){return!(!this._canFetchPBF()||!this._isCacheHintEnabled(b)&&this._isAutoSnapshotMode()||!(b.quantizationParameters||!this.isEditable()&&this.supportsQuantizationEditMode)||b.outStatistics)},_enableEditModeQuantization:function(b,c){b&&c&&!b.quantizationParameters&&(b.quantizationParameters={mode:"edit"})},_enableCacheHint:function(b,c){var d=
this.advancedQueryCapabilities;d&&d.supportsQueryWithCacheHint?null==b.cacheHint&&(b.cacheHint=!0):d&&d.supportsQueryWithResultType&&this.reHostedFS.test(this.url)&&!b.resultType&&(b.resultType=c||"coherent")},_isCacheHintSupported:function(){var b=this.advancedQueryCapabilities;return b?!!(b.supportsQueryWithCacheHint||b.supportsQueryWithResultType&&this.reHostedFS.test(this.url)):!1},_isCacheHintEnabled:function(b){var c=this.advancedQueryCapabilities;return b&&c?!!(c.supportsQueryWithCacheHint&&
b.cacheHint||c.supportsQueryWithResultType&&this.reHostedFS.test(this.url)&&("coherent"===b.resultType||"tile"===b.resultType)):!1},_query:function(b,c,d,e,f,k){var l=this,q=this._map;k=k&&k.snapToTiles;var u=new g(B._dfdCanceller),m=d,t,p,v;if("executeRelationshipQuery"!==b){var m=this._getShallowClone(d),x=this.getOutFields();m.outFields||(m.outFields=x);m.outFields&&m.outFields.length&&(p=-1<h.indexOf(x,"*")?!1:!h.every(m.outFields,function(b){return-1<h.indexOf(x,b)}));m.returnGeometry=d.hasOwnProperty("returnGeometry")?
d.returnGeometry:!d.outStatistics;m.returnGeometry&&(m.multipatchOption=this.multipatchOption,null!=m.maxAllowableOffset||m.quantizationParameters)&&(d=null!=m.maxAllowableOffset?m.maxAllowableOffset:m.quantizationParameters.tolerance,null!=d&&d!==this.getMaxAllowableOffset()&&(v=!0));var w;q&&(q=q&&q.spatialReference,(d=m.outSpatialReference)?t=!d.equals(q):m.outSpatialReference=new C(q.toJson()));k&&(q=m.geometry)&&"extent"===q.type&&(m.geometry=this._getExtentOfTiles(q),q!==m.geometry&&this._enableCacheHint(m));
if(!this._applyQueryFilters(m,"execute"===b&&!m.outStatistics)){switch(b){case "execute":w=new K({features:[]});break;case "executeForIds":w=[];break;case "executeForCount":w=0;break;case "executeForExtent":w={}}this._resolve([w],c,e,u);return u}if(k="executeForExtent"!==b&&!t&&!p&&!v&&this._canDoClientSideQuery(m,k))return u._pendingDfd=r(this._doQuery(m,k,"executeForIds"===b||"executeForCount"===b)),u._pendingDfd.then(function(d){switch(b){case "execute":w=new K;w.features=d;break;case "executeForIds":w=
d;break;case "executeForCount":w=d.length}l._resolve([w],c,e,u)}),u}if(this._collection)return this._resolve([Error("FeatureLayer::_query - "+this.invalidParams)],null,f,u,!0),u;if(this.loaded&&!this.isQueryable())return this._resolve([Error("Layer does not support query capability.")],null,f,u,!0),u;this._ts&&(m._ts=(new Date).getTime());k="execute"===b&&this._canFetchPBFForQuery(m);this._enableEditModeQuantization(m,k);(u._pendingDfd=this._task[b](m,null,null,k?{format:"pbf"}:null)).addCallbacks(function(d){var g=
!!m.outStatistics||t||p||v;if("execute"===b||"executeRelationshipQuery"===b){var f,h;if("execute"===b)for(f=d.features,h=f.length,--h;0<=h;h--){if(f[h]._layer=l,!g&&!l._isTable){var k=l._mode._getFeature(f[h].attributes[l.objectIdField]);k&&f.splice(h,1,k)}}else for(k in d)if(d.hasOwnProperty(k))for(f=d[k].features,h=f.length,--h;0<=h;h--)f[h]._layer=l}l._resolve([d],c,e,u)},function(b){l._resolve([b],null,f,u,!0)});return u},_getExtentOfTiles:function(b){var c=this._isOnDemandMode()&&this._mode._gridLayer||
Ga.createFromFeatureLayer({layer:this}),d=this.getMap(),d=d&&d.getTargetExtent(b);return c&&d&&c.getExtentOfIntersectingCells(d)||b},_convertFeaturesToJson:function(b,c,d,e){var g=[],f=this._selectionSymbol,l=this.visibilityField,r,u=this.objectIdField;this.loaded&&(d||e)&&(r=h.filter(this.fields,function(b){return!1===b.editable&&(!e||b.name!==u)}));for(d=0;d<b.length;d++){var m=b[d],t={},p=m.geometry,v=m.attributes,x=m.symbol;!p||e&&this.loaded&&!this.allowGeometryUpdates||(t.geometry=p.toJson());
l?(t.attributes=v=k.mixin({},v),v[l]=m.visible?1:0):v&&(t.attributes=k.mixin({},v));t.attributes&&r&&r.length&&h.forEach(r,function(b){delete t.attributes[b.name]});x&&x!==f&&(t.symbol=x.toJson());g.push(t)}return c?g:q.toJson(g)},_selectHandler:function(b,c,d,e,g){var f;switch(c){case ba.SELECTION_NEW:this.clearSelection(!0);f=!0;break;case ba.SELECTION_ADD:f=!0;break;case ba.SELECTION_SUBTRACT:f=!1}e=b.features;var h=this._mode,k=[],l=this.objectIdField,r,q;if(f)for(f=0;f<e.length;f++)r=e[f],q=
r.attributes[l],r=h._addFeatureIIf(q,r),k.push(r),this._selectFeatureIIf(q,r,h);else for(f=0;f<e.length;f++)r=e[f],q=r.attributes[l],this._unSelectFeatureIIf(q,h),q=h._removeFeatureIIf(q),k.push(q||r);this._isSelOnly&&h._applyTimeFilter(!0);this._isImageService&&10.7>this.version&&void 0===b.exceededTransferLimit&&(b.exceededTransferLimit=e.length===this.maxRecordCount);this._hasPartialSelectedFeatures=!!b.exceededTransferLimit;this._resolve([k,c,b.exceededTransferLimit?{queryLimitExceeded:!0}:null],
"onSelectionComplete",d,g);if(b.exceededTransferLimit)this.onQueryLimitExceeded()},_selectFeatureIIf:function(b,c,d){var e=this._selectedFeatures,g=e[b];g||(d._incRefCount(b),e[b]=c,this._isTable||(this._setSelectSymbol(c),c.attr("data-selected","")));return g||c},_unSelectFeatureIIf:function(b,c){var d=this._selectedFeatures[b];d&&(c._decRefCount(b),delete this._selectedFeatures[b],this._isTable||(this._setUnSelectSymbol(d),d.attr("data-selected")));return d},_setSelectSymbol:function(b){var c=this._selectionSymbol;
c&&!this._isSelOnly&&b.setSymbol(c)},_setUnSelectSymbol:function(b){var c=this._selectionSymbol;c&&!this._isSelOnly&&c===b.symbol&&b.setSymbol(null,!0)},_getOutFields:function(){var b=[this.objectIdField,this.typeIdField,this.creatorField,this._startTimeField,this._endTimeField,this._trackIdField].concat(this._requiredFields).concat(this.dataAttributes),b=h.filter(b,function(b,c,d){return!!b&&h.indexOf(d,b)===c}),c=k.clone(this._outFields);if(c){if(-1!==h.indexOf(c,"*"))return c;h.forEach(b,function(b){-1===
h.indexOf(c,b)&&c.push(b)});return c}return b},_checkFields:function(b){var c=b||this._getOutFields();h.forEach(c,function(b){"*"!==b&&this._getField(b)},this);b||this._isTable||this._fserver||this._collection||this._isStream||h.some(this.fields,function(b){return b&&"esriFieldTypeGeometry"===b.type?!0:!1})},_fixFieldCase:function(b,c,d){var e=b&&b[c],g;if(e&&!k.isFunction(e)){if(g=!this._getField(e)&&this._getField(e,!0))e=b[c]=g.name;d&&d.push(e)}return e},_fixRendererFields:function(){var b=this.renderer;
this._orderBy=null;this._requiredFields=[];if(b&&0<this.fields.length){var c=[],d,b=h.filter([b,b.observationRenderer,b.latestObservationRenderer,b.trackRenderer],w.isDefined),e=[].concat(b);h.forEach(b,function(b){h.forEach(b.rendererInfos,function(b){b.renderer&&e.push(b.renderer)})});h.forEach(e,function(b){this._fixFieldCase(b,"attributeField",c);this._fixFieldCase(b,"attributeField2",c);this._fixFieldCase(b,"attributeField3",c);this._fixFieldCase(b.rotationInfo,"field",c);(d=this._fixFieldCase(b.sizeInfo,
"field",c))&&!this._orderBy&&(this._orderBy=[d+" DESC"]);this._fixFieldCase(b.sizeInfo,"normalizationField",c);this._fixFieldCase(b.colorInfo,"field",c);this._fixFieldCase(b.colorInfo,"normalizationField",c);this._fixFieldCase(b.field,"field",c);this._fixFieldCase(b.opacityInfo,"field",c);this._fixFieldCase(b.opacityInfo,"normalizationField",c);h.forEach(b.visualVariables,function(b){d=this._fixFieldCase(b,"field",c);"sizeInfo"===b.type&&d&&!this._orderBy&&(this._orderBy=[d+" DESC"]);this._fixFieldCase(b,
"normalizationField",c)},this);var e=h.map(b.getFieldsUsedInExpressions(),function(b){var c=this.getField(b);return c?c.name:b},this);c=c.concat(e);this._orderBy||!b.addBreak||k.isFunction(b.attributeField)||!b.backgroundFillSymbol&&!this._hasSizeDiff(b)||(this._orderBy=[b.attributeField+" DESC"])},this);this._requiredFields=h.filter(c,w.isDefined)}},_hasSizeDiff:function(b){var c=Number.MAX_VALUE,d=-Number.MAX_VALUE,e,g;h.forEach(b.infos,function(b){if(g=b.symbol){e=0;switch(g.type){case "simplemarkersymbol":e=
g.size;break;case "picturemarkersymbol":e=(g.width+g.height)/2;break;case "simplelinesymbol":case "cartographiclinesymbol":e=g.width;break;case "simplefillsymbol":case "picturefillsymbol":e=g.outline&&g.outline.width}e&&(c=Math.min(c,e),d=Math.max(d,e))}});return c!==Number.MAX_VALUE&&d!==-Number.MAX_VALUE&&1<Math.abs(d-c)},getOrderByFields:function(){var b=this.orderByFields||this._orderBy;return this.supportsAdvancedQueries&&b?h.filter(b,function(b){b=b.split(" ")[0];return!!this._getField(b,!0)},
this):null},_createFields:function(b){var c=b?b.length:0,d,e=[];for(d=0;d<c;d++)e.push(new ha(b[d]));this.fields=e},_createFieldsIndex:function(){if(this._fieldsIndexDirty){var b,c=this.fields,d=c?c.length:0;if(50<d&&this._canUseFieldsIndex()){b=new Map;for(var e=new Map,g=0;g<d;g++){var f=c[g];b.set(f.name,f);e.set(f.name.toLowerCase(),f)}b={caseSensitive:b,caseInsensitive:e}}this._fieldsIndex=b;this._fieldsIndexDirty=!1}},_canUseFieldsIndex:function(){var b=v.Map;return!("function"!==typeof v.Proxy||
"function"!==typeof v.Proxy.revocable||"function"!==typeof b||!b.prototype||"function"!==typeof b.prototype.set)},_getField:function(b,c){var d=this.fields;if(!d||0===d.length)return null;c&&(b=b.toLowerCase());this._createFieldsIndex();var e=this._fieldsIndex;if(e)return e=c?e.caseInsensitive:e.caseSensitive,e.get(b);var g;h.some(d,function(d){var e=!1;(e=c?d&&d.name.toLowerCase()===b?!0:!1:d&&d.name===b?!0:!1)&&(g=d);return e});return g},_getDateOpts:function(){this._dtOpts||(this._dtOpts={properties:h.map(h.filter(this.fields,
function(b){return!(!b||"esriFieldTypeDate"!==b.type)}),function(b){return b.name})});return this._dtOpts},_applyNormalized:function(b,c){b&&c&&h.forEach(b,function(b,d){b&&c[d]&&b.setGeometry(c[d])})},_editHandler:function(b,c,d,e,g,f){g=b.addResults;var l=b.updateResults;b=b.deleteResults;var r,q,u,m,t,p=this.objectIdField,v=this._mode,x=this._isTable;r=this.editFieldsInfo;m=this.getOutFields()||[];var w=r&&r.creatorField,G=r&&r.creationDateField,y=r&&r.editorField,A=r&&r.editDateField;r=r&&r.realm;
-1===h.indexOf(m,"*")&&(w&&-1===h.indexOf(m,w)&&(w=null),G&&-1===h.indexOf(m,G)&&(G=null),y&&-1===h.indexOf(m,y)&&(y=null),A&&-1===h.indexOf(m,A)&&(A=null));var N=G||A?(new Date).getTime():null,E=w||y?this.getUserId():void 0;E&&r&&(E=E+"@"+r);if(g){var C=this.globalIdField;for(r=0;r<g.length;r++)g[r]=new ea(g[r]),x||(q=g[r],q.success&&(u=q.objectId,m=c[r],(t=m._graphicsLayer)&&t!==this&&t.remove(m),t=m.attributes||{},t[p]=u,u=q.globalId,C&&u&&(t[C]=u),w&&(t[w]=E),y&&(t[y]=E),G&&(t[G]=N),A&&(t[A]=
N),m.setAttributes(t),v._init&&v.drawFeature(m)))}if(l)for(r=0;r<l.length;r++)if(l[r]=new ea(l[r]),!x&&(q=l[r],q.success)){u=q.objectId;m=d[u];if(c=v._getFeature(u))c.geometry!==m.geometry&&m.geometry&&c.setGeometry(Y.fromJson(m.geometry.toJson())),c.attributes!==m.attributes&&m.attributes&&c.setAttributes(k.mixin(c.attributes,m.attributes)),this._repaint(c,u);m=c||m;t=m.attributes||{};y&&(t[y]=E);A&&(t[A]=N);m.setAttributes(t)}if(b){d=[];for(r=0;r<b.length;r++)if(b[r]=new ea(b[r]),!x&&(q=b[r],q.success&&
(u=q.objectId,m=v._getFeature(u))))this._unSelectFeatureIIf(u,v)&&d.push(m),m._count=0,v._removeFeatureIIf(u);if(0<d.length)this.onSelectionComplete(d,ba.SELECTION_SUBTRACT)}this._resolve([g,l,b],"onEditsComplete",e,f)},_sendAttachment:function(b,c,d,e,g){var f=this;return y({url:this._url.path+"/"+c+"/"+("add"===b?"addAttachment":"updateAttachment"),form:d,content:k.mixin(this._url.query,{f:"json",token:this._getToken()||void 0}),callbackParamName:"callback.html",handleAs:"json"}).addCallback(function(d){var g=
"add"===b?"onAddAttachmentComplete":"onUpdateAttachmentComplete";d=new ea(d["add"===b?"addAttachmentResult":"updateAttachmentResult"]);d.attachmentId=d.objectId;d.objectId=c;f._resolve([d],g,e);return d}).addErrback(function(b){f._resolve([b],null,g,null,!0)})},_repaint:function(b,c,d){c=w.isDefined(c)?c:b.attributes[this.objectIdField];c in this._selectedFeatures&&this._selectionSymbol||b.setSymbol(b.symbol,d)},_getKind:function(b){var c=this._trackManager;return c?c.isLatestObservation(b)?1:0:0}});
k.mixin(ba,{MODE_SNAPSHOT:0,MODE_ONDEMAND:1,MODE_SELECTION:2,SELECTION_NEW:3,SELECTION_ADD:4,SELECTION_SUBTRACT:5,MODE_AUTO:6,MODE_STREAM:7,POPUP_NONE:"esriServerHTMLPopupTypeNone",POPUP_HTML_TEXT:"esriServerHTMLPopupTypeAsHTMLText",POPUP_URL:"esriServerHTMLPopupTypeAsURL"});aa._createWrappers(ba);Object.defineProperty(ba.prototype,"graphics",{get:function(){return this._hasOnDemandDrillMode()?this._mode.graphics:this._graphicsVal},set:function(b){this._graphicsVal=b}});Object.defineProperty(ba.prototype,
"name",{get:function(){return this.arcgisProps&&this.arcgisProps.title?this.arcgisProps.title:this._name},set:function(b){this._name=b;this.loaded&&this.arcgisProps&&(this.arcgisProps.title=null)}});Object.defineProperty(ba.prototype,"fields",{get:function(){return this._fields},set:function(b){b&&this._canUseFieldsIndex()&&(b=new Proxy(b,{set:k.hitch(this,function(b,c,d){if(c)if("length"===c)this._fieldsIndexDirty=!0;else{var e=Number(c);"number"!==typeof e||isNaN(e)||(this._fieldsIndexDirty=!0)}b[c]=
d;return!0})}));this._fields=b;this._fieldsIndexDirty=!0}});t("extend-esri")&&k.setObject("layers.FeatureLayer",ba,x);return ba})},"esri/arcadeProfiles/labelingProfile":function(){define("esri/arcadeProfiles/labelingProfile","dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../promiseList ../arcade/Feature ../support/expressionUtils ./utils".split(" "),function(m,p,f,l,k,h,q,g){m=new (m(null,{declaredClass:"esri.arcadeProfiles.LabelingProfile",defaults:{context:{vars:{$feature:"any"}}},initialize:function(e){var c=
[];g.hasGeometryOperations(e)&&c.push(q.enableGeometryOperations());return k(c)},isAsync:function(e){return!1},parse:function(e){return q.createSyntaxTree(e.expression)},compile:function(e){var c=p.clone(this.defaults.context);return e.syntaxTree?q.createFunction(e.syntaxTree,c):null},getEvalOptions:function(e){var c=e.feature;return{context:{vars:{$feature:c&&e.expression.hasVariable("$feature")?h.createFromGraphicLikeObject(c.geometry,c.attributes,e.layer):null},spatialReference:e.spatialReference}}}}));
f("extend-esri")&&p.setObject("arcadeProfiles.labelingProfile",m,l);return m})},"esri/layers/FeatureType":function(){define("esri/layers/FeatureType","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../symbols/jsonUtils ./RangeDomain ./CodedValueDomain ./InheritedDomain ./FeatureTemplate".split(" "),function(m,p,f,l,k,h,q,g,e,c,b){m=m(null,{declaredClass:"esri.layers.FeatureType",constructor:function(d){if(d&&p.isObject(d)){this.id=d.id;this.name=d.name;var f=d.symbol;
f&&(this.symbol=q.fromJson(f));var f=d.domains,h,k=this.domains={};for(h in f)if(f.hasOwnProperty(h)){var l=f[h];switch(l.type){case "range":k[h]=new g(l);break;case "codedValue":k[h]=new e(l);break;case "inherited":k[h]=new c(l)}}if(h=d.templates)for(f=this.templates=[],d=0;d<h.length;d++)f.push(new b(h[d]))}},toJson:function(){var b={id:this.id,name:this.name,symbol:this.symbol&&this.symbol.toJson()},c,e=this.domains,g=this.templates,k=h.fixJson;if(e){var l=b.domains={};for(c in e)e.hasOwnProperty(c)&&
(l[c]=e[c]&&e[c].toJson());k(l)}g&&(b.templates=f.map(g,function(b){return b.toJson()}));return k(b)}});l("extend-esri")&&p.setObject("layers.FeatureType",m,k);return m})},"esri/layers/InheritedDomain":function(){define("esri/layers/InheritedDomain",["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./Domain"],function(m,p,f,l,k){m=m([k],{declaredClass:"esri.layers.InheritedDomain"});f("extend-esri")&&p.setObject("layers.InheritedDomain",m,l);return m})},"esri/layers/FeatureTemplate":function(){define("esri/layers/FeatureTemplate",
"dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../graphic".split(" "),function(m,p,f,l,k,h){m=m(null,{declaredClass:"esri.layers.FeatureTemplate",constructor:function(f){f&&p.isObject(f)&&(this.name=f.name,this.description=f.description,this.drawingTool=f.drawingTool,this.thumbnail=f.thumbnail,f=f.prototype,this.prototype=new h(f.geometry,null,f.attributes))},toJson:function(){return k.fixJson({name:this.name,description:this.description,drawingTool:this.drawingTool,thumbnail:k.fixJson(p.clone(this.thumbnail)),
prototype:this.prototype&&this.prototype.toJson()})}});p.mixin(m,{TOOL_AUTO_COMPLETE_POLYGON:"esriFeatureEditToolAutoCompletePolygon",TOOL_CIRCLE:"esriFeatureEditToolCircle",TOOL_ELLIPSE:"esriFeatureEditToolEllipse",TOOL_FREEHAND:"esriFeatureEditToolFreehand",TOOL_LINE:"esriFeatureEditToolLine",TOOL_NONE:"esriFeatureEditToolNone",TOOL_POINT:"esriFeatureEditToolPoint",TOOL_POLYGON:"esriFeatureEditToolPolygon",TOOL_RECTANGLE:"esriFeatureEditToolRectangle",TOOL_ARROW:"esriFeatureEditToolArrow",TOOL_TRIANGLE:"esriFeatureEditToolTriangle",
TOOL_LEFT_ARROW:"esriFeatureEditToolLeftArrow",TOOL_RIGHT_ARROW:"esriFeatureEditToolRightArrow",TOOL_UP_ARROW:"esriFeatureEditToolUpArrow",TOOL_DOWN_ARROW:"esriFeatureEditToolDownArrow"});f("extend-esri")&&p.setObject("layers.FeatureTemplate",m,l);return m})},"esri/layers/FeatureEditResult":function(){define("esri/layers/FeatureEditResult",["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(m,p,f,l){m=m(null,{declaredClass:"esri.layers.FeatureEditResult",constructor:function(f){f&&
p.isObject(f)&&(this.objectId=f.objectId,this.globalId=f.globalId,this.success=f.success,f.success||(f=f.error,this.error=Error(),this.error.code=f.code,this.error.message=f.description))}});f("extend-esri")&&p.setObject("layers.FeatureEditResult",m,l);return m})},"esri/layers/LabelClass":function(){define("esri/layers/LabelClass","dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../lang ../symbols/TextSymbol ../symbols/ShieldLabelSymbol".split(" "),function(m,p,f,l,k,h,q,g){var e=
/__begin__/ig,c=/__end__/ig,b=/^__begin__/i,d=/__end__$/i;m=m(null,{declaredClass:"esri.layers.LabelClass",labelPlacement:null,labelExpression:null,format:null,fieldInfos:null,useCodedValues:null,symbol:null,maxScale:0,minScale:0,where:null,sizeInfo:null,_labelPlacementLookup:{"above-center":"esriServerPointLabelPlacementAboveCenter","above-left":"esriServerPointLabelPlacementAboveLeft","above-right":"esriServerPointLabelPlacementAboveRight","below-center":"esriServerPointLabelPlacementBelowCenter",
"below-left":"esriServerPointLabelPlacementBelowLeft","below-right":"esriServerPointLabelPlacementBelowRight","center-center":"esriServerPointLabelPlacementCenterCenter","center-left":"esriServerPointLabelPlacementCenterLeft","center-right":"esriServerPointLabelPlacementCenterRight","above-after":"esriServerLinePlacementAboveAfter","above-along":"esriServerLinePlacementAboveAlong","above-before":"esriServerLinePlacementAboveBefore","above-start":"esriServerLinePlacementAboveStart","above-end":"esriServerLinePlacementAboveEnd",
"below-after":"esriServerLinePlacementBelowAfter","below-along":"esriServerLinePlacementBelowAlong","below-before":"esriServerLinePlacementBelowBefore","below-start":"esriServerLinePlacementBelowStart","below-end":"esriServerLinePlacementBelowEnd","center-after":"esriServerLinePlacementCenterAfter","center-along":"esriServerLinePlacementCenterAlong","center-before":"esriServerLinePlacementCenterBefore","center-start":"esriServerLinePlacementCenterStart","center-end":"esriServerLinePlacementCenterEnd",
"always-horizontal":"esriServerPolygonPlacementAlwaysHorizontal"},constructor:function(b){b&&(p.mixin(this,b),this._labelPlacementLookup.hasOwnProperty(this.labelPlacement)||(this.labelPlacement=h.valueOf(this._labelPlacementLookup,b.labelPlacement)),b.format&&(this.format=b.format),b.fieldInfos&&(this.fieldInfos=b.fieldInfos),b.symbol&&(this.symbol="esriSHD"===b.symbol.type?new g(b.symbol):new q(b.symbol)),b=this.sizeInfo)&&(b.minSize&&(b.minSize=l.pt2px(b.minSize)),b.maxSize&&(b.maxSize=l.pt2px(b.maxSize)))},
getSymbol:function(){return this.symbol},toJson:function(){var b=this.sizeInfo;b&&(b=p.mixin({},b),b.minSize&&(b.minSize=l.px2pt(b.minSize)),b.maxSize&&(b.maxSize=l.px2pt(b.maxSize)));var c=h.fixJson(this.labelExpressionInfo&&p.clone(this.labelExpressionInfo));this._processLabelExpressionInfo(c);b={name:this.name,labelExpression:this.labelExpression,labelExpressionInfo:c,format:this.format||void 0,fieldInfos:this.fieldInfos||void 0,useCodedValues:this.useCodedValues,maxScale:this.maxScale,minScale:this.minScale,
where:this.where,sizeInfo:b||void 0,labelPlacement:this._labelPlacementLookup.hasOwnProperty(this.labelPlacement)?this._labelPlacementLookup[this.labelPlacement]:this.labelPlacement,symbol:this.symbol&&this.symbol.toJson()};return h.fixJson(b)},_processLabelExpressionInfo:function(b){b&&b.value&&(b.expression=this._convertTemplatedStringToArcade(b.value))},_convertTemplatedStringToArcade:function(g){var f;g&&(f=p.replace(g,function(b,c){return'__begin__$feature["'+c+'"]__end__'}),f=b.test(f)?f.replace(b,
""):'"'+f,f=d.test(f)?f.replace(d,""):f+'"',f=f.replace(e,'" + ').replace(c,' + "'));return f}});f("extend-esri")&&p.setObject("layers.LabelClass",m,k);return m})},"esri/symbols/ShieldLabelSymbol":function(){define("esri/symbols/ShieldLabelSymbol","dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./MarkerSymbol ./Font".split(" "),function(m,p,f,l,k,h,q,g,e){var c={url:"",width:12,height:12,angle:0,xoffset:0,yoffset:0};m=m(g,{declaredClass:"esri.symbol.ShieldLabelSymbol",
type:"shieldlabelsymbol",color:[255,255,255,1],width:32,height:32,font:l.defaultFont,constructor:function(b,d,e,g,h){b?p.isString(b)?(this.url=b,d&&(this.color=d),e&&(this.width=e),g&&(this.height=g),void 0!==h&&(this.font=h)):(this.width=l.pt2px(b.width),this.height=l.pt2px(b.height),d=b.imageData,9>f("ie")||!d||(e=this.url,this.url="data:"+(b.contentType||"image")+";base64,"+d,this.imageData=e)):p.mixin(this,c)},getStroke:function(){return null},getFill:function(){return this.color},setWidth:function(b){this.width=
b;return this},setHeight:function(b){this.height=b;return this},setUrl:function(b){b!==this.url&&(delete this.imageData,delete this.contentType);this.url=b;return this},setFont:function(b){this.font=b;return this},setText:function(b){this.text=b;return this},getWidth:function(){return this.width},getHeight:function(){return this.height},getShapeDescriptors:function(){return{defaultShape:{type:"image",x:-Math.round(this.width/2),y:-Math.round(this.height/2),width:this.width,height:this.height,src:this.url||
""},fill:null,stroke:null}},toJson:function(){var b=this.url,c=this.imageData;if(0===b.indexOf("data:"))var g=b,b=c,c=g.indexOf(";base64,")+8,c=g.substr(c);var b=q.getAbsoluteUrl(b),g=l.px2pt(this.width),g=isNaN(g)?void 0:g,f=l.px2pt(this.height),f=isNaN(f)?void 0:f,b=h.fixJson(p.mixin(this.inherited("toJson",arguments),{type:"esriSHD",url:b,imageData:c,contentType:this.contentType,width:g,height:f}));this.font?(c=new e(this.font),b.font=c.toJson()):b.font=null;delete b.size;b.imageData||delete b.imageData;
return b}});m.defaultProps=c;f("extend-esri")&&(p.setObject("symbol.ShieldLabelSymbol",m,k),k.symbol.defaultShieldLabelSymbol=c);return m})},"esri/layers/SnapshotMode":function(){define("esri/layers/SnapshotMode","dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../SpatialReference ../srUtils ../tasks/query ./RenderMode ./support/ParallelSnapshot".split(" "),function(m,p,f,l,k,h,q,g,e){m=m([g],{declaredClass:"esri.layers._SnapshotMode",maxFeatures:5E4,maxRecordCountFactor:1,scaleToTileFactor:1,
_isSuspendedAtStartup:!1,_pendingRefresh:!1,constructor:function(c){this.featureLayer=c;this._featureMap={};this._hasUpdateError=this._hasPartialFeatures=!1;this._drawFeatures=p.hitch(this,this._drawFeatures);this._queryErrorHandler=p.hitch(this,this._queryErrorHandler);this._handleSuccess=p.hitch(this,this._handleSuccess);this._handleError=p.hitch(this,this._handleError);this._handleProgress=p.hitch(this,this._handleProgress)},startup:function(){if(!this._started||this._isSuspendedAtStartup){this.inherited(arguments);
var c=this.featureLayer,b=c.reHostedFS.test(c.url);this.pagination=c.queryPagination&&null!=c.maxRecordCount;this._cacheHintSupported=c._isCacheHintSupported();this.scaleToTileFactor=this._getScaleToTileFactor();b&&this.pagination&&(this._parallelSnapshot=new e({layer:c,mode:this,queryTask:c._task}));this._isSuspendedAtStartup=c.suspended;this._startup()}},propertyChangeHandler:function(c){this._init&&(c?this.featureLayer._collection||this._fetchAll():this._applyTimeFilter())},destroy:function(){this._isSuspendedAtStartup=
this._pendingRefresh=!1;this._cancelPendingRequest(this._pendingRequest);this._parallelSnapshot&&this._parallelSnapshot.destroy();this.inherited(arguments)},drawFeature:function(c){var b=c.attributes[this.featureLayer.objectIdField];this._addFeatureIIf(b,c);this._incRefCount(b)},resume:function(){this._isSuspendedAtStartup||this._pendingRefresh?(this._isSuspendedAtStartup=!1,this._startup()):this.propertyChangeHandler(0)},refresh:function(){var c=this.featureLayer;c._collection?(c._fireUpdateStart(),
c._refresh(!0),c._fireUpdateEnd()):this._fetchAll()},hasAllFeatures:function(){return!this._hasPartialFeatures},hasUpdateError:function(){return this._hasUpdateError},canFetchPBF:function(c){return this.inherited(arguments)&&this.featureLayer._canFetchPBFForQuery(c)},_startup:function(){this.featureLayer._collection?this._applyTimeFilter():this._fetchAll()},_fetchAll:function(){var c=this.featureLayer;c._collection||c.suspended||!c.isQueryable()?this._pendingRefresh=c.suspended:(this._pendingRefresh=
!1,c._fireUpdateStart(),this._clearIIf(),this._hasUpdateError=this._hasPartialFeatures=!1,this._parallelSnapshot?this._parallelSnapshot.fetch().then(this._handleSuccess,this._handleError,this._handleProgress):this._sendRequest())},_handleSuccess:function(c){this._hasPartialFeatures=c.hasPartialFeatures;this._hasUpdateError=c.hasUpdateError;this.featureLayer._fireUpdateEnd(null)},_handleError:function(c){this._queryErrorHandler(c)},_handleProgress:function(c){c.isError?this.featureLayer._errorHandler(c.error):
this._addFeatures(c.features)},_getScaleToTileFactor:function(){var c=this.featureLayer.tileMaxRecordCount,b=this.featureLayer.maxRecordCount,d=1;null!=c&&null!=b&&(d=Number((c/b).toFixed(2)));return d},_getPageSize:function(c){var b=this.featureLayer.tileMaxRecordCount,b="tile"===c.resultType&&b?b:this.featureLayer.maxRecordCount;c.maxRecordCountFactor&&(b=Math.floor(b*c.maxRecordCountFactor));return b},_sendRequest:function(c){var b=this.featureLayer,d=this._createQueryInfo(),e=d.query;this.pagination&&
(this._pageSize=this._getPageSize(e),this._start=e.start=null==c?0:c,e.num=this._pageSize);this._pendingRequest&&this._cancelPendingRequest(this._pendingRequest);this._pendingRequest=b._task.execute(e,this._drawFeatures,this._queryErrorHandler,d.pbf?{format:"pbf"}:null)},_drawFeatures:function(c){this._pendingRequest=null;this.featureLayer._isImageService&&10.7>this.featureLayer.version&&void 0===c.exceededTransferLimit&&(c.exceededTransferLimit=c.features.length===this.featureLayer.maxRecordCount);
var b=this.featureLayer,d=c.exceededTransferLimit,e=d&&!b._collection;c=this._checkMaxLimit(c.features);var g=c.maxLimitReached;this._addFeatures(c.features);this.pagination&&e&&!g||(this._hasPartialFeatures=!!d,b._fireUpdateEnd(null,d?{queryLimitExceeded:!0}:null));e&&(this.pagination&&!g&&this._sendRequest(this._start+this._pageSize),b.onQueryLimitExceeded())},_queryErrorHandler:function(c){this._pendingRequest=null;this._hasUpdateError=this._hasPartialFeatures=!0;var b=this.featureLayer;b._errorHandler(c);
b._fireUpdateEnd(c)},_checkMaxLimit:function(c){var b=c?c.length:0,d=this.featureLayer.graphics.length+b,e=d>=this.maxFeatures;if(e){var g=d-this.maxFeatures;g&&c.splice(b-g,g)}return{maxLimitReached:e,featuresDiscarded:d>this.maxFeatures,features:c}},_createQueryInfo:function(){var c=this.featureLayer,b=new q;b.outFields=c.getOutFields();b.where=c.getDefinitionExpression()||"1\x3d1";b.returnGeometry=!0;b.outSpatialReference=h.createSpatialReference(this.map.spatialReference.toJson());b.timeExtent=
c.getTimeDefinition();b.maxAllowableOffset=c._maxOffset;b.quantizationParameters=c._quantizationParameters;b.orderByFields=c.supportsAdvancedQueries?c.getOrderByFields():null;b.multipatchOption=c.multipatchOption;c._ts&&(b._ts=(new Date).getTime());this._cacheHintSupported&&c._enableCacheHint(b);var d=this.canFetchPBF(b);c._enableEditModeQuantization(b,d);this._applyMaxRecordCountFactor(b,d);return{query:b,pbf:d}},_applyMaxRecordCountFactor:function(c,b){var d=this.featureLayer.advancedQueryCapabilities;
this.featureLayer._isCacheHintEnabled(c)&&d&&d.supportsMaxRecordCountFactor&&("tile"!==c.resultType&&1<this.scaleToTileFactor&&(c.maxRecordCountFactor=this.scaleToTileFactor),b&&1<this.maxRecordCountFactor&&(c.maxRecordCountFactor=this.maxRecordCountFactor),5<c.maxRecordCountFactor&&(c.maxRecordCountFactor=5))},_addFeatures:function(c){var b=this.featureLayer,d=b.objectIdField,e=c.length,g=b._selectedFeatures,f=b.mode===b.constructor.MODE_AUTO,h,k,l;b._fireUpdateStart();b._sortFeatures(c);for(b=0;b<
e;b++)k=c[b],l=k.attributes[d],h=this._addFeatureIIf(l,k),this._incRefCount(l),f&&h!==k&&g[l]&&(h.setGeometry(k.geometry),h.setAttributes(k.attributes));this._applyTimeFilter(!0)}});f("extend-esri")&&p.setObject("layers._SnapshotMode",m,l);return m})},"esri/layers/RenderMode":function(){define("esri/layers/RenderMode",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","../sniff","../kernel"],function(m,p,f,l,k){var h=!!l("esri-pbf"),q=!!l("esri-featurelayer-pbf");m=m(null,{declaredClass:"esri.layers._RenderMode",
enablePBFQuery:h&&q,initialize:function(g){this.map=g;this._init=!0},startup:function(){this._started=!0},propertyChangeHandler:function(g){},destroy:function(){this._init=this._started=!1},drawFeature:function(g){},suspend:function(){},resume:function(){},refresh:function(){},hasAllFeatures:function(){return!0},hasUpdateError:function(){return!1},canFetchPBF:function(g){return!(!this.featureLayer._canFetchPBF()||!this.enablePBFQuery)},_incRefCount:function(g){(g=this._featureMap[g])&&g._count++},
_decRefCount:function(g){(g=this._featureMap[g])&&g._count--},_getFeature:function(g){return this._featureMap[g]},_addFeatureIIf:function(g,e){var c=this._featureMap,b=c[g],d=this.featureLayer;b||(c[g]=e,d._add(e),e._count=0);return b||e},_removeFeatureIIf:function(g){var e=this._featureMap[g],c=this.featureLayer;if(e){if(e._count)return;delete this._featureMap[g];c._remove(e)}return e},_registerFeature:function(g,e){var c=this._featureMap,b=c[g];b?(b.attributes=e.attributes,b.geometry=e.geometry):
(c[g]=e,e._count=0,e._layer=e._graphicsLayer=e._sourceLayer=this.featureLayer);return b||e},_unregisterFeature:function(g){var e=this._featureMap,c=e[g];c&&!c._count&&(delete e[g],c._graphicsLayer=null)},_clearIIf:function(){var g;g=this.featureLayer;var e=g.graphics,c=g._selectedFeatures,b=g.getSelectedFeatures().length,d=g.objectIdField;if(b)for(g=e.length-1;0<=g;g--){var b=e[g],f=b.attributes[d];f in c?b._count=1:(b._count=0,this._removeFeatureIIf(f))}else g.clear(),this._featureMap={}},_cancelPendingRequest:function(g){if(g)try{g.cancel()}catch(e){}},
_toggleVisibility:function(g){var e=this.featureLayer,c=e.graphics,b=g?"show":"hide",d,f=c.length;g=g&&e._ager;for(d=0;d<f;d++){var h=c[d];h[b]();g&&e._repaint(h)}},_applyTimeFilter:function(g){var e=this.featureLayer;if(e.timeInfo&&!e.suspended){g||e._fireUpdateStart();var c=e._trackManager;c&&c.clearTracks();var b=e.getTimeDefinition(),d=e._getOffsettedTE(e._mapTimeExtent);d?(d=e._getTimeOverlap(b,d))?(b=e._filterByTime(e.graphics,d.startTime,d.endTime),c&&c.addFeatures(b.match),f.forEach(b.match,
function(b){var c=b._shape;b.visible||(b.show(),(c=b._shape)&&c._moveToFront());e._ager&&c&&e._repaint(b)}),f.forEach(b.noMatch,function(b){b.visible&&b.hide()})):this._toggleVisibility(!1):(c&&c.addFeatures(e.graphics),this._toggleVisibility(!0));c&&(c.moveLatestToFront(),c.drawTracks());g||e._fireUpdateEnd()}}});l("extend-esri")&&p.setObject("layers._RenderMode",m,k);return m})},"esri/layers/support/ParallelSnapshot":function(){define("esri/layers/support/ParallelSnapshot","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojo/Deferred ../../kernel".split(" "),
function(m,p,f,l,k,h){m=m(null,{declaredClass:"esri.layers.support.ParallelSnapshot",layer:null,mode:null,queryTask:null,batchSize:5,_queryInfo:null,_fetchDfd:null,_startPage:null,_lastPage:null,_pageSize:null,_maxPages:null,_requests:null,constructor:function(f){p.mixin(this,f);this._requests={}},destroy:function(){this.cancel()},fetch:function(){var f=new k;this.cancel(!0);this._queryInfo=this.mode._createQueryInfo();this._pageSize=this.mode._getPageSize(this._queryInfo.query);this._maxPages=Math.ceil(this._getFeatureCount()/
this._pageSize);this._fetchDfd=f;this._sendRequests();return f.promise},cancel:function(f){this._cancelPendingRequests(f);this._reset()},_reset:function(){this._startPage=this._lastPage=null;this._requests={}},_getFeatureCount:function(){return this.layer.mode===this.layer.constructor.MODE_AUTO&&0===this.layer.getLastExceedsLimitResult()?this.layer._getMaxFeaturesForAutoSnapshotMode():this.mode.maxFeatures},_sendRequests:function(f){var g=this._queryInfo.query,e=this.queryTask,c=this._requests,b;
f=null==f?1:f;b=f+this.batchSize-1;b>this._maxPages&&(b=this._maxPages);if(!(f>b))for(this._startPage=f,this._lastPage=b;f<=b;f++)g.start=(f-1)*this._pageSize,g.num=this._pageSize,c[f]=e.execute(g,null,null,this._queryInfo.pbf?{format:"pbf"}:null),c[f].then(p.hitch(this,this._handleSuccess,f)).otherwise(p.hitch(this,this._handleError,f))},_evalNextBatch:function(f){f===this._lastPage&&this._sendRequests(this._lastPage+1)},_handleSuccess:function(f,g){g.exceededTransferLimit||this._cancelLaterRequests(f,
!0);var e=this.mode._checkMaxLimit(g.features);this._fetchDfd.progress({features:e.features,isError:!1});e.maxLimitReached?((f=e.featuresDiscarded||this._hasRejectedRequests())||(f=!!this._getResult(this._getLastSuccessfulRequest()).exceededTransferLimit),this._resolveFetch(f)):(g.exceededTransferLimit&&this._evalNextBatch(f),this._evalResolution())},_handleError:function(f,g){var e=this._requests;e&&e[f]&&(1===f?this._rejectFetch(g):(this._evalNextBatch(f),this._fetchDfd.progress({error:g,isError:!0}),
this._evalResolution()))},_evalResolution:function(){this._hasPendingRequests()||this._resolveFetch(this._hasRejectedRequests())},_resolveFetch:function(f){var g=this._hasRejectedRequests();this.cancel(!0);this._fetchDfd.resolve({hasPartialFeatures:f,hasUpdateError:g})},_rejectFetch:function(f){this.cancel(!0);this._fetchDfd.reject(f)},_getResult:function(f){return f&&f.dfd.results[0]},_hasPendingRequests:function(){return!!this._getPendingRequests().length},_getPendingRequests:function(){var f=this._requests,
g,e=[];for(g in f){var c=f[g];c.isFulfilled()||e.push({pageId:Number(g),dfd:c})}return e},_getLastSuccessfulRequest:function(){var h=this._getResolvedRequests(),g=-Infinity,e,h=f.filter(h,function(c){return!!this._getResult(c).features.length||1===c.pageId},this);f.forEach(h,function(c){c.pageId>g&&(g=c.pageId,e=c)});return e},_getResolvedRequests:function(){var f=this._requests,g,e=[];for(g in f){var c=f[g];c.isResolved()&&e.push({pageId:Number(g),dfd:c})}return e},_hasRejectedRequests:function(){var h=
this._getRejectedRequests(),g=this._getLastSuccessfulRequest(),e=this._getResult(g);e&&!e.exceededTransferLimit&&(h=f.filter(h,function(c){return c.pageId<=g.pageId}));return!!h.length},_getRejectedRequests:function(){var f=this._requests,g,e=[];for(g in f){var c=f[g];c.isRejected()&&e.push({pageId:Number(g),dfd:c})}return e},_cancelPendingRequests:function(f){this._cancelRequests(this._getPendingRequests(),f)},_cancelLaterRequests:function(h,g){var e=f.filter(this._getPendingRequests(),function(c){return c.pageId>
h});this._cancelRequests(e,g)},_cancelRequests:function(h,g){var e=this.mode,c=this._requests;f.forEach(h,function(b){g&&delete c[b.pageId];e._cancelPendingRequest(b.dfd)})}});l("extend-esri")&&p.setObject("layers.support.ParallelSnapshot",m,h);return m})},"esri/layers/OnDemandMode":function(){define("esri/layers/OnDemandMode","dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/has ../kernel ../geometry/Point ../tasks/query ./RenderMode ./GridLayout".split(" "),function(m,
p,f,l,k,h,q,g,e,c){m=m([e],{declaredClass:"esri.layers._OnDemandMode",constructor:function(b){this.featureLayer=b;this._featureMap={}},initialize:function(b){this.inherited(arguments);this._cellMap={};this._gridLayer=c.createFromFeatureLayer({layer:this.featureLayer,map:b})},startup:function(){if(!this._started||this._isSuspendedAtStartup)this.inherited(arguments),this._ioQueue=[],(this._isSuspendedAtStartup=this.featureLayer.suspended)||(this._zoomHandler(),this._enableConnectors())},propertyChangeHandler:function(b){this._init&&
2>b&&this._zoomHandler()},destroy:function(){this._disableConnectors();this._processIOQueue(!0);this.inherited(arguments)},drawFeature:function(b){var c=b.geometry,e=[];if(c){var e=this._gridLayer.getCellsInExtent("point"===c.type?{xmin:c.x,ymin:c.y,xmax:c.x,ymax:c.y}:c.getExtent(),!1).cells,c=this._cellMap,g,f,h=b.attributes[this.featureLayer.objectIdField],k,l,q;for(g=0;g<e.length;g++)f=e[g],k=f.latticeID,l=f.row,q=f.col,k?f=c[k]=c[k]||f:(c[l]=c[l]||{},f=c[l][q]=c[l][q]||f),f.features=f.features||
[],f.features.push(b),this._addFeatureIIf(h,b),this._incRefCount(h)}},suspend:function(){this._init&&this._disableConnectors()},resume:function(){this._init&&(this._enableConnectors(),this._zoomHandler())},refresh:function(){this._zoomHandler()},hasAllFeatures:function(){var b=!1,c=this._getCurrentCells(),e;for(e=0;e<c.length;e++)if(c[e].hasPartialFeatures){b=!0;break}return!b},hasUpdateError:function(){var b=!1,c=this._getCurrentCells(),e;for(e=0;e<c.length;e++)if(c[e].hasUpdateError){b=!0;break}return b},
canFetchPBF:function(b){return this.inherited(arguments)&&this.featureLayer._canFetchPBFForQuery(b)},_enableConnectors:function(){var b=this.map;this._zoomConnect=p.connect(b,"onZoomEnd",this,this._zoomHandler);this._panConnect=p.connect(b,"onPanEnd",this,this._panHandler);this._resizeConnect=p.connect(b,"onResize",this,this._panHandler)},_disableConnectors:function(){p.disconnect(this._zoomConnect);p.disconnect(this._panConnect);p.disconnect(this._resizeConnect)},_zoomHandler:function(){this._processIOQueue(!0);
var b=this.featureLayer,c=this.map;!b.suspended&&b.isQueryable()&&(b._fireUpdateStart(),this._clearIIf(),(b=b._trackManager)&&b.clearTracks(),this._cellMap={},this._gridLayer.setResolution(c.extent),this._sendRequest())},_panHandler:function(b){if(this.featureLayer.isQueryable()){this.featureLayer._fireUpdateStart();var c=this.featureLayer._resized;b=c?b:null;c&&this._gridLayer.setMapState(b,this.map.width,this.map.height);this._sendRequest(b)}},_sendRequest:function(b){this._exceeds=!1;var c=this.featureLayer,
e=this.map;b=b||e.extent;e=this._gridLayer.getCellsInExtent(b,c.latticeTiling).cells;if(!c.isEditable())var g=this._cellMap,e=l.filter(e,function(b){if(b.lattice){if(g[b.latticeID])return!1}else if(g[b.row]&&g[b.row][b.col])return!1;return!0});this._pending=this._pending||0;var h;for(h=0;h<e.length;h++){var k=e[h],q=this._createQueryInfo(k);this._pending++;this._ioQueue.push(c._task.execute(q.query,f.hitch(this,this._drawFeatures,k),f.hitch(this,this._queryErrorHandler,k),q.pbf?{format:"pbf"}:null))}this._removeOldCells(b);
this._endCheck()},_drawFeatures:function(b,c){this.featureLayer._isImageService&&10.7>this.featureLayer.version&&void 0===c.exceededTransferLimit&&(c.exceededTransferLimit=c.features.length===this.featureLayer.maxRecordCount);b.hasPartialFeatures=!!c.exceededTransferLimit;b.hasUpdateError=!1;this._exceeds=this._exceeds||c.exceededTransferLimit;this._finalizeIO();var d=this.featureLayer,e=this.map.extent,g=b.extent,f=b.row,h=b.col,k=d.objectIdField;c=c.features;var l=this._gridLayer,q=this._cellMap,
m=b.latticeID,q=m?q[m]:q[f]&&q[f][h];if(b.resolution==l.resolution&&(m?m===l.getLatticeID(e):l.intersects(g,e)))if(q)d._sortFeatures(c),this._updateCell(q,c);else for(d._sortFeatures(c),b.features=c,this._addCellToCellMap(b),d=c.length,b=0;b<d;b++)e=c[b],g=e.attributes[k],this._addFeatureIIf(g,e),this._incRefCount(g);else q&&this._removeCell(f,h,m);this._endCheck()},_queryErrorHandler:function(b,c){this._finalizeIO();b.hasPartialFeatures=!0;b.hasUpdateError=!0;this._addCellToCellMap(b);this.featureLayer._errorHandler(c);
this._endCheck(c)},_finalizeIO:function(){this._pending--},_endCheck:function(b){if(0===this._pending){this._processIOQueue();var c=this.featureLayer,e=c._trackManager;e&&(e.clearTracks(),e.addFeatures(c.graphics),c._ager&&l.forEach(c.graphics,function(b){b._shape&&c._repaint(b)}),e.moveLatestToFront(),e.drawTracks());this.featureLayer._fireUpdateEnd(!!b&&Error("FeatureLayer: "+(b.message||"an error occurred while updating the layer.")),this._exceeds?{queryLimitExceeded:!0}:null);if(this._exceeds)c.onQueryLimitExceeded()}},
_processIOQueue:function(b){this._ioQueue=l.filter(this._ioQueue,function(b){return-1<b.fired?!1:!0});b&&l.forEach(this._ioQueue,this._cancelPendingRequest)},_createQueryInfo:function(b){var c=this.featureLayer,e=new g;e.outFields=c.getOutFields();e.where=c.getDefinitionExpression();e.returnGeometry=!0;e.geometry=b.extent||b.lattice;c.latticeTiling&&b.extent&&(e.spatialRelationship=g.SPATIAL_REL_CONTAINS);e.timeExtent=c._getOffsettedTE(c._mapTimeExtent);e.maxAllowableOffset=c._maxOffset;e.quantizationParameters=
c._quantizationParameters;e.orderByFields=c.supportsAdvancedQueries?c.getOrderByFields():null;e.multipatchOption=c.multipatchOption;c._ts&&(e._ts=(new Date).getTime());(b=c.advancedQueryCapabilities)&&b.supportsQueryWithResultType&&(e.resultType="tile");b=this.canFetchPBF(e);c._enableEditModeQuantization(e,b);return{query:e,pbf:b}},_getCurrentCells:function(b){var c=[];b=b||this._cellMap;for(var e in b)if(b.hasOwnProperty(e)){var g=b[e];g&&(g.hasOwnProperty("row")||g.hasOwnProperty("latticeID")?c.push(g):
"object"===typeof g&&c.push.apply(c,this._getCurrentCells(g)))}return c},_addCellToCellMap:function(b){var c=this._cellMap;if(b.latticeID)c[b.latticeID]=b;else{var e=b.row,g=b.col;c[e]=c[e]||{};c[e][g]=b}},_removeOldCells:function(b){var c=this._cellMap,e=this._gridLayer,g,f;for(g in c)if(c[g]){var h=c[g],k=h.latticeID,l=0,q=0;if(k)l++,k!==e.getLatticeID(b)&&(this._removeCell(null,null,k),q++);else for(f in h)h[f]&&(l++,e.intersects(h[f].extent,b)||(this._removeCell(g,f),q++));q===l&&delete c[g]}},
_updateCell:function(b,c){var d=this.featureLayer,e=d.objectIdField,d=d._selectedFeatures,g,f=c.length;b.features=b.features||[];for(g=0;g<f;g++){var h=c[g],k=h.attributes[e],l=this._addFeatureIIf(k,h);l===h?(this._incRefCount(k),b.features.push(l)):k in d||(l.setGeometry(h.geometry),l.setAttributes(h.attributes))}},_removeCell:function(b,c,e){var d=this._cellMap,g=this.featureLayer,f=g.objectIdField,h=e?d[e]:d[b]&&d[b][c];if(h&&(e?delete d[e]:delete d[b][c],b=h.features))for(c=0;c<b.length;c++)e=
b[c].attributes[f],this._decRefCount(e),e in g._selectedFeatures||this._removeFeatureIIf(e)}});k("extend-esri")&&f.setObject("layers._OnDemandMode",m,h);return m})},"esri/layers/GridLayout":function(){define("esri/layers/GridLayout","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../geometry/Point ../geometry/Extent ../geometry/Polyline ../geometry/Polygon ../geometry/normalizeUtils ../srUtils".split(" "),function(m,p,f,l,k,h,q,g,e,c,b){var d=m(null,{declaredClass:"esri.layers._GridLayout",
constructor:function(b,c,d,e){this.origin=b;this.cellWidth=c.width;this.cellHeight=c.height;this.mapWidth=d.width;this.mapHeight=d.height;this.srInfo=e},setResolution:function(b){this.resolution=(b.xmax-b.xmin)/this.mapWidth;this.srInfo&&(b=Math.round(Math.round(2*this.srInfo.valid[1]/this.resolution)/this.cellWidth),this._frameStats=[b,0,b-1])},setMapState:function(b,c,d){this.mapWidth=c;this.mapHeight=d;this.setResolution(b)},getCellCoordinates:function(b){var c=this.resolution,d=this.origin;return{row:Math.floor((d.y-
b.y)/(this.cellHeight*c)),col:Math.floor((b.x-d.x)/(this.cellWidth*c))}},normalize:function(b){var c=this._frameStats;if(c){var d=c[0],e=c[1],c=c[2];b<e?(b%=d,b=b<e?b+d:b):b>c&&(b%=d)}return b},intersects:function(b,c){var d=this.srInfo;return d?f.some(c._getParts(d),function(c){return b.intersects(c.extent)}):b.intersects(c)},getCellExtent:function(c,d){var e=this.resolution,g=this.origin,f=this.cellWidth,h=this.cellHeight;return new q(d*f*e+g.x,g.y-(c+1)*h*e,(d+1)*f*e+g.x,g.y-c*h*e,b.createSpatialReference(g.spatialReference.toJson()))},
getLatticeID:function(b){var c=this.getCellCoordinates({x:b.xmin,y:b.ymax}),d=this.getCellCoordinates({x:b.xmax,y:b.ymin});b=c.row;var e=d.row,c=this.normalize(c.col),d=this.normalize(d.col);return b+"_"+e+"_"+c+"_"+d},sorter:function(b,c){return b<c?-1:1},getCellsInExtent:function(b,c){var d=this.getCellCoordinates({x:b.xmin,y:b.ymax}),e=this.getCellCoordinates({x:b.xmax,y:b.ymin}),h=d.row,k=e.row,d=d.col,e=e.col,l=[],q,r,m,p=[],v=[],E,H,D=[];for(q=h;q<=k;q++)for(r=d;r<=e;r++)m=this.normalize(r),
b=this.getCellExtent(q,m),f.some(l,function(b){return b.row===q&&b.col===m})||l.push({row:q,col:m,extent:b,resolution:this.resolution}),c&&(p.push(b.xmin,b.xmax),v.push(b.ymin,b.ymax));d=this.normalize(d);e=this.normalize(e);p.sort(this.sorter);v.sort(this.sorter);c=p.length;for(q=c-1;0<=q;q--)q<c-1&&p[q]===p[q+1]&&p.splice(q,1);c=v.length;for(q=c-1;0<=q;q--)q<c-1&&v[q]===v[q+1]&&v.splice(q,1);if(p.length&&v.length){b=p[0];r=p[p.length-1];E=v[0];H=v[v.length-1];c=p.length;for(q=0;q<c;q++)D.push([[p[q],
H],[p[q],E]]);c=v.length;for(q=0;q<c;q++)D.push([[b,v[q]],[r,v[q]]]);p=new g({paths:D,spatialReference:this.origin.spatialReference.toJson()});l.push({latticeID:h+"_"+k+"_"+d+"_"+e,lattice:p,resolution:this.resolution})}return{minRow:h,maxRow:k,minCol:d,maxCol:e,topRow:h,bottomRow:k,leftCol:d,rightCol:e,cells:l}},_findCell:function(b,c,d){var e;f.some(b,function(b){b.row===c&&b.col===d&&(e=b);return!!e});return e},getExtentOfIntersectingCells:function(b){var d=this.getCellsInExtent(b),g=d&&d.cells;
if(g&&g.length){var h=d.topRow,k=d.leftCol,l=0;f.forEach(g,function(b){b.row===h&&l++});var r=this._findCell(g,h,k).extent,m=this.srInfo,p;!m||l!==this._frameStats[0]&&k!==d.rightCol?(p=r.xmin,m=p+l*r.getWidth()):(p=m.valid[0],m=m.valid[1]);d=this._findCell(g,d.bottomRow,k).extent.ymin;(b=(new q(p,d,m,r.ymax,b.spatialReference))._normalize(!1,!1))&&b.rings&&(b=new e(b),b=c.getDenormalizedExtent(b));return b}}});d.createFromFeatureLayer=function(b){var c=b.layer;b=c.getMap()||b.map;var e=c._srInfo;
(c=b&&b.loaded?new d(new h(e?e.valid[0]:b.extent.xmin,e?e.valid[1]:b.extent.ymax,b.spatialReference),{width:c._tileWidth,height:c._tileHeight},{width:b.width,height:b.height},e):null)&&c.setResolution(b.extent);return c};l("extend-esri")&&p.setObject("layers._GridLayout",d,k);return d})},"esri/layers/SelectionMode":function(){define("esri/layers/SelectionMode",["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./RenderMode"],function(m,p,f,l,k){m=m([k],{declaredClass:"esri.layers._SelectionMode",
constructor:function(f){this.featureLayer=f;this._featureMap={}},propertyChangeHandler:function(f){this._init&&0===f&&this._applyTimeFilter()},resume:function(){this.propertyChangeHandler(0)},hasAllFeatures:function(){return!this.featureLayer._hasPartialSelectedFeatures},hasUpdateError:function(){return this.featureLayer._hasSelectionError}});f("extend-esri")&&p.setObject("layers._SelectionMode",m,l);return m})},"esri/layers/StreamMode":function(){define("esri/layers/StreamMode","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred dojo/has ../kernel ../SpatialReference ../tasks/query ../tasks/QueryTask ../geometry/jsonUtils ./RenderMode".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b){m=m([b],{declaredClass:"esri.layers._StreamMode",constructor:function(b,c){this.featureLayer=b;this._featureMap={};this._setRefreshRate();this._drawBuffer={adds:[],updates:[]};this._timeoutId=null;this._flushDrawBuffer=p.hitch(this,this._flushDrawBuffer);this._featuresByTime={};this._lastEndTimeCheck=null;this._maxFeatureAge=0;b.purgeOptions&&b.purgeOptions.age&&"number"===typeof b.purgeOptions.age&&(this._maxFeatureAge=1E3*Math.ceil(60*b.purgeOptions.age));this._drawFeatures=
p.hitch(this,this._drawFeatures);this._queryErrorHandler=p.hitch(this,this._queryErrorHandler)},startup:function(){this._started||this.inherited(arguments)},propertyChangeHandler:function(b){this._init&&(0===b?this._applyTimeFilter():3===b&&this._redrawAllTracks())},destroy:function(){this.inherited(arguments);clearTimeout(this._timeoutId);this._featuresByTime=this._drawBuffer=this._featureMap=null},drawFeature:function(b){var c=this.featureLayer,d=c.objectIdField;this._timeoutId||(this._timeoutId=
setTimeout(this._flushDrawBuffer,this._refreshRate));c._joinField&&this._getFeature(b.attributes[d])?this._drawBuffer.updates.push({oid:b.attributes[d],updates:b}):this._drawBuffer.adds.push(b)},resume:function(){this.propertyChangeHandler(0)},refresh:function(){this._pendingRequest&&this._cancelPendingRequest(this._pendingRequest);var b=this.featureLayer;b&&(b._relatedUrl||b._keepLatestUrl?(b._fireUpdateStart(),b._refreshing=!0,b.disconnect(),b.clear(),b._relatedQueried=!1,b._keepLatestQueried=!1,
b.connect()):(b._fireUpdateStart(),b.clear(),b._fireUpdateEnd()))},_drawFeatures:function(b,c){var d=this.featureLayer;d._create(b.features||[]);d._fireUpdateEnd(null,c)},_applyTimeFilter:function(b){this.inherited(arguments);this._redrawAllTracks()},_removeFeatures:function(b){var c=this.featureLayer,d=c.objectIdField;b&&f.forEach(b,function(b){b=b.attributes[d];c._unSelectFeatureIIf(b,this);this._decRefCount(b);this._removeFeatureIIf(b)},this)},_addFeatures:function(b){var c=this.featureLayer,d=
c._endTimeField,e=c._startTimeField,g,h,k,l=[],q=[],m=[];g=c._trackManager;h=c.objectIdField;if(g)for(k in b=g.addFeatures(b),b)b.hasOwnProperty(k)&&(l.push(k),b[k].adds&&(q=q.concat(b[k].adds)),b[k].deletes&&(m=m.concat(b[k].deletes)));else q=b;f.forEach(q,function(b){var c=b.attributes[h],g;g=d&&b.attributes[d];!g&&this._maxFeatureAge&&(g=e&&b.attributes[e]?b.attributes[e]+this._maxFeatureAge:Date.now()+this._maxFeatureAge);g&&(g=1E3*Math.ceil(g/1E3),this._featuresByTime[g]?this._featuresByTime[g].push(c):
this._featuresByTime[g]=[c]);this._addFeatureIIf(c,b);this._incRefCount(c)},this);m.length&&this._removeFeatures(m);g&&g.refreshTracks(l)},_updateFeatures:function(b){var c=this.featureLayer,d,e,g=[];d=c._trackManager;e=c._trackIdField;f.forEach(b,function(b){var f=b.updates;b=this._getFeature(b.oid);var h;if(b){f.geometry&&b.setGeometry(f.geometry);f=f.attributes||{};for(h in f)f.hasOwnProperty(h)&&(b.attributes[h]=f[h]);b.setAttributes(b.attributes);b.visible=this._checkFeatureTimeIntersects(b);
d&&b.attributes[e]?g.push(b.attributes[e]):c._repaint(b,null,!0)}},this);g.length&&d.refreshTracks(g)},_redrawAllTracks:function(){var b=this.featureLayer._trackManager,c;b&&(c=b.trimTracks())&&0<c.length&&(this._removeFeatures(c),b.refreshTracks())},_flushDrawBuffer:function(){clearTimeout(this._timeoutId);var b=this._drawBuffer,c=b.adds.splice(0,b.adds.length),e=b.updates.splice(0,b.updates.length),b=this.featureLayer;if(!b)return!1;b.updating||b._fireUpdateStart();this._addFeatures(c);this._updateFeatures(e);
(c=this._getExpiredFeatures())&&c.length&&(this._removeFeatures(c),b._trackManager&&b._trackManager.removeFeatures(c));b._purge();b._fireUpdateEnd();this._timeoutId=null},_clearDrawBuffer:function(){var b=this._timeoutId,c=this._drawBuffer,e=c.adds,c=c.updates;b&&clearTimeout(b);e.splice(0,e.length);c.splice(0,c.length);this._timeoutId=null},_clearTimeBin:function(){this._featuresByTime={};this._lastEndTimeCheck=1E3*Math.ceil(Date.now()/1E3)},_clearFeatureMap:function(){this._featureMap={}},_setRefreshRate:function(b){b=
b||0===b?b:200;0>b&&(b=200);this._refreshRate=b},_checkFeatureTimeIntersects:function(b){var c=this.featureLayer,d=c.getMap();return(d=d?d.timeExtent:null)&&c.timeInfo&&(c.timeInfo.startTimeField||c.timeInfo.endTimeField)?0<c._filterByTime([b],d.startTime,d.endTime).match.length:!0},_fetchArchive:function(b){var d=new l,f=this.featureLayer,h,k,m,p,y;this._pendingRequest&&this._cancelPendingRequest(this._pendingRequest);f._fireUpdateStart();b&&this.map?(b=new e(b),h=new g,k=this.map,m=f.getFilter()||
{},p=m.where||"1\x3d1",y=m.geometry?c.fromJson(m.geometry):null,m=m.outFields?m.outFields.split(","):["*"],h.geometry=y,h.where=p,h.outFields=m,h.returnGeometry=!0,h.outSpatialReference=new q(k.spatialReference.toJson()),this._pendingRequest=b.execute(h).then(function(b){this._pendingRequest=null;var c=this._fixFieldNameCasing(f,b);b.features=c;this._drawFeatures(b);f._fireUpdateEnd();d.resolve()}.bind(this)).otherwise(function(b){this._pendingRequest=null;f._errorHandler(b);f._fireUpdateEnd(b);d.reject(b)}.bind(this))):
d.resolve();return d.promise},_queryErrorHandler:function(b){var c=this.featureLayer;c._errorHandler(b);c._fireUpdateEnd(b)},_fixFieldNameCasing:function(b,c){var d=c.features||[],e=c.fields;if(!e||!d.length)return d;b=this._mapFieldNameDifferences(b.fields,e);for(var e=[],g,f=0,h=c.features.length;f<h;f++)c=d[f],g=this._swizzleResponseAttributes(c.attributes,b),e.push({geometry:c.geometry,attributes:g});return e},_mapFieldNameDifferences:function(b,c){var d=[],e={},g,f;g=0;for(f=c.length;g<f;g++)d.push(c[g].name);
g=0;for(f=b.length;g<f;g++){c=b[g].name;var h=this._checkForStreamFieldName(c,d);h&&(e[h]=c)}return e},_checkForStreamFieldName:function(b,c){b=b.toLowerCase();for(var d,e=0,g=c.length;e<g;e++)if(c[e].toLowerCase()===b){d=c[e];break}return d},_swizzleResponseAttributes:function(b,c){var d={},e;for(e in b)if(b.hasOwnProperty(e)){var g=b[e];c.hasOwnProperty(e)?d[c[e]]=g:d[e]=g}return d},_getExpiredFeatures:function(){var b,c,e,g=[],h=[];if(!this.featureLayer._endTimeField&&!this._maxFeatureAge)return h;
b=1E3*Math.floor(this._lastEndTimeCheck/1E3);this._lastEndTimeCheck=c=1E3*Math.ceil(Date.now()/1E3);if(b&&b!==c)for(e=this._featuresByTime;b<=c;b+=1E3)e[b]&&(g=g.concat(e[b]),delete e[b]);f.forEach(g,function(b){(b=this._getFeature(b))&&h.push(b)},this);return h}});k("extend-esri")&&p.setObject("layers._StreamMode",m,h);return m})},"esri/layers/TrackManager":function(){define("esri/layers/TrackManager","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojo/dom-construct dojox/gfx ../kernel ../graphic ../geometry/Polyline ./GraphicsLayer".split(" "),
function(m,p,f,l,k,h,q,g,e,c){var b=-1!==h.renderer.toLowerCase().indexOf("canvas");m=m(null,{declaredClass:"esri.layers._TrackManager",constructor:function(b){this.layer=b;this.trackMap={};this.trackLineMap={}},initialize:function(b){this.map=b;b=this.layer;this.createTracklineContainer()&&(this._handles=[b.on("visibility-change",p.hitch(this,function(b){this.container.setVisibility(b.visible);this.container.evaluateSuspension()})),b.on("scale-range-change",p.hitch(this,function(){this.container.setScaleRange(this.layer.minScale,
this.layer.maxScale)}))])},createTracklineContainer:function(){var d=this.layer;if("esriGeometryPoint"!==d.geometryType)return null;var e=this.map,g=d._getRenderer(),g=g&&g.trackRenderer,f=this.container=new c._GraphicsLayer({id:d.id+"_tracks",_child:!0,visible:d.visible,minScale:d.minScale,maxScale:d.maxScale});f.loaded=!0;f.onLoad(f);f._setMap(e,d._div);b||(e=f._div.getNode(),d=d._div.getNode(),e&&d&&k.place(e,d,"first"));f.setRenderer(g);return f},addFeatures:function(b){var c=this.trackMap,d=
this.layer,e=d._trackIdField,g=[];f.forEach(b,function(b){var d=b.attributes[e];(c[d]=c[d]||[]).push(b);-1===f.indexOf(g,d)&&g.push(d)});var h=d._startTimeField,k=d.objectIdField,l=function(b,c){var d=b.attributes[h],e=c.attributes[h];return d===e?b.attributes[k]<c.attributes[k]?-1:1:d<e?-1:1};f.forEach(g,function(b){c[b].sort(l)})},trimTracks:function(b){function c(b){for(b=d[b]||[];b.length>e;)g.push(b.shift())}var d=this.trackMap,e=this.layer.maximumTrackPoints||0,g=[],h;if(!e)return g;if(b)f.forEach(b,
function(b){c(b)});else for(h in d)d.hasOwnProperty(h)&&c(h);return g},drawTracks:function(b){function c(b){var c=k[b],f,r,m;r=d.trackLineMap[b];h.remove(r);delete d.trackLineMap[b];r=null;if(!c||2>c.length)return!1;r=[];for(f=c.length-1;0<=f;f--)(m=c[f].geometry)&&r.push([m.x,m.y]);c={};c[q]=b;1<r.length&&(r=new g(new e({paths:[r],spatialReference:l}),null,c),h.add(r),d.trackLineMap[b]=r)}var d=this,h=this.container,k,l,q,m;if(h)if(k=this.trackMap,l=this.map.spatialReference,q=this.layer._trackIdField,
b)f.forEach(b,function(b){c(b)});else for(m in k)k.hasOwnProperty(m)&&c(m)},refreshTracks:function(b){function c(b){var c,f;d.drawTracks([b]);if(h&&h.latestObservationRenderer)for(b=e[b]||[],c=b.length,f=0;f<c;f++)g._repaint(b[f],null,!0)}var d=this,e=this.trackMap,g=this.layer,h=g._getRenderer(),k;if(b)f.forEach(b,function(b){c(b)});else for(k in e)e.hasOwnProperty(k)&&c(k);this.moveLatestToFront()},moveLatestToFront:function(b){f.forEach(this.getLatestObservations(b),function(b){var c=b._shape;
c&&c._moveToFront();this._repaint(b,null,!0)},this.layer)},getLatestObservations:function(b){function c(b){b=g[b];return b[b.length-1]}var d=[],e=this.layer._getRenderer(),g=this.trackMap,h;if(!e.latestObservationRenderer)return d;if(b)f.forEach(b,function(b){d.push(c(b))});else for(h in g)g.hasOwnProperty(h)&&d.push(c(h));return d},clearTracks:function(b){var c=this.getLatestObservations(b),d=this.container,e=this.trackMap,g,h;if(b)f.forEach(b,function(b){delete this.trackMap[b];d&&(h=this.trackLineMap[b],
d.remove(h),delete this.trackLineMap[b])},this);else{if(d)for(g in e)h=this.trackLineMap[g],d.remove(h);this.trackMap={};this.trackLineMap={}}f.forEach(c,function(b){this._repaint(b,null,!0)},this.layer)},isLatestObservation:function(b){var c=this.trackMap[b.attributes[this.layer._trackIdField]];return c?c[c.length-1]===b:!1},destroy:function(){f.forEach(this._handles,function(b){b.remove()});var b=this.container;b&&(b.clear(),b._unsetMap(this.map,this.layer._div));this.map=this.layer=this.trackMap=
this.container=null}});l("extend-esri")&&p.setObject("layers._TrackManager",m,q);return m})},"esri/layers/HeatmapManager":function(){define("esri/layers/HeatmapManager","dojo/_base/declare dojo/_base/lang dojo/aspect dojo/_base/array require ../kernel ../sniff ../geometry/Point ../geometry/webMercatorUtils ./MapImage ../renderers/HeatmapRenderer ../tasks/query dojo/_base/fx".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d,r){function v(){}function u(b){var c=b.layer;return{geometry:b.geometry,attributes:b.attributes,
getLayer:function(){return c}}}m=m(null,{declaredClass:"esri.layers.HeatmapManager",heatmapRenderer:null,sourceLayer:null,imageLayer:null,useTiles:!0,useWorker:!1,map:null,constructor:function(b){this.sourceLayer=b;this._hndls=[]},initialize:function(c){this.map=c;var d=this.sourceLayer,e=d.renderer;d.setDrawMode(!1);this.imageLayer=c._getMapImageLyr();var g=this;this.heatmapRenderer=e instanceof b?e:(e.getRendererInfoByZoom(c.getZoom())||e.getRendererInfoByScale(c.getScale())).renderer;this.redraw=
this.redraw.bind(this);this.recalculateHeatmap=this.recalculateHeatmap.bind(this);this._removeRenderer=this._removeRenderer.bind(this);this._handleRendererChange=this._handleRendererChange.bind(this);this._rendererChangeHandle=this.sourceLayer.on("renderer-change",this._handleRendererChange);this._handleOpacityChange=this._handleOpacityChange.bind(this);this._reprojectFeature=this._reprojectFeature.bind(this);k(["../workers/heatmapCalculator"],function(b){g._calculator=new b(p.mixin({width:g.map.width,
height:g.map.height},g._getOptions()));g._setupRenderer();g.heatmapRenderer.getStats=b.calculateStats;g.heatmapRenderer.getHistogramData=b.getHistogramData})},destroy:function(){this._removeHandlers();this._rendererChangeHandle&&this._rendererChangeHandle.remove();this._rendererChangeHandle=this.sourceLayer=this.imageLayer=this.map=this.heatmapRenderer=this._hndls=null},_handleRendererChange:function(c){var d=c.renderer,e=d instanceof b;this.heatmapRenderer?e?this.heatmapRenderer=d:this._removeRenderer(c):
e&&(this.heatmapRenderer=d,this.sourceLayer&&this.map&&this._setupRenderer())},_handleOpacityChange:function(b){b=b.opacity;var c=this._getImageBySourceId(this.sourceLayer.id);c&&c.setOpacity(b)},_setupRenderer:function(){var b=this._hndls,c=this.sourceLayer,d=this.map,e=this;c._originalDraw=c._draw;c._draw=v;c._div.clear();clearTimeout(this._resetTimer);this._resetTimer=setTimeout(this._resetGraphics.bind(this),250);b.push(c.on("update-end",this.redraw));b.push(c.on("suspend",function(b){(b=e._getImageBySourceId(e.sourceLayer.id))&&
b.hide()}));b.push(c.on("resume",function(b){(b=e._getImageBySourceId(e.sourceLayer.id))&&b.show()}));b.push(f.after(c,"redraw",this.redraw));b.push(d.on("layer-remove",function(b){b.layer==c&&((b=e._getImageBySourceId(e.sourceLayer.id))&&e.imageLayer.removeImage(b),e._removeRenderer({target:c}))}));c._collection&&b.push(c.on("graphic-add",function(b){e._reprojectFeature(b.graphic);e.redraw()}));1!==c.mode&&(b.push(d.on("resize, pan-end",this.redraw)),b.push(d.on("zoom-end",this.redraw)));b.push(c.on("opacity-change",
this._handleOpacityChange));this.imageLayer.suspended&&this.imageLayer.resume();c.graphics&&c.graphics.length&&(c.graphics[0].geometry&&!d.spatialReference.equals(c.graphics[0].geometry.spatialReference)&&l.forEach(c.graphics,function(b){this._reprojectFeature(b)}.bind(this)),this.redraw())},redraw:function(){if(!this._drawTimer){var c=this;this._drawTimer=setTimeout(function(){clearTimeout(c._drawTimer);c._drawTimer=null;c.sourceLayer._getRenderer().isInstanceOf(b)&&c.recalculateHeatmap()},16)}},
_removeRenderer:function(b){var c=b.target;c._draw=c._originalDraw;delete c._originalDraw;c.setDrawMode(!0);this._removeHandlers();this._hndls=[];var d=this._getImageBySourceId(this.sourceLayer.id);d&&this.imageLayer.removeImage(d);clearTimeout(this._drawTimer);clearTimeout(this._resetTimer);this._drawTimer=this._resetTimer=null;c.renderer!=b.renderer&&c.renderer.getRendererInfo?this.heatmapRenderer=null:(this.destroy(),c.renderer&&c.renderer.getRendererInfo&&c.redraw())},recalculateHeatmap:function(){this._calculator?
this._doMainCalculation():this._calculatorClient&&this._doWorkerCalculation()},_reprojectFeature:function(b){if(b&&b.geometry){var c=b.geometry,d=this.map.spatialReference;d.equals(c.spatialReference)||(c=e.project(c,d),null==c||(b.geometry=c))}},_doWorkerCalculation:function(){},_doMainCalculation:function(){var b=this.sourceLayer,e=this.map,g=this.heatmapRenderer,f=this.map.extent,h=this.map.width,k=this.map.height,l=this._calculator,q=this,r=function(d){d=q._getScreenPoints(d.features,e,b);d=l.calculateImageData(p.mixin({screenPoints:d,
mapinfo:{extent:[f.xmin,f.ymin,f.xmax,f.ymax],resolution:e.getResolution()},width:h,height:k},q._getOptions()));d=g.getSymbol(u({geometry:e.extent,attributes:{size:[h,k],imageData:d},layer:b}));d=new c({extent:e.extent,href:d.url,opacity:0,sourceId:b.id});q._swapMapImages(d,q._getImageBySourceId(b.id));b.suspended&&d.hide()},m={geometry:e.extent,timeExtent:b.useMapTime?e.timeExtent:void 0,spatialRelationship:d.SPATIAL_REL_INTERSECTS};null!=b._canDoClientSideQuery(m)?b.queryFeatures(m,r):r({features:b.graphics})},
_getScreenPoints:function(b,c,d){var e=[],f=b.length,h=0,k=0,q,r=new g(c.extent.xmin,c.extent.ymax,c.spatialReference),m=c.toScreen(r),u=m.x,m=m.y,t=c.getResolution(),p;for((k=c.extent.getCacheValue("_parts"))&&(p=l.map(k,function(b){return d._intersects(c,b.extent)[0]}));f--;)k=b[f],k.geometry&&k.visible&&(q={x:Math.ceil((k.geometry.x-r.x)/t+u),y:Math.floor((r.y-k.geometry.y)/t-m),attributes:k.attributes},p&&(k=1<p.length&&q.x<-p[0]?p[1]:p[0],q.x+=k),e[h++]=q);return e},_getImageBySourceId:function(b){var c=
this.imageLayer.getImages(),c=l.filter(c,function(c){return c.sourceId==b});if(c.length)return c[c.length-1]},_swapMapImages:function(b,c){function d(){e.removeImage(c)}var e=this.imageLayer,g=this.sourceLayer.opacity;e.addImage(b);r.anim(b._node,{opacity:g},null,null,function(){b.opacity=g});null!=c&&r.anim(c._node,{opacity:0},null,null,d)},_removeHandlers:function(){if(null!=this._hndls)for(var b=this._hndls.length;b--;)this._hndls[b].remove()},_getOptions:function(){var b=this.heatmapRenderer;
return{blurRadius:b.blurRadius,gradient:b.gradient,maxPixelIntensity:b.maxPixelIntensity,minPixelIntensity:b.minPixelIntensity,field:b.field,fieldOffset:b.fieldOffset}},_resetGraphics:function(){clearTimeout(this._resetTimer);this._resetTimer=null;for(var b=this.sourceLayer.graphics,c=b.length,d;c--;)d=b[c],d._shape=d._offsets=void 0}});q("extend-esri")&&p.setObject("layers.HeatmapManager",m,h);return m})},"esri/layers/MapImage":function(){define("esri/layers/MapImage","dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/has ../kernel ../domUtils ../geometry/Extent".split(" "),
function(m,p,f,l,k,h,q){m=m(null,{declaredClass:"esri.layers.MapImage",constructor:function(g){p.mixin(this,g);this.extent=new q(this.extent)},visible:!0,opacity:1,getLayer:function(){return this._layer},getNode:function(){return this._node},show:function(){if(!this.visible){this.visible=!0;var g=this._node,e=this._layer,c;if(g){if(c=e&&e._div)e.suspended||e._setPos(g,c._left,c._top),(e._active||c).appendChild(g);h.show(g)}}},hide:function(){if(this.visible){this.visible=!1;var g=this._node;g&&(h.hide(g),
g.parentNode&&g.parentNode.removeChild(g))}},setOpacity:function(g){var e=this._node;this.opacity=g;e&&f.set(e,"opacity",g)}});l("extend-esri")&&p.setObject("layers.MapImage",m,k);return m})},"esri/layers/clustering/ClusterManager":function(){define("esri/layers/clustering/ClusterManager","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../../kernel ../../Evented ../../graphic ../../lang ../../Color ../../graphicsUtils ../../dijit/PopupTemplate ../../dijit/Legend/utils ../../renderers/ClassBreaksRenderer ../../symbols/SimpleMarkerSymbol ../support/attributeUtils ../GraphicsLayer ../Field ./GeohashAggregation ./statUtils dojo/i18n!../../nls/jsapi".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x,w,y,z){var B=z.layers.clusters,A=z.widgets.popup,C=B.numFeatures,F=Math.pow(2,53)-1;m=m(h,{declaredClass:"esri.layers.clustering.ClusterManager",layer:null,aggregationInfo:null,container:null,defaults:{clusterRadius:80,markerSymbol:{color:[77,77,77,255],size:6,angle:0,xoffset:0,yoffset:0,type:"esriSMS",style:"esriSMSCircle",outline:{color:[255,255,255,255],width:.75,type:"esriSLS",style:"esriSLSSolid"}}},_initialized:!1,_map:null,_eventHandles:null,_clusterRadius:null,
_renderer:null,_statisticInfos:null,_fields:null,_infoTemplate:null,_clusterGenerator:null,_singleGraphics:null,constructor:function(b){this._eventHandles=[];this.layer=b.layer;this.setAggregationInfo(b.aggregationInfo)},initialize:function(b){this._initialized=!0;this._map=b;this._removeFromPopup(this.layer);this.container=this._createContainer();this._clusterGenerator=this._createClusterGenerator();this._initClusterGenerator();this._createLayerEventListeners();this._createMapEventListeners();this._createPopupEventListeners()},
destroy:function(b){this._clearSingleGraphics();this._removeClusterBoundary();this._destroyEventListeners();this._removeFromPopup(this.container);this._removeFromPopup(this.layer);this._resetClusterNav();this._destroyClusterGenerator(b);this._destroyContainer();this.layer=this.aggregationInfo=this._map=null},setAggregationInfo:function(b){this.aggregationInfo=b?p.mixin({},b):null;this._applyAggregationInfo()},getClusterRenderer:function(){return this._renderer},getClusterFields:function(){return this._fields||
[]},getFeaturesInCluster:function(b){b=b&&b.getAggregationInfo();return this._clusterGenerator?this._clusterGenerator.getFeaturesInCluster(b):[]},getAggregateGraphics:function(){return this.container?this.container.graphics.slice(0):[]},getSingleGraphics:function(){return this._singleGraphics?this._singleGraphics.slice(0):[]},redraw:function(){this.container&&this.container.redraw()},isClusteringEnabled:function(){return!(!this._clusterGenerator||!this._clusterGenerator.clustersEnabled)},isClusteringActive:function(){return!!(this._clusterGenerator&&
0<this._clusterGenerator.getNumFeatures())},toggleFeatureVisibility:function(b){this._clusterGenerator&&this._clusterGenerator.toggleFeatureVisibility(b)},_createContainer:function(){var b=this.layer,c=new t._GraphicsLayer({_child:!0,id:b.id+"_clusters",visible:b.visible,minScale:b.minScale,maxScale:b.maxScale,infoTemplate:this._infoTemplate});c.fields=this._fields;c.setRenderer(this._renderer);c.loaded=!0;c.onLoad(c);c._setMap(this._map,b._div);return b._childLayer=c},_destroyContainer:function(){var b=
this.container;b&&(b.clear(),b._unsetMap(this._map,this.layer._div),this.layer._childLayer=null);this.container=null},_createClusterGenerator:function(){return new w({map:this._map,layer:this.layer,clusterRadius:this._clusterRadius,statisticInfos:this._statisticInfos})},_initClusterGenerator:function(){var b=this._clusterGenerator;b.loaded?this._awaitClusterGenerator():this._eventHandles.push(b.on("load",p.hitch(this,function(){this._awaitClusterGenerator()})),b.on("load-error",p.hitch(this,function(b){})))},
_destroyClusterGenerator:function(b){this._clusterGenerator&&this._clusterGenerator.destroy(b);this._clusterGenerator=null},_awaitClusterGenerator:function(){var b=this._clusterGenerator;b.started?(this._applyRenderer(),this._initClusterUpdates()):this._eventHandles.push(b.on("start",p.hitch(this,function(){this._applyRenderer();this._initClusterUpdates()})))},_applyAggregationInfo:function(){this._applyClusterRadius();this._applyRenderer();this._clusterGenerator&&!this._clusterGenerator.isUpdateScheduled()&&
this.redraw()},_applyClusterRadius:function(){var b=this.aggregationInfo;this._clusterRadius=b&&b.clusterRadius||this.defaults.clusterRadius;this._clusterGenerator&&this._clusterGenerator.setClusterRadius(this._clusterRadius);this._computeClusterRadius()},_computeClusterRadius:function(){var b=this.aggregationInfo||{};b.clusterRadius=this._clusterRadius;this.aggregationInfo=b},_applyRenderer:function(){var b=this.container,c=this._getClusterRendererInfo(),d=this._compareStatInfos(this._statisticInfos,
c.statisticInfos);d&&(this._statisticInfos=c.statisticInfos,this._clusterGenerator&&(this._clusterGenerator.setStatisticInfos(f.map(this._statisticInfos,function(b){return{attributeInfo:b.attributeInfo,statisticType:b.statisticType}})),b&&f.forEach(b.graphics,function(b){this._applyClusterAttributes(b,b.getAggregationInfo())},this)));this._renderer=c.renderer;this._applyFields();this._applyInfoTemplate(!!d&&this._initialized);b&&(b.setRenderer(this._renderer),this.emit("renderer-change"))},_applyFields:function(){this._fields=
this._getFields(this._statisticInfos);this.container&&(this.container.fields=this._fields)},_applyInfoTemplate:function(b){var c=this.aggregationInfo,d=c&&c.disablePopup;this.layer.infoTemplate&&!d?(c=c&&c.infoTemplate||this._infoTemplate,b=b||!c?this._createInfoTemplate():this._updateInfoTemplate(c)):b=null;this._infoTemplate=b;this.container&&this.container.setInfoTemplate(this._infoTemplate);this._computeInfoTemplate()},_computeInfoTemplate:function(){var b=this.aggregationInfo||{};b.infoTemplate=
this._infoTemplate;this.aggregationInfo=b},_getClusterRendererInfo:function(){var b=this.layer&&this.layer.renderer;return b?this._createClusterRenderer(b):this._getDefaultClusterRenderer()},_getDefaultClusterRenderer:function(){var b=this._createContinuousCountRenderer();this._addSizeByCountVariable(b);return{renderer:b,statisticInfos:[]}},_createContinuousCountRenderer:function(b){var c=new r(null,"cluster_count");c.addBreak({minValue:-F,maxValue:F,symbol:b?new b.constructor(b.toJson()):new v(p.clone(this.defaults.markerSymbol))});
return c},_createClusterRenderer:function(b){if(!this._isSupportedRenderer(b))return this._getDefaultClusterRenderer();var c,d=[];if(this._isSimpleRenderer(b))c=this._createContinuousCountRenderer(b.symbol);else{c=new b.constructor(b.toJson());var e=this._getRendererAttributeInfo(b),g;this._isCBRenderer(c)?(g=y.getClusterField(e,"avg"),d.push(this._getStatInfo(e,"avg")),c.normalizationType=null,c.normalizationField=null,c.normalizationTotal=null):this._isUVRenderer(c)&&(g=y.getClusterField(e,"type"),
d.push(this._getStatInfo(e,"type")));c.attributeField=g;c.setValueExpression(null);c.valueExpressionTitle=null;c.setVisualVariables(null);this._setRendererTitle(c,b)}b=this._getSupportedVariables(b);e=this._createClusterVariables(b.allVars,d);c.setVisualVariables(e);b.sizeVars.length||this._isCBSizeRenderer(c)||this._addSizeByCountVariable(c);return{renderer:c,statisticInfos:d}},_isSupportedRenderer:function(b){if(this._isSimpleRenderer(b))return!0;if(this._isCBRenderer(b)){var c=b.normalizationType;
return"function"===typeof b.attributeField||c&&"field"!==c?!1:!0}return this._isUVRenderer(b)?"function"===typeof b.attributeField||b.attributeField2?!1:!0:!1},_isSimpleRenderer:function(b){return-1<b.declaredClass.toLowerCase().indexOf("simplerenderer")},_isCBRenderer:function(b){return-1<b.declaredClass.toLowerCase().indexOf("classbreaksrenderer")},_isUVRenderer:function(b){return-1<b.declaredClass.toLowerCase().indexOf("uniquevaluerenderer")},_isCBSizeRenderer:function(b){var c=b.infos;if(!this._isCBRenderer(b)||
!c||2>c.length)return!1;var d=Infinity,e=-Infinity;f.forEach(c,function(b){if(b=b.symbol){var c=0;switch(b.type){case "simplemarkersymbol":c=b.size;break;case "picturemarkersymbol":c=(b.width+b.height)/2}d=Math.min(d,c);e=Math.max(e,c)}});return Infinity!==d&&-Infinity!==e&&d!==e},_getRendererAttributeInfo:function(b){var c=b.attributeField,d=c?this.layer.getField(c):null;return{field:c,attributeType:d&&"esriFieldTypeDate"===d.type?"date":null,rotationType:null,valueExpression:b.valueExpression,valueExpressionTitle:b.valueExpressionTitle,
normalizationField:b.normalizationField}},_setRendererTitle:function(b,c){b.legendOptions=p.clone(c.legendOptions);b.legendOptions&&b.legendOptions.title||(b.legendOptions=b.legendOptions||{},b.legendOptions.title=d.getRendererTitle(c,this.layer))},_getSupportedVariables:function(b){var c=b.getVisualVariablesForType("colorInfo",!1)||[],d=b.getVisualVariablesForType("sizeInfo",!1)||[],e=b.getVisualVariablesForType("opacityInfo",!1)||[];b=b.getVisualVariablesForType("rotationInfo",!1)||[];c=f.filter(c,
this._variableFilter);d=f.filter(d,this._variableFilter);e=f.filter(e,this._variableFilter);b=f.filter(b,this._variableFilter);return{sizeVars:d,allVars:c.concat(d).concat(e).concat(b)}},_variableFilter:function(b){return"function"!==typeof b.field&&!u.viewScaleRE.test(b.valueExpression)},_createClusterVariables:function(b,c){return f.map(b,function(b){return this._createVarForAvg(b,c)},this)},_createVarForAvg:function(b,c){var d=p.clone(b),e=this._getVariableAttributeInfo(b);d.field=y.getClusterField(e,
"avg");d.normalizationField=null;d.valueExpression=null;d.valueExpressionTitle=null;e=this._getStatInfo(e,"avg");this._addStatInfo(c,e);this._setVariableTitle(d,b);return d},_getVariableAttributeInfo:function(b){var c="rotationInfo"===b.type,d=c?"angle":null,c=c?b.rotationType:null,e=b.legendOptions&&b.legendOptions.title,g=b.field,f=g?this.layer.getField(g):null;f&&"esriFieldTypeDate"===f.type&&(d="date");return{field:g,attributeType:d,rotationType:c,valueExpression:b.valueExpression,valueExpressionTitle:b.valueExpressionTitle||
b.valueExpression&&e,normalizationField:b.normalizationField}},_setVariableTitle:function(b,c){b.legendOptions&&b.legendOptions.title||(b.legendOptions=b.legendOptions||{},b.legendOptions.title=d.getVisualVariableTitle(c,this.layer))},_getStatInfo:function(b,c){return{statisticHash:y.getStatisticHash(b,c),attributeInfo:b,statisticType:c}},_addStatInfo:function(b,c){var d=this._findStatInfo(b,c);d?d.attributeInfo.valueExpressionTitle||(d.attributeInfo.valueExpressionTitle=c.attributeInfo.valueExpressionTitle):
b.push(c)},_findStatInfo:function(b,c){var d;f.some(b,function(b){b.statisticHash===c.statisticHash&&(d=b);return!!d});return d},_compareStatInfos:function(b,c){var d=f.filter(b,function(b){return!this._findStatInfo(c,b)},this),e=f.filter(c,function(c){return!this._findStatInfo(b,c)},this);return e.length||d.length?{added:e,removed:d}:null},_addSizeByCountVariable:function(b){var c=this._createSizeByCountVariable();c&&this._addVariable(b,c)},_getSizeByCountVariable:function(b){b=b.getVisualVariablesForType("sizeInfo",
!1)||[];return f.filter(b,function(b){return"cluster_count"===b.field})[0]},_updateSizeByCountVariable:function(){var b=this._renderer,c=this._getSizeByCountVariable(b);if(c){var d=this._createSizeByCountVariable();d&&this._replaceVariable(b,c,d)}},_createSizeByCountVariable:function(){var b=this._clusterGenerator,c;if(b){var d=b.getCurrentLodStats();if(d){c=b.getNumFeatures();var b=b.clusters,e=d.min,g=d.max;1===d.count&&e===c||1===b.length&&b[0].count===c?(e=1,g=c):e&&e===g&&(g=2*e);c={type:"sizeInfo",
field:"cluster_count",valueUnit:"unknown",minSize:12,maxSize:50,minDataValue:e,maxDataValue:g,legendOptions:{title:C}}}}return c},_addVariable:function(b,c){var d=b.visualVariables||[];d.push(c);b.setVisualVariables(d)},_replaceVariable:function(b,c,d){var e=b.visualVariables;c=f.indexOf(e,c);-1<c&&e.splice(c,1);e.push(d);b.setVisualVariables(e)},_getFields:function(b){var c=[new x({name:"cluster_count",type:"esriFieldTypeInteger"})];f.forEach(b,function(b){var d=b.statisticType;b=b.attributeInfo;
var e;"avg"===d?e="date"===b.attributeType?"esriFieldTypeDate":"esriFieldTypeDouble":"type"===d&&(e=b.field?this.layer.getField(b.field).type:"esriFieldTypeString");c.push(new x({name:y.getClusterField(b,d),type:e}))},this);return c},_createInfoTemplate:function(){var c=this._statisticInfos,d=this._renderer,e=[{fieldName:"cluster_count",label:C,visible:!0,format:{digitSeparator:!0,places:0}}],h=[],k=[g.substitute({count:"{cluster_count}"},B.countSummary)],l=this._isUVRenderer(d)?d.infos:[];f.forEach(c,
function(b){var c,d,g=b.statisticType,f=b.attributeInfo,q=y.getClusterField(f,g),r=this._getFieldLabel(b);"avg"===g?(c={fieldName:q,label:r,visible:!0,format:"date"===f.attributeType?{dateFormat:"shortDateShortTime"}:{digitSeparator:!0,places:1}},d=this._getFieldSummary(b,q)):"type"===g&&(d="expression/"+q,c={fieldName:d,visible:!0},h.push({name:q,title:r,returnType:"string",expression:this._getExpression(l,q)}),d=this._getFieldSummary(b,d));c&&e.push(c);d&&k.push(d)},this);return new b({fieldInfos:e,
expressionInfos:h,description:k.join("\x3cbr/\x3e\x3cbr/\x3e")})},_updateInfoTemplate:function(c){var d=c.toJson(),e=this._isUVRenderer(this._renderer)?this._renderer.infos:[];f.forEach(this._statisticInfos,function(b){var c=b.statisticType;b=y.getClusterField(b.attributeInfo,c);"type"===c&&(c=this._findExpressionInfo(b,d))&&(c.expression=this._getExpression(e,b))},this);return new b(d)},_findExpressionInfo:function(b,c){var d;f.some(c.expressionInfos,function(c){c.name===b&&(d=c);return!!d});return d},
_escapeDoubleQuotes:function(b){return b?b.replace(/"/g,'\\"'):""},_getExpression:function(b,c){return["var uvInfos \x3d ["+this._getObjects(b).join(", ")+"];",'var predominantType \x3d Text($feature["'+c+'"]);','var label \x3d "'+this._escapeDoubleQuotes(B.predominantNoneValue)+'";',"for (var i \x3d 0; i \x3c Count(uvInfos); i++) {\nif (uvInfos[i].value \x3d\x3d predominantType) {\nlabel \x3d uvInfos[i].label;\nbreak;\n}\n}\nreturn label;"].join("\n")},_getObjects:function(b){return f.map(b,function(b){return'{"value": "'+
String(b.value)+'","label": "'+this._escapeDoubleQuotes(String(b.label))+'"}'},this)},_getFieldLabel:function(b){var c=b.statisticType,d=b.attributeInfo,e=d.field;b=d.normalizationField;var f="",h;"avg"===c?h=b?B.avgNormFieldLabel:B.avgFieldLabel:"type"===c&&(h=B.predominantFieldLabel);h&&(c=d.valueExpression?d.valueExpressionTitle:this.layer.getFieldLabel(e),b=b&&this.layer.getFieldLabel(b),f=g.substitute({fieldLabel:c||"",normFieldLabel:b||""},h));return f},_getFieldSummary:function(b,c){var d=
b.statisticType,e=b.attributeInfo,f=e.field;b=e.normalizationField;var h="",k;"avg"===d?k=b?B.avgNormFieldSummary:B.avgFieldSummary:"type"===d&&(k=B.predominantFieldSummary);k&&(d=e.valueExpression?e.valueExpressionTitle:this.layer.getFieldLabel(f),b=b&&this.layer.getFieldLabel(b),h=g.substitute({fieldLabel:d||"",normFieldLabel:b||"",fieldValue:"{"+c+"}"},k));return h},_removeFromPopup:function(b){var c=this._map.infoWindow,d=c.features;if(d&&d.length){var e=f.filter(d,function(c){return c.getLayer()!==
b});e.length<d.length&&(e.length?c.setFeatures(e):(c.clearFeatures(),c.hide()))}},_resetClusterNav:function(){this._resetClusterNavPartial();this._popupClusterGraphic=null},_resetClusterNavPartial:function(){this._map.infoWindow.removeActions(this._popupActions);this._hideSingleGraphic(this._popupSingleGraphic);this._popupSingleGraphic=null},_addClusterBoundary:function(b,c){(c=c.clusterFillSymbol)&&(c=new c.constructor(c.toJson()));b=new q(b,c);this._map.graphics.add(b);this._clusterBoundary=b},
_removeClusterBoundary:function(){this._map.graphics.remove(this._clusterBoundary);this._clusterBoundary=null},_createBrowseFeaturesAction:function(){return this._map.infoWindow.addActions([{title:A.NLS_browseFeatures,className:"browseFeatures",callback:p.hitch(this,function(b){b.preventDefault();b=this._map.infoWindow;var d=b.getSelectedFeature(),e=d.getChildGraphics(),g=b.getCurrentAnchor();b.setFeatures(e,{anchor:g});if(e=c.graphicsExtent(e))this._addClusterBoundary(e,b),b.show(this._getPopupLocation(e,
g));this._popupClusterGraphic=d})}])[0]},_getPopupLocation:function(b,c){var d=b.getCenter();c=c.toLowerCase();-1<c.indexOf("top")?d.update(d.x,b.ymax):-1<c.indexOf("bottom")?d.update(d.x,b.ymin):-1<c.indexOf("left")?d.update(b.xmin,d.y):d.update(b.xmax,d.y);return d},_createViewSummaryAction:function(){return this._map.infoWindow.addActions([{title:A.NLS_viewSummary,className:"viewSummary",callback:p.hitch(this,function(b){b.preventDefault();b=this._popupClusterGraphic;var c=this._map.infoWindow;
c.setFeatures([b]);c.show(b.geometry);this._popupClusterGraphic=null})}])[0]},_initClusterUpdates:function(){this._updateSizeVariable();this._updateClusterGraphics();this._eventHandles.push(this._clusterGenerator.on("update-end",p.hitch(this,function(b){(b.mapLevelChange||b.indexChange)&&this._updateSizeVariable();this._updateClusterGraphics()})),this._clusterGenerator.on("index-complete",p.hitch(this,function(){this._updateSizeVariable()})))},_updateClusterGraphics:function(){this._hideSingleGraphics();
var b=[],c=[];f.forEach(this._clusterGenerator.clusters,function(d){var e=new q(d.centroid);e.setAggregationSourceLayer(this.layer);e.setAggregationInfo(d);this._applyClusterAttributes(e,d);1===d.count?(d=this._getSingleGraphic(e),c.push(d)):b.push(e)},this);this._showSingleGraphics(c);this._addGraphics(b)},_addGraphics:function(b){var c=this.container;c.clear();f.forEach(b,function(b){c.add(b)})},_getSingleGraphic:function(b){var c=this._clusterGenerator.getCell(b.getAggregationInfo().primary).features[0],
d=this.layer.renderer,d=d&&d.getSymbol(c),e=this._getSizeByCountVariable(this._renderer);d&&e&&(b=e?this._renderer.getSize(b,{sizeInfo:e,shape:d.style,resolution:this._map.getResolutionInMeters(),scale:this._map.getScale()}):null,c.setSize(b));return c},_showSingleGraphics:function(b){f.forEach(b,this._showSingleGraphic);this._singleGraphics=b},_hideSingleGraphics:function(){f.forEach(this._singleGraphics,function(b){b.setSize(null);this._hideSingleGraphic(b)},this);this._singleGraphics=null},_clearSingleGraphics:function(){f.forEach(this._singleGraphics,
function(b){b.setSize(null)});this._singleGraphics=null},_showSingleGraphic:function(b){b&&b._resume()},_hideSingleGraphic:function(b){b&&b._suspend()},_updateSizeVariable:function(){this.isClusteringEnabled()&&(this._updateSizeByCountVariable(),this.emit("renderer-change"))},_applyClusterAttributes:function(b,c){b.setAttributes(c.attributes)},_createLayerEventListeners:function(){var b=this.layer;this._eventHandles.push(b.on("visibility-change",p.hitch(this,function(b){this.container.setVisibility(b.visible)})),
b.on("scale-range-change",p.hitch(this,function(){this.container.setScaleRange(this.layer.minScale,this.layer.maxScale)})),b.on("renderer-change",p.hitch(this,function(){this._applyRenderer()})),b.on("info-template-change",p.hitch(this,function(){this._applyInfoTemplate()})))},_createMapEventListeners:function(){this._eventHandles.push(this._map.on("zoom-start",p.hitch(this,function(){this._removeClusterBoundary();this._removeFromPopup(this.container);this._removeFromPopup(this.layer);this._resetClusterNav();
this.container.clear();this._hideSingleGraphics()})))},_createPopupEventListeners:function(){var b=this._map.infoWindow;this._eventHandles.push(b.on("selection-change",p.hitch(this,function(){this._resetClusterNavPartial();var b=this._map.infoWindow.getSelectedFeature(),c=b&&b.getLayer();if(c){var d;c===this.container?(this._removeClusterBoundary(),d=this._createBrowseFeaturesAction()):c===this.layer&&b._isSuspended()?(d=this._createViewSummaryAction(),this._popupSingleGraphic=b,this._showSingleGraphic(this._popupSingleGraphic)):
this._removeClusterBoundary();this._popupActions=d?[d]:null}})),b.on("clear-features",p.hitch(this,function(b){this._resetClusterNav();b.isIntermediate||this._removeClusterBoundary()})),b.on("hide",p.hitch(this,function(){this._popupSingleGraphic&&this._popupSingleGraphic._suspend();this._clusterBoundary&&this._clusterBoundary.hide()})),b.on("show",p.hitch(this,function(){this._popupSingleGraphic&&this._popupSingleGraphic._resume();this._clusterBoundary&&this._clusterBoundary.show()})))},_destroyEventListeners:function(){f.forEach(this._eventHandles,
function(b){b.remove()})}});l("extend-esri")&&p.setObject("layers.clustering.ClusterManager",m,k);return m})},"esri/dijit/Legend/utils":function(){define("esri/dijit/Legend/utils",["dojo/_base/lang","../../lang","dojo/i18n!../../nls/jsapi"],function(m,p,f){var l=f.widgets.legend;return{getVisualVariableTitle:function(f,h){var k,g=f.field,e=f.normalizationField,c=!1,b=!1,d=!1,g=m.isFunction(g)?null:g,e=m.isFunction(e)?null:e;if(f.legendOptions&&f.legendOptions.title)k=f.legendOptions.title;else if(f.valueExpressionTitle)k=
f.valueExpressionTitle;else{if(h.renderer&&h.renderer.authoringInfo&&h.renderer.authoringInfo.visualVariables){var r=h.renderer.authoringInfo.visualVariables;for(f=0;f<r.length;f++){var v=r[f];if("colorInfo"===v.type&&"ratio"===v.style){c=!0;break}else if("colorInfo"===v.type&&"percent"===v.style){b=!0;break}else if("colorInfo"===v.type&&"percentTotal"===v.style){d=!0;break}}}(c=d&&"showRatioPercentTotal"||b&&"showRatioPercent"||c&&"showRatio"||e&&"showNormField"||g&&"showField"||null)&&(k=p.substitute({field:g&&
h.getFieldLabel(g),normField:e&&h.getFieldLabel(e)},"showField"===c?"${field}":l[c]))}return k},getRendererTitle:function(f,h){var k;if(f){var g,e,c;"esri.renderer.ClassBreaksRenderer"===f.declaredClass&&(g=f.attributeField,e=f.normalizationField,c="percent-of-total"===f.normalizationType);g=m.isFunction(g)?null:g;e=m.isFunction(e)?null:e;f.legendOptions&&f.legendOptions.title?k=f.legendOptions.title:f.valueExpressionTitle?k=f.valueExpressionTitle:(f=e&&"showNormField"||(c?"showNormPct":null)||g&&
"showField"||null)&&(k=p.substitute({field:g&&h.getFieldLabel(g),normField:e&&h.getFieldLabel(e)},"showField"===f?"${field}":l[f]))}return k}}})},"esri/layers/clustering/GeohashAggregation":function(){define("esri/layers/clustering/GeohashAggregation","dojo/has dojo/_base/declare dojo/_base/lang dojo/_base/array ../../kernel ../../Evented ../../geometry/Point ../../geometry/Extent ../../geometry/mathUtils ../../support/expressionUtils ../../core/timerUtils ../support/attributeUtils ./geohashUtils ./statUtils".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v){p=p(h,{loaded:!1,started:!1,map:null,layer:null,lod:null,tolerance:null,clusterMode:null,clusterRadius:null,sortEnabled:!0,filterEnabled:!0,bufferEnabled:!0,updateEnabled:!0,clusters:null,clustersEnabled:!0,statisticInfos:null,defaults:{lod:1,tolerance:0,clusterMode:"auto",clusterRadius:80,sortEnabled:!0,filterEnabled:!0,bufferEnabled:!0,updateEnabled:!0},_eventHandles:null,_updateHandle:null,_indexHandle:null,_cellIndex:null,_globalIndex:null,_perfProfile:null,
_indexUpdated:!1,_cellSizeScaleFactor:1.5,_extentScaleFactor:1.25,_maxGeohashLength:12,_minClusterRadius:15,_levelChange:!0,_clusterFieldPrefix:"cluster_",_mapLevelChange:!1,constructor:function(b){this._update=f.hitch(this,this._update);this._indexFeatures=f.hitch(this,this._indexFeatures);this._eventHandles=[];this._globalIndex={numFeatures:null,fullExtent:null,lodStats:null};this._perfProfile={lastIndex:{total:null,numFeatures:0},lastUpdate:{cells:null,clusters:null,total:null}};this.clusters=
[];this.map=b.map;this.layer=b.layer;this.setLod(b.lod);this.setTolerance(b.tolerance);this.setClusterMode(b.clusterMode);this.setClusterRadius(b.clusterRadius);this.setSortEnabled(b.sortEnabled);this.setFilterEnabled(b.filterEnabled);this.setBufferEnabled(b.bufferEnabled);this.setUpdateEnabled(b.updateEnabled);this.setStatisticInfos(b.statisticInfos);this._load();this.loaded?this._startup():this._eventHandles.push(this.on("load",f.hitch(this,this._startup)))},destroy:function(c){this._displayFeatures(!0,
c);l.forEach(this._eventHandles,function(b){b.remove()});b.clearTimeout(this._updateHandle);b.clearTimeout(this._indexHandle);this._cellIndex=this._globalIndex=this._eventHandles=this._updateHandle=this._indexHandle=this.map=this.layer=this.clusters=null},setLod:function(b){var c=this.lod;this.lod=b||this.defaults.lod;c!==this.lod&&this.update()},setTolerance:function(b){var c=this.tolerance;this.tolerance=b||this.defaults.tolerance;c!==this.tolerance&&this.update()},setClusterMode:function(b){var c=
this.clusterMode;this.clusterMode=b||this.defaults.clusterMode;this._evalClusterParams();c!==this.clusterMode&&this.update()},setClusterRadius:function(b){var c=this.clusterRadius;this.clusterRadius=null!=b?b:this.defaults.clusterRadius;this._evalClusterParams();c!==this.clusterRadius&&this.update()},setSortEnabled:function(b){var c=this.sortEnabled;this.sortEnabled=null!=b?!!b:this.defaults.sortEnabled;c!==this.sortEnabled&&this.update()},setFilterEnabled:function(b){var c=this.filterEnabled;this.filterEnabled=
null!=b?!!b:this.defaults.filterEnabled;c!==this.filterEnabled&&this.update()},setBufferEnabled:function(b){var c=this.bufferEnabled;this.bufferEnabled=null!=b?!!b:this.defaults.bufferEnabled;c!==this.bufferEnabled&&this.update()},setUpdateEnabled:function(b){var c=this.updateEnabled;(this.updateEnabled=null!=b?!!b:this.defaults.updateEnabled)&&c!==this.updateEnabled&&(this._mapLevelChange=!0,this.update())},setStatisticInfos:function(b){this.statisticInfos=b||[];this.loaded&&this._applyStatInfos(this.statisticInfos)},
update:function(){this.loaded&&null==this._updateHandle&&(this._updateHandle=b.setTimeout(this._update,b.priority.HIGH))},isUpdateScheduled:function(){return null!=this._updateHandle},index:function(){this.loaded&&null==this._indexHandle&&(this._indexHandle=b.setTimeout(this._indexFeatures,b.priority.HIGH))},getCell:function(b){return this._cellIndex[b.length][b]},getCluster:function(b){var c;l.some(this.clusters,function(d){-1<l.indexOf(d.geohashes,b)&&(c=d);return!!c});return c},getCellsInCluster:function(b){var c=
[];l.forEach(b&&b.geohashes,function(b){(b=this.getCell(b))&&c.push(b)},this);return c},getFeaturesInCluster:function(b){var c=[];b=this.getCellsInCluster(b);l.forEach(b,function(b){Array.prototype.push.apply(c,b.features)});return c},toggleFeatureVisibility:function(b){this.index()},getCurrentLodStats:function(){var b=this._globalIndex.lodStats;return b&&b[this.lod]},getNumFeatures:function(){return this._globalIndex.numFeatures},getFullExtent:function(){var b=this._globalIndex.fullExtent;return b&&
Infinity!==b.xmin?new g(b):null},_load:function(){this._displayFeatures(!1);this._checkLoadStatus();this.map.loaded||this._eventHandles.push(this.map.on("load",f.hitch(this,this._checkLoadStatus)));this.layer.loaded||this._eventHandles.push(this.layer.on("load",f.hitch(this,this._checkLoadStatus)))},_checkLoadStatus:function(){if(this.map.loaded&&this.layer.loaded){var b;if("esriGeometryPoint"!==this.layer.geometryType)b=Error("GeohashAggregation is supported only for points");else{var c=this.map.spatialReference;
c.isWebMercator()||4326===c.wkid||(b=Error("GeohashAggregation is supported only when map spatial reference is WGS84 or WebMercator"))}b?(this.loadError=b,this.emit("load-error",{error:b})):(this.loaded=!0,this.emit("load"))}},_startup:function(){this._evalUpdateStatus();this.index();this._processExtentChange();this._eventHandles.push(this.layer.on("update-end",f.hitch(this,this.index)),this.layer.on("edits-complete",f.hitch(this,this.index)),this.layer.on("graphics-clear",f.hitch(this,this.index)),
this.layer.on("suspend",f.hitch(this,this._evalUpdateStatus)),this.layer.on("resume",f.hitch(this,this._evalUpdateStatus)),this.map.on("extent-change",f.hitch(this,this._processExtentChange)))},_evalUpdateStatus:function(){this.setUpdateEnabled(!this.layer.suspended)},_processExtentChange:function(b){this._mapLevelChange=!(!b||!b.levelChange);this._evalClusterParams();this.update()},_update:function(){this._updateHandle=null;if(this.updateEnabled){this.emit("update-start");if(this.clustersEnabled){var b=
this.map.geographicExtent;if(b){var c=this._getIntersectingCells(b),b=this._getClusters(c.cells,b);this.clusters=b.clusters;this._applyStatInfosToClusters();var c=c.profile,b=b.profile,d=c.total+b.total;c.total=this._getElapsedTime(c.total);b.total=this._getElapsedTime(b.total);var e=this._perfProfile.lastUpdate={};e.cells=c;e.clusters=b;e.total=this._getElapsedTime(d)}}else this.clusters=[],this._perfProfile.lastUpdate=null;c=this._indexUpdated;this._indexUpdated=!1;b=this._mapLevelChange;this._mapLevelChange=
!1;this.emit("update-end",{levelChange:this._levelChange,mapLevelChange:b,indexChange:c})}},_displayFeatures:function(b,c){var d=this.layer;b=!b;d.suspendGraphics(b);!1!==c&&(b?d.clearNodes():d.redraw())},_indexFeatures:function(){this._indexHandle=null;var b=this._getTime();this._initializeIndexing();var c=0,d=this._globalIndex.fullExtent;l.forEach(this.layer.graphics,function(b){if(b.visible){var e=b.geometry,g=this._getLngLat(e),f;g&&(f=e.getCacheValue("_geohash"),void 0===f&&(f=r.pointToGeohash(g),
e.setCacheValue("_geohash",f||null)));f&&(this._addGeohashToIndex(f,b,g),c++,this._updateExtent(d,g))}},this);this._applyStatInfosToIndex();this._globalIndex.numFeatures=c;for(var e=this._globalIndex.lodStats,g=1;g<=this._maxGeohashLength;g++)e[g]=this._getLODStats(g,c);this._perfProfile.lastIndex.total=this._getElapsedTime(b,this._getTime());this._perfProfile.lastIndex.numFeatures=c;this._indexUpdated=!0;this.emit("index-complete");this.started||(this.started=!0,this.emit("start"));this.update()},
_initializeIndexing:function(){this._globalIndex={numFeatures:0,fullExtent:{xmin:Infinity,ymin:Infinity,xmax:-Infinity,ymax:-Infinity},lodStats:{}};for(var b=this._cellIndex=[],c=1;c<=this._maxGeohashLength;c++)b[c]={}},_getLngLat:function(b){if(b){var c=b.getLongitude();b=b.getLatitude();b=null!=c&&null!=b?{x:c,y:b}:null}return b},_addGeohashToIndex:function(b,c,d){for(var e=this._cellIndex,g="",f=0;f<this._maxGeohashLength;f++){var g=g+b[f],h=e[g.length],k=h[g];k||(k=h[g]={count:0,centroid:{x:null,
y:null},extent:{xmin:Infinity,ymin:Infinity,xmax:-Infinity,ymax:-Infinity},features:[],geohash:g,statistics:null});this._updateItem(k,1,d,!0);k.features.push(c)}},_getLODStats:function(b,c){var d=this._cellIndex[b],e=0,g=Infinity,f=-Infinity,h=null,k;for(k in d){var l=d[k];e++;l.count<g&&(g=l.count);l.count>f&&(f=l.count)}0<e&&(h=Number((c/e).toFixed(2)));return{lod:b,count:e,min:Infinity===g?null:g,max:-Infinity===f?null:f,avg:h}},_evalClusterParams:function(){if(this.loaded&&"auto"===this.clusterMode){var b=
this._getClusterParams(this.map.getResolutionInMeters(),this.clusterRadius,this._minClusterRadius);this._levelChange=this.lod!==b.lod;this.lod=b.lod;this.tolerance=b.tolerance}},_getClusterParams:function(b,c,d){c<d&&(c=d);b=Math.ceil(b*c);c=this._getClosestLODRange(b).max;do d=this._getCellSize(c),(d=b>=this._cellSizeScaleFactor*d||1===d)||(c+=1);while(!d);d=b/this._getCellSize(c);return{lod:c,tolerance:b,multiplier:Number(d.toFixed(2))}},_getClosestLODRange:function(b){for(var c,d=this._maxGeohashLength;1<=
d;d--)if(this._getCellSize(d)>=b){c=d;break}null==c&&(c=1);b=c+1;b>this._maxGeohashLength&&(b=this._maxGeohashLength);return{min:c,max:b}},_getCellSize:function(b){b=r.getCellSizeInMeters(b);return Math.ceil(Math.min(b.width,b.height))},_sorter:function(b,c){var d=b.centroid,e=c.centroid;return b.count>c.count?-1:b.count<c.count?1:d.x>e.x?-1:d.x<e.x?1:0},_getIntersectingCells:function(b){var c=this._getTime();this.bufferEnabled&&(b=b.expand(this._extentScaleFactor));var d=r.getIntersecting(b,this.lod,
this.bufferEnabled?this.tolerance:0);b=this._getTime();var e=[],g=this.tolerance,f=this.sortEnabled;l.forEach(d,function(b){(b=this.getCell(b))&&e.push(b)},this);g&&f&&e.sort(this._sorter);d=this._getTime();return{cells:e,profile:{findCells:this._getElapsedTime(c,b),scanAndSortCells:this._getElapsedTime(b,d),total:d-c}}},_getClusters:function(b,c){var d=this._getTime(),e=[],g={},f={findCells:0};l.forEach(b,function(b,c){(b=this._createCluster(b,g,f))&&e.push(b)},this);this._markIntersecting(e,c);
this.filterEnabled&&(e=this._getIntersectingClusters(e));b=this._getTime();return{clusters:e,profile:{findCellsInCluster:this._getElapsedTime(f.findCells),total:b-d}}},_markIntersecting:function(b,c){var d=c.normalize();l.forEach(b,function(b){var c=b.centroid.x,e=b.centroid.y;b.isIntersecting=l.some(d,function(b){return c>=b.xmin&&c<=b.xmax&&e>=b.ymin&&e<=b.ymax})})},_getIntersectingClusters:function(b){return l.filter(b,function(b){return b.isIntersecting})},_createCluster:function(b,c,d){if(!c[b.geohash]){var e=
[{cell:b,distance:0}];if(this.tolerance){var g=this._getTime(),f=r.getNeighborsWithinDistance(b.centroid,this.lod,this.tolerance);d.findCells+=this._getTime()-g;l.forEach(f,function(c){if(c!==b.geohash&&(c=this.getCell(c))){var d=this._calculateDistance(b.centroid,c.centroid);d<=this.tolerance&&e.push({cell:c,distance:d})}},this)}return this._mergeCells(e,c)}},_calculateDistance:function(b,c){return e.getLength(r.geographicToWebMercator(b),r.geographicToWebMercator(c))},_mergeCells:function(b,c){var d=
this._initializeCluster({},b[0].cell.geohash);l.forEach(b,function(b){var e=b.cell,g=e.geohash;b=b.distance;var f=c[g];if(f)if(b<f.distance)this._removeCellFromCluster(g,c);else return;c[g]={cluster:d,distance:b};this._updateItem(d,e.count,e.centroid);d.geohashes.push(g)},this);return d},_removeCellFromCluster:function(b,c){var d=c[b].cluster;delete c[b];b=l.indexOf(d.geohashes,b);-1<b&&d.geohashes.splice(b,1);this._reevaluateCluster(d)},_reevaluateCluster:function(b){var c=b.geohashes;b=this._initializeCluster(b,
b.primary);l.forEach(c,function(c){var d=this.getCell(c);d&&(this._updateItem(b,d.count,d.centroid),b.geohashes.push(c))},this)},_initializeCluster:function(b,c){b.count=0;b.centroid=new q(null,null);b.geohashes=[];b.primary=c;b.statistics=null;return b},_applyStatInfos:function(b){b=this._getValidStatInfos(b);this._applyStatInfosToIndex(b);this._applyStatInfosToClusters(b)},_getValidStatInfos:function(b){var c=[];l.forEach(b,function(b){var e=b.attributeInfo;b=b.statisticType;var g="angle"===e.attributeType;
if(v.isSupportedStatisticType(b)&&(!g||"avg"===b)){var f="arithmetic"===e.rotationType;c.push({attributeCache:d.createAttributeCache(e,"type"===b),identifier:v.getStatisticId(e,b),statFunctions:v.getStatisticFunctions(b),isAngular:g,isDate:"date"===e.attributeType,isArithmetic:f})}});return c},_applyStatInfosToIndex:function(b){b=b||this._getValidStatInfos(this.statisticInfos);var c=this._cellIndex;if(c)for(var d=1;d<=this._maxGeohashLength;d++){var e=c[d],g;for(g in e)this._applyStatInfosToCell(e[g],
b)}},_applyStatInfosToCell:function(b,c){var d=this._initializeStats(b,c);l.forEach(b.features,function(b){this._calcFeatureStats(b,c,d)},this);this._summarizeStats(b,d,c)},_calcFeatureStats:function(b,d,e){b.attributes&&l.forEach(d,function(d){var g=e[d.identifier],f=d.attributeCache,f=f?b._getDataValue(f.attributeInfo,f,c):null;d.statFunctions.updateCellStat(g,f,d)})},_applyStatInfosToClusters:function(b){b=b||this._getValidStatInfos(this.statisticInfos);var c=this._clusterFieldPrefix;l.forEach(this.clusters,
function(d){var e=this._initializeStats(d,b);l.forEach(this.getCellsInCluster(d),function(c){this._calcCellStats(c,b,e)},this);this._summarizeStats(d,e,b,c);d.attributes[c+"id"]=d.primary},this)},_calcCellStats:function(b,c,d){var e=b.statistics;l.forEach(c,function(b){var c=b.identifier;b.statFunctions.updateClusterStat(d[c],e[c],b)})},_initializeStats:function(b,c){var d=b.statistics={};l.forEach(c,function(b){d[b.identifier]=b.statFunctions.initialize(b)});return d},_summarizeStats:function(b,
c,d,e){var g=b.attributes={};e=e||"";g[e+"count"]=b.count;l.forEach(d,function(b){var d=this._getStatFieldName(b,e);g[d]=b.statFunctions.summarize(c[b.identifier],b)},this)},_getStatFieldName:function(b,c){return(c||"")+b.identifier},_updateItem:function(b,c,d,e){var g=d.y,f=b.centroid,h=b.count;f.x=(h*f.x+c*d.x)/(h+c);f.y=(h*f.y+c*g)/(h+c);b.count+=c;e&&this._updateExtent(b.extent,d)},_updateExtent:function(b,c){var d=c.x;c=c.y;d<b.xmin&&(b.xmin=d);d>b.xmax&&(b.xmax=d);c<b.ymin&&(b.ymin=c);c>b.ymax&&
(b.ymax=c)},_getTime:function(){return window.performance?window.performance.now():(new Date).getTime()},_getElapsedTime:function(b,c){var d;b=null!=b&&null!=c?c-b:b;null!=b&&(d="millisecond",1E3<=b&&(b/=1E3,d="second",60<=b&&(b/=60,d="minute")),d={value:Number(b.toFixed(2)),unit:d});return d}});m("extend-esri")&&f.setObject("layers.clustering.GeohashAggregation",p,k);return p})},"esri/core/timerUtils":function(){define("esri/core/timerUtils",[],function(){function m(f){var h,g=f.length;for(h=0;h<
g;h++)f[h]()}var p={LOW:1,HIGH:2},f,l={};l[p.LOW]=[];l[p.HIGH]=[];var k=function(){clearTimeout(f);f=null;var h=l[p.HIGH];l[p.HIGH]=[];m(h);h=l[p.LOW];l[p.LOW]=[];m(h)};return{priority:p,callbackQueue:l,setTimeout:function(h,q){h=[q,l[q].push(h)-1];f||(f=setTimeout(k,0));return h},clearTimeout:function(f){f&&l[f[0]].splice(f[1],1)}}})},"esri/layers/clustering/geohashUtils":function(){define("esri/layers/clustering/geohashUtils","dojo/has dojo/string dojo/_base/lang dojo/_base/array ../../kernel ../../geometry/Point ../../geometry/Extent ../../SpatialReference ../../geometry/webMercatorUtils".split(" "),
function(m,p,f,l,k,h,q,g,e){function c(b){var c=b.spatialReference;if(!c)return{x:b.x,y:b.y};var d=c.isWebMercator(),e;4326===c.wkid?e={x:b.x,y:b.y}:d&&(e={x:b.getLongitude(),y:b.getLatitude()});return e}function b(b){var c=b.spatialReference,d=!(!c||!c.isWebMercator()),g;c&&4326===c.wkid?g=new q(b.toJson()):d&&(g=e.webMercatorToGeographic(b,!0));return g}function d(b,c){c.x=h.prototype._normalizeX(b.x,g.prototype._info[4326]);c.y=b.y;return c}function r(b){b=G.decimals[b].toString(2);return p.pad(b,
G.bitsPerBase32Char,"0")}function v(b,c){var d;c=c.slice();c.splice(1,0,0);for(var e=c[0],g=c[2],f=0;f<b.length;f++)Number(b[f])?c[0]=c[1]:c[2]=c[1],d=c[1]=(c[0]+c[2])/2,e=c[0],g=c[2];return{value:d,min:e,max:g}}function u(b,c,d){var e=[];c=c.slice();c.splice(1,0,0);for(var g=c[0],f=c[2],h=0;h<d;h++)b>=c[1]?(c[0]=c[1],g=1):(c[2]=c[1],g=0),c[1]=(c[0]+c[2])/2,e.push(g),g=c[0],f=c[2];return{value:e.join(""),min:g,max:f}}function t(b){var c=b*G.bitsPerBase32Char;0===c%2?b=c/=2:(b=(c+1)/2,c-=b);return{lon:b,
lat:c}}function x(b){var c=0;b=b.split("").reverse().join("");for(var d=0;d<b.length;d++)c+=Number(b[d])*Math.pow(2,d);return G.base32[c]}function w(b,c){var d={x:b.xmin,y:b.ymax},e={x:b.xmax,y:b.ymin},g={x:b.xmax,y:b.ymax};return{sw:I.pointToGeohash({x:b.xmin,y:b.ymin},c),nw:I.pointToGeohash(d,c),se:I.pointToGeohash(e,c),ne:I.pointToGeohash(g,c)}}function y(b,c,d,e,g){var f=b;do g[f]||(g[f]=!0,e.push(f)),(b=f===c)||(f=D(f,d));while(!b)}function z(b,c,d,e){var g=w(b,c);b=[];y(g.sw,g.nw,"n",b,{});
c=[];y(g.se,g.ne,"n",c,{});for(g=0;g<b.length;g++)y(b[g],c[g],"e",d,e)}function B(b){return l.filter(b,function(b){return 180===b.xmax?!0:!1})[0]}function A(b){return l.filter(b,function(b){return-180===b.xmin?!0:!1})[0]}function C(b,c,d,e){var g=I.geographicToWebMercator(b);b={x:g.x-c,y:g.y-c};c=I.webMercatorToGeographic({x:g.x+c,y:g.y+c},!0);b=I.webMercatorToGeographic(b,!0);return new q(null!=d?d:b.x,b.y,null!=e?e:c.x,c.y)}function F(b,c,d,e){var g;b=w(b,c);var f,h;"min"===e?h=180:"max"===e&&(f=
-180);var k=f;e=h;g=I.geohashToCell(b.sw).extent;c=I.geohashToCell(b.ne).extent;b=null!=k?k:g.xmin;g=g.ymin;e=null!=e?e:c.xmax;c=c.ymax;b=C({x:b,y:g},d,f,h);d=C({x:e,y:c},d,f,h);return new q(b.xmin,b.ymin,d.xmax,d.ymax)}function E(b,c,d){var e=b,g=0;do g++,(b=e===c)||(e=D(e,d));while(!b);return g}function H(b,c){b=w(b,c);c=E(b.nw,b.ne,"e");return{rows:E(b.nw,b.sw,"s"),cols:c}}function D(b,c){var d=b.length%2,e=b.slice(-1),g=G.decimals[e];b=b.slice(0,-1);-1!=G.borders[c][d].indexOf(e)&&b&&(b=D(b,c));
return b+G.neighbors[c][d][g]}var G={base32:"0123456789bcdefghjkmnpqrstuvwxyz",decimals:function(){for(var b={},c=0;32>c;c++)b["0123456789bcdefghjkmnpqrstuvwxyz"[c]]=c;return b}(),neighbors:{n:[null,"238967debc01fg45kmstqrwxuvhjyznp"],s:[null,"bc01fg45238967deuvhjyznpkmstqrwx"],e:[null,"14365h7k9dcfesgujnmqp0r2twvyx8zb"],w:[null,"p0r21436x8zb9dcf5h7kjnmqesgutwvy"]},borders:{n:[null,"bcfguvyz"],s:[null,"0145hjnp"],e:[null,"prxz"],w:[null,"028b"]},bitsPerBase32Char:5,maxGeohashLength:12,longitudeRange:[-180,
180],latitudeRange:[-90,90]};G.neighbors.n[0]="14365h7k9dcfesgujnmqp0r2twvyx8zb";G.neighbors.s[0]="p0r21436x8zb9dcf5h7kjnmqesgutwvy";G.neighbors.e[0]="238967debc01fg45kmstqrwxuvhjyznp";G.neighbors.w[0]="bc01fg45238967deuvhjyznpkmstqrwx";G.borders.n[0]="prxz";G.borders.s[0]="028b";G.borders.e[0]="bcfguvyz";G.borders.w[0]="0145hjnp";var I={geographicToWebMercator:function(b){b=h.lngLatToXY(b.x,b.y);return{x:b[0],y:b[1]}},webMercatorToGeographic:function(b,c){b=h.xyToLngLat(b.x,b.y,c);return{x:b[0],
y:b[1]}},geohashToCell:function(b){for(var c=[],d=0;d<b.length;d++)c.push(r(b[d]));for(var c=c.join(""),d=[],e=[],g=0;g<c.length;g++)0===g%2?d.push(c[g]):e.push(c[g]);d=d.join("");e=e.join("");d=[d,e];c=v(d[0],G.longitudeRange);d=v(d[1],G.latitudeRange);return{point:{x:c.value,y:d.value},extent:{xmin:c.min,xmax:c.max,ymin:d.min,ymax:d.max},geohash:b}},pointToCell:function(b,e){var g,f;e=e||G.maxGeohashLength;if(b=c(b)){b=d(b,b);g=t(e);e=u(b.x,G.longitudeRange,g.lon);var h=u(b.y,G.latitudeRange,g.lat);
g=e.value;f=h.value;e={xmin:e.min,xmax:e.max,ymin:h.min,ymax:h.max};for(var h=[],k=Math.ceil((g.length+f.length)/G.bitsPerBase32Char),l=0,q=0,r=0;r<k*G.bitsPerBase32Char;r++){var m=0===r%2?g[l++]:f[q++];null==m&&(m=0);h.push(m)}g=h.join("");f=G.bitsPerBase32Char;h=g.length/f;k=[];for(l=0;l<h;l++)q=g.substr(l*f,f),k.push(x(q));g=k.join("");return{point:b,extent:e,geohash:g}}},geohashToPoint:function(b){return I.geohashToCell(b).point},pointToGeohash:function(b,c){return(b=I.pointToCell(b,c))&&b.geohash},
getCells:function(b){return l.map(b,function(b){return I.geohashToCell(b)})},getCellSize:function(b){var c=G.longitudeRange,d=G.latitudeRange,c=Math.abs(c[1]-c[0]),d=Math.abs(d[1]-d[0]);b=t(b||1);return{width:c/Math.pow(2,b.lon),height:d/Math.pow(2,b.lat)}},getCellSizeInMeters:function(b){b=I.getCellSize(b);var c=e.metersPerDegree;b.width*=c;b.height*=c;return b},getIntersecting:function(c,d,e){d=d||1;e=e||0;var g=[],f=b(c);if(f){e&&(f=I.expandExtent(c,d,e));c=f.normalize();var h={};l.forEach(c,function(b){z(b,
d,g,h)})}return g},countIntersecting:function(c,e,g){e=e||1;g=g||0;var f=0,h=b(c);if(h){g&&(h=I.expandExtent(c,e,g));c=h.normalize();if(2===c.length){f=B(c);h=A(c);g=H(f,e);var k=H(h,e);c=g.rows;g=g.cols+k.cols;f={x:f.xmin,y:f.ymax};h={x:h.xmax,y:h.ymax};f=d(f,{});h=d(h,{});f=I.pointToGeohash(f,e);e=I.pointToGeohash(h,e);f===e&&g--;e={rows:c,cols:g}}else e=H(c[0],e);f=e.cols*e.rows}return f},getChildren:function(b){b=b||"";var c=[],d;for(d in G.decimals)c.push(b+d);return c},getNeighbors:function(b){var c=
D(b,"n"),d=D(b,"s");return[c,D(c,"e"),D(c,"w"),d,D(d,"e"),D(d,"w"),D(b,"e"),D(b,"w")]},getExtentFromDistance:function(b,d){d=d||1E3;var e;(b=c(b))&&(e=C(b,d));return e},expandExtent:function(c,d,e){d=d||1;e=e||0;if(c=b(c)){if(e){c=c.normalize();if(2===c.length){var g=e;e=B(c);c=A(c);e=F(e,d,g,"min");c=F(c,d,g,"max");360<=e.getWidth()+c.getWidth()?(d=-180,c=180):(d=e.xmin,c=c.xmax);return new q(d,e.ymin,c,e.ymax)}return F(c[0],d,e)}return c}},getNeighborsWithinDistance:function(b,d,e){e=e||1E3;d=d||
1;var g=[];if(b=c(b)){e=C(b,e).normalize();var f={};l.forEach(e,function(b){z(b,d,g,f)})}return g}};m("extend-esri")&&f.setObject("layers.clustering.geohashUtils",I,k);return I})},"esri/layers/clustering/statUtils":function(){define("esri/layers/clustering/statUtils",["dojo/_base/lang","../support/attributeUtils"],function(m,p){function f(f){return"number"===typeof f&&!isNaN(f)&&Infinity!==f&&-Infinity!==f}var l={sum:{initialize:function(){return{count:0,sum:null}},updateCellStat:function(h,k){f(k)&&
(h.count++,h.sum+=k)},updateClusterStat:function(f,k){k.count&&(f.count+=k.count,f.sum+=k.sum)},summarize:function(f){return f.sum}},avg:{initialize:function(f){return{count:0,sum:null,avg:null,sum_cosine:null,sum_sine:null}},updateCellStat:function(h,k,g){f(k)&&(h.count++,g.isAngular?(g.isArithmetic||(k=-1*k+90),h.sum_cosine+=Math.cos(k*Math.PI/180),h.sum_sine+=Math.sin(k*Math.PI/180)):h.sum+=k)},updateClusterStat:function(f,k,g){k.count&&(f.count+=k.count,g.isAngular?(f.sum_cosine+=k.sum_cosine,
f.sum_sine+=k.sum_sine):f.sum+=k.sum)},summarize:function(f,k){if(0<f.count){var g=f.count;k.isAngular?(g=180*Math.atan2(f.sum_sine/g,f.sum_cosine/g)/Math.PI,k.isArithmetic||(g=-1*(g-90)),f.avg=0>g?g+360:g):(f.avg=f.sum/g,k.isDate&&(f.avg=Math.ceil(f.avg)))}return f.avg}},type:{initialize:function(){return{uvInfos:{}}},updateCellStat:function(f,k){if(null==k||""===k||"string"===typeof k&&""===m.trim(k))k=null;f=f.uvInfos;null==f[k]?f[k]={count:1,value:k}:f[k].count++},updateClusterStat:function(f,
k){f=f.uvInfos;k=k.uvInfos;for(var g in k){var e=k[g];null==f[g]?f[g]={count:e.count,value:e.value}:f[g].count+=e.count}},summarize:function(f){f=f.uvInfos;var h,g=-Infinity,e;for(h in f){var c=f[h];c.count>g?(g=c.count,e=c.value):c.count===g&&(e=null)}return e}}},k={isSupportedStatisticType:function(f){return l.hasOwnProperty(f)},getStatisticFunctions:function(f){return l[f]},getStatisticId:function(f,k){var g=p.getAttributeIdSource(f);f=g&&p.getAttributeId(g)||f.field;return k+"_"+f},getClusterField:function(f,
l){return"cluster_"+k.getStatisticId(f,l)},getStatisticHash:function(f,l){l=[k.getStatisticId(f,l)];f.attributeType&&l.push(f.attributeType.toLowerCase());f.rotationType&&l.push(f.rotationType.toLowerCase());return l.join("_")}};return k})},"esri/dijit/Scalebar":function(){define("esri/dijit/Scalebar","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/query ../kernel ../lang ../domUtils ../units ../SpatialReference ../WKIDUnitConversion ../geometry/Point ../geometry/ScreenPoint ../geometry/Polyline ../geometry/geodesicUtils ../geometry/webMercatorUtils ../geometry/screenUtils ../geometry/normalizeUtils dojo/i18n!../nls/jsapi".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x,w,y,z,B,A,C,F){m=m(null,{declaredClass:"esri.dijit.Scalebar",map:null,mapUnit:null,scalebarUnit:null,unitsDictionary:[],domNode:null,screenPt1:null,screenPt2:null,localStrings:F.widgets.scalebar,constructor:function(b,c){this.metricScalebar=h.create("div",{innerHTML:"\x3cdiv class\x3d'esriScaleLabelDiv'\x3e\x3cdiv class\x3d'esriScalebarLabel esriScalebarLineLabel esriScalebarSecondNumber'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'esriScalebarLine esriScalebarMetricLine'\x3e\x3c/div\x3e"});
this.englishScalebar=h.create("div",{innerHTML:"\x3cdiv class\x3d'esriScalebarLine esriScalebarEnglishLine'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriScaleLabelDiv'\x3e\x3cdiv class\x3d'esriScalebarLabel esriScalebarLineLabel esriScalebarSecondNumber'\x3e\x3c/div\x3e\x3c/div\x3e"});this.domNode=h.create("div");b=b||{};if(b.map){if(b.scalebarUnit){if("english"!==b.scalebarUnit&&"metric"!==b.scalebarUnit&&"dual"!==b.scalebarUnit)return;this.scalebarUnit=b.scalebarUnit}else this.scalebarUnit="english";if(b.scalebarStyle){if("ruler"!==
b.scalebarStyle&&"line"!==b.scalebarStyle)return;this.scalebarStyle=b.scalebarStyle}else this.scalebarStyle="ruler";this.background=b.background;switch(this.scalebarUnit){case "english":"ruler"===this.scalebarStyle&&(this.englishScalebar.innerHTML="\x3cdiv class\x3d'esriScalebarRuler'\x3e\x3cdiv class\x3d'esriScalebarRulerBlock upper_firstpiece'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriScalebarRulerBlock upper_secondpiece'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriScalebarRulerBlock lower_firstpiece'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriScalebarRulerBlock lower_secondpiece'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'scaleLabelDiv'\x3e\x3cdiv class\x3d'esriScalebarLabel' style\x3d'left: -3%'\x3e0\x3c/div\x3e\x3cdiv class\x3d'esriScalebarLabel esriScalebarFirstNumber'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriScalebarLabel esriScalebarSecondNumber'\x3e\x3c/div\x3e\x3c/div\x3e");
this.domNode.appendChild(this.englishScalebar);break;case "metric":"ruler"===this.scalebarStyle&&(this.metricScalebar.innerHTML="\x3cdiv class\x3d'esriScalebarRuler'\x3e\x3cdiv class\x3d'esriScalebarRulerBlock upper_firstpiece'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriScalebarRulerBlock upper_secondpiece'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriScalebarRulerBlock lower_firstpiece'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriScalebarRulerBlock lower_secondpiece'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'scaleLabelDiv'\x3e\x3cdiv class\x3d'esriScalebarLabel' style\x3d'left: -3%'\x3e0\x3c/div\x3e\x3cdiv class\x3d'esriScalebarLabel esriScalebarFirstNumber'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriScalebarLabel esriScalebarSecondNumber'\x3e\x3c/div\x3e\x3c/div\x3e");
this.domNode.appendChild(this.metricScalebar);break;case "dual":this.domNode.appendChild(this.metricScalebar),this.domNode.appendChild(this.englishScalebar)}this.map=b.map;c?c.appendChild(this.domNode):(this.map.container.appendChild(this.domNode),b.attachTo?k.add(this.domNode,"scalebar_"+b.attachTo):k.add(this.domNode,"scalebar_bottom-left"));k.add(this.domNode,"esriScalebar");if(this.map.loaded)this._getDistance(),this._checkBingMaps();else var d=l.connect(this.map,"onLoad",this,function(){l.disconnect(d);
d=null;this._getDistance();this._checkBingMaps()});this._mapOnPan=l.connect(this.map,"onPan",this,this._getDistance);this._mapOnExtentChange=l.connect(this.map,"onExtentChange",this,this._getDistance);f.forEach(this.map.layerIds,function(b,c){"esri.virtualearth.VETiledLayer"===this.map.getLayer(b).declaredClass&&l.connect(this.map.getLayer(b),"onVisibilityChange",p.hitch(this,function(b){this._checkBingMaps()}))},this);this._mapOnLayerAdd=l.connect(this.map,"onLayerAdd",p.hitch(this,function(b){"esri.virtualearth.VETiledLayer"===
b.declaredClass&&l.connect(b,"onVisibilityChange",p.hitch(this,function(b){this._checkBingMaps()}));this._checkBingMaps()}));this._mapOnLayerRemove=l.connect(this.map,"onLayerRemove",p.hitch(this,this._checkBingMaps))}},hide:function(){this._hidden=!0;r.hide(this.domNode)},show:function(){this._hidden=!1;r.show(this.domNode)},destroy:function(){l.disconnect(this._mapOnPan);l.disconnect(this._mapOnExtentChange);l.disconnect(this._mapOnLayerAdd);l.disconnect(this._mapOnLayerRemove);this.hide();this.map=
null;h.destroy(this.domNode)},_checkBingMaps:function(){k.contains(this.domNode,"scalebar_bottom-left")&&(g.set(this.domNode,"left","25px"),f.forEach(this.map.layerIds,function(b,c){"esri.virtualearth.VETiledLayer"===this.map.getLayer(b).declaredClass&&this.map.getLayer(b).visible&&(b="95px",this.map._mapParams.nav&&(b="115px"),g.set(this.domNode,"left",b))},this))},_getDistance:function(b){b=this.map._clip?this.map._getAvailExtent():b||this.map.extent;var c=q.position(this.domNode,!0).y-this.map.position.y,
c=c>this.map.height?this.map.height:c,c=0>c?0:c,e=new w(0,c),c=new w(this.map.width,c),g,f;this.mapUnit="esriDecimalDegrees";var h=A.toMapPoint(b,this.map.width,this.map.height,e),k=A.toMapPoint(b,this.map.width,this.map.height,c),e=new x(b.xmin,(b.ymin+b.ymax)/2,this.map.spatialReference),c=new x(b.xmax,(b.ymin+b.ymax)/2,this.map.spatialReference);this.map._clip&&(k=this.map.spatialReference._getInfo(),h=new x(k.valid[0],0,this.map.spatialReference),k=new x(k.valid[1],0,this.map.spatialReference));
if(3857===this.map.spatialReference.wkid||102100===this.map.spatialReference.wkid||102113===this.map.spatialReference.wkid||this.map.spatialReference.wkt&&-1!=this.map.spatialReference.wkt.indexOf("WGS_1984_Web_Mercator"))h=B.webMercatorToGeographic(h,!0),k=B.webMercatorToGeographic(k,!0),e=B.webMercatorToGeographic(e,!0),c=B.webMercatorToGeographic(c,!0);else if(d.isDefined(t[this.map.spatialReference.wkid])||this.map.spatialReference.wkt&&0===this.map.spatialReference.wkt.indexOf("PROJCS")){this.mapUnit=
"linearUnit";b=Math.abs(b.xmax-b.xmin);if(d.isDefined(t[this.map.spatialReference.wkid]))g=t.values[t[this.map.spatialReference.wkid]];else{g=this.map.spatialReference.wkt;f=g.lastIndexOf(",")+1;var l=g.lastIndexOf("]]");g=parseFloat(g.substring(f,l))}b*=g;f=b/1609;g=b/1E3;b/=1E3}"esriDecimalDegrees"===this.mapUnit&&(g=z.isSupported(this.map.spatialReference)?this.map.spatialReference.wkid:4326,b=new y(new u({wkid:g})),b.addPath([h,k]),h=C._straightLineDensify(b,10),b=z.geodesicLengths([h],v.KILOMETERS)[0],
h=new y(new u({wkid:g})),h.addPath([e,c]),e=C._straightLineDensify(h,10),z.geodesicLengths([e],v.KILOMETERS),f=b/1.609,g=b);"english"===this.scalebarUnit?this._getScaleBarLength(f,"mi"):"metric"===this.scalebarUnit?this._getScaleBarLength(g,"km"):"dual"===this.scalebarUnit&&(this._getScaleBarLength(f,"mi"),this._getScaleBarLength(g,"km"))},_getScaleBarLength:function(b,c){var d=this.map._getFrameWidth();b=50*b/(this.map._clip&&0<d?d:this.map.width);var d=0,e=c;for(.1>b&&("mi"===c?(b*=5280,e="ft"):
"km"===c&&(b*=1E3,e="m"));1<=b;)b/=10,d++;var g,f;.5<b?(g=1,f=.5):.3<b?(g=.5,f=.3):.2<b?(g=.3,f=.2):.15<b?(g=.2,f=.15):.1<=b&&(g=.15,f=.1);c=g/b>=b/f?f:g;this._drawScaleBar(c/b*50,Math.pow(10,d)*c,e)},_drawScaleBar:function(b,d,e){var g=2*Math.round(b),h,k;"mi"===e||"ft"===e?(this.englishScalebar.style.width=g+"px",b=c(".esriScalebarFirstNumber",this.englishScalebar),h=c(".esriScalebarSecondNumber",this.englishScalebar),k=c(".esriScalebarMetricLineBackground",this.englishScalebar)):(this.metricScalebar.style.width=
g+"px",b=c(".esriScalebarFirstNumber",this.metricScalebar),h=c(".esriScalebarSecondNumber",this.metricScalebar),k=c(".esriScalebarMetricLineBackground",this.metricScalebar));f.forEach(k,function(b,c){b.style.width=g-2+"px"},this);f.forEach(b,function(b,c){b.innerHTML=d},this);f.forEach(h,function(b,c){b.innerHTML="esriUnknown"!==this.mapUnit?2*d+this.localStrings[e]:2*d+"Unknown Unit"},this)}});e("extend-esri")&&p.setObject("dijit.Scalebar",m,b);return m})},"esri/units":function(){define("esri/units",
["dojo/has","./kernel"],function(m,p){var f={CENTIMETERS:"esriCentimeters",DECIMAL_DEGREES:"esriDecimalDegrees",DEGREE_MINUTE_SECONDS:"esriDegreeMinuteSeconds",DECIMETERS:"esriDecimeters",FEET:"esriFeet",FEET_US:"esriFeetUS",INCHES:"esriInches",KILOMETERS:"esriKilometers",METERS:"esriMeters",MILES:"esriMiles",MILES_US:"esriMilesUS",MILLIMETERS:"esriMillimeters",NAUTICAL_MILES:"esriNauticalMiles",POINTS:"esriPoints",UNKNOWN:"esriUnknownUnits",YARDS:"esriYards",YARDS_US:"esriYardsUS",ACRES:"esriAcres",
ACRES_US:"esriAcresUS",ARES:"esriAres",SQUARE_KILOMETERS:"esriSquareKilometers",SQUARE_MILES:"esriSquareMiles",SQUARE_MILES_US:"esriSquareMilesUS",SQUARE_FEET:"esriSquareFeet",SQUARE_FEET_US:"esriSquareFeetUS",SQUARE_METERS:"esriSquareMeters",HECTARES:"esriHectares",SQUARE_YARDS:"esriSquareYards",SQUARE_YARDS_US:"esriSquareYardsUS",SQUARE_INCHES:"esriSquareInches",SQUARE_MILLIMETERS:"esriSquareMillimeters",SQUARE_CENTIMETERS:"esriSquareCentimeters",SQUARE_DECIMETERS:"esriSquareDecimeters",SQUARE_NAUTICAL_MILES:"esriSquareNauticalMiles",
METERS_PER_SECOND:"esriMetersPerSecond",KILOMETERS_PER_HOUR:"esriKilometersPerHour",KNOTS:"esriKnots",FEET_PER_SECOND:"esriFeetPerSecond",MILES_PER_HOUR:"esriMilesPerHour",RADIANS:"esriDURadians"};m("extend-esri")&&(p.Units=f);return f})},"esri/geometry/geodesicUtils":function(){define("esri/geometry/geodesicUtils","dojo/_base/array dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Point ./Polyline ./Polygon".split(" "),function(m,p,f,l,k,h,q,g){function e(b){return!!(b&&b.wkid&&x[b.wkid])}
function c(b){return e(b)?x[b.wkid]:x[4326]}function b(b){var d=b.spatialReference,e=c(d),g=e.a,e=e.eSq,f=Math.sqrt(e),k=Math.sin(b.y*t);return new h(g*b.x*t,0<e?g*(1-e)*(k/(1-e*k*k)-1/(2*f)*Math.log((1-f*k)/(1+f*k)))*.5:g*k,d)}function d(b,d,e,g,f){var k=c(f),l=k.a,q=k.b,k=k.f,r=Math.sin(e);e=Math.cos(e);var m=(1-k)*Math.tan(b);b=1/Math.sqrt(1+m*m);for(var u=m*b,p=Math.atan2(m,e),m=b*r,v=m*m,w=1-v,l=w*(l*l-q*q)/(q*q),x=1+l/16384*(4096+l*(-768+l*(320-175*l))),y=l/1024*(256+l*(-128+l*(74-47*l))),l=
g/(q*x),A=2*Math.PI,B,z,U,R;1E-12<Math.abs(l-A);)U=Math.cos(2*p+l),B=Math.sin(l),z=Math.cos(l),R=y*B*(U+y/4*(z*(-1+2*U*U)-y/6*U*(-3+4*B*B)*(-3+4*U*U))),A=l,l=g/(q*x)+R;g=u*B-b*z*e;q=k/16*w*(4+k*(4-3*w));return new h((d+(Math.atan2(B*r,b*z-u*B*e)-(1-q)*k*m*(l+q*B*(U+q*z*(-1+2*U*U)))))/t,Math.atan2(u*z+b*B*e,(1-k)*Math.sqrt(v+g*g))/t,f)}function r(b,d,e,g,f){var h=c(f),k=h.a;f=h.b;var l=h.f,q=g-d,r=Math.atan((1-l)*Math.tan(b)),m=Math.atan((1-l)*Math.tan(e)),u=Math.sin(r),r=Math.cos(r),t=Math.sin(m),
m=Math.cos(m),p=q,v,x=1E3,w,y,A,B,z,Y,aa;do{A=Math.sin(p);B=Math.cos(p);y=Math.sqrt(m*A*m*A+(r*t-u*m*B)*(r*t-u*m*B));if(0===y)return 0;B=u*t+r*m*B;z=Math.atan2(y,B);Y=r*m*A/y;w=1-Y*Y;A=B-2*u*t/w;isNaN(A)&&(A=0);aa=l/16*w*(4+l*(4-3*w));v=p;p=q+(1-aa)*l*Y*(z+aa*y*(A+aa*B*(-1+2*A*A)))}while(1E-12<Math.abs(p-v)&&0<--x);if(0===x)return f=g-d,{azimuth:Math.atan2(Math.sin(f)*Math.cos(e),Math.cos(b)*Math.sin(e)-Math.sin(b)*Math.cos(e)*Math.cos(f)),geodesicDistance:Math.acos(Math.sin(b)*Math.sin(e)+Math.cos(b)*
Math.cos(e)*Math.cos(g-d))*h.radius};b=w*(k*k-f*f)/(f*f);d=b/1024*(256+b*(-128+b*(74-47*b)));return{azimuth:Math.atan2(m*Math.sin(p),r*t-u*m*Math.cos(p)),geodesicDistance:f*(1+b/16384*(4096+b*(-768+b*(320-175*b))))*(z-d*y*(A+d/4*(B*(-1+2*A*A)-d/6*A*(-3+4*y*y)*(-3+4*A*A)))),reverseAzimuth:Math.atan2(r*Math.sin(p),r*t*Math.cos(p)-u*m)}}function v(b,e){if(!(b instanceof q||b instanceof g))throw Error("_geodesicDensify: the input geometry is neither polyline nor polygon");var f=b.spatialReference,h=c(f).radius/
1E4;e<h&&(e=h);var h=b instanceof q,k=[],l;m.forEach(h?b.paths:b.rings,function(b){k.push(l=[]);l.push([b[0][0],b[0][1]]);var c,g,h,q,m,u;c=b[0][0]*t;g=b[0][1]*t;for(m=0;m<b.length-1;m++)if(h=b[m+1][0]*t,q=b[m+1][1]*t,c!==h||g!==q){q=r(g,c,q,h,f);h=q.azimuth;q=q.geodesicDistance;var p=q/e;if(1<p){for(u=1;u<=p-1;u++){var v=d(g,c,h,u*e,f);l.push([v.x,v.y])}u=d(g,c,h,(q+Math.floor(p-1)*e)/2,f);l.push([u.x,u.y])}g=d(g,c,h,q,f);l.push([g.x,g.y]);c=g.x*t;g=g.y*t}});return h?new q({paths:k,spatialReference:f}):
new g({rings:k,spatialReference:f})}var u={esriMeters:1,esriKilometers:1E3,esriYards:.9144,esriFeet:.3048,esriMiles:1609.344,esriNauticalMiles:1852,esriInches:.0254,esriDecimeters:.1,esriCentimeters:.01,esriMillimeters:.001,esriSquareMeters:1,esriSquareKilometers:1E6,esriSquareYards:.83612736,esriSquareFeet:.09290304,esriSquareMiles:2589988.110336,esriAcres:4046.8564224,esriHectares:1E4,esriAres:100,esriSquareInches:6.4516E-4,esriSquareMillimeters:1E-6,esriSquareCentimeters:1E-4,esriSquareDecimeters:.01},
t=Math.PI/180,x={4326:{a:6378137,b:6356752.31424518,f:1/298.257223563,eSq:.006694379990197414,radius:6371008.771415059},104900:{a:2439700,b:2439700,f:0,eSq:0,radius:2439700},104901:{a:6051E3,b:6051E3,f:0,eSq:0,radius:6051E3},104902:{a:6051800,b:6051800,f:0,eSq:0,radius:6051800},104903:{a:1737400,b:1737400,f:0,eSq:0,radius:1737400},104904:{a:3393400,b:3375730,f:1/192.04301075,eSq:.01038722,radius:3387510},104905:{a:3396190,b:3376200,f:1/169.89444722,eSq:.01173737,radius:3389526.6666666665},104906:{a:6200,
b:6200,f:0,eSq:0,radius:6200},104907:{a:11100,b:11100,f:0,eSq:0,radius:11100},104912:{a:2409300,b:2409300,f:0,eSq:0,radius:2409300},104915:{a:1562090,b:1562090,f:0,eSq:0,radius:1562090},104916:{a:2632345,b:2632345,f:0,eSq:0,radius:2632345},104918:{a:1821460,b:1821460,f:0,eSq:0,radius:1821460},104929:{a:249400,b:249400,f:0,eSq:0,radius:249400},104943:{a:2575E3,b:2575E3,f:0,eSq:0,radius:2575E3},104971:{a:3396190,b:3396190,f:0,eSq:0,radius:3396190},104972:{a:47E4,b:47E4,f:0,eSq:0,radius:47E4},104973:{a:255E3,
b:255E3,f:0,eSq:0,radius:255E3},104974:{a:2439400,b:2439400,f:0,eSq:0,radius:2439400}};k={isSupported:e,getSpheroidInfo:c,geodesicDensify:v,geodesicLengths:function(b,c){var d=[];m.forEach(b,function(b,e){var g=0,f=b.spatialReference;m.forEach(b.paths,function(b,c){c=0;var d,e,h,k,l;for(d=1;d<b.length;d++)if(e=b[d-1][0]*t,h=b[d][0]*t,k=b[d-1][1]*t,l=b[d][1]*t,k!==l||e!==h)e=r(k,e,l,h,f),c+=e.geodesicDistance;g+=c});g/=u[c];d.push(g)});return d},geodesicAreas:function(d,e){var g=[],f=[];m.forEach(d,
function(b,d){d=.0015696101447650193*c(b.spatialReference).radius;g.push(v(b,d))});m.forEach(g,function(c,d){var g=0,k=c.spatialReference;m.forEach(c.rings,function(c,d){d=b(new h(c[0][0],c[0][1],k));var e=b(new h(c[c.length-1][0],c[c.length-1][1],k)),f=e.x*d.y-d.x*e.y,l;for(l=0;l<c.length-1;l++)d=b(new h(c[l+1][0],c[l+1][1],k)),e=b(new h(c[l][0],c[l][1],k)),f+=e.x*d.y-d.x*e.y;g+=f});g/=u[e];f.push(g/-2)});return f},_unitsDictionary:u,_toEqualAreaPoint:b,_directGeodeticSolver:d,_inverseGeodeticSolver:r};
f("extend-esri")&&p.mixin(p.getObject("geometry",!0,l),k);return k})},"esri/IdentityManager":function(){define("esri/IdentityManager",["./IdentityManagerDialog","./kernel","./OAuthSignInHandler","dojo/_base/declare"],function(m,p,f,l){m=new m;p.id=l.safeMixin(m,f);return p.id})},"esri/IdentityManagerDialog":function(){define("esri/IdentityManagerDialog","dojo/_base/kernel dojo/_base/declare dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/has dojo/dom-attr dojo/keys dijit/registry dijit/Dialog ./kernel ./lang ./domUtils ./Credential ./IdentityManagerBase dojo/i18n!./nls/jsapi dojo/query dijit/form/Button dijit/form/Form dijit/form/ValidationTextBox".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t){p=p([u],{declaredClass:"esri.IdentityManager",_eventMap:{"dialog-cancel":["info"]},constructor:function(b){k.mixin(this,b);this.registerConnectEvents()},_dialogContent:"\x3cdiv data-dojo-type\x3d'dijit.form.Form' data-dojo-props\x3d'\"class\":\"esriIdForm\"'\x3e\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${info}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3ctable style\x3d'width: 100%;'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblUser}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"text\", \"class\":\"esriIdUser\", required:true, trim:true, style:\"width: 100%;\", autocapitalize:\"none\", autocorrect:\"off\", spellcheck:false' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblPwd}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"password\", \"class\":\"esriIdPwd\", required:true, style:\"width: 100%;\"' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e",
onDialogCreate:function(){},onDialogCancel:function(){},signIn:function(b,c,d){this._nls||(this._nls=t.identity);this._loginDialog||(this._loginDialog=this.dialog=this._createLoginDialog(),this.onDialogCreate());var e=this._loginDialog,g=d&&d.error,h=d&&d.token,k=new l(function(){e.onCancel()});if(e.open)return b=Error("BUSY"),b.code="IdentityManager.1",b.log=!!f.isDebug,k.errback(b),k;r.hide(e.errMsg_);g&&403==g.code&&h&&(q.set(e.errMsg_,"innerHTML",this._nls.forbidden),r.show(e.errMsg_));e.dfd_=
k;e.serverInfo_=c;e.resUrl_=b;e.admin_=d&&d.isAdmin;q.set(e.resLink_,{title:b,innerHTML:"("+(this.getResourceName(b)||this._nls.lblItem)+")"});q.set(e.serverLink_,{title:c.server,innerHTML:(-1!==c.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":c.server)+" "});e.txtPwd_.set("value","");e.show();return k},_createLoginDialog:function(){var h=this._nls,k=d.substitute(h,this._dialogContent),k=d.substitute({resource:"\x3cspan class\x3d'resLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e",
server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},k),l=new c({title:h.title,content:k,"class":"esriSignInDialog",style:"width: 18em;",esriIdMgr_:this,keypressed_:function(b){b.charOrCode===g.ENTER&&this.execute_()},execute_:function(){var e=this.txtUser_.get("value"),g=this.txtPwd_.get("value"),f=this.dfd_,k=this;if(this.form_.validate()&&e&&g){this.btnSubmit_.set("label",h.lblSigning);var l=b.id.findCredential(k.resUrl_,e),m=function(b){k.btnSubmit_.set("label",
h.lblOk);k.btnSubmit_.set("disabled",!1);r.hide(k.errMsg_);k.hide();c._DialogLevelManager.hide(k);var g=k.serverInfo_;k.dfd_=k.serverInfo_=k.generateDfd_=k.resUrl_=null;var q,m,u=l,t;b&&(q=b.token,m=d.isDefined(b.expires)?Number(b.expires):null,t=!!b.ssl,u?(u.userId=e,u.token=q,u.expires=m,u.validity=b.validity,u.ssl=t,u.creationTime=(new Date).getTime()):u=new v({userId:e,server:g.server,token:q,expires:m,ssl:t,isAdmin:k.admin_,validity:b.validity}));f.callback(u)};l&&!l._enqueued?m():(k.btnSubmit_.set("disabled",
!0),k.generateDfd_=b.id.generateToken(this.serverInfo_,{username:e,password:g},{isAdmin:this.admin_}).addCallback(m).addErrback(function(b){k.btnSubmit_.set("disabled",!1);k.generateDfd_=null;k.btnSubmit_.set("label",h.lblOk);q.set(k.errMsg_,"innerHTML",b&&b.code?h.invalidUser:h.noAuthService);r.show(k.errMsg_)}))}},cancel_:function(){l.generateDfd_&&l.generateDfd_.cancel();var b=l.dfd_,d=l.resUrl_,e=l.serverInfo_;l.btnSubmit_.set("disabled",!1);l.dfd_=l.serverInfo_=l.generateDfd_=l.resUrl_=null;
r.hide(l.errMsg_);c._DialogLevelManager.hide(l);l.esriIdMgr_.onDialogCancel({resourceUrl:d,serverInfo:e});d=Error("ABORTED");d.code="IdentityManager.2";d.log=!!f.isDebug;b.errback(d)}}),k=l.domNode;l.form_=e.byNode(m.query(".esriIdForm",k)[0]);l.txtUser_=e.byNode(m.query(".esriIdUser",k)[0]);l.txtPwd_=e.byNode(m.query(".esriIdPwd",k)[0]);l.btnSubmit_=e.byNode(m.query(".esriIdSubmit",k)[0]);l.btnCancel_=e.byNode(m.query(".esriIdCancel",k)[0]);l.resLink_=m.query(".resLink",k)[0];l.serverLink_=m.query(".serverLink",
k)[0];l.errMsg_=m.query(".esriErrorMsg",k)[0];l.connect(l.txtUser_,"onKeyPress",l.keypressed_);l.connect(l.txtPwd_,"onKeyPress",l.keypressed_);l.connect(l.btnSubmit_,"onClick",l.execute_);l.connect(l.btnCancel_,"onClick",l.onCancel);l.connect(l,"onCancel",l.cancel_);return l}});h("extend-esri")&&(b.IdentityManagerDialog=b.IdentityManager=p);return p})},"dijit/Dialog":function(){require({cache:{"url:dijit/templates/Dialog.html":'\x3cdiv class\x3d"dijitDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n\t\t\t\trole\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\x3c/div\x3e\r\n\t${!actionBarTemplate}\r\n\x3c/div\x3e\r\n\r\n'}});
define("dijit/Dialog","require dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/ready dojo/sniff dojo/touch dojo/window dojo/dnd/Moveable dojo/dnd/TimedMoveable ./focus ./_base/manager ./_Widget ./_TemplatedMixin ./_CssStateMixin ./form/_FormMixin ./_DialogMixin ./DialogUnderlay ./layout/ContentPane ./layout/utils dojo/text!./templates/Dialog.html ./a11yclick dojo/i18n!./nls/common".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x,w,y,z,B,A,C,F,E,H,D,G,I,P,Q){function O(){}var N=new k;N.resolve(!0);A=l("dijit._DialogBase"+(t("dojo-bidi")?"_NoBidi":""),[F,H,D,E],{templateString:Q,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!1,duration:A.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,draggable:!0,_setDraggableAttr:function(b){this._set("draggable",b)},maxRatio:.9,
closable:!0,_setClosableAttr:function(b){this.closeButtonNode.style.display=b?"":"none";this._set("closable",b)},postMixInProperties:function(){var c=b.getLocalization("dijit","common");r.mixin(this,c);this.inherited(arguments)},postCreate:function(){e.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);f.after(this,"onExecute",r.hitch(this,"hide"),!0);f.after(this,"onCancel",r.hitch(this,"hide"),!0);v(this.closeButtonNode,
x.press,function(b){b.stopPropagation()});this._modalconnects=[]},onLoad:function(){this.resize();this._position();this.autofocus&&J.isTop(this)&&(this._getFocusItems(),B.focus(this._firstFocusItem));this.inherited(arguments)},focus:function(){this._getFocusItems();B.focus(this._firstFocusItem)},_endDrag:function(){var b=g.position(this.domNode),c=w.getBox(this.ownerDocument);b.y=Math.min(Math.max(b.y,0),c.h-b.h);b.x=Math.min(Math.max(b.x,0),c.w-b.w);this._relativePosition=b;this._position()},_setup:function(){var b=
this.domNode;this.titleBar&&this.draggable?(this._moveable=new (6==t("ie")?z:y)(b,{handle:this.titleBar}),f.after(this._moveable,"onMoveStop",r.hitch(this,"_endDrag"),!0)):q.add(b,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":p.map(this["class"].split(/\s/),function(b){return b+"_underlay"}).join(" "),_onKeyDown:r.hitch(this,"_onKey"),ownerDocument:this.ownerDocument}},_size:function(){this.resize()},_position:function(){if(!q.contains(this.ownerDocumentBody,"dojoMove")){var b=
this.domNode,c=w.getBox(this.ownerDocument),d=this._relativePosition,f=g.position(b);e.set(b,{left:Math.floor(c.l+(d?Math.min(d.x,c.w-f.w):(c.w-f.w)/2))+"px",top:Math.floor(c.t+(d?Math.min(d.y,c.h-f.h):(c.h-f.h)/2))+"px"})}},_onKey:function(b){if(b.keyCode==d.TAB){this._getFocusItems();var c=b.target;this._firstFocusItem==this._lastFocusItem?(b.stopPropagation(),b.preventDefault()):c==this._firstFocusItem&&b.shiftKey?(B.focus(this._lastFocusItem),b.stopPropagation(),b.preventDefault()):c!=this._lastFocusItem||
b.shiftKey||(B.focus(this._firstFocusItem),b.stopPropagation(),b.preventDefault())}else this.closable&&b.keyCode==d.ESCAPE&&(this.onCancel(),b.stopPropagation(),b.preventDefault())},show:function(){if(this.open)return N.promise;this._started||this.startup();this._alreadyInitialized||(this._setup(),this._alreadyInitialized=!0);this._fadeOutDeferred&&(this._fadeOutDeferred.cancel(),J.hide(this));var b=w.get(this.ownerDocument);this._modalconnects.push(v(b,"scroll",r.hitch(this,"resize",null)));this._modalconnects.push(v(this.domNode,
"keydown",r.hitch(this,"_onKey")));e.set(this.domNode,{opacity:0,display:""});this._set("open",!0);this._onShow();this.resize();this._position();var d;this._fadeInDeferred=new k(r.hitch(this,function(){d.stop();delete this._fadeInDeferred}));this._fadeInDeferred.then(void 0,O);b=this._fadeInDeferred.promise;d=c.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:r.hitch(this,function(){J.show(this,this.underlayAttrs)}),onEnd:r.hitch(this,function(){this.autofocus&&J.isTop(this)&&(this._getFocusItems(),
B.focus(this._firstFocusItem));this._fadeInDeferred.resolve(!0);delete this._fadeInDeferred})}).play();return b},hide:function(){if(!this._alreadyInitialized||!this.open)return N.promise;this._fadeInDeferred&&this._fadeInDeferred.cancel();var b;this._fadeOutDeferred=new k(r.hitch(this,function(){b.stop();delete this._fadeOutDeferred}));this._fadeOutDeferred.then(void 0,O);this._fadeOutDeferred.then(r.hitch(this,"onHide"));var d=this._fadeOutDeferred.promise;b=c.fadeOut({node:this.domNode,duration:this.duration,
onEnd:r.hitch(this,function(){this.domNode.style.display="none";J.hide(this);this._fadeOutDeferred.resolve(!0);delete this._fadeOutDeferred})}).play();this._scrollConnected&&(this._scrollConnected=!1);for(var e;e=this._modalconnects.pop();)e.remove();this._relativePosition&&delete this._relativePosition;this._set("open",!1);return d},resize:function(b){if("none"!=this.domNode.style.display){this._checkIfSingleChild();if(!b){this._shrunk&&(this._singleChild&&"undefined"!=typeof this._singleChildOriginalStyle&&
(this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,delete this._singleChildOriginalStyle),p.forEach([this.domNode,this.containerNode,this.titleBar,this.actionBarNode],function(b){b&&e.set(b,{position:"static",width:"auto",height:"auto"})}),this.domNode.style.position="absolute");var c=w.getBox(this.ownerDocument);c.w*=this.maxRatio;c.h*=this.maxRatio;var d=g.position(this.domNode);this._shrunk=!1;d.w>=c.w&&(b={w:c.w},g.setMarginBox(this.domNode,b),d=g.position(this.domNode),this._shrunk=
!0);d.h>=c.h&&(b||(b={w:d.w}),b.h=c.h,this._shrunk=!0);b&&(b.w||(b.w=d.w),b.h||(b.h=d.h))}if(b){g.setMarginBox(this.domNode,b);c=[];this.titleBar&&c.push({domNode:this.titleBar,region:"top"});this.actionBarNode&&c.push({domNode:this.actionBarNode,region:"bottom"});d={domNode:this.containerNode,region:"center"};c.push(d);var f=P.marginBox2contentBox(this.domNode,b);P.layoutChildren(this.domNode,f,c);this._singleChild?(c=P.marginBox2contentBox(this.containerNode,d),this._singleChild.resize({w:c.w,h:c.h})):
(this.containerNode.style.overflow="auto",this._layoutChildren())}else this._layoutChildren();t("touch")||b||this._position()}},_layoutChildren:function(){p.forEach(this.getChildren(),function(b){b.resize&&b.resize()})},destroy:function(){this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred&&this._fadeOutDeferred.cancel();this._moveable&&this._moveable.destroy();for(var b;b=this._modalconnects.pop();)b.remove();J.hide(this);this.inherited(arguments)}});t("dojo-bidi")&&(A=l("dijit._DialogBase",
A,{_setTitleAttr:function(b){this._set("title",b);this.titleNode.innerHTML=b;this.applyTextDir(this.titleNode)},_setTextDirAttr:function(b){this._created&&this.textDir!=b&&(this._set("textDir",b),this.set("title",this.title))}}));var M=l("dijit.Dialog",[I,A],{});M._DialogBase=A;var J=M._DialogLevelManager={_beginZIndex:950,show:function(b,c){K[K.length-1].focus=B.curNode;var d=K[K.length-1].dialog?K[K.length-1].zIndex+2:M._DialogLevelManager._beginZIndex;e.set(b.domNode,"zIndex",d);G.show(c,d-1);
K.push({dialog:b,underlayAttrs:c,zIndex:d})},hide:function(b){if(K[K.length-1].dialog==b){K.pop();var c=K[K.length-1];1==K.length?G.hide():G.show(c.underlayAttrs,c.zIndex-1);if(b.refocus&&(b=c.focus,!c.dialog||b&&h.isDescendant(b,c.dialog.domNode)||(c.dialog._getFocusItems(),b=c.dialog._firstFocusItem),b))try{b.focus()}catch(Y){}}else c=p.indexOf(p.map(K,function(b){return b.dialog}),b),-1!=c&&K.splice(c,1)},isTop:function(b){return K[K.length-1].dialog==b}},K=M._dialogStack=[{dialog:null,focus:null,
underlayAttrs:null}];B.watch("curNode",function(b,c,d){b=K[K.length-1].dialog;if(d&&b&&!b._fadeOutDeferred&&d.ownerDocument==b.ownerDocument){do if(d==b.domNode||q.contains(d,"dijitPopup"))return;while(d=d.parentNode);b.focus()}});t("dijit-legacy-requires")&&u(0,function(){m(["dijit/TooltipDialog"])});return M})},"dojo/dnd/Moveable":function(){define("dojo/dnd/Moveable","../_base/array ../_base/declare ../_base/lang ../dom ../dom-class ../Evented ../has ../on ../topic ../touch ./common ./Mover ../_base/window".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r){function v(b,c){"touchAction"in document.body.style?u="touchAction":"msTouchAction"in document.body.style&&(u="msTouchAction");t=function(b,c){b.style[u]=c};t(b,c)}var u,t=function(){};q("touch-action")&&(t=v);return p("dojo.dnd.Moveable",[h],{handle:"",delay:0,skip:!1,constructor:function(b,e){this.node=l.byId(b);t(this.node,"none");e||(e={});(this.handle=e.handle?l.byId(e.handle):null)||(this.handle=this.node);this.delay=0<e.delay?e.delay:0;this.skip=e.skip;this.mover=
e.mover?e.mover:d;this.events=[g(this.handle,c.press,f.hitch(this,"onMouseDown")),g(this.handle,"dragstart",f.hitch(this,"onSelectStart")),g(this.handle,"selectstart",f.hitch(this,"onSelectStart"))]},markupFactory:function(b,c,d){return new d(c,b)},destroy:function(){m.forEach(this.events,function(b){b.remove()});t(this.node,"");this.events=this.node=this.handle=null},onMouseDown:function(d){if(!this.skip||!b.isFormElement(d)){if(this.delay)this.events.push(g(this.handle,c.move,f.hitch(this,"onMouseMove")),
g(this.handle.ownerDocument,c.release,f.hitch(this,"onMouseUp"))),this._lastX=d.pageX,this._lastY=d.pageY;else this.onDragDetected(d);d.stopPropagation();d.preventDefault()}},onMouseMove:function(b){if(Math.abs(b.pageX-this._lastX)>this.delay||Math.abs(b.pageY-this._lastY)>this.delay)this.onMouseUp(b),this.onDragDetected(b);b.stopPropagation();b.preventDefault()},onMouseUp:function(b){for(var c=0;2>c;++c)this.events.pop().remove();b.stopPropagation();b.preventDefault()},onSelectStart:function(c){this.skip&&
b.isFormElement(c)||(c.stopPropagation(),c.preventDefault())},onDragDetected:function(b){new this.mover(this.node,b,this)},onMoveStart:function(b){e.publish("/dnd/move/start",b);k.add(r.body(),"dojoMove");k.add(this.node,"dojoMoveItem")},onMoveStop:function(b){e.publish("/dnd/move/stop",b);k.remove(r.body(),"dojoMove");k.remove(this.node,"dojoMoveItem")},onFirstMove:function(){},onMove:function(b,c){this.onMoving(b,c);var d=b.node.style;d.left=c.l+"px";d.top=c.t+"px";this.onMoved(b,c)},onMoving:function(){},
onMoved:function(){}})})},"dojo/dnd/common":function(){define("dojo/dnd/common",["../sniff","../_base/kernel","../_base/lang","../dom"],function(m,p,f,l){var k=f.getObject("dojo.dnd",!0);k.getCopyKeyState=function(f){return f[m("mac")?"metaKey":"ctrlKey"]};k._uniqueId=0;k.getUniqueId=function(){var f;do f=p._scopeName+"Unique"+ ++k._uniqueId;while(l.byId(f));return f};k._empty={};k.isFormElement=function(f){f=f.target;3==f.nodeType&&(f=f.parentNode);return 0<=" a button textarea input select option ".indexOf(" "+
f.tagName.toLowerCase()+" ")};return k})},"dojo/dnd/Mover":function(){define("dojo/dnd/Mover","../_base/array ../_base/declare ../_base/lang ../sniff ../_base/window ../dom ../dom-geometry ../dom-style ../Evented ../on ../touch ./common ./autoscroll".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d,r){return p("dojo.dnd.Mover",[e],{constructor:function(d,e,g){function k(b){b.preventDefault();b.stopPropagation()}this.node=h.byId(d);this.marginBox={l:e.pageX,t:e.pageY};this.mouseButton=e.button;e=this.host=
g;d=d.ownerDocument;this.events=[c(d,b.move,f.hitch(this,"onFirstMove")),c(d,b.move,f.hitch(this,"onMouseMove")),c(d,b.release,f.hitch(this,"onMouseUp")),c(d,"dragstart",k),c(d.body,"selectstart",k)];r.autoScrollStart(d);if(e&&e.onMoveStart)e.onMoveStart(this)},onMouseMove:function(b){r.autoScroll(b);var c=this.marginBox;this.host.onMove(this,{l:c.l+b.pageX,t:c.t+b.pageY},b);b.preventDefault();b.stopPropagation()},onMouseUp:function(b){(l("webkit")&&l("mac")&&2==this.mouseButton?0==b.button:this.mouseButton==
b.button)&&this.destroy();b.preventDefault();b.stopPropagation()},onFirstMove:function(b){var c=this.node.style,d,e=this.host;switch(c.position){case "relative":case "absolute":d=Math.round(parseFloat(c.left))||0;c=Math.round(parseFloat(c.top))||0;break;default:c.position="absolute";c=q.getMarginBox(this.node);d=k.doc.body;var f=g.getComputedStyle(d),h=q.getMarginBox(d,f),f=q.getContentBox(d,f);d=c.l-(f.l-h.l);c=c.t-(f.t-h.t)}this.marginBox.l=d-this.marginBox.l;this.marginBox.t=c-this.marginBox.t;
if(e&&e.onFirstMove)e.onFirstMove(this,b);this.events.shift().remove()},destroy:function(){m.forEach(this.events,function(b){b.remove()});var b=this.host;if(b&&b.onMoveStop)b.onMoveStop(this);this.events=this.node=this.host=null}})})},"dojo/dnd/autoscroll":function(){define("dojo/dnd/autoscroll","../_base/lang ../sniff ../_base/window ../dom-geometry ../dom-style ../window".split(" "),function(m,p,f,l,k,h){var q={};m.setObject("dojo.dnd.autoscroll",q);q.getViewport=h.getBox;q.V_TRIGGER_AUTOSCROLL=
32;q.H_TRIGGER_AUTOSCROLL=32;q.V_AUTOSCROLL_VALUE=16;q.H_AUTOSCROLL_VALUE=16;var g,e=f.doc,c=Infinity,b=Infinity;q.autoScrollStart=function(d){e=d;g=h.getBox(e);d=f.body(e).parentNode;c=Math.max(d.scrollHeight-g.h,0);b=Math.max(d.scrollWidth-g.w,0)};q.autoScroll=function(d){var k=g||h.getBox(e),l=f.body(e).parentNode,m=0,t=0;d.clientX<q.H_TRIGGER_AUTOSCROLL?m=-q.H_AUTOSCROLL_VALUE:d.clientX>k.w-q.H_TRIGGER_AUTOSCROLL&&(m=Math.min(q.H_AUTOSCROLL_VALUE,b-l.scrollLeft));d.clientY<q.V_TRIGGER_AUTOSCROLL?
t=-q.V_AUTOSCROLL_VALUE:d.clientY>k.h-q.V_TRIGGER_AUTOSCROLL&&(t=Math.min(q.V_AUTOSCROLL_VALUE,c-l.scrollTop));window.scrollBy(m,t)};q._validNodes={div:1,p:1,td:1};q._validOverflow={auto:1,scroll:1};q.autoScrollNodes=function(b){for(var c,d,e,g,h,m=0,y=0,z=b.target;z;){if(1==z.nodeType&&z.tagName.toLowerCase()in q._validNodes){e=k.getComputedStyle(z);h=e.overflowX.toLowerCase()in q._validOverflow;g=e.overflowY.toLowerCase()in q._validOverflow;if(h||g)c=l.getContentBox(z,e),d=l.position(z,!0);if(h){e=
Math.min(q.H_TRIGGER_AUTOSCROLL,c.w/2);h=b.pageX-d.x;if(p("webkit")||p("opera"))h+=f.body().scrollLeft;m=0;0<h&&h<c.w&&(h<e?m=-e:h>c.w-e&&(m=e),z.scrollLeft+=m)}if(g){g=Math.min(q.V_TRIGGER_AUTOSCROLL,c.h/2);e=b.pageY-d.y;if(p("webkit")||p("opera"))e+=f.body().scrollTop;y=0;0<e&&e<c.h&&(e<g?y=-g:e>c.h-g&&(y=g),z.scrollTop+=y)}if(m||y)return}try{z=z.parentNode}catch(B){z=null}}q.autoScroll(b)};return q})},"dojo/dnd/TimedMoveable":function(){define("dojo/dnd/TimedMoveable",["../_base/declare","./Moveable"],
function(m,p){var f=p.prototype.onMove;return m("dojo.dnd.TimedMoveable",p,{timeout:40,constructor:function(f,k){k||(k={});k.timeout&&"number"==typeof k.timeout&&0<=k.timeout&&(this.timeout=k.timeout)},onMoveStop:function(l){l._timer&&(clearTimeout(l._timer),f.call(this,l,l._leftTop));p.prototype.onMoveStop.apply(this,arguments)},onMove:function(l,k){l._leftTop=k;if(!l._timer){var h=this;l._timer=setTimeout(function(){l._timer=null;f.call(h,l,l._leftTop)},this.timeout)}}})})},"dijit/_base/manager":function(){define("dijit/_base/manager",
["dojo/_base/array","dojo/_base/config","dojo/_base/lang","../registry","../main"],function(m,p,f,l,k){var h={};m.forEach("byId getUniqueId findWidgets _destroyAll byNode getEnclosingWidget".split(" "),function(f){h[f]=l[f]});f.mixin(h,{defaultDuration:p.defaultDuration||200});f.mixin(k,h);return k})},"dijit/form/_FormMixin":function(){define("dijit/form/_FormMixin","dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/on dojo/window".split(" "),function(m,p,f,l,k,h){return p("dijit.form._FormMixin",
null,{state:"",_getDescendantFormWidgets:function(f){var g=[];m.forEach(f||this.getChildren(),function(e){"value"in e?g.push(e):g=g.concat(this._getDescendantFormWidgets(e.getChildren()))},this);return g},reset:function(){m.forEach(this._getDescendantFormWidgets(),function(f){f.reset&&f.reset()})},validate:function(){var f=!1;return m.every(m.map(this._getDescendantFormWidgets(),function(g){g._hasBeenBlurred=!0;var e=g.disabled||!g.validate||g.validate();e||f||(h.scrollIntoView(g.containerNode||g.domNode),
g.focus(),f=!0);return e}),function(g){return g})},setValues:function(h){f.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",h)},_setValueAttr:function(f){var g={};m.forEach(this._getDescendantFormWidgets(),function(b){b.name&&(g[b.name]||(g[b.name]=[])).push(b)});for(var e in g)if(g.hasOwnProperty(e)){var c=g[e],b=l.getObject(e,!1,f);void 0!==b&&(b=[].concat(b),"boolean"==typeof c[0].checked?m.forEach(c,function(c){c.set("value",
-1!=m.indexOf(b,c._get("value")))}):c[0].multiple?c[0].set("value",b):m.forEach(c,function(c,e){c.set("value",b[e])}))}},getValues:function(){f.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_getValueAttr:function(){var f={};m.forEach(this._getDescendantFormWidgets(),function(g){var e=g.name;if(e&&!g.disabled){var c=g.get("value");"boolean"==typeof g.checked?/Radio/.test(g.declaredClass)?!1!==c?l.setObject(e,c,f):(c=l.getObject(e,
!1,f),void 0===c&&l.setObject(e,null,f)):(g=l.getObject(e,!1,f),g||(g=[],l.setObject(e,g,f)),!1!==c&&g.push(c)):(g=l.getObject(e,!1,f),"undefined"!=typeof g?l.isArray(g)?g.push(c):l.setObject(e,[g,c],f):l.setObject(e,c,f))}});return f},isValid:function(){return""==this.state},onValidStateChange:function(){},_getState:function(){var f=m.map(this._descendants,function(g){return g.get("state")||""});return 0<=m.indexOf(f,"Error")?"Error":0<=m.indexOf(f,"Incomplete")?"Incomplete":""},disconnectChildren:function(){},
connectChildren:function(f){this._descendants=this._getDescendantFormWidgets();m.forEach(this._descendants,function(g){g._started||g.startup()});f||this._onChildChange()},_onChildChange:function(f){f&&"state"!=f&&"disabled"!=f||this._set("state",this._getState());f&&"value"!=f&&"disabled"!=f&&"checked"!=f||(this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;this._set("value",this.get("value"))},10))},startup:function(){this.inherited(arguments);
this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");this.state=this._getState();var f=this;this.own(k(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(g){g.target!=f.domNode&&f._onChildChange(g.type.replace("attrmodified-",""))}));this.watch("state",function(g,e,c){this.onValidStateChange(""==c)})},destroy:function(){this.inherited(arguments)}})})},"dijit/_DialogMixin":function(){define("dijit/_DialogMixin",
["dojo/_base/declare","./a11y"],function(m,p){return m("dijit._DialogMixin",null,{actionBarTemplate:"",execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(){var f=p._getTabNavigable(this.domNode);this._firstFocusItem=f.lowest||f.first||this.closeButtonNode||this.domNode;this._lastFocusItem=f.last||f.highest||this._firstFocusItem}})})},"dijit/DialogUnderlay":function(){define("dijit/DialogUnderlay",
"dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-style dojo/on dojo/window ./_Widget ./_TemplatedMixin ./BackgroundIframe ./Viewport ./main".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d){var r=m("dijit.DialogUnderlay",[g,e],{templateString:"\x3cdiv class\x3d'dijitDialogUnderlayWrapper'\x3e\x3cdiv class\x3d'dijitDialogUnderlay' tabIndex\x3d'-1' data-dojo-attach-point\x3d'node'\x3e\x3c/div\x3e\x3c/div\x3e",dialogId:"","class":"",_modalConnects:[],_setDialogIdAttr:function(b){l.set(this.node,
"id",b+"_underlay");this._set("dialogId",b)},_setClassAttr:function(b){this.node.className="dijitDialogUnderlay "+b;this._set("class",b)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.own(h(this.domNode,"keydown",p.hitch(this,"_onKeyDown")));this.inherited(arguments)},layout:function(){var b=this.node.style,c=this.domNode.style;c.display="none";var d=q.getBox(this.ownerDocument);c.top=d.t+"px";c.left=d.l+"px";b.width=d.w+"px";b.height=d.h+"px";c.display="block"},show:function(){this.domNode.style.display=
"block";this.open=!0;this.layout();this.bgIframe=new c(this.domNode);var d=q.get(this.ownerDocument);this._modalConnects=[b.on("resize",p.hitch(this,"layout")),h(d,"scroll",p.hitch(this,"layout"))]},hide:function(){this.bgIframe.destroy();delete this.bgIframe;for(this.domNode.style.display="none";this._modalConnects.length;)this._modalConnects.pop().remove();this.open=!1},destroy:function(){for(;this._modalConnects.length;)this._modalConnects.pop().remove();this.inherited(arguments)},_onKeyDown:function(){}});
r.show=function(b,c){var e=r._singleton;!e||e._destroyed?e=d._underlay=r._singleton=new r(b):b&&e.set(b);k.set(e.domNode,"zIndex",c);e.open||e.show()};r.hide=function(){var b=r._singleton;b&&!b._destroyed&&b.hide()};return r})},"esri/Credential":function(){define("esri/Credential",["dojo/_base/declare","dojo/has","./kernel","./IdentityManagerBase"],function(m,p,f,l){m=m(l.Credential,{});p("extend-esri")&&(f.Credential=m);return m})},"esri/IdentityManagerBase":function(){define("esri/IdentityManagerBase",
"dojo/_base/declare dojo/_base/config dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/_base/url dojo/sniff dojo/cookie dojo/io-query dojo/on dojo/regexp ./kernel ./config ./lang ./ServerInfo ./urlUtils ./deferredUtils ./request ./Evented ./OAuthCredential ./arcgis/OAuthInfo".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x,w,y,z,B,A){var C={},F=function(b){var c=(new q(b.owningSystemUrl)).host;b=(new q(b.server)).host;var d=/.+\.arcgis\.com$/i;return d.test(c)&&d.test(b)},
E=function(b,c){return!!(F(b)&&c&&l.some(c,function(c){return c.test(b.server)}))},H,D=m(z,{declaredClass:"esri.IdentityManagerBase",constructor:function(){this._portalConfig=f.getObject("esriGeowConfig");this.serverInfos=[];this.oAuthInfos=[];this.credentials=[];this._soReqs=[];this._xoReqs=[];this._portals=[];this._getOAuthHash();b(window,"pageshow",f.hitch(this,this._pageShowHandler))},defaultOAuthInfo:null,defaultTokenValidity:60,tokenValidity:null,signInPage:null,useSignInPage:!0,normalizeWebTierAuth:!1,
_busy:null,_rejectOnPersistedPageShow:!1,_oAuthHash:null,_gwTokenUrl:"/sharing/generateToken",_agsRest:"/rest/services",_agsPortal:/\/sharing(\/|$)/i,_agsAdmin:/(https?:\/\/[^\/]+\/[^\/]+)\/admin\/?(\/.*)?$/i,_adminSvcs:/\/rest\/admin\/services(\/|$)/i,_gwDomains:[{regex:/^https?:\/\/www\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/(?:dev|[a-z\d-]+\.mapsdev)\.arcgis\.com/i,customBaseUrl:"mapsdev.arcgis.com",tokenServiceUrl:"https://dev.arcgis.com/sharing/generateToken"},
{regex:/^https?:\/\/(?:devext|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,customBaseUrl:"mapsdevext.arcgis.com",tokenServiceUrl:"https://devext.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/(?:qaext|[a-z\d-]+\.mapsqa)\.arcgis\.com/i,customBaseUrl:"mapsqa.arcgis.com",tokenServiceUrl:"https://qaext.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/[a-z\d-]+\.maps\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"}],_legacyFed:[],_regexSDirUrl:/http.+\/rest\/services\/?/ig,
_regexServerType:/(\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|MapServer|MobileServer|NAServer|NetworkDiagramServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer)).*/ig,_gwUser:/http.+\/users\/([^\/]+)\/?.*/i,_gwItem:/http.+\/items\/([^\/]+)\/?.*/i,_gwGroup:/http.+\/groups\/([^\/]+)\/?.*/i,_errorCodes:[499,498,403,401],_rePortalTokenSvc:/\/sharing(\/rest)?\/generatetoken/i,
_publicUrls:[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],_createDefaultOAuthInfo:!0,_hasTestedIfAppIsOnPortal:!1,registerServers:function(b){var c=this.serverInfos;c?(b=l.filter(b,function(b){return!this.findServerInfo(b.server)},this),this.serverInfos=c.concat(b)):this.serverInfos=b;l.forEach(b,function(b){b.owningSystemUrl&&this._portals.push(b.owningSystemUrl);if(b.hasPortal){this._portals.push(b.server);var c=v.defaults.io.corsEnabledServers,d=this._getOrigin(b.tokenServiceUrl);
x.canUseXhr(b.server)||c.push(b.server.replace(/^https?:\/\//i,""));x.canUseXhr(d)||c.push(d.replace(/^https?:\/\//i,""))}},this)},registerOAuthInfos:function(b){var c=this.oAuthInfos;c?(b=l.filter(b,function(b){return!this.findOAuthInfo(b.portalUrl)},this),this.oAuthInfos=c.concat(b)):this.oAuthInfos=b},registerToken:function(b){b=u.mixin({},b);var c=this._sanitizeUrl(b.server),d=this.findServerInfo(c),e=!0,g;d||(d=new t,d.server=this._getServerInstanceRoot(c),d.tokenServiceUrl=this._getTokenSvcUrl(c),
d.hasPortal=!0,this.registerServers([d]));(g=this.findCredential(c,b.userId))?(delete b.server,f.mixin(g,b),e=!1):(g=new H({userId:b.userId,server:d.server,token:b.token,expires:b.expires,ssl:b.ssl,scope:this._isServerRsrc(c)?"server":"portal"}),g.resources=[c],this.credentials.push(g));g.onTokenChange(!1);e||g.refreshServerTokens()},toJson:function(){return u.fixJson({serverInfos:l.map(this.serverInfos,function(b){return b.toJson()}),oAuthInfos:l.map(this.oAuthInfos,function(b){return b.toJson()}),
credentials:l.map(this.credentials,function(b){return b.toJson()})})},initialize:function(b){if(b){f.isString(b)&&(b=h.fromJson(b));var c=b.serverInfos,d=b.oAuthInfos;b=b.credentials;if(c){var e=[];l.forEach(c,function(b){b.server&&b.tokenServiceUrl&&e.push(b.declaredClass?b:new t(b))});e.length&&this.registerServers(e)}if(d){var g=[];l.forEach(d,function(b){b.appId&&g.push(b.declaredClass?b:new A(b))});g.length&&this.registerOAuthInfos(g)}b&&l.forEach(b,function(b){b.userId&&b.server&&b.token&&b.expires&&
b.expires>(new Date).getTime()&&(b=b.declaredClass?b:new H(b),b.onTokenChange(),this.credentials.push(b))},this)}},findServerInfo:function(b){var c;b=this._sanitizeUrl(b);l.some(this.serverInfos,function(d){this._hasSameServerInstance(d.server,b)&&(c=d);return!!c},this);return c},findOAuthInfo:function(b){var c;b=this._sanitizeUrl(b);l.some(this.oAuthInfos,function(d){this._hasSameServerInstance(d.portalUrl,b)&&(c=d);return!!c},this);return c},findCredential:function(b,c){var d,e;b=this._sanitizeUrl(b);
e=this._isServerRsrc(b)?"server":"portal";c?l.some(this.credentials,function(g){this._hasSameServerInstance(g.server,b)&&c===g.userId&&g.scope===e&&(d=g);return!!d},this):l.some(this.credentials,function(c){this._hasSameServerInstance(c.server,b)&&-1!==this._getIdenticalSvcIdx(b,c)&&c.scope===e&&(d=c);return!!d},this);return d},getCredential:function(b,c){var d,g,h=!0;u.isDefined(c)&&(f.isObject(c)?(d=!!c.token,g=c.error,h=!1!==c.prompt):d=c);b=this._sanitizeUrl(b);var l=new k(w._dfdCanceller),q=
this._isAdminResource(b),r=d&&this._doPortalSignIn(b)?this._getEsriAuthCookie():null;if((d=d?this.findCredential(b):null)&&g&&498===g.code)d.destroy(),r&&r.token===c.token&&(e("esri_auth",null,{expires:-1,path:"/",domain:document.domain}),u.endsWith(window.location.hostname,".arcgis.com")&&e("esri_auth",null,{expires:-1,path:"/",domain:"arcgis.com"}));else if(r||d)return b=Error("You are currently signed in as: '"+(r&&r.email||d&&d.userId)+"'. You do not have access to this resource: "+b),b.code=
"IdentityManagerBase.1",b.httpCode=g&&g.httpCode,b.messageCode=g?g.messageCode:null,b.subcode=g?g.subcode:null,b.details=g?g.details:null,b.log=!!p.isDebug,l.errback(b),l;if(g=this._findCredential(b,c))return l.callback(g),l;if(g=this.findServerInfo(b))!g.hasServer&&this._isServerRsrc(b)&&(g._restInfoDfd=this._getTokenSvcUrl(b,!0),g.hasServer=!0);else{r=this._getTokenSvcUrl(b);if(!r)return b=Error("Unknown resource - could not find token service endpoint."),b.code="IdentityManagerBase.2",b.log=!!p.isDebug,
l.errback(b),l;g=new t;g.server=this._getServerInstanceRoot(b);f.isString(r)?(g.tokenServiceUrl=r,g.hasPortal=!0):(g._restInfoDfd=r,g.hasServer=!0);this.registerServers([g])}h&&g.hasPortal&&void 0===g._selfReq&&!this._findOAuthInfo(b)&&(g._selfReq={owningTenant:c&&c.owningTenant,selfDfd:this._getPortalSelf(g.tokenServiceUrl.replace(this._rePortalTokenSvc,"/sharing/rest/portals/self"),b)});return this._enqueue(b,g,c,l,q)},getResourceName:function(b){return this._isRESTService(b)?b.replace(this._regexSDirUrl,
"").replace(this._regexServerType,"")||"":this._gwUser.test(b)&&b.replace(this._gwUser,"$1")||this._gwItem.test(b)&&b.replace(this._gwItem,"$1")||this._gwGroup.test(b)&&b.replace(this._gwGroup,"$1")||""},generateToken:function(b,c,d){var e,g,h,k,l,m,u=this._rePortalTokenSvc.test(b.tokenServiceUrl),t=new q(window.location.href.toLowerCase()),v=this._getEsriAuthCookie(),w,A=!c;k=b.shortLivedTokenValidity;var G;c&&(G=r.id.tokenValidity||k||r.id.defaultTokenValidity,G>k&&(G=k));d&&(e=d.isAdmin,g=d.serverUrl,
h=d.token,m=d.ssl,b.customParameters=d.customParameters);e?k=b.adminTokenServiceUrl:(k=b.tokenServiceUrl,l=new q(k.toLowerCase()),v&&(w=(w=v.auth_tier)&&w.toLowerCase()),("web"===w||b.webTierAuth)&&d&&d.serverUrl&&!m&&"http"===t.scheme&&(x.hasSameOrigin(t.uri,k,!0)||"https"===l.scheme&&t.host===l.host&&"7080"===t.port&&"7443"===l.port)&&(k=k.replace(/^https:/i,"http:").replace(/:7443/i,":7080")),A&&u&&(k=k.replace(/\/rest/i,"")));e=f.mixin({url:k,content:f.mixin({request:"getToken",username:c&&c.username,
password:c&&c.password,serverUrl:g,token:h,expiration:G,referer:e||u?window.location.host:null,client:e?"referer":null,f:"json"},b.customParameters),handleAs:"json",callbackParamName:A?"callback":void 0},d&&d.ioArgs);d={usePost:!A,disableIdentityLookup:!0,useProxy:this._useProxy(b,d)};u||(e.withCredentials=!1);u=y(e,d);u.addCallback(function(d){if(!d||!d.token)return d=Error("Unable to generate token"),d.code="IdentityManagerBase.3",d.log=!!p.isDebug,d;var e=b.server;C[e]||(C[e]={});c&&(C[e][c.username]=
c.password);d.validity=G;return d});u.addErrback(function(b){});return u},isBusy:function(){return!!this._busy},checkSignInStatus:function(b){var c=new k;this.checkAppAccess(b,"").then(function(b){c.resolve(b.credential)}).catch(function(b){c.reject(b)});return c},checkAppAccess:function(b,c,d){var e=this,g=!1;return this.getCredential(b,{prompt:!1}).then(function(f){var h,k={f:"json"};if("portal"===f.scope)if(c&&(e._doPortalSignIn(b,!0)||d&&d.force))h=f.server+"/sharing/rest/oauth2/validateAppAccess",
k.client_id=c;else if(f.token)h=f.server+"/sharing/rest";else return{credential:f};else if(f.token)h=f.server+"/rest/services";else return{credential:f};f.token&&(k.token=f.token);return y({url:h,content:k,callbackParamName:"callback"},{disableIdentityLookup:!0}).then(function(b){if(!1===b.valid)throw b=Error("You are currently signed in as: '"+f.userId+"'.  You do not have access to this app: '"+c+"'."),b.code="IdentityManagerBase.1",b.log=!!p.isDebug,b;g=!!b.viewOnlyUserTypeApp;return{credential:f}}).catch(function(b){if("IdentityManagerBase.1"===
b.code||400===b.code)throw b;if(498===b.code)throw f.destroy(),b=Error("User is not signed in."),b.code="IdentityManagerBase.6",b.log=!!p.isDebug,b;return{credential:f}})}).then(function(b){return{credential:b.credential,viewOnly:g}})},setRedirectionHandler:function(b){this._redirectFunc=b},setProtocolErrorHandler:function(b){this._protocolFunc=b},signIn:function(){},oAuthSignIn:function(){},onCredentialCreate:function(){},onCredentialsDestroy:function(){},destroyCredentials:function(){if(this.credentials){var b=
this.credentials.slice();l.forEach(b,function(b){b.destroy()})}this.onCredentialsDestroy()},_getOAuthHash:function(){var b=window.location.hash;if(b){"#"===b.charAt(0)&&(b=b.substring(1));var b=c.queryToObject(b),d=!1;b.access_token&&b.expires_in&&b.state&&b.hasOwnProperty("username")?(b.state=h.fromJson(b.state),this._oAuthHash=b,d=!0):b.error&&b.error_description&&"access_denied"===b.error&&(d=!0);d&&(window.location.hash=b.state&&b.state.hash||"")}},_pageShowHandler:function(b){b.persisted&&this.isBusy()&&
this._rejectOnPersistedPageShow&&(b=Error("ABORTED"),b.code="IdentityManager.2",b.log=!!p.isDebug,this._errbackFunc(b))},_findCredential:function(b,c){var d=-1,e,g,f,h=c&&c.token;c=c&&c.resource;var k=this._isServerRsrc(b)?"server":"portal",q=l.filter(this.credentials,function(c){return this._hasSameServerInstance(c.server,b)&&c.scope===k},this);b=c||b;if(q.length)if(1===q.length)if(c=q[0],g=(e=(f=this.findServerInfo(c.server))&&f.owningSystemUrl)&&this.findCredential(e,c.userId),d=this._getIdenticalSvcIdx(b,
c),h)-1!==d&&(c.resources.splice(d,1),this._removeResource(b,g));else return-1===d&&c.resources.push(b),this._addResource(b,g),c;else{var r,m;l.some(q,function(c){m=this._getIdenticalSvcIdx(b,c);return-1!==m?(r=c,g=(e=(f=this.findServerInfo(r.server))&&f.owningSystemUrl)&&this.findCredential(e,r.userId),d=m,!0):!1},this);if(h)r&&(r.resources.splice(d,1),this._removeResource(b,g));else if(r)return this._addResource(b,g),r}},_findOAuthInfo:function(b){var c=this.findOAuthInfo(b);c||l.some(this.oAuthInfos,
function(d){this._isIdProvider(d.portalUrl,b)&&(c=d);return!!c},this);return c},_addResource:function(b,c){c&&-1===this._getIdenticalSvcIdx(b,c)&&c.resources.push(b)},_removeResource:function(b,c){var d=-1;c&&(d=this._getIdenticalSvcIdx(b,c),-1<d&&c.resources.splice(d,1))},_useProxy:function(b,c){return c&&c.isAdmin&&!x.hasSameOrigin(b.adminTokenServiceUrl,window.location.href)||!this._isPortalDomain(b.tokenServiceUrl)&&10.1==b.currentVersion&&!x.hasSameOrigin(b.tokenServiceUrl,window.location.href)},
_getOrigin:function(b){b=new q(b);return b.scheme+"://"+b.host+(u.isDefined(b.port)?":"+b.port:"")},_getServerInstanceRoot:function(b){var c=b.toLowerCase(),d=c.indexOf(this._agsRest);-1===d&&this._isAdminResource(b)&&(d=this._agsAdmin.test(b)?b.replace(this._agsAdmin,"$1").length:b.search(this._adminSvcs));-1===d&&(d=c.indexOf("/sharing"));-1===d&&"/"===c.substr(-1)&&(d=c.length-1);return-1<d?b.substring(0,d):b},_hasSameServerInstance:function(b,c){"/"===b.substr(-1)&&(b=b.slice(0,-1));b=b.toLowerCase();
c=this._getServerInstanceRoot(c).toLowerCase();b=this._normalizeAGOLorgDomain(b);c=this._normalizeAGOLorgDomain(c);b=b.substr(b.indexOf(":"));c=c.substr(c.indexOf(":"));return b===c},_normalizeAGOLorgDomain:function(b){var c=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,d=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,e=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;c.test(b)?b=b.replace(c,"https://www.arcgis.com"):d.test(b)?b=b.replace(d,"https://devext.arcgis.com"):
e.test(b)&&(b=b.replace(e,"https://qaext.arcgis.com"));return b},_sanitizeUrl:function(b){var c=(v.defaults.io.proxyUrl||"").toLowerCase(),d=c?b.toLowerCase().indexOf(c+"?"):-1;-1!==d&&(b=b.substring(d+c.length+1));b=x.normalize(b);return x.urlToObject(b).path},_isRESTService:function(b){return-1<b.indexOf(this._agsRest)},_isAdminResource:function(b){return this._agsAdmin.test(b)||this._adminSvcs.test(b)},_isServerRsrc:function(b){return this._isRESTService(b)||this._isAdminResource(b)},_isIdenticalService:function(b,
c){var d;this._isRESTService(b)&&this._isRESTService(c)?(b=this._getSuffix(b).toLowerCase(),c=this._getSuffix(c).toLowerCase(),d=b===c,d||(d=/(.*)\/(MapServer|FeatureServer).*/ig,d=b.replace(d,"$1")===c.replace(d,"$1"))):this._isAdminResource(b)&&this._isAdminResource(c)?d=!0:this._isServerRsrc(b)||this._isServerRsrc(c)||!this._isPortalDomain(b)||(d=!0);return d},_isPortalDomain:function(b){var c=new q(b.toLowerCase()),d=this._portalConfig;b=l.some(this._gwDomains,function(b){return b.regex.test(c.uri)});
!b&&d&&(b=this._hasSameServerInstance(this._getServerInstanceRoot(d.restBaseUrl),c.uri));b||(!this._arcgisUrl&&(d=f.getObject("esri.arcgis.utils.arcgisUrl"))&&(this._arcgisUrl=(new q(d)).authority),this._arcgisUrl&&(b=this._arcgisUrl.toLowerCase()===c.authority));b||(b=l.some(this._portals,function(b){return this._hasSameServerInstance(b,c.uri)},this));return b=b||this._agsPortal.test(c.path)},_isIdProvider:function(b,c){var d=-1,e=-1;l.forEach(this._gwDomains,function(g,f){-1===d&&g.regex.test(b)&&
(d=f);-1===e&&g.regex.test(c)&&(e=f)});var g=!1;if(-1<d&&-1<e)if(0===d||4===d){if(0===e||4===e)g=!0}else if(1===d){if(1===e||2===e)g=!0}else 2===d?2===e&&(g=!0):3===d&&3===e&&(g=!0);if(!g){var f=this.findServerInfo(c),h=f&&f.owningSystemUrl;h&&F(f)&&this._isPortalDomain(h)&&this._isIdProvider(b,h)&&(g=!0)}return g},_isPublic:function(b){b=this._sanitizeUrl(b);return l.some(this._publicUrls,function(c){return c.test(b)})},_getIdenticalSvcIdx:function(b,c){var d=-1;l.some(c.resources,function(c,e){return this._isIdenticalService(b,
c)?(d=e,!0):!1},this);return d},_getSuffix:function(b){return b.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1")},_getTokenSvcUrl:function(b){var c,d;if(this._isRESTService(b)||this._isAdminResource(b))return d=this._getServerInstanceRoot(b),c=d+"/admin/generateToken",b=d+"/rest/info",d=y({url:b,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),d.adminUrl_=c,d;if(this._isPortalDomain(b)){var e="";l.some(this._gwDomains,function(c){c.regex.test(b)&&(e=c.tokenServiceUrl);
return!!e});e||l.some(this._portals,function(c){this._hasSameServerInstance(c,b)&&(e=c+this._gwTokenUrl);return!!e},this);e||(c=b.toLowerCase().indexOf("/sharing"),-1!==c&&(e=b.substring(0,c)+this._gwTokenUrl));e||(e=this._getOrigin(b)+this._gwTokenUrl);e&&(c=(new q(b)).port,/^http:\/\//i.test(b)&&"7080"===c&&(e=e.replace(/:7080/i,":7443")),e=e.replace(/http:/i,"https:"));return e}if(-1!==b.toLowerCase().indexOf("premium.arcgisonline.com"))return"https://premium.arcgisonline.com/server/tokens"},_exchangeToken:function(b,
c,d){return y({url:b+"/sharing/rest/oauth2/exchangeToken",content:{f:"json",client_id:c,token:d}},{disableIdentityLookup:!0,usePost:!0}).then(function(b){return b.token})},_getPortalSelf:function(b,c){var d="";l.some(this._gwDomains,function(c){c.regex.test(b)&&(d=c.customBaseUrl);return!!d});if(d)return c=new k,c.resolve({allSSL:!0,currentVersion:"4.4",customBaseUrl:d,portalMode:"multitenant",supportsOAuth:!0}),c;"https:"===window.location.protocol?b=b.replace(/^http:/i,"https:").replace(/:7080/i,
":7443"):/^http:/i.test(c)&&(b=b.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));return y({url:b,content:{f:"json"},handleAs:"json",callbackParamName:"callback"},{crossOrigin:!1,disableIdentityLookup:!0})},_hasPortalSession:function(){return!!this._getEsriAuthCookie()},_getEsriAuthCookie:function(){var b=null;if(e.isSupported()){var c=this._getAllCookies("esri_auth"),d,g,f;for(f=0;f<c.length;f++){g=h.fromJson(c[f]);if(g.portalApp){b=g;break}d?d.push(g):d=[g]}if(!b&&d)for(f=0;f<d.length;f++)if(g=
d[f],g.urlKey&&window.location.hostname===g.urlKey.toLowerCase()+"."+g.customBaseUrl){b=g;break}}b&&(c=null,b.expires&&("number"===typeof b.expires?c=b.expires:"string"===typeof b.expires&&(c=Date.parse(b.expires)),isNaN(c)&&(c=null),b.expires=c),c&&c<(new Date).getTime()&&(b=null));return b},_getAllCookies:function(b){var c=[],e=document.cookie.match(new RegExp("(?:^|; )"+d.escapeString(b)+"\x3d([^;]*)","g"));if(e)for(b=0;b<e.length;b++){var g=e[b],f=g.indexOf("\x3d");-1<f&&(g=g.substring(f+1),c.push(decodeURIComponent(g)))}return c},
_doPortalSignIn:function(b,c){if(e.isSupported()){var d=this._getEsriAuthCookie(),g=this._portalConfig,f=window.location.href,h=this.findServerInfo(b);if((c||this.useSignInPage)&&(g||this._isPortalDomain(f)||d)&&(h?h.hasPortal||h.owningSystemUrl&&this._isPortalDomain(h.owningSystemUrl):this._isPortalDomain(b))&&(this._isIdProvider(f,b)||g&&(this._hasSameServerInstance(this._getServerInstanceRoot(g.restBaseUrl),b)||this._isIdProvider(g.restBaseUrl,b))||x.hasSameOrigin(f,b,!0)))return!0}return!1},_canUsePortalSignInWorkflow:function(b){return this._doPortalSignIn(b)&&
(window===window.top||this._hasPortalSession())},_checkProtocol:function(b,c,d,e){var g=!0;e=e?c.adminTokenServiceUrl:c.tokenServiceUrl;0!==f.trim(e).toLowerCase().indexOf("https:")||0===window.location.href.toLowerCase().indexOf("https:")||v.defaults.io.useCors&&(x.canUseXhr(e)||x.canUseXhr(x.getProxyUrl(!0).path))||(g=this._protocolFunc?!!this._protocolFunc({resourceUrl:b,serverInfo:c}):!1,g||(b=Error("Aborted the Sign-In process to avoid sending password over insecure connection."),b.code="IdentityManagerBase.4",
b.log=!!p.isDebug,d(b)));return g},_enqueue:function(b,c,d,e,g,f){e||(e=new k(w._dfdCanceller));e.resUrl_=b;e.sinfo_=c;e.options_=d;e.admin_=g;e.refresh_=f;this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(b),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(e)):this._xoReqs.push(e):this._doSignIn(e);return e},_doSignIn:function(b){this._busy=b;this._rejectOnPersistedPageShow=!1;var c=this,d=function(d){var e=b.options_&&
b.options_.resource,g=b.resUrl_,f=b.refresh_,h=!1;-1===l.indexOf(c.credentials,d)&&(f&&-1!==l.indexOf(c.credentials,f)?(f.userId=d.userId,f.token=d.token,f.expires=d.expires,f.validity=d.validity,f.ssl=d.ssl,f.creationTime=d.creationTime,h=!0,d=f):c.credentials.push(d));d.resources||(d.resources=[]);d.resources.push(e||g);d.scope=c._isServerRsrc(g)?"server":"portal";d.onTokenChange();var e=c._soReqs,k={};c._soReqs=[];l.forEach(e,function(b){if(!this._isIdenticalService(g,b.resUrl_)){var c=this._getSuffix(b.resUrl_);
k[c]||(k[c]=!0,d.resources.push(b.resUrl_))}},c);b.callback(d);l.forEach(e,function(b){this._hasSameServerInstance(this._getServerInstanceRoot(g),b.resUrl_)?b.callback(d):this._soReqs.push(b)},c);c._busy=b.resUrl_=b.sinfo_=b.refresh_=null;if(!h)c.onCredentialCreate({credential:d});c._soReqs.length?c._doSignIn(c._soReqs.shift()):c._xoReqs.length&&c._doSignIn(c._xoReqs.shift())},e=function(d){b.errback(d);c._busy=b.resUrl_=b.sinfo_=b.refresh_=null;c._soReqs.length?c._doSignIn(c._soReqs.shift()):c._xoReqs.length&&
c._doSignIn(c._xoReqs.shift())},g=function(g,f,h,k){var l=b.sinfo_,q=!b.options_||!1!==b.options_.prompt,r=l.hasPortal&&c._findOAuthInfo(b.resUrl_),m;if(c._canUsePortalSignInWorkflow(b.resUrl_))f=c._getEsriAuthCookie(),g=c._portalConfig,f?(l.webTierAuth||"web"!==(f.auth_tier&&f.auth_tier.toLowerCase())||(l.webTierAuth=!0),m=new H({userId:f.email,server:l.server,token:l.webTierAuth?null:f.token,expires:f.expires}),m.token?b._pendingDfd=c._exchangeToken(m.server,r?r.appId:"arcgisonline",m.token).then(function(b){m.token=
b;d(m)}).catch(function(){d(m)}):d(m)):q?(q="",r=window.location.href,q=c.signInPage?c.signInPage:g?g.baseUrl+g.signin:c._isIdProvider(r,b.resUrl_)?c._getOrigin(r)+"/home/signin.html":l.tokenServiceUrl.replace(c._rePortalTokenSvc,"")+"/home/signin.html",q=q.replace(/http:/i,"https:"),g&&!1===g.useSSL&&(q=q.replace(/https:/i,"http:")),0===r.toLowerCase().replace("https","http").indexOf(q.toLowerCase().replace("https","http"))?(l=Error("Cannot redirect to Sign-In page from within Sign-In page. URL of the resource that triggered this workflow: "+
b.resUrl_),l.code="IdentityManagerBase.5",l.log=!!p.isDebug,e(l)):(c._rejectOnPersistedPageShow=!0,c._redirectFunc?c._redirectFunc({signInPage:q,returnUrlParamName:"returnUrl",returnUrl:r,resourceUrl:b.resUrl_,serverInfo:l}):window.location=q+"?returnUrl\x3d"+window.escape(r))):(l=Error("User is not signed in."),l.code="IdentityManagerBase.6",l.log=!!p.isDebug,e(l));else if(g)d(new H({userId:g,server:l.server,token:h,expires:u.isDefined(k)?Number(k):null,ssl:!!f}));else if(r){var t=r._oAuthCred;t||
(g=new B(r,window.localStorage),f=new B(r,window.sessionStorage),g.isValid()&&f.isValid()?g.expires>f.expires?(t=g,f.destroy()):(t=f,g.destroy()):t=g.isValid()?g:f,r._oAuthCred=t);t.isValid()?(m=new H({userId:t.userId,server:l.server,token:t.token,expires:t.expires,ssl:t.ssl,_oAuthCred:t}),r.appId!==t.appId&&c._doPortalSignIn(b.resUrl_,!0)?b._pendingDfd=c._exchangeToken(m.server,r.appId,m.token).then(function(b){m.token=b;t.token=b;t.save();d(m)}).catch(function(){d(m)}):d(m)):c._oAuthHash&&c._oAuthHash.state.portalUrl===
r.portalUrl?(q=c._oAuthHash,m=new H({userId:q.username,server:l.server,token:q.access_token,expires:(new Date).getTime()+1E3*Number(q.expires_in),ssl:"true"===q.ssl,oAuthState:q.state,_oAuthCred:t}),t.storage=q.persist?window.localStorage:window.sessionStorage,t.token=m.token,t.expires=m.expires,t.userId=m.userId,t.ssl=m.ssl,t.save(),c._oAuthHash=null,d(m)):q?b._pendingDfd=c.oAuthSignIn(b.resUrl_,l,r,b.options_).addCallbacks(d,e):(l=Error("User is not signed in."),l.code="IdentityManagerBase.6",l.log=
!!p.isDebug,e(l))}else q?c._checkProtocol(b.resUrl_,l,e,b.admin_)&&(q=b.options_,b.admin_&&(q=q||{},q.isAdmin=!0),b._pendingDfd=c.signIn(b.resUrl_,l,q).addCallbacks(d,e)):(l=Error("User is not signed in."),l.code="IdentityManagerBase.6",l.log=!!p.isDebug,e(l))},h=function(){var g=b.sinfo_,f=g.owningSystemUrl,h=b.options_,k,q,r,m;h&&(k=h.token,q=h.error,r=h.prompt);(m=c._findCredential(f,{token:k,resource:b.resUrl_}))||l.some(c.credentials,function(b){this._isIdProvider(f,b.server)&&(m=b);return!!m},
c);m?(h=c.findCredential(b.resUrl_,m.userId))?d(h):E(g,c._legacyFed)?(h=m.toJson(),h.server=g.server,h.resources=null,d(new H(h))):(b._pendingDfd=c.generateToken(c.findServerInfo(m.server),null,{serverUrl:b.resUrl_,token:m.token,ssl:m.ssl})).addCallbacks(function(c){d(new H({userId:m.userId,server:g.server,token:c.token,expires:u.isDefined(c.expires)?Number(c.expires):null,ssl:!!c.ssl,isAdmin:b.admin_,validity:c.validity}))},e):(c._busy=null,k&&(b.options_.token=null),(b._pendingDfd=c.getCredential(f.replace(/\/?$/,
"/sharing"),{resource:b.resUrl_,owningTenant:g.owningTenant,token:k,error:q,prompt:r})).addCallbacks(function(d){c._enqueue(b.resUrl_,b.sinfo_,b.options_,b,b.admin_)},function(b){e(b)}))};this._errbackFunc=e;var k=b.sinfo_.owningSystemUrl,q=this._isServerRsrc(b.resUrl_),r=b.sinfo_._restInfoDfd;r?r.addCallbacks(function(d){var e=b.sinfo_;e._restInfoDfd&&(e.adminTokenServiceUrl=e._restInfoDfd.adminUrl_,e._restInfoDfd=null,e.tokenServiceUrl=f.getObject("authInfo.tokenServicesUrl",!1,d)||f.getObject("authInfo.tokenServiceUrl",
!1,d)||f.getObject("tokenServiceUrl",!1,d),e.shortLivedTokenValidity=f.getObject("authInfo.shortLivedTokenValidity",!1,d),e.currentVersion=d.currentVersion,e.owningTenant=d.owningTenant,(d=e.owningSystemUrl=d.owningSystemUrl)&&c._portals.push(d));q&&e.owningSystemUrl?h():g()},function(){b.sinfo_._restInfoDfd=null;var c=Error("Unknown resource - could not find token service endpoint.");c.code="IdentityManagerBase.2";c.log=!!p.isDebug;e(c)}):q&&k?h():b.sinfo_._selfReq?b.sinfo_._selfReq.selfDfd.then(function(d){var e=
{},g,f,h,k;d&&(g=d.user&&d.user.username,e.username=g,e.allSSL=d.allSSL,f=d.supportsOAuth,h=d.currentVersion,"multitenant"===d.portalMode&&(k=d.customBaseUrl));b.sinfo_.webTierAuth=!!g;return g&&c.normalizeWebTierAuth?c.generateToken(b.sinfo_,null,{ssl:e.allSSL}).addBoth(function(b){e.portalToken=b&&b.token;e.tokenExpiration=b&&b.expires;return e}):!g&&f&&4.4<=parseFloat(h)&&!c._canUsePortalSignInWorkflow(b.resUrl_)?c._generateOAuthInfo({portalUrl:b.sinfo_.server,customBaseUrl:k,owningTenant:b.sinfo_._selfReq.owningTenant}).always(function(){return e}):
e}).always(function(c){b.sinfo_._selfReq=null;c?g(c.username,c.allSSL,c.portalToken,c.tokenExpiration):g()}):g()},_generateOAuthInfo:function(b){var c=this,d,e=b.portalUrl,g=b.customBaseUrl,f=b.owningTenant;if(b=!this.defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal){d=window.location.href;var h=d.indexOf("?");-1<h&&(d=d.slice(0,h));h=d.search(/\/(apps|home)\//);d=-1<h?d.slice(0,h):null}b&&d?(this._hasTestedIfAppIsOnPortal=!0,b=y({url:d+"/sharing/rest",content:{f:"json"},
handleAs:"json"}).then(function(){c.defaultOAuthInfo=new A({appId:"arcgisonline",popup:!0,popupCallbackUrl:d+"/home/oauth-callback.html"})})):(b=new k,b.resolve(),b=b.promise);return b.then(function(){if(c.defaultOAuthInfo)return e=e.replace(/^http:/i,"https:"),y({url:e+"/sharing/rest/oauth2/validateRedirectUri",content:{accountId:f,client_id:c.defaultOAuthInfo.appId,redirect_uri:x.getAbsoluteUrl(c.defaultOAuthInfo.popupCallbackUrl),f:"json"},handleAs:"json",callbackParamName:"callback"}).then(function(b){if(b.valid){var d=
c.defaultOAuthInfo.clone();d.portalUrl=b.urlKey&&g?"https://"+b.urlKey.toLowerCase()+"."+g:e;c.oAuthInfos.push(d)}})})}});H=m(z,{declaredClass:"esri.Credential",tokenRefreshBuffer:2,constructor:function(b){f.mixin(this,b);this.resources=this.resources||[];u.isDefined(this.creationTime)||(this.creationTime=(new Date).getTime())},_oAuthCred:null,refreshToken:function(){var b=this,c=this.resources&&this.resources[0],d=r.id.findServerInfo(this.server),e=d&&d.owningSystemUrl,g=!!e&&"server"===this.scope,
f=g&&E(d,r.id._legacyFed),h=g&&r.id.findServerInfo(e),k,q=(k=d.webTierAuth)&&r.id.normalizeWebTierAuth,m=C[this.server],m=m&&m[this.userId],t={username:this.userId,password:m},p;if(!k||q)if(g&&!h&&l.some(r.id.serverInfos,function(b){r.id._isIdProvider(e,b.server)&&(h=b);return!!h}),k=h&&r.id.findCredential(h.server,this.userId),!g||k)if(f)k.refreshToken();else{if(g)p={serverUrl:c,token:k&&k.token,ssl:k&&k.ssl};else if(q)t=null,p={ssl:this.ssl};else if(m)this.isAdmin&&(p={isAdmin:!0});else{var v;c&&
(c=r.id._sanitizeUrl(c),this._enqueued=1,v=r.id._enqueue(c,d,null,null,this.isAdmin,this),v.addCallback(function(){b._enqueued=0;b.refreshServerTokens()}).addErrback(function(){b._enqueued=0}));return v}return r.id.generateToken(g?h:d,g?null:t,p).addCallback(function(c){b.token=c.token;b.expires=u.isDefined(c.expires)?Number(c.expires):null;b.creationTime=(new Date).getTime();b.validity=c.validity;b.onTokenChange();b.refreshServerTokens()}).addErrback(function(){})}},refreshServerTokens:function(){"portal"===
this.scope&&l.forEach(r.id.credentials,function(b){var c=r.id.findServerInfo(b.server),d=c&&c.owningSystemUrl;b!==this&&b.userId===this.userId&&d&&"server"===b.scope&&(r.id._hasSameServerInstance(this.server,d)||r.id._isIdProvider(d,this.server))&&(E(c,r.id._legacyFed)?(b.token=this.token,b.expires=this.expires,b.creationTime=this.creationTime,b.validity=this.validity,b.onTokenChange()):b.refreshToken())},this)},onTokenChange:function(b){clearTimeout(this._refreshTimer);var c=this.server&&r.id.findServerInfo(this.server),
d=(c=c&&c.owningSystemUrl)&&r.id.findServerInfo(c);!1!==b&&(!c||"portal"===this.scope||d&&d.webTierAuth&&!r.id.normalizeWebTierAuth)&&(u.isDefined(this.expires)||u.isDefined(this.validity))&&this._startRefreshTimer()},onDestroy:function(){},destroy:function(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null;this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);var b=l.indexOf(r.id.credentials,this);-1<b&&r.id.credentials.splice(b,1);this.onTokenChange();
this.onDestroy()},toJson:function(){return this._toJson()},_toJson:function(){var b=u.fixJson({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),c=this.resources;c&&0<c.length&&(b.resources=c.slice());return b},_startRefreshTimer:function(){clearTimeout(this._refreshTimer);var b=6E4*this.tokenRefreshBuffer,c=(this.validity?this.creationTime+6E4*this.validity:this.expires)-
(new Date).getTime();0>c&&(c=0);this._refreshTimer=setTimeout(f.hitch(this,this.refreshToken),c>b?c-b:c)}});D.Credential=H;g("extend-esri")&&(r.IdentityManagerBase=D);return D})},"dojo/cookie":function(){define("dojo/cookie",["./_base/kernel","./regexp"],function(m,p){m.cookie=function(f,l,k){var h=document.cookie,q;if(1==arguments.length)q=(q=h.match(new RegExp("(?:^|; )"+p.escapeString(f)+"\x3d([^;]*)")))?decodeURIComponent(q[1]):void 0;else{k=k||{};h=k.expires;if("number"==typeof h){var g=new Date;
g.setTime(g.getTime()+864E5*h);h=k.expires=g}h&&h.toUTCString&&(k.expires=h.toUTCString());l=encodeURIComponent(l);var h=f+"\x3d"+l,e;for(e in k)h+="; "+e,g=k[e],!0!==g&&(h+="\x3d"+g);document.cookie=h}return q};m.cookie.isSupported=function(){"cookieEnabled"in navigator||(this("__djCookieTest__","CookiesAllowed"),navigator.cookieEnabled="CookiesAllowed"==this("__djCookieTest__"),navigator.cookieEnabled&&this("__djCookieTest__","",{expires:-1}));return navigator.cookieEnabled};return m.cookie})},
"esri/ServerInfo":function(){define("esri/ServerInfo",["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel","./lang"],function(m,p,f,l,k){m=m(null,{declaredClass:"esri.ServerInfo",constructor:function(f){p.mixin(this,f)},toJson:function(){return k.fixJson({server:this.server,tokenServiceUrl:this.tokenServiceUrl,adminTokenServiceUrl:this.adminTokenServiceUrl,shortLivedTokenValidity:this.shortLivedTokenValidity,owningSystemUrl:this.owningSystemUrl,owningTenant:this.owningTenant,currentVersion:this.currentVersion,
hasPortal:this.hasPortal,hasServer:this.hasServer,webTierAuth:this.webTierAuth})}});f("extend-esri")&&(l.ServerInfo=m);return m})},"esri/OAuthCredential":function(){define("esri/OAuthCredential",["./kernel","dojo/_base/declare","dojo/has","dojo/json"],function(m,p,f,l){p=p(null,{declaredClass:"esri.OAuthCredential",oAuthInfo:null,storage:null,appId:null,expires:null,ssl:null,token:null,userId:null,constructor:function(f,h){this.oAuthInfo=f;this.storage=h;this._init()},isValid:function(){var f=!1;
if(this.oAuthInfo&&this.token&&this.userId){var h=(new Date).getTime();this.expires>h&&(this.expires-h)/1E3>60*this.oAuthInfo.minTimeUntilExpiration&&(f=!0)}return f},save:function(){if(this.storage){var f=this._load(),h=this.oAuthInfo;if(h&&h.authNamespace&&h.portalUrl){var q=f[h.authNamespace];q||(q=f[h.authNamespace]={});q[h.portalUrl]={appId:this.appId=h.appId,expires:this.expires,ssl:this.ssl,token:this.token,userId:this.userId};try{this.storage.setItem("esriJSAPIOAuth",l.stringify(f))}catch(g){}}}},
destroy:function(){var f=this._load(),h=this.oAuthInfo;if(h&&h.appId&&h.portalUrl&&this.token&&this.expires>Date.now()){var q=h.portalUrl.replace(/^http:/i,"https:")+"/sharing/rest/oauth2/revokeToken",g=new FormData;g.append("f","json");g.append("auth_token",this.token);g.append("client_id",h.appId);g.append("token_type_hint","access_token");if("function"===typeof navigator.sendBeacon)navigator.sendBeacon(q,g);else{var e=new XMLHttpRequest;e.open("POST",q);e.send(g)}}if(h&&h.authNamespace&&h.portalUrl&&
this.storage&&(q=f[h.authNamespace])){delete q[h.portalUrl];try{this.storage.setItem("esriJSAPIOAuth",l.stringify(f))}catch(c){}}h&&(this.oAuthInfo=h._oAuthCred=null)},_init:function(){var f=this._load(),h=this.oAuthInfo;h&&h.authNamespace&&h.portalUrl&&(f=f[h.authNamespace])&&(f=f[h.portalUrl])&&(this.appId=f.appId,this.expires=f.expires,this.ssl=f.ssl,this.token=f.token,this.userId=f.userId)},_load:function(){var f={};if(this.storage){var h=this.storage.getItem("esriJSAPIOAuth");if(h)try{f=l.parse(h)}catch(q){}}return f}});
f("extend-esri")&&(m.OAuthCredential=p);return p})},"esri/arcgis/OAuthInfo":function(){define("esri/arcgis/OAuthInfo",["../kernel","../lang","dojo/_base/declare","dojo/_base/lang","dojo/has"],function(m,p,f,l,k){var h=f(null,{declaredClass:"esri.arcgis.OAuthInfo",constructor:function(f){l.mixin(this,{expiration:20160,minTimeUntilExpiration:30,portalUrl:"https://www.arcgis.com",authNamespace:"/",forceLogin:!1,popup:!1,popupCallbackUrl:"oauth-callback.html",popupWindowFeatures:"height\x3d490,width\x3d800,resizable,scrollbars,status",
preserveUrlHash:!1},f)},_oAuthCred:null,toJson:function(){return p.fixJson({appId:this.appId,expiration:this.expiration,locale:this.locale,minTimeUntilExpiration:this.minTimeUntilExpiration,portalUrl:this.portalUrl,authNamespace:this.authNamespace,forceLogin:this.forceLogin,popup:this.popup,popupCallbackUrl:this.popupCallbackUrl,popupWindowFeatures:this.popupWindowFeatures,preserveUrlHash:this.preserveUrlHash})},clone:function(){return new h(this.toJson())}});k("extend-esri")&&l.setObject("arcgis.OAuthInfo",
h,m);return h})},"dijit/form/Form":function(){define("dijit/form/Form","dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/sniff ../_Widget ../_TemplatedMixin ./_FormMixin ../layout/_ContentPaneResizeMixin".split(" "),function(m,p,f,l,k,h,q,g){return m("dijit.form.Form",[k,h,q,g],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"\x3cform data-dojo-attach-point\x3d'containerNode' data-dojo-attach-event\x3d'onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}\x3e\x3c/form\x3e",
postMixInProperties:function(){this.nameAttrSetting=this.name?"name\x3d'"+this.name+"'":"";this.inherited(arguments)},execute:function(){},onExecute:function(){},_setEncTypeAttr:function(e){p.set(this.domNode,"encType",e);l("ie")&&(this.domNode.encoding=e);this._set("encType",e)},reset:function(e){var c={returnValue:!0,preventDefault:function(){this.returnValue=!1},stopPropagation:function(){},currentTarget:e?e.target:this.domNode,target:e?e.target:this.domNode};!1!==this.onReset(c)&&c.returnValue&&
this.inherited(arguments,[])},onReset:function(){return!0},_onReset:function(e){this.reset(e);e.stopPropagation();e.preventDefault();return!1},_onSubmit:function(e){var c=this.constructor.prototype;if(this.execute!=c.execute||this.onExecute!=c.onExecute)f.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.","","2.0"),this.onExecute(),this.execute(this.getValues());!1===this.onSubmit(e)&&(e.stopPropagation(),e.preventDefault())},onSubmit:function(){return this.isValid()},
submit:function(){!1!==this.onSubmit()&&this.containerNode.submit()}})})},"dijit/form/ValidationTextBox":function(){require({cache:{"url:dijit/form/templates/ValidationTextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tid\x3d"widget_${id}" role\x3d"presentation"\r\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t/\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\r\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\r\n\t/\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n'}});
define("dijit/form/ValidationTextBox","dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/i18n ./TextBox ../Tooltip dojo/text!./templates/ValidationTextBox.html dojo/i18n!./nls/validate".split(" "),function(m,p,f,l,k,h,q){var g=m("dijit.form.ValidationTextBox",k,{templateString:q,required:!1,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",regExp:"",regExpGen:function(){},state:"",tooltipPosition:[],_deprecateRegExp:function(e,c){c!=
g.prototype[e]&&(p.deprecated("ValidationTextBox id\x3d"+this.id+", set('"+e+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0"),this.set("pattern",c))},_setRegExpGenAttr:function(e){this._deprecateRegExp("regExpGen",e);this._set("regExpGen",this._computeRegexp)},_setRegExpAttr:function(e){this._deprecateRegExp("regExp",e)},_setValueAttr:function(){this.inherited(arguments);this._refreshState()},validator:function(e,c){return(new RegExp("^(?:"+this._computeRegexp(c)+")"+(this.required?
"":"?")+"$")).test(e)&&(!this.required||!this._isEmpty(e))&&(this._isEmpty(e)||void 0!==this.parse(e,c))},_isValidSubset:function(){return 0==this.textbox.value.search(this._partialre)},isValid:function(){return this.validator(this.textbox.value,this.get("constraints"))},_isEmpty:function(e){return(this.trim?/^\s*$/:/^$/).test(e)},getErrorMessage:function(){var e="$_unset_$"==this.invalidMessage?this.messages.invalidMessage:this.invalidMessage?this.invalidMessage:this.promptMessage,c="$_unset_$"==
this.missingMessage?this.messages.missingMessage:this.missingMessage?this.missingMessage:e;return this.required&&this._isEmpty(this.textbox.value)?c:e},getPromptMessage:function(){return this.promptMessage},_maskValidSubsetError:!0,validate:function(e){var c="",b=this.disabled||this.isValid(e);b&&(this._maskValidSubsetError=!0);var d=this._isEmpty(this.textbox.value),g=!b&&e&&this._isValidSubset();this._set("state",b?"":((!this._hasBeenBlurred||e)&&d||g)&&(this._maskValidSubsetError||g&&!this._hasBeenBlurred&&
e)?"Incomplete":"Error");this.focusNode.setAttribute("aria-invalid","Error"==this.state?"true":"false");"Error"==this.state?(this._maskValidSubsetError=e&&g,c=this.getErrorMessage(e)):"Incomplete"==this.state?(c=this.getPromptMessage(e),this._maskValidSubsetError=!this._hasBeenBlurred||e):d&&(c=this.getPromptMessage(e));this.set("message",c);return b},displayMessage:function(e){e&&this.focused?h.show(e,this.domNode,this.tooltipPosition,!this.isLeftToRight()):h.hide(this.domNode)},_refreshState:function(){this._created&&
this.validate(this.focused);this.inherited(arguments)},constructor:function(e){this.constraints=f.clone(this.constraints);this.baseClass+=" dijitValidationTextBox"},startup:function(){this.inherited(arguments);this._refreshState()},_setConstraintsAttr:function(e){!e.locale&&this.lang&&(e.locale=this.lang);this._set("constraints",e);this._refreshState()},_setPatternAttr:function(e){this._set("pattern",e);this._refreshState()},_computeRegexp:function(e){var c=this.pattern;"function"==typeof c&&(c=c.call(this,
e));if(c!=this._lastRegExp){var b="";this._lastRegExp=c;".*"!=c&&c.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(c){switch(c.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":b+=c;break;case ")":b+="|$)";break;default:b+="(?:"+c+"|$)"}});try{"".search(b)}catch(d){b=this.pattern}this._partialre="^(?:"+b+")$"}return c},postMixInProperties:function(){this.inherited(arguments);this.messages=l.getLocalization("dijit.form","validate",this.lang);this._setConstraintsAttr(this.constraints)},
_setDisabledAttr:function(e){this.inherited(arguments);this._refreshState()},_setRequiredAttr:function(e){this._set("required",e);this.focusNode.setAttribute("aria-required",e);this._refreshState()},_setMessageAttr:function(e){this._set("message",e);this.displayMessage(e)},reset:function(){this._maskValidSubsetError=!0;this.inherited(arguments)},_onBlur:function(){this.displayMessage("");this.inherited(arguments)},destroy:function(){h.hide(this.domNode);this.inherited(arguments)}});return g})},"dijit/form/TextBox":function(){require({cache:{"url:dijit/form/templates/TextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft" id\x3d"widget_${id}" role\x3d"presentation"\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\r\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\r\n\t/\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n'}});
define("dijit/form/TextBox","dojo/_base/declare dojo/dom-construct dojo/dom-style dojo/_base/kernel dojo/_base/lang dojo/on dojo/sniff ./_FormValueWidget ./_TextBoxMixin dojo/text!./templates/TextBox.html ../main".split(" "),function(m,p,f,l,k,h,q,g,e,c,b){g=m("dijit.form.TextBox"+(q("dojo-bidi")?"_NoBidi":""),[g,e],{templateString:c,_singleNodeTemplate:'\x3cinput class\x3d"dijit dijitReset dijitLeft dijitInputField" data-dojo-attach-point\x3d"textbox,focusNode" autocomplete\x3d"off" type\x3d"${type}" ${!nameAttrSetting} /\x3e',
_buttonInputDisabled:q("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var b=this.type.toLowerCase();if(this.templateString&&"input"==this.templateString.toLowerCase()||("hidden"==b||"file"==b)&&this.templateString==this.constructor.prototype.templateString)this.templateString=this._singleNodeTemplate;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);9>q("ie")&&this.defer(function(){try{var b=f.getComputedStyle(this.domNode);if(b){var c=b.fontFamily;
if(c){var e=this.domNode.getElementsByTagName("INPUT");if(e)for(b=0;b<e.length;b++)e[b].style.fontFamily=c}}}catch(u){}})},_setPlaceHolderAttr:function(b){this._set("placeHolder",b);this._phspan||(this._attachPoints.push("_phspan"),this._phspan=p.create("span",{className:"dijitPlaceHolder dijitInputField"},this.textbox,"after"),this.own(h(this._phspan,"mousedown",function(b){b.preventDefault()}),h(this._phspan,"touchend, pointerup, MSPointerUp",k.hitch(this,function(){this.focus()}))));this._phspan.innerHTML=
"";this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(b));this._updatePlaceHolder()},_onInput:function(b){this.inherited(arguments);this._updatePlaceHolder()},_updatePlaceHolder:function(){this._phspan&&(this._phspan.style.display=this.placeHolder&&!this.textbox.value?"":"none")},_setValueAttr:function(b,c,e){this.inherited(arguments);this._updatePlaceHolder()},getDisplayedValue:function(){l.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.",
"","2.0");return this.get("displayedValue")},setDisplayedValue:function(b){l.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",b)},_onBlur:function(b){this.disabled||(this.inherited(arguments),this._updatePlaceHolder(),q("mozilla")&&this.selectOnClick&&(this.textbox.selectionStart=this.textbox.selectionEnd=void 0))},_onFocus:function(b){this.disabled||this.readOnly||(this.inherited(arguments),this._updatePlaceHolder())}});
9>q("ie")&&(g.prototype._isTextSelected=function(){var b=this.ownerDocument.selection.createRange();return b.parentElement()==this.textbox&&0<b.text.length},b._setSelectionRange=e._setSelectionRange=function(b,c,e){b.createTextRange&&(b=b.createTextRange(),b.collapse(!0),b.moveStart("character",-99999),b.moveStart("character",c),b.moveEnd("character",e-c),b.select())});q("dojo-bidi")&&(g=m("dijit.form.TextBox",g,{_setPlaceHolderAttr:function(b){this.inherited(arguments);this.applyTextDir(this._phspan)}}));
return g})},"dijit/form/_FormValueWidget":function(){define("dijit/form/_FormValueWidget",["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(m,p,f,l){return m("dijit.form._FormValueWidget",[f,l],{_layoutHackIE7:function(){if(7==p("ie"))for(var f=this.domNode,h=f.parentNode,l=f.firstChild||f,g=l.style.filter,e=this;h&&0==h.clientHeight;)(function(){var c=e.connect(h,"onscroll",function(){e.disconnect(c);l.style.filter=(new Date).getMilliseconds();e.defer(function(){l.style.filter=
g})})})(),h=h.parentNode}})})},"dijit/form/_FormValueMixin":function(){define("dijit/form/_FormValueMixin","dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on dojo/sniff ./_FormWidgetMixin".split(" "),function(m,p,f,l,k,h,q){return m("dijit.form._FormValueMixin",q,{readOnly:!1,_setReadOnlyAttr:function(g){h("trident")&&"disabled"in this?p.set(this.focusNode,"readOnly",g||this.disabled):p.set(this.focusNode,"readOnly",g);this._set("readOnly",g)},postCreate:function(){this.inherited(arguments);
void 0===this._resetValue&&(this._lastValueReported=this._resetValue=this.value)},_setValueAttr:function(g,e){this._handleOnChange(g,e)},_handleOnChange:function(g,e){this._set("value",g);this.inherited(arguments)},undo:function(){this._setValueAttr(this._lastValueReported,!1)},reset:function(){this._hasBeenBlurred=!1;this._setValueAttr(this._resetValue,!0)}})})},"dijit/form/_TextBoxMixin":function(){define("dijit/form/_TextBoxMixin","dojo/_base/array dojo/_base/declare dojo/dom dojo/sniff dojo/keys dojo/_base/lang dojo/on ../main".split(" "),
function(m,p,f,l,k,h,q,g){var e=p("dijit.form._TextBoxMixin"+(l("dojo-bidi")?"_NoBidi":""),null,{trim:!1,uppercase:!1,lowercase:!1,propercase:!1,maxLength:"",selectOnClick:!1,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints)},_setValueAttr:function(c,b,d){var e;void 0!==c&&(e=this.filter(c),"string"!=typeof d&&(d=null===e||"number"==typeof e&&isNaN(e)?"":this.filter(this.format(e,this.constraints)),0!=this.compare(e,this.filter(this.parse(d,this.constraints)))&&
(d=null)));null==d||"number"==typeof d&&isNaN(d)||this.textbox.value==d||(this.textbox.value=d,this._set("displayedValue",this.get("displayedValue")));this.inherited(arguments,[e,b])},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value)},_setDisplayedValueAttr:function(c){null==c?c="":"string"!=typeof c&&(c=String(c));this.textbox.value=c;this._setValueAttr(this.get("value"),void 0);this._set("displayedValue",this.get("displayedValue"))},format:function(c){return null==
c?"":c.toString?c.toString():c},parse:function(c){return c},_refreshState:function(){},onInput:function(){},_onInput:function(c){this._lastInputEventValue=this.textbox.value;this._processInput(this._lastInputProducingEvent||c);delete this._lastInputProducingEvent;this.intermediateChanges&&this._handleOnChange(this.get("value"),!1)},_processInput:function(){this._refreshState();this._set("displayedValue",this.get("displayedValue"))},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);
this.inherited(arguments);this.own(q(this.textbox,"keydown, keypress, paste, cut, compositionend",h.hitch(this,function(c){var b;if("keydown"==c.type&&229!=c.keyCode){b=c.keyCode;switch(b){case k.SHIFT:case k.ALT:case k.CTRL:case k.META:case k.CAPS_LOCK:case k.NUM_LOCK:case k.SCROLL_LOCK:return}if(!c.ctrlKey&&!c.metaKey&&!c.altKey){switch(b){case k.NUMPAD_0:case k.NUMPAD_1:case k.NUMPAD_2:case k.NUMPAD_3:case k.NUMPAD_4:case k.NUMPAD_5:case k.NUMPAD_6:case k.NUMPAD_7:case k.NUMPAD_8:case k.NUMPAD_9:case k.NUMPAD_MULTIPLY:case k.NUMPAD_PLUS:case k.NUMPAD_ENTER:case k.NUMPAD_MINUS:case k.NUMPAD_PERIOD:case k.NUMPAD_DIVIDE:return}if(65<=
b&&90>=b||48<=b&&57>=b||b==k.SPACE)return;b=!1;for(var d in k)if(k[d]===c.keyCode){b=!0;break}if(!b)return}}(b=32<=c.charCode?String.fromCharCode(c.charCode):c.charCode)||(b=65<=c.keyCode&&90>=c.keyCode||48<=c.keyCode&&57>=c.keyCode||c.keyCode==k.SPACE?String.fromCharCode(c.keyCode):c.keyCode);b||(b=229);if("keypress"==c.type){if("string"!=typeof b)return;if("a"<=b&&"z">=b||"A"<=b&&"Z">=b||"0"<=b&&"9">=b||" "===b)if(c.ctrlKey||c.metaKey||c.altKey)return}var e={faux:!0},g;for(g in c)/^(layer[XY]|returnValue|keyLocation)$/.test(g)||
(d=c[g],"function"!=typeof d&&"undefined"!=typeof d&&(e[g]=d));h.mixin(e,{charOrCode:b,_wasConsumed:!1,preventDefault:function(){e._wasConsumed=!0;c.preventDefault()},stopPropagation:function(){c.stopPropagation()}});this._lastInputProducingEvent=e;!1===this.onInput(e)&&(e.preventDefault(),e.stopPropagation());if(!e._wasConsumed&&9>=l("ie"))switch(c.keyCode){case k.TAB:case k.ESCAPE:case k.DOWN_ARROW:case k.UP_ARROW:case k.LEFT_ARROW:case k.RIGHT_ARROW:break;default:c.keyCode==k.ENTER&&"textarea"!=
this.textbox.tagName.toLowerCase()||this.defer(function(){this.textbox.value!==this._lastInputEventValue&&q.emit(this.textbox,"input",{bubbles:!0})})}})),q(this.textbox,"input",h.hitch(this,"_onInput")),q(this.domNode,"keypress",function(c){c.stopPropagation()}))},_blankValue:"",filter:function(c){if(null===c)return this._blankValue;if("string"!=typeof c)return c;this.trim&&(c=h.trim(c));this.uppercase&&(c=c.toUpperCase());this.lowercase&&(c=c.toLowerCase());this.propercase&&(c=c.replace(/[^\s]+/g,
function(b){return b.substring(0,1).toUpperCase()+b.substring(1)}));return c},_setBlurValue:function(){this._setValueAttr(this.get("value"),!0)},_onBlur:function(c){this.disabled||(this._setBlurValue(),this.inherited(arguments))},_isTextSelected:function(){return this.textbox.selectionStart!=this.textbox.selectionEnd},_onFocus:function(c){this.disabled||this.readOnly||(this.selectOnClick&&"mouse"==c&&(this._selectOnClickHandle=q.once(this.domNode,"mouseup, touchend",h.hitch(this,function(b){this._isTextSelected()||
e.selectInputText(this.textbox)})),this.own(this._selectOnClickHandle),this.defer(function(){this._selectOnClickHandle&&(this._selectOnClickHandle.remove(),this._selectOnClickHandle=null)},500)),this.inherited(arguments),this._refreshState())},reset:function(){this.textbox.value="";this.inherited(arguments)}});l("dojo-bidi")&&(e=p("dijit.form._TextBoxMixin",e,{_setValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.focusNode)},_setDisplayedValueAttr:function(){this.inherited(arguments);
this.applyTextDir(this.focusNode)},_onInput:function(){this.applyTextDir(this.focusNode);this.inherited(arguments)}}));e._setSelectionRange=g._setSelectionRange=function(c,b,d){c.setSelectionRange&&c.setSelectionRange(b,d)};e.selectInputText=g.selectInputText=function(c,b,d){c=f.byId(c);isNaN(b)&&(b=0);isNaN(d)&&(d=c.value?c.value.length:0);try{c.focus(),e._setSelectionRange(c,b,d)}catch(r){}};return e})},"dijit/Tooltip":function(){require({cache:{"url:dijit/templates/Tooltip.html":'\x3cdiv class\x3d"dijitTooltip dijitTooltipLeft" id\x3d"dojoTooltip" data-dojo-attach-event\x3d"mouseenter:onMouseEnter,mouseleave:onMouseLeave"\r\n\t\x3e\x3cdiv class\x3d"dijitTooltipConnector" data-dojo-attach-point\x3d"connectorNode"\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d"dijitTooltipContainer dijitTooltipContents" data-dojo-attach-point\x3d"containerNode" role\x3d\'alert\'\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n'}});
define("dijit/Tooltip","dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff ./_base/manager ./place ./_Widget ./_TemplatedMixin ./BackgroundIframe dojo/text!./templates/Tooltip.html ./main".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x,w){function y(){}var z=p("dijit._MasterTooltip",[v,u],{duration:d.defaultDuration,templateString:x,postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);
this.bgIframe=new t(this.domNode);this.fadeIn=f.fadeIn({node:this.domNode,duration:this.duration,onEnd:g.hitch(this,"_onShow")});this.fadeOut=f.fadeOut({node:this.domNode,duration:this.duration,onEnd:g.hitch(this,"_onHide")})},show:function(b,c,d,e,f,h,k){if(!this.aroundNode||this.aroundNode!==c||this.containerNode.innerHTML!=b)if("playing"==this.fadeOut.status())this._onDeck=arguments;else{this.containerNode.innerHTML=b;f&&this.set("textDir",f);this.containerNode.align=e?"right":"left";var l=r.around(this.domNode,
c,d&&d.length?d:B.defaultPosition,!e,g.hitch(this,"orient")),m=l.aroundNodePos;"M"==l.corner.charAt(0)&&"M"==l.aroundCorner.charAt(0)?(this.connectorNode.style.top=m.y+(m.h-this.connectorNode.offsetHeight>>1)-l.y+"px",this.connectorNode.style.left=""):"M"==l.corner.charAt(1)&&"M"==l.aroundCorner.charAt(1)?this.connectorNode.style.left=m.x+(m.w-this.connectorNode.offsetWidth>>1)-l.x+"px":(this.connectorNode.style.left="",this.connectorNode.style.top="");q.set(this.domNode,"opacity",0);this.fadeIn.play();
this.isShowingNow=!0;this.aroundNode=c;this.onMouseEnter=h||y;this.onMouseLeave=k||y}},orient:function(c,d,e,g,f){this.connectorNode.style.top="";var k=g.h;g=g.w;c.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight",
"BL-BR":"dijitTooltipLeft"}[d+"-"+e];this.domNode.style.width="auto";var l=h.position(this.domNode);if(b("ie")||b("trident"))l.w+=2;h.setMarginBox(this.domNode,{w:Math.min(Math.max(g,1),l.w)});"B"==e.charAt(0)&&"B"==d.charAt(0)?(c=h.position(c),d=this.connectorNode.offsetHeight,c.h>k?(this.connectorNode.style.top=k-(f.h+d>>1)+"px",this.connectorNode.style.bottom=""):(this.connectorNode.style.bottom=Math.min(Math.max(f.h/2-d/2,0),c.h-d)+"px",this.connectorNode.style.top="")):(this.connectorNode.style.top=
"",this.connectorNode.style.bottom="");return Math.max(0,l.w-g)},_onShow:function(){b("ie")&&(this.domNode.style.filter="")},hide:function(b){this._onDeck&&this._onDeck[1]==b?this._onDeck=null:this.aroundNode===b&&(this.fadeIn.stop(),this.isShowingNow=!1,this.aroundNode=null,this.fadeOut.play());this.onMouseEnter=this.onMouseLeave=y},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";this._onDeck&&(this.show.apply(this,this._onDeck),this._onDeck=null)}});b("dojo-bidi")&&
z.extend({_setAutoTextDir:function(b){this.applyTextDir(b);m.forEach(b.children,function(b){this._setAutoTextDir(b)},this)},_setTextDirAttr:function(b){this._set("textDir",b);"auto"==b?this._setAutoTextDir(this.containerNode):this.containerNode.dir=this.textDir}});w.showTooltip=function(b,c,d,e,g,f,h){d&&(d=m.map(d,function(b){return{after:"after-centered",before:"before-centered"}[b]||b}));B._masterTT||(w._masterTT=B._masterTT=new z);return B._masterTT.show(b,c,d,e,g,f,h)};w.hideTooltip=function(b){return B._masterTT&&
B._masterTT.hide(b)};var B=p("dijit.Tooltip",v,{label:"",showDelay:400,hideDelay:400,connectId:[],position:[],selector:"",_setConnectIdAttr:function(b){m.forEach(this._connections||[],function(b){m.forEach(b,function(b){b.remove()})},this);this._connectIds=m.filter(g.isArrayLike(b)?b:b?[b]:[],function(b){return l.byId(b,this.ownerDocument)},this);this._connections=m.map(this._connectIds,function(b){b=l.byId(b,this.ownerDocument);var d=this.selector,f=d?function(b){return c.selector(d,b)}:function(b){return b},
h=this;return[c(b,f(e.enter),function(){h._onHover(this)}),c(b,f("focusin"),function(){h._onHover(this)}),c(b,f(e.leave),g.hitch(h,"_onUnHover")),c(b,f("focusout"),g.hitch(h,"set","state","DORMANT"))]},this);this._set("connectId",b)},addTarget:function(b){b=b.id||b;-1==m.indexOf(this._connectIds,b)&&this.set("connectId",this._connectIds.concat(b))},removeTarget:function(b){b=m.indexOf(this._connectIds,b.id||b);0<=b&&(this._connectIds.splice(b,1),this.set("connectId",this._connectIds))},buildRendering:function(){this.inherited(arguments);
k.add(this.domNode,"dijitTooltipData")},startup:function(){this.inherited(arguments);var b=this.connectId;m.forEach(g.isArrayLike(b)?b:[b],this.addTarget,this)},getContent:function(b){return this.label||this.domNode.innerHTML},state:"DORMANT",_setStateAttr:function(b){if(!(this.state==b||"SHOW TIMER"==b&&"SHOWING"==this.state||"HIDE TIMER"==b&&"DORMANT"==this.state)){this._hideTimer&&(this._hideTimer.remove(),delete this._hideTimer);this._showTimer&&(this._showTimer.remove(),delete this._showTimer);
switch(b){case "DORMANT":this._connectNode&&(B.hide(this._connectNode),delete this._connectNode,this.onHide());break;case "SHOW TIMER":"SHOWING"!=this.state&&(this._showTimer=this.defer(function(){this.set("state","SHOWING")},this.showDelay));break;case "SHOWING":var c=this.getContent(this._connectNode);if(!c){this.set("state","DORMANT");return}B.show(c,this._connectNode,this.position,!this.isLeftToRight(),this.textDir,g.hitch(this,"set","state","SHOWING"),g.hitch(this,"set","state","HIDE TIMER"));
this.onShow(this._connectNode,this.position);break;case "HIDE TIMER":this._hideTimer=this.defer(function(){this.set("state","DORMANT")},this.hideDelay)}this._set("state",b)}},_onHover:function(b){this._connectNode&&b!=this._connectNode&&this.set("state","DORMANT");this._connectNode=b;this.set("state","SHOW TIMER")},_onUnHover:function(b){this.set("state","HIDE TIMER")},open:function(b){this.set("state","DORMANT");this._connectNode=b;this.set("state","SHOWING")},close:function(){this.set("state","DORMANT")},
onShow:function(){},onHide:function(){},destroy:function(){this.set("state","DORMANT");m.forEach(this._connections||[],function(b){m.forEach(b,function(b){b.remove()})},this);this.inherited(arguments)}});B._MasterTooltip=z;B.show=w.showTooltip;B.hide=w.hideTooltip;B.defaultPosition=["after-centered","before-centered"];return B})},"esri/OAuthSignInHandler":function(){define("esri/OAuthSignInHandler","./Credential ./domUtils ./lang ./urlUtils dijit/Dialog dijit/registry dojo/_base/config dojo/_base/Deferred dojo/_base/kernel dojo/dom-attr dojo/i18n!./nls/jsapi dojo/io-query dojo/sniff dojo/json dijit/form/Button dojo/query".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v){return{_oAuthDfd:null,_oAuthIntervalId:0,_oAuthDialogContent:"\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${oAuthInfo}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e",
setOAuthRedirectionHandler:function(b){this._oAuthRedirectFunc=b},oAuthSignIn:function(d,e,f,h){var k=this._oAuthDfd=new g;k.resUrl_=d;k.sinfo_=e;k.oinfo_=f;var l=!h||!1!==h.oAuthPopupConfirmation;if(!f.popup||!l)return this._doOAuthSignIn(d,e,f),k;this._nls||(this._nls=b.identity);this.oAuthDialog||(this.oAuthDialog=this._createOAuthDialog());d=this.oAuthDialog;f=h&&h.error;h=h&&h.token;p.hide(d.errMsg_);f&&403==f.code&&h&&(c.set(d.errMsg_,"innerHTML",this._nls.forbidden),p.show(d.errMsg_));c.set(d.serverLink_,
{title:e.server,innerHTML:-1!==e.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":e.server});d.show();return k},setOAuthResponseHash:function(b){var c=this._oAuthDfd;this._oAuthDfd=null;if(c&&b)if(clearInterval(this._oAuthIntervalId),"#"===b.charAt(0)&&(b=b.substring(1)),b=d.queryToObject(b),b.error)b=Error("access_denied"===b.error?"ABORTED":"OAuth: "+b.error+" - "+b.error_description),b.code="IdentityManagerBase.2",b.log=!!q.isDebug,c.errback(b);else{var e=c.oinfo_._oAuthCred,g=new m({userId:b.username,
server:c.sinfo_.server,token:b.access_token,expires:(new Date).getTime()+1E3*Number(b.expires_in),ssl:"true"===b.ssl,_oAuthCred:e});e.storage=b.persist?window.localStorage:window.sessionStorage;e.token=g.token;e.expires=g.expires;e.userId=g.userId;e.ssl=g.ssl;e.save();c.callback(g)}},_createOAuthDialog:function(){var b=this._nls,c=f.substitute(b,this._oAuthDialogContent),c=f.substitute({server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},c),d=new k({title:b.title,
content:c,"class":"esriOAuthSignInDialog",style:"min-width: 18em;",esriIdMgr_:this,execute_:function(){var b=d.esriIdMgr_._oAuthDfd;d.hide_();d.esriIdMgr_._doOAuthSignIn(b.resUrl_,b.sinfo_,b.oinfo_)},cancel_:function(){var b=d.esriIdMgr_._oAuthDfd;d.esriIdMgr_._oAuthDfd=null;d.hide_();var c=Error("ABORTED");c.code="IdentityManager.2";c.log=!!q.isDebug;b.errback(c)},hide_:function(){p.hide(d.errMsg_);d.hide();k._DialogLevelManager.hide(d)}}),b=d.domNode;d.btnSubmit_=h.byNode(e.query(".esriIdSubmit",
b)[0]);d.btnCancel_=h.byNode(e.query(".esriIdCancel",b)[0]);d.serverLink_=e.query(".serverLink",b)[0];d.errMsg_=e.query(".esriErrorMsg",b)[0];d.connect(d.btnSubmit_,"onClick",d.execute_);d.connect(d.btnCancel_,"onClick",d.onCancel);d.connect(d,"onCancel",d.cancel_);return d},_doOAuthSignIn:function(b,c,e){var g=this,f={portalUrl:e.portalUrl};!e.popup&&e.preserveUrlHash&&window.location.hash&&(f.hash=window.location.hash);f={client_id:e.appId,response_type:"token",state:v.stringify(f),expiration:e.expiration,
locale:e.locale,redirect_uri:e.popup?l.getAbsoluteUrl(e.popupCallbackUrl):window.location.href.replace(/#.*$/,"")};e.forceLogin&&(f.force_login=!0);var h=e.portalUrl.replace(/^http:/i,"https:")+"/sharing/oauth2/authorize",k=h+"?"+d.objectToQuery(f);if(e.popup){var m;7===r("ie")?(m=window.open(e.popupCallbackUrl,"esriJSAPIOAuth",e.popupWindowFeatures),m.location=k):m=window.open(k,"esriJSAPIOAuth",e.popupWindowFeatures);m?(m.focus(),this._oAuthDfd.oAuthWin_=m,this._oAuthIntervalId=setInterval(function(){if(m.closed){clearInterval(g._oAuthIntervalId);
var b=g._oAuthDfd;if(b){var c=Error("ABORTED");c.code="IdentityManager.2";c.log=!!q.isDebug;b.errback(c)}}},500)):(b=Error("ABORTED"),b.code="IdentityManager.2",b.log=!!q.isDebug,this._oAuthDfd.errback(b))}else this._rejectOnPersistedPageShow=!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:f,authorizeUrl:h,resourceUrl:b,serverInfo:c,oAuthInfo:e}):window.location=k}}})},"esri/toolbars/draw":function(){define("esri/toolbars/draw","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Color dojo/_base/window dojo/has dojo/sniff dojo/keys dojo/dom-construct dojo/dom-style dojo/dom-geometry ../kernel ../sniff ./_toolbar ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../graphic ../geometry/jsonUtils ../geometry/webMercatorUtils ../geometry/Polyline ../geometry/Polygon ../geometry/Multipoint ../geometry/Rect dojo/i18n!../nls/jsapi".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x,w,y,z,B,A,C,F,E,H){var D=m(u,{declaredClass:"esri.toolbars.Draw",_eventMap:{"draw-complete":!0,"draw-end":["geometry"]},constructor:function(b,c){this.markerSymbol=new t(t.STYLE_SOLID,10,new x(x.STYLE_SOLID,new k([255,0,0]),2),new k([0,0,0,.25]));this.lineSymbol=new x(x.STYLE_SOLID,new k([255,0,0]),2);this.fillSymbol=new w(w.STYLE_SOLID,new x(x.STYLE_SOLID,new k([255,0,0]),2),new k([0,0,0,.25]));this._points=[];this._mouse=!q("esri-touch")&&!q("esri-pointer");
this._defaultOptions={showTooltips:!0,drawTime:75,tolerance:8,tooltipOffset:15};this._options=p.mixin(p.mixin({},this._defaultOptions),c||{});if(g("ios")||g("android"))this._options.showTooltips=!1;this._onKeyDownHandler=p.hitch(this,this._onKeyDownHandler);this._onMouseDownHandler=p.hitch(this,this._onMouseDownHandler);this._onMouseUpHandler=p.hitch(this,this._onMouseUpHandler);this._onClickHandler=p.hitch(this,this._onClickHandler);this._onMouseMoveHandler=p.hitch(this,this._onMouseMoveHandler);
this._onMouseDragHandler=p.hitch(this,this._onMouseDragHandler);this._onDblClickHandler=p.hitch(this,this._onDblClickHandler);this._updateTooltip=p.hitch(this,this._updateTooltip);this._hideTooltip=p.hitch(this,this._hideTooltip);this._redrawGraphic=p.hitch(this,this._redrawGraphic)},_geometryType:null,respectDrawingVertexOrder:!1,setRespectDrawingVertexOrder:function(b){this.respectDrawingVertexOrder=b},setMarkerSymbol:function(b){this.markerSymbol=b},setLineSymbol:function(b){this.lineSymbol=b},
setFillSymbol:function(b){this.fillSymbol=b},activate:function(b,c){this._geometryType&&this.deactivate();var d=this.map,e=l.connect,g=D;this._options=p.mixin(p.mixin({},this._options),c||{});d.navigationManager.setImmediateClick(!1);switch(b){case g.ARROW:case g.LEFT_ARROW:case g.RIGHT_ARROW:case g.UP_ARROW:case g.DOWN_ARROW:case g.TRIANGLE:case g.CIRCLE:case g.ELLIPSE:case g.RECTANGLE:this._deactivateMapTools(!0,!1,!1,!0);this._onClickHandler_connect=e(d,"onClick",this._onClickHandler);this._mouse?
(this._onMouseDownHandler_connect=e(d,"onMouseDown",this._onMouseDownHandler),this._onMouseDragHandler_connect=e(d,"onMouseDrag",this._onMouseDragHandler),this._onMouseUpHandler_connect=e(d,"onMouseUp",this._onMouseUpHandler)):(this._onMouseDownHandler_connect=e(d,"onMouseDragStart",this._onMouseDownHandler),this._onMouseDragHandler_connect=e(d,"onMouseDrag",this._onMouseDragHandler),this._onMouseUpHandler_connect=e(d,"onMouseDragEnd",this._onMouseUpHandler));q("esri-touch")&&(this._onMouseDownHandler2_connect=
e(d,"onSwipeStart",this._onMouseDownHandler),this._onMouseDragHandler2_connect=e(d,"onSwipeMove",this._onMouseDragHandler),this._onMouseUpHandler2_connect=e(d,"onSwipeEnd",this._onMouseUpHandler));break;case g.POINT:this._onClickHandler_connect=e(d,"onClick",this._onClickHandler);break;case g.LINE:case g.EXTENT:case g.FREEHAND_POLYLINE:case g.FREEHAND_POLYGON:this._deactivateMapTools(!0,!1,!1,!0);this._mouse?(this._onMouseDownHandler_connect=e(d,"onMouseDown",this._onMouseDownHandler),this._onMouseDragHandler_connect=
e(d,"onMouseDrag",this._onMouseDragHandler),this._onMouseUpHandler_connect=e(d,"onMouseUp",this._onMouseUpHandler)):(this._onMouseDownHandler_connect=e(d,"onMouseDragStart",this._onMouseDownHandler),this._onMouseDragHandler_connect=e(d,"onMouseDrag",this._onMouseDragHandler),this._onMouseUpHandler_connect=e(d,"onMouseDragEnd",this._onMouseUpHandler));q("esri-touch")&&(this._onMouseDownHandler2_connect=e(d,"onSwipeStart",this._onMouseDownHandler),this._onMouseDragHandler2_connect=e(d,"onSwipeMove",
this._onMouseDragHandler),this._onMouseUpHandler2_connect=e(d,"onSwipeEnd",this._onMouseUpHandler));break;case g.POLYLINE:case g.POLYGON:case g.MULTI_POINT:d.navigationManager.setImmediateClick(!0);this._onClickHandler_connect=e(d,"onClick",this._onClickHandler);this._onDblClickHandler_connect=e(d,"onDblClick",this._onDblClickHandler);this._dblClickZoom=d.isDoubleClickZoom;d.disableDoubleClickZoom();break;default:return}this._onKeyDown_connect=e(d,"onKeyDown",this._onKeyDownHandler);this._redrawConnect=
e(d,"onExtentChange",this._redrawGraphic);this._geometryType=b;this._toggleTooltip(!0);d.snappingManager&&"freehandpolyline"!==this._geometryType&&"freehandpolygon"!==this._geometryType&&(d.snappingManager._startSelectionLayerQuery(),d.snappingManager._setUpSnapping());this.onActivate(this._geometryType)},deactivate:function(){var b=this.map;this._clear();var c=l.disconnect;c(this._onMouseMoveHandler_connect);c(this._onMouseDownHandler_connect);c(this._onMouseDragHandler_connect);c(this._onMouseUpHandler_connect);
c(this._onMouseDownHandler2_connect);c(this._onMouseDragHandler2_connect);c(this._onMouseUpHandler2_connect);c(this._onClickHandler_connect);c(this._onDblClickHandler_connect);c(this._onKeyDown_connect);c(this._redrawConnect);this._onMouseDownHandler_connect=this._onMouseMoveHandler_connect=this._onMouseDragHandler_connect=this._onMouseUpHandler_connect=this._onMouseDownHandler2_connect=this._onMouseDragHandler2_connect=this._onMouseUpHandler2_connect=this._onClickHandler_connect=this._onDblClickHandler_connect=
this._onKeyDown_connect=this._redrawConnect=null;b.snappingManager&&(b.snappingManager._stopSelectionLayerQuery(),b.snappingManager._killOffSnapping());switch(this._geometryType){case D.CIRCLE:case D.ELLIPSE:case D.TRIANGLE:case D.ARROW:case D.LEFT_ARROW:case D.RIGHT_ARROW:case D.UP_ARROW:case D.DOWN_ARROW:case D.RECTANGLE:case D.LINE:case D.EXTENT:case D.FREEHAND_POLYLINE:case D.FREEHAND_POLYGON:this._activateMapTools(!0,!1,!1,!0);break;case D.POLYLINE:case D.POLYGON:case D.MULTI_POINT:this._dblClickZoom&&
b.enableDoubleClickZoom()}c=this._geometryType;this._geometryType=null;b.navigationManager.setImmediateClick(!1);this._toggleTooltip(!1);this.onDeactivate(c)},_clear:function(){this._graphic&&this.map.graphics.remove(this._graphic,!0);this._graphic=null;this.map.snappingManager&&this.map.snappingManager._setGraphic(null);this._points=[]},finishDrawing:function(){var b,c=this._points,d=this.map.spatialReference,e=D,c=c.slice(0,c.length);switch(this._geometryType){case e.POLYLINE:if(!this._graphic||
2>c.length)return;b=new A(d);b.addPath([].concat(c));break;case e.POLYGON:if(!this._graphic||3>c.length)return;b=new C(d);c=[].concat(c,[c[0].offset(0,0)]);C.prototype.isClockwise(c)||this.respectDrawingVertexOrder||c.reverse();b.addRing(c);break;case e.MULTI_POINT:b=new F(d),f.forEach(c,function(c){b.addPoint(c)})}l.disconnect(this._onMouseMoveHandler_connect);this._clear();this._setTooltipMessage(0);this._drawEnd(b)},_drawEnd:function(b){if(b){var c=this.map.spatialReference,d;this.onDrawEnd(b);
c&&(c.isWebMercator()?d=B.webMercatorToGeographic(b,!0):4326===c.wkid&&(d=z.fromJson(b.toJson())));this.onDrawComplete({geometry:b,geographicGeometry:d})}},_normalizeRect:function(b,c,d){var e=b.x;b=b.y;var g=c.x;c=c.y;return{x:Math.min(e,g),y:Math.max(b,c),width:Math.abs(e-g),height:Math.abs(b-c),spatialReference:d}},_onMouseDownHandler:function(b){this._dragged=!1;var c;this.map.snappingManager&&(c=this.map.snappingManager._snappingPoint);var d=c||b.mapPoint,e=D;c=this.map;var g=c.spatialReference;
this._points.push(d.offset(0,0));switch(this._geometryType){case e.LINE:this._graphic=c.graphics.add(new y(new A({paths:[[[d.x,d.y],[d.x,d.y]]],spatialReference:g}),this.lineSymbol),!0);c.snappingManager&&c.snappingManager._setGraphic(this._graphic);break;case e.FREEHAND_POLYLINE:this._oldPoint=b.screenPoint;d=new A(g);d.addPath(this._points);this._graphic=c.graphics.add(new y(d,this.lineSymbol),!0);c.snappingManager&&c.snappingManager._setGraphic(this._graphic);break;case e.CIRCLE:case e.ELLIPSE:case e.TRIANGLE:case e.ARROW:case e.LEFT_ARROW:case e.RIGHT_ARROW:case e.UP_ARROW:case e.DOWN_ARROW:case e.RECTANGLE:case e.FREEHAND_POLYGON:this._oldPoint=
b.screenPoint,d=new C(g),d.addRing(this._points),this._graphic=c.graphics.add(new y(d,this.fillSymbol),!0),c.snappingManager&&c.snappingManager._setGraphic(this._graphic)}q("esri-touch")&&b.preventDefault();if(1===this._points.length)this.onDrawStart()},_onMouseMoveHandler:function(b){var c;this.map.snappingManager&&(c=this.map.snappingManager._snappingPoint);b=c||b.mapPoint;c=this._graphic.geometry;switch(this._geometryType){case D.POLYLINE:case D.POLYGON:var d=this._points.length,e=!!c.getPoint(0,
d);b=b.offset(0,0);e?c.setPoint(0,d,b):c.insertPoint(0,d,b);this._graphic.setGeometry(c)}},_onMouseDragHandler:function(b){if(this._graphic||this._points.length)if(q("esri-touch")&&!this._points.length)b.preventDefault();else{this._dragged=!0;var c;this.map.snappingManager&&(c=this.map.snappingManager._snappingPoint);var d=this._points[0],e=c||b.mapPoint,g=this.map,f=g.spatialReference;c=this._graphic;var h=D,k=g.toScreen(d),l=g.toScreen(e),m=[],m=l.x-k.x,l=l.y-k.y,r=Math.sqrt(m*m+l*l);switch(this._geometryType){case h.CIRCLE:this._hideTooltip();
c.geometry=C.createCircle({center:k,r:r,numberOfPoints:60,map:g});c.setGeometry(c.geometry);break;case h.ELLIPSE:this._hideTooltip();c.geometry=C.createEllipse({center:k,longAxis:m,shortAxis:l,numberOfPoints:60,map:g});c.setGeometry(c.geometry);break;case h.TRIANGLE:this._hideTooltip();m=[[0,-r],[.8660254037844386*r,.5*r],[-.8660254037844386*r,.5*r],[0,-r]];c.geometry=this._toPolygon(m,k.x,k.y);c.setGeometry(c.geometry);break;case h.ARROW:this._hideTooltip();d=l/r;g=m/r;e=.25*g*r;f=.25*r/(l/m);r*=
.25*d;m=[[m,l],[m-e*(1+24/f),l+24*g-r],[m-e*(1+12/f),l+12*g-r],[-12*d,12*g],[12*d,-12*g],[m-e*(1-12/f),l-12*g-r],[m-e*(1-24/f),l-24*g-r],[m,l]];c.geometry=this._toPolygon(m,k.x,k.y);c.setGeometry(c.geometry);break;case h.LEFT_ARROW:this._hideTooltip();m=0>=m?[[m,0],[.75*m,l],[.75*m,.5*l],[0,.5*l],[0,-.5*l],[.75*m,-.5*l],[.75*m,-l],[m,0]]:[[0,0],[.25*m,l],[.25*m,.5*l],[m,.5*l],[m,-.5*l],[.25*m,-.5*l],[.25*m,-l],[0,0]];c.geometry=this._toPolygon(m,k.x,k.y);c.setGeometry(c.geometry);break;case h.RIGHT_ARROW:this._hideTooltip();
m=0<=m?[[m,0],[.75*m,l],[.75*m,.5*l],[0,.5*l],[0,-.5*l],[.75*m,-.5*l],[.75*m,-l],[m,0]]:[[0,0],[.25*m,l],[.25*m,.5*l],[m,.5*l],[m,-.5*l],[.25*m,-.5*l],[.25*m,-l],[0,0]];c.geometry=this._toPolygon(m,k.x,k.y);c.setGeometry(c.geometry);break;case h.UP_ARROW:this._hideTooltip();m=0>=l?[[0,l],[-m,.75*l],[-.5*m,.75*l],[-.5*m,0],[.5*m,0],[.5*m,.75*l],[m,.75*l],[0,l]]:[[0,0],[-m,.25*l],[-.5*m,.25*l],[-.5*m,l],[.5*m,l],[.5*m,.25*l],[m,.25*l],[0,0]];c.geometry=this._toPolygon(m,k.x,k.y);c.setGeometry(c.geometry);
break;case h.DOWN_ARROW:this._hideTooltip();m=0<=l?[[0,l],[-m,.75*l],[-.5*m,.75*l],[-.5*m,0],[.5*m,0],[.5*m,.75*l],[m,.75*l],[0,l]]:[[0,0],[-m,.25*l],[-.5*m,.25*l],[-.5*m,l],[.5*m,l],[.5*m,.25*l],[m,.25*l],[0,0]];c.geometry=this._toPolygon(m,k.x,k.y);c.setGeometry(c.geometry);break;case h.RECTANGLE:this._hideTooltip();m=[[0,0],[m,0],[m,l],[0,l],[0,0]];c.geometry=this._toPolygon(m,k.x,k.y);c.setGeometry(c.geometry);break;case h.LINE:c.setGeometry(p.mixin(c.geometry,{paths:[[[d.x,d.y],[e.x,e.y]]]}));
break;case h.EXTENT:c&&g.graphics.remove(c,!0);c=new E(this._normalizeRect(d,e,f));c._originOnly=!0;this._graphic=g.graphics.add(new y(c,this.fillSymbol),!0);g.snappingManager&&g.snappingManager._setGraphic(this._graphic);break;case h.FREEHAND_POLYLINE:this._hideTooltip();if(!1===this._canDrawFreehandPoint(b)){q("esri-touch")&&b.preventDefault();return}this._points.push(b.mapPoint.offset(0,0));c.geometry._insertPoints([e.offset(0,0)],0);c.setGeometry(c.geometry);break;case h.FREEHAND_POLYGON:this._hideTooltip();
if(!1===this._canDrawFreehandPoint(b)){q("esri-touch")&&b.preventDefault();return}this._points.push(b.mapPoint.offset(0,0));c.geometry._insertPoints([e.offset(0,0)],0);c.setGeometry(c.geometry)}q("esri-touch")&&b.preventDefault()}},_canDrawFreehandPoint:function(b){if(!this._oldPoint)return!1;var c=this._oldPoint.x-b.screenPoint.x,d=this._oldPoint.y-b.screenPoint.y,e=this._options.tolerance;if((0>c?-1*c:c)<e&&(0>d?-1*d:d)<e)return!1;c=new Date;if(c-this._startTime<this._options.drawTime)return!1;
this._startTime=c;this._oldPoint=b.screenPoint;return!0},_onMouseUpHandler:function(b){if(this._dragged&&this._graphic){0===this._points.length&&this._points.push(b.mapPoint.offset(0,0));var c;this.map.snappingManager&&(c=this.map.snappingManager._snappingPoint);var d=this._points[0];c=c||b.mapPoint;var e=this.map.spatialReference,g=D,f;switch(this._geometryType){case g.CIRCLE:case g.ELLIPSE:case g.TRIANGLE:case g.ARROW:case g.LEFT_ARROW:case g.RIGHT_ARROW:case g.UP_ARROW:case g.DOWN_ARROW:case g.RECTANGLE:f=
this._graphic.geometry;break;case g.LINE:f=new A({paths:[[[d.x,d.y],[c.x,c.y]]],spatialReference:e});break;case g.EXTENT:f=(new E(this._normalizeRect(d,c,e))).getExtent();break;case g.FREEHAND_POLYLINE:f=new A(e);f.addPath([].concat(this._points,[c.offset(0,0)]));break;case g.FREEHAND_POLYGON:f=new C(e),d=[].concat(this._points,[c.offset(0,0),this._points[0].offset(0,0)]),C.prototype.isClockwise(d)||this.respectDrawingVertexOrder||d.reverse(),f.addRing(d)}q("esri-touch")&&b.preventDefault();this._clear();
this._drawEnd(f)}else this._clear()},_isPointToPointTool:function(b){switch(b){case D.POLYLINE:case D.POLYGON:case D.MULTI_POINT:return!0;default:return!1}},_onClickHandler:function(b){var c;this.map.snappingManager&&(c=this.map.snappingManager._snappingPoint);c=c||b.mapPoint;b=this.map;var d=b.toScreen(c),e=D;if(this._isPointToPointTool(this._geometryType)){var g=this._points[this._points.length-1];if(c&&g&&c.x===g.x&&c.y===g.y)return;this._points.push(c.offset(0,0))}switch(this._geometryType){case e.POINT:this.onDrawStart();
this._drawEnd(c.offset(0,0));this._setTooltipMessage(0);break;case e.POLYLINE:1===this._points.length?(c=new A(b.spatialReference),c.addPath(this._points),this._graphic=b.graphics.add(new y(c,this.lineSymbol),!0),b.snappingManager&&b.snappingManager._setGraphic(this._graphic),this._onMouseMoveHandler_connect=l.connect(b,"onMouseMove",this._onMouseMoveHandler),this.onDrawStart()):(this._graphic.geometry._insertPoints([c.offset(0,0)],0),this._graphic.setGeometry(this._graphic.geometry).setSymbol(this.lineSymbol));
break;case e.POLYGON:1===this._points.length?(c=new C(b.spatialReference),c.addRing(this._points),this._graphic=b.graphics.add(new y(c,this.fillSymbol),!0),b.snappingManager&&b.snappingManager._setGraphic(this._graphic),this._onMouseMoveHandler_connect=l.connect(b,"onMouseMove",this._onMouseMoveHandler),this.onDrawStart()):(this._graphic.geometry._insertPoints([c.offset(0,0)],0),this._graphic.setGeometry(this._graphic.geometry).setSymbol(this.fillSymbol));break;case e.MULTI_POINT:c=this._points;1===
c.length?(d=new F(b.spatialReference),d.addPoint(c[c.length-1]),this._graphic=b.graphics.add(new y(d,this.markerSymbol),!0),b.snappingManager&&b.snappingManager._setGraphic(this._graphic),this.onDrawStart()):(this._graphic.geometry.addPoint(c[c.length-1]),this._graphic.setGeometry(this._graphic.geometry).setSymbol(this.markerSymbol));break;case e.ARROW:this._addShape([[0,0],[-24,24],[-24,12],[-96,12],[-96,-12],[-24,-12],[-24,-24],[0,0]],d.x,d.y);break;case e.LEFT_ARROW:this._addShape([[0,0],[24,24],
[24,12],[96,12],[96,-12],[24,-12],[24,-24],[0,0]],d.x,d.y);break;case e.RIGHT_ARROW:this._addShape([[0,0],[-24,24],[-24,12],[-96,12],[-96,-12],[-24,-12],[-24,-24],[0,0]],d.x,d.y);break;case e.UP_ARROW:this._addShape([[0,0],[-24,24],[-12,24],[-12,96],[12,96],[12,24],[24,24],[0,0]],d.x,d.y);break;case e.DOWN_ARROW:this._addShape([[0,0],[-24,-24],[-12,-24],[-12,-96],[12,-96],[12,-24],[24,-24],[0,0]],d.x,d.y);break;case e.TRIANGLE:this._addShape([[0,-48],[41.56921938165306,24],[-41.56921938165306,24],
[0,-48]],d.x,d.y);break;case e.RECTANGLE:this._addShape([[0,-96],[96,-96],[96,0],[0,0],[0,-96]],d.x-48,d.y+48);break;case e.CIRCLE:this._clear();this.onDrawStart();this._drawEnd(C.createCircle({center:d,r:48,numberOfPoints:60,map:b}));break;case e.ELLIPSE:this._clear(),this.onDrawStart(),this._drawEnd(C.createEllipse({center:d,longAxis:48,shortAxis:24,numberOfPoints:60,map:b}))}this._setTooltipMessage(this._points.length)},_addShape:function(b,c,d){this._setTooltipMessage(0);this._clear();this.onDrawStart();
this._drawEnd(this._toPolygon(b,c,d))},_toPolygon:function(b,c,d){var e=this.map,g=new C(e.spatialReference);g.addRing(f.map(b,function(b){return e.toMap({x:b[0]+c,y:b[1]+d})}));return g},_onDblClickHandler:function(b){var c,d=this._points,e=this.map.spatialReference,g=D;q("esri-touch")&&d.push(b.mapPoint);var h=d[d.length-1],k=d[d.length-2],d=h&&k&&h.x===k.x&&h.y===k.y?d.slice(0,d.length-1):d.slice(0,d.length);switch(this._geometryType){case g.POLYLINE:if(!this._graphic||2>d.length){l.disconnect(this._onMouseMoveHandler_connect);
this._clear();this._onClickHandler(b);return}c=new A(e);c.addPath([].concat(d));break;case g.POLYGON:if(!this._graphic||3>d.length)return;c=new C(e);b=[].concat(d,[d[0].offset(0,0)]);C.prototype.isClockwise(b)||this.respectDrawingVertexOrder||b.reverse();c.addRing(b);break;case g.MULTI_POINT:c=new F(e),f.forEach(d,function(b){c.addPoint(b)})}l.disconnect(this._onMouseMoveHandler_connect);this._clear();this._setTooltipMessage(0);this._drawEnd(c)},_onKeyDownHandler:function(b){b.keyCode===e.ESCAPE&&
(l.disconnect(this._onMouseMoveHandler_connect),this._clear(),this._setTooltipMessage(0))},_toggleTooltip:function(e){this._options.showTooltips&&(e?this._tooltip||(this._tooltip=c.create("div",{"class":"esriMapTooltip"},this.map.container),d.isBodyLtr()||b.set(this._tooltip,"direction","rtl"),this._tooltip.style.display="none",this._tooltip.style.position="fixed",this._setTooltipMessage(0),this._onTooltipMouseEnterHandler_connect=l.connect(this.map,"onMouseOver",this._updateTooltip),this._onTooltipMouseLeaveHandler_connect=
l.connect(this.map,"onMouseOut",this._hideTooltip),this._onTooltipMouseMoveHandler_connect=l.connect(this.map,"onMouseMove",this._updateTooltip)):this._tooltip&&(l.disconnect(this._onTooltipMouseEnterHandler_connect),l.disconnect(this._onTooltipMouseLeaveHandler_connect),l.disconnect(this._onTooltipMouseMoveHandler_connect),c.destroy(this._tooltip),this._tooltip=null))},_hideTooltip:function(){var b=this._tooltip;b&&(b.style.display="none")},_setTooltipMessage:function(b){var c=this._tooltip;if(c){var d=
"";switch(this._geometryType){case D.POINT:d=H.toolbars.draw.addPoint;break;case D.ARROW:case D.LEFT_ARROW:case D.RIGHT_ARROW:case D.UP_ARROW:case D.DOWN_ARROW:case D.TRIANGLE:case D.RECTANGLE:case D.CIRCLE:case D.ELLIPSE:d=H.toolbars.draw.addShape;break;case D.LINE:case D.EXTENT:case D.FREEHAND_POLYLINE:case D.FREEHAND_POLYGON:d=H.toolbars.draw.freehand;break;case D.POLYLINE:case D.POLYGON:d=H.toolbars.draw.start;1===b?d=H.toolbars.draw.resume:2<=b&&(d=H.toolbars.draw.complete);break;case D.MULTI_POINT:d=
H.toolbars.draw.addMultipoint,1<=b&&(d=H.toolbars.draw.finish)}c.innerHTML=d}},_updateTooltip:function(c){var d=this._tooltip;if(d){var e;c.clientX||c.pageY?(e=c.clientX,c=c.clientY):(e=c.clientX+h.body().scrollLeft-h.body().clientLeft,c=c.clientY+h.body().scrollTop-h.body().clientTop);d.style.display="none";b.set(d,{left:e+this._options.tooltipOffset+"px",top:c+"px"});d.style.display=""}},_redrawGraphic:function(b,c,d,e){(d||this.map.wrapAround180)&&(b=this._graphic)&&b.setGeometry(b.geometry)},
onActivate:function(){},onDeactivate:function(){},onDrawComplete:function(){},onDrawStart:function(){},onDrawEnd:function(){}});p.mixin(D,{POINT:"point",MULTI_POINT:"multipoint",LINE:"line",EXTENT:"extent",POLYLINE:"polyline",POLYGON:"polygon",FREEHAND_POLYLINE:"freehandpolyline",FREEHAND_POLYGON:"freehandpolygon",ARROW:"arrow",LEFT_ARROW:"leftarrow",RIGHT_ARROW:"rightarrow",UP_ARROW:"uparrow",DOWN_ARROW:"downarrow",TRIANGLE:"triangle",CIRCLE:"circle",ELLIPSE:"ellipse",RECTANGLE:"rectangle"});q("extend-esri")&&
p.setObject("toolbars.Draw",D,r);return D})},"esri/toolbars/_toolbar":function(){define("esri/toolbars/_toolbar",["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../Evented"],function(m,p,f,l,k){m=m([k],{declaredClass:"esri.toolbars._Toolbar",constructor:function(f){this.map=f},_cursors:{move:"pointer","move-v":"pointer","move-gv":"pointer",box0:"nw-resize",box1:"n-resize",box2:"ne-resize",box3:"e-resize",box4:"se-resize",box5:"s-resize",box6:"sw-resize",box7:"w-resize",box8:"pointer"},
_deactivateMapTools:function(f,k,g,e){var c=this.map;f&&(this._mapNavState={isDoubleClickZoom:c.isDoubleClickZoom,isClickRecenter:c.isClickRecenter,isPan:c.isPan,isRubberBandZoom:c.isRubberBandZoom,isKeyboardNavigation:c.isKeyboardNavigation,isScrollWheelZoom:c.isScrollWheelZoom},c.disableDoubleClickZoom(),c.disableClickRecenter(),c.disablePan(),c.disableRubberBandZoom(),c.disableKeyboardNavigation());k&&c.hideZoomSlider();g&&c.hidePanArrows();e&&c.graphics.disableMouseEvents()},_activateMapTools:function(f,
k,g,e){var c=this.map,b=this._mapNavState;f&&b&&(b.isDoubleClickZoom&&c.enableDoubleClickZoom(),b.isClickRecenter&&c.enableClickRecenter(),b.isPan&&c.enablePan(),b.isRubberBandZoom&&c.enableRubberBandZoom(),b.isKeyboardNavigation&&c.enableKeyboardNavigation(),b.isScrollWheelZoom&&c.enableScrollWheelZoom());k&&c.showZoomSlider();g&&c.showPanArrows();e&&c.graphics.enableMouseEvents()},_deactivateScrollWheel:function(){var f=this.map;this._scrollWheelState={isScrollWheelZoom:f.isScrollWheelZoom,isScrollWheelPan:f.isScrollWheelPan};
f.disableScrollWheelZoom();f.disableScrollWheelPan()},_activateScrollWheel:function(){var f=this.map,k=this._scrollWheelState;k&&(k.isScrollWheelZoom&&f.enableScrollWheelZoom(),k.isScrollWheelPan&&f.enableScrollWheelPan())}});f("extend-esri")&&p.setObject("toolbars._Toolbar",m,l);return m})},"esri/toolbars/navigation":function(){define("esri/toolbars/navigation","dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/_base/Color dojo/has ../kernel ./_toolbar ../undoManager ../OperationBase ../geometry/Extent ../geometry/Rect ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../graphic".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v){var u=m(q,{declaredClass:"esri.toolbars.Navigation",_eventMap:{"extent-history-change":!0},constructor:function(b){this.zoomSymbol=new r(r.STYLE_SOLID,new d(d.STYLE_SOLID,new l([255,0,0]),2),new l([0,0,0,.25]));f.connect(b,"onUnload",this,"_cleanUp");this.map=b;this._undoManager=new g({maxOperations:-1});this._normalizeRect=p.hitch(this,this._normalizeRect);this._onMouseDownHandler=p.hitch(this,this._onMouseDownHandler);this._onMouseUpHandler=p.hitch(this,this._onMouseUpHandler);
this._onMouseDragHandler=p.hitch(this,this._onMouseDragHandler);this._swipeCheck=k("esri-pointer");this._onExtentChangeHandler_connect=f.connect(b,"onExtentChange",this,"_extentChangeHandler");this._onMapLoad_connect=f.connect(b,"onLoad",this,"_mapLoadHandler");b.loaded&&b.extent&&(this._currentExtent=b.extent)},_mapLoadHandler:function(){this._currentExtent=this.map.extent},_navType:null,_start:null,_graphic:null,_prevExtent:!1,_currentExtent:null,_preExtent:null,_cleanUp:function(b){f.disconnect(this._onExtentChangeHandler_connect);
f.disconnect(this._onMapLoad_connect)},activate:function(b){var c=this.map;this._graphic||(this._deactivateMapTools(!0,!1,!1,!0),this._graphic=new v(null,this.zoomSymbol));switch(b){case u.ZOOM_IN:case u.ZOOM_OUT:this._deactivate();this._swipeCheck?(this._onMouseDownHandler_connect=f.connect(c,"onSwipeStart",this,"_onMouseDownHandler"),this._onMouseDragHandler_connect=f.connect(c,"onSwipeMove",this,"_onMouseDragHandler"),this._onMouseUpHandler_connect=f.connect(c,"onSwipeEnd",this,"_onMouseUpHandler")):
(this._onMouseDownHandler_connect=f.connect(c,"onMouseDown",this,"_onMouseDownHandler"),this._onMouseDragHandler_connect=f.connect(c,"onMouseDrag",this,"_onMouseDragHandler"),this._onMouseUpHandler_connect=f.connect(c,"onMouseUp",this,"_onMouseUpHandler"));this._navType=b;break;case u.PAN:this._deactivate(),c.enablePan(),this._navType=b}},_extentChangeHandler:function(b){this._prevExtent||this._nextExtent?this._currentExtent=b:(this._preExtent=this._currentExtent,this._currentExtent=b,this._preExtent&&
this._currentExtent&&(b=new u.MapExtent({map:this.map,preExtent:this._preExtent,currentExtent:this._currentExtent}),this._undoManager.add(b)));this._prevExtent=this._nextExtent=!1;this.onExtentHistoryChange()},_deactivate:function(){var b=this._navType;if(b===u.PAN)this.map.disablePan();else if(b===u.ZOOM_IN||b===u.ZOOM_OUT)f.disconnect(this._onMouseDownHandler_connect),f.disconnect(this._onMouseDragHandler_connect),f.disconnect(this._onMouseUpHandler_connect)},_normalizeRect:function(b,c,d){var e=
b.x;b=b.y;var g=c.x;c=c.y;return{x:Math.min(e,g),y:Math.max(b,c),width:Math.abs(e-g),height:Math.abs(b-c),spatialReference:d}},_onMouseDownHandler:function(b){this._start=b.mapPoint},_onMouseDragHandler:function(c){var d=this._graphic,e=this.map.graphics;e.remove(d,!0);d.setGeometry(new b(this._normalizeRect(this._start,c.mapPoint,this.map.spatialReference)));e.add(d,!0)},_onMouseUpHandler:function(d){var e=this.map,g=this._normalizeRect(this._start,d.mapPoint,e.spatialReference);e.graphics.remove(this._graphic,
!0);if(0!==g.width||0!==g.height)if(this._navType===u.ZOOM_IN)e.setExtent((new b(g)).getExtent());else{d=e.toScreen(g);var g=e.toScreen({x:g.x+g.width,y:g.y,spatialReference:e.spatialReference}),f=e.extent.getWidth();d=(f*e.width/Math.abs(g.x-d.x)-f)/2;g=e.extent;e.setExtent(new c(g.xmin-d,g.ymin-d,g.xmax+d,g.ymax+d,g.spatialReference))}},deactivate:function(){this._deactivate();this._graphic&&this.map.graphics.remove(this._graphic,!0);this._navType=this._start=this._graphic=null;this._activateMapTools(!0,
!1,!1,!0)},setZoomSymbol:function(b){this.zoomSymbol=b},isFirstExtent:function(){return!this._undoManager.canUndo},isLastExtent:function(){return!this._undoManager.canRedo},zoomToFullExtent:function(){var b=this.map;b.setExtent(b.getLayer(b.layerIds[0]).initialExtent)},zoomToPrevExtent:function(){this._undoManager.canUndo&&(this._prevExtent=!0,this._undoManager.undo())},zoomToNextExtent:function(){this._undoManager.canRedo&&(this._nextExtent=!0,this._undoManager.redo())},onExtentHistoryChange:function(){}});
p.mixin(u,{ZOOM_IN:"zoomin",ZOOM_OUT:"zoomout",PAN:"pan"});u.MapExtent=m(e,{declaredClass:"esri.toolbars.MapExtent",label:"extent changes",constructor:function(b){this.map=b.map;this.preExtent=b.preExtent;this.currentExtent=b.currentExtent},performRedo:function(){this.map.setExtent(this.currentExtent)},performUndo:function(){this.map.setExtent(this.preExtent)}});k("extend-esri")&&(p.setObject("toolbars.Navigation",u,h),p.setObject("toolbars.MapExtent",u.MapExtent,h));return u})},"esri/undoManager":function(){define("esri/undoManager",
"dojo/_base/declare dojo/_base/lang dojo/has dojo/when ./kernel ./Evented dojo/has!extend-esri?./OperationBase".split(" "),function(m,p,f,l,k,h){m=m([h],{declaredClass:"esri.UndoManager",maxOperations:10,canUndo:!1,canRedo:!1,position:0,length:0,onUndo:function(){},onRedo:function(){},onUndoComplete:function(){},onRedoComplete:function(){},onAdd:function(){},onChange:function(){},constructor:function(f){f=f||{};f.maxOperations&&(this.maxOperations=f.maxOperations);this._historyStack=[]},add:function(f){if(0<
this.maxOperations)for(;this._historyStack.length>=this.maxOperations;)this._historyStack.shift();this._historyStack.splice(this.position,0,f);this.position++;this.clearRedo();this.onAdd();this._checkAvailability()},undo:function(){if(0===this.position)return null;var f=this.peekUndo();this.position--;f?(f=f.performUndo(),this.onUndo(),this._checkAvailability(),l(f).then(p.hitch(this,this.onUndoComplete))):(this.onUndo(),this._checkAvailability())},redo:function(){if(this.position===this._historyStack.length)return null;
var f=this.peekRedo();this.position++;f?(f=f.performRedo(),this.onRedo(),this._checkAvailability(),l(f).then(p.hitch(this,this.onRedoComplete))):(this.onRedo(),this._checkAvailability())},_checkAvailability:function(){this.length=this._historyStack.length;0===this.length?this.canUndo=this.canRedo=!1:0===this.position?(this.canRedo=!0,this.canUndo=!1):this.position===this.length?(this.canUndo=!0,this.canRedo=!1):this.canRedo=this.canUndo=!0;this.onChange()},clearUndo:function(){this._historyStack.splice(0,
this.position);this.position=0;this._checkAvailability()},clearRedo:function(){this._historyStack.splice(this.position,this._historyStack.length-this.position);this.position=this._historyStack.length;this._checkAvailability()},peekUndo:function(){if(0<this._historyStack.length&&0<this.position)return this.get(this.position-1)},peekRedo:function(){if(0<this._historyStack.length&&this.position<this._historyStack.length)return this.get(this.position)},get:function(f){return this._historyStack[f]},remove:function(f){0<
this._historyStack.length&&(this._historyStack.splice(f,1),0<this.position&&f<this.position&&this.position--,this._checkAvailability())},destroy:function(){this._historyStack=null}});f("extend-esri")&&(k.UndoManager=m);return m})},"esri/OperationBase":function(){define("esri/OperationBase",["dojo/_base/declare","dojo/has","./kernel"],function(m,p,f){m=m(null,{declaredClass:"esri.OperationBase",type:"not implemented",label:"not implemented",constructor:function(f){f=f||{};f.label&&(this.label=f.label)},
performUndo:function(){},performRedo:function(){}});p("extend-esri")&&(f.OperationBase=m);return m})},"sixmaps/app/SplashPane":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/Dialog","sixmaps/dijits/Help"],function(m,p,f,l){return m("sixmaps.app.SplashPane",[f],{map:null,appToolbar:null,title:"Welcome \x26 Help","class":"helpPane noFade",draggable:!1,setExtent:!0,splashParams:null,helpParams:null,localStore:null,constructor:function(f,h){this.helpParams={};f&&m.safeMixin(this,f)},
postCreate:function(){this.inherited(arguments);this.helpParams=p.mixin({tabParams:this.tabs,localStore:this.localStore},this.helpParams);this.helpNode=new l(this.helpParams);this.map&&this.helpNode.mapExtentConfig&&this.helpNode.mapExtentConfig.set("map",this.map);this.helpNode.mapExtentConfig&&this.helpNode.mapExtentConfig.set("setExtent",this.setExtent)},startup:function(){this.helpNode.placeAt(this.containerNode);this.helpNode.startup()},show:function(){this.inherited(arguments);this.onShow()},
onShow:function(){this.appToolbar&&this.appToolbar.set("disabled",!0)},onHide:function(){this.appToolbar&&this.appToolbar.set("disabled",!1)}})})},"sixmaps/dijits/Help":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/sniff dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-form dojo/has dojo/html dojo/parser dojo/query dojo/request/xhr dojo/text!sixmaps/dijits/Help.html dijit/form/Button dijit/form/CheckBox dijit/form/Form dijit/form/SimpleTextarea dijit/form/ValidationTextBox dijit/layout/BorderContainer dijit/layout/ContentPane dijit/layout/StackContainer dijit/layout/TabContainer dijit/layout/TabController dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dijit/registry sixmaps/map/MapExtentConfigStore sixmaps/util/Analytics".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x,w,y,z,B,A,C,F,E,H,D,G,I,P){return p("sixmaps.dijits.Help",[H,E,D],{templateString:v,isDisplayOnLoad:null,_usage:null,_usageActions:null,imagesUrl:"",channelsUrl:"",topicStore:null,tabParams:null,browserString:null,localStore:null,feedbackParams:null,feedbackPath:"/feedback/",constructor:function(b,c){b&&p.safeMixin(this,b);this.isDisplayOnLoad=this.localStore.get("showSplash");this.imagesUrl=require.toUrl("sixmaps/dijits/images/");this.baseUrl=require.toUrl("sixmaps//");
this.channelsUrl=require.toUrl("channels/");var d="";if(11>e("ie"))d="\x3cp\x3eSIX Maps has detected that you are using an old version of Internet Explorer.\x3cbr /\x3e\x3cbr /\x3eFor improved performance and appearance it is recommended \x3cbr/\x3ethat you use one of the following:\x3cdiv style\x3d'text-align: center; width: 100%'\x3e\x3ctable style\x3d'width: 80%; margin: 0 auto;'\x3e\x3ctr\x3e\x3ctd style\x3d'text-align: center; padding: 0 15px 0 15px'\x3e\x3ca href\x3d'//www.mozilla.com/' target\x3d'_blank'\x3e\x3cimg src\x3d'"+
require.toUrl("sixmaps/dijits/images/")+"firefox.png' title\x3d'Firefox' style\x3d'border:none;'/\x3e\x3cbr/\x3eFirefox\x3c/a\x3e\x3c/td\x3e\x3ctd style\x3d'text-align: center; padding: 0 15px 0 15px'\x3e\x3ca href\x3d'//www.google.com/chrome/' target\x3d'_blank'\x3e\x3cimg src\x3d'"+require.toUrl("sixmaps/dijits/images/")+"chrome.png' title\x3d'Chrome' style\x3d'border:none;'/\x3e\x3cbr/\x3eChrome\x3c/a\x3e\x3c/td\x3e\x3ctd style\x3d'text-align: center; padding: 15px 15px 0 15px'\x3e\x3ca href\x3d'//www.microsoft.com/en-au/download/internet-explorer.aspx' target\x3d'_blank'\x3e\x3cimg src\x3d'"+
require.toUrl("sixmaps/dijits/images/")+"edge.png' title\x3d'Microsoft Edge' style\x3d'border:none;'/\x3e\x3cbr/\x3eInternet Explorer 11 \x3cbr/\x3e or Microsoft Edge\x3c/a\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e";else if(e("ff")||e("safari")||e("chrome"))4>e("ff")?d="\x3cp\x3eSIX Maps has detected that you are using an old version of Firefox.\x3cbr /\x3e\x3cbr /\x3eYou should update to the latest version \x3ca href\x3d'//www.mozilla.com/' target\x3d'_blank'\x3eHERE\x3c/a\x3e for improved performance":
1>e("chrome")?d="\x3cp\x3eSIX Maps has detected that you are using an old version of Chrome.\x3cbr /\x3e\x3cbr /\x3eYou should update to the latest version \x3ca href\x3d'//www.google.com/chrome/' target\x3d'_blank'\x3eHERE\x3c/a\x3e for improved performance":4>e("safari")&&(d="\x3cp\x3eSIX Maps has detected that you are using an old version of Safari.\x3cbr /\x3e\x3cbr /\x3eYou should update to the latest version \x3ca href\x3d'//www.apple.com/safari/download/' target\x3d'_blank'\x3eHERE\x3c/a\x3e for improved performance");
this.browserString=d},postCreate:function(){var b=this;this.inherited(arguments);this.checkboxNode.set("checked",b.localStore.get("showSplash"));this.setTopic("navHelp");b.embeddedTabContainer.startup();b.tabParams&&m.forEach(b.tabParams,function(c){b.addTab(c.title,c.content,c.selected)});b.browserMsgTab.innerHTML=b.browserString;if(b.feedbackParams&&b.feedbackParams.mailGroup){var c=q.create("input",{type:"hidden",name:"mailGroup",value:b.feedbackParams.mailGroup});b.feedbackForm.domNode.appendChild(c)}},
onActivate:function(){P("send","event","Tools - Help","Activate");this.stackContainer.selectedChildWidget==this.feedbackSubmitted&&this.feedbackReset()},onDeactivate:function(){},checkChanged:function(){this.checkboxNode.checked?this.localStore.set("showSplash",!0):this.localStore.remove("showSplash")},formSubmit:function(){var b=this;if(b.feedbackForm.validate())return P("send","event","Tools - Help","Feedback"),r(b.feedbackPath,{handleAs:"json",method:"POST",headers:{"Content-Type":"application/json"},
data:g.toJson(b.feedbackForm.domNode)}).then(function(d){!d.success&&c.set(b.feedbackMessage,"Unable to send feedback")},function(d){c.set(b.feedbackMessage,"An error occured while submitting feedback, please retry")}),b.stackContainer.forward(),!0;alert("Feedback form contains invalid data. Please correct before submitting...");return!1},ssHubOnClick:function(b){window.open(b.target.value)},submitOnClick:function(){this.feedbackForm.onSubmit()},feedbackReset:function(){this.stackContainer.back();
this.feedbackForm.reset()},listItemClick:function(b){b=b.target;P("send","event","Tools - Help","Help Topic",b.textContent);this.setTopic(k.get(b,"data-helpTopic"))},setTopic:function(b){var c=[];d("[data-helpTopic\x3d"+b+"]",this.helpStackContainer.domNode).forEach(function(b){c.push(b)});if(c.length){var e=G.byNode(c[0]);this.helpStackContainer.selectChild(e);b=d("[data-helpTopic\x3d"+b+"]",this.helpList)[0];d("li",this.helpList).forEach(function(b){h.remove(b,"helpContentSelected")});h.add(b,"helpContentSelected")}},
addTopic:function(b,c,d){q.create("li",{innerHTML:b,"data-helpTopic":c},this.helpList);d.topicId=c;b=new B({style:"overflow:auto;"});k.set(b.domNode,"data-helpTopic",c);c=f.clone(d.domNode);c.id+="_help";b.set("content",c);this.helpStackContainer.addChild(b)},addTab:function(b,c,d){b=new B({title:b,content:c});this.embeddedTabContainer.addChild(b);d&&this.embeddedTabContainer.selectChild(b)},addContributor:function(b,c){var d=q.create("div",{innerHTML:b});q.place(d,this.contributorsTab.getChildren()[0].containerNode,
c)}})})},"dijit/form/CheckBox":function(){require({cache:{"url:dijit/form/templates/CheckBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline" role\x3d"presentation"\r\n\t\x3e\x3cinput\r\n\t \t${!nameAttrSetting} type\x3d"${type}" role\x3d"${type}" aria-checked\x3d"false" ${checkedAttrSetting}\r\n\t\tclass\x3d"dijitReset dijitCheckBoxInput"\r\n\t\tdata-dojo-attach-point\x3d"focusNode"\r\n\t \tdata-dojo-attach-event\x3d"ondijitclick:_onClick"\r\n/\x3e\x3c/div\x3e\r\n'}});define("dijit/form/CheckBox",
"require dojo/_base/declare dojo/dom-attr dojo/has dojo/query dojo/ready ./ToggleButton ./_CheckBoxMixin dojo/text!./templates/CheckBox.html dojo/NodeList-dom ../a11yclick".split(" "),function(m,p,f,l,k,h,q,g,e){l("dijit-legacy-requires")&&h(0,function(){m(["dijit/form/RadioButton"])});return p("dijit.form.CheckBox",[q,g],{templateString:e,baseClass:"dijitCheckBox",_setValueAttr:function(c,b){"string"==typeof c&&(this.inherited(arguments),c=!0);this._created&&this.set("checked",c,b)},_getValueAttr:function(){return this.checked&&
this._get("value")},_setIconClassAttr:null,_setNameAttr:"focusNode",postMixInProperties:function(){this.inherited(arguments);this.checkedAttrSetting=""},_fillContent:function(){},_onFocus:function(){this.id&&k("label[for\x3d'"+this.id+"']").addClass("dijitFocusedLabel");this.inherited(arguments)},_onBlur:function(){this.id&&k("label[for\x3d'"+this.id+"']").removeClass("dijitFocusedLabel");this.inherited(arguments)}})})},"dijit/form/_CheckBoxMixin":function(){define("dijit/form/_CheckBoxMixin",["dojo/_base/declare",
"dojo/dom-attr"],function(m,p){return m("dijit.form._CheckBoxMixin",null,{type:"checkbox",value:"on",readOnly:!1,_aria_attr:"aria-checked",_setReadOnlyAttr:function(f){this._set("readOnly",f);p.set(this.focusNode,"readOnly",f)},_setLabelAttr:void 0,_getSubmitValue:function(f){return null==f||""===f?"on":f},_setValueAttr:function(f){f=this._getSubmitValue(f);this._set("value",f);p.set(this.focusNode,"value",f)},reset:function(){this.inherited(arguments);this._set("value",this._getSubmitValue(this.params.value));
p.set(this.focusNode,"value",this.value)},_onClick:function(f){return this.readOnly?(f.stopPropagation(),f.preventDefault(),!1):this.inherited(arguments)}})})},"dijit/form/SimpleTextarea":function(){define("dijit/form/SimpleTextarea",["dojo/_base/declare","dojo/dom-class","dojo/sniff","./TextBox"],function(m,p,f,l){return m("dijit.form.SimpleTextarea",l,{baseClass:"dijitTextBox dijitTextArea",rows:"3",cols:"20",templateString:"\x3ctextarea ${!nameAttrSetting} data-dojo-attach-point\x3d'focusNode,containerNode,textbox' autocomplete\x3d'off'\x3e\x3c/textarea\x3e",
postMixInProperties:function(){!this.value&&this.srcNodeRef&&(this.value=this.srcNodeRef.value);this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);f("ie")&&this.cols&&p.add(this.textbox,"dijitTextAreaCols")},filter:function(f){f&&(f=f.replace(/\r/g,""));return this.inherited(arguments)},_onInput:function(k){if(this.maxLength){var h=parseInt(this.maxLength),l=this.textbox.value.replace(/\r/g,""),h=l.length-h;if(0<h){var g=this.textbox;if(g.selectionStart){var e=g.selectionStart,
c=0;f("opera")&&(c=(this.textbox.value.substring(0,e).match(/\r/g)||[]).length);this.textbox.value=l.substring(0,e-h-c)+l.substring(e-c);g.setSelectionRange(e-h,e-h)}else this.ownerDocument.selection&&(g.focus(),l=this.ownerDocument.selection.createRange(),l.moveStart("character",-h),l.text="",l.select())}}this.inherited(arguments)}})})},"dijit/layout/BorderContainer":function(){define("dijit/layout/BorderContainer","dojo/_base/array dojo/cookie dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/on dojo/touch ../_WidgetBase ../_Widget ../_TemplatedMixin ./LayoutContainer ./utils".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t){var x=f("dijit.layout._Splitter",[r,v],{live:!0,templateString:'\x3cdiv class\x3d"dijitSplitter" data-dojo-attach-event\x3d"onkeydown:_onKeyDown,press:_startDrag,onmouseenter:_onMouse,onmouseleave:_onMouse" tabIndex\x3d"0" role\x3d"separator"\x3e\x3cdiv class\x3d"dijitSplitterThumb"\x3e\x3c/div\x3e\x3c/div\x3e',constructor:function(){this._handlers=[]},postMixInProperties:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region);
this._factor=/top|left/.test(this.region)?1:-1;this._cookieName=this.container.id+"_"+this.region},buildRendering:function(){this.inherited(arguments);l.add(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V"));if(this.container.persist){var b=p(this._cookieName);b&&(this.child.domNode.style[this.horizontal?"height":"width"]=b)}},_computeMaxSize:function(){var b=this.horizontal?"h":"w",c=h.getMarginBox(this.child.domNode)[b],d=m.filter(this.container.getChildren(),function(b){return"center"==b.region})[0],
b=h.getContentBox(d.domNode)[b]-10;return Math.min(this.child.maxSize,c+b)},_startDrag:function(d){this.cover||(this.cover=k.place("\x3cdiv class\x3ddijitSplitterCover\x3e\x3c/div\x3e",this.child.domNode,"after"));l.add(this.cover,"dijitSplitterCoverActive");this.fake&&k.destroy(this.fake);(this._resize=this.live)||((this.fake=this.domNode.cloneNode(!0)).removeAttribute("id"),l.add(this.domNode,"dijitSplitterShadow"),k.place(this.fake,this.domNode,"after"));l.add(this.domNode,"dijitSplitterActive dijitSplitter"+
(this.horizontal?"H":"V")+"Active");this.fake&&l.remove(this.fake,"dijitSplitterHover dijitSplitter"+(this.horizontal?"H":"V")+"Hover");var g=this._factor,f=this.horizontal,m=f?"pageY":"pageX",r=d[m],u=this.domNode.style,f=f?"h":"w",t=q.getComputedStyle(this.child.domNode),p=h.getMarginBox(this.child.domNode,t)[f],v=this._computeMaxSize(),w=Math.max(this.child.minSize,h.getPadBorderExtents(this.child.domNode,t)[f]+10),f=this.region,x="top"==f||"bottom"==f?"top":"left",y=parseInt(u[x],10),Q=this._resize,
O=e.hitch(this.container,"_layoutChildren",this.child.id),f=this.ownerDocument;this._handlers=this._handlers.concat([c(f,b.move,this._drag=function(b,c){b=b[m]-r;var d=g*b+p,e=Math.max(Math.min(d,v),w);(Q||c)&&O(e);u[x]=b+y+g*(e-d)+"px"}),c(f,"dragstart",function(b){b.stopPropagation();b.preventDefault()}),c(this.ownerDocumentBody,"selectstart",function(b){b.stopPropagation();b.preventDefault()}),c(f,b.release,e.hitch(this,"_stopDrag"))]);d.stopPropagation();d.preventDefault()},_onMouse:function(b){b=
"mouseover"==b.type||"mouseenter"==b.type;l.toggle(this.domNode,"dijitSplitterHover",b);l.toggle(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V")+"Hover",b)},_stopDrag:function(b){try{this.cover&&l.remove(this.cover,"dijitSplitterCoverActive"),this.fake&&k.destroy(this.fake),l.remove(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active dijitSplitterShadow"),this._drag(b),this._drag(b,!0)}finally{this._cleanupHandlers(),delete this._drag}this.container.persist&&
p(this._cookieName,this.child.domNode.style[this.horizontal?"height":"width"],{expires:365})},_cleanupHandlers:function(){for(var b;b=this._handlers.pop();)b.remove()},_onKeyDown:function(b){this._resize=!0;var c=this.horizontal,d=1;switch(b.keyCode){case c?g.UP_ARROW:g.LEFT_ARROW:d*=-1;case c?g.DOWN_ARROW:g.RIGHT_ARROW:break;default:return}c=h.getMarginSize(this.child.domNode)[c?"h":"w"]+this._factor*d;this.container._layoutChildren(this.child.id,Math.max(Math.min(c,this._computeMaxSize()),this.child.minSize));
b.stopPropagation();b.preventDefault()},destroy:function(){this._cleanupHandlers();delete this.child;delete this.container;delete this.cover;delete this.fake;this.inherited(arguments)}}),w=f("dijit.layout._Gutter",[r,v],{templateString:'\x3cdiv class\x3d"dijitGutter" role\x3d"presentation"\x3e\x3c/div\x3e',postMixInProperties:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region)},buildRendering:function(){this.inherited(arguments);l.add(this.domNode,"dijitGutter"+(this.horizontal?
"H":"V"))}});f=f("dijit.layout.BorderContainer",u,{gutters:!0,liveSplitters:!0,persist:!1,baseClass:"dijitBorderContainer",_splitterClass:x,postMixInProperties:function(){this.gutters||(this.baseClass+="NoGutter");this.inherited(arguments)},_setupChild:function(b){this.inherited(arguments);var c=b.region,d=b.isLeftToRight();"leading"==c&&(c=d?"left":"right");"trailing"==c&&(c=d?"right":"left");c&&"center"!=c&&(b.splitter||this.gutters)&&!b._splitterWidget&&(d=b.splitter?this._splitterClass:w,e.isString(d)&&
(d=e.getObject(d)),d=new d({id:b.id+"_splitter",container:this,child:b,region:c,live:this.liveSplitters}),d.isSplitter=!0,b._splitterWidget=d,c="bottom"==c||c==(this.isLeftToRight()?"right":"left"),k.place(d.domNode,b.domNode,c?"before":"after"),d.startup())},layout:function(){this._layoutChildren()},removeChild:function(b){var c=b._splitterWidget;c&&(c.destroy(),delete b._splitterWidget);this.inherited(arguments)},getChildren:function(){return m.filter(this.inherited(arguments),function(b){return!b.isSplitter})},
getSplitter:function(b){return m.filter(this.getChildren(),function(c){return c.region==b})[0]._splitterWidget},resize:function(b,c){if(!this.cs||!this.pe){var d=this.domNode;this.cs=q.getComputedStyle(d);this.pe=h.getPadExtents(d,this.cs);this.pe.r=q.toPixelValue(d,this.cs.paddingRight);this.pe.b=q.toPixelValue(d,this.cs.paddingBottom);q.set(d,"padding","0px")}this.inherited(arguments)},_layoutChildren:function(b,c){if(this._borderBox&&this._borderBox.h){var d=[];m.forEach(this._getOrderedChildren(),
function(b){d.push(b);b._splitterWidget&&d.push(b._splitterWidget)});t.layoutChildren(this.domNode,{l:this.pe.l,t:this.pe.t,w:this._borderBox.w-this.pe.w,h:this._borderBox.h-this.pe.h},d,b,c)}},destroyRecursive:function(){m.forEach(this.getChildren(),function(b){var c=b._splitterWidget;c&&c.destroy();delete b._splitterWidget});this.inherited(arguments)}});f.ChildWidgetProperties={splitter:!1,minSize:0,maxSize:Infinity};e.mixin(f.ChildWidgetProperties,u.ChildWidgetProperties);e.extend(d,f.ChildWidgetProperties);
f._Splitter=x;f._Gutter=w;return f})},"dijit/layout/LayoutContainer":function(){define("dijit/layout/LayoutContainer","dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-style dojo/_base/lang ../_WidgetBase ./_LayoutWidget ./utils".split(" "),function(m,p,f,l,k,h,q,g){p=p("dijit.layout.LayoutContainer",q,{design:"headline",baseClass:"dijitLayoutContainer",startup:function(){this._started||(m.forEach(this.getChildren(),this._setupChild,this),this.inherited(arguments))},_setupChild:function(e){this.inherited(arguments);
e.region&&f.add(e.domNode,this.baseClass+"Pane")},_getOrderedChildren:function(){var e=m.map(this.getChildren(),function(c,b){return{pane:c,weight:["center"==c.region?Infinity:0,c.layoutPriority,("sidebar"==this.design?1:-1)*(/top|bottom/.test(c.region)?1:-1),b]}},this);e.sort(function(c,b){c=c.weight;b=b.weight;for(var d=0;d<c.length;d++)if(c[d]!=b[d])return c[d]-b[d];return 0});return m.map(e,function(c){return c.pane})},layout:function(){g.layoutChildren(this.domNode,this._contentBox,this._getOrderedChildren())},
addChild:function(e,c){this.inherited(arguments);this._started&&this.layout()},removeChild:function(e){this.inherited(arguments);this._started&&this.layout();f.remove(e.domNode,this.baseClass+"Pane");l.set(e.domNode,{top:"auto",bottom:"auto",left:"auto",right:"auto",position:"static"});l.set(e.domNode,/top|bottom/.test(e.region)?"width":"height","auto")}});p.ChildWidgetProperties={region:"",layoutAlign:"",layoutPriority:0};k.extend(h,p.ChildWidgetProperties);return p})},"dijit/layout/_LayoutWidget":function(){define("dijit/layout/_LayoutWidget",
"dojo/_base/lang ../_Widget ../_Container ../_Contained ../Viewport dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style".split(" "),function(m,p,f,l,k,h,q,g,e){return h("dijit.layout._LayoutWidget",[p,f,l],{baseClass:"dijitLayoutContainer",isLayoutContainer:!0,_setTitleAttr:null,buildRendering:function(){this.inherited(arguments);q.add(this.domNode,"dijitContainer")},startup:function(){if(!this._started){this.inherited(arguments);var c=this.getParent&&this.getParent();c&&c.isLayoutContainer||
(this.resize(),this.own(k.on("resize",m.hitch(this,"resize"))))}},resize:function(c,b){var d=this.domNode;c&&g.setMarginBox(d,c);b=b||{};m.mixin(b,c||{});"h"in b&&"w"in b||(b=m.mixin(g.getMarginBox(d),b));c=e.getComputedStyle(d);var f=g.getMarginExtents(d,c),h=g.getBorderExtents(d,c);b=this._borderBox={w:b.w-(f.w+h.w),h:b.h-(f.h+h.h)};f=g.getPadExtents(d,c);this._contentBox={l:e.toPixelValue(d,c.paddingLeft),t:e.toPixelValue(d,c.paddingTop),w:b.w-f.w,h:b.h-f.h};this.layout()},layout:function(){},
_setupChild:function(c){q.add(c.domNode,this.baseClass+"-child "+(c.baseClass?this.baseClass+"-"+c.baseClass:""))},addChild:function(c,b){this.inherited(arguments);this._started&&this._setupChild(c)},removeChild:function(c){q.remove(c.domNode,this.baseClass+"-child"+(c.baseClass?" "+this.baseClass+"-"+c.baseClass:""));this.inherited(arguments)}})})},"dijit/_Contained":function(){define("dijit/_Contained",["dojo/_base/declare","./registry"],function(m,p){return m("dijit._Contained",null,{_getSibling:function(f){var l=
this.getParent();return l&&l._getSiblingOfChild&&l._getSiblingOfChild(this,"previous"==f?-1:1)||null},getPreviousSibling:function(){return this._getSibling("previous")},getNextSibling:function(){return this._getSibling("next")},getIndexInParent:function(){var f=this.getParent();return f&&f.getIndexOfChild?f.getIndexOfChild(this):-1}})})},"dijit/layout/StackContainer":function(){define("dijit/layout/StackContainer","dojo/_base/array dojo/cookie dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/has dojo/_base/lang dojo/on dojo/ready dojo/topic dojo/when ../registry ../_WidgetBase ./_LayoutWidget".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v){h("dijit-legacy-requires")&&e(0,function(){require(["dijit/layout/StackController"])});f=f("dijit.layout.StackContainer",v,{doLayout:!0,persist:!1,baseClass:"dijitStackContainer",buildRendering:function(){this.inherited(arguments);l.add(this.domNode,"dijitLayoutContainer")},postCreate:function(){this.inherited(arguments);this.own(g(this.domNode,"keydown",q.hitch(this,"_onKeyDown")))},startup:function(){if(!this._started){var b=this.getChildren();m.forEach(b,this._setupChild,
this);this.persist?this.selectedChildWidget=d.byId(p(this.id+"_selectedChild")):m.some(b,function(b){b.selected&&(this.selectedChildWidget=b);return b.selected},this);var e=this.selectedChildWidget;!e&&b[0]&&(e=this.selectedChildWidget=b[0],e.selected=!0);c.publish(this.id+"-startup",{children:b,selected:e,textDir:this.textDir});this.inherited(arguments)}},resize:function(){if(!this._hasBeenShown){this._hasBeenShown=!0;var b=this.selectedChildWidget;b&&this._showChild(b)}this.inherited(arguments)},
_setupChild:function(b){var c=b.domNode,d=k.place("\x3cdiv role\x3d'tabpanel' class\x3d'"+this.baseClass+"ChildWrapper dijitHidden'\x3e",b.domNode,"replace"),e=b["aria-label"]||b.title||b.label;e&&d.setAttribute("aria-label",e);k.place(c,d);b._wrapper=d;this.inherited(arguments);"none"==c.style.display&&(c.style.display="block");b.domNode.removeAttribute("title")},addChild:function(b,d){this.inherited(arguments);this._started&&(c.publish(this.id+"-addChild",b,d),this.layout(),this.selectedChildWidget||
this.selectChild(b))},removeChild:function(b){var d=m.indexOf(this.getChildren(),b);this.inherited(arguments);k.destroy(b._wrapper);delete b._wrapper;this._started&&c.publish(this.id+"-removeChild",b);if(!this._descendantsBeingDestroyed){if(this.selectedChildWidget===b&&(this.selectedChildWidget=void 0,this._started)){var e=this.getChildren();e.length&&this.selectChild(e[Math.max(d-1,0)])}this._started&&this.layout()}},selectChild:function(e,g){var f;e=d.byId(e);this.selectedChildWidget!=e&&(f=this._transition(e,
this.selectedChildWidget,g),this._set("selectedChildWidget",e),c.publish(this.id+"-selectChild",e,this._focused),this.persist&&p(this.id+"_selectedChild",this.selectedChildWidget.id));return b(f||!0)},_transition:function(b,c){c&&this._hideChild(c);c=this._showChild(b);b.resize&&(this.doLayout?b.resize(this._containerContentBox||this._contentBox):b.resize());return c},_adjacent:function(b){var c=this.getChildren(),d=m.indexOf(c,this.selectedChildWidget),d=d+(b?1:c.length-1);return c[d%c.length]},
forward:function(){return this.selectChild(this._adjacent(!0),!0)},back:function(){return this.selectChild(this._adjacent(!1),!0)},_onKeyDown:function(b){c.publish(this.id+"-containerKeyDown",{e:b,page:this})},layout:function(){var b=this.selectedChildWidget;b&&b.resize&&(this.doLayout?b.resize(this._containerContentBox||this._contentBox):b.resize())},_showChild:function(b){var c=this.getChildren();b.isFirstChild=b==c[0];b.isLastChild=b==c[c.length-1];b._set("selected",!0);b._wrapper&&l.replace(b._wrapper,
"dijitVisible","dijitHidden");return b._onShow&&b._onShow()||!0},_hideChild:function(b){b._set("selected",!1);b._wrapper&&l.replace(b._wrapper,"dijitHidden","dijitVisible");b.onHide&&b.onHide()},closeChild:function(b){if(!b.onClose||b.onClose(this,b))this.removeChild(b),b.destroyRecursive()},destroyDescendants:function(b){this._descendantsBeingDestroyed=!0;this.selectedChildWidget=void 0;m.forEach(this.getChildren(),function(c){b||this.removeChild(c);c.destroyRecursive(b)},this);this._descendantsBeingDestroyed=
!1}});f.ChildWidgetProperties={selected:!1,disabled:!1,closable:!1,iconClass:"dijitNoIcon",showTitle:!0};q.extend(r,f.ChildWidgetProperties);return f})},"dijit/layout/TabContainer":function(){define("dijit/layout/TabContainer",["dojo/_base/lang","dojo/_base/declare","./_TabContainerBase","./TabController","./ScrollingTabController"],function(m,p,f,l,k){return p("dijit.layout.TabContainer",f,{useMenu:!0,useSlider:!0,controllerWidget:"",_makeController:function(f){var h=this.baseClass+"-tabs"+(this.doLayout?
"":" dijitTabNoLayout");return new ("string"==typeof this.controllerWidget?m.getObject(this.controllerWidget):this.controllerWidget)({id:this.id+"_tablist",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,tabPosition:this.tabPosition,doLayout:this.doLayout,containerId:this.id,"class":h,nested:this.nested,useMenu:this.useMenu,useSlider:this.useSlider,tabStripClass:this.tabStrip?this.baseClass+(this.tabStrip?"":"No")+"Strip":null},f)},postMixInProperties:function(){this.inherited(arguments);
this.controllerWidget||(this.controllerWidget="top"!=this.tabPosition&&"bottom"!=this.tabPosition||this.nested?l:k)}})})},"dijit/layout/_TabContainerBase":function(){require({cache:{"url:dijit/layout/templates/TabContainer.html":'\x3cdiv class\x3d"dijitTabContainer"\x3e\r\n\t\x3cdiv class\x3d"dijitTabListWrapper" data-dojo-attach-point\x3d"tablistNode"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"tablistSpacer" class\x3d"dijitTabSpacer ${baseClass}-spacer"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTabPaneWrapper ${baseClass}-container" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n'}});
define("dijit/layout/_TabContainerBase","dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style ./StackContainer ./utils ../_TemplatedMixin dojo/text!./templates/TabContainer.html".split(" "),function(m,p,f,l,k,h,q,g){return m("dijit.layout._TabContainerBase",[k,q],{tabPosition:"top",baseClass:"dijitTabContainer",tabStrip:!1,nested:!1,templateString:g,postMixInProperties:function(){this.baseClass+=this.tabPosition.charAt(0).toUpperCase()+this.tabPosition.substr(1).replace(/-.*/,"");this.srcNodeRef&&
l.set(this.srcNodeRef,"visibility","hidden");this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);this.tablist=this._makeController(this.tablistNode);this.doLayout||p.add(this.domNode,"dijitTabContainerNoLayout");this.nested?(p.add(this.domNode,"dijitTabContainerNested"),p.add(this.tablist.containerNode,"dijitTabContainerTabListNested"),p.add(this.tablistSpacer,"dijitTabContainerSpacerNested"),p.add(this.containerNode,"dijitTabPaneWrapperNested")):p.add(this.domNode,"tabStrip-"+
(this.tabStrip?"enabled":"disabled"))},_setupChild:function(e){p.add(e.domNode,"dijitTabPane");this.inherited(arguments)},removeChild:function(e){p.remove(e.domNode,"dijitTabPane");this.inherited(arguments)},startup:function(){this._started||(this.tablist.startup(),this.inherited(arguments))},layout:function(){if(this._contentBox&&"undefined"!=typeof this._contentBox.l){var e=this.selectedChildWidget;if(this.doLayout){var c=this.tabPosition.replace(/-h/,"");this.tablist.region=c;c=[this.tablist,{domNode:this.tablistSpacer,
region:c},{domNode:this.containerNode,region:"center"}];h.layoutChildren(this.domNode,this._contentBox,c);this._containerContentBox=h.marginBox2contentBox(this.containerNode,c[2]);e&&e.resize&&e.resize(this._containerContentBox)}else{if(this.tablist.resize){c=this.tablist.domNode.style;c.width="0";var b=f.getContentBox(this.domNode).w;c.width="";this.tablist.resize({w:b})}e&&e.resize&&e.resize()}}},destroy:function(e){this.tablist&&this.tablist.destroy(e);this.inherited(arguments)}})})},"dijit/layout/TabController":function(){require({cache:{"url:dijit/layout/templates/_TabButton.html":'\x3cdiv role\x3d"presentation" data-dojo-attach-point\x3d"titleNode,innerDiv,tabContent" class\x3d"dijitTabInner dijitTabContent"\x3e\r\n\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTabButtonIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\x3cspan data-dojo-attach-point\x3d\'containerNode,focusNode\' class\x3d\'tabLabel\'\x3e\x3c/span\x3e\r\n\t\x3cspan class\x3d"dijitInline dijitTabCloseButton dijitTabCloseIcon" data-dojo-attach-point\x3d\'closeNode\'\r\n\t\t  role\x3d"presentation"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d\'closeText\' class\x3d\'dijitTabCloseText\'\x3e[x]\x3c/span\r\n\t\t\t\t\x3e\x3c/span\x3e\r\n\x3c/div\x3e\r\n'}});
define("dijit/layout/TabController","dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/has dojo/i18n dojo/_base/lang ./StackController ../registry ../Menu ../MenuItem dojo/text!./templates/_TabButton.html dojo/i18n!../nls/common".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d){d=m("dijit.layout._TabButton"+(k("dojo-bidi")?"_NoBidi":""),g.StackButton,{baseClass:"dijitTab",cssStateNodes:{closeNode:"dijitTabCloseButton"},templateString:d,_setNameAttr:"focusNode",scrollOnFocus:!1,buildRendering:function(){this.inherited(arguments);
p.setSelectable(this.containerNode,!1)},startup:function(){this.inherited(arguments);var b=this.domNode;this.defer(function(){b.className=b.className},1)},_setCloseButtonAttr:function(b){this._set("closeButton",b);l.toggle(this.domNode,"dijitClosable",b);this.closeNode.style.display=b?"":"none";b&&(b=h.getLocalization("dijit","common"),this.closeNode&&f.set(this.closeNode,"title",b.itemClose))},_setDisabledAttr:function(b){this.inherited(arguments);if(this.closeNode)if(b)f.remove(this.closeNode,"title");
else{var c=h.getLocalization("dijit","common");f.set(this.closeNode,"title",c.itemClose)}},_setLabelAttr:function(b){this.inherited(arguments);this.showLabel||this.params.title||(this.iconNode.alt=q.trim(this.containerNode.innerText||this.containerNode.textContent||""))}});k("dojo-bidi")&&(d=m("dijit.layout._TabButton",d,{_setLabelAttr:function(b){this.inherited(arguments);this.applyTextDir(this.iconNode,this.iconNode.alt)}}));m=m("dijit.layout.TabController",g,{baseClass:"dijitTabController",templateString:"\x3cdiv role\x3d'tablist' data-dojo-attach-event\x3d'onkeydown:onkeydown'\x3e\x3c/div\x3e",
tabPosition:"top",buttonWidget:d,buttonWidgetCloseClass:"dijitTabCloseButton",postCreate:function(){this.inherited(arguments);var d=new c({id:this.id+"_Menu",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,targetNodeIds:[this.domNode],selector:function(b){return l.contains(b,"dijitClosable")&&!l.contains(b,"dijitTabDisabled")}});this.own(d);var g=h.getLocalization("dijit","common"),f=this;d.addChild(new b({label:g.itemClose,ownerDocument:this.ownerDocument,dir:this.dir,
lang:this.lang,textDir:this.textDir,onClick:function(b){b=e.byNode(this.getParent().currentTarget);f.onCloseButtonClick(b.page)}}))}});m.TabButton=d;return m})},"dijit/layout/StackController":function(){define("dijit/layout/StackController","dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/keys dojo/_base/lang dojo/on dojo/topic ../focus ../registry ../_Widget ../_TemplatedMixin ../_Container ../form/ToggleButton dojo/touch".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d,r,
v){l=p("dijit.layout._StackButton",v,{tabIndex:"-1",closeButton:!1,_aria_attr:"aria-selected",buildRendering:function(b){this.inherited(arguments);(this.focusNode||this.domNode).setAttribute("role","tab")}});p=p("dijit.layout.StackController",[b,d,r],{baseClass:"dijitStackController",templateString:"\x3cspan role\x3d'tablist' data-dojo-attach-event\x3d'onkeydown'\x3e\x3c/span\x3e",containerId:"",buttonWidget:l,buttonWidgetCloseClass:"dijitStackCloseButton",pane2button:function(b){return c.byId(this.id+
"_"+b)},postCreate:function(){this.inherited(arguments);this.own(g.subscribe(this.containerId+"-startup",h.hitch(this,"onStartup")),g.subscribe(this.containerId+"-addChild",h.hitch(this,"onAddChild")),g.subscribe(this.containerId+"-removeChild",h.hitch(this,"onRemoveChild")),g.subscribe(this.containerId+"-selectChild",h.hitch(this,"onSelectChild")),g.subscribe(this.containerId+"-containerKeyDown",h.hitch(this,"onContainerKeyDown")));this.containerNode.dojoClick=!0;this.own(q(this.containerNode,"click",
h.hitch(this,function(b){var d=c.getEnclosingWidget(b.target);if(d!=this.containerNode&&!d.disabled&&d.page)for(b=b.target;b!==this.containerNode;b=b.parentNode)if(f.contains(b,this.buttonWidgetCloseClass)){this.onCloseButtonClick(d.page);break}else if(b==d.domNode){this.onButtonClick(d.page);break}})))},onStartup:function(b){this.textDir=b.textDir;m.forEach(b.children,this.onAddChild,this);if(b.selected)this.onSelectChild(b.selected);var d=c.byId(this.containerId).containerNode,e=h.hitch(this,"pane2button");
b={title:"label",showtitle:"showLabel",iconclass:"iconClass",closable:"closeButton",tooltip:"title",disabled:"disabled",textdir:"textdir"};var g=function(b,c){return q(d,"attrmodified-"+b,function(b){var d=e(b.detail&&b.detail.widget&&b.detail.widget.id);d&&d.set(c,b.detail.newValue)})},f;for(f in b)this.own(g(f,b[f]))},destroy:function(b){this.destroyDescendants(b);this.inherited(arguments)},onAddChild:function(b,c){var d=new (h.isString(this.buttonWidget)?h.getObject(this.buttonWidget):this.buttonWidget)({id:this.id+
"_"+b.id,name:this.id+"_"+b.id,label:b.title,disabled:b.disabled,ownerDocument:this.ownerDocument,dir:b.dir,lang:b.lang,textDir:b.textDir||this.textDir,showLabel:b.showTitle,iconClass:b.iconClass,closeButton:b.closable,title:b.tooltip,page:b});this.addChild(d,c);b.controlButton=d;if(!this._currentChild)this.onSelectChild(b);c=b._wrapper.getAttribute("aria-labelledby")?b._wrapper.getAttribute("aria-labelledby")+" "+d.id:d.id;b._wrapper.removeAttribute("aria-label");b._wrapper.setAttribute("aria-labelledby",
c)},onRemoveChild:function(b){this._currentChild===b&&(this._currentChild=null);var c=this.pane2button(b.id);c&&(this.removeChild(c),c.destroy());delete b.controlButton},onSelectChild:function(b){if(b){if(this._currentChild){var d=this.pane2button(this._currentChild.id);d.set("checked",!1);d.focusNode.setAttribute("tabIndex","-1")}d=this.pane2button(b.id);d.set("checked",!0);this._currentChild=b;d.focusNode.setAttribute("tabIndex","0");c.byId(this.containerId)}},onButtonClick:function(b){var d=this.pane2button(b.id);
e.focus(d.focusNode);this._currentChild&&this._currentChild.id===b.id&&d.set("checked",!0);c.byId(this.containerId).selectChild(b)},onCloseButtonClick:function(b){c.byId(this.containerId).closeChild(b);this._currentChild&&(b=this.pane2button(this._currentChild.id))&&e.focus(b.focusNode||b.domNode)},adjacent:function(b){this.isLeftToRight()||this.tabPosition&&!/top|bottom/.test(this.tabPosition)||(b=!b);var c=this.getChildren(),d=m.indexOf(c,this.pane2button(this._currentChild.id)),e=c[d],g;do d=(d+
(b?1:c.length-1))%c.length,g=c[d];while(g.disabled&&g!=e);return g},onkeydown:function(b,c){if(!this.disabled&&!b.altKey&&(c=null,b.ctrlKey||!b._djpage)){switch(b.keyCode){case k.LEFT_ARROW:case k.UP_ARROW:b._djpage||(c=!1);break;case k.PAGE_UP:b.ctrlKey&&(c=!1);break;case k.RIGHT_ARROW:case k.DOWN_ARROW:b._djpage||(c=!0);break;case k.PAGE_DOWN:b.ctrlKey&&(c=!0);break;case k.HOME:for(var d=this.getChildren(),e=0;e<d.length;e++){var g=d[e];if(!g.disabled){this.onButtonClick(g.page);break}}b.stopPropagation();
b.preventDefault();break;case k.END:d=this.getChildren();for(e=d.length-1;0<=e;e--)if(g=d[e],!g.disabled){this.onButtonClick(g.page);break}b.stopPropagation();b.preventDefault();break;case k.DELETE:case 87:this._currentChild.closable&&(b.keyCode==k.DELETE||b.ctrlKey)&&(this.onCloseButtonClick(this._currentChild),b.stopPropagation(),b.preventDefault());break;case k.TAB:b.ctrlKey&&(this.onButtonClick(this.adjacent(!b.shiftKey).page),b.stopPropagation(),b.preventDefault())}null!==c&&(this.onButtonClick(this.adjacent(c).page),
b.stopPropagation(),b.preventDefault())}},onContainerKeyDown:function(b){b.e._djpage=b.page;this.onkeydown(b.e)}});p.StackButton=l;return p})},"dijit/Menu":function(){define("dijit/Menu","require dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/_base/window dojo/window ./popup ./DropDownMenu dojo/ready".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t){b("dijit-legacy-requires")&&t(0,function(){m(["dijit/MenuItem",
"dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"])});return f("dijit.Menu",u,{constructor:function(){this._bindings=[]},targetNodeIds:[],selector:"",contextMenuForWindow:!1,leftClickToOpen:!1,refocus:!0,postCreate:function(){this.contextMenuForWindow?this.bindDomNode(this.ownerDocumentBody):p.forEach(this.targetNodeIds,this.bindDomNode,this);this.inherited(arguments)},_iframeContentWindow:function(b){return r.get(this._iframeContentDocument(b))||this._iframeContentDocument(b).__parent__||
b.name&&document.frames[b.name]||null},_iframeContentDocument:function(b){return b.contentDocument||b.contentWindow&&b.contentWindow.document||b.name&&document.frames[b.name]&&document.frames[b.name].document||null},bindDomNode:function(b){b=l.byId(b,this.ownerDocument);var f;if("iframe"==b.tagName.toLowerCase()){var h=b;f=this._iframeContentWindow(h);f=d.body(f.document)}else f=b==d.body(this.ownerDocument)?this.ownerDocument.documentElement:b;var q={node:b,iframe:h};k.set(b,"_dijitMenu"+this.id,
this._bindings.push(q));var m=e.hitch(this,function(b){var d=this.selector,e=d?function(b){return c.selector(d,b)}:function(b){return b},f=this;return[c(b,e(this.leftClickToOpen?"click":"contextmenu"),function(b){b.stopPropagation();b.preventDefault();(new Date).getTime()<f._lastKeyDown+500||f._scheduleOpen(this,h,{x:b.pageX,y:b.pageY},b.target)}),c(b,e("keydown"),function(b){if(93==b.keyCode||b.shiftKey&&b.keyCode==g.F10||f.leftClickToOpen&&b.keyCode==g.SPACE)b.stopPropagation(),b.preventDefault(),
f._scheduleOpen(this,h,null,b.target),f._lastKeyDown=(new Date).getTime()})]});q.connects=f?m(f):[];h&&(q.onloadHandler=e.hitch(this,function(){var b=this._iframeContentWindow(h),b=d.body(b.document);q.connects=m(b)}),h.addEventListener?h.addEventListener("load",q.onloadHandler,!1):h.attachEvent("onload",q.onloadHandler))},unBindDomNode:function(b){var c;try{c=l.byId(b,this.ownerDocument)}catch(A){return}b="_dijitMenu"+this.id;if(c&&k.has(c,b)){for(var d=k.get(c,b)-1,e=this._bindings[d],g;g=e.connects.pop();)g.remove();
(g=e.iframe)&&(g.removeEventListener?g.removeEventListener("load",e.onloadHandler,!1):g.detachEvent("onload",e.onloadHandler));k.remove(c,b);delete this._bindings[d]}},_scheduleOpen:function(b,c,d,e){this._openTimer||(this._openTimer=this.defer(function(){delete this._openTimer;this._openMyself({target:e,delegatedTarget:b,iframe:c,coords:d})},1))},_openMyself:function(c){function d(){t.refocus&&p&&p.focus();v.close(t)}var e=c.target,g=c.iframe,f=c.coords,k=!f;this.currentTarget=c.delegatedTarget;
if(f){if(g){c=h.position(g,!0);var e=this._iframeContentWindow(g),e=h.docScroll(e.document),m=q.getComputedStyle(g),r=q.toPixelValue,u=(b("ie")&&b("quirks")?0:r(g,m.paddingLeft))+(b("ie")&&b("quirks")?r(g,m.borderLeftWidth):0),g=(b("ie")&&b("quirks")?0:r(g,m.paddingTop))+(b("ie")&&b("quirks")?r(g,m.borderTopWidth):0);f.x+=c.x+u-e.x;f.y+=c.y+g-e.y}}else f=h.position(e,!0),f.x+=10,f.y+=10;var t=this,g=this._focusManager.get("prevNode");c=this._focusManager.get("curNode");var p=!c||l.isDescendant(c,
this.domNode)?g:c;v.open({popup:this,x:f.x,y:f.y,onExecute:d,onCancel:d,orient:this.isLeftToRight()?"L":"R"});this.focus();k||this.defer(function(){this._cleanUp(!0)});this._onBlur=function(){this.inherited("_onBlur",arguments);v.close(this)}},destroy:function(){p.forEach(this._bindings,function(b){b&&this.unBindDomNode(b.node)},this);this.inherited(arguments)}})})},"dijit/DropDownMenu":function(){require({cache:{"url:dijit/templates/Menu.html":'\x3ctable class\x3d"dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable" role\x3d"menu" tabIndex\x3d"${tabIndex}"\r\n\t   cellspacing\x3d"0"\x3e\r\n\t\x3ctbody class\x3d"dijitReset" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/tbody\x3e\r\n\x3c/table\x3e\r\n'}});
define("dijit/DropDownMenu",["dojo/_base/declare","dojo/keys","dojo/text!./templates/Menu.html","./_MenuBase"],function(m,p,f,l){return m("dijit.DropDownMenu",l,{templateString:f,baseClass:"dijitMenu",_onUpArrow:function(){this.focusPrev()},_onDownArrow:function(){this.focusNext()},_onRightArrow:function(f){this._moveToPopup(f);f.stopPropagation();f.preventDefault()},_onLeftArrow:function(f){if(this.parentMenu)if(this.parentMenu._isMenuBar)this.parentMenu.focusPrev();else this.onCancel(!1);else f.stopPropagation(),
f.preventDefault()}})})},"dijit/_MenuBase":function(){define("dijit/_MenuBase","dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/_base/lang dojo/mouse dojo/on dojo/window ./a11yclick ./registry ./_Widget ./_CssStateMixin ./_KeyNavContainer ./_TemplatedMixin".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u){return p("dijit._MenuBase",[d,u,v,r],{selected:null,_setSelectedAttr:function(b){this.selected!=b&&(this.selected&&(this.selected._setSelected(!1),this._onChildDeselect(this.selected)),
b&&b._setSelected(!0),this._set("selected",b))},activated:!1,_setActivatedAttr:function(b){k.toggle(this.domNode,"dijitMenuActive",b);k.toggle(this.domNode,"dijitMenuPassive",!b);this._set("activated",b)},parentMenu:null,popupDelay:500,passivePopupDelay:Infinity,autoFocus:!1,childSelector:function(c){var d=b.byNode(c);return c.parentNode==this.containerNode&&d&&d.focus},postCreate:function(){var d=this,e="string"==typeof this.childSelector?this.childSelector:h.hitch(this,"childSelector");this.own(g(this.containerNode,
g.selector(e,q.enter),function(){d.onItemHover(b.byNode(this))}),g(this.containerNode,g.selector(e,q.leave),function(){d.onItemUnhover(b.byNode(this))}),g(this.containerNode,g.selector(e,c),function(c){d.onItemClick(b.byNode(this),c);c.stopPropagation()}),g(this.containerNode,g.selector(e,"focusin"),function(){d._onItemFocus(b.byNode(this))}));this.inherited(arguments)},onKeyboardSearch:function(b,c,d,e){this.inherited(arguments);if(b&&(-1==e||b.popup&&1==e))this.onItemClick(b,c)},_keyboardSearchCompare:function(b,
c){return b.shortcutKey?c==b.shortcutKey.toLowerCase()?-1:0:this.inherited(arguments)?1:0},onExecute:function(){},onCancel:function(){},_moveToPopup:function(b){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled)this.onItemClick(this.focusedChild,b);else(b=this._getTopMenu())&&b._isMenuBar&&b.focusNext()},_onPopupHover:function(){this.set("selected",this.currentPopupItem);this._stopPendingCloseTimer()},onItemHover:function(b){this.activated?(this.set("selected",b),!b.popup||
b.disabled||this.hover_timer||(this.hover_timer=this.defer(function(){this._openItemPopup(b)},this.popupDelay))):Infinity>this.passivePopupDelay&&(this.passive_hover_timer&&this.passive_hover_timer.remove(),this.passive_hover_timer=this.defer(function(){this.onItemClick(b,{type:"click"})},this.passivePopupDelay));this._hoveredChild=b;b._set("hovering",!0)},_onChildDeselect:function(b){this._stopPopupTimer();this.currentPopupItem==b&&(this._stopPendingCloseTimer(),this._pendingClose_timer=this.defer(function(){this.currentPopupItem=
this._pendingClose_timer=null;b._closePopup()},this.popupDelay))},onItemUnhover:function(b){this._hoveredChild==b&&(this._hoveredChild=null);this.passive_hover_timer&&(this.passive_hover_timer.remove(),this.passive_hover_timer=null);b._set("hovering",!1)},_stopPopupTimer:function(){this.hover_timer&&(this.hover_timer=this.hover_timer.remove())},_stopPendingCloseTimer:function(){this._pendingClose_timer&&(this._pendingClose_timer=this._pendingClose_timer.remove())},_getTopMenu:function(){for(var b=
this;b.parentMenu;b=b.parentMenu);return b},onItemClick:function(b,c){this.passive_hover_timer&&this.passive_hover_timer.remove();this.focusChild(b);if(b.disabled)return!1;b.popup?(this.set("selected",b),this.set("activated",!0),c=/^key/.test(c._origType||c.type)||0==c.clientX&&0==c.clientY,this._openItemPopup(b,c)):(this.onExecute(),b._onClick?b._onClick(c):b.onClick(c))},_openItemPopup:function(b,c){if(b!=this.currentPopupItem){this.currentPopupItem&&(this._stopPendingCloseTimer(),this.currentPopupItem._closePopup());
this._stopPopupTimer();var d=b.popup;d.parentMenu=this;this.own(this._mouseoverHandle=g.once(d.domNode,"mouseover",h.hitch(this,"_onPopupHover")));var e=this;b._openPopup({parent:this,orient:this._orient||["after","before"],onCancel:function(){c&&e.focusChild(b);e._cleanUp()},onExecute:h.hitch(this,"_cleanUp",!0),onClose:function(){e._mouseoverHandle&&(e._mouseoverHandle.remove(),delete e._mouseoverHandle)}},c);this.currentPopupItem=b}},onOpen:function(){this.isShowingNow=!0;this.set("activated",
!0)},onClose:function(){this.set("activated",!1);this.set("selected",null);this.isShowingNow=!1;this.parentMenu=null},_closeChild:function(){this._stopPopupTimer();this.currentPopupItem&&(this.focused&&(l.set(this.selected.focusNode,"tabIndex",this.tabIndex),this.selected.focusNode.focus()),this.currentPopupItem._closePopup(),this.currentPopupItem=null)},_onItemFocus:function(b){if(this._hoveredChild&&this._hoveredChild!=b)this.onItemUnhover(this._hoveredChild);this.set("selected",b)},_onBlur:function(){this._cleanUp(!0);
this.inherited(arguments)},_cleanUp:function(b){this._closeChild();"undefined"==typeof this.isShowingNow&&this.set("activated",!1);b&&this.set("selected",null)}})})},"dijit/_KeyNavContainer":function(){define("dijit/_KeyNavContainer","dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/keys dojo/_base/lang ./registry ./_Container ./_FocusMixin ./_KeyNavMixin".split(" "),function(m,p,f,l,k,h,q,g,e,c){return p("dijit._KeyNavContainer",[e,c,g],{connectKeyNavHandlers:function(b,c){var d=
this._keyNavCodes={},e=h.hitch(this,"focusPrev"),g=h.hitch(this,"focusNext");m.forEach(b,function(b){d[b]=e});m.forEach(c,function(b){d[b]=g});d[k.HOME]=h.hitch(this,"focusFirstChild");d[k.END]=h.hitch(this,"focusLastChild")},startupKeyNavChildren:function(){l.deprecated("startupKeyNavChildren() call no longer needed","","2.0")},startup:function(){this.inherited(arguments);m.forEach(this.getChildren(),h.hitch(this,"_startupChild"))},addChild:function(b,c){this.inherited(arguments);this._startupChild(b)},
_startupChild:function(b){b.set("tabIndex","-1")},_getFirst:function(){var b=this.getChildren();return b.length?b[0]:null},_getLast:function(){var b=this.getChildren();return b.length?b[b.length-1]:null},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1))},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),!0)},childSelector:function(b){return(b=q.byNode(b))&&b.getParent()==this}})})},"dijit/_KeyNavMixin":function(){define("dijit/_KeyNavMixin",
"dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on dijit/registry dijit/_FocusMixin".split(" "),function(m,p,f,l,k,h,q,g){return p("dijit._KeyNavMixin",g,{tabIndex:"0",childSelector:null,postCreate:function(){this.inherited(arguments);f.set(this.domNode,"tabIndex",this.tabIndex);if(!this._keyNavCodes){var e=this._keyNavCodes={};e[l.HOME]=k.hitch(this,"focusFirstChild");e[l.END]=k.hitch(this,"focusLastChild");e[this.isLeftToRight()?l.LEFT_ARROW:l.RIGHT_ARROW]=k.hitch(this,
"_onLeftArrow");e[this.isLeftToRight()?l.RIGHT_ARROW:l.LEFT_ARROW]=k.hitch(this,"_onRightArrow");e[l.UP_ARROW]=k.hitch(this,"_onUpArrow");e[l.DOWN_ARROW]=k.hitch(this,"_onDownArrow")}var c=this,e="string"==typeof this.childSelector?this.childSelector:k.hitch(this,"childSelector");this.own(h(this.domNode,"keypress",k.hitch(this,"_onContainerKeypress")),h(this.domNode,"keydown",k.hitch(this,"_onContainerKeydown")),h(this.domNode,"focus",k.hitch(this,"_onContainerFocus")),h(this.containerNode,h.selector(e,
"focusin"),function(b){c._onChildFocus(q.getEnclosingWidget(this),b)}))},_onLeftArrow:function(){},_onRightArrow:function(){},_onUpArrow:function(){},_onDownArrow:function(){},focus:function(){this.focusFirstChild()},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1)},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1)},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild())},focusLastChild:function(){this.focusChild(this._getLastFocusableChild())},
focusChild:function(e,c){e&&(this.focusedChild&&e!==this.focusedChild&&this._onChildBlur(this.focusedChild),e.set("tabIndex",this.tabIndex),e.focus(c?"end":"start"))},_onContainerFocus:function(e){e.target!==this.domNode||this.focusedChild||this.focus()},_onFocus:function(){f.set(this.domNode,"tabIndex","-1");this.inherited(arguments)},_onBlur:function(e){f.set(this.domNode,"tabIndex",this.tabIndex);this.focusedChild&&(this.focusedChild.set("tabIndex","-1"),this.lastFocusedChild=this.focusedChild,
this._set("focusedChild",null));this.inherited(arguments)},_onChildFocus:function(e){e&&e!=this.focusedChild&&(this.focusedChild&&!this.focusedChild._destroyed&&this.focusedChild.set("tabIndex","-1"),e.set("tabIndex",this.tabIndex),this.lastFocused=e,this._set("focusedChild",e))},_searchString:"",multiCharSearchDuration:1E3,onKeyboardSearch:function(e,c,b,d){e&&this.focusChild(e)},_keyboardSearchCompare:function(e,c){var b=e.domNode;e=(e.label||(b.focusNode?b.focusNode.label:"")||b.innerText||b.textContent||
"").replace(/^\s+/,"").substr(0,c.length).toLowerCase();return c.length&&e==c?-1:0},_isFormElement:function(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||"BUTTON"===e.tagName},_onContainerKeydown:function(e){if(!this._isFormElement(document.activeElement)){var c=this._keyNavCodes[e.keyCode];c?(c(e,this.focusedChild),e.stopPropagation(),e.preventDefault(),this._searchString=""):e.keyCode!=l.SPACE||!this._searchTimer||e.ctrlKey||e.altKey||e.metaKey||(e.stopImmediatePropagation(),
e.preventDefault(),this._keyboardSearch(e," "))}},_onContainerKeypress:function(e){this._isFormElement(document.activeElement)||e.charCode<=l.SPACE||e.ctrlKey||e.altKey||e.metaKey||(e.preventDefault(),e.stopPropagation(),this._keyboardSearch(e,String.fromCharCode(e.charCode).toLowerCase()))},_keyboardSearch:function(e,c){var b=null,d,g=0;k.hitch(this,function(){this._searchTimer&&this._searchTimer.remove();this._searchString+=c;var e=/^(.)\1*$/.test(this._searchString)?1:this._searchString.length;
d=this._searchString.substr(0,e);this._searchTimer=this.defer(function(){this._searchTimer=null;this._searchString=""},this.multiCharSearchDuration);var f=this.focusedChild||null;if(1==e||!f)if(f=this._getNextFocusableChild(f,1),!f)return;e=f;do{var h=this._keyboardSearchCompare(f,d);h&&0==g++&&(b=f);if(-1==h){g=-1;break}f=this._getNextFocusableChild(f,1)}while(f&&f!=e)})();this.onKeyboardSearch(b,e,d,g)},_onChildBlur:function(){},_getNextFocusableChild:function(e,c){var b=e;do{if(e)e=this._getNext(e,
c);else if(e=this[0<c?"_getFirst":"_getLast"](),!e)break;if(null!=e&&e!=b&&e.isFocusable())return e}while(e!=b);return null},_getFirst:function(){return null},_getLast:function(){return null},_getNext:function(e,c){if(e)for(e=e.domNode;e;)if((e=e[0>c?"previousSibling":"nextSibling"])&&"getAttribute"in e){var b=q.byNode(e);if(b)return b}return null}})})},"dijit/MenuItem":function(){require({cache:{"url:dijit/templates/MenuItem.html":'\x3ctr class\x3d"dijitReset" data-dojo-attach-point\x3d"focusNode" role\x3d"menuitem" tabIndex\x3d"-1"\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemIconCell" role\x3d"presentation"\x3e\r\n\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitMenuItemIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemLabel" colspan\x3d"2" data-dojo-attach-point\x3d"containerNode,textDirNode"\r\n\t\trole\x3d"presentation"\x3e\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemAccelKey" style\x3d"display: none" data-dojo-attach-point\x3d"accelKeyNode"\x3e\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuArrowCell" role\x3d"presentation"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"arrowWrapper" style\x3d"visibility: hidden"\x3e\r\n\t\t\t\x3cspan class\x3d"dijitInline dijitIcon dijitMenuExpand"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan class\x3d"dijitMenuExpandA11y"\x3e+\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/td\x3e\r\n\x3c/tr\x3e\r\n'}});
define("dijit/MenuItem","dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/_base/kernel dojo/sniff dojo/_base/lang ./_Widget ./_TemplatedMixin ./_Contained ./_CssStateMixin dojo/text!./templates/MenuItem.html".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d){q=m("dijit.MenuItem"+(h("dojo-bidi")?"_NoBidi":""),[g,e,c,b],{templateString:d,baseClass:"dijitMenuItem",label:"",_setLabelAttr:function(b){this._set("label",b);var c="",d;d=b.search(/{\S}/);if(0<=d){var c=b.charAt(d+1),e=b.substr(0,d);
b=b.substr(d+3);d=e+c+b;b=e+'\x3cspan class\x3d"dijitMenuItemShortcutKey"\x3e'+c+"\x3c/span\x3e"+b}else d=b;this.domNode.setAttribute("aria-label",d+" "+this.accelKey);this.containerNode.innerHTML=b;this._set("shortcutKey",c)},iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",disabled:!1,_fillContent:function(b){!b||"label"in this.params||this._set("label",b.innerHTML)},buildRendering:function(){this.inherited(arguments);f.set(this.containerNode,"id",this.id+"_text");
this.accelKeyNode&&f.set(this.accelKeyNode,"id",this.id+"_accel");p.setSelectable(this.domNode,!1)},onClick:function(){},focus:function(){try{8==h("ie")&&this.containerNode.focus(),this.focusNode.focus()}catch(r){}},_setSelected:function(b){l.toggle(this.domNode,"dijitMenuItemSelected",b)},setLabel:function(b){k.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",b)},setDisabled:function(b){k.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.",
"","2.0");this.set("disabled",b)},_setDisabledAttr:function(b){this.focusNode.setAttribute("aria-disabled",b?"true":"false");this._set("disabled",b)},_setAccelKeyAttr:function(b){this.accelKeyNode&&(this.accelKeyNode.style.display=b?"":"none",this.accelKeyNode.innerHTML=b,f.set(this.containerNode,"colSpan",b?"1":"2"));this._set("accelKey",b)}});h("dojo-bidi")&&(q=m("dijit.MenuItem",q,{_setLabelAttr:function(b){this.inherited(arguments);"auto"===this.textDir&&this.applyTextDir(this.textDirNode)}}));
return q})},"dijit/layout/ScrollingTabController":function(){require({cache:{"url:dijit/layout/templates/ScrollingTabController.html":'\x3cdiv class\x3d"dijitTabListContainer-${tabPosition}" style\x3d"visibility:hidden"\x3e\r\n\t\x3cdiv data-dojo-type\x3d"dijit.layout._ScrollingTabControllerMenuButton"\r\n\t\t class\x3d"tabStripButton-${tabPosition}"\r\n\t\t id\x3d"${id}_menuBtn"\r\n\t\t data-dojo-props\x3d"containerId: \'${containerId}\', iconClass: \'dijitTabStripMenuIcon\',\r\n\t\t\t\t\tdropDownPosition: [\'below-alt\', \'above-alt\']"\r\n\t\t data-dojo-attach-point\x3d"_menuBtn" showLabel\x3d"false" title\x3d""\x3e\x26#9660;\x3c/div\x3e\r\n\t\x3cdiv data-dojo-type\x3d"dijit.layout._ScrollingTabControllerButton"\r\n\t\t class\x3d"tabStripButton-${tabPosition}"\r\n\t\t id\x3d"${id}_leftBtn"\r\n\t\t data-dojo-props\x3d"iconClass:\'dijitTabStripSlideLeftIcon\', showLabel:false, title:\'\'"\r\n\t\t data-dojo-attach-point\x3d"_leftBtn" data-dojo-attach-event\x3d"onClick: doSlideLeft"\x3e\x26#9664;\x3c/div\x3e\r\n\t\x3cdiv data-dojo-type\x3d"dijit.layout._ScrollingTabControllerButton"\r\n\t\t class\x3d"tabStripButton-${tabPosition}"\r\n\t\t id\x3d"${id}_rightBtn"\r\n\t\t data-dojo-props\x3d"iconClass:\'dijitTabStripSlideRightIcon\', showLabel:false, title:\'\'"\r\n\t\t data-dojo-attach-point\x3d"_rightBtn" data-dojo-attach-event\x3d"onClick: doSlideRight"\x3e\x26#9654;\x3c/div\x3e\r\n\t\x3cdiv class\x3d\'dijitTabListWrapper\' data-dojo-attach-point\x3d\'tablistWrapper\'\x3e\r\n\t\t\x3cdiv role\x3d\'tablist\' data-dojo-attach-event\x3d\'onkeydown:onkeydown\'\r\n\t\t\t data-dojo-attach-point\x3d\'containerNode\' class\x3d\'nowrapTabStrip\'\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/layout/templates/_ScrollingTabControllerButton.html":'\x3cdiv data-dojo-attach-event\x3d"ondijitclick:_onClick" class\x3d"dijitTabInnerDiv dijitTabContent dijitButtonContents"  data-dojo-attach-point\x3d"focusNode" role\x3d"button"\x3e\r\n\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitTabStripIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\x3cspan data-dojo-attach-point\x3d"containerNode,titleNode" class\x3d"dijitButtonText"\x3e\x3c/span\x3e\r\n\x3c/div\x3e'}});
define("dijit/layout/ScrollingTabController","dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/_base/lang dojo/on dojo/query dojo/sniff ../registry dojo/text!./templates/ScrollingTabController.html dojo/text!./templates/_ScrollingTabControllerButton.html ./TabController ./utils ../_WidgetsInTemplateMixin ../Menu ../MenuItem ../form/Button ../_HasDropDown dojo/NodeList-dom ../a11yclick".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x,w,y,
z){d=p("dijit.layout.ScrollingTabController",[v,t],{baseClass:"dijitTabController dijitScrollingTabController",templateString:d,useMenu:!0,useSlider:!0,tabStripClass:"",_minScroll:5,_setClassAttr:{node:"containerNode",type:"class"},buildRendering:function(){this.inherited(arguments);var b=this.domNode;this.scrollNode=this.tablistWrapper;this._initButtons();this.tabStripClass||(this.tabStripClass="dijitTabContainer"+this.tabPosition.charAt(0).toUpperCase()+this.tabPosition.substr(1).replace(/-.*/,
"")+"None",f.add(b,"tabStrip-disabled"));f.add(this.tablistWrapper,this.tabStripClass)},onStartup:function(){this.inherited(arguments);k.set(this.domNode,"visibility","");this._postStartup=!0;this.own(g(this.containerNode,"attrmodified-label, attrmodified-iconclass",q.hitch(this,function(b){this._dim&&this.resize(this._dim)})))},onAddChild:function(b,c){this.inherited(arguments);k.set(this.containerNode,"width",k.get(this.containerNode,"width")+200+"px")},onRemoveChild:function(b,c){var d=this.pane2button(b.id);
this._selectedTab===d.domNode&&(this._selectedTab=null);this.inherited(arguments)},_initButtons:function(){this._btnWidth=0;this._buttons=e("\x3e .tabStripButton",this.domNode).filter(function(b){if(this.useMenu&&b==this._menuBtn.domNode||this.useSlider&&(b==this._rightBtn.domNode||b==this._leftBtn.domNode))return this._btnWidth+=l.getMarginSize(b).w,!0;k.set(b,"display","none");return!1},this)},_getTabsWidth:function(){var b=this.getChildren();if(b.length){var c=b[this.isLeftToRight()?0:b.length-
1].domNode,b=b[this.isLeftToRight()?b.length-1:0].domNode;return b.offsetLeft+b.offsetWidth-c.offsetLeft}return 0},_enableBtn:function(b){var c=this._getTabsWidth();b=b||k.get(this.scrollNode,"width");return 0<c&&b<c},resize:function(b){this._dim=b;this.scrollNode.style.height="auto";var c=this._contentBox=u.marginBox2contentBox(this.domNode,{h:0,w:b.w});c.h=this.scrollNode.offsetHeight;l.setContentSize(this.domNode,c);c=this._enableBtn(this._contentBox.w);this._buttons.style("display",c?"":"none");
this._leftBtn.region="left";this._rightBtn.region="right";this._menuBtn.region=this.isLeftToRight()?"right":"left";u.layoutChildren(this.domNode,this._contentBox,[this._menuBtn,this._leftBtn,this._rightBtn,{domNode:this.scrollNode,region:"center"}]);this._selectedTab&&(this._anim&&"playing"==this._anim.status()&&this._anim.stop(),this.scrollNode.scrollLeft=this._convertToScrollLeft(this._getScrollForSelectedTab()));this._setButtonClass(this._getScroll());this._postResize=!0;return{h:this._contentBox.h,
w:b.w}},_getScroll:function(){return this.isLeftToRight()||8>c("ie")||c("trident")&&c("quirks")||c("webkit")?this.scrollNode.scrollLeft:k.get(this.containerNode,"width")-k.get(this.scrollNode,"width")+(c("trident")||c("edge")?-1:1)*this.scrollNode.scrollLeft},_convertToScrollLeft:function(b){if(this.isLeftToRight()||8>c("ie")||c("trident")&&c("quirks")||c("webkit"))return b;var d=k.get(this.containerNode,"width")-k.get(this.scrollNode,"width");return(c("trident")||c("edge")?-1:1)*(b-d)},onSelectChild:function(b,
c){var d=this.pane2button(b.id);if(d){var e=d.domNode;if(e!=this._selectedTab&&(this._selectedTab=e,this._postResize)){var g=this._getScroll();g>e.offsetLeft||g+k.get(this.scrollNode,"width")<e.offsetLeft+k.get(e,"width")?(e=this.createSmoothScroll(),c&&(e.onEnd=function(){d.focus()}),e.play()):c&&d.focus()}this.inherited(arguments)}},_getScrollBounds:function(){var b=this.getChildren(),c=k.get(this.scrollNode,"width"),d=k.get(this.containerNode,"width")-c,e=this._getTabsWidth();if(b.length&&e>c)return{min:this.isLeftToRight()?
0:b[b.length-1].domNode.offsetLeft,max:this.isLeftToRight()?b[b.length-1].domNode.offsetLeft+b[b.length-1].domNode.offsetWidth-c:d};b=this.isLeftToRight()?0:d;return{min:b,max:b}},_getScrollForSelectedTab:function(){var b=this._selectedTab,c=k.get(this.scrollNode,"width"),d=this._getScrollBounds(),b=b.offsetLeft+k.get(b,"width")/2-c/2;return b=Math.min(Math.max(b,d.min),d.max)},createSmoothScroll:function(b){if(0<arguments.length){var c=this._getScrollBounds();b=Math.min(Math.max(b,c.min),c.max)}else b=
this._getScrollForSelectedTab();this._anim&&"playing"==this._anim.status()&&this._anim.stop();var d=this,e=this.scrollNode,g=new h.Animation({beforeBegin:function(){this.curve&&delete this.curve;var c=e.scrollLeft,f=d._convertToScrollLeft(b);g.curve=new h._Line(c,f)},onAnimate:function(b){e.scrollLeft=b}});this._anim=g;this._setButtonClass(b);return g},_getBtnNode:function(b){for(b=b.target;b&&!f.contains(b,"tabStripButton");)b=b.parentNode;return b},doSlideRight:function(b){this.doSlide(1,this._getBtnNode(b))},
doSlideLeft:function(b){this.doSlide(-1,this._getBtnNode(b))},doSlide:function(b,c){c&&f.contains(c,"dijitTabDisabled")||(b*=.75*k.get(this.scrollNode,"width"),b=this._getScroll()+b,this._setButtonClass(b),this.createSmoothScroll(b).play())},_setButtonClass:function(b){var c=this._getScrollBounds();this._leftBtn.set("disabled",b<=c.min);this._rightBtn.set("disabled",b>=c.max)}});r=p("dijit.layout._ScrollingTabControllerButtonMixin",null,{baseClass:"dijitTab tabStripButton",templateString:r,tabIndex:"",
isFocusable:function(){return!1}});p("dijit.layout._ScrollingTabControllerButton",[y,r]);p("dijit.layout._ScrollingTabControllerMenuButton",[y,z,r],{containerId:"",tabIndex:"-1",isLoaded:function(){return!1},loadDropDown:function(c){this.dropDown=new x({id:this.containerId+"_menu",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir});var d=b.byId(this.containerId);m.forEach(d.getChildren(),function(b){var c=new w({id:b.id+"_stcMi",label:b.title,iconClass:b.iconClass,
disabled:b.disabled,ownerDocument:this.ownerDocument,dir:b.dir,lang:b.lang,textDir:b.textDir||d.textDir,onClick:function(){d.selectChild(b)}});this.dropDown.addChild(c)},this);c()},closeDropDown:function(b){this.inherited(arguments);this.dropDown&&(this._popupStateNode.removeAttribute("aria-owns"),this.dropDown.destroyRecursive(),delete this.dropDown)}});return d})},"dijit/_HasDropDown":function(){define("dijit/_HasDropDown","dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on dojo/touch ./registry ./focus ./popup ./_FocusMixin".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t){return m("dijit._HasDropDown",t,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:!0,forceWidth:!1,maxHeight:-1,dropDownPosition:["below","above"],_stopClickEvents:!0,_onDropDownMouseDown:function(e){this.disabled||this.readOnly||("MSPointerDown"!=e.type&&e.preventDefault(),this.own(b.once(this.ownerDocument,d.release,c.hitch(this,"_onDropDownMouseUp"))),this.toggleDropDown())},_onDropDownMouseUp:function(b){var c=
this.dropDown,d=!1;if(b&&this._opened){var e=h.position(this._buttonNode,!0);if(!(b.pageX>=e.x&&b.pageX<=e.x+e.w&&b.pageY>=e.y&&b.pageY<=e.y+e.h)){for(e=b.target;e&&!d;)k.contains(e,"dijitPopup")?d=!0:e=e.parentNode;if(d){e=b.target;if(c.onItemClick){for(var g;e&&!(g=r.byNode(e));)e=e.parentNode;if(g&&g.onClick&&g.getParent)g.getParent().onItemClick(g,b)}return}}}this._opened?c.focus&&(!1!==c.autoFocus||"mouseup"==b.type&&!this.hovering)&&(this._focusDropDownTimer=this.defer(function(){c.focus();
delete this._focusDropDownTimer})):this.focus&&this.defer("focus")},_onDropDownClick:function(b){this._stopClickEvents&&(b.stopPropagation(),b.preventDefault())},buildRendering:function(){this.inherited(arguments);this._buttonNode=this._buttonNode||this.focusNode||this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var b={after:this.isLeftToRight()?"Right":"Left",before:this.isLeftToRight()?"Left":"Right",above:"Up",below:"Down",left:"Left",right:"Right"}[this.dropDownPosition[0]]||
this.dropDownPosition[0]||"Down";k.add(this._arrowWrapperNode||this._buttonNode,"dijit"+b+"ArrowButton")},postCreate:function(){this.inherited(arguments);var e=this.focusNode||this.domNode;this.own(b(this._buttonNode,d.press,c.hitch(this,"_onDropDownMouseDown")),b(this._buttonNode,"click",c.hitch(this,"_onDropDownClick")),b(e,"keydown",c.hitch(this,"_onKey")),b(e,"keyup",c.hitch(this,"_onKeyUp")))},destroy:function(){this._opened&&this.closeDropDown(!0);this.dropDown&&(this.dropDown._destroyed||this.dropDown.destroyRecursive(),
delete this.dropDown);this.inherited(arguments)},_onKey:function(b){if(!this.disabled&&!this.readOnly){var c=this.dropDown,d=b.target;c&&this._opened&&c.handleKey&&!1===c.handleKey(b)?(b.stopPropagation(),b.preventDefault()):c&&this._opened&&b.keyCode==e.ESCAPE?(this.closeDropDown(),b.stopPropagation(),b.preventDefault()):!this._opened&&(b.keyCode==e.DOWN_ARROW||(b.keyCode==e.ENTER||b.keyCode==e.SPACE&&(!this._searchTimer||b.ctrlKey||b.altKey||b.metaKey))&&("input"!==(d.tagName||"").toLowerCase()||
d.type&&"text"!==d.type.toLowerCase()))&&(this._toggleOnKeyUp=!0,b.stopPropagation(),b.preventDefault())}},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp;this.toggleDropDown();var b=this.dropDown;b&&b.focus&&this.defer(c.hitch(b,"focus"),1)}},_onBlur:function(){this.closeDropDown(!1);this.inherited(arguments)},isLoaded:function(){return!0},loadDropDown:function(b){b()},loadAndOpenDropDown:function(){var b=new p,d=c.hitch(this,function(){this.openDropDown();b.resolve(this.dropDown)});
this.isLoaded()?d():this.loadDropDown(d);return b},toggleDropDown:function(){this.disabled||this.readOnly||(this._opened?this.closeDropDown(!0):this.loadAndOpenDropDown())},openDropDown:function(){var b=this.dropDown,d=b.domNode,e=this._aroundNode||this.domNode,g=this,f=u.open({parent:this,popup:b,around:e,orient:this.dropDownPosition,maxHeight:this.maxHeight,onExecute:function(){g.closeDropDown(!0)},onCancel:function(){g.closeDropDown(!0)},onClose:function(){l.set(g._popupStateNode,"popupActive",
!1);k.remove(g._popupStateNode,"dijitHasDropDownOpen");g._set("_opened",!1)}});if(this.forceWidth||this.autoWidth&&e.offsetWidth>b._popupWrapper.offsetWidth){var e=e.offsetWidth-b._popupWrapper.offsetWidth,q={w:b.domNode.offsetWidth+e};this._origStyle=d.style.cssText;c.isFunction(b.resize)?b.resize(q):h.setMarginBox(d,q);"R"==f.corner[1]&&(b._popupWrapper.style.left=b._popupWrapper.style.left.replace("px","")-e+"px")}l.set(this._popupStateNode,"popupActive","true");k.add(this._popupStateNode,"dijitHasDropDownOpen");
this._set("_opened",!0);this._popupStateNode.setAttribute("aria-expanded","true");this._popupStateNode.setAttribute("aria-owns",b.id);"presentation"===d.getAttribute("role")||d.getAttribute("aria-labelledby")||d.setAttribute("aria-labelledby",this.id);return f},closeDropDown:function(b){this._focusDropDownTimer&&(this._focusDropDownTimer.remove(),delete this._focusDropDownTimer);this._opened&&(this._popupStateNode.setAttribute("aria-expanded","false"),b&&this.focus&&this.focus(),u.close(this.dropDown),
this._opened=!1);this._origStyle&&(this.dropDown.domNode.style.cssText=this._origStyle,delete this._origStyle)}})})},"sixmaps/map/MapExtentConfigStore":function(){define("dojo/_base/declare dojo/_base/json dojo/_base/lang dojo/aspect dojo/Deferred dojo/dom-construct dojo/dom-form dojo/sniff dojo/text!sixmaps/map/MapExtentConfigStore.html dojo/query dijit/_TemplatedMixin dijit/_WidgetBase dijit/registry dijit/form/RadioButton esri/geometry/Extent sixmaps/map/Graphics sixmaps/util/Geolocation sixmaps/util/LocalStore".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x,w){return m("sixmaps.map.MapExtentConfigStore",[dijit._Widget,dijit._Templated],{templateString:e,widgetsInTemplate:!0,_mapExtentChangeConnect:null,initialExtent:"last",_store:null,_lastExtent:null,fullExtent:null,map:null,mapLoaded:null,setExtent:!0,constructor:function(b){this.fullExtent=new u({xmin:15303304,ymin:-4869955,xmax:17807993,ymax:-3152874,spatialReference:{wkid:3857}});this.mapLoaded=new k;f.mixin(this,b);this._store=new w;b=this._store.get(this.declaredClass);
f.mixin(this,b)},_setMapAttr:function(b){var c=this,d=new t({map:b,addGraphicsLayer:!1});c.map=b;b.loaded?c.mapLoaded.resolve():l.after(b,"onLoad",function(){c.mapLoaded.resolve()});c.mapLoaded.then(function(){c.connectExtentChangeToCookie();if(c.setExtent){var e=function(){null!=c._lastExtent&&b.setExtent(new u(c._lastExtent))};"full"==c.initialExtent?b.setExtent(c.fullExtent):"last"==c.initialExtent?e():"geo"==c.initialExtent&&(g("android")||g("ios")?navigator.geolocation&&x.getCurrentLocation().then(function(b){d.zoomToFeature(b)}):
(c.initialExtent="last",e()))}})},postCreate:function(){this.inherited(arguments);if(g("android")||g("ios")){var b=new v({value:"geo",name:"extentRadios"}),d=h.create("label",{innerHTML:"current location",style:"padding-left: 2px"});b.placeAt(this.currentLocationRadio);h.place(d,this.currentLocationRadio)}r.byId(c("input[value\x3d"+this.initialExtent+"]",this.paramsForm.domNode)[0].id).set("checked",!0)},connectExtentChangeToCookie:function(){var b=this;this._mapExtentChangeConnect||(this._mapExtentChangeConnect=
l.after(b.map,"onExtentChange",function(){b._lastExtent=b.map.extent.toJson();b.saveParams()}))},saveParams:function(){this._store.set(this.declaredClass,{initialExtent:this.initialExtent,_lastExtent:this._lastExtent})},paramsFormChanged:function(){var b=this,c=q.toObject(b.paramsForm.domNode);b.initialExtent=c.extentRadios;"last"==b.initialExtent?b.mapLoaded.then(function(){b._lastExtent=b.map.extent.toJson();b.connectExtentChangeToCookie()}):(b._mapExtentChangeConnect.remove(),b._mapExtentChangeConnect=
null,b._lastExtent=null);b.saveParams()}})})},"dijit/form/RadioButton":function(){define("dijit/form/RadioButton",["dojo/_base/declare","./CheckBox","./_RadioButtonMixin"],function(m,p,f){return m("dijit.form.RadioButton",[p,f],{baseClass:"dijitRadio"})})},"dijit/form/_RadioButtonMixin":function(){define("dijit/form/_RadioButtonMixin","dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/_base/lang dojo/query!css2 ../registry".split(" "),function(m,p,f,l,k,h){return p("dijit.form._RadioButtonMixin",
null,{type:"radio",_getRelatedWidgets:function(){var f=[];k("input[type\x3dradio]",this.focusNode.form||this.ownerDocument).forEach(l.hitch(this,function(g){g.name==this.name&&g.form==this.focusNode.form&&(g=h.getEnclosingWidget(g))&&f.push(g)}));return f},_setCheckedAttr:function(f){this.inherited(arguments);this._created&&f&&m.forEach(this._getRelatedWidgets(),l.hitch(this,function(g){g!=this&&g.checked&&g.set("checked",!1)}))},_getSubmitValue:function(f){return null==f?"on":f},_onClick:function(h){if(this.checked||
this.disabled)return h.stopPropagation(),h.preventDefault(),!1;if(this.readOnly)return h.stopPropagation(),h.preventDefault(),m.forEach(this._getRelatedWidgets(),l.hitch(this,function(c){f.set(this.focusNode||this.domNode,"checked",c.checked)})),!1;var g=!1,e;m.some(this._getRelatedWidgets(),function(c){return c.checked?(e=c,!0):!1});this.checked=!0;e&&(e.checked=!1);if(!1===this.onClick(h)||h.defaultPrevented)g=!0;this.checked=!1;e&&(e.checked=!0);g?h.preventDefault():this.set("checked",!0);return!g}})})},
"sixmaps/map/Graphics":function(){define("dojo/_base/array dojo/_base/Color dojo/_base/connect dojo/_base/declare dojo/_base/lang dojo/_base/sniff dojo/aspect dojo/Deferred dojo/has dojo/query dijit/_WidgetBase esri/layers/GraphicsLayer esri/geometry/Extent esri/geometry/scaleUtils esri/geometry/screenUtils esri/geometry/Point esri/symbols/PictureMarkerSymbol esri/symbols/SimpleFillSymbol esri/symbols/SimpleLineSymbol esri/graphic sixmaps/util/Projection".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,
d,r,v,u,t,x,w,y,z,B){return l("sixmaps.map.Graphics",[b],{map:null,name:"Map graphics",highlightSymbolPolygon:null,highlightSymbolLine:null,highlightSymbolPoint:null,defaultSymbolPolygon:null,defaultSymbolLine:null,defaultSymbolPoint:null,filter:null,highlightFilter:null,showGraphicsLayerInToc:!1,showHighlightLayerInToc:!1,zoomLevel:null,minZoomScale:9028,maxZoomScale:1198,expandFactor:1.2,minPolyParams:null,_highlight:null,addGraphicsLayer:!0,constructor:function(b,c){var e=this;e.highlightSymbolPolygon=
new w(w.STYLE_SOLID,new y(y.STYLE_DASHDOT,new p([255,0,0]),2),new p([255,255,0,.3]));e.highlightSymbolLine=new y(y.STYLE_DASHDOT,new p([255,0,0]),2);e.highlightSymbolPoint=new x(require.toUrl("sixmaps/dijits/images/")+"flagHL.png",30,48);e.defaultSymbolPolygon=new w(w.STYLE_SOLID,new y(y.STYLE_SOLID,new p([255,0,0,.5]),2),new p([255,255,0,.2]));e.defaultSymbolLine=new y(y.STYLE_SOLID,new p([255,0,0,.5]),2);e.defaultSymbolPoint=new x(require.toUrl("sixmaps/dijits/images/")+"flag.png",24,48);e.defaultSymbolPoint.setOffset(9,
11);e.highlightSymbolPoint.setOffset(6,11);e.minPolyParams={scale:3E3,length:20};l.safeMixin(e,b);e.map&&e.addGraphicsLayer&&(e.graphicsLayer=new d,e.graphicsLayer.name=e.name,e.graphicsLayer.showInToc=e.showGraphicsLayerInToc,e.highlightLayer=new d,e.highlightLayer.name=e.name+" highlight",e.highlightLayer.showInToc=e.showHighlightLayerInToc,e.filter&&e._setFilter(e.graphicsLayer,e.filter),e.highlightFilter&&e._setFilter(e.highlightLayer,e.highlightFilter),e.mapLoaded=new g,e.map.loaded?e.mapLoaded.resolve():
q.after(e.map,"onLoad",function(){e.mapLoaded.resolve()}),e.mapLoaded.then(function(){e.map.addLayer(e.graphicsLayer);e.map.addLayer(e.highlightLayer)}))},_setMinPolyParamsAttr:function(b){b?!this.onZoomEndConnect&&(this.onZoomEndConnect=q.after(this.map,"onZoomEnd",k.hitch(this,"recalculateGraphics"))):this.onZoomEndConnect&&this.onZoomEndConnect.remove();this._set("minPolyParams",b)},_setFilter:function(b,d){e("ff")&&(d.match(/^url\(/)||!d||(d="url(css/resources.svg#"+d+")"),f.connect(b,"_setMap",
function(e){c("#"+b.id+"_layer").style("filter",d)}))},show:function(){this.graphicsLayer.show();this.highlightLayer.show()},hide:function(){this.graphicsLayer.hide();this.highlightLayer.hide()},add:function(b,c){var d=this;b=b.features||b;if("undefined"==typeof b.length)b=[b];else if(0==b.length)return;var e=[];m.forEach(b,function(b){if(b.geometry){if(!b.symbol&&!d.graphicsLayer.renderer)switch(b.geometry.type){case "point":case "multipoint":b.symbol=d.defaultSymbolPoint;break;case "line":case "polyline":b.symbol=
d.defaultSymbolLine;break;case "extent":case "polygon":if(d.minPolyParams&&b.geometry.getExtent()){b.trueGeometry=b.geometry;var c=v.getScale(d.map),g=u.toScreenGeometry(d.map.extent,d.map.width,d.map.height,b.geometry).getExtent(),f=g.getHeight(),g=g.getWidth();if(f<d.minPolyParams.length&&g<d.minPolyParams.length&&c>d.minPolyParams.scale){b.setGeometry(b.geometry.getExtent().getCenter());b.setSymbol(d.defaultSymbolPoint);break}}b.setSymbol(d.defaultSymbolPolygon)}e.push(b)}});B.projectFeatures(e,
d.map.spatialReference).then(function(b){m.forEach(b,function(b){d.graphicsLayer.add(b)})});d.recalculateGraphics()},recalculateGraphics:function(){var b=this;if(b.minPolyParams){var c=v.getScale(b.map);if(b.graphicsLayer){var d=[];m.forEach(b.graphicsLayer.graphics,function(e){if(e.trueGeometry){switch(e.geometry.type){case "point":case "polygon":case "extent":var g=u.toScreenGeometry(b.map.extent,b.map.width,b.map.height,e.trueGeometry).getExtent(),f=g.getHeight(),g=g.getWidth();f<b.minPolyParams.length&&
g<b.minPolyParams.length&&c>b.minPolyParams.scale?(e.setGeometry(e.trueGeometry.getExtent().getCenter()),e.setSymbol(b.defaultSymbolPoint)):(e.setGeometry(e.trueGeometry),e.setSymbol(b.defaultSymbolPolygon))}d.push(e)}});m.forEach(d,function(c){b.graphicsLayer.remove(c);b.graphicsLayer.add(c)})}}},remove:function(b){this.graphicsLayer.remove(b)},clear:function(){this.graphicsLayer.clear()},highlightFeature:function(b){this.highlightFeatures(b)},highlightFeatures:function(b){var c=this;c.clearHighlight();
if(b){b.features&&(b=b.features);if("undefined"==typeof b.length)b=[b];else if(0==b.length)return;var d=[];m.forEach(b,function(b){if(b.geometry||b.type){b=new z(b);!b.geometry.type&&b.geometry.geometry&&(b.geometry=b.geometry.geometry);switch(b.geometry.type){case "point":case "multipoint":b.symbol=c.highlightSymbolPoint;break;case "line":b.symbol=c.highlightSymbolLine;break;case "polyline":b.symbol=c.highlightSymbolLine;break;case "extent":case "polygon":if(b.geometry.getExtent()){var e=v.getScale(c.map),
g=u.toScreenGeometry(c.map.extent,c.map.width,c.map.height,b.geometry).getExtent(),f=g.getHeight(),g=g.getWidth();if(c.minPolyParams&&f<c.minPolyParams.length&&g<c.minPolyParams.length&&e>c.minPolyParams.scale){b.geometry=new t(b.geometry.getExtent().getCenter());b.symbol=c.highlightSymbolPoint;break}}b.symbol=c.highlightSymbolPolygon}d.push(b)}});d.length&&B.projectFeatures(d,c.map.spatialReference).then(function(b){m.forEach(b,function(b){c.highlightLayer.add(b)})})}},clearHighlight:function(){this.highlightLayer.clear()},
zoomToFeature:function(b,c){return this.zoomToFeatures([b],c)},zoomToFeatures:function(b,c){var d=new g,e=this,f={expandFactor:this.expandFactor,minZoomScale:this.minZoomScale,maxZoomScale:this.maxZoomScale,zoomLevel:this.zoomLevel,scale:null};k.mixin(f,c);if(b&&0!=b.length){"undefined"==typeof b.length&&(b=[b]);var h=k.getObject("map.spatialReference",!1,e),l=null;if(m.some(b,function(b){return b.geometry?(l=b.trueGeometry||b.geometry,!0):b.type?(l=b,!0):!1})){if(1==b.length&&"point"==l.type)B.projectGeometry(l,
h).then(function(b){if(f.scale){var c=v.getExtentForScale(e.map,f.scale);e.map.setExtent(c.centerAt(b))}else c=v.getScale(e.map),!f.minZoomScale||c<f.minZoomScale?e.map.centerAt(b):(c=v.getExtentForScale(e.map,f.minZoomScale),e.map.setExtent(c.centerAt(b))),d.resolve()},d.reject);else{var q=function(b){return"point"==b.type?new r(b.x,b.y,b.x,b.y,b.spatialReference):b.getExtent()},u=q(l);m.forEach(b,function(b){if(b.geometry||b.type)b=q(b.geometry||b.trueGeometry||b),u?u=u.union(b):u=b});u&&B.projectGeometry(u,
h).then(function(b){b=b.expand(f.expandFactor);e.map.setExtent(b,!0);d.resolve()},d.reject)}return d}}}})})},"sixmaps/util/Projection":function(){define("dojo/_base/array dojo/_base/lang dojo/Deferred dojo/promise/all dojo/when esri/geometry/webMercatorUtils esri/tasks/GeometryService esri/tasks/ProjectParameters esri/SpatialReference".split(" "),function(m,p,f,l,k,h,q,g,e){var c=[28354,28355,28356,28357,28358,4326,3308],b=[7854,7855,7856,7857,7858,7844,8058],d={geometryService:new q("https://portal.spatial.nsw.gov.au/server/rest/services/Utilities/Geometry/GeometryServer"),
projectGeometry:function(b,c){var e=new f;k(d.projectGeometries([b],c),function(b){e.resolve(b[0])},function(b){e.reject(b)});return e},projectFeature:function(b,c){var e=new f;k(d.projectFeatures([b],c),function(b){e.resolve(b[0])},function(b){e.reject(b)});return e},projectFeatures:function(b,c){var e=new f,g=p.clone(b),h=m.map(b,function(b){return b.geometry});d.projectGeometries(h,c).then(function(b){for(var c=0;c<b.length;c++)g[c].geometry=b[c];e.resolve(g)},function(b){e.reject(b)});return e},
projectGeometries:function(b,c){var d=new f,e={};m.forEach(b,function(b,c){var d=b.spatialReference?b.spatialReference.wkid:"";!e[d]&&(e[d]=[]);e[d].push({index:c,geometry:b})});var g=[],h;for(h in e)b=e[h],g.push(this._projectGeometries(b,c));l(g).then(function(b){var c=[];m.forEach(b,function(b){m.forEach(b,function(b){c[b.index]=b.geometry})});d.resolve(c)},function(b){d.reject(b)});return d},_projectGeometries:function(k,l){var q=new f;l=new e(l);102100==l.wkid?l.wkid=3857:l.wkid||(l.wkid=3857);
m.forEach(k,function(b){b.geometry.spatialReference&&102100==b.geometry.spatialReference.wkid&&(b.geometry.spatialReference.wkid=3857)});var r=m.some(k,function(b){if(!b.geometry.spatialReference||!b.geometry.spatialReference.wkid)return!0}),v=k[0].geometry.spatialReference;if(r||v&&v.wkid==l.wkid)return q.resolve(k),q;var r=parseInt(v.wkid),v=parseInt(l.wkid),w=null;3857!=r||4283!=v&&4326!=v?4283!=r&&4326!=v||3857!=v||(w=h.geographicToWebMercator):w=h.webMercatorToGeographic;if(w){var y=p.clone(k);
m.forEach(k,function(b,c){y[c].geometry=w(b.geometry)});q.resolve(y)}else{var z=new g,y=p.clone(k);z.geometries=m.map(k,function(b){return b.geometry});z.outSR=l;(c.includes(r)||b.includes(r))&&3857==v||3857==r&&(c.includes(v)||b.includes(v))?b.includes(v)?(z.transformForward=!0,z.transformation=108447):b.includes(r)&&(z.transformForward=!1,z.transformation=108447):4326==r&&c.includes(v)||(c.includes(r)&&b.includes(v)?(z.transformForward=!0,z.transformation=108447):c.includes(v)&&b.includes(r)&&(z.transformForward=
!1,z.transformation=108447));d.geometryService.project(z).then(function(b){for(var c=0;c<b.length;c++)y[c].geometry=b[c];q.resolve(y)},function(b){q.reject(b)})}return q}};return d})},"esri/tasks/ProjectParameters":function(){define("esri/tasks/ProjectParameters","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel ../lang ../geometry/jsonUtils".split(" "),function(m,p,f,l,k,h,q,g){m=m(null,{declaredClass:"esri.tasks.ProjectParameters",geometries:null,outSR:null,
transformation:null,transformForward:null,toJson:function(){var e=f.map(this.geometries,function(b){return b.toJson()}),c={};c.outSR=this.outSR.wkid||l.toJson(this.outSR.toJson());c.inSR=this.geometries[0].spatialReference.wkid||l.toJson(this.geometries[0].spatialReference.toJson());c.geometries=l.toJson({geometryType:g.getJsonType(this.geometries[0]),geometries:e});this.transformation&&(c.transformation=this.transformation.wkid||l.toJson(this.transformation));q.isDefined(this.transformForward)&&
(c.transformForward=this.transformForward);return c}});k("extend-esri")&&p.setObject("tasks.ProjectParameters",m,h);return m})},"sixmaps/util/Geolocation":function(){define("dojo/_base/lang dojo/Deferred esri/geometry/Point esri/tasks/BufferParameters esri/tasks/GeometryService esri/graphic esri/SpatialReference".split(" "),function(m,p,f,l,k,h,q){var g={geometryService:new k("/arcgis/rest/services/Geometry/GeometryServer"),getCurrentLocation:function(e){var c=new p;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(b){var d=
new q({wkid:4326}),d=new f([b.coords.longitude,b.coords.latitude],d);b=new h({attributes:b,geometry:d});c.resolve(b)},c.reject,e):c.reject("Geolocation not enabled.");return c},getCurrentLocationBuffered:function(e,c){var b=new p;g.getCurrentLocation(c).then(function(c){var d=new l;d.unit=k.UNIT_METER;d.bufferSpatialReference=new q({wkid:3308});d.outSpatialReference=new q({wkid:3857});m.mixin(d,e);d.geometries=[c.geometry];d.distances=[c.attributes.coords.accuracy];g.geometryService.buffer(d).then(function(d){b.resolve({location:c,
buffer:d[0]})},b.reject)},b.reject);return b},watchLocation:function(e){var c=new p;navigator.geolocation?c.watch=navigator.geolocation.watchPosition(function(b){var d=new q({wkid:4326}),d=new f([b.coords.longitude,b.coords.latitude],d);b=new h({attributes:b,geometry:d});c.resolve(b)},c.reject,e):c.reject("Geolocation not enabled.");return c},removeWatch:function(e){navigator.geolocation.clearWatch(e.watch)}};return g})},"esri/tasks/BufferParameters":function(){define("esri/tasks/BufferParameters",
"dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel ../geometry/Polygon ../geometry/jsonUtils".split(" "),function(m,p,f,l,k,h,q,g){m=m(null,{declaredClass:"esri.tasks.BufferParameters",geometries:null,outSpatialReference:null,bufferSpatialReference:null,distances:null,unit:null,unionResults:!1,geodesic:!1,toJson:function(){var e={unit:this.unit,unionResults:this.unionResults,geodesic:this.geodesic},c=this.distances,b=this.outSpatialReference,d=this.bufferSpatialReference,
h=f.map(this.geometries,function(b){b="extent"===b.type?q.fromExtent(b):b;return b.toJson()},this),k=this.geometries;if(k&&0<k.length){var m="extent"===k[0].type?"esriGeometryPolygon":g.getJsonType(k[0]);e.geometries=l.toJson({geometryType:m,geometries:h});e.inSR=k[0].spatialReference.wkid?k[0].spatialReference.wkid:l.toJson(k[0].spatialReference.toJson())}c&&(e.distances=c.join(","));b&&(e.outSR=b.wkid?b.wkid:l.toJson(b.toJson()));d&&(e.bufferSR=d.wkid?d.wkid:l.toJson(d.toJson()));return e}});k("extend-esri")&&
p.setObject("tasks.BufferParameters",m,h);return m})},"sixmaps/util/LocalStore":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/cookie","dojo/json","dojox/secure/fromJson"],function(m,p,f,l,k){return m("sixmaps.util.LocalStore",null,{_isLocalStorage:null,cookieExpiry:30,constructor:function(f){p.mixin(this,f);try{this._isLocalStorage="localStorage"in window&&null!==window.localStorage}catch(q){this._isLocalStorage=!1}},set:function(h,k){this._isLocalStorage?localStorage[h]=l.stringify(k):
f(h,l.stringify(k),{expires:cookieExpiry})},get:function(h){return this._isLocalStorage?void 0==localStorage[h]?null:k(localStorage[h]):void 0==f(h)?null:k(f(h))},remove:function(h){this._isLocalStorage?localStorage.removeItem(h):f(h,null,{expires:-1})}})})},"sixmaps/util/Analytics":function(){define([],function(){function m(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[];m("js",new Date);return function(p,f,l,k,h){p.match("send")&&f.match("event")?m("event",l,{action:k,label:h}):
p.match("init")&&(p=document.createElement("script"),p.async=1,p.src="https://www.googletagmanager.com/gtag/js?id\x3d"+f,l=document.getElementsByTagName("script")[0],l.parentNode.insertBefore(p,l),m("config",f))}})},"sixmaps/app/SplashTool":function(){define(["dojo/_base/declare","dijit/form/Button"],function(m,p){return m("sixmaps.app.SplashTool",[p],{title:"Help",iconUrl:require.toUrl("sixmaps/dijits/tools/images/")+"question.png",splashPane:null,constructor:function(f,l){f&&m.safeMixin(this,f)},
onClick:function(){this.splashPane.show()},show:function(){this.splashPane.show()}})})},"sixmaps/app/TermsAndConditions":function(){define("dojo/_base/declare dojo/_base/sniff dojo/aspect dojo/dom-style dojo/has dijit/Dialog sixmaps/dijits/Terms sixmaps/util/Analytics".split(" "),function(m,p,f,l,k,h,q,g){return m("sixmaps.app.TermsAndConditions",[h],{map:null,appToolbar:null,title:"Terms and Conditions","class":"noFade",draggable:!1,isDisplayOnLoad:null,localStore:null,termsParams:null,constructor:function(e,
c){this.termsParams={};e&&m.safeMixin(this,e)},postCreate:function(){var e=this;e.inherited(arguments);l.set(e.containerNode,{maxWidth:"800px"});e.termsNode=new q(e.termsParams);e.map&&e.termsNode.mapExtentConfig&&e.termsNode.mapExtentConfig.set("map",e.map);k("ie")&&l.set(e.domNode,{opacity:"1.0"});l.set(e.closeButtonNode,"display","none");f.after(e.termsNode,"acceptOnClick",function(){e.hide();g("send","event","Terms \x26 Conditions","Terms Accepted");e.localStore.set("showTerms",!0)});f.after(e.termsNode,
"declineOnClick",function(){g("send","event","Terms \x26 Conditions","Terms Rejected");e.localStore.set("showTerms",!1);window.location="//spatialservices.finance.nsw.gov.au/"})},startup:function(){this.termsNode.placeAt(this.containerNode);this.termsNode.startup()},show:function(){this.inherited(arguments);this.onShow()},onShow:function(){var e=this;e.appToolbar&&e.appToolbar.set("disabled",!0);setTimeout(function(){e.termsNode.termsTop.scrollIntoView();e.termsNode.domNode.scrollIntoView()},50);
g("send","event","Terms \x26 Conditions","Terms Displayed")},onHide:function(){this.appToolbar&&this.appToolbar.set("disabled",!1)}})})},"sixmaps/dijits/Terms":function(){define(["dojo/_base/declare","dojo/text!sixmaps/dijits/Terms.html","dijit/_TemplatedMixin","dijit/_WidgetBase","dijit/_WidgetsInTemplateMixin"],function(m,p,f,l,k){return m("sixmaps.dijits.Terms",[l,f,k],{templateString:p,imagesUrl:"",topicStore:null,termsUrl:"",constructor:function(f,k){this.termsUrl=require.toUrl("sixmaps/app/")+
"coreTerms.html";f&&m.safeMixin(this,f);this.imagesUrl=require.toUrl("sixmaps/dijits/images/");this.baseUrl=require.toUrl("sixmaps//")},postCreate:function(){this.inherited(arguments)},onActivate:function(){},onDeactivate:function(){},acceptOnClick:function(){},declineOnClick:function(){},readTermsOnClick:function(f){this.acceptButton.setDisabled(!f)}})})},"sixmaps/dijits/takeMeTo/SingleFieldTakeMeTo":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/on dojo/query dijit/Menu dijit/MenuItem dijit/Tooltip dijit/form/ComboButton sixmaps/dijits/InputForm sixmaps/dijits/takeMeTo/TakeMeTo sixmaps/util/Analytics".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d){return p("sixmaps.dijits.takeMeTo.SingleFieldTakeMeTo",b,{fieldParams:null,searches:null,constructor:function(b,c){this.searches=[];this.fieldParams=[{name:"_singleField_",alias:"",widgetType:"dijit.form.ValidationTextBox",style:"width:200px"}];p.safeMixin(this,b)},postCreate:function(){var b=this;if(!b.inputWidget&&b.fieldParams){var d=new h({}),f=new q({label:"Advanced",onClick:function(){b.onAdvancedSearch()}});d.addChild(f);f=new q({label:"Clear",onClick:function(){b.onClear()}});
d.addChild(f);var m=new e({label:"Search",dropDown:d,onMouseDown:function(){m.domNode.click()}});b.inputWidget=new c({submitButton:m,resetButton:!1,fieldParams:b.fieldParams,region:"top"});b.inputWidget.displayMessage=function(c){c?(g.show(c,b.domNode,["below"]),l(document,"click",function(){g.hide(b.domNode)})):g.hide(b.domNode)};b.inputWidget.placeAt(b.domNode)}b.inherited(arguments);k("table",b.inputWidget.domNode).style({"float":"left"})},onBeforeSearch:function(b,c){},search:function(b,c){d("send",
"event","TakeMeTo - SingleFieldTMT","Search");var e=this;e.onBeforeSearch(b,c);"object"!=typeof b&&(b={_singleField_:{value:b}});e.inputWidget.setFieldValues(b);e.inputWidget.displayMessage();var g=[];for(fieldName in b){var h=b[fieldName].value;"_singleField_"==fieldName&&m.forEach(e.searches,function(b){var c=null;f.isFunction(b.singleFieldSearch)?c=b.singleFieldSearch(h):f.isArray(b.singleSearches)&&m.some(b.singleSearches,function(d){var e=h.match(new RegExp(d.match,"i"));if(e){var g={},f;for(f in d.fields){var k=
null,l=d.fields[f];if("number"==typeof l)k=e[l];else if("string"==typeof l)k=h.match(new RegExp(l))[0];else if("object"==typeof l){var q=h.match(l.exec?l:new RegExp(l.match,"i"));q&&(k=q[l.group||0])}k&&(g[f]=k)}c=b.search(g,null,{selectFirstResult:!1,selectSingleResult:!1});return!0}});if(c)return g.push({search:b,searchResult:c}),!0})}if(g.length){var k=function(){var b=[];m.forEach(g,function(c){!c.searchResult.isResolved()&&b.push(c.search.realTitle||c.search.title)});b.length?e.inputWidget.displayMessage("Searching "+
b.join(", ")):e.inputWidget.displayMessage()};k();var l=!0;m.forEach(g,function(b){b.searchResult.then(function(c){k();c=c.result?c.result:c;l&&c.features.length&&b.search.resultsWidget&&(b.search.resultsWidget.selection.select(0),l=!1)},k)})}else g&&e.inputWidget.displayMessage("We're not sure what you're looking for.\x3cbr\x3e Please change your search and try again,\x3cbr\x3e or use the advanced search.");e.onSearch(g)},onAdvancedSearch:function(){},onSearch:function(b){},onClear:function(){this.inputWidget.clear()}})})},
"dijit/form/ComboButton":function(){require({cache:{"url:dijit/form/templates/ComboButton.html":'\x3ctable class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tcellspacing\x3d\'0\' cellpadding\x3d\'0\' role\x3d"presentation"\r\n\t\x3e\x3ctbody role\x3d"presentation"\x3e\x3ctr role\x3d"presentation"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitStretch dijitButtonNode" data-dojo-attach-point\x3d"buttonNode" data-dojo-attach-event\x3d"ondijitclick:__onClick,onkeydown:_onButtonKeyDown"\r\n\t\t\x3e\x3cdiv id\x3d"${id}_button" class\x3d"dijitReset dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode"\r\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInline dijitButtonText" id\x3d"${id}_label" data-dojo-attach-point\x3d"containerNode" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd id\x3d"${id}_arrow" class\x3d\'dijitReset dijitRight dijitButtonNode dijitArrowButton\'\r\n\t\t\tdata-dojo-attach-point\x3d"_popupStateNode,focusNode,_buttonNode"\r\n\t\t\tdata-dojo-attach-event\x3d"onkeydown:_onArrowKeyDown"\r\n\t\t\ttitle\x3d"${optionsTitle}"\r\n\t\t\trole\x3d"button" aria-haspopup\x3d"true"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitArrowButtonInner" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitArrowButtonChar" role\x3d"presentation"\x3e\x26#9660;\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd style\x3d"display:none !important;"\r\n\t\t\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" data-dojo-attach-point\x3d"valueNode"\r\n\t\t\t\tclass\x3d"dijitOffScreen" aria-hidden\x3d"true" data-dojo-attach-event\x3d"onclick:_onClick"\r\n\t\t/\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\r\n\x3e\x3c/table\x3e\r\n'}});
define("dijit/form/ComboButton","dojo/_base/declare dojo/keys ../focus ./DropDownButton dojo/text!./templates/ComboButton.html ../a11yclick".split(" "),function(m,p,f,l,k){return m("dijit.form.ComboButton",l,{templateString:k,_setIdAttr:"",_setTabIndexAttr:["focusNode","titleNode"],_setTitleAttr:"titleNode",optionsTitle:"",baseClass:"dijitComboButton",cssStateNodes:{buttonNode:"dijitButtonNode",titleNode:"dijitButtonContents",_popupStateNode:"dijitDownArrowButton"},_focusedNode:null,_onButtonKeyDown:function(h){h.keyCode==
p[this.isLeftToRight()?"RIGHT_ARROW":"LEFT_ARROW"]&&(f.focus(this._popupStateNode),h.stopPropagation(),h.preventDefault())},_onArrowKeyDown:function(h){h.keyCode==p[this.isLeftToRight()?"LEFT_ARROW":"RIGHT_ARROW"]&&(f.focus(this.titleNode),h.stopPropagation(),h.preventDefault())},focus:function(h){this.disabled||f.focus("start"==h?this.titleNode:this._popupStateNode)}})})},"dijit/form/DropDownButton":function(){require({cache:{"url:dijit/form/templates/DropDownButton.html":'\x3cspan class\x3d"dijit dijitReset dijitInline"\r\n\t\x3e\x3cspan class\x3d\'dijitReset dijitInline dijitButtonNode\'\r\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" data-dojo-attach-point\x3d"_buttonNode"\r\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"focusNode,titleNode,_arrowWrapperNode,_popupStateNode"\r\n\t\t\trole\x3d"button" aria-haspopup\x3d"true" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon"\r\n\t\t\t\tdata-dojo-attach-point\x3d"iconNode"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\r\n\t\t\t\tid\x3d"${id}_label"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitArrowButtonInner"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitArrowButtonChar"\x3e\x26#9660;\x3c/span\r\n\t\t\x3e\x3c/span\r\n\t\x3e\x3c/span\r\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen" tabIndex\x3d"-1"\r\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick" data-dojo-attach-point\x3d"valueNode" aria-hidden\x3d"true"\r\n/\x3e\x3c/span\x3e\r\n'}});
define("dijit/form/DropDownButton","dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/query ../registry ../popup ./Button ../_Container ../_HasDropDown dojo/text!./templates/DropDownButton.html ../a11yclick".split(" "),function(m,p,f,l,k,h,q,g,e,c){return m("dijit.form.DropDownButton",[q,g,e],{baseClass:"dijitDropDownButton",templateString:c,_fillContent:function(){var b=this.srcNodeRef,c=this.containerNode;if(b&&c)for(;b.hasChildNodes();){var e=b.firstChild;e.hasAttribute&&(e.hasAttribute("data-dojo-type")||
e.hasAttribute("dojoType")||e.hasAttribute("data-"+p._scopeName+"-type")||e.hasAttribute(p._scopeName+"Type"))?(this.dropDownContainer=this.ownerDocument.createElement("div"),this.dropDownContainer.appendChild(e)):c.appendChild(e)}},startup:function(){this._started||(!this.dropDown&&this.dropDownContainer&&(this.dropDown=k.byNode(this.dropDownContainer.firstChild),delete this.dropDownContainer),this.dropDown&&h.hide(this.dropDown),this.inherited(arguments))},isLoaded:function(){var b=this.dropDown;
return!!b&&(!b.href||b.isLoaded)},loadDropDown:function(b){var c=this.dropDown,e=c.on("load",f.hitch(this,function(){e.remove();b()}));c.refresh()},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown}})})},"sixmaps/dijits/InputForm":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/dom-style dijit/_WidgetBase dijit/form/_FormMixin dijit/form/Button dijit/layout/ContentPane sixmaps/util/WidgetCreator".split(" "),function(m,p,f,l,k,
h,q,g,e,c){return p("sixmaps.dijits.InputForm",[h,q],{fieldParams:null,submitButton:null,submitParams:null,resetButton:!0,resetParams:null,_inputFields:null,containerNode:null,messagesNode:null,constructor:function(b,c){this.submitParams={label:"Search",type:"submit"};this.resetParams={label:"Reset",type:"reset"};p.safeMixin(this,b);this._inputFields=[]},postCreate:function(){var b=this;b.containerNode=l.create("div",{},b.domNode);b.tableNode=l.create("table",{},b.containerNode);b.tableBodyNode=l.create("tbody",
null,b.tableNode);b.messagesNode=new e({style:"display:none"});b.messagesNode.placeAt(b.containerNode);m.forEach(b.fieldParams,function(d){var e={style:"",widgetType:"",type:"text",value:"",placeHolder:"",submitOnEnter:"textarea"!=d.type&&"dijit.form.SimpleTextarea"!=d.widgetType};f.mixin(e,d);"undefined"==typeof e.alias&&e.name&&(e.alias=e.name);if(!e.widgetType)switch(e.type){case "number":e.widgetType="dijit.form.NumberTextBox";break;case "checkbox":e.widgetType="dijit.form.CheckBox";break;case "radio":e.widgetType=
"dijit.form.RadioButton";break;case "textarea":e.widgetType="dijit.form.Textarea";break;default:e.widgetType="dijit.form.TextBox"}if(!e.style)switch(e.widgetType){case "dijit.form.NumberTextBox":e.style="width: 100%";break;case "dijit.form.TextBox":e.style="width: 100%"}d=l.create("tr",null,b.tableBodyNode);var g=l.create("th",{style:"width:auto"},d);e.labelNode=l.create("label",{innerHTML:e.alias},g);"hidden"==e.type&&k.set(e.labelNode,{display:"none"});g.appendChild(e.labelNode);g=l.create("td",
null,d);e.inputNode=d;var h=e.params||e;c.createWidget(e.widgetType,h,{placeAt:g}).addCallback(function(c){e.inputBox=c;e.labelNode.htmlFor=c.id;if(e.submitOnEnter)c.on("keypress",function(c){13==c.keyCode&&b.submit()});h.placeHolder&&"dijit.form.Textarea"==e.widgetType&&(c.textbox.placeholder=h.placeHolder);return c});b._inputFields.push(e)});!b.submitButton&&(b.submitButton=new g(b.submitParams));b.submitButton.on("click",f.hitch(b,"submit"));b.submitButton.placeAt(b.domNode);b.resetButton&&(b.resetButton=
new g(b.resetParams),b.resetButton.placeAt(b.domNode),b.resetButton.on("click",function(){b.reset()}))},submit:function(){this.onSubmit(this.getFieldValues())},getFieldValues:function(){var b={};this.submitButton.focus("start");m.forEach(this._inputFields,function(c){switch(c.widgetType){case "dijit.form.CheckBox":c.value=c.inputBox.checked;break;default:c.value=c.inputBox.value}b[c.name]=c});return b},getFieldValue:function(b){return this.getFieldValues()[b].value},setFieldValues:function(b,c){m.forEach(this._inputFields,
function(d){if("undefined"!=typeof b[d.name]&&null!=b[d.name]){var e="undefined"!=typeof b[d.name].value?b[d.name].value:b[d.name];switch(d.widgetType){case "dijit.form.CheckBox":d.inputBox.set("checked",e);break;default:d.inputBox.set("value",e)}}else!c&&d.inputBox.set("value",null)})},setFieldValue:function(b,c){var d={};d[b]=c;this.setFieldValues(d,!0)},clear:function(){m.forEach(this._inputFields,function(b){b.inputBox.set("value",null)})},reset:function(){this.messagesNode.set("content",null);
m.forEach(this._inputFields,function(b){b.inputBox.set("value",b.defaultValue||null)});this.onReset()},onSubmit:function(b){},onReset:function(){},showMessage:function(b){k.set(this.messagesNode.containerNode,"display","");this.messagesNode.set("content",b)}})})},"sixmaps/util/WidgetCreator":function(){define(["dojo/_base/array","dojo/_base/Deferred","dojo/_base/lang","dojo/dom-construct"],function(m,p,f,l){return{createWidget:function(k,h,q){function g(b,d){require([b.replace(/\./g,"/")],function(g){!g&&
(g=f.getObject(b));a:{if(h.dataStore){if(!d){c.errback("sixmaps.util.WidgetCreator - "+h.dataStore.type+" is not a constructor. Perhaps missing a dojo.require statement?");break a}h.store=new d(f.clone(h.dataStore.params))}g?(g=h.constructorArgs?g.apply(window,h.constructorArgs):new g(h,e.node),e.placeAt&&g.placeAt(e.placeAt),c.callback(g)):c.errback("sixmaps.util.WidgetCreator - "+k+" is not a constructor. Perhaps missing a dojo.require statement?")}})}h=f.mixin({},h);var e={node:null,placeAt:null};
f.mixin(e,q);e.node||"dijit.form.FilteringSelect"!=k&&"dijit.form.NumberSpinner"!=k||(e.node=l.create("div"));var c=new p;h.dataStore?require([h.dataStore.type.replace(/\./g,"/")],function(b){!b&&(b=f.getObject(h.dataStore.type));g(k,b)}):g(k);return c}}})},"sixmaps/dijits/takeMeTo/TakeMeTo":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/dom-construct dijit/layout/ContentPane sixmaps/dijits/InputForm sixmaps/dijits/takeMeTo/TakeMeToSearch sixmaps/util/WidgetCreator sixmaps/util/Analytics".split(" "),
function(m,p,f,l,k,h,q,g,e,c){return p("sixmaps.dijits.takeMeTo.TakeMeTo",[h,g],{resultsAutoWidth:null,gutters:!1,infoTemplate:null,resultsWidgetParams:null,fieldParams:null,inputWidget:null,resultsWidgetType:"sixmaps.dijits.takeMeTo.TakeMeToResults",constructor:function(b,c){this.resultsWidgetParams={};p.safeMixin(this,b)},postCreate:function(){this.inherited(arguments);var b=this;if(!b.resultsWidgetParams.structure&&b.fieldParams){b.resultsWidgetParams.structure=[];for(var c=0;c<b.fieldParams.length;c++){var e=
b.fieldParams[c];b.resultsWidgetParams.structure.push({field:e.name,name:e.alias,width:e.width})}}!b.outFields&&b.resultsWidgetParams.structure&&(b.outFields=m.map(b.resultsWidgetParams.structure,function(b){return b.field}));!b.inputWidget&&b.fieldParams&&(b.inputWidget=new q({fieldParams:b.fieldParams,region:"top"}),b.inputWidget.placeAt(b.domNode));b.inputWidget&&b.inputWidget.on("submit",f.hitch(b,"search"));b.inputWidget&&b.inputWidget.on("reset",function(){b.resultsWidget&&(b.resultsWidget.clear(),
b.resultsWidget.destroyRecursive?b.resultsWidget.destroyRecursive():k.destroy(b.resultsWidget.domNode),b.resultsWidget=null)})},reset:function(){this.inputWidget&&this.inputWidget.reset()},_beforeSearch:function(b,d,g){var h=this;c("send","event","TakeMeTo - "+h.realTitle||h.title,"Search");for(var q in b)d=b[q],"object"!=typeof d&&(b[q]={value:d});var r={};m.forEach(h.fieldParams,function(c){var d=b[c.alias]||b[c.name];d&&(r[c.name]=f.mixin({},c,d),d.matched=!0)});for(q in b)d=b[q],d.matched||(r[q]=
d);h.inputWidget&&h.inputWidget.setFieldValues(r);h.resultsWidget&&(h.resultsWidget.destroyRecursive?h.resultsWidget.destroyRecursive():k.destroy(h.resultsWidget.domNode),h.resultsWidget=null);g=f.mixin(h.resultsWidgetParams,g);g.region="center";h.resultsWidgetDfd=new l;e.createWidget(h.resultsWidgetType,g).then(function(b){h.resultsWidget=b;h.resultsWidget.placeAt(h.domNode);h.resultsWidget.startup();h.resultsWidget.displayLoadingMessage();h.resultsWidget.realTitle=h.title;h.resultsWidgetDfd.resolve(h.resultsWidget)});
return r},search:function(b,c,e){var d=this._beforeSearch.apply(this,arguments);return this.inherited(arguments,[d,c,e])},onSearchResult:function(b,c,e,g){var d=this;d.infoTemplate&&m.forEach(b.features,function(b){b.infoTemplate=b.infoTemplate||d.infoTemplate});d.resultsWidgetDfd.then(function(c){c.showResults(b)})},onSearchError:function(b){this.resultsWidget&&this.resultsWidget.displayError(b)},resize:function(){this.inherited(arguments);this.inputWidget&&this.inputWidget.resize&&this.inputWidget.resize();
this.resultsWidget&&this.resultsWidget.resize&&this.resultsWidget.resize()}})})},"sixmaps/dijits/takeMeTo/TakeMeToSearch":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/Deferred dijit/_WidgetBase esri/tasks/QueryTask esri/tasks/query".split(" "),function(m,p,f,l,k,h,q){return p("sixmaps.dijits.takeMeTo.TakeMeToSearch",[k],{layerUrl:"",outFields:null,outSR:3857,queryParams:null,_queryTask:null,replace:null,constructor:function(g,e){p.safeMixin(this,g||{})},_setLayerUrlAttr:function(g){this.layerUrl=
g;this._queryTask=new h(this.layerUrl)},createWhereParams:function(g){var e=[];for(fieldName in g){var c=g[fieldName];"object"!=typeof c&&(c={value:c});var b=c.value;if(!c.noQuery&&b||0===b||"0"===b){var d=" \x3d ";!b.toUpperCase||c.exactCase&&!c.ignoreCase||(b=b.toUpperCase());switch(c.searchType){case "contains":b="%"+b+"%";break;case "endsWith":b="%"+b;break;case "startsWith":b+="%"}"exact"!=c.searchType&&"string"==typeof b&&b.match(/%/)&&(d=" like ");if(!f.isArray(b)&&isNaN(Number(b))||"esriFieldTypeString"==
c.type||"string"==c.type)b="'"+(""+b).replace(/'/g,"''")+"'";c.ignoreCase&&(fieldName="upper("+fieldName+")");f.isArray(b)&&(d=" IN ",b="("+b.join(",")+")");e.push(fieldName+d+b)}}return e},search:function(g,e){var c=this,b={where:c.createWhereParams(g).join(" AND "),outSpatialReference:{wkid:c.outSR},returnGeometry:!0,outFields:c.outFields};f.mixin(b,c.queryParams||{},e||{});var d=new q;f.mixin(d,b);var h=new l;if(!(d.where||d.geometry||d.text))return c.onSearchError("No query parameters entered."),
h.reject({error:"No query parameters entered.",fields:g,queryParams:e,query:d}),h;if(c.replace)for(b=0;b<c.replace.length;b++){var k=c.replace[b];d.where=d.where.replace(new RegExp(k.match,k.options),k.replacement)}c._queryTask.execute(d).then(function(b){c.onSearchResult(b,g,e,d);h.resolve({result:b,fields:g,queryParams:e,query:d})},function(b){c.onSearchError(b,g,e,d);h.reject({error:b,fields:g,queryParams:e,query:d})});return h},simpleSearch:function(g,e){if("object"!=typeof g)return null;var c=
{};for(name in g)c[name]={value:g[name]};return this.search(c,e)},onSearchResult:function(g,e,c,b){},onSearchError:function(g){}})})},"sixmaps/dijits/takeMeTo/TakeMeToContainer":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-construct dojo/when dijit/layout/TabContainer dijit/layout/TabController dojo/_base/xhr dojo/Deferred dojo/dom".split(" "),function(m,p,f,l,k,h,q,g,e,c,b){return p("sixmaps.dijits.takeMeTo.TakeMeToContainer",q,{doLayout:!1,controllerWidget:"dijit.layout.TabController",
constructor:function(b,c){var d=this;p.safeMixin(d,b);require(["dojo/domReady!"],function(){for(var b=d.getChildren(),c=0;c<b.length;c++)d.connectFromChild(b[c])})},postCreate:function(){this.inherited(arguments);this.helpContent=k.create("div")},connectFromChild:function(b){var c=this;b._takeMeToContainer!=c&&(b._takeMeToContainer=c,!b.realTitle&&(b.realTitle=b.title),b.on("searchresult",function(d,e,g,f){b.set("title",b.realTitle+" ("+d.features.length+")");c.onSearchResult(d,e,g,f,b)}),b.on("searcherror",
function(d){b.set("title",b.realTitle+" - error");c.onSearchError(d,c)}),b.inputWidget.on("reset",function(){b.set("title",b.realTitle)}),l.after(b,"search",function(){b.set("title",b.realTitle+" ...");h(b.resultsWidgetDfd||b.resultsWidget,function(b){b.on("resultselected",f.hitch(c,"onResultSelected"));b.on("rowaction",f.hitch(c,"onRowAction"));b.on("resultdeselected",f.hitch(c,"onResultDeselected"));b.on("resultmouseover",f.hitch(c,"onResultMouseOver"));b.on("resultmouseout",f.hitch(c,"onResultMouseOut"));
b.on("resultselectionchanged",f.hitch(c,"onSelectionChanged"))})},!0))},_setMapGraphicsAttr:function(b){this.connectMouseoversToMapGraphics(b);this.connectSelectionToMapGraphics(b)},connectMouseoversToMapGraphics:function(b){this.on("resultmouseover",f.hitch(b,"highlightFeature"));this.on("resultmouseout",function(c){b.clearHighlight()})},connectSelectionToMapGraphics:function(b){this.on("selectionchanged",function(c){b.clear();h(b.zoomToFeatures(c),function(d){m.forEach(c,function(c){b.add(c)})})})},
addChild:function(b){this.inherited(arguments);this.connectFromChild(b);if(b.helpHTML){var c=this.app.substitute(b.helpHTML,this.appParams),c=k.create("li",{innerHTML:c});this.helpContent.appendChild(c)}return b},reset:function(){m.forEach(this.getChildren(),function(b){"function"==typeof b.reset&&b.reset()})},clearSelection:function(){m.forEach(this.getChildren(),function(b){b.resultsWidget&&"function"==typeof b.resultsWidget.clearSelection&&b.resultsWidget.clearSelection()})},onSearchResult:function(b,
c,e,g,f){b.features&&b.features.length&&this.selectChild(f)},onSearchError:function(b,c){},onResultSelected:function(b){},onRowAction:function(b){},onResultDeselected:function(b){},onResultMouseOver:function(b){},onResultMouseOut:function(b){},onSelectionChanged:function(b){}})})},"sixmaps/dijits/tools/Toggle":function(){define(["dojo/_base/declare","dojo/dom-attr","dojo/dom-style","dijit/_base/wai","dijit/form/ToggleButton"],function(m,p,f,l,k){return m("sixmaps.dijits.tools.Toggle",[k],{iconUrl:null,
_setIconUrlAttr:function(h){h=h.match(/(^(http:\/\/|\/))|channels/)?h:require.toUrl(this.declaredClass.replace(/\./g,"/"))+"/../"+h;f.set(this.iconNode,"backgroundImage","url("+h+")");this._set("iconUrl",h)},onChange:function(f){if(f)this.onActivate();else this.onDeactivate()},onActivate:function(){},onDeactivate:function(){}})})},"dijit/_base/wai":function(){define("dijit/_base/wai",["dojo/dom-attr","dojo/_base/lang","../main","../hccss"],function(m,p,f){p.mixin(f,{hasWaiRole:function(f,k){f=this.getWaiRole(f);
return k?-1<f.indexOf(k):0<f.length},getWaiRole:function(f){return p.trim((m.get(f,"role")||"").replace("wairole:",""))},setWaiRole:function(f,k){m.set(f,"role",k)},removeWaiRole:function(f,k){var h=m.get(f,"role");h&&(k?(k=p.trim((" "+h+" ").replace(" "+k+" "," ")),m.set(f,"role",k)):f.removeAttribute("role"))},hasWaiState:function(f,k){return f.hasAttribute?f.hasAttribute("aria-"+k):!!f.getAttribute("aria-"+k)},getWaiState:function(f,k){return f.getAttribute("aria-"+k)||""},setWaiState:function(f,
k,h){f.setAttribute("aria-"+k,h)},removeWaiState:function(f,k){f.removeAttribute("aria-"+k)}});return f})},"sixmaps/dijits/BasemapLayer":function(){define(["dojo/_base/declare","esri/dijit/BasemapLayer"],function(m,p){return p=m("sixmaps.dijits.BasemapLayer",[p],{minScale:null,maxScale:null,constructor:function(f){m.safeMixin(this,f)}})})},"esri/dijit/BasemapLayer":function(){define("esri/dijit/BasemapLayer",["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(m,p,f,l){m=m(null,
{declaredClass:"esri.dijit.BasemapLayer",constructor:function(f){f=f||{};this.url=f.url;this.type=f.type;this.isReference=!0===f.isReference?!0:!1;this.opacity=f.opacity;this.visibleLayers=f.visibleLayers;this.displayLevels=f.displayLevels;this.exclusionAreas=f.exclusionAreas;this.bandIds=f.bandIds;this.renderingRule=f.renderingRule;this.templateUrl=f.templateUrl;this.copyright=f.copyright;this.subDomains=f.subDomains;this.fullExtent=f.fullExtent;this.initialExtent=f.initialExtent;this.tileInfo=f.tileInfo;
this.tileServers=f.tileServers;this.styleUrl=f.styleUrl}});f("extend-esri")&&p.setObject("dijit.BasemapLayer",m,l);return m})},"sixmaps/dijits/BasemapMenu":function(){define("dojo/_base/array dojo/_base/declare dojo/aspect dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/query dojo/text!sixmaps/dijits/basemapMenuHelp.html dojo/when dijit/_base/popup dijit/form/VerticalSlider dijit/layout/ContentPane dijit/TooltipDialog sixmaps/dijits/BasemapThumb sixmaps/dijits/HelpTopic sixmaps/dijits/QueryBasemapGallery sixmaps/map/Graphics sixmaps/util/Analytics sixmaps/util/Require".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x,w,y,z){return p("sixmaps.dijits.BasemapMenu",[r],{basemaps:null,sliderPos:100,map:null,activeBasemaps:null,basemapQuery:null,basemapGallery:null,showArcGISBasemaps:!1,_activeGallery:"",toolbar:null,popupContainer:null,closeAnim:null,openAnim:null,basemapThumbs:[],helpNode:null,foreground:null,helpHTML:e,constructor:function(e,g){function h(){var c=k.create("div",{}),e=k.create("div",{"class":"basemapMenuDiv"},c);r.foreground=new u({title:"Foreground"});k.place(r.foreground.containerNode,
e);f.after(r.foreground.thumbDiv,"onclick",function(){y("send","event","Tools - Basemap Menu","Foreground Basemap Selected");r.opacitySlider.setValue(100)});f.after(r.foreground.infoImg,"onclick",function(){r._showBasemapInfo(r.foregroundBasemap);q.set(r.foreground.infoImg,"visibility","visible")});f.after(r.foreground.settingsImg,"onclick",function(){r._showBasemapGallery(r.foregroundBasemap);q.set(r.foreground.settingsImg,"visibility","visible");r._activeGallery="foreground"});r.background=new u({title:"Background"});
k.place(r.background.containerNode,e);f.after(r.background.thumbDiv,"onclick",function(){y("send","event","Tools - Basemap Menu","Background Basemap Selected");r.opacitySlider.setValue(0)});f.after(r.background.infoImg,"onclick",function(){r._showBasemapInfo(r.backgroundBasemap);q.set(r.background.infoImg,"visibility","visible")});f.after(r.background.settingsImg,"onclick",function(){r._showBasemapGallery(r.backgroundBasemap);q.set(r.background.settingsImg,"visibility","visible");r._activeGallery=
"background"});var g=k.create("div",{"class":"basemapSlider"},c),g=k.create("div",{},g);r.opacitySlider=new d({style:"height:125px;",showButtons:!1,value:r.sliderPos,intermediateChanges:!0,onChange:function(b){100<=b?(m.forEach(r.foregroundBasemap.layers,function(b){b.realLayer&&r.basemapGallery.checkScale(b.realLayer)}),m.forEach(r.backgroundBasemap.layers,function(b){b.realLayer&&b.realLayer.setVisibility(!1)})):0>=b?(m.forEach(r.backgroundBasemap.layers,function(b){b.realLayer&&r.basemapGallery.checkScale(b.realLayer)}),
m.forEach(r.foregroundBasemap.layers,function(b){b.realLayer&&b.realLayer.setVisibility(!1)})):(m.forEach(r.backgroundBasemap.layers,function(b){b.realLayer&&r.basemapGallery.checkScale(b.realLayer)}),m.forEach(r.foregroundBasemap.layers,function(b){b.realLayer&&r.basemapGallery.checkScale(b.realLayer)}));m.forEach(r.foregroundBasemap.layers,function(c){c.realLayer&&c.realLayer.setOpacity(b/100)})}},g);r.basemapGalleryMenu=k.create("div",{});r.galleryPopup=new v({content:r.basemapGalleryMenu});f.after(r.galleryPopup,
"onBlur",function(){b.close(r.galleryPopup);"foreground"==r._activeGallery?q.set(r.foreground.settingsImg,"visibility","inherit"):"background"==r._activeGallery&&q.set(r.background.settingsImg,"visibility","inherit")});r.attachBasemapThumbs(r.basemapGallery.basemaps,r.basemapGalleryMenu);var h=k.create("a",{innerHTML:"Looking for 1943 or other imagery?",onclick:function(){y("send","event","Tools - Basemap Menu","1943 link clicked");r.background.settingsImg.click()},onmouseover:function(){q.set(h,
"textDecoration","underline");q.set(h,"cursor","pointer")},onmouseout:function(){q.set(h,"textDecoration","none");q.set(h,"cursor","default")},style:"position:relative;top:10px;left:10px;font-weight:normal;text-decoration:none"},e);k.place(c,r.containerNode);l.add(r.galleryPopup.domNode,"dijitTooltipLeft");q.set(r.galleryPopup.domNode,"marginTop","-23px");l.add(c,"toolPaneContainer");q.set(c,"height","215px");q.set(r.containerNode,{width:"auto",height:"auto",overflow:"hidden"});q.set(r.basemapGalleryMenu,
{width:"auto",height:"auto"})}p.safeMixin(this,e);var r=this;z.requireCss(require.toUrl("sixmaps/app/")+"css/basemapMenu.css");r.mapGraphics=new w({map:r.map});r.containerNode=k.create("div");r.basemapGallery=r.basemaps?new x({basemaps:r.basemaps,map:r.map,showArcGISBasemaps:r.showArcGISBasemaps}):!r.basemaps&&r.basemapQuery?new x({map:r.map,query:r.basemapQuery}):new x({map:r.map});if(r.activeBasemaps){var t=r.checkBasemap(r.activeBasemaps.foreground);t.opacity=r.sliderPos/100;r.basemapGallery.set("ForegroundBasemap",
t)}r.activeBasemaps&&r.basemapGallery.set("BackgroundBasemap",r.checkBasemap(r.activeBasemaps.background));r.basemapGallery._getServiceInfos(r.checkBasemap(r.activeBasemaps.foreground));r.basemapGallery._getServiceInfos(r.checkBasemap(r.activeBasemaps.background));c(r.basemapGallery.basemapsLoaded,function(){r.basemapGallery.createBasemapThumbs().then(function(){h();var b=r.checkBasemap(r.activeBasemaps.foreground);r.foreground.setThumb(b.thumbNode);!b.myConnects&&(b.myConnects=[]);r.foregroundBasemap=
b;b=r.checkBasemap(r.activeBasemaps.background);r.background.setThumb(b.thumbNode,"first");!b.myConnects&&(b.myConnects=[]);q.set(r.background.basemapInfo,"top","0px");r.backgroundBasemap=b;r.opacitySlider.onChange(r.opacitySlider.value);f.after(r.map,"onZoomEnd",function(){r.opacitySlider.onChange(r.opacitySlider.value)})})});f.after(r.basemapGallery,"onBasemapSelected",function(c){c!=r.foregroundBasemap&&c!=r.backgroundBasemap&&("foreground"==r._activeGallery?(y("send","event","Tools - Basemap Menu",
"Foreground Basemap Changed",c.title),r.setForeground(c),q.set(r.foreground.settingsImg,"visibility","inherit")):"background"==r._activeGallery&&(y("send","event","Tools - Basemap Menu","Background Basemap Changed",c.title),r.setBackground(c),q.set(r.background.settingsImg,"visibility","inherit")),b.close(r.galleryPopup))},!0);f.after(r,"_showBasemapInfo",function(c){m.forEach(c.myConnects,function(b){b.remove()});c.myConnects.push(f.after(c.detailsNode,"onBlur",function(){b.close(c.detailsNode);
q.set(r.foreground.infoImg,"visibility","inherit");q.set(r.background.infoImg,"visibility","inherit")}))},!0)},setForeground:function(b){b.opacity=this.opacitySlider.value/100;this.foregroundBasemap&&(!this.foregroundBasemap.myConnects&&(this.foregroundBasemap.myConnects=[]),this.basemapGallery.addThumb(this.foregroundBasemap,this.basemapGalleryMenu,"first"));this.basemapGallery.set("ForegroundBasemap",b);this.foreground.setThumb(b.thumbNode);m.forEach(b.myConnects,function(b){b.remove()});this.foregroundBasemap=
b},checkBasemap:function(b){if("string"==typeof b){var c=null;m.some(this.basemaps,function(d){if(d.id==b)return c=d,!0});c&&(b=c)}return b},_showBasemapInfo:function(c){y("send","event","Tools - Basemap Menu","Show Basemap Info",c.title);c.detailsNode&&c.detailsNode.content&&this.basemapGallery.createBasemapDetails(c.detailsNode.content,c);var d=h.position(c.thumbNode);b.open({popup:c.detailsNode,x:d.x,y:d.y+d.h/2,orient:"r"});c.detailsNode.focus()},_showBasemapGallery:function(c){c=h.position(c.thumbNode);
b.open({popup:this.galleryPopup,x:c.x,y:c.y+c.h/2,orient:"r"});q.set(this.galleryPopup.domNode,"opacity","1");this.galleryPopup.focus()},setBackground:function(b){this.backgroundBasemap&&(!this.backgroundBasemap.myConnects&&(this.backgroundBasemap.myConnects=[]),this.basemapGallery.addThumb(this.backgroundBasemap,this.basemapGalleryMenu,"first"));this.basemapGallery.set("BackgroundBasemap",b);this.background.setThumb(b.thumbNode,"first");q.set(this.background.basemapInfo,"top","0px");m.forEach(b.myConnects,
function(b){b.remove()});this.backgroundBasemap=b},postCreate:function(){this.inherited(arguments);k.place(this.containerNode,this.domNode);this.helpNode=new t({templateString:this.helpHTML,imagesUrl:require.toUrl("sixmaps/dijits/images/"),baseUrl:require.toUrl("sixmaps//")})},attachBasemapThumbs:function(b,c){var d=this;d.basemapGallery&&m.forEach(b,function(b){!b.myConnects&&(b.myConnects=[]);b.thumbNode&&d.basemapGallery.addThumb(b,c)})},getChildNodes:function(){var b=[];g("*",this.domNode.parentNode).forEach(function(c,
d,e){b.push(c)});window.nodeList=b;g("*",this.basemapGalleryMenu).forEach(function(c,d,e){b.push(c)});m.forEach(this.basemapGallery.basemaps,function(c){c.detailsNode&&g("*",c.detailsNode.domNode).forEach(function(c,d,e){b.push(c)})});return b}})})},"dijit/_base/popup":function(){define("dijit/_base/popup",["dojo/dom-class","dojo/_base/window","../popup","../BackgroundIframe"],function(m,p,f){var l=f._createWrapper;f._createWrapper=function(f){f.declaredClass||(f={_popupWrapper:f.parentNode&&m.contains(f.parentNode,
"dijitPopup")?f.parentNode:null,domNode:f,destroy:function(){},ownerDocument:f.ownerDocument,ownerDocumentBody:p.body(f.ownerDocument)});return l.call(this,f)};var k=f.open;f.open=function(f){if(f.orient&&"string"!=typeof f.orient&&!("length"in f.orient)){var h=[],g;for(g in f.orient)h.push({aroundCorner:g,corner:f.orient[g]});f.orient=h}return k.call(this,f)};return f})},"dijit/form/VerticalSlider":function(){require({cache:{"url:dijit/form/templates/VerticalSlider.html":'\x3ctable class\x3d"dijit dijitReset dijitSlider dijitSliderV" cellspacing\x3d"0" cellpadding\x3d"0" border\x3d"0" rules\x3d"none" data-dojo-attach-event\x3d"onkeydown:_onKeyDown,onkeyup:_onKeyUp"\r\n\trole\x3d"presentation"\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerV"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderIncrementIconV" style\x3d"display:none" data-dojo-attach-point\x3d"decrementButton"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e+\x3c/span\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3ccenter\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperV dijitSliderTopBumper" data-dojo-attach-event\x3d"press:_onClkIncBumper"\x3e\x3c/div\x3e\x3c/center\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd data-dojo-attach-point\x3d"leftDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationL dijitSliderDecorationV"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderDecorationC" style\x3d"height:100%;"\r\n\t\t\t\x3e\x3cinput data-dojo-attach-point\x3d"valueNode" type\x3d"hidden" ${!nameAttrSetting}\r\n\t\t\t/\x3e\x3ccenter class\x3d"dijitReset dijitSliderBarContainerV" role\x3d"presentation" data-dojo-attach-point\x3d"sliderBarContainer"\r\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" data-dojo-attach-point\x3d"remainingBar" class\x3d"dijitSliderBar dijitSliderBarV dijitSliderRemainingBar dijitSliderRemainingBarV" data-dojo-attach-event\x3d"press:_onBarClick"\x3e\x3c!--#5629--\x3e\x3c/div\r\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" data-dojo-attach-point\x3d"progressBar" class\x3d"dijitSliderBar dijitSliderBarV dijitSliderProgressBar dijitSliderProgressBarV" data-dojo-attach-event\x3d"press:_onBarClick"\r\n\t\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderMoveable dijitSliderMoveableV" style\x3d"vertical-align:top;"\r\n\t\t\t\t\t\t\x3e\x3cdiv data-dojo-attach-point\x3d"sliderHandle,focusNode" class\x3d"dijitSliderImageHandle dijitSliderImageHandleV" data-dojo-attach-event\x3d"press:_onHandleClick" role\x3d"slider"\x3e\x3c/div\r\n\t\t\t\t\t\x3e\x3c/div\r\n\t\t\t\t\x3e\x3c/div\r\n\t\t\t\x3e\x3c/center\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd data-dojo-attach-point\x3d"containerNode,rightDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationR dijitSliderDecorationV"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3ccenter\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperV dijitSliderBottomBumper" data-dojo-attach-event\x3d"press:_onClkDecBumper"\x3e\x3c/div\x3e\x3c/center\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerV"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderDecrementIconV" style\x3d"display:none" data-dojo-attach-point\x3d"incrementButton"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e-\x3c/span\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\x3e\x3c/table\x3e\r\n'}});
define("dijit/form/VerticalSlider",["dojo/_base/declare","./HorizontalSlider","dojo/text!./templates/VerticalSlider.html"],function(m,p,f){return m("dijit.form.VerticalSlider",p,{templateString:f,_mousePixelCoord:"pageY",_pixelCount:"h",_startingPixelCoord:"y",_handleOffsetCoord:"top",_progressPixelSize:"height",_descending:!0,_isReversed:function(){return this._descending}})})},"dijit/form/HorizontalSlider":function(){require({cache:{"url:dijit/form/templates/HorizontalSlider.html":'\x3ctable class\x3d"dijit dijitReset dijitSlider dijitSliderH" cellspacing\x3d"0" cellpadding\x3d"0" border\x3d"0" rules\x3d"none" data-dojo-attach-event\x3d"onkeydown:_onKeyDown, onkeyup:_onKeyUp"\r\n\trole\x3d"presentation"\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\t\x3e\x3ctd data-dojo-attach-point\x3d"topDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationT dijitSliderDecorationH"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderDecrementIconH" style\x3d"display:none" data-dojo-attach-point\x3d"decrementButton"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e-\x3c/span\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper" data-dojo-attach-event\x3d"press:_onClkDecBumper"\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3cinput data-dojo-attach-point\x3d"valueNode" type\x3d"hidden" ${!nameAttrSetting}\r\n\t\t\t/\x3e\x3cdiv class\x3d"dijitReset dijitSliderBarContainerH" role\x3d"presentation" data-dojo-attach-point\x3d"sliderBarContainer"\r\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" data-dojo-attach-point\x3d"progressBar" class\x3d"dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH" data-dojo-attach-event\x3d"press:_onBarClick"\r\n\t\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderMoveable dijitSliderMoveableH"\r\n\t\t\t\t\t\t\x3e\x3cdiv data-dojo-attach-point\x3d"sliderHandle,focusNode" class\x3d"dijitSliderImageHandle dijitSliderImageHandleH" data-dojo-attach-event\x3d"press:_onHandleClick" role\x3d"slider"\x3e\x3c/div\r\n\t\t\t\t\t\x3e\x3c/div\r\n\t\t\t\t\x3e\x3c/div\r\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" data-dojo-attach-point\x3d"remainingBar" class\x3d"dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH" data-dojo-attach-event\x3d"press:_onBarClick"\x3e\x3c/div\r\n\t\t\t\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper" data-dojo-attach-event\x3d"press:_onClkIncBumper"\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderIncrementIconH" style\x3d"display:none" data-dojo-attach-point\x3d"incrementButton"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e+\x3c/span\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\t\x3e\x3ctd data-dojo-attach-point\x3d"containerNode,bottomDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationB dijitSliderDecorationH"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\x3e\x3c/table\x3e\r\n'}});
define("dijit/form/HorizontalSlider","dojo/_base/array dojo/_base/declare dojo/dnd/move dojo/_base/fx dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/sniff dojo/dnd/Moveable dojo/dnd/Mover dojo/query dojo/mouse dojo/on ../_base/manager ../focus ../typematic ./Button ./_FormValueWidget ../_Container dojo/text!./templates/HorizontalSlider.html".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x,w,y,z,B){var A=p("dijit.form._SliderMover",b,{onMouseMove:function(b){var c=this.widget,
d=c._abspos;d||(d=c._abspos=k.position(c.sliderBarContainer,!0),c._setPixelValue_=g.hitch(c,"_setPixelValue"),c._isReversed_=c._isReversed());b=b[c._mousePixelCoord]-d[c._startingPixelCoord];c._setPixelValue_(c._isReversed_?d[c._pixelCount]-b:b,d[c._pixelCount],!1)},destroy:function(c){b.prototype.destroy.apply(this,arguments);var d=this.widget;d._abspos=null;d._setValueAttr(d.value,!0)}});f=p("dijit.form.HorizontalSlider",[y,z],{templateString:B,value:0,showButtons:!0,minimum:0,maximum:100,discreteValues:Infinity,
pageIncrement:2,clickSelect:!0,slideDuration:u.defaultDuration,_setIdAttr:"",_setNameAttr:"valueNode",baseClass:"dijitSlider",cssStateNodes:{incrementButton:"dijitSliderIncrementButton",decrementButton:"dijitSliderDecrementButton",focusNode:"dijitSliderThumb"},_mousePixelCoord:"pageX",_pixelCount:"w",_startingPixelCoord:"x",_handleOffsetCoord:"left",_progressPixelSize:"width",_onKeyUp:function(b){this.disabled||this.readOnly||b.altKey||b.ctrlKey||b.metaKey||this._setValueAttr(this.value,!0)},_onKeyDown:function(b){if(!(this.disabled||
this.readOnly||b.altKey||b.ctrlKey||b.metaKey)){switch(b.keyCode){case q.HOME:this._setValueAttr(this.minimum,!1);break;case q.END:this._setValueAttr(this.maximum,!1);break;case this._descending||this.isLeftToRight()?q.RIGHT_ARROW:q.LEFT_ARROW:case !1===this._descending?q.DOWN_ARROW:q.UP_ARROW:case !1===this._descending?q.PAGE_DOWN:q.PAGE_UP:this.increment(b);break;case this._descending||this.isLeftToRight()?q.LEFT_ARROW:q.RIGHT_ARROW:case !1===this._descending?q.UP_ARROW:q.DOWN_ARROW:case !1===this._descending?
q.PAGE_UP:q.PAGE_DOWN:this.decrement(b);break;default:return}b.stopPropagation();b.preventDefault()}},_onHandleClick:function(b){this.disabled||this.readOnly||(e("ie")||t.focus(this.sliderHandle),b.stopPropagation(),b.preventDefault())},_isReversed:function(){return!this.isLeftToRight()},_onBarClick:function(b){if(!this.disabled&&!this.readOnly&&this.clickSelect){t.focus(this.sliderHandle);b.stopPropagation();b.preventDefault();var c=k.position(this.sliderBarContainer,!0),d=b[this._mousePixelCoord]-
c[this._startingPixelCoord];this._setPixelValue(this._isReversed()?c[this._pixelCount]-d:d,c[this._pixelCount],!0);this._movable.onMouseDown(b)}},_setPixelValue:function(b,c,d){if(!this.disabled&&!this.readOnly){var e=this.discreteValues;if(1>=e||Infinity==e)e=c;e--;this._setValueAttr(Math.max(Math.min((this.maximum-this.minimum)*Math.round(b/(c/e))/e+this.minimum,this.maximum),this.minimum),d)}},_setValueAttr:function(b,c){this._set("value",b);this.valueNode.value=b;this.focusNode.setAttribute("aria-valuenow",
b);this.inherited(arguments);var d=this.maximum>this.minimum?(b-this.minimum)/(this.maximum-this.minimum):0,e=!1===this._descending?this.remainingBar:this.progressBar,g=!1===this._descending?this.progressBar:this.remainingBar;this._inProgressAnim&&"stopped"!=this._inProgressAnim.status&&this._inProgressAnim.stop(!0);if(c&&0<this.slideDuration&&e.style[this._progressPixelSize]){var f=this,h={},k=parseFloat(e.style[this._progressPixelSize]),q=this.slideDuration*(d-k/100);0!=q&&(0>q&&(q=0-q),h[this._progressPixelSize]=
{start:k,end:100*d,units:"%"},this._inProgressAnim=l.animateProperty({node:e,duration:q,onAnimate:function(b){g.style[f._progressPixelSize]=100-parseFloat(b[f._progressPixelSize])+"%"},onEnd:function(){delete f._inProgressAnim},properties:h}),this._inProgressAnim.play())}else e.style[this._progressPixelSize]=100*d+"%",g.style[this._progressPixelSize]=100*(1-d)+"%"},_bumpValue:function(b,c){if(!(this.disabled||this.readOnly||this.maximum<=this.minimum)){var d=h.getComputedStyle(this.sliderBarContainer),
e=k.getContentBox(this.sliderBarContainer,d),d=this.discreteValues;if(1>=d||Infinity==d)d=e[this._pixelCount];d--;b=Math.round((this.value-this.minimum)*d/(this.maximum-this.minimum))+b;0>b&&(b=0);b>d&&(b=d);b=b*(this.maximum-this.minimum)/d+this.minimum;this._setValueAttr(b,c)}},_onClkBumper:function(b){this.disabled||this.readOnly||!this.clickSelect||this._setValueAttr(b,!0)},_onClkIncBumper:function(){this._onClkBumper(!1===this._descending?this.minimum:this.maximum)},_onClkDecBumper:function(){this._onClkBumper(!1===
this._descending?this.maximum:this.minimum)},decrement:function(b){this._bumpValue(b.keyCode==q.PAGE_DOWN?-this.pageIncrement:-1)},increment:function(b){this._bumpValue(b.keyCode==q.PAGE_UP?this.pageIncrement:1)},_mouseWheeled:function(b){this.focused&&(b.stopPropagation(),b.preventDefault(),this._bumpValue(0>b.wheelDelta?-1:1,!0))},startup:function(){this._started||(m.forEach(this.getChildren(),function(b){this[b.container]!=this.containerNode&&this[b.container].appendChild(b.domNode)},this),this.inherited(arguments))},
_typematicCallback:function(b,c,d){if(-1==b)this._setValueAttr(this.value,!0);else this[c==(this._descending?this.incrementButton:this.decrementButton)?"decrement":"increment"](d)},buildRendering:function(){this.inherited(arguments);this.showButtons&&(this.incrementButton.style.display="",this.decrementButton.style.display="");var b=d('label[for\x3d"'+this.id+'"]');b.length&&(b[0].id||(b[0].id=this.id+"_label"),this.focusNode.setAttribute("aria-labelledby",b[0].id));this.focusNode.setAttribute("aria-valuemin",
this.minimum);this.focusNode.setAttribute("aria-valuemax",this.maximum)},postCreate:function(){this.inherited(arguments);this.showButtons&&this.own(x.addMouseListener(this.decrementButton,this,"_typematicCallback",25,500),x.addMouseListener(this.incrementButton,this,"_typematicCallback",25,500));this.own(v(this.domNode,r.wheel,g.hitch(this,"_mouseWheeled")));var b=p(A,{widget:this});this._movable=new c(this.sliderHandle,{mover:b});this._layoutHackIE7()},destroy:function(){this._movable.destroy();
this._inProgressAnim&&"stopped"!=this._inProgressAnim.status&&this._inProgressAnim.stop(!0);this.inherited(arguments)}});f._Mover=A;return f})},"dojo/dnd/move":function(){define("dojo/dnd/move","../_base/declare ../dom-geometry ../dom-style ./common ./Mover ./Moveable".split(" "),function(m,p,f,l,k,h){l=m("dojo.dnd.move.constrainedMoveable",h,{constraints:function(){},within:!1,constructor:function(f,g){g||(g={});this.constraints=g.constraints;this.within=g.within},onFirstMove:function(f){var g=this.constraintBox=
this.constraints.call(this,f);g.r=g.l+g.w;g.b=g.t+g.h;this.within&&(f=p.getMarginSize(f.node),g.r-=f.w,g.b-=f.h)},onMove:function(f,g){var e=this.constraintBox,c=f.node.style;this.onMoving(f,g);g.l=g.l<e.l?e.l:e.r<g.l?e.r:g.l;g.t=g.t<e.t?e.t:e.b<g.t?e.b:g.t;c.left=g.l+"px";c.top=g.t+"px";this.onMoved(f,g)}});k=m("dojo.dnd.move.boxConstrainedMoveable",l,{box:{},constructor:function(f,g){var e=g&&g.box;this.constraints=function(){return e}}});m=m("dojo.dnd.move.parentConstrainedMoveable",l,{area:"content",
constructor:function(h,g){var e=g&&g.area;this.constraints=function(){var c=this.node.parentNode,b=f.getComputedStyle(c),d=p.getMarginBox(c,b);if("margin"==e)return d;var g=p.getMarginExtents(c,b);d.l+=g.l;d.t+=g.t;d.w-=g.w;d.h-=g.h;if("border"==e)return d;g=p.getBorderExtents(c,b);d.l+=g.l;d.t+=g.t;d.w-=g.w;d.h-=g.h;if("padding"==e)return d;g=p.getPadExtents(c,b);d.l+=g.l;d.t+=g.t;d.w-=g.w;d.h-=g.h;return d}}});return{constrainedMoveable:l,boxConstrainedMoveable:k,parentConstrainedMoveable:m}})},
"dijit/typematic":function(){define("dijit/typematic","dojo/_base/array dojo/_base/connect dojo/_base/lang dojo/on dojo/sniff ./main".split(" "),function(m,p,f,l,k,h){var q=h.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=Math.max(0>this._currentTimeout?this._initialDelay:1<this._subsequentDelay?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay),this._minDelay);this._timer=setTimeout(f.hitch(this,
"_fireEventAndReload"),this._currentTimeout)},trigger:function(g,e,c,b,d,h,k,l){if(d!=this._obj){this.stop();this._initialDelay=k||500;this._subsequentDelay=h||.9;this._minDelay=l||10;this._obj=d;this._node=c;this._count=this._currentTimeout=-1;this._callback=f.hitch(e,b);this._evt={faux:!0};for(var q in g)"layerX"!=q&&"layerY"!=q&&(e=g[q],"function"!=typeof e&&"undefined"!=typeof e&&(this._evt[q]=e));this._fireEventAndReload()}},stop:function(){this._timer&&(clearTimeout(this._timer),this._timer=
null);this._obj&&(this._callback(-1,this._node,this._evt),this._obj=null)},addKeyListener:function(g,e,c,b,d,h,k){var r="keyCode"in e?"keyCode":"charCode"in e?"charCode":"charOrCode",t=[l(g,"keyCode"in e?"keydown":"charCode"in e?"keypress":p._keypress,f.hitch(this,function(f){f[r]!=e[r]||void 0!==e.ctrlKey&&e.ctrlKey!=f.ctrlKey||void 0!==e.altKey&&e.altKey!=f.altKey||void 0!==e.metaKey&&e.metaKey!=(f.metaKey||!1)||void 0!==e.shiftKey&&e.shiftKey!=f.shiftKey?q._obj==e&&q.stop():(f.stopPropagation(),
f.preventDefault(),q.trigger(f,c,g,b,e,d,h,k))})),l(g,"keyup",f.hitch(this,function(){q._obj==e&&q.stop()}))];return{remove:function(){m.forEach(t,function(b){b.remove()})}}},addMouseListener:function(g,e,c,b,d,h){var r=[l(g,"mousedown",f.hitch(this,function(f){f.preventDefault();q.trigger(f,e,g,c,g,b,d,h)})),l(g,"mouseup",f.hitch(this,function(b){this._obj&&b.preventDefault();q.stop()})),l(g,"mouseout",f.hitch(this,function(b){this._obj&&b.preventDefault();q.stop()})),l(g,"dblclick",f.hitch(this,
function(l){l.preventDefault();9>k("ie")&&(q.trigger(l,e,g,c,g,b,d,h),setTimeout(f.hitch(this,q.stop),50))}))];return{remove:function(){m.forEach(r,function(b){b.remove()})}}},addListener:function(g,e,c,b,d,f,h,k){var l=[this.addKeyListener(e,c,b,d,f,h,k),this.addMouseListener(g,b,d,f,h,k)];return{remove:function(){m.forEach(l,function(b){b.remove()})}}}};return q})},"dijit/TooltipDialog":function(){require({cache:{"url:dijit/templates/TooltipDialog.html":'\x3cdiv role\x3d"alertdialog" tabIndex\x3d"-1"\x3e\r\n\t\x3cdiv class\x3d"dijitTooltipContainer" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"contentsNode" class\x3d"dijitTooltipContents dijitTooltipFocusNode"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\r\n\t\t\t${!actionBarTemplate}\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTooltipConnector" role\x3d"presentation" data-dojo-attach-point\x3d"connectorNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n'}});
define("dijit/TooltipDialog","dojo/_base/declare dojo/dom-class dojo/has dojo/keys dojo/_base/lang dojo/on ./focus ./layout/ContentPane ./_DialogMixin ./form/_FormMixin ./_TemplatedMixin dojo/text!./templates/TooltipDialog.html ./main".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d,r){m=m("dijit.TooltipDialog",[g,b,c,e],{title:"",doLayout:!1,autofocus:!0,baseClass:"dijitTooltipDialog",_firstFocusItem:null,_lastFocusItem:null,templateString:d,_setTitleAttr:"containerNode",postCreate:function(){this.inherited(arguments);
this.own(h(this.domNode,"keydown",k.hitch(this,"_onKey")))},orient:function(b,c,d){b={"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft","BR-TL":"dijitTooltipBelow dijitTooltipABLeft","BL-TR":"dijitTooltipBelow dijitTooltipABRight",
"TL-BR":"dijitTooltipAbove dijitTooltipABRight","TR-BL":"dijitTooltipAbove dijitTooltipABLeft"}[c+"-"+d];p.replace(this.domNode,b,this._currentOrientClass||"");this._currentOrientClass=b},focus:function(){this._getFocusItems();q.focus(this._firstFocusItem)},onOpen:function(b){this.orient(this.domNode,b.aroundCorner,b.corner);var c=b.aroundNodePos;"M"==b.corner.charAt(0)&&"M"==b.aroundCorner.charAt(0)?(this.connectorNode.style.top=c.y+(c.h-this.connectorNode.offsetHeight>>1)-b.y+"px",this.connectorNode.style.left=
""):"M"==b.corner.charAt(1)&&"M"==b.aroundCorner.charAt(1)&&(this.connectorNode.style.left=c.x+(c.w-this.connectorNode.offsetWidth>>1)-b.x+"px");this._onShow()},onClose:function(){this.onHide()},_onKey:function(b){if(b.keyCode==l.ESCAPE)this.defer("onCancel"),b.stopPropagation(),b.preventDefault();else if(b.keyCode==l.TAB){var c=b.target;this._getFocusItems();this._firstFocusItem==this._lastFocusItem?(b.stopPropagation(),b.preventDefault()):c==this._firstFocusItem&&b.shiftKey?(q.focus(this._lastFocusItem),
b.stopPropagation(),b.preventDefault()):c!=this._lastFocusItem||b.shiftKey?b.stopPropagation():(q.focus(this._firstFocusItem),b.stopPropagation(),b.preventDefault())}}});f("dojo-bidi")&&m.extend({_setTitleAttr:function(b){this.containerNode.title=this.textDir&&this.enforceTextDirWithUcc?this.enforceTextDirWithUcc(null,b):b;this._set("title",b)},_setTextDirAttr:function(b){this._created&&this.textDir==b||(this._set("textDir",b),this.textDir&&this.title&&(this.containerNode.title=this.enforceTextDirWithUcc(null,
this.title)))}});return m})},"sixmaps/dijits/BasemapThumb":function(){define(["dojo/_base/declare","dojo/dom-construct","dojo/dom-style","dijit/_WidgetBase"],function(m,p,f,l){return m("sixmaps.dijits.BasemapThumb",[l],{title:"",constructor:function(f,h){m.safeMixin(this,f);var k=p.create("div",{style:{position:"relative"}}),g=p.create("div",{},k);this.thumbDiv=p.create("div",{innerHTML:this.title,"class":"thumbDiv"},g);this.basemapInfo=p.create("div",{"class":"basemapInfo"},g);this.infoImg=p.create("img",
{title:"Basemap Details",src:require.toUrl("sixmaps/dijits/images/")+"info.png","class":"basemapInfoImg"},this.basemapInfo);this.settingsImg=p.create("img",{title:"Change Basemap",src:require.toUrl("sixmaps/dijits/images/")+"spanner.png","class":"basemapSettingsImg"},this.basemapInfo);this.containerNode=k},setThumb:function(f,h){p.place(f,this.thumbDiv,h)}})})},"sixmaps/dijits/HelpTopic":function(){define(["dojo/_base/declare","dijit/_TemplatedMixin","dijit/_WidgetBase","dojo/request/xhr","dojo/Deferred"],
function(m,p,f,l,k){return m("sixmaps.dijits.HelpTopic",[f,p],{templateString:"",widgetsInTemplate:!1,topicId:"",imagesUrl:"",baseUrl:"",htmlUrl:"",postCreate:function(){this.inherited(arguments)}})})},"sixmaps/util/Require":function(){define("dojo dojo/dom-construct dojo/query dojo/_base/json dojo/_base/lang dojo/io/script".split(" "),function(m,p,f,l,k,h){var q={requireScript:function(g){var e=l.toJson(g),c=q.cache[e];c?("function"==typeof g.load&&c.then(g.load),"function"==typeof g.error&&c.then(g.error)):
0<f("script[src\x3d'"+g.url+"']").length?(c=h._makeScriptDeferred(g),m._ioWatch(c,function(){return!0},h._ioCheck,h._resHandle),q.cache[e]=c):q.cache[e]=h.get(g);return q.cache[e]},requireCss:function(g,e){e=e||{};if(!q.cache[g]){var c=f("link [href\x3d'"+g+"']");q.cache[g]=0<c.length?c[0]:p.create("link",k.mixin({type:"text/css",rel:"stylesheet",href:g},e),f("head")[0])}return q.cache[g]},cache:{}};k.setObject("sixmaps.util.Require",q);return q})},"dojo/io/script":function(){define("dojo/io/script",
"../_base/connect ../_base/kernel ../_base/lang ../sniff ../_base/window ../_base/xhr ../dom ../dom-construct ../request/script ../aspect".split(" "),function(m,p,f,l,k,h,q,g,e,c){p.deprecated("dojo/io/script","Use dojo/request/script.","2.0");var b={get:function(d){var g,f=this._makeScriptDeferred(d,function(b){g&&g.cancel()}),k=f.ioArgs;h._ioAddQueryToUrl(k);h._ioNotifyStart(f);g=e.get(k.url,{timeout:d.timeout,jsonp:k.jsonp,checkString:d.checkString,ioArgs:k,frameDoc:d.frameDoc,canAttach:function(c){k.requestId=
c.id;k.scriptId=c.scriptId;k.canDelete=c.canDelete;return b._canAttach(k)}},!0);c.around(g,"isValid",function(c){return function(d){b._validCheck(f);return c.call(this,d)}});g.then(function(){f.resolve(f)}).otherwise(function(b){f.ioArgs.error=b;f.reject(b)});return f},attach:e._attach,remove:e._remove,_makeScriptDeferred:function(c,g){g=h._ioSetArgs(c,g||this._deferredCancel,this._deferredOk,this._deferredError);var d=g.ioArgs;d.id=p._scopeName+"IoScript"+this._counter++;d.canDelete=!1;d.jsonp=c.callbackParamName||
c.jsonp;d.jsonp&&(d.query=d.query||"",0<d.query.length&&(d.query+="\x26"),d.query+=d.jsonp+"\x3d"+(c.frameDoc?"parent.":"")+p._scopeName+".io.script.jsonp_"+d.id+"._jsonpCallback",d.frameDoc=c.frameDoc,d.canDelete=!0,g._jsonpCallback=this._jsonpCallback,this["jsonp_"+d.id]=g);g.addBoth(function(c){d.canDelete&&(c instanceof Error?b["jsonp_"+d.id]._jsonpCallback=function(){delete b["jsonp_"+d.id];if(d.requestId)p.global[e._callbacksProperty][d.requestId]()}:b._addDeadScript(d))});return g},_deferredCancel:function(b){b.canceled=
!0},_deferredOk:function(b){b=b.ioArgs;return b.json||b.scriptLoaded||b},_deferredError:function(b,c){return b},_deadScripts:[],_counter:1,_addDeadScript:function(c){b._deadScripts.push({id:c.id,frameDoc:c.frameDoc});c.frameDoc=null},_validCheck:function(c){if((c=b._deadScripts)&&0<c.length){for(var d=0;d<c.length;d++)b.remove(c[d].id,c[d].frameDoc),delete b["jsonp_"+c[d].id],c[d].frameDoc=null;b._deadScripts=[]}return!0},_ioCheck:function(b){b=b.ioArgs;return b.json||b.scriptLoaded&&!b.args.checkString?
!0:(b=b.args.checkString)&&eval("typeof("+b+") !\x3d 'undefined'")},_resHandle:function(c){b._ioCheck(c)?c.callback(c):c.errback(Error("inconceivable dojo.io.script._resHandle error"))},_canAttach:function(){return!0},_jsonpCallback:function(b){this.ioArgs.json=b;if(this.ioArgs.requestId)p.global[e._callbacksProperty][this.ioArgs.requestId](b)}};f.setObject("dojo.io.script",b);return b})},"sixmaps/dijits/DockEye":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/sniff dojo/aspect dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/on dijit/form/ToggleButton dijit/_WidgetBase sixmaps/dijits/tools/Toggle sixmaps/util/Require".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v){return p("sixmaps.dijits.DockEye",[d],{_tools:null,imgWidth:75,disabled:null,showToolTitles:!0,mode:null,relPath:null,locked:null,constructor:function(b,c){this._tools=[];this.locked=!1;p.safeMixin(this,b);var d=require.toUrl("sixmaps/dijits/DockEye/");v.requireCss(d+"dockeye.css")},postCreate:function(){this.inherited(arguments);g.set(this.domNode,{visibility:"hidden"});c(this.domNode,"mousemove",f.hitch(this,"onMyMouseMove"));c(this.domNode,"mouseover",f.hitch(this,
"onMyMouseOver"));c(this.domNode,"mouseout",f.hitch(this,"onMyMouseOut"))},onMyMouseOut:function(b){this.onMyMouseMove(999)},onMyMouseOver:function(b){b=q.position(this.domNode.parentNode);this.offsetLeft=b.x;this.offsetTop=b.y},onMyMouseMove:function(b){this.locked||"static"!=this.mode||(this.locked=!0,m.forEach(this._tools,function(b){g.set(b.toolDiv.children[0].children[1],{top:"10px",left:"-33px",width:"100px"})}));if(this.locked||this.disabled)b=999;var c=this.domNode,d=this.imgWidth,e,f;999==
b?f=e=1E3:(e=b.clientX-this.offsetLeft,f=b.clientY-this.offsetTop);m.forEach(this._tools,function(b){var h=b.toolDiv,k=d-Math.pow(Math.round(Math.sqrt(Math.pow(e-(h.offsetLeft+c.offsetLeft)-h.offsetWidth/2,2)+Math.pow(f-(h.offsetTop+c.offsetTop)-h.offsetHeight/2,2))),2)/(4*d);g.set(h,{width:(k<d/2?d/2:k)+"px",paddingTop:(d-(k<d/2?d/2:k))/128*28+"px"});g.set(b.onOffImage,{left:(h.clientWidth-b.onOffImage.clientWidth)/2+"px",paddingTop:"0px"});g.set(b.iconImg,{height:h.style.width})});setTimeout(function(){g.set(c,
{left:(c.parentNode.parentNode.clientWidth-c.clientWidth)/2+"px"})},0)},getChildren:function(){return m.map(this._tools,function(b){return b.tool})},addTool:function(d){var e=this;d.isInstanceOf(b)&&k.after(d,"onClick",function(){e.setActiveTool(d,!d.checked)});var g=h.create("div",{"class":"dockeyeToolDiv"},e.domNode);g.style.overflow="visible";var l=h.create("span",{"class":"dock-item"}),q=h.create("img",{src:d.iconUrl},l);d.watch&&d.watch("iconUrl",function(b,c,e){q.src=d.iconUrl});var m=h.create("div",
{"class":"dockItemLabel"});m.appendChild(document.createTextNode(d.title));m.style.display="none";e.relPath&&(m.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src\x3d'"+e.relPath+"/dijits/DockEye/70pc_white.png', sizingMethod\x3d'scale')",m.style.fontSize="11px");l.appendChild(m);g.appendChild(l);var r=h.create("div",{"class":"toolOn"}),p=h.create("img",{src:require.toUrl("sixmaps/dijits/DockEye/")+"toolOn.png"},r);g.appendChild(r);c(l,"click",f.hitch(d,"onClick"));e.showToolTitles&&
(c(l,"mouseover",function(){m.style.display=""}),c(l,"mouseout",function(){m.style.display="none"}));k.after(d,"onChange",function(){p.style.visibility=d.checked?"visible":"hidden"});e._tools.push({tool:d,toolDiv:g,iconImg:q,onOffImage:p});return d},setActiveTool:function(b,c){m.forEach(this._tools,function(c){c=c.tool;c.isInstanceOf(r)&&c!=b&&c.set("checked",!1)});b&&b.set("checked",c)},deactivate:function(){this.setActiveTool(null)},reposition:function(){this.onMyMouseMove(999)},initDock:function(){var b=
this;b.reposition();setTimeout(function(){g.set(b.domNode,{visibility:"visible"})},0)}})})},"sixmaps/dijits/Legend":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-class dojo/dom-construct dojo/dom-style dijit/form/Select dijit/layout/ContentPane dijit/_WidgetBase esri/dijit/Legend esri/layers/ArcGISDynamicMapServiceLayer sixmaps/util/Analytics".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d,r){return p("sixmaps.dijits.Legend",[c],{legendParams:null,map:null,
created:null,layers:null,layerSelect:null,initialLoad:null,constructor:function(b,c){this.legendParams={style:"color:black;background:white;max-height:300px;max-width:600px;overflow:auto;border-radius:5px"};this.layers=[];this.initialLoad=this.created=!1;p.safeMixin(this,b)},postCreate:function(){k.add(this.domNode,"toolPaneContainer");this.selectNode=h.create("div",{innerHTML:"Layer: "},this.domNode)},showLegend:function(c){this.inherited(arguments);r("send","event","Tool - Legend","Show Legend");
var g=[];c&&g.push({layer:c,title:c.id});g={map:this.map,layerInfos:g,visiblerespectCurrentMapScale:!0,autoUpdate:!0};f.mixin(g,this.legendParams);this.widgetNode&&h.destroy(this.widgetNode.domNode);if(c.legendParams&&c.legendParams.html)this.widgetNode=new e({doLayout:!1}),this.widgetNode.set("content",c.legendParams.html?c.legendParams.html:"No HTML legend configured for "+c.name);else{this.widgetNode=new b(g,h.create("div"));var l=this.widgetNode._isSupportedLayerType;this.widgetNode.NLS_noLegend=
"No Legend for this layer or at this scale";this.widgetNode._isSupportedLayerType=function(b){return b&&b.isInstanceOf(d)?!0:l(b)}}k.add(this.widgetNode.domNode,"legendNode");this.widgetNode.placeAt(this.domNode);this.widgetNode._started||this.widgetNode.startup()},onActivate:function(){r("send","event","Tool - Legend","Activate");this.created||(this.startup(),this.created=!0)},setLayer:function(b){this.addLayer(b);this.selectLayer(b);this.onActivate()},addLayer:function(b){var c=this;m.some(c.layers,
function(c){return c.name==b.name})||b.legendParams&&b.legendParams.show&&c.layers.push(b);c.layerSelect?c.layerSelect.options=[]:(c.layerSelect=new g({style:{width:"214px",height:"22px"},name:"layerSelectDropDown",options:[]}),c.layerSelect.placeAt(c.selectNode),l.after(c.layerSelect,"onChange",function(b){m.forEach(c.layers,function(d){b==d.id&&c.showLegend(d)})},!0));m.forEach(c.layers,function(b){c.layerSelect.options.push({label:b.name,value:b.id})});q.set(c.selectNode,"display",1<c.layers.length?
"":"none")},selectLayer:function(b){this.layerSelect.set("value",b.id);m.forEach(this.layerSelect.options,function(c){c.value==b.id&&(c.selected="selected")});this.showLegend(b)},ensureLayer:function(){var b=!1;m.forEach(this.layerSelect.options,function(c){c.selected&&(b=!0)});!b&&this.layers[0]&&this.selectLayer(this.layers[0])}})})},"dijit/form/Select":function(){require({cache:{"url:dijit/form/templates/Select.html":'\x3ctable class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tdata-dojo-attach-point\x3d"_buttonNode,tableNode,focusNode,_popupStateNode" cellspacing\x3d\'0\' cellpadding\x3d\'0\'\r\n\trole\x3d"listbox" aria-haspopup\x3d"true"\r\n\t\x3e\x3ctbody role\x3d"presentation"\x3e\x3ctr role\x3d"presentation"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitStretch dijitButtonContents" role\x3d"presentation"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitButtonText"  data-dojo-attach-point\x3d"containerNode,textDirNode" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitValidationContainer"\r\n\t\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t\t\t/\x3e\x3c/div\r\n\t\t\t\x3e\x3cinput type\x3d"hidden" ${!nameAttrSetting} data-dojo-attach-point\x3d"valueNode" value\x3d"${value}" aria-hidden\x3d"true"\r\n\t\t/\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode" role\x3d"presentation"\r\n\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitArrowButtonInner" value\x3d"\x26#9660; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t\t\t\t${_buttonInputDisabled}\r\n\t\t/\x3e\x3c/td\r\n\t\x3e\x3c/tr\x3e\x3c/tbody\r\n\x3e\x3c/table\x3e\r\n'}});
define("dijit/form/Select","dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/sniff ./_FormSelectWidget ../_HasDropDown ../DropDownMenu ../MenuItem ../MenuSeparator ../Tooltip ../_KeyNavMixin ../registry dojo/text!./templates/Select.html dojo/i18n!./nls/validate".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x,w,y){function z(b){return function(c){this._isLoaded?this.inherited(b,arguments):this.loadDropDown(g.hitch(this,
b,c))}}var B=p("dijit.form._SelectMenu",r,{autoFocus:!0,buildRendering:function(){this.inherited(arguments);this.domNode.setAttribute("role","listbox")},postCreate:function(){this.inherited(arguments);this.own(e(this.domNode,"selectstart",function(b){b.preventDefault();b.stopPropagation()}))},focus:function(){var b=!1,c=this.parentWidget.value;g.isArray(c)&&(c=c[c.length-1]);c&&m.forEach(this.parentWidget._getChildren(),function(d){d.option&&c===d.option.value&&(b=!0,this.focusChild(d,!1))},this);
b||this.inherited(arguments)}});k=p("dijit.form.Select"+(c("dojo-bidi")?"_NoBidi":""),[b,d,x],{baseClass:"dijitSelect dijitValidationTextBox",templateString:y,_buttonInputDisabled:c("ie")?"disabled":"",required:!1,state:"",message:"",tooltipPosition:[],emptyLabel:"\x26#160;",_isLoaded:!1,_childrenLoaded:!1,labelType:"html",_fillContent:function(){this.inherited(arguments);if(this.options.length&&!this.value&&this.srcNodeRef){var b=this.srcNodeRef.selectedIndex||0;this._set("value",this.options[0<=
b?b:0].value)}this.dropDown=new B({id:this.id+"_menu",parentWidget:this});l.add(this.dropDown.domNode,this.baseClass.replace(/\s+|$/g,"Menu "))},_getMenuItemForOption:function(b){if(b.value||b.label){var c=g.hitch(this,"_setValueAttr",b);b=new v({option:b,label:("text"===this.labelType?(b.label||"").toString().replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;"):b.label)||this.emptyLabel,onClick:c,ownerDocument:this.ownerDocument,dir:this.dir,textDir:this.textDir,disabled:b.disabled||!1});b.focusNode.setAttribute("role",
"option");return b}return new u({ownerDocument:this.ownerDocument})},_addOptionItem:function(b){this.dropDown&&this.dropDown.addChild(this._getMenuItemForOption(b))},_getChildren:function(){return this.dropDown?this.dropDown.getChildren():[]},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(A){}},focusChild:function(b){b&&this.set("value",b.option)},_getFirst:function(){var b=this._getChildren();return b.length?b[0]:null},_getLast:function(){var b=this._getChildren();
return b.length?b[b.length-1]:null},childSelector:function(b){return(b=w.byNode(b))&&b.getParent()==this.dropDown},onKeyboardSearch:function(b,c,d,e){b&&this.focusChild(b)},_loadChildren:function(b){if(!0===b)if(this.dropDown&&(delete this.dropDown.focusedChild,this.focusedChild=null),this.options.length)this.inherited(arguments);else{m.forEach(this._getChildren(),function(b){b.destroyRecursive()});var c=new v({ownerDocument:this.ownerDocument,label:this.emptyLabel});this.dropDown.addChild(c)}else this._updateSelection();
this._isLoaded=!1;this._childrenLoaded=!0;this._loadingStore||this._setValueAttr(this.value,!1)},_refreshState:function(){this._started&&this.validate(this.focused)},startup:function(){this.inherited(arguments);this._refreshState()},_setValueAttr:function(b){this.inherited(arguments);f.set(this.valueNode,"value",this.get("value"));this._refreshState()},_setNameAttr:"valueNode",_setDisabledAttr:function(b){this.inherited(arguments);this._refreshState()},_setRequiredAttr:function(b){this._set("required",
b);this.focusNode.setAttribute("aria-required",b);this._refreshState()},_setOptionsAttr:function(b){this._isLoaded=!1;this._set("options",b)},_setDisplay:function(b){b=("text"===this.labelType?(b||"").replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;"):b)||this.emptyLabel;this.containerNode.innerHTML='\x3cspan role\x3d"option" aria-selected\x3d"true" class\x3d"dijitReset dijitInline '+this.baseClass.replace(/\s+|$/g,"Label ")+'"\x3e'+b+"\x3c/span\x3e"},validate:function(b){b=this.disabled||this.isValid(b);
this._set("state",b?"":this._hasBeenBlurred?"Error":"Incomplete");this.focusNode.setAttribute("aria-invalid",b?"false":"true");var c=b?"":this._missingMsg;c&&this.focused&&this._hasBeenBlurred?t.show(c,this.domNode,this.tooltipPosition,!this.isLeftToRight()):t.hide(this.domNode);this._set("message",c);return b},isValid:function(){return!this.required||0===this.value||!/^\s*$/.test(this.value||"")},reset:function(){this.inherited(arguments);t.hide(this.domNode);this._refreshState()},postMixInProperties:function(){this.inherited(arguments);
this._missingMsg=h.getLocalization("dijit.form","validate",this.lang).missingMessage},postCreate:function(){this.inherited(arguments);this.own(e(this.domNode,"selectstart",function(b){b.preventDefault();b.stopPropagation()}));this.domNode.setAttribute("aria-expanded","false");var b=this._keyNavCodes;delete b[q.LEFT_ARROW];delete b[q.RIGHT_ARROW]},_setStyleAttr:function(b){this.inherited(arguments);l.toggle(this.domNode,this.baseClass.replace(/\s+|$/g,"FixedWidth "),!!this.domNode.style.width)},isLoaded:function(){return this._isLoaded},
loadDropDown:function(b){this._loadChildren(!0);this._isLoaded=!0;b()},destroy:function(b){this.dropDown&&!this.dropDown._destroyed&&(this.dropDown.destroyRecursive(b),delete this.dropDown);t.hide(this.domNode);this.inherited(arguments)},_onFocus:function(){this.validate(!0)},_onBlur:function(){t.hide(this.domNode);this.inherited(arguments);this.validate(!1)}});c("dojo-bidi")&&(k=p("dijit.form.Select",k,{_setDisplay:function(b){this.inherited(arguments);this.applyTextDir(this.containerNode)}}));k._Menu=
B;k.prototype._onContainerKeydown=z("_onContainerKeydown");k.prototype._onContainerKeypress=z("_onContainerKeypress");return k})},"dijit/form/_FormSelectWidget":function(){define("dijit/form/_FormSelectWidget","dojo/_base/array dojo/_base/Deferred dojo/aspect dojo/data/util/sorter dojo/_base/declare dojo/dom dojo/dom-class dojo/_base/kernel dojo/_base/lang dojo/query dojo/when dojo/store/util/QueryResults ./_FormValueWidget".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d,r){return k("dijit.form._FormSelectWidget",
r,{multiple:!1,options:null,store:null,_setStoreAttr:function(b){this._created&&this._deprecatedSetStore(b)},query:null,_setQueryAttr:function(b){this._created&&this._deprecatedSetStore(this.store,this.selectedValue,{query:b})},queryOptions:null,_setQueryOptionsAttr:function(b){this._created&&this._deprecatedSetStore(this.store,this.selectedValue,{queryOptions:b})},labelAttr:"",onFetch:null,sortByLabel:!0,loadChildrenOnOpen:!1,onLoadDeferred:null,getOptions:function(b){var c=this.options||[];if(null==
b)return c;if(e.isArrayLike(b))return m.map(b,"return this.getOptions(item);",this);e.isString(b)&&(b={value:b});e.isObject(b)&&(m.some(c,function(c,d){for(var e in b)if(!(e in c)||c[e]!=b[e])return!1;b=d;return!0})||(b=-1));return 0<=b&&b<c.length?c[b]:null},addOption:function(b){m.forEach(e.isArrayLike(b)?b:[b],function(b){b&&e.isObject(b)&&this.options.push(b)},this);this._loadChildren()},removeOption:function(b){b=this.getOptions(e.isArrayLike(b)?b:[b]);m.forEach(b,function(b){b&&(this.options=
m.filter(this.options,function(c){return c.value!==b.value||c.label!==b.label}),this._removeOptionItem(b))},this);this._loadChildren()},updateOption:function(b){m.forEach(e.isArrayLike(b)?b:[b],function(b){var c=this.getOptions({value:b.value}),d;if(c)for(d in b)c[d]=b[d]},this);this._loadChildren()},setStore:function(b,c,d){g.deprecated(this.declaredClass+"::setStore(store, selectedValue, fetchArgs) is deprecated. Use set('query', fetchArgs.query), set('queryOptions', fetchArgs.queryOptions), set('store', store), or set('value', selectedValue) instead.",
"","2.0");this._deprecatedSetStore(b,c,d)},_deprecatedSetStore:function(c,g,h){var k=this.store;h=h||{};if(k!==c){for(var q;q=this._notifyConnections.pop();)q.remove();c.get||(e.mixin(c,{_oldAPI:!0,get:function(b){var c=new p;this.fetchItemByIdentity({identity:b,onItem:function(b){c.resolve(b)},onError:function(b){c.reject(b)}});return c.promise},query:function(b,c){var g=new p(function(){f.abort&&f.abort()});g.total=new p;var f=this.fetch(e.mixin({query:b,onBegin:function(b){g.total.resolve(b)},
onComplete:function(b){g.resolve(b)},onError:function(b){g.reject(b)}},c));return new d(g)}}),c.getFeatures()["dojo.data.api.Notification"]&&(this._notifyConnections=[f.after(c,"onNew",e.hitch(this,"_onNewItem"),!0),f.after(c,"onDelete",e.hitch(this,"_onDeleteItem"),!0),f.after(c,"onSet",e.hitch(this,"_onSetItem"),!0)]));this._set("store",c)}this.options&&this.options.length&&this.removeOption(this.options);this._queryRes&&this._queryRes.close&&this._queryRes.close();this._observeHandle&&this._observeHandle.remove&&
(this._observeHandle.remove(),this._observeHandle=null);h.query&&this._set("query",h.query);h.queryOptions&&this._set("queryOptions",h.queryOptions);c&&c.query&&(this._loadingStore=!0,this.onLoadDeferred=new p,this._queryRes=c.query(this.query,this.queryOptions),b(this._queryRes,e.hitch(this,function(b){if(this.sortByLabel&&!h.sort&&b.length)if(c.getValue)b.sort(l.createSortFunction([{attribute:c.getLabelAttributes(b[0])[0]}],c));else{var d=this.labelAttr;b.sort(function(b,c){return b[d]>c[d]?1:c[d]>
b[d]?-1:0})}h.onFetch&&(b=h.onFetch.call(this,b,h));m.forEach(b,function(b){this._addOptionForItem(b)},this);this._queryRes.observe&&(this._observeHandle=this._queryRes.observe(e.hitch(this,function(b,c,d){c==d?this._onSetItem(b):(-1!=c&&this._onDeleteItem(b),-1!=d&&this._onNewItem(b))}),!0));this._loadingStore=!1;this.set("value","_pendingValue"in this?this._pendingValue:g);delete this._pendingValue;this.loadChildrenOnOpen?this._pseudoLoadChildren(b):this._loadChildren();this.onLoadDeferred.resolve(!0);
this.onSetStore()}),e.hitch(this,function(b){this.onLoadDeferred.reject(b)})));return k},_setValueAttr:function(b,c){this._onChangeActive||(c=null);if(this._loadingStore)this._pendingValue=b;else if(null!=b){b=e.isArrayLike(b)?m.map(b,function(b){return e.isObject(b)?b:{value:b}}):e.isObject(b)?[b]:[{value:b}];b=m.filter(this.getOptions(b),function(b){return b&&b.value});var d=this.getOptions()||[];this.multiple||b[0]&&b[0].value||!d.length||(b[0]=d[0]);m.forEach(d,function(c){c.selected=m.some(b,
function(b){return b.value===c.value})});d=m.map(b,function(b){return b.value});if("undefined"!=typeof d&&"undefined"!=typeof d[0]){var g=m.map(b,function(b){return b.label});this._setDisplay(this.multiple?g:g[0]);this.inherited(arguments,[this.multiple?d:d[0],c]);this._updateSelection()}}},_getDisplayedValueAttr:function(){var b=m.map([].concat(this.get("selectedOptions")),function(b){return b&&"label"in b?b.label:b?b.value:null},this);return this.multiple?b:b[0]},_setDisplayedValueAttr:function(b){this.set("value",
this.getOptions("string"==typeof b?{label:b}:b))},_loadChildren:function(){this._loadingStore||(m.forEach(this._getChildren(),function(b){b.destroyRecursive()}),m.forEach(this.options,this._addOptionItem,this),this._updateSelection())},_updateSelection:function(){this.focusedChild=null;this._set("value",this._getValueFromOpts());var b=[].concat(this.value);if(b&&b[0]){var c=this;m.forEach(this._getChildren(),function(d){var e=m.some(b,function(b){return d.option&&b===d.option.value});e&&!c.multiple&&
(c.focusedChild=d);q.toggle(d.domNode,this.baseClass.replace(/\s+|$/g,"SelectedOption "),e);d.domNode.setAttribute("aria-selected",e?"true":"false")},this)}},_getValueFromOpts:function(){var b=this.getOptions()||[];if(!this.multiple&&b.length){var c=m.filter(b,function(b){return b.selected})[0];if(c&&c.value)return c.value;b[0].selected=!0;return b[0].value}return this.multiple?m.map(m.filter(b,function(b){return b.selected}),function(b){return b.value})||[]:""},_onNewItem:function(b,c){c&&c.parent||
this._addOptionForItem(b)},_onDeleteItem:function(b){this.removeOption({value:this.store.getIdentity(b)})},_onSetItem:function(b){this.updateOption(this._getOptionObjForItem(b))},_getOptionObjForItem:function(b){var c=this.store,d=this.labelAttr&&this.labelAttr in b?b[this.labelAttr]:c.getLabel(b);return{value:d?c.getIdentity(b):null,label:d,item:b}},_addOptionForItem:function(b){var c=this.store;c.isItemLoaded&&!c.isItemLoaded(b)?c.loadItem({item:b,onItem:function(b){this._addOptionForItem(b)},scope:this}):
(b=this._getOptionObjForItem(b),this.addOption(b))},constructor:function(b){this._oValue=(b||{}).value||null;this._notifyConnections=[]},buildRendering:function(){this.inherited(arguments);h.setSelectable(this.focusNode,!1)},_fillContent:function(){this.options||(this.options=this.srcNodeRef?c("\x3e *",this.srcNodeRef).map(function(b){return"separator"===b.getAttribute("type")?{value:"",label:"",selected:!1,disabled:!1}:{value:b.getAttribute("data-"+g._scopeName+"-value")||b.getAttribute("value"),
label:String(b.innerHTML),selected:b.getAttribute("selected")||!1,disabled:b.getAttribute("disabled")||!1}},this):[]);this.value?this.multiple&&"string"==typeof this.value&&this._set("value",this.value.split(",")):this._set("value",this._getValueFromOpts())},postCreate:function(){this.inherited(arguments);f.after(this,"onChange",e.hitch(this,"_updateSelection"));var b=this.store;b&&(b.getIdentity||b.getFeatures()["dojo.data.api.Identity"])&&(this.store=null,this._deprecatedSetStore(b,this._oValue,
{query:this.query,queryOptions:this.queryOptions}));this._storeInitialized=!0},startup:function(){this._loadChildren();this.inherited(arguments)},destroy:function(){for(var b;b=this._notifyConnections.pop();)b.remove();this._queryRes&&this._queryRes.close&&this._queryRes.close();this._observeHandle&&this._observeHandle.remove&&(this._observeHandle.remove(),this._observeHandle=null);this.inherited(arguments)},_addOptionItem:function(){},_removeOptionItem:function(){},_setDisplay:function(){},_getChildren:function(){return[]},
_getSelectedOptionsAttr:function(){return this.getOptions({selected:!0})},_pseudoLoadChildren:function(){},onSetStore:function(){}})})},"dojo/data/util/sorter":function(){define("dojo/data/util/sorter",["../../_base/lang"],function(m){var p={};m.setObject("dojo.data.util.sorter",p);p.basicComparator=function(f,l){var k=-1;null===f&&(f=void 0);null===l&&(l=void 0);if(f==l)k=0;else if(f>l||null==f)k=1;return k};p.createSortFunction=function(f,l){function k(b,c,d,e){return function(g,f){g=e.getValue(g,
b);f=e.getValue(f,b);return c*d(g,f)}}for(var h=[],q,g=l.comparatorMap,e=p.basicComparator,c=0;c<f.length;c++){q=f[c];var b=q.attribute;if(b){q=q.descending?-1:1;var d=e;g&&("string"!==typeof b&&"toString"in b&&(b=b.toString()),d=g[b]||e);h.push(k(b,q,d,l))}}return function(b,c){for(var d=0;d<h.length;){var e=h[d++](b,c);if(0!==e)return e}return 0}};return p})},"dijit/MenuSeparator":function(){require({cache:{"url:dijit/templates/MenuSeparator.html":'\x3ctr class\x3d"dijitMenuSeparator" role\x3d"separator"\x3e\r\n\t\x3ctd class\x3d"dijitMenuSeparatorIconCell"\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorTop"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorBottom"\x3e\x3c/div\x3e\r\n\t\x3c/td\x3e\r\n\t\x3ctd colspan\x3d"3" class\x3d"dijitMenuSeparatorLabelCell"\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorTop dijitMenuSeparatorLabel"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorBottom"\x3e\x3c/div\x3e\r\n\t\x3c/td\x3e\r\n\x3c/tr\x3e\r\n'}});
define("dijit/MenuSeparator","dojo/_base/declare dojo/dom ./_WidgetBase ./_TemplatedMixin ./_Contained dojo/text!./templates/MenuSeparator.html".split(" "),function(m,p,f,l,k,h){return m("dijit.MenuSeparator",[f,l,k],{templateString:h,buildRendering:function(){this.inherited(arguments);p.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})})},"esri/dijit/Legend":function(){require({cache:{"dojo/debounce":function(){define([],function(){return function(m,p){var f;return function(){f&&
clearTimeout(f);var l=this,k=arguments;f=setTimeout(function(){m.apply(l,k)},p)}}})},"esri/numberUtils":function(){define(["dojo/has","dojo/number","dojo/i18n!dojo/cldr/nls/number","./kernel"],function(m,p,f,l){var k=function(f,g){return f-g},h={_reNumber:/^-?(\d+)(\.(\d+))?$/i,getDigits:function(f){var g=String(f),e=g.match(h._reNumber);f={integer:0,fractional:0};e&&e[1]?(f.integer=e[1].split("").length,f.fractional=e[3]?e[3].split("").length:0):-1<g.toLowerCase().indexOf("e")&&(e=g.split("e"),g=
e[0],e=e[1],g&&e&&(g=Number(g),e=Number(e),(f=0<e)||(e=Math.abs(e)),g=h.getDigits(g),f?(g.integer+=e,g.fractional=e>g.fractional?0:g.fractional-e):(g.fractional+=e,g.integer=e>g.integer?1:g.integer-e),f=g));return f},getFixedNumbers:function(f,g){var e;e=Number(f.toFixed(g));e<f?f=e+1/Math.pow(10,g):(f=e,e-=1/Math.pow(10,g));e=Number(e.toFixed(g));f=Number(f.toFixed(g));return[e,f]},getPctChange:function(f,g,e,c){var b={prev:null,next:null},d;null!=e&&(d=f-e,b.prev=Math.floor(Math.abs(100*(g-e-d)/
d)));null!=c&&(d=c-f,b.next=Math.floor(Math.abs(100*(c-g-d)/d)));return b},round:function(f,g){f=f.slice(0);var e,c,b,d,l,m,q,p,x=g&&null!=g.tolerance?g.tolerance:2,w=g&&g.indexes,y=g&&null!=g.strictBounds?g.strictBounds:!1;if(w)w.sort(k);else for(w=[],l=0;l<f.length;l++)w.push(l);for(l=0;l<w.length;l++)if(p=w[l],g=f[p],e=0===p?null:f[p-1],c=p===f.length-1?null:f[p+1],b=h.getDigits(g),b=b.fractional){m=0;for(q=!1;m<=b&&!q;)d=h.getFixedNumbers(g,m),d=y&&0===l?d[1]:d[0],q=h.hasMinimalChange(g,d,e,c,
x),m++;q&&(f[p]=d)}return f},hasMinimalChange:function(f,g,e,c,b){f=h.getPctChange(f,g,e,c);g=null==f.prev||f.prev<=b;e=null==f.next||f.next<=b;return g&&e||f.prev+f.next<=2*b},_reAllZeros:new RegExp("\\"+f.decimal+"0+$","g"),_reSomeZeros:/(\d)0*$/g,format:function(f,g){g=g||{places:20,round:-1};(f=p.format(f,g))&&(f=f.replace(h._reSomeZeros,"$1").replace(h._reAllZeros,""));return f}};m("extend-esri")&&(l.numberUtils=h);return h})},"esri/renderers/utils":function(){define("dojo/_base/lang dojo/_base/array dojo/has dojo/date/locale ../kernel ../numberUtils ../Color dojo/i18n!dojo/cldr/nls/gregorian".split(" "),
function(m,p,f,l,k,h,q,g){function e(b){return b&&p.map(b,function(b){return new q(b)})}function c(b,c,e){var g="";0===c?g=d.lt+" ":c===e&&(g=d.gt+" ");return g+b}var b={},d={lte:"\x3c\x3d",gte:"\x3e\x3d",lt:"\x3c",gt:"\x3e",pct:"%"},r={millisecond:0,second:1,minute:2,hour:3,day:4,month:5,year:6},v={millisecond:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"medium"}},second:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"medium"}},minute:{dateOptions:{formatLength:"long"},
timeOptions:{formatLength:"short"}},hour:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"short"}},day:{selector:"date",dateOptions:{formatLength:"long"}},month:{selector:"date",dateOptions:{formatLength:"long"}},year:{selector:"date",dateOptions:{selector:"year"}}},u={formatLength:"short",fullYear:!0},t={formatLength:"short"};m.mixin(b,{timelineDateFormatOptions:{selector:"date",dateOptions:{formatLength:"short",fullYear:!0}},formatDate:function(b,c){var d=[];null==b||b instanceof Date||
(b=new Date(b));c=c||{};c=m.mixin({},c);var e=c.selector?c.selector.toLowerCase():null,f=!e||-1<e.indexOf("time"),e=!e||-1<e.indexOf("date");f&&(c.timeOptions=c.timeOptions||t,c.timeOptions&&(c.timeOptions=m.mixin({},c.timeOptions),c.timeOptions.selector=c.timeOptions.selector||"time",d.push(c.timeOptions)));e&&(c.dateOptions=c.dateOptions||u,c.dateOptions&&(c.dateOptions=m.mixin({},c.dateOptions),c.dateOptions.selector=c.dateOptions.selector||"date",d.push(c.dateOptions)));d&&d.length?(d=p.map(d,
function(c){return l.format(b,c)}),c=1==d.length?d[0]:g["dateTimeFormat-medium"].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(b,c){return d[c]})):c=l.format(b);return c},createColorStops:function(d){var e=d.values,g=d.colors,f=d.labelIndexes,k=d.isDate,l=d.dateFormatOptions;d=[];return d=p.map(e,function(d,m){var q=null;if(!f||-1<p.indexOf(f,m)){var r;(r=k?b.formatDate(d,l):h.format(d))&&(q=c(r,m,e.length-1))}return{value:d,color:g[m],label:q}})},updateColorStops:function(d){var e=d.stops,g=d.changes,
f=d.isDate,k=d.dateFormatOptions,l=[],m,q=p.map(e,function(b){return b.value});p.forEach(g,function(b){l.push(b.index);q[b.index]=b.value});m=h.round(q,{indexes:l});p.forEach(e,function(d,g){d.value=q[g];if(null!=d.label){var l,r=null;(l=f?b.formatDate(m[g],k):h.format(m[g]))&&(r=c(l,g,e.length-1));d.label=r}})},createClassBreakLabel:function(b){var c=b.minValue,e=b.maxValue,g=b.isFirstBreak?"":d.gt+" ";b="percent-of-total"===b.normalizationType?d.pct:"";c=null==c?"":h.format(c);e=null==e?"":h.format(e);
return g+c+b+" \u2013 "+e+b},setLabelsForClassBreaks:function(c){var d=c.classBreaks,e=c.classificationMethod,g=c.normalizationType,f=[];d&&d.length&&("standard-deviation"===e||(c.round?(f.push(d[0].minValue),p.forEach(d,function(b){f.push(b.maxValue)}),f=h.round(f),p.forEach(d,function(c,d){c.label=b.createClassBreakLabel({minValue:0===d?f[0]:f[d],maxValue:f[d+1],isFirstBreak:0===d,normalizationType:g})})):p.forEach(d,function(c,d){c.label=b.createClassBreakLabel({minValue:c.minValue,maxValue:c.maxValue,
isFirstBreak:0===d,normalizationType:g})})))},updateClassBreak:function(c){var d=c.classBreaks,e=c.normalizationType,g=c.change,f=g.index,g=g.value,h=-1,k=-1,l=d.length;"standard-deviation"===c.classificationMethod||(0===f?h=f:f===l?k=f-1:(k=f-1,h=f),-1<h&&h<l&&(c=d[h],c.minValue=g,c.label=b.createClassBreakLabel({minValue:c.minValue,maxValue:c.maxValue,isFirstBreak:0===h,normalizationType:e})),-1<k&&k<l&&(c=d[k],c.maxValue=g,c.label=b.createClassBreakLabel({minValue:c.minValue,maxValue:c.maxValue,
isFirstBreak:0===k,normalizationType:e})))},calculateDateFormatInterval:function(b){var c,d,e=b.length,g,f,h,k,l,m,q=Infinity,u;b=p.map(b,function(b){return new Date(b)});for(c=0;c<e-1;c++){g=b[c];h=[];l=Infinity;m="";for(d=c+1;d<e;d++)f=b[d],f=g.getFullYear()!==f.getFullYear()&&"year"||g.getMonth()!==f.getMonth()&&"month"||g.getDate()!==f.getDate()&&"day"||g.getHours()!==f.getHours()&&"hour"||g.getMinutes()!==f.getMinutes()&&"minute"||g.getSeconds()!==f.getSeconds()&&"second"||"millisecond",k=r[f],
k<l&&(l=k,m=f),h.push(f);l<q&&(q=l,u=m)}return u},createUniqueValueLabel:function(c){var d=c.value,e=c.fieldInfo,g=c.domain;c=c.dateFormatInterval;var f=String(d);(g=g&&g.codedValues?g.getName(d):null)?f=g:"number"===typeof d&&(f=e&&"esriFieldTypeDate"===e.type?b.formatDate(d,c&&v[c]):h.format(d));return f},cloneColorInfo:function(b){var c;b&&(c=m.mixin({},b),c.colors=e(c.colors),c.stops=c.stops&&p.map(c.stops,function(b){b=m.mixin({},b);b.color&&(b.color=new q(b.color));return b}),c.legendOptions&&
(c.legendOptions=m.mixin({},c.legendOptions)));return c},cloneOpacityInfo:function(b){var c;if(b){c=m.mixin({},b);if(b=c.opacityValues)c.opacityValues=b.slice(0);if(b=c.stops)c.stops=p.map(b,function(b){return m.mixin({},b)});if(b=c.legendOptions)c.legendOptions=m.mixin({},b)}return c},cloneSizeInfo:function(c){var d;c&&(d=m.mixin({},c),d.stops&&(d.stops=p.map(d.stops,function(b){return m.mixin({},b)})),(c=d.minSize)&&"object"===typeof c&&(d.minSize=b.cloneSizeInfo(c)),(c=d.maxSize)&&"object"===typeof c&&
(d.maxSize=b.cloneSizeInfo(c)),c=d.legendOptions)&&(d.legendOptions=m.mixin({},c),c=c.customValues)&&(d.legendOptions.customValues=c.slice(0));return d},getClassCodesForRelationship:function(){return m.clone({2:["L","H"],3:["L","M","H"],4:["L","M1","M2","H"]})},getClassValuesForRelationship:function(){return m.clone({2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2",
"LH"]]})}});f("extend-esri")&&m.setObject("renderer.utils",b,k);return b})},"*noref":1}});define("esri/dijit/Legend","dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/json dojo/_base/Color dojo/debounce dojo/has dojo/sniff dojo/Deferred dojo/DeferredList dojo/json dojo/dom dojo/dom-construct dojo/dom-style dojo/dom-class dijit/_Widget dojox/gfx dojox/gfx/matrix dojox/html/entities ../kernel ../config ../request ../lang ../numberUtils ../renderers/utils ../renderers/SimpleRenderer ../renderers/UniqueValueRenderer ../renderers/ClassBreaksRenderer ../renderers/ScaleDependentRenderer ../renderers/DotDensityRenderer ../renderers/TemporalRenderer ../renderers/VectorFieldRenderer ../renderers/HeatmapRenderer ../symbols/PictureFillSymbol ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../symbols/utils ../symbols/jsonUtils ../renderers/jsonUtils ./_EventedWidget dojo/i18n!../nls/jsapi".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x,w,y,z,B,A,C,F,E,H,D,G,I,P,Q,O,N,M,J,K,U,R,Y,aa,S,ma,ha,la){var ca=D.getClassValuesForRelationship(),ia={defaultShape:{type:"path",path:"M10,5 L5,0 0,5 M5,0 L5,15"},stroke:{width:1,color:"#555555"}},fa={HH:315,HL:45,LL:135,LH:225},ea=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,pa=p([ha,w],{declaredClass:"esri.dijit.Legend",widgetsInTemplate:!1,layers:null,alignRight:!1,hoverLabelShowing:!1,dotDensitySwatchSize:26,dotCoverage:75,gradientHeight:30,transparencyRampColor:new q([64,
64,64]),defaultText:"Aa",sizeRampLightColor:new q([255,255,255]),sizeRampDarkColor:new q([128,128,128]),gradientWidth:34,colorRampBorder:"1px solid",_specialChars:{lt:"\x3c",gt:"\x3e"},_ieTimer:100,_isRightToLeft:!1,_align:null,_legendAlign:null,_preserveCacheOnDestroy:!1,_layerConnects:null,_mapConnects:null,constructor:function(b,c){f.mixin(this,la.widgets.legend);this._i18n=la.widgets.legend;b=b||{};b.map&&c&&(this.map=b.map,this.layerInfos=b.layerInfos,this._respectCurrentMapScale=!1===b.respectCurrentMapScale?
!1:!0,this._respectVisibility=!1===b.respectVisibility?!1:!0,this._preserveCacheOnDestroy=b.preserveCacheOnDestroy?!0:!1,this.arrangement=b.arrangement===pa.ALIGN_RIGHT?pa.ALIGN_RIGHT:pa.ALIGN_LEFT,this.arrangement===pa.ALIGN_RIGHT&&(this.alignRight=!0),this.autoUpdate=!1===b.autoUpdate?!1:!0,this._surfaceItems=[],this.hideLayersInLegend={},this.refresh=g(this.refresh,0))},postMixInProperties:function(){this.inherited(arguments);var b=["ar","he"],c,d;for(c=0;c<b.length;c+=1)d=b[c],m.locale&&-1!==
m.locale.indexOf(d)&&(-1!==m.locale.indexOf("-")?-1!==m.locale.indexOf(d+"-")&&(this._isRightToLeft=!0):this._isRightToLeft=!0);this._isRightToLeft?(this._align=this.alignRight?"left":"right",this._legendAlign=this.alignRight?"esriLegendLeft":"esriLegendRight"):(this._align=this.alignRight?"right":"left",this._legendAlign=this.alignRight?"esriLegendRight":"esriLegendLeft")},startup:function(){this.inherited(arguments);this._initialize();9>e("ie")&&(this._repaintItems=f.hitch(this,this._repaintItems),
setTimeout(this._repaintItems,this._ieTimer))},destroy:function(){this._deactivate();this._removeCachedLegendResponses();this._removeHoverHandlers();this.inherited(arguments)},_removeCachedLegendResponses:function(){this._preserveCacheOnDestroy||l.forEach(this.layers,function(b){delete b.legendResponse})},refresh:function(b){if(this.domNode){b?(this.layerInfos=b,this.layers=[],l.forEach(this.layerInfos,function(b){this._isSupportedLayerType(b.layer)&&(b.title&&(b.layer._titleForLegend=b.title),b.layer._hideDefaultSymbol=
!1===b.defaultSymbol?!0:!1,b.hideLayers?(this.hideLayersInLegend[b.layer.id]=b.hideLayers,this._addSubLayersToHide(b)):this.hideLayersInLegend[b.layer.id]=[],b.hoverLabel&&(b.layer._hoverLabel=b.hoverLabel),b.hoverLabels&&(b.layer._hoverLabels=b.hoverLabels),this.layers.push(b.layer))},this)):this.useAllMapLayers&&(this.layers=this.layerInfos=null);for(b=this.domNode.children.length-1;0<=b;b--)u.destroy(this.domNode.children[b]);this._removeHoverHandlers();this.startup()}},_legendUrl:"http://utility.arcgis.com/sharing/tools/legend",
_initialize:function(){this.layerInfos&&(this.layers=[],l.forEach(this.layerInfos,function(b){this._isSupportedLayerType(b.layer)&&(b.title&&(b.layer._titleForLegend=b.title),b.layer._hideDefaultSymbol=!1===b.defaultSymbol?!0:!1,b.hideLayers?(this.hideLayersInLegend[b.layer.id]=b.hideLayers,this._addSubLayersToHide(b)):this.hideLayersInLegend[b.layer.id]=[],b.hoverLabel&&(b.layer._hoverLabel=b.hoverLabel),b.hoverLabels&&(b.layer._hoverLabels=b.hoverLabels),this.layers.push(b.layer))},this));this.useAllMapLayers=
!1;if(!this.layers){this.useAllMapLayers=!0;this.layers=[];var b=[],c=[];l.forEach(this.map.layerIds,function(d){d=this.map.getLayer(d);var e;this._isSupportedLayerType(d)&&(d.arcgisProps&&d.arcgisProps.title&&(d._titleForLegend=d.arcgisProps.title),this.layers.push(d));"esri.layers.KMLLayer"==d.declaredClass&&(e=d.getLayers(),l.forEach(e,function(c){b.push(c.id)},this));"esri.layers.GeoRSSLayer"==d.declaredClass&&(e=d.getFeatureLayers(),l.forEach(e,function(b){c.push(b.id)},this))},this);l.forEach(this.map.graphicsLayerIds,
function(d){var e=this.map.getLayer(d);-1==l.indexOf(b,d)&&-1==l.indexOf(c,d)&&this._isSupportedLayerType(e)&&this._isLayerDrawingEnabled(e)&&(e.arcgisProps&&e.arcgisProps.title&&(e._titleForLegend=e.arcgisProps.title),this.layers.push(e))},this)}this._createLegend()},_isLayerDrawingEnabled:function(b){return b&&(b._params&&b._params.drawMode||b.isFeatureReductionActive&&b.isFeatureReductionActive())},_activate:function(){this._deactivate();if(this.autoUpdate){this._mapConnects=[];this._layerConnects=
{};var b=this._mapConnects;this._respectCurrentMapScale&&b.push(k.connect(this.map,"onZoomEnd",this,"_refreshLayers"));this.useAllMapLayers&&(b.push(k.connect(this.map,"onLayerAdd",this,"_updateAllMapLayers")),b.push(k.connect(this.map,"onLayerRemove",this,"_updateAllMapLayers")),b.push(k.connect(this.map,"onLayersReordered",this,"_updateAllMapLayers")));l.forEach(this.layers,function(b){var c=[k.connect(b,"onFeatureReductionRendererChange",this,"_refreshLayers"),k.connect(b,"onFeatureReductionChange",
this,"_refreshLayers"),k.connect(b,"onVisibilityChange",this,"_refreshLayers"),k.connect(b,"onOpacityChange",this,"_refreshLayers"),k.connect(b,"onScaleRangeChange",this,"_refreshLayers")];"esri.layers.ArcGISDynamicMapServiceLayer"===b.declaredClass&&b.supportsDynamicLayers&&c.push(k.connect(b,"_onDynamicLayersChange",f.hitch(this,"_updateDynamicLayers",b)));if("esri.layers.ArcGISImageServiceLayer"===b.declaredClass||"esri.layers.RasterXLayer"===b.declaredClass)c.push(k.connect(b,"onRenderingChange",
f.partial(this._updateImageServiceLayers,this,b))),c.push(k.connect(b,"onRendererChange",f.partial(this._updateImageServiceLayers,this,b)));("esri.layers.ArcGISImageServiceVectorLayer"===b.declaredClass||b.setWebGLEnabled)&&c.push(k.connect(b,"onRendererChange",f.hitch(this,"_refreshLayers")));this._layerConnects[b.id]=c},this)}},_deactivate:function(){l.forEach(this._mapConnects,function(b){k.disconnect(b)});l.forEach(this.layers,function(b){var c=this._layerConnects;c&&l.forEach(c[b.id],function(b){k.disconnect(b)})},
this);this._mapConnects=this._layerConnects=null},_updateDynamicLayers:function(b){delete b.legendResponse;this._refreshLayers()},_updateImageServiceLayers:function(b,c){delete c.legendResponse;b._refreshLayers()},_refreshLayers:function(){this.refresh()},_updateAllMapLayers:function(){this.layers=[];l.forEach(this.map.layerIds,function(b){b=this.map.getLayer(b);this._isSupportedLayerType(b)&&this.layers.push(b)},this);l.forEach(this.map.graphicsLayerIds,function(b){b=this.map.getLayer(b);this._isSupportedLayerType(b)&&
this._isLayerDrawingEnabled(b)&&this.layers.push(b)},this);this.refresh()},_createLegend:function(){var b=!1,c=!1;t.set(this.domNode,"position","relative");u.create("div",{id:this.id+"_msg",className:"esriLegendMsg",innerHTML:this.NLS_creatingLegend+"..."},this.domNode);var e=[];l.forEach(this.layers,function(d){if("esri.layers.KMLLayer"==d.declaredClass||"esri.layers.GeoRSSLayer"==d.declaredClass){var g;d.loaded?("esri.layers.KMLLayer"==d.declaredClass?g=d.getLayers():"esri.layers.GeoRSSLayer"==
d.declaredClass&&(g=d.getFeatureLayers(),this.hideLayersInLegend[d.id]&&(g=l.filter(g,function(b){return-1==l.indexOf(this.hideLayersInLegend[d.id],b.id)},this))),l.forEach(g,function(b){"esri.layers.FeatureLayer"==b.declaredClass&&d._titleForLegend&&(b._titleForLegend=d._titleForLegend+" - ","esriGeometryPoint"==b.geometryType?b._titleForLegend+=this.NLS_points:"esriGeometryPolyline"==b.geometryType?b._titleForLegend+=this.NLS_lines:"esriGeometryPolygon"==b.geometryType&&(b._titleForLegend+=this.NLS_areas),
e.push(b))},this)):k.connect(d,"onLoad",f.hitch(this,function(){this.refresh(this.layerInfos)}))}else if("esri.layers.WMSLayer"===d.declaredClass)if(!d.loaded)k.connect(d,"onLoad",f.hitch(this,function(){this.refresh(this.layerInfos)}));else{if((!this._respectVisibility||this._respectVisibility&&d.visible)&&0<d.layerInfos.length&&l.some(d.layerInfos,function(b){return b.legendURL})){var h=!1;l.forEach(d.layerInfos,function(c){if(c.legendURL&&-1<l.indexOf(d.visibleLayers,c.name)){h||(u.create("div",
{innerHTML:"\x3cspan class\x3d'esriLegendServiceLabel'\x3e"+(d._titleForLegend||d.name||d.id)+"\x3c/span\x3e"},this.domNode),h=!0);var e;c=c.legendURL;if(d.customParameters||d.customLayerParameters){var g=f.clone(d.customParameters||{});f.mixin(g,d.customLayerParameters||{});for(e in g)c+=(-1===c.indexOf("?")?"?":"\x26")+e+"\x3d"+g[e]}u.create("div",{innerHTML:"\x3cimg src\x3d'"+c+"'/\x3e"},this.domNode);b=!0}},this)}}else"esri.layers.WFSLayer"!==d.declaredClass||d.renderer?e.push(d):(g=u.create("div",
{id:this.id+"_"+d.id,"class":"esriLegendService"}),u.create("span",{innerHTML:this._getServiceTitle(d),"class":"esriLegendServiceLabel"},u.create("td",{align:this._align},u.create("tr",{},u.create("tbody",{},u.create("table",{width:"95%"},g))))),u.place(g,this.id,"first"),g=u.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},g),g=u.create("tbody",{},g),"esriGeometryComplex"===d.geometryType?(this._buildRow_Renderer(d,d._pointSymbol,null,this.NLS_points,null,g),this._buildRow_Renderer(d,
d._lineSymbol,null,this.NLS_lines,null,g),this._buildRow_Renderer(d,d._polygonSymbol,null,this.NLS_areas,null,g)):"esriGeometryPoint"===d.geometryType?this._buildRow_Renderer(d,d._pointSymbol,null,"",null,g):"esriGeometryPolyline"===d.geometryType?this._buildRow_Renderer(d,d._lineSymbol,null,"",null,g):"esriGeometryPolygon"===d.geometryType&&this._buildRow_Renderer(d,d._polygonSymbol,null,"",null,g),c=!0)},this);var g=[];l.forEach(e,function(b){if(!b.loaded)var c=k.connect(b,"onLoad",this,function(b){k.disconnect(c);
c=null;this.refresh()});else if((!this._respectVisibility||this._respectVisibility&&b.visible)&&(b.layerInfos||b.renderer||"esri.layers.ArcGISImageServiceLayer"==b.declaredClass||"esri.layers.RasterXLayer"==b.declaredClass)){var d=u.create("div",{id:this.id+"_"+b.id,style:{display:"none"},"class":"esriLegendService"});u.create("span",{innerHTML:this._getServiceTitle(b),"class":"esriLegendServiceLabel"},u.create("td",{align:this._align},u.create("tr",{},u.create("tbody",{},u.create("table",{width:"95%"},
d)))));u.place(d,this.id,"first");b.legendResponse||b.renderer&&"esri.renderer.StretchRenderer"!==b.renderer.declaredClass||b.renderer&&"esri.renderer.StretchRenderer"===b.renderer.declaredClass&&1===b.bandCount?this._createLegendForLayer(b):this.isHostedTileService(b)?this._getLayerInfos(b).then(f.hitch(this,function(b){this._createLegendForLayer(b)}),f.hitch(this,function(b){g.push(this._legendRequest(b))})):"esri.layers.RasterXLayer"===b.declaredClass&&-1<b.capabilities.toLowerCase().indexOf("tilesonly")?
this._createLegendForTileOnlyService(b):g.push(this._legendRequest(b))}},this);0!==g.length||b||c?(new d(g)).addCallback(f.hitch(this,function(d){b||c?v.byId(this.id+"_msg").innerHTML="":v.byId(this.id+"_msg").innerHTML=this.NLS_noLegend;this._activate()})):(v.byId(this.id+"_msg").innerHTML=this.NLS_noLegend,this._activate())},_createLegendForTileOnlyService:function(b){function c(c,e){var f=["red","green","blue"],k=[[255,0,0],[0,255,0],[0,0,255]];(e&&e.length>=h?d(e):d()).forEach(function(d,e){var h=
new U(U.STYLE_SQUARE,20,new R(R.STYLE_SOLID,new q([0,0,0]),1),new q(k[e]));c._buildRow_Renderer(b,h,null,f[e]+": "+d,null,g)},c)}function d(c){var d=(b.bandIds&&b.bandIds.length?b.bandIds:[0,1,2]).map(function(b){return c&&c[b]&&c[b].BandName||"Band_"+(b+1)});3>d.length?d.push(d[1]):3<d.length&&d.splice(3);return d}var e=u.create("div",{id:this.id+"_"+b.id+"_clientLegend","class":"esriLegendServiceLabel"},v.byId(this.id+"_"+b.id));u.create("td",{align:this._align},u.create("tr",{},u.create("tbody",
{},u.create("table",{width:"95%","class":"esriLegendLayerLabel"},e))));var e=u.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},e),g=u.create("tbody",{},e),h=b.bandCount;if(1<h)b.getKeyProperties().then(f.hitch(this,function(b){c(this,b.BandProperties)}),f.hitch(this,function(b){c(this)})),t.set(v.byId(this.id+"_"+b.id),"display","block"),t.set(v.byId(this.id+"_msg"),"display","none");else{var e={colorRamp:{type:"algorithmic",fromColor:[0,0,0],toColor:[255,255,255]}},
k=b.renderer,l,m;k&&k.statistics&&k.statistics.length?(l=null!=k.statistics[0].min?k.statistics[0].min:k.statistics[0][0],m=null!=k.statistics[0].max?k.statistics[0].max:k.statistics[0][1]):(l=b.serviceInfo.minValues.length?b.serviceInfo.minValues[0]:0,m=b.serviceInfo.maxValues.length?b.serviceInfo.maxValues[0]:255);this._createStretchLegend(g,k||e,l,m)}},_createLegendForLayer:function(b){if(b.legendResponse||b.renderer||this.isHostedTileService(b)){var c=!1;if(b.legendResponse||this.isHostedTileService(b)){var d=
b.dynamicLayerInfos||b.layerInfos;if(d&&d.length)l.forEach(d,function(d,e){this.hideLayersInLegend[b.id]&&-1!==l.indexOf(this.hideLayersInLegend[b.id],d.id)||(d=this._buildLegendItems(b,d,e),c=c||d)},this);else if("esri.layers.ArcGISImageServiceLayer"==b.declaredClass||"esri.layers.RasterXLayer"==b.declaredClass)c=this._buildLegendItems(b,{id:0,name:null,title:b.name,subLayerIds:null,parentLayerId:-1},0)}else b.renderer&&(d=b.url?b.url.substring(b.url.lastIndexOf("/")+1,b.url.length):"fc_"+b.id,c=
this._buildLegendItems(b,{id:d,name:null,subLayerIds:null,parentLayerId:-1},0));c&&(t.set(v.byId(this.id+"_"+b.id),"display","block"),t.set(v.byId(this.id+"_msg"),"display","none"))}},_legendRequest:function(b){if(b.loaded)return 10.01<=b.version?this._legendRequestServer(b):this._legendRequestTools(b);k.connect(b,"onLoad",f.hitch(this,"_legendRequest"))},_legendRequestServer:function(b){var c=b.url,d=c.indexOf("?"),c=-1<d?c.substring(0,d)+"/legend"+c.substring(d):c+"/legend";(d=b._getToken())&&(c+=
"?token\x3d"+d);var e=f.hitch(this,"_processLegendResponse"),g={f:"json"};b._params.dynamicLayers&&(g.dynamicLayers=r.stringify(this._createDynamicLayers(b)),"[{}]"===g.dynamicLayers&&(g.dynamicLayers="[]"));b._params.bandIds&&(g.bandIds=b._params.bandIds);b._params.renderingRule?g.renderingRule=b._params.renderingRule:b.rasterFunctionInfos&&0<b.rasterFunctionInfos.length&&l.forEach(b.rasterFunctionInfos,function(b){b&&b.name&&"none"===b.name.toLowerCase()&&(g.renderingRule=r.stringify({rasterFunction:b.name}))});
return F({url:c,content:g,callbackParamName:"callback",load:function(c,d){e(b,c,d)},error:C.defaults.io.errorHandler})},_legendRequestTools:function(b){var c=b.url.toLowerCase().indexOf("/rest/"),c=b.url.substring(0,c)+b.url.substring(c+5,b.url.length),c=this._legendUrl+"?soapUrl\x3d"+window.escape(c);if(!e("ie")||8<e("ie"))c+="\x26returnbytes\x3dtrue";var d=f.hitch(this,"_processLegendResponse");return F({url:c,content:{f:"json"},callbackParamName:"callback",load:function(c,e){d(b,c,e)},error:C.defaults.io.errorHandler})},
_processLegendResponse:function(b,c){c&&c.layers&&(b.legendResponse=c,v.byId(this.id+"_"+b.id)&&u.empty(v.byId(this.id+"_"+b.id)),u.create("span",{innerHTML:this._getServiceTitle(b),"class":"esriLegendServiceLabel"},u.create("td",{align:this._align},u.create("tr",{},u.create("tbody",{},u.create("table",{width:"95%"},v.byId(this.id+"_"+b.id)))))),this._createLegendForLayer(b))},_buildLegendItems:function(b,c,d){var e=!1,g=v.byId(this.id+"_"+b.id),f=c.parentLayerId;if(c.subLayerIds)b=u.create("div",
{id:this.id+"_"+b.id+"_"+c.id+"_group",style:{display:"none"},"class":-1==f?0<d?"esriLegendGroupLayer":"":this._legendAlign},-1==f?g:v.byId(this.id+"_"+b.id+"_"+f+"_group")),u.create("td",{innerHTML:B.encode(c.name),align:this._align},u.create("tr",{},u.create("tbody",{},u.create("table",{width:"95%","class":"esriLegendLayerLabel"},b))));else{if(this._respectVisibility&&b.visibleLayers)if(d=b.dynamicLayerInfos||b.layerInfos)if(b._params&&b._params.layers){if(-1===l.indexOf(b.visibleLayers,c.id))return e}else{if(d=
this._getReallyVisibleLayers(d,b.visibleLayers),-1===l.indexOf(d,c.id))return e}else if(-1===l.indexOf(b.visibleLayers,c.id))return e;g=u.create("div",{id:this.id+"_"+b.id+"_"+c.id,style:{display:"none"},"class":-1<f?this._legendAlign:""},-1==f?g:v.byId(this.id+"_"+b.id+"_"+f+"_group"));u.create("td",{innerHTML:B.encode(c.name)||"",align:this._align},u.create("tr",{},u.create("tbody",{},u.create("table",{width:"95%","class":"esriLegendLayerLabel"},g))));d=b.dynamicLayerInfos||b.layerInfos;f=!1;d&&
d.length&&(f=l.some(d,function(b){return!!b.drawingInfo}));if(b.legendResponse)e=e||this._buildLegendItems_Tools(b,c,g);else if(b.renderer||f)e=e||this._buildLegendItems_Renderer(b,c,g)}return e},_getReallyVisibleLayers:function(b,c){if(!b||!c||!c.length)return[];var d=[],e=[],g;for(g=0;g<b.length;g++)if(b[g].subLayerIds){if(-1===l.indexOf(c,b[g].id)||-1<l.indexOf(e,b[g].id))e=e.concat(b[g].subLayerIds)}else-1<l.indexOf(c,b[g].id)&&-1===l.indexOf(e,b[g].id)&&d.push(b[g].id);return d},_buildLegendItems_Tools:function(b,
c,d){var e=c.parentLayerId,g=this.map.getScale(),f=!1,h=function(b,c){var d,e;for(d=0;d<b.length;d++)if(c.dynamicLayerInfos)for(e=0;e<c.dynamicLayerInfos[e].length;e++){if(c.dynamicLayerInfos[e].mapLayerId==b[d].layerId)return b[d]}else if(c.id==b[d].layerId)return b[d];return{}};if(!this._respectCurrentMapScale||this._respectCurrentMapScale&&this._isLayerInScale(b,c,g)){var k=!0;if(this._respectCurrentMapScale&&("esri.layers.ArcGISDynamicMapServiceLayer"===b.declaredClass||"esri.layers.ArcGISMapServiceLayer"===
b.declaredClass)){var m=this._getEffectiveScale(b,c);if(m.minScale&&m.minScale<g||m.maxScale&&m.maxScale>g)k=!1}if(k){var g=h(b.legendResponse.layers,c),q=g.legendType,r=g.layerType,p=g.legend;if(p){"esri.layers.ArcGISImageServiceLayer"===b.declaredClass&&"esri.layers.RasterXLayer"===b.declaredClass||this._sanitizeLegendResponse(b,g,c);d=u.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},d);var w=u.create("tbody",{},d);(b._hoverLabel||b._hoverLabels)&&this._createHoverAction(d,
b,c);var x=[];l.forEach(p,function(d){if(!(10.1<=b.version&&!d.values&&1<p.length)||!b._hideDefaultSymbol&&"\x3call other values\x3e"!==d.label&&(d.label||"esri.layers.ArcGISImageServiceLayer"===b.declaredClass&&10.3<=b.version||"Raster Layer"===r)){var e=d.label;if(d.url&&0===d.url.indexOf("http")||d.imageData&&0<d.imageData.length)f=!0,e&&-1!==l.indexOf(x,e)||(x.push(e),this._buildRow_Tools(d,w,b,c.id,q))}},this)}}}f&&(t.set(v.byId(this.id+"_"+b.id+"_"+c.id),"display","block"),-1<e&&(t.set(v.byId(this.id+
"_"+b.id+"_"+e+"_group"),"display","block"),this._findParentGroup(b.id,b,e)));return f},_getLayerInfos:function(c){var d=new b,e=c.dynamicLayerInfos||c.layerInfos;if(e&&e.length)if(l.some(e,function(b){return!!b.drawingInfo}))d.resolve(c);else{var g=c.url,f=g.indexOf("?"),g=-1==f?g+"/layers":g.substring(0,f)+"/layers"+g.substring(f,g.length);F({url:g,content:{f:"json"},callbackParamName:"callback",load:function(b,g){b.layers?(l.forEach(e,function(c){var d=l.filter(b.layers,function(b){return c.source?
b.id===c.source.mapLayerId:b.id===c.id});d&&d[0]&&d[0].drawingInfo&&(c.drawingInfo=d[0].drawingInfo,c.fields=d[0].fields)}),d.resolve(c)):d.reject(c)},error:function(b){d.reject(c)}})}return d},_sanitizeLegendResponse:function(b,c,d){var e=c.legend;if(10.1<=b.version&&1<e.length&&!c._sanitized){b=f.getObject("layerDefinition.drawingInfo.renderer",!1,d);var g,h;b||(b=f.getObject("drawingInfo.renderer",!1,d));l.some(e,function(b){if(b.values)return!0})&&l.some(e,function(b,c){b.values||(h=c,g=b);return!!g});
b?"uniqueValue"===b.type?g&&(e.splice(h,1),e.push(g)):"classBreaks"===b.type&&(g&&e.splice(h,1),e.reverse(),g&&e.push(g)):g&&(e.splice(h,1),e.push(g));c._sanitized=!0}},_buildRow_Tools:function(b,c,d,g,f){var h=u.create("tr",{},c),k;this.alignRight?(c=u.create("td",{align:this._isRightToLeft?"left":"right"},h),k=u.create("td",{align:this._isRightToLeft?"left":"right",width:35},h)):(k=u.create("td",{width:35,align:"center"},h),c=u.create("td",{},h));h=b.url;(!e("ie")||9<=e("ie")||9>e("ie")&&("esri.layers.ArcGISImageServiceLayer"===
d.declaredClass||"esri.layers.RasterXLayer"===d.declaredClass))&&b.imageData&&0<b.imageData.length?h="data:image/png;base64,"+b.imageData:0!==b.url.indexOf("http")&&(h=d.url+"/"+g+"/images/"+b.url,(g=d._getToken())&&(h+="?token\x3d"+g));g=u.create("img",{src:h,border:0,style:"opacity:"+d.opacity},k);b=u.create("td",{innerHTML:B.encode(b.label),align:this._align},u.create("tr",{},u.create("tbody",{},u.create("table",{width:"95%",dir:"ltr"},c))));f&&"Stretched"===f&&10.3<=d.version&&("esri.layers.ArcGISImageServiceLayer"===
d.declaredClass||"esri.layers.RasterXLayer"===d.declaredClass)&&(b.style.verticalAlign="top",b.style.lineHeight="1",g.style.marginBottom="-1px",g.style.display="block",c.style.verticalAlign="top");9>e("ie")&&(g.style.filter="alpha(opacity\x3d"+100*d.opacity+")")},_getVariable:function(b,c,d){var e;b&&(e=(b=b.getVisualVariablesForType(c,d))&&b[0]);return e},_getVariables:function(b,c,d){b=[this._getVariable(b,"colorInfo",!1),this._getVariable(b,"opacityInfo",!1),this._getVariable(b,"sizeInfo",!1)];
return c?l.filter(b,function(b){return!(!b||b.field!==c||b.normalizationField!=d)}):b},_getFieldAlias:function(b,c,d){var e=c.infoTemplate||(c.infoTemplates&&d&&c.infoTemplates[d.id]?c.infoTemplates[d.id].infoTemplate:null),e=e&&e.getFieldInfo&&e.getFieldInfo(b);b=f.isFunction(b)?null:this.getField(c,b,d);c=e||b;d="";c&&(d=e&&e.label||b&&b.alias||c.name||c.fieldName);return d},_getDomainName:function(b,c,d,e){var g;b&&!f.isFunction(b)&&(g=(d=(b=this.getField(d,b,e))&&d.getDomain?d.getDomain(b.name):
null)&&d.codedValues?d.getName(c):null);return g},_getRampTitle:function(b,c,d){var e,g=b.field,h=b.normalizationField,k=!1,l=!1,m=!1,g=f.isFunction(g)?null:g,h=f.isFunction(h)?null:h;if(b.legendOptions&&b.legendOptions.title)e=b.legendOptions.title;else if(b.valueExpressionTitle)e=b.valueExpressionTitle;else{if(c.renderer&&c.renderer.authoringInfo&&c.renderer.authoringInfo.visualVariables){var q=c.renderer.authoringInfo.visualVariables;for(b=0;b<q.length;b++){var r=q[b];if("colorInfo"===r.type&&
"ratio"===r.style){k=!0;break}else if("colorInfo"===r.type&&"percent"===r.style){l=!0;break}else if("colorInfo"===r.type&&"percentTotal"===r.style){m=!0;break}}}(k=m&&"showRatioPercentTotal"||l&&"showRatioPercent"||k&&"showRatio"||h&&"showNormField"||g&&"showField"||null)&&(e=E.substitute({field:g&&this._getFieldAlias(g,c,d),normField:h&&this._getFieldAlias(h,c,d)},"showField"===k?"${field}":this._i18n[k]))}return e},_getRendererTitle:function(b,c,d){var e;if(b){var g,h,k;"esri.renderer.ClassBreaksRenderer"===
b.declaredClass&&(g=b.attributeField,h=b.normalizationField,k="percent-of-total"===b.normalizationType);g=f.isFunction(g)?null:g;h=f.isFunction(h)?null:h;b.legendOptions&&b.legendOptions.title?e=b.legendOptions.title:b.valueExpressionTitle?e=b.valueExpressionTitle:(b=h&&"showNormField"||(k?"showNormPct":null)||g&&"showField"||null)&&(e=E.substitute({field:g&&this._getFieldAlias(g,c,d),normField:h&&this._getFieldAlias(h,c,d)},"showField"===b?"${field}":this._i18n[b]))}return e},_buildLegendItems_Renderer:function(b,
c,d){function e(){t.set(v.byId(na.id+"_"+b.id+"_"+c.id),"display","block");-1<g&&(t.set(v.byId(na.id+"_"+b.id+"_"+g+"_group"),"display","block"),this._findParentGroup(b.id,g))}var g=c.parentLayerId,h=this.map,k=h.getScale(),m,r=!1;if(!this._respectCurrentMapScale||this._isLayerInScale(b,c,k)){var p,w,x,N,y,A,C;w="esri.layers.ArcGISImageServiceVectorLayer"===b.declaredClass?b.renderer.renderer:c&&c.drawingInfo?ma.fromJson(f.clone(c.drawingInfo.renderer)):b.isFeatureReductionActive&&b.isFeatureReductionActive()?
b.getFeatureReductionRenderer():b.renderer;if("esri.renderer.ScaleDependentRenderer"===w.declaredClass&&(w=(h="zoom"===w.rangeType?w.getRendererInfoByZoom(h.getZoom()):w.getRendererInfoByScale(k))&&h.renderer,!w))return!1;h=w&&w.authoringInfo&&"relationship"===w.authoringInfo.type;if("esri.renderer.StretchRenderer"!==w.declaredClass&&"esri.renderer.ShadedReliefRenderer"!==w.declaredClass){var G=this._getVariables(w),z=l.filter(G,function(b){return!!b}).length,H=G[0],F=G[1],G=G[2],D,J,I,K,P;H&&(x=
this._getMedianColor(w,H),H.field&&(y=f.isFunction(H.field)?null:this.getField(b,H.field,c)),D=!(H.legendOptions&&!1===H.legendOptions.showLegend));F&&(F.field&&(C=f.isFunction(F.field)?null:this.getField(b,F.field,c)),J=!(F.legendOptions&&!1===F.legendOptions.showLegend));G&&(G.field&&(A=f.isFunction(G.field)?null:this.getField(b,G.field,c)),I=!(G.legendOptions&&!1===G.legendOptions.showLegend))}if("esri.renderer.HeatmapRenderer"===w.declaredClass)m=r=!0,this._showHeatRamp(b,c,w,d);else if("esri.renderer.DotDensityRenderer"===
w.declaredClass)m=r=!0,this._showDotDensityLegend(b,c,w,d);else if("esri.renderer.TemporalRenderer"===w.declaredClass)m=r=!0,k=u.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},d),p=u.create("tbody",{},k),(b._hoverLabel||b._hoverLabels)&&this._createHoverAction(k,b,c),w.latestObservationRenderer&&"esri.renderer.SimpleRenderer"===w.latestObservationRenderer.declaredClass&&this._buildRow_Renderer(b,w.latestObservationRenderer.symbol,x,B.encode(w.latestObservationRenderer.label)||
this.NLS_currentObservations,null,p),w.observationRenderer&&"esri.renderer.SimpleRenderer"===w.observationRenderer.declaredClass&&this._buildRow_Renderer(b,w.observationRenderer.symbol,x,B.encode(w.observationRenderer.label)||this.NLS_previousObservations,null,p);else if("esri.renderer.UniqueValueRenderer"===w.declaredClass){if(w.infos&&0<w.infos.length){m=r=!0;if(w.legendOptions&&w.legendOptions.title||w.valueExpressionTitle)k=u.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},
d),p=u.create("tbody",{},k),z=w.legendOptions&&w.legendOptions.title?w.legendOptions.title:w.valueExpressionTitle,this._buildRow_Renderer(b,null,x,B.encode(z),null,p);k=u.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},d);p=u.create("tbody",{},k);(b._hoverLabel||b._hoverLabels)&&this._createHoverAction(k,b,c);w.attributeField&&G&&this._addSubHeader(p,this._getFieldAlias(w.attributeField,b,c));if(h){var O=w.authoringInfo;P=O.focus;var z=O.numClasses,Q=O.field1.field,
k=O.field2.field;if(z&&Q&&k){var ka=O.field1.normalizationField,O=O.field2.normalizationField,U=ka&&this._i18n.showNormField||Q&&"${field}",aa=O&&this._i18n.showNormField||k&&"${field}",Q=E.substitute({field:this._getFieldAlias(Q,b,c),normField:ka&&this._getFieldAlias(ka,b,c)},U),k=E.substitute({field:this._getFieldAlias(k,b,c),normField:O&&this._getFieldAlias(O,b,c)},aa),ka={shapeDescriptor:ia,rotation:this._getRotationAngleForFocus(P)||0};this._buildRow_Renderer(b,null,null,B.encode(Q),null,p,null,
ka);ka.rotation+=90;this._buildRow_Renderer(b,null,null,B.encode(k),null,p,null,ka);this._drawRelationshipLegend(d,{numClasses:z,focus:P,uvInfos:w.infos})}}else{var R=[];l.forEach(w.infos,function(d){var e=null;this._isLayerEditable(b)&&b.types&&(e=this._getTemplateFromTypes(b.types,d.value));var g=d.label;null==g&&(g=this._getDomainName(w.attributeField,d.value,b,c)||d.value);-1===l.indexOf(R,g)&&(R.push(g),this._buildRow_Renderer(b,d.symbol,x,B.encode(g),e,p))},this)}}P=!h&&this._displayDefaultSymbol(b,
w,d)}else if("esri.renderer.ClassBreaksRenderer"===w.declaredClass){if(w.infos&&0<w.infos.length||"esri.layers.ArcGISImageServiceVectorLayer"===b.declaredClass)m=r=!0,K=this._isUnclassedRenderer(w),H||1!==w.infos.length||(N=(N=w.infos[0])&&N.symbol),K||(k=u.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},d),p=u.create("tbody",{},k),z=this._getRendererTitle(w,b,c),this._buildRow_Renderer(b,null,x,B.encode(z),null,p)),k=u.create("table",{cellpadding:0,cellspacing:0,
width:"95%","class":"esriLegendLayer"},d),p=u.create("tbody",{},k),(b._hoverLabel||b._hoverLabels)&&this._createHoverAction(k,b,c),K&&G&&I||(h=w.infos.slice(0).reverse(),l.forEach(h,function(c){var d=c.label;null!=d||K||(d=c.minValue+" - "+c.maxValue);this._buildRow_Renderer(b,c.symbol,x,B.encode(d),null,p)},this)),"esri.layers.ArcGISImageServiceVectorLayer"!==b.declaredClass||b.renderer.style!==M.STYLE_SCALAR&&b.renderer.style!==M.STYLE_SINGLE_ARROW||(this._buildRow_Renderer(b,w.defaultSymbol,null,
"",null,p),b._hideDefaultSymbol=!0);K||(P=this._displayDefaultSymbol(b,w,d))}else if("esri.renderer.StretchRenderer"===w.declaredClass){m=r=!0;k=u.create("table",{cellpadding:0,cellspacing:0,width:"95%",class:"esriLegendLayer"},d);p=u.create("tbody",{},k);var na=this,S,ja;if(b.renderingRule)b.getRenderingRuleServiceInfo(b.renderingRule).then(function(c){var d=c&&c.minValues&&0<c.minValues.length&&c.maxValues&&0<c.maxValues.length;c&&1<c.bandCount||!d?na._legendRequest(b).then(function(c){na._processLegendResponse(b,
c)}):(w.statistics.length?(S=w.statistics[0][1],ja=w.statistics[0][0]):(ja=c.minValues[0],S=c.maxValues[0]),na._createStretchLegend(p,w,ja,S))});else{h=b.serviceInfo;if("esri.layers.RasterXLayer"===b.declaredClass&&(h=b.raster.serviceInfo,b.hasMultidimensions))return b.getVariableStats(b.mosaicRule&&b.mosaicRule.multidimensionalDefinition?b.mosaicRule.multidimensionalDefinition[0].variableName:b._defaultMultidimensionalDefinition[0].variableName).then(f.hitch(this,function(b){this._createStretchLegend(p,
w,b[0].min,b[0].max);e()})),r;this._createStretchLegend(p,w,h?h.minValues[0]:b.minValues[0],h?h.maxValues[0]:b.maxValues[0])}}else"esri.renderer.ShadedReliefRenderer"===w.declaredClass?(m=r=!0,k=u.create("table",{cellpadding:0,cellspacing:0,width:"95%",class:"esriLegendLayer"},d),p=u.create("tbody",{},k),this._createStretchLegend(p,w,0,255)):"esri.renderer.SimpleRenderer"===w.declaredClass?(m=r=!0,k=u.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},d),p=u.create("tbody",
{},k),(b._hoverLabel||b._hoverLabels)&&this._createHoverAction(k,b,c),N=null,this._isLayerEditable(b)&&b.templates&&0<b.templates.length&&(N=b.templates[0]),h=1<z?null:y&&D||C&&J||A&&I,this._buildRow_Renderer(b,w.symbol,x,B.encode(h?this._getRampTitle(1<z?null:H||F||G,b,c):w.label),N,p),N=H?null:w.symbol,h&&(y=C=A=null)):"esri.renderer.ColormapRenderer"===w.declaredClass&&(w.colormapInfos&&w.colormapInfos.length&&(m=r=!0),k=u.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},
d),p=u.create("tbody",{},k),w.colormapInfos.forEach(function(c){var d=new Y(Y.STYLE_SOLID,null,new q(c.color));this._buildRow_Renderer(b,d,null,c.label,null,p)},this),b._hideDefaultSymbol=!0);m&&(H&&D&&(H.field||H.valueExpression)&&this._showGradientRamp(b,c,w,null,d,H,y,null,G&&I?!0:!1),G&&I&&(G.field||G.valueExpression&&!ea.test(G.valueExpression))&&(m=H&&D||"esri.renderer.UniqueValueRenderer"===w.declaredClass?!1:!0,this._showSizeLegend(b,c,w,G,x,d,A,null,m)),F&&J&&(F.field||F.valueExpression)&&
this._showGradientRamp(b,c,w,N&&!N.url&&N.color?N.color:this.transparencyRampColor,d,F,C,null,!1));P||K&&!D&&!I&&!J||(P=this._displayDefaultSymbol(b,w,d));r=r||P}na=this;r&&e();return r},_createStretchLegend:function(b,c,d,e){var g=u.create("tr",{},b),f;f=u.create("td",{rowspan:2,"class":"esriStretchLegend"},g);c=u.toDom(this._addColorRamp(c.colorRamp));u.place(c,f);u.create("td",{},g).innerHTML=this._i18n.high+": "+Math.round(e*Math.pow(10,3))/Math.pow(10,3);b=u.create("tr",{},b);u.create("td",{},
b).innerHTML=this._i18n.low+": "+Math.round(d*Math.pow(10,3))/Math.pow(10,3)},_addColorRamp:function(b){b||(b={algorithm:"hsv",fromColor:[0,0,0,1],toColor:[255,255,255,1]});var c=this._generateColorRampDivs(b);b.label="\x3cdiv class\x3d'esriStretchLegendGradientLabel'\x3e"+c+"\x3c/div\x3e";return b.label},_generateColorRampDivs:function(b){if(b){var c,d="";if("multipart"===b.type){c=100/b.colorRamps.length;var e=b.colorRamps;Object.keys(e).reverse().forEach(function(b){d+=this._generateSingleGradientDiv(e[b].fromColor,
e[b].toColor,c)},this)}else d=this._generateSingleGradientDiv(b.fromColor,b.toColor,100);return d}},_generateSingleGradientDiv:function(b,c,d){if(b&&c){var e,g="";b=b.toRgb?b.toRgb():b;c=c.toRgb?c.toRgb():c;e="(0deg, rgb("+b.slice(0,3).join()+"), rgb("+c.slice(0,3).join()+"));";l.forEach(["-webkit-linear-gradient","-o-linear-gradient","-moz-linear-gradient","linear-gradient"],function(b){g+="background: "+b+e});return"\x3cdiv class\x3d'esriStretchLegendSingleGradient' style\x3d'height:"+d+"%;"+g+
"'\x3e\x3c/div\x3e"}},_isLayerEditable:function(b){return"function"===typeof b.isEditable&&b.isEditable()},_isUnclassedRenderer:function(b,c){var d;if("esri.renderer.ClassBreaksRenderer"===b.declaredClass&&b.infos&&1===b.infos.length){d=b.attributeField;var e=b.normalizationField;d=c?d===c:!!this._getVariables(b,d,e).length}return d},_displayDefaultSymbol:function(b,c,d){var e;!b._hideDefaultSymbol&&c.defaultSymbol&&(e=!0,d=u.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},
d),d=u.create("tbody",{},d),this._buildRow_Renderer(b,c.defaultSymbol,null,B.encode(c.defaultLabel)||"others",null,d));return e},_showGradientRamp:function(b,c,d,e,g,h,k,l,m){m=u.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"+(m?"":" esriLegendSubFragment")},g);g=u.create("tbody",{},m);(b._hoverLabel||b._hoverLabels||l)&&this._createHoverAction(m,b,c,l);(k||h.valueExpression||h.legendOptions&&h.legendOptions.title)&&this._addSubHeader(g,this._getRampTitle(h,b,c));
k=h.field;var q;k&&(q=f.isFunction(k)?null:this.getField(b,k,c));if(h=(c=this._getRampStops(d,h,e,q&&"esriFieldTypeDate"===q.type))?c.length:0)h=10<h,this._drawGradientRamp(g,c,!h,b,this._getRampBorderColor(d),!!e,h)},_getMedianColor:function(b,c){var d,e;c.colors?(d=c.minDataValue,e=c.maxDataValue):c.stops&&(d=c.stops[0].value,e=c.stops[c.stops.length-1].value);return b.getColor(d+(e-d)/2,{colorInfo:c})},_getRampStops:function(b,c,d,e){var g,f,h,k,m=!1;c.colors||c.opacityValues?(f=c.maxDataValue-
c.minDataValue,g=l.map([0,.25,.5,.75,1],function(b){h=c.minDataValue+b*f;return Number(h.toFixed(6))}),this._checkPrecision(0,4,g)):c.stops&&(g=l.map(c.stops,function(b){return b.value}),(m=l.some(c.stops,function(b){return!!b.label}))&&(k=l.map(c.stops,function(b){return b.label})));var r=g[0],p,u;f=g[g.length-1]-r;return l.map(g,function(h,l){d?(p=new q(d.toRgba()),u=b.getOpacity(h,{opacityInfo:c}),null!=u&&(p.a=u)):p=b.getColor(h,{colorInfo:c});var t="";if(m)t=k[l];else{var t=e?D.formatDate(h,
D.timelineDateFormatOptions):H.format(h),v="";0===l?v=this._specialChars.lt+" ":l===g.length-1&&(v=this._specialChars.gt+" ");t=v+t}return{value:h,color:p,offset:1-(h-r)/f,label:t}},this).reverse()},_checkPrecision:function(b,c,d){var e=b+(c-b)/2,g=d[b],f=d[e],h=d[c],k=Math.floor(g),l=Math.floor(f),m=Math.floor(h);k===g&&m===h&&l!==f&&k!==l&&m!==l&&(d[e]=l);b+1!==e&&this._checkPrecision(b,e,d);e+1!==c&&this._checkPrecision(e,c,d)},_getRampBorderColor:function(b){var c;if("esri.renderer.SimpleRenderer"===
b.declaredClass)c=b.symbol;else if("esri.renderer.UniqueValueRenderer"===b.declaredClass||"esri.renderer.ClassBreaksRenderer"===b.declaredClass)c=b.infos[0].symbol;return(b=c&&-1===c.type.indexOf("linesymbol")?c.getStroke():null)&&b.color},_drawGradientRamp:function(b,c,d,g,f,h,k){var m=u.create("tr",{},b),r,p,v,w,x,N=c.length-1,A;w=0;this.alignRight?(b=u.create("td",{align:this._isRightToLeft?"left":"right"},m),r=u.create("td",{align:this._isRightToLeft?"left":"right",width:this.gradientWidth},m)):
(r=u.create("td",{width:this.gradientWidth,align:"center"},m),b=u.create("td",{},m));m=f&&0<f.a&&!(240<=f.r&&240<=f.g&&240<=f.b);p=u.create("div",{"class":m?"":"esriLegendBorderLessColorRamp",style:"position: relative; width:"+this.gradientWidth+"px;"},r);r=u.create("div",{"class":"esriLegendColorRamp"+(h?" esriLegendTransparencyRamp":"")},p);h=t.get(r,"width");m&&(f=9>e("ie")?f.toHex():"rgba("+f.toRgba().join(",")+")",t.set(r,"border",this.colorRampBorder+" "+f));d?(f=this.gradientHeight*N,t.set(r,
"height",f+"px")):f=t.get(r,"height");t.set(p,"height",f+"px");m=y.createSurface(r,h,f);9>e("ie")&&(w=m.getEventSource(),t.set(w,"position","relative"),t.set(w.parentNode,"position","relative"),w=1);try{d&&l.forEach(c,function(b,c){b.offset=c/N}),x=m.createRect({x:-w,y:-w,width:h+w,height:f+w}),x.setFill({type:"linear",x1:0,y1:0,x2:0,y2:f,colors:c}).setStroke(null),m.createRect({width:h,height:f}).setFill(new q([255,255,255,1-g.opacity])).setStroke(null),this._surfaceItems.push(m)}catch(Ha){m.clear(),
m.destroy()}l.forEach(c,function(b,d){b.label&&(A="top:"+100*b.offset+"%;",b="",0===d&&(b+=" esriLegendColorRampTickFirst"),d===c.length-1&&(b+=" esriLegendColorRampTickLast"),u.create("div",{"class":"esriLegendColorRampTick"+b,innerHTML:"\x26nbsp;",style:A},p))});v=u.create("div",{"class":"esriLegendColorRampLabels",style:{height:f+this.gradientHeight+"px"}},b);d?l.forEach(c,function(b){u.create("div",{"class":"esriLegendColorRampLabel",innerHTML:B.encode(b.label)||"\x26nbsp;"},v)}):(u.create("div",
{"class":"esriLegendColorRampLabel",innerHTML:k?B.encode(c[0].label)||"\x26nbsp;":this._i18n.high},v),u.create("div",{"class":"esriLegendColorRampLabel",innerHTML:k?B.encode(c[c.length-1].label)||"\x26nbsp;":this._i18n.low,style:"top: "+(f+this.gradientHeight-2*this.gradientHeight)+"px;"},v))},_showHeatRamp:function(b,c,d,e,g){var f,h=d.field;f=u.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},e);e=u.create("tbody",{},f);(b._hoverLabel||b._hoverLabels||g)&&this._createHoverAction(f,
b,c,g);(h=h&&this.getField(b,h,c))&&this._addSubHeader(e,this._getFieldAlias(h.name,b,c));c=this._getHeatmapStops(d);c.length&&this._drawGradientRamp(e,c,!1,b)},_getHeatmapStops:function(b){var c=b.colorStops;b=b.colors;var d,e,g,f;c&&c[0]?(d=c.length-1,(b=c[0]&&null!=c[0].ratio)?(b=c[d])&&1!==b.ratio&&(c=c.slice(0),c.push({ratio:1,color:b.color}),d++):(e=c[0].value,g=c[d].value-e,c=l.map(c,function(b){return{color:b.color,ratio:(b.value-e)/g}}))):b&&b[0]&&(d=b.length-1,f=1/(b.length-1),c=l.map(b,
function(b,c){return{color:b,ratio:c*f}}));c=l.map(c,function(b,c){var e="";0===c?e="Low":c===d&&(e="High");return{color:b.color,label:e,offset:1-b.ratio}});return c.reverse()},_showDotDensityLegend:function(b,c,d,e){var g=d.legendOptions,h,k,m,q,r,p,t,v=this.dotDensitySwatchSize,w=Math.round(v/2);g&&(k=g.backgroundColor,m=g.outline,q=g.valueUnit,r=g.dotCoverage);r=(r||this.dotCoverage)/100;t=Math.round(v*v/Math.pow(d.dotSize,2)*r);e=u.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},
e);p=u.create("tbody",{},e);(b._hoverLabel||b._hoverLabels)&&this._createHoverAction(e,b,c);this._addSubHeader(p,E.substitute({value:d.dotValue,unit:q||""},this.NLS_dotValue));l.forEach(d.fields,function(e){e=f.mixin({},e);e.numPoints=t;h=new K(d._generateImageSrc(v,v,[e],{x:0,y:0},{x:v,y:v},k),m||d.outline,v,v);e=this.getField(b,e.name,c)||e;this._buildRow_Renderer(b,h,null,B.encode(this._getFieldAlias(e.name,b,c)),null,p,{type:"path",path:"M "+-w+","+-w+" L "+w+","+-w+" L "+w+","+w+" L "+-w+","+
w+" L "+-w+","+-w+" E"})},this)},_showSizeLegend:function(b,c,d,e,g,h,k,l,m){var q=e.legendOptions,q=q&&q.customValues;g=this._getSizeSymbol(d,g);if((!e.valueUnit||"unknown"===e.valueUnit)&&g&&(q||null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue||e.stops&&!(1>=e.stops.length))){m=u.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"+(m?"":" esriLegendSubFragment")},h);h=u.create("tbody",{},m);(b._hoverLabel||b._hoverLabels||l)&&this._createHoverAction(m,
b,c,l);(k||e.valueExpression||e.legendOptions&&e.legendOptions.title)&&this._addSubHeader(h,this._getRampTitle(e,b,c));k=(m=(l=e.field)&&!f.isFunction(l))&&"cluster_count"===l.toLowerCase();c=(c=m?b.isFeatureReductionActive&&b.isFeatureReductionActive()?b.getFeatureReductionField(l):this.getField(b,l,c):null)&&"esriFieldTypeDate"===c.type;var q=q||this._getDataValues(d,g,e,c,k),r,p=q.length-1;for(l=p;0<=l;l--)m=q[l],g=S.fromJson(g.toJson()),this._applySize(g,d,e,m),m=c?D.formatDate(m,D.timelineDateFormatOptions):
H.format(m),r="",l===p?r=this._specialChars.gt+" ":0===l&&(r=k&&1===q[l]?"":this._specialChars.lt+" "),r="\x3cspan class\x3d'esriLegendSizeRampLabel'\x3e"+B.encode(r+m)+"\x3c/span\x3e",this._buildRow_Renderer(b,g,null,r,null,h)}},_getSizeSymbol:function(b,c){var d,e;if("esri.renderer.SimpleRenderer"===b.declaredClass)d=b.symbol;else if("esri.renderer.VectorFieldRenderer"===b.declaredClass)d=b.defaultSymbol;else if("esri.renderer.UniqueValueRenderer"===b.declaredClass||"esri.renderer.ClassBreaksRenderer"===
b.declaredClass)d=b.infos[0].symbol,e=1<b.infos.length;if(d=d&&-1!==d.type.indexOf("fillsymbol")?null:d)if(d=S.fromJson(d.toJson()),c||e)-1!==d.type.indexOf("linesymbol")?d.setColor(new q(this.sizeRampDarkColor)):(d.setColor(new q(this.sizeRampLightColor)),d.setOutline&&(b=new R,b.setColor(new q(this.sizeRampDarkColor)),b.setWidth(1.5),d.setOutline(b)));return d},_getDataValues:function(b,c,d,e,g){if(g){var f;l.some([5,3,2],function(g){g=this._getDataValuesByCount(b,c,d,e,g);this._hasFractionalValues(g)||
(f=g);return!!f},this);return f}return this._getDataValuesByCount(b,c,d,e,5)},_getDataValuesByCount:function(b,c,d,e,g,f){g=null==g?5:g;f=null==f?20:f;var h=b.getSizeRangeAtScale(d,this.map.getScale());g=this._interpolateSizeRange(h,g);var k=this._getDataRange(d),m=l.map(g,function(b){return this._getDataValueFromSize(b,k,h)},this);if(!e){var q,m=H.round(m);for(e=1;e<m.length-1;e++)if(q=this._roundDataValue(b,c,d,m[e],m[e-1],f))m[e]=q[0],g[e]=q[1]}return m},_hasFractionalValues:function(b){return l.some(b,
function(b){return b!==Math.floor(b)})},_getDataRange:function(b){var c=b.stops;return c?{min:c[0].value,max:c[c.length-1].value}:{min:b.minDataValue,max:b.maxDataValue}},_interpolateSizeRange:function(b,c){var d=b.minSize;b=(b.maxSize-d)/(c-1);var e,g=[];for(e=0;e<c;e++)g.push(d+b*e);return g},_getDataValueFromSize:function(b,c,d){var e=d.minSize;d=d.maxSize;var g=c.min;c=c.max;return b<=e?g:b>=d?c:(b-e)/(d-e)*(c-g)+g},_roundDataValue:function(b,c,d,e,g,f){var h=this._getSize(c,b,d,e);g=this._getSize(c,
b,d,g);var k,l=H.getDigits(e),m=l.integer,l=l.fractional,q,r,p,u,t,v,w,x,N,y,A;0<e&&1>e&&(k=Math.pow(10,l),e*=k,m=H.getDigits(e).integer);for(--m;0<=m&&(q=Math.pow(10,m),l=Math.floor(e/q)*q,q*=Math.ceil(e/q),null!=k&&(l/=k,q/=k),r=(l+q)/2,r=H.round([l,r,q],{indexes:[1]})[1],p=this._getSize(c,b,d,l),u=this._getSize(c,b,d,q),t=this._getSize(c,b,d,r),v=H.getPctChange(h,p,g,null),w=H.getPctChange(h,u,g,null),x=H.getPctChange(h,t,g,null),N=v.prev<=f,y=w.prev<=f,N&&y&&(v.prev<=w.prev?(N=!0,y=!1):(y=!0,
N=!1)),N?A=[l,p]:y?A=[q,u]:x.prev<=f&&(A=[r,t]),!A);m--);return A},_applySize:function(b,c,d,e){var g=b.type;c=this._getSize(b,c,d,e);switch(g){case "simplemarkersymbol":b.setSize(c);break;case "picturemarkersymbol":g=b.width;d=b.height;b.setHeight(c);b.setWidth(g/d*c);break;case "simplelinesymbol":case "cartographiclinesymbol":b.setWidth(c);break;case "textsymbol":b.font&&b.font.setSize(c)}},_getSize:function(b,c,d,e){return c.getSize(e,{sizeInfo:d,scale:this.map.getScale(),shape:-1!==b.type.indexOf("markersymbol")?
b.style:null})},_buildRow_Renderer:function(b,c,d,e,g,f,h,k){var l=!!k,m=u.create("tr",{},f),q;if(this.alignRight){if(f=u.create("td",{align:this._isRightToLeft?"left":"right"},m),c||l)q=u.create("td",{align:this._isRightToLeft?"left":"right",width:35},m)}else{if(c||l)q=u.create("td",{width:35,align:"center"},m);f=u.create("td",{},m)}var r=m=30,p;if(c)if("simplemarkersymbol"==c.type)m=Math.min(Math.max(m,c.size+12),125),r=Math.min(Math.max(r,c.size+12),125);else if("picturemarkersymbol"==c.type)m=
Math.min(Math.max(m,c.width),125),r=Math.min(c.height||r,125);else if("textsymbol"==c.type){var t,v;c.text||(t=c.text,v=!0,c.setText(this.defaultText));m=Math.min(Math.max(m,c.getWidth()+12),125);r=Math.min(Math.max(r,c.getHeight()+12),125);v&&c.setText(t)}if(c||l)p=u.create("div",{style:"width:"+m+"px;height:"+r+"px;"},q);E.isDefined(e)&&"number"===typeof e&&(e=""+e);u.create("td",{innerHTML:e||"",align:this._align},u.create("tr",{},u.create("tbody",{},u.create("table",{width:"95%"},f))));if(c||
l)b=this._drawSymbol(p,c,d,m,r,g,b,h,k),this._surfaceItems.push(b)},_addSubHeader:function(b,c){b=u.create("tr",{},b);b=u.create("td",{align:this._align,colspan:2},b);u.create("td",{innerHTML:B.encode(c)||"",align:this._align},u.create("tr",{},u.create("tbody",{},u.create("table",{width:"95%"},b))))},_drawSymbol:function(b,c,d,g,h,k,l,m,r){var p=c&&S.fromJson(c.toJson()),u=l.opacity;c=!!r;if(p)if(d&&p.setColor(new q(d.toRgba())),"simplelinesymbol"===p.type||"cartographiclinesymbol"===p.type||"textsymbol"===
p.type){if(!p.color)return;d=p.color.toRgba();d[3]*=u;p.color.setColor(d)}else"simplemarkersymbol"===p.type||"simplefillsymbol"===p.type?(p.color&&(d=p.color.toRgba(),d[3]*=u,p.color.setColor(d)),p.outline&&p.outline.color&&(d=p.outline.color.toRgba(),d[3]*=u,p.outline.color.setColor(d))):"picturemarkersymbol"===p.type&&(b.style.opacity=u,b.style.filter="alpha(opacity\x3d("+100*u+"))");b=y.createSurface(b,g,h);9>e("ie")&&(d=b.getEventSource(),t.set(d,"position","relative"),t.set(d.parentNode,"position",
"relative"));k=c?r.shapeDescriptor:this._getDrawingToolShape(p,k)||S.getShapeDescriptors(p);var v,u=(d=k.defaultShape)&&"text"===d.type;try{u&&!d.text&&(d.text=this.defaultText),v=b.createShape(m||d).setFill(k.fill).setStroke(k.stroke),u&&v.setFont(k.font)}catch(Ca){b.clear();b.destroy();return}var w=v.getBoundingBox();m=w.width;k=w.height;var u=-(w.x+m/2),x=-(w.y+k/2);d=b.getDimensions();u={dx:u+d.width/2,dy:x+d.height/2};if(p&&"simplemarkersymbol"===p.type&&"path"===p.style)g=l._getScaleMatrix(w,
p.size),v.applyTransform(z.scaleAt(g.xx,g.yy,{x:d.width/2,y:d.height/2}));else if(m>g||k>h)l=m/g>k/h,g=((l?g:h)-5)/(l?m:k),f.mixin(u,{xx:g,yy:g});v.applyTransform(u);c&&v.applyTransform(z.rotategAt(r.rotation,m/2,k/2));return b},_getDrawingToolShape:function(b,c){switch(c?c.drawingTool||null:null){case "esriFeatureEditToolArrow":c={type:"path",path:"M 10,1 L 3,8 L 3,5 L -15,5 L -15,-2 L 3,-2 L 3,-5 L 10,1 Z"};break;case "esriFeatureEditToolTriangle":c={type:"path",path:"M -10,14 L 2,-10 L 14,14 L -10,14 Z"};
break;case "esriFeatureEditToolRectangle":c={type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"};break;case "esriFeatureEditToolCircle":c={type:"circle",cx:0,cy:0,r:10};break;case "esriFeatureEditToolEllipse":c={type:"ellipse",cx:0,cy:0,rx:10,ry:5};break;default:return null}return{defaultShape:c,fill:b.getFill(),stroke:b.getStroke()}},_drawRelationshipLegend:function(b,c){var d=c.focus,e=c.numClasses,g=ca[e],f=!!d,h=Math.sqrt(Math.pow(75,2)+Math.pow(75,2)),k={};c.uvInfos.forEach(function(b){k[b.value]=
{label:b.label,fill:this._getSymbolColor(b.symbol)}},this);c=[];for(var l=0;l<e;l++){for(var m=[],q=0;q<e;q++)m.push(k[g[l][q]].fill);c.push(m)}g=this._getRelationshipCornerLabels(d,k);b=this._drawRampLayout(b,g,h,f);b=y.createSurface(b,h,h);f||(b.rawNode.style.margin="-15px -15px -18px -15px");c=aa.create2DColorRamp({surface:b,colors:c,numClasses:e,size:75});e=(h-75)/2;h=(h-75)/2;c.applyTransform(z.translate(e,h));f&&c.applyTransform(z.rotategAt(this._getRotationAngleForFocus(d),37.5,37.5));c=b.createGroup();
g={width:1,color:"#555555"};l=b.defNode;this._createArrowMarker(l,"start");this._createArrowMarker(l,"end");l=c.createLine({x1:-10,y1:60,x2:-10,y2:15}).setStroke(g);g=c.createLine({x1:15,y1:85,x2:60,y2:85}).setStroke(g);this._setLineArrow(l.rawNode,"left",d);this._setLineArrow(g.rawNode,"right",d);c.applyTransform(z.translate(e,h));f&&c.applyTransform(z.rotategAt(-45,37.5,37.5));this._surfaceItems.push(b)},_drawRampLayout:function(b,c,d,e){var g=u.create("div",{style:{padding:"10px"}},b);b=d+"px";
d+="px";e?(e=u.create("div",{style:{display:"flex"}},g),u.create("div",{class:"esriLegendRelationshipLabel",style:{alignSelf:"center",maxWidth:b,textAlign:"right"},innerHTML:c.left},e),g=u.create("div",{style:{display:"flex",flexDirection:"column",textAlign:"center"}},e),u.create("div",{class:"esriLegendRelationshipLabel",style:{alignSelf:"center",maxWidth:b},innerHTML:c.right},e),e=u.create("div",{class:"esriLegendRelationshipLabel",style:{alignSelf:"center",maxWidth:b},innerHTML:c.top},g),e=u.create("div",
{style:{height:d,width:d}},g),g=u.create("div",{class:"esriLegendRelationshipLabel",style:{alignSelf:"center",maxWidth:b},innerHTML:c.bottom},g)):(g=u.create("div",{style:{display:"table",color:"#555555"}},g),e=u.create("div",{style:{display:"table-row"}},g),d=u.create("div",{style:{display:"table-row"}},g),g=u.create("div",{style:{display:"table-row"}},g),u.create("div",{class:"esriLegendRelationshipLabel",style:{display:"table-cell",maxWidth:b,textAlign:"right",verticalAlign:"bottom"},innerHTML:c.left},
e),u.create("div",{style:{display:"table-cell"}},e),u.create("div",{class:"esriLegendRelationshipLabel",style:{display:"table-cell",maxWidth:b,textAlign:"left",verticalAlign:"bottom"},innerHTML:c.top},e),u.create("div",{style:{display:"table-cell"}},d),e=u.create("div",{style:{display:"table-cell"}},d),u.create("div",{style:{display:"table-cell"}},d),u.create("div",{class:"esriLegendRelationshipLabel",style:{display:"table-cell",maxWidth:b,textAlign:"right",verticalAlign:"top"},innerHTML:c.bottom},
g),u.create("div",{style:{display:"table-cell"}},g),u.create("div",{class:"esriLegendRelationshipLabel",style:{display:"table-cell",maxWidth:b,textAlign:"left",verticalAlign:"top"},innerHTML:c.right},g));return e},_getSymbolColor:function(b){if(b)return"simplelinesymbol"===b.type||"simplemarkersymbol"===b.type&&(b.style===U.STYLE_X||b.style===U.STYLE_CROSS)?(b=b.getStroke())&&b.color:b.getFill()},_getRotationAngleForFocus:function(b){var c=fa[b];b&&null==c&&(c=fa.HH);return c},_setLineArrow:function(b,
c,d){var e=this.id+"_arrowStart",g=this.id+"_arrowEnd";c="left"===c;switch(d){case "HL":b.setAttribute(c?"marker-start":"marker-end","url(#"+(c?g:e)+")");break;case "LL":b.setAttribute("marker-start","url(#"+g+")");break;case "LH":b.setAttribute(c?"marker-end":"marker-start","url(#"+(c?e:g)+")");break;default:b.setAttribute("marker-end","url(#"+e+")")}},_createArrowMarker:function(b,c){var d="start"===c,e=this.id+(d?"_arrowStart":"_arrowEnd");c=d?"0,0 5,5 0,10":"5,0 0,5 5,10";var g=d?5:0,d=document.createElementNS("http://www.w3.org/2000/svg",
"marker");d.setAttribute("id",e);d.setAttribute("markerWidth","10");d.setAttribute("markerHeight","10");d.setAttribute("refX",g);d.setAttribute("refY","5");d.setAttribute("markerUnits","strokeWidth");d.setAttribute("orient","auto");e=document.createElementNS("http://www.w3.org/2000/svg","polyline");e.setAttribute("points",c);e.setAttribute("fill","none");e.setAttribute("stroke","#555555");e.setAttribute("stroke-width","1");d.appendChild(e);b.appendChild(d)},_getRelationshipCornerLabels:function(b,
c){var d=c.HH.label,e=c.LL.label,g=c.HL.label;c=c.LH.label;switch(b){case "HH":return{top:d,bottom:e,left:g,right:c};case "HL":return{top:g,bottom:c,left:e,right:d};case "LL":return{top:e,bottom:d,left:c,right:g};case "LH":return{top:c,bottom:g,left:d,right:e};default:return{top:d,bottom:e,left:g,right:c}}},_repaintItems:function(){l.forEach(this._surfaceItems,function(b){this._repaint(b)},this)},_repaint:function(b){if(b){b.getStroke&&b.setStroke&&b.setStroke(b.getStroke());try{b.getFill&&b.setFill&&
b.setFill(b.getFill())}catch(na){}b.children&&f.isArray(b.children)&&l.forEach(b.children,this._repaint,this)}},_createHoverAction:function(b,c,d,e){if(e=c._hoverLabel||c._hoverLabels&&c._hoverLabels[d.id]||e)e=B.encode(e),c.mouseMoveHandler=c.mouseMoveHandler||{},c.mouseMoveHandler[d.id]=k.connect(b,"onmousemove",f.hitch(this,function(b,c){this.mouseX=c.clientX;this.mouseY=c.clientY;this.hoverLabelShowing&&(this.hoverLabelShowing=!1,t.set(v.byId(this.id+"_hoverLabel"),"display","none"));setTimeout(f.hitch(this,
function(b,c,d){if(b==this.mouseX&&c==this.mouseY&&!this.hoverLabelShowing)if(this.hoverLabelShowing=!0,v.byId(this.id+"_hoverLabel")){var e=v.byId(this.id+"_hoverLabel");e.innerHTML="\x3cspan\x3e"+d+"\x3c/span\x3e";t.set(e,"top",c+"px");t.set(e,"left",b+15+"px");t.set(e,"display","")}else u.create("div",{innerHTML:"\x3cspan\x3e"+d+"\x3c/span\x3e",id:this.id+"_hoverLabel","class":"esriLegendHoverLabel",style:{top:c+"px",left:b+15+"px"}},document.body)},c.clientX,c.clientY,b),500)},e)),c.mouseOutHandler=
c.mouseOutHandler||{},c.mouseOutHandler[d.id]=k.connect(b,"onmouseout",f.hitch(this,function(b){this.mouseY=this.mouseX=-1;this.hoverLabelShowing&&(this.hoverLabelShowing=!1,t.set(v.byId(this.id+"_hoverLabel"),"display","none"))}))},_removeHoverHandlers:function(){var b;l.forEach(this.layers,function(c){if(c.mouseMoveHandler)for(b in c.mouseMoveHandler)k.disconnect(c.mouseMoveHandler[b]);if(c.mouseOutHandler)for(b in c.mouseOutHandler)k.disconnect(c.mouseOutHandler[b])})},_createDynamicLayers:function(b){var c=
[],d;l.forEach(b.dynamicLayerInfos||b.layerInfos,function(e){d={id:e.id};d.source=e.source&&e.source.toJson();var g;b.layerDefinitions&&b.layerDefinitions[e.id]&&(g=b.layerDefinitions[e.id]);g&&(d.definitionExpression=g);var f;b.layerDrawingOptions&&b.layerDrawingOptions[e.id]&&(f=b.layerDrawingOptions[e.id]);f&&(d.drawingInfo=f.toJson());d.minScale=e.minScale||0;d.maxScale=e.maxScale||0;c.push(d)});return c},_getTemplateFromTypes:function(b,c){var d;for(d=0;d<b.length;d++)if(b[d].id==c&&b[d].templates&&
0<b[d].templates.length)return b[d].templates[0];return null},_findParentGroup:function(b,c,d){var e,g=c.dynamicLayerInfos||c.layerInfos;for(e=0;e<g.length;e++)if(d==g[e].id){-1<g[e].parentLayerId&&(t.set(v.byId(this.id+"_"+b+"_"+g[e].parentLayerId+"_group"),"display","block"),this._findParentGroup(b,c,g[e].parentLayerId));break}},_addSubLayersToHide:function(b){function c(d,e){var g=b.layer.dynamicLayerInfos||b.layer.layerInfos,f,h;for(f=0;f<g.length;f++)if(g[f].id===d&&g[f].subLayerIds)for(h=0;h<
g[f].subLayerIds.length;h++){var k=g[f].subLayerIds[h];-1===l.indexOf(e,k)&&(e.push(k),c(k,e))}}b.layer.layerInfos&&l.forEach(this.hideLayersInLegend[b.layer.id],function(d){c(d,this.hideLayersInLegend[b.layer.id])},this)},_isLayerInScale:function(b,c,d){var e,g=!0;if(b.legendResponse&&b.legendResponse.layers)for(e=0;e<b.legendResponse.layers.length;e++){var f=b.legendResponse.layers[e];if(c.id==f.layerId){var h,k;!b.minScale&&0!==b.minScale||!b.maxScale&&0!==b.maxScale?(0==f.minScale&&b.tileInfo&&
(h=b.tileInfo.lods[0].scale),0==f.maxScale&&b.tileInfo&&(k=b.tileInfo.lods[b.tileInfo.lods.length-1].scale)):(h=Math.min(b.minScale,f.minScale)||b.minScale||f.minScale,k=Math.max(b.maxScale,f.maxScale));if(0<h&&h<d||k>d)g=!1;break}}else if(b.minScale||b.maxScale)if(b.minScale&&b.minScale<d||b.maxScale&&b.maxScale>d)g=!1;return g},_getServiceTitle:function(b){var c=b._titleForLegend;c||(c=b.url,b.url?-1<b.url.indexOf("/MapServer")?(c=b.url.substring(0,b.url.indexOf("/MapServer")),c=c.substring(c.lastIndexOf("/")+
1,c.length)):-1<b.url.indexOf("/ImageServer")?(c=b.url.substring(0,b.url.indexOf("/ImageServer")),c=c.substring(c.lastIndexOf("/")+1,c.length)):-1<b.url.indexOf("/FeatureServer")&&(c=b.url.substring(0,b.url.indexOf("/FeatureServer")),c=c.substring(c.lastIndexOf("/")+1,c.length)):c="",b.name&&(c=0<c.length?c+(" - "+b.name):b.name));"esri.layers.ArcGISImageServiceVectorLayer"===b.declaredClass&&b.vectorFieldPixelFilter&&(b=b.vectorFieldPixelFilter.outputUnit?this["NLS_"+b.vectorFieldPixelFilter.outputUnit]:
this["NLS_"+b.vectorFieldPixelFilter.inputUnit],E.isDefined(b)&&(c+=" ("+b+")"));return B.encode(c)},_getEffectiveScale:function(b,c){var d=c.minScale,e=c.maxScale;if(E.isDefined(c.parentLayerId)){b=b.layerInfos;c=c.parentLayerId;var g;for(g=b.length-1;0<=g;g--)if(b[g].id==c)if(0==d&&0<b[g].minScale?d=b[g].minScale:0<d&&0==b[g].minScale||0<d&&0<b[g].minScale&&(d=Math.min(d,b[g].minScale)),e=Math.max(e||0,b[g].maxScale||0),-1<b[g].parentLayerId)c=b[g].parentLayerId;else break}return{minScale:d,maxScale:e}},
_isSupportedLayerType:function(b){return!(!b||!("esri.layers.ArcGISDynamicMapServiceLayer"===b.declaredClass||"esri.layers.ArcGISImageServiceLayer"===b.declaredClass&&10.2<=b.version||"esri.layers.RasterXLayer"===b.declaredClass||"esri.layers.ArcGISImageServiceVectorLayer"===b.declaredClass||"esri.layers.ArcGISTiledMapServiceLayer"===b.declaredClass||"esri.layers.FeatureLayer"===b.declaredClass||"esri.layers.StreamLayer"===b.declaredClass||"esri.layers.KMLLayer"===b.declaredClass||"esri.layers.GeoRSSLayer"===
b.declaredClass||"esri.layers.WMSLayer"===b.declaredClass||"esri.layers.WFSLayer"===b.declaredClass||"esri.layers.CSVLayer"===b.declaredClass))},isHostedTileService:function(b){var c=/(https?:)?\/\/services.*\.arcgis\.com/i;return!("esri.layers.ArcGISTiledMapServiceLayer"!==b.declaredClass||!c.test(b.url))},getField:function(b,c,d){if(b.getField)return b.getField(c);if(d&&d.fields){var e;l.forEach(d.fields,function(b){b.name===c&&(e=b)});return e}return null}});f.mixin(pa,{ALIGN_LEFT:0,ALIGN_RIGHT:1});
e("extend-esri")&&f.setObject("dijit.Legend",pa,A);return pa})},"dojo/debounce":function(){define("dojo/debounce",[],function(){return function(m,p){var f;return function(){f&&clearTimeout(f);var l=this,k=arguments;f=setTimeout(function(){m.apply(l,k)},p)}}})},"esri/numberUtils":function(){define("esri/numberUtils",["dojo/has","dojo/number","dojo/i18n!dojo/cldr/nls/number","./kernel"],function(m,p,f,l){var k=function(f,g){return f-g},h={_reNumber:/^-?(\d+)(\.(\d+))?$/i,getDigits:function(f){var g=
String(f),e=g.match(h._reNumber);f={integer:0,fractional:0};e&&e[1]?(f.integer=e[1].split("").length,f.fractional=e[3]?e[3].split("").length:0):-1<g.toLowerCase().indexOf("e")&&(e=g.split("e"),g=e[0],e=e[1],g&&e&&(g=Number(g),e=Number(e),(f=0<e)||(e=Math.abs(e)),g=h.getDigits(g),f?(g.integer+=e,g.fractional=e>g.fractional?0:g.fractional-e):(g.fractional+=e,g.integer=e>g.integer?1:g.integer-e),f=g));return f},getFixedNumbers:function(f,g){var e;e=Number(f.toFixed(g));e<f?f=e+1/Math.pow(10,g):(f=e,
e-=1/Math.pow(10,g));e=Number(e.toFixed(g));f=Number(f.toFixed(g));return[e,f]},getPctChange:function(f,g,e,c){var b={prev:null,next:null},d;null!=e&&(d=f-e,b.prev=Math.floor(Math.abs(100*(g-e-d)/d)));null!=c&&(d=c-f,b.next=Math.floor(Math.abs(100*(c-g-d)/d)));return b},round:function(f,g){f=f.slice(0);var e,c,b,d,l,m,q,p,x=g&&null!=g.tolerance?g.tolerance:2,w=g&&g.indexes,y=g&&null!=g.strictBounds?g.strictBounds:!1;if(w)w.sort(k);else for(w=[],l=0;l<f.length;l++)w.push(l);for(l=0;l<w.length;l++)if(p=
w[l],g=f[p],e=0===p?null:f[p-1],c=p===f.length-1?null:f[p+1],b=h.getDigits(g),b=b.fractional){m=0;for(q=!1;m<=b&&!q;)d=h.getFixedNumbers(g,m),d=y&&0===l?d[1]:d[0],q=h.hasMinimalChange(g,d,e,c,x),m++;q&&(f[p]=d)}return f},hasMinimalChange:function(f,g,e,c,b){f=h.getPctChange(f,g,e,c);g=null==f.prev||f.prev<=b;e=null==f.next||f.next<=b;return g&&e||f.prev+f.next<=2*b},_reAllZeros:new RegExp("\\"+f.decimal+"0+$","g"),_reSomeZeros:/(\d)0*$/g,format:function(f,g){g=g||{places:20,round:-1};(f=p.format(f,
g))&&(f=f.replace(h._reSomeZeros,"$1").replace(h._reAllZeros,""));return f}};m("extend-esri")&&(l.numberUtils=h);return h})},"esri/renderers/utils":function(){define("esri/renderers/utils","dojo/_base/lang dojo/_base/array dojo/has dojo/date/locale ../kernel ../numberUtils ../Color dojo/i18n!dojo/cldr/nls/gregorian".split(" "),function(m,p,f,l,k,h,q,g){function e(b){return b&&p.map(b,function(b){return new q(b)})}function c(b,c,e){var g="";0===c?g=d.lt+" ":c===e&&(g=d.gt+" ");return g+b}var b={},
d={lte:"\x3c\x3d",gte:"\x3e\x3d",lt:"\x3c",gt:"\x3e",pct:"%"},r={millisecond:0,second:1,minute:2,hour:3,day:4,month:5,year:6},v={millisecond:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"medium"}},second:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"medium"}},minute:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"short"}},hour:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"short"}},day:{selector:"date",dateOptions:{formatLength:"long"}},
month:{selector:"date",dateOptions:{formatLength:"long"}},year:{selector:"date",dateOptions:{selector:"year"}}},u={formatLength:"short",fullYear:!0},t={formatLength:"short"};m.mixin(b,{timelineDateFormatOptions:{selector:"date",dateOptions:{formatLength:"short",fullYear:!0}},formatDate:function(b,c){var d=[];null==b||b instanceof Date||(b=new Date(b));c=c||{};c=m.mixin({},c);var e=c.selector?c.selector.toLowerCase():null,f=!e||-1<e.indexOf("time"),e=!e||-1<e.indexOf("date");f&&(c.timeOptions=c.timeOptions||
t,c.timeOptions&&(c.timeOptions=m.mixin({},c.timeOptions),c.timeOptions.selector=c.timeOptions.selector||"time",d.push(c.timeOptions)));e&&(c.dateOptions=c.dateOptions||u,c.dateOptions&&(c.dateOptions=m.mixin({},c.dateOptions),c.dateOptions.selector=c.dateOptions.selector||"date",d.push(c.dateOptions)));d&&d.length?(d=p.map(d,function(c){return l.format(b,c)}),c=1==d.length?d[0]:g["dateTimeFormat-medium"].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(b,c){return d[c]})):c=l.format(b);return c},
createColorStops:function(d){var e=d.values,g=d.colors,f=d.labelIndexes,k=d.isDate,l=d.dateFormatOptions;d=[];return d=p.map(e,function(d,m){var q=null;if(!f||-1<p.indexOf(f,m)){var r;(r=k?b.formatDate(d,l):h.format(d))&&(q=c(r,m,e.length-1))}return{value:d,color:g[m],label:q}})},updateColorStops:function(d){var e=d.stops,g=d.changes,f=d.isDate,k=d.dateFormatOptions,l=[],m,q=p.map(e,function(b){return b.value});p.forEach(g,function(b){l.push(b.index);q[b.index]=b.value});m=h.round(q,{indexes:l});
p.forEach(e,function(d,g){d.value=q[g];if(null!=d.label){var l,r=null;(l=f?b.formatDate(m[g],k):h.format(m[g]))&&(r=c(l,g,e.length-1));d.label=r}})},createClassBreakLabel:function(b){var c=b.minValue,e=b.maxValue,g=b.isFirstBreak?"":d.gt+" ";b="percent-of-total"===b.normalizationType?d.pct:"";c=null==c?"":h.format(c);e=null==e?"":h.format(e);return g+c+b+" \u2013 "+e+b},setLabelsForClassBreaks:function(c){var d=c.classBreaks,e=c.classificationMethod,g=c.normalizationType,f=[];d&&d.length&&("standard-deviation"===
e||(c.round?(f.push(d[0].minValue),p.forEach(d,function(b){f.push(b.maxValue)}),f=h.round(f),p.forEach(d,function(c,d){c.label=b.createClassBreakLabel({minValue:0===d?f[0]:f[d],maxValue:f[d+1],isFirstBreak:0===d,normalizationType:g})})):p.forEach(d,function(c,d){c.label=b.createClassBreakLabel({minValue:c.minValue,maxValue:c.maxValue,isFirstBreak:0===d,normalizationType:g})})))},updateClassBreak:function(c){var d=c.classBreaks,e=c.normalizationType,g=c.change,f=g.index,g=g.value,h=-1,k=-1,l=d.length;
"standard-deviation"===c.classificationMethod||(0===f?h=f:f===l?k=f-1:(k=f-1,h=f),-1<h&&h<l&&(c=d[h],c.minValue=g,c.label=b.createClassBreakLabel({minValue:c.minValue,maxValue:c.maxValue,isFirstBreak:0===h,normalizationType:e})),-1<k&&k<l&&(c=d[k],c.maxValue=g,c.label=b.createClassBreakLabel({minValue:c.minValue,maxValue:c.maxValue,isFirstBreak:0===k,normalizationType:e})))},calculateDateFormatInterval:function(b){var c,d,e=b.length,g,f,h,k,l,m,q=Infinity,u;b=p.map(b,function(b){return new Date(b)});
for(c=0;c<e-1;c++){g=b[c];h=[];l=Infinity;m="";for(d=c+1;d<e;d++)f=b[d],f=g.getFullYear()!==f.getFullYear()&&"year"||g.getMonth()!==f.getMonth()&&"month"||g.getDate()!==f.getDate()&&"day"||g.getHours()!==f.getHours()&&"hour"||g.getMinutes()!==f.getMinutes()&&"minute"||g.getSeconds()!==f.getSeconds()&&"second"||"millisecond",k=r[f],k<l&&(l=k,m=f),h.push(f);l<q&&(q=l,u=m)}return u},createUniqueValueLabel:function(c){var d=c.value,e=c.fieldInfo,g=c.domain;c=c.dateFormatInterval;var f=String(d);(g=g&&
g.codedValues?g.getName(d):null)?f=g:"number"===typeof d&&(f=e&&"esriFieldTypeDate"===e.type?b.formatDate(d,c&&v[c]):h.format(d));return f},cloneColorInfo:function(b){var c;b&&(c=m.mixin({},b),c.colors=e(c.colors),c.stops=c.stops&&p.map(c.stops,function(b){b=m.mixin({},b);b.color&&(b.color=new q(b.color));return b}),c.legendOptions&&(c.legendOptions=m.mixin({},c.legendOptions)));return c},cloneOpacityInfo:function(b){var c;if(b){c=m.mixin({},b);if(b=c.opacityValues)c.opacityValues=b.slice(0);if(b=
c.stops)c.stops=p.map(b,function(b){return m.mixin({},b)});if(b=c.legendOptions)c.legendOptions=m.mixin({},b)}return c},cloneSizeInfo:function(c){var d;c&&(d=m.mixin({},c),d.stops&&(d.stops=p.map(d.stops,function(b){return m.mixin({},b)})),(c=d.minSize)&&"object"===typeof c&&(d.minSize=b.cloneSizeInfo(c)),(c=d.maxSize)&&"object"===typeof c&&(d.maxSize=b.cloneSizeInfo(c)),c=d.legendOptions)&&(d.legendOptions=m.mixin({},c),c=c.customValues)&&(d.legendOptions.customValues=c.slice(0));return d},getClassCodesForRelationship:function(){return m.clone({2:["L",
"H"],3:["L","M","H"],4:["L","M1","M2","H"]})},getClassValuesForRelationship:function(){return m.clone({2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]})}});f("extend-esri")&&m.setObject("renderer.utils",b,k);return b})},"esri/layers/ArcGISDynamicMapServiceLayer":function(){define("esri/layers/ArcGISDynamicMapServiceLayer","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/sniff dojo/io-query ../kernel ../config ../lang ../request ../urlUtils ../layerUtils ../geometry/scaleUtils ./DynamicMapServiceLayer ./ArcGISMapServiceLayer ./TimeInfo ./LayerTimeOptions ./ImageParameters ./DynamicLayerInfo ./LayerMapSource".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x,w,y,z){m=m([v,u],{declaredClass:"esri.layers.ArcGISDynamicMapServiceLayer",_eventMap:{"visible-layers-change":["visibleLayers"]},constructor:function(b,c,d){b=c&&c.imageParameters;var e=p.hitch;if(b){var g=b.layerDefinitions;g&&this.setLayerDefinitions(g);b.layerOption===w.LAYER_OPTION_SHOW&&(this.visibleLayers=[].concat(b.layerIds),this.onVisibleLayersChange(this.visibleLayers))}this._setIsPNG32=e(this,this._setIsPNG32);this.dpi=b&&b.dpi||96;this.imageFormat=
b&&b.format||"png8";this.imageTransparency=b&&!1===b.transparent?!1:!0;this._setIsPNG32();this.gdbVersion=c&&c.gdbVersion;this._params.gdbVersion=this.gdbVersion;g=b&&b.layerDefinitions;p.mixin(this._params,this._url.query,{dpi:this.dpi,transparent:this.imageTransparency,format:this.imageFormat},b?b.toJson():{});g&&(this._params.layerDefs=g);this.getImageUrl=e(this,this.getImageUrl);this._initLayer=e(this,this._initLayer);this._load=e(this,this._load);this.useMapImage=c?c.useMapImage:!1;this._loadCallback=
c&&c.loadCallback;(c=c&&c.resourceInfo)?this._initLayer(c):void 0!==d&&!1!==d||this._load();this.registerConnectEvents()},disableClientCaching:!1,layerDefinitions:null,_initLayer:function(b,c){this.inherited(arguments);b.timeInfo&&(this.timeInfo=new t(b.timeInfo));this.loaded=!0;this.onLoad(this);var d=this._loadCallback;d&&(delete this._loadCallback,d(this))},getImageUrl:function(e,f,k,m){var q=this._url.path+"/export",r=this._params,u=r.token=this._getToken(),t=e.spatialReference.wkid||l.toJson(e.spatialReference.toJson()),
v=this._errorHandler;delete r._ts;p.mixin(r,{bbox:e.xmin+","+e.ymin+","+e.xmax+","+e.ymax,bboxSR:t,imageSR:t,size:f+","+k},this.disableClientCaching?{_ts:(new Date).getTime()}:{});r.layerDefs&&(e=d._serializeLayerDefinitions(r.layerDefs,10.5<=this.version),r=p.mixin({},r),delete r.layerDefs,r.layerDefs=e);e=b.addProxy(b.normalize(q)+"?"+h.objectToQuery(p.mixin({},r,{f:"image"})));e.length>g.defaults.io.postLength||this.useMapImage?this._jsonRequest=c({url:q,content:p.mixin(r,{f:"json"}),callbackParamName:"callback",
load:function(c){c.imageData?c="data:"+(c.contentType||"image")+";base64,"+c.imageData:(c=c.href,u&&(c+=-1===c.indexOf("?")?"?token\x3d"+u:"\x26token\x3d"+u),c=b.addProxy(c));m(c)},error:v}):m(e)},_setIsPNG32:function(){var b=this.imageFormat.toLowerCase(),c=k("ie");this.isPNG32=c&&6===c&&("png32"===b||"png24"===b)&&this.imageTransparency},_setTime:function(b){var c=this.timeInfo;b=this._params.time=b?b.toJson().join(","):null;if(10.02>this.version&&c)if(b)this._params.layerTimeOptions=d._serializeTimeOptions(this.layerTimeOptions);
else{var e=this.layerInfos;if(e){var g=this.layerTimeOptions,h=g?g.slice(0):[],k=[];f.forEach(e,function(b){b.subLayerIds||k.push(b.id)});k.length&&(f.forEach(k,function(b){if(!h[b]){var c=new x;c.useTime=!1;h[b]=c}}),this._params.layerTimeOptions=d._serializeTimeOptions(h,k))}}10.02<=this.version&&c&&!b&&!c.hasLiveData&&(this._params.time="null,null")},setDPI:function(b,c){this.dpi=this._params.dpi=b;c||this.refresh(!0)},setImageFormat:function(b,c){this.imageFormat=this._params.format=b;this._setIsPNG32();
c||this.refresh(!0)},setImageTransparency:function(b,c){this.imageTransparency=this._params.transparent=b;this._setIsPNG32();c||this.refresh(!0)},setVisibleLayers:function(b,c){this.visibleLayers=b;this._params.layers=w.LAYER_OPTION_SHOW+":"+(b.length?b.join():"-1");this._updateDynamicLayers();c||this.refresh(!0);this.onVisibleLayersChange(this.visibleLayers)},onVisibleLayersChange:function(){},setDefaultVisibleLayers:function(b){this.visibleLayers=this._defaultVisibleLayers;this._params.layers=null;
this._updateDynamicLayers();b||this.refresh(!0);this.onVisibleLayersChange(this.visibleLayers)},setLayerDefinitions:function(b,c){this.layerDefinitions=b;this._params.layerDefs=b;this._updateDynamicLayers();c||this.refresh(!0)},setDefaultLayerDefinitions:function(b){this.layerDefinitions=this._params.layerDefs=null;this._updateDynamicLayers();b||this.refresh(!0)},setDisableClientCaching:function(b){this.disableClientCaching=b},setLayerTimeOptions:function(b,c){this.layerTimeOptions=b;this._params.layerTimeOptions=
d._serializeTimeOptions(b);this._updateDynamicLayers();c||this.refresh(!0)},refresh:function(b){if(b)this.inherited(arguments);else{var c=this.disableClientCaching;this.disableClientCaching=!0;this.inherited(arguments);this.disableClientCaching=c}},setLayerDrawingOptions:function(b,c){this.layerDrawingOptions=b;this._updateDynamicLayers();c||this.refresh(!0)},setDynamicLayerInfos:function(b,c){b&&0<b.length?(this.dynamicLayerInfos=b,this.visibleLayers=d._getDefaultVisibleLayers(b),this.onVisibleLayersChange(this.visibleLayers)):
this.dynamicLayerInfos=this.layerDrawingOptions=null;this._updateDynamicLayers();c||this.refresh(!0)},createDynamicLayerInfosFromLayerInfos:function(){var b=[],c;f.forEach(this.layerInfos,function(d){c=new y(d.toJson());c.source=new z({mapLayerId:d.id});b.push(c)});return b},_onDynamicLayersChange:function(){},_updateDynamicLayers:function(){if(this.dynamicLayerInfos&&0<this.dynamicLayerInfos.length||this.layerDrawingOptions&&0<this.layerDrawingOptions.length){this.dynamicLayerInfos&&0!==this.dynamicLayerInfos.length||
(this.dynamicLayerInfos=this.createDynamicLayerInfosFromLayerInfos());var b;b=this._map&&r.getScale(this._map);b=this._getDynLayerObjs(b);b=l.toJson(b);this._params.dynamicLayers&&this._params.dynamicLayers.length===b.length&&this._params.dynamicLayers===b||(this._params.dynamicLayers=b,this._onDynamicLayersChange(this._params.dynamicLayers))}else this._params.dynamicLayers?(this._params.dynamicLayers=null,this._onDynamicLayersChange(null)):this._params.dynamicLayers=null},_getDynLayerObjs:function(b){var c=
this.dynamicLayerInfos,e=[],g=this.visibleLayers,h=b?d._getLayersForScale(b,c):g;f.forEach(c,function(b){if(!b.subLayerIds){var c,d=b.id;if(-1!==f.indexOf(g,d)&&-1!==f.indexOf(h,d)){c={id:d,name:b.name};c.source=b.source&&b.source.toJson();var k;this.layerDefinitions&&this.layerDefinitions[d]&&(k=this.layerDefinitions[d]);k&&(c.definitionExpression=k);var l;this.layerDrawingOptions&&this.layerDrawingOptions[d]&&(l=this.layerDrawingOptions[d]);l&&(k=l.toJson(),this._fixMarkerColor(k.renderer),c.drawingInfo=
k);var m;this.layerTimeOptions&&this.layerTimeOptions[d]&&(m=this.layerTimeOptions[d]);m&&(c.layerTimeOptions=m.toJson());c.minScale=b.minScale||0;c.maxScale=b.maxScale||0;e.push(c)}}},this);return e},_fixMarkerColor:function(b){f.forEach(this._getAllSimpleMarkerSymbols(b),function(b){if(!b.color){var c=[0,0,0,0],d=b.outline&&b.outline.color;"esriSMSX"!==b.style&&"esriSMSCross"!==b.style||!d||(c=d.slice(0));b.color=c}})},_getAllSimpleMarkerSymbols:function(b){return f.filter(this._getAllSymbols(b),
function(b){return"esriSMS"===b.type})},_getAllSymbols:function(b){var c=[];b&&(c.push(b.symbol),c.push(b.defaultSymbol),f.forEach(b.uniqueValueInfos||b.classBreakInfos,function(b){c.push(b.symbol)}),c=f.filter(c,e.isDefined));return c},_onExtentChangeHandler:function(b,c,d){d&&this._updateDynamicLayers();this.inherited(arguments)},_setMap:function(b,c,d){this._map=b;this._updateDynamicLayers();return this.inherited(arguments)},onGDBVersionChange:function(){},setGDBVersion:function(b,c){this.gdbVersion=
b;this._params.gdbVersion=b;this.onGDBVersionChange();c||this.refresh(!0)},exportMapImage:function(b,c){var e=p.hitch(this,function(){var e=g.defaults.map,f=b&&b.layerDefinitions;b=b?b.toJson(this.normalization):{};f&&(b.layerDefs=f);b=p.mixin({size:e.width+","+e.height},this._params,b,{f:"json"});delete b._ts;b.layerDefs&&(e=d._serializeLayerDefinitions(b.layerDefs,10.5<=this.version),delete b.layerDefs,b.layerDefs=e);this._exportMapImage(this._url.path+"/export",b,c)});if(this.loaded)e();else this.on("load",
e)}});k("extend-esri")&&p.setObject("layers.ArcGISDynamicMapServiceLayer",m,q);return m})},"esri/layers/DynamicMapServiceLayer":function(){define("esri/layers/DynamicMapServiceLayer","dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/dom-construct dojo/dom-style dojox/gfx/matrix ../kernel ../config ../sniff ../request ../domUtils ./layer ./MapImage".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d,r){var v=g.defaults.map.zoomDuration;m=m(d,{declaredClass:"esri.layers.DynamicMapServiceLayer",_eventMap:{"map-image-export":["mapImage"]},
constructor:function(b,c){this.useMapTime=c&&c.hasOwnProperty("useMapTime")?!!c.useMapTime:!0;this.extentProcessor=c&&c.extentProcessor;b=f.hitch;this._exportMapImageHandler=b(this,this._exportMapImageHandler);this._imgSrcFunc=b(this,this._imgSrcFunc);this._divAlphaImageFunc=b(this,this._divAlphaImageFunc);this._tileLoadHandler=b(this,this._tileLoadHandler);this._tileErrorHandler=b(this,this._tileErrorHandler);this.registerConnectEvents()},opacity:1,isPNG32:!1,_setMap:function(b,c,d){this.inherited(arguments);
this._map=b;var g=this._div=l.create("div",null,c),f=q._css.names,h={position:"absolute",width:b.width+"px",height:b.height+"px",overflow:"visible",opacity:this.opacity},m=e("ie"),r=p.connect,u=b.__visibleDelta;8===m&&delete h.opacity;"css-transforms"===b.navigationMode?(this._isChildLayer||(h[f.transform]=q._css.translate(u.x,u.y),k.set(g,h)),this._left=u.x,this._top=u.y):(h.left="0px",h.top="0px",k.set(g,h),this._left=this._top=0);k.set(g,h);this._onResizeHandler_connect=r(b,"onResize",this,"_onResizeHandler");
this._opacityChangeHandler_connect=r(this,"onOpacityChange",this,"_opacityChangeHandler");this._img_loading=null;this._dragOrigin={x:0,y:0};this.evaluateSuspension();if(this.suspended&&!b.loaded)var t=p.connect(b,"onLoad",this,function(){p.disconnect(t);t=null;this.evaluateSuspension()});this.extentProcessor&&(this._panEndEvalHandle=p.connect(b,"onPanEnd",this,this.evaluateSuspension),this._zoomEndEvalHandle=p.connect(b,"onZoomEnd",this,this.evaluateSuspension));return g},_unsetMap:function(b,c){this._img&&
this._clearEventListeners(this._img);this._img_loading&&this._clearEventListeners(this._img_loading);l.destroy(this._div);this._map=this._div=this._img=this._img_loading=null;var d=p.disconnect;d(this._onResizeHandler_connect);d(this._opacityChangeHandler_connect);d(this._panEndEvalHandle);d(this._zoomEndEvalHandle);this._panEndEvalHandle=this._zoomEndEvalHandle=this._onResizeHandler_connect=this._opacityChangeHandler_connect=null;this._fireUpdateEnd();this._toggleTime();clearTimeout(this._wakeTimer);
this._wakeTimer=null;this._disableDrawConnectors();this.inherited(arguments)},_onResizeHandler:function(b,c,d){k.set(this._div,{width:c+"px",height:d+"px"});this._onExtentChangeHandler(b)},onSuspend:function(){this.inherited(arguments);this._fireUpdateEnd();this._toggleTime();b.hide(this._div);clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors()},onResume:function(){this.inherited(arguments);var b=this._map;this._toggleTime();"css-transforms"===b.navigationMode&&(b=b.__visibleDelta,
this._left=b.x,this._top=b.y,this._isChildLayer||k.set(this._div,q._css.names.transform,q._css.translate(this._left,this._top)));this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(f.hitch(this,function(){this.suspended||this._onExtentChangeHandler(this._map.extent,null,!0)}),0)},canResume:function(){var b=this.inherited(arguments);if(b){var c=this._map.extent;this.extentProcessor&&c&&(b=!!this.extentProcessor({layer:this,extent:c,width:this._map.width}).extent)}return b},_enableDrawConnectors:function(){var b=
p.connect,c=this._map;c&&(this._onPanHandler_connect=b(c,"onPan",this,"_onPanHandler"),this._onExtentChangeHandler_connect=b(c,"onExtentChange",this,"_onExtentChangeHandler"),"css-transforms"===c.navigationMode?this._onScaleHandler_connect=b(c,"onScale",this,this._onScaleHandler):this._onZoomHandler_connect=b(c,"onZoom",this,"_onZoomHandler"))},_disableDrawConnectors:function(){var b=p.disconnect;b(this._onPanHandler_connect);b(this._onExtentChangeHandler_connect);b(this._onZoomHandler_connect);b(this._onScaleHandler_connect);
this._onPanHandler_connect=this._onExtentChangeHandler_connect=this._onZoomHandler_connect=this._onScaleHandler_connect=null},_toggleTime:function(){var b=this._map;this.timeInfo&&this.useMapTime&&b&&!this.suspended?(this._timeConnect||(this._timeConnect=p.connect(b,"onTimeExtentChange",this,this._onTimeExtentChangeHandler)),this._setTime(b.timeExtent)):(p.disconnect(this._timeConnect),this._timeConnect=null,this._setTime(null))},_setTime:function(b){this._params&&(this._params.time=b?b.toJson().join(","):
null)},_onPanHandler:function(b,c){this._panDx=c.x;this._panDy=c.y;b=this._dragOrigin;var d=this._map.__visibleDelta,e=this._img;e&&("css-transforms"===this._map.navigationMode?(this._left=d.x+c.x,this._top=d.y+c.y,this._isChildLayer||k.set(this._div,q._css.names.transform,q._css.translate(this._left,this._top))):k.set(e,{left:b.x+c.x+"px",top:b.y+c.y+"px"}))},_onExtentChangeHandler:function(b,c,d){if(!this.suspended){clearTimeout(this._wakeTimer);this._wakeTimer=null;var g=this._map,f=this._img,
m=f&&f.style,r=this._dragOrigin;!c||d||!f||c.x===this._panDx&&c.y===this._panDy||("css-transforms"===g.navigationMode?(c=g.__visibleDelta,this._left=c.x,this._top=c.y,this._isChildLayer||k.set(this._div,q._css.names.transform,q._css.translate(this._left,this._top))):k.set(f,{left:r.x+c.x+"px",top:r.y+c.y+"px"}));f?(r.x=parseInt(m.left,10),r.y=parseInt(m.top,10)):r.x=r.y=0;"css-transforms"===g.navigationMode&&d&&f&&(k.set(f,q._css.names.transition,"none"),f._multiply=f._multiply?h.multiply(f._matrix,
f._multiply):f._matrix);this._fireUpdateStart();if(d=this._img_loading)if(this._clearEventListeners(d),l.destroy(d),this._img_loading=null,d=this._jsonRequest){try{d.cancel()}catch(G){}this._jsonRequest=null}var u=g.width;d=g.height;c=u;var t=0;10<=this.version&&g.wrapAround180&&(b=b._normalize(!0));this.extentProcessor&&(t=this.extentProcessor({layer:this,extent:b,width:c}),b=t.extent,c=t.width,t=t.marginLeft||0);if(this.isPNG32)f=this._img_loading=l.create("div"),f.id=g.id+"_"+this.id+"_"+(new Date).getTime(),
k.set(f,{position:"absolute",left:"0px",top:"0px",width:c+"px",height:d+"px"}),g=f.appendChild(l.create("div")),k.set(g,{opacity:0,width:c+"px",height:d+"px"}),this.getImageUrl(b,c,d,this._divAlphaImageFunc),f=null;else{var x=this._img_loading=l.create("img"),E=q._css.names,H=e("ie"),D={position:"absolute",width:c+"px",height:d+"px"};x.setAttribute("decoding","sync");8===H&&(D.opacity=this.opacity);null!=t&&0!==t&&(D.marginLeft=t+"px");"css-transforms"===g.navigationMode?(D[E.transform]=q._css.translate(-this._left,
-this._top),x._tdx=-this._left,x._tdy=-this._top,D[E.transition]=E.transformName+" "+v+"ms ease",this.extentProcessor&&(D[E.origin]=u/2-t+"px "+d/2+"px")):(D.left="0px",D.top="0px");x.id=g.id+"_"+this.id+"_"+(new Date).getTime();k.set(x,D);x._onload_connect=p.connect(x,"onload",this,"_onLoadHandler");x._onerror_connect=p.connect(x,"onerror",this,"_onErrorHandler");x._onabort_connect=p.connect(x,"onabort",this,"_onErrorHandler");this._startRect={left:r.x,top:r.y,width:f?parseInt(m.width,10):c,height:f?
parseInt(m.height,10):d,marginLeft:f?parseInt(m.marginLeft||"0",10):t,zoom:m&&m.zoom?parseFloat(m.zoom):1};this.getImageUrl(b,c,d,this._imgSrcFunc);x=null}}},_onTimeExtentChangeHandler:function(b){this.suspended||(this._setTime(b),this.refresh(!0))},getImageUrl:function(b,c,d,e){},_imgSrcFunc:function(b){this._img_loading.src=b},_divAlphaImageFunc:function(b){k.set(this._img_loading,"filter","progid:DXImageTransform.Microsoft.AlphaImageLoader(src\x3d'"+b+"', sizingMethod\x3d'scale')");this._onLoadHandler({currentTarget:this._img_loading})},
_onLoadHandler:function(c){c=c.currentTarget;var d=this._map;this._clearEventListeners(c);!d||d.__panning||d.__zooming?l.destroy(c):(this._img&&this._div.removeChild(this._img),this._img=c,d=c.style,this._startRect={left:0,top:0,width:parseInt(d.width,10),height:parseInt(d.height,10),marginLeft:parseInt(d.marginLeft||"0",10),zoom:1},this._div.appendChild(c),this.suspended||b.show(this._div),this._img_loading=null,c=this._dragOrigin,c.x=c.y=0,this.onUpdate());this._fireUpdateEnd()},_onErrorHandler:function(b){b=
b.currentTarget;k.set(b,"visibility","hidden");this._clearEventListeners(b);b=Error("Unable to load image: "+b.src);this.onError(b);this._fireUpdateEnd(b)},_clearEventListeners:function(b){p.disconnect(b._onload_connect);p.disconnect(b._onerror_connect);p.disconnect(b._onabort_connect);b._onload_connect=b._onerror_connect=b._onabort_connect=null},setUseMapTime:function(b,c){this.useMapTime=b;this._toggleTime();c||this.refresh(!0)},refresh:function(){this._map&&this._onExtentChangeHandler(this._map.extent)},
_onScaleHandler:function(b,c){var d={},e=q._css.names,g=this._img;if(g){k.set(g,e.transition,c?"none":e.transformName+" "+v+"ms ease");g._matrix=b;b=g._multiply?h.multiply(b,g._multiply):b;if(g._tdx||g._tdy)b=h.multiply(b,{xx:1,xy:0,yx:0,yy:1,dx:g._tdx,dy:g._tdy});d[e.transform]=q._css.matrix(b);k.set(g,d)}},_onZoomHandler:function(b,c,d){b=this._startRect;var g=b.width*c,f=b.height*c,h=b.marginLeft*c,l=this._img,m=e("ie");l&&(m&&8>m?k.set(l,{left:b.left-(g-b.width)*(d.x-b.left)/b.width+"px",top:b.top-
(f-b.height)*(d.y-b.top)/b.height+"px",zoom:c*b.zoom}):k.set(l,{left:b.left-(g-b.width)*(d.x-b.left)/b.width+"px",top:b.top-(f-b.height)*(d.y-b.top)/b.height+"px",width:g+"px",height:f+"px"}),null!=h&&0!==h&&k.set(l,{marginLeft:h+"px"}))},_exportMapImage:function(b,d,e){var f=this._exportMapImageHandler;d.token=this._getToken();c({url:b,content:d,callbackParamName:"callback",load:function(b,c){f(b,c,e)},error:g.defaults.io.errorHandler})},_exportMapImageHandler:function(b,c,d){b=new r(b);this.onMapImageExport(b);
d&&d(b)},onMapImageExport:function(){},setOpacity:function(b){if(this.opacity!=b)this.onOpacityChange(this.opacity=b)},onOpacityChange:function(){},_opacityChangeHandler:function(b){var c=8===e("ie")?this._img:this._div;k.set(c,"opacity",b)}});e("extend-esri")&&f.setObject("layers.DynamicMapServiceLayer",m,q);return m})},"esri/layers/ImageParameters":function(){define("esri/layers/ImageParameters","dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../lang ../layerUtils".split(" "),
function(m,p,f,l,k,h,q,g){p=p(null,{declaredClass:"esri.layers.ImageParameters",constructor:function(){this.layerDefinitions=[]},bbox:null,extent:null,width:null,height:null,dpi:null,format:null,imageSpatialReference:null,layerOption:null,layerIds:null,transparent:null,timeExtent:null,layerTimeOptions:null,toJson:function(e){this.bbox&&m.deprecated(this.declaredClass+" : Property 'bbox' deprecated. Use property 'extent'.");var c=this.bbox||this.extent,c=c&&e&&c._normalize(!0);e=this.layerOption;var b=
c?c.spatialReference.wkid||l.toJson(c.spatialReference.toJson()):null,d=this.imageSpatialReference,c={dpi:this.dpi,format:this.format,transparent:this.transparent,size:null!==this.width&&null!==this.height?this.width+","+this.height:null,bbox:c?c.xmin+","+c.ymin+","+c.xmax+","+c.ymax:null,bboxSR:b,layers:e?e+":"+this.layerIds.join(","):null,imageSR:d?d.wkid||l.toJson(d.toJson()):b};c.layerDefs=g._serializeLayerDefinitions(this.layerDefinitions);e=this.timeExtent;c.time=e?e.toJson().join(","):null;
c.layerTimeOptions=g._serializeTimeOptions(this.layerTimeOptions);return q.filter(c,function(b){if(null!==b)return!0})}});f.mixin(p,{LAYER_OPTION_SHOW:"show",LAYER_OPTION_HIDE:"hide",LAYER_OPTION_INCLUDE:"include",LAYER_OPTION_EXCLUDE:"exclude"});k("extend-esri")&&f.setObject("layers.ImageParameters",p,h);return p})},"esri/layers/DynamicLayerInfo":function(){define("esri/layers/DynamicLayerInfo","dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerInfo ./LayerMapSource ./LayerDataSource".split(" "),
function(m,p,f,l,k,h,q,g){m=m(h,{declaredClass:"esri.layers.DynamicLayerInfo",defaultVisibility:!0,parentLayerId:-1,maxScale:0,minScale:0,constructor:function(e){e&&(e.source?e="mapLayer"===e.source.type?new q(e.source):new g(e.source):(e=new q,e.mapLayerId=this.id),this.source=e)},toJson:function(){var e=this.inherited(arguments);e.source=this.source&&this.source.toJson();return k.fixJson(e)}});f("extend-esri")&&p.setObject("layers.DynamicLayerInfo",m,l);return m})},"esri/layers/LayerMapSource":function(){define("esri/layers/LayerMapSource",
"dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerSource".split(" "),function(m,p,f,l,k,h){m=m(h,{declaredClass:"esri.layers.LayerMapSource",type:"mapLayer",toJson:function(){return k.fixJson({type:"mapLayer",mapLayerId:this.mapLayerId,gdbVersion:this.gdbVersion})}});f("extend-esri")&&p.setObject("layers.LayerMapSource",m,l);return m})},"esri/layers/LayerSource":function(){define("esri/layers/LayerSource",["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(m,
p,f,l){m=m(null,{declaredClass:"esri.layers.LayerSource",type:null,constructor:function(f){f&&p.mixin(this,f)},toJson:function(){}});f("extend-esri")&&p.setObject("layers.LayerSource",m,l);return m})},"esri/layers/LayerDataSource":function(){define("esri/layers/LayerDataSource","dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerSource ./TableDataSource ./QueryDataSource ./JoinDataSource ./RasterDataSource".split(" "),function(m,p,f,l,k,h,q,g,e,c){m=m(h,{declaredClass:"esri.layers.LayerDataSource",
type:"dataLayer",constructor:function(b){if(b&&b.dataSource){switch(b.dataSource.type){case "table":b=new q(b.dataSource);break;case "queryTable":b=new g(b.dataSource);break;case "joinTable":b=new e(b.dataSource);break;case "raster":b=new c(b.dataSource);break;default:b=b.dataSource}this.dataSource=b}},toJson:function(){var b={type:"dataLayer",dataSource:this.dataSource&&this.dataSource.toJson()};return k.fixJson(b)}});f("extend-esri")&&p.setObject("layers.LayerDataSource",m,l);return m})},"esri/layers/TableDataSource":function(){define("esri/layers/TableDataSource",
"dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource".split(" "),function(m,p,f,l,k,h){m=m(h,{declaredClass:"esri.layers.TableDataSource",toJson:function(){return k.fixJson({type:"table",workspaceId:this.workspaceId,dataSourceName:this.dataSourceName,gdbVersion:this.gdbVersion})}});f("extend-esri")&&p.setObject("layers.TableDataSource",m,l);return m})},"esri/layers/DataSource":function(){define("esri/layers/DataSource",["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],
function(m,p,f,l){m=m(null,{declaredClass:"esri.layers.DataSource",constructor:function(f){f&&p.mixin(this,f)},toJson:function(){}});f("extend-esri")&&p.setObject("layers.DataSource",m,l);return m})},"esri/layers/QueryDataSource":function(){define("esri/layers/QueryDataSource","dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource ../SpatialReference".split(" "),function(m,p,f,l,k,h,q){m=m(h,{declaredClass:"esri.layers.QueryDataSource",constructor:function(g){g&&(g.oidFields&&
p.isString(g.oidFields)&&(this.oidFields=g.oidFields.split(",")),g.spatialReference&&(this.spatialReference=new q(g.spatialReference)))},toJson:function(){var g={type:"queryTable",workspaceId:this.workspaceId,query:this.query,oidFields:this.oidFields&&this.oidFields.join(),spatialReference:this.spatialReference&&this.spatialReference.toJson()};if(this.geometryType){var e;e="point"===this.geometryType.toLowerCase()?"esriGeometryPoint":"multipoint"===this.geometryType.toLowerCase()?"esriGeometryMultipoint":
"polyline"===this.geometryType.toLowerCase()?"esriGeometryPolyline":"polygon"===this.geometryType.toLowerCase()?"esriGeometryPolygon":this.geometryType;g.geometryType=e}return k.fixJson(g)}});f("extend-esri")&&p.setObject("layers.QueryDataSource",m,l);return m})},"esri/layers/JoinDataSource":function(){define("esri/layers/JoinDataSource","dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource ./LayerMapSource ./TableDataSource ./QueryDataSource ./RasterDataSource".split(" "),function(m,
p,f,l,k,h,q,g,e,c){var b=m(h,{declaredClass:"esri.layers.JoinDataSource",constructor:function(b){b&&(b.leftTableSource&&(this.leftTableSource=this._createLayerSource(b.leftTableSource)),b.rightTableSource&&(this.rightTableSource=this._createLayerSource(b.rightTableSource)))},_createLayerSource:function(d){var f;if("mapLayer"===d.type)f=new q(d);else{f={type:"dataLayer"};var h;switch(d.dataSource.type){case "table":h=new g(d.dataSource);break;case "queryTable":h=new e(d.dataSource);break;case "joinTable":h=
new b(d.dataSource);break;case "raster":h=new c(d.dataSource);break;default:h=d.dataSource}f.dataSource=h;f.toJson=function(){var b={type:"dataLayer",dataSource:h.toJson()};return k.fixJson(b)}}return f},toJson:function(){var b={type:"joinTable",leftTableSource:this.leftTableSource&&this.leftTableSource.toJson(),rightTableSource:this.rightTableSource&&this.rightTableSource.toJson(),leftTableKey:this.leftTableKey,rightTableKey:this.rightTableKey},c;c="left-outer-join"===this.joinType.toLowerCase()?
"esriLeftOuterJoin":"left-inner-join"===this.joinType.toLowerCase()?"esriLeftInnerJoin":this.joinType;b.joinType=c;return k.fixJson(b)}});f("extend-esri")&&p.setObject("layers.JoinDataSource",b,l);return b})},"esri/layers/RasterDataSource":function(){define("esri/layers/RasterDataSource","dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource".split(" "),function(m,p,f,l,k,h){m=m(h,{declaredClass:"esri.layers.RasterDataSource",toJson:function(){return k.fixJson({type:"raster",
workspaceId:this.workspaceId,dataSourceName:this.dataSourceName})}});f("extend-esri")&&p.setObject("layers.RasterDataSource",m,l);return m})},"sixmaps/dijits/MiniHelp":function(){define("dojo/_base/declare dojo/text!sixmaps/dijits/MiniHelp.html dijit/form/Button dijit/layout/ContentPane dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin".split(" "),function(m,p,f,l,k,h,q){return m("sixmaps.dijits.MiniHelp",[h,k,q],{templateString:p,showHelpTopics:function(){},showToolFeedback:function(){}})})},
"sixmaps/dijits/TableOfContents":function(){define("dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/lang dojo/_base/sniff dojo/data/ItemFileWriteStore dojo/request/xhr dojo/Deferred dojo/text!sixmaps/dijits/tocHelp.html dojo/aspect dojo/dnd/autoscroll dojo/dnd/Avatar dojo/dnd/Manager dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/on dojo/query dijit/form/HorizontalRule dijit/form/HorizontalRuleLabels dijit/form/HorizontalSlider dijit/layout/ContentPane dijit/Menu dijit/MenuItem dijit/popup dijit/PopupMenuItem dijit/registry dijit/TooltipDialog dijit/tree/dndSource esri/layers/DynamicMapServiceLayer esri/layers/FeatureLayer esri/layers/layer sixmaps/dijits/CheckBoxStoreModel sixmaps/dijits/CheckBoxTree sixmaps/dijits/HelpTopic sixmaps/map/layers/KMLLayer sixmaps/map/Graphics sixmaps/util/Sanitiser sixmaps/util/Analytics".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x,w,y,z,B,A,C,F,E,H,D,G,I,P,Q,O,N,M,J,K,U,R,Y,aa,S){return f("sixmaps.dijits.TableOfContents",[F],{content:null,map:null,itemInfo:null,mapGraphics:null,showFeatureLayers:!0,showGraphicsLayers:!0,showHiddenLayers:!1,showBasemapLayers:!1,showKmlParentLayers:!1,listLayers:!1,store:null,model:null,tree:null,storeData:null,layerId:0,visible:[],inheritanceMode:"mixed",layerTypes:null,helpNode:null,helpHTML:e,constructor:function(e,g){f.safeMixin(this,e);var k=this;
k.storeData={label:"name",identifier:"id",items:[]};k.mapGraphics||(k.mapGraphics=new Y({map:k.map,addGraphicsLayer:!1}));k.store=new h({data:this.storeData});var l=new M;l.setVisibleLayers=function(){};k.rootItem=k.store.newItem({id:"rootItem",name:"Layers",children:[],layer:l,checkBox:!1});k.store.save();k.itemInfo&&k.getServiceNames();k.model=new J({store:k.store,checkboxRoot:!1,checkboxInheritance:k.inheritanceMode});k.tree=new K({model:k.model,nodeIcons:!1,branchIcons:!1,checkAcceptance:function(b,
c){return I.getEnclosingWidget(c[0]).item.dndparent},checkItemAcceptance:function(b,c,d){b=I.getEnclosingWidget(b).item;return-1<m.indexOf(k.tree.model.store.getValue(c.anchor.item,"dndparent").children,b)},dndController:Q,betweenThreshold:"20"});r.prototype.onMouseMove=function(c){var d=this.avatar;if(d){b.autoScrollNodes(c);var e=d.node.style;e.left=c.pageX-this.OFFSET_X-d.node.clientWidth+"px";e.top=c.pageY+this.OFFSET_Y+"px";c=!!this.source.copyState(p.isCopyKey(c));this.copy!=c&&this._setCopyStatus(c)}};
r._manager=new r;d.prototype._generateText=function(){return""};c.after(k.tree.model,"pasteItem",function(b,c,d,e,g){b=k.tree.model.store.getValue(b,"layer");var f=[];m.forEach(k.map.layerIds,function(b,c){f.push(k.map.getLayer(b))});c=m.filter(f,k.filterLayer);c.reverse();g=m.indexOf(f,c[g]);k.map.reorderLayer(b,g)},!0)},postCreate:function(){var b=this;this.inherited(arguments);var d=u.create("div");v.add(d,"toolPaneContainer");b.domNode.appendChild(d);b.tree.placeAt(d);b.tree.rootNode.set("indent",
0);b.tree&&c.after(b.tree,"onCheckBoxChange",function(){b.updateVisibility()});b.helpNode=new U({templateString:b.helpHTML,imagesUrl:require.toUrl("sixmaps/dijits/images/"),baseUrl:require.toUrl("sixmaps//")});var e=new M;e.setVisibleLayers=function(b){};d={id:"graphicsRoot",name:"Graphics Layers",layer:e,checkbox:!1};e={id:"mapRoot",name:"Map Layers",layer:e,checkbox:!1};m.forEach(b.tree.getNodesByItem(b.rootItem),function(b){x.set(b.rowNode,"display","none")});b.tree.model.newItem(d,b.rootItem,
0);b.tree.model.fetchItemByIdentity({identity:d.id,onItem:function(c){b.graphicsRootItem=c}});m.forEach(b.tree.getNodesByItem(b.graphicsRootItem),function(b){x.set(b._checkBox.domNode,"display","none")});b.tree.model.newItem(e,b.rootItem,1);b.tree.model.fetchItemByIdentity({identity:e.id,onItem:function(c){b.mapRootItem=c}});m.forEach(b.tree.getNodesByItem(b.mapRootItem),function(b){x.set(b._checkBox.domNode,"display","none");b.expand()});b.updateVisibility()},addToTOC:function(b){var d=this;if(d.filterLayer(b)){var e=
b.name||b.id,f=function(){window.open(b.url,"_blank")},e={id:"_"+d.id+"_"+d.layerId++,name:e,msgNode:b.loaded?null:u.create("img",{onclick:f,style:{width:"16px",height:"16px"},title:"Loading "+b.url,src:require.toUrl("sixmaps/dijits/tools/","images/spinner_gray.gif").uri}),layer:b,checkbox:b.visible?!0:!1},h=b.isInstanceOf(O)?d.mapRootItem:d.graphicsRootItem;d.tree.model.store.getValue(h,"hidden")&&(m.forEach(d.tree.getNodesByItem(h),function(b){x.set(b.domNode,"display","")}),d.tree.model.store.setValue(h,
"hidden",!1));d.tree.model.newItem(e,h,0);d.tree.model.store.fetchItemByIdentity({identity:e.id,onItem:function(c){b.storeItem=c;d.tree.model.store.setValue(c,"dndparent",h)}});var k="undefined"!=typeof b.listLayers?b.listLayers:d.listLayers;b._myConnects=b._myConnects||[];b.setVisibleLayers||(k=!1);var l=new g;b.loaded?l.resolve():(b._myConnects.push(c.after(b,"onLoad",function(){l.resolve()},!0)),b._myConnects.push(c.after(b,"onError",function(c){!b.loaded&&d.store.setValue(b.storeItem,"msgNode",
u.create("span",{title:c.toString(),style:"padding-left:16px","class":"dojoxGridError",onclick:f}))},!0)));l.then(function(){d.buildLayerList(b,k);b.isInstanceOf(R)&&b.folders[1]&&(b.name=b.folders[1].name);d.store.setValue(b.storeItem,"name",b.name||b.id);if(b.metadata||b.description){var c=d._createMetadataNode(b.metadata||b.description,b);d.store.setValue(b.storeItem,"msgNode",c)}else d.store.setValue(b.storeItem,"msgNode",null);b.storeItem&&d.generateMenu(b)});d.tree.resize()}},filterLayer:function(b){return!this.showHiddenLayers&&
!1===b.showInToc||b.parentLayer||!this.showGraphicsLayers&&"esri.layers.GraphicsLayer"==b.declaredClass||!this.showFeatureLayers&&b.isInstanceOf(N)||!this.showBasemapLayers&&("basemap"==b._basemapGalleryLayerType||"reference"==b._basemapGalleryLayerType)?!1:!this.layerTypes||m.some(this.layerTypes,function(c){return(c=l.getObject(c))&&b instanceof c?!0:!1})},hideUnusedNodes:function(){var b=this;m.forEach([b.graphicsRootItem,b.mapRootItem],function(c){c.children||b.tree.model.store.getValue(c,"hidden")||
(m.forEach(b.tree.getNodesByItem(c),function(b){x.set(b.domNode,"display","none")}),b.tree.model.store.setValue(c,"hidden",!0))})},removeFromTOC:function(b){function c(b){b.children&&m.forEach(b.children,function(b){c(b)});try{d.store.deleteItem(b)}catch(ia){}}var d=this;d.filterLayer(b)&&d.store.isItem(b.storeItem)&&(b.serviceMenu&&b.serviceMenu.destroyRecursive(),delete b.serviceMenu,c(b.storeItem),delete b.storeItem,m.forEach(b._myConnects,function(b){b.remove()}),delete b._myConnects,d.store.save(),
d.hideUnusedNodes(),d.map.removeLayer(b))},generateTOC:function(){var b=this;m.forEach([b.graphicsRootItem,b.mapRootItem],function(c){m.forEach(c.children,function(c){c=b.store.getValue(c,"layer");b.removeFromTOC(c)})});var c=[];m.forEach(b.map.layerIds,function(d){c.push(b.map.getLayer(d))});m.forEach(c,function(c){b.addToTOC(c)});(b.showGraphicsLayers||b.showFeatureLayers)&&m.forEach(b.map.graphicsLayerIds,function(c){c=b.map.getLayer(c);b.addToTOC(c)});b.hideUnusedNodes()},buildLayerList:function(b,
d){var e=this,g=b.storeItem;b._myConnects.push(c.after(b,"onVisibilityChange",function(b){e.tree.model.updateCheckBox(g,b)},!0));if(d){if(b.layerInfos){var f=b.layerInfos;m.forEach(f,function(b){});m.forEach(f,function(c){if(null==b.includeLayerIDs||-1!=m.indexOf(b.includeLayerIDs,c.id)){c.setVisibility=function(c){var d=this;if(c){if(-1<m.indexOf(b.visibleLayers,this.id))return;b.visibleLayers.push(this.id)}else{if(-1==m.indexOf(b.visibleLayers,this.id))return;b.visibleLayers=m.filter(b.visibleLayers,
function(b){return b!=d.id})}b.setVisibleLayers(b.visibleLayers)};var d=c.subLayerIds;d&&m.some(b.visibleLayers,function(b){return m.some(d,function(c){return b==c})})&&c.setVisibility(!0);var f,h=b.subLayerDetails&&b.subLayerDetails[c.id];h&&(f=e._createMetadataNode(h,b));var k={id:b.id+"_"+c.id,msgNode:f&&(f.domNode||f),name:c.name,layer:c,checkbox:-1<m.indexOf(b.visibleLayers,c.id)?!0:!1};-1<c.parentLayerId?e.store.fetchItemByIdentity({identity:b.id+"_"+c.parentLayerId,onItem:function(b){e.tree.model.newItem(k,
b,0)}}):e.tree.model.newItem(k,g,0)}})}e.tree.model.getRoot(function(b){e.tree.model.validateData(b)})}},_showMetaInfo:function(b,d,e){this._metadataDropDown=b.domNode;d=t.position(d);S("send","event","Map Contents","View Metadata",e.name||e.id);D.open({popup:b,x:d.x,y:d.y+d.h/2,orient:"R"});!e.myConnects&&(e.myConnects=[]);m.forEach(e.myConnects,function(b){b.remove()});e.myConnects.push(c.after(b,"onBlur",function(){setTimeout(function(){D.close(b)},0)}));setTimeout(function(){b.focus()},0)},_createMetadataNode:function(b,
c){var d=this;if(b&&b.match){var e=new F({style:"width:auto",content:"\x3cp class\x3d'error'\x3eError loading metadata snippet\x3cp\x3e"});b.match(/^(https?:)?\/\//)?q(b,{headers:{"X-Requested-With":null,"Content-Type":"text/plain"}}).then(function(c){if(c.match(/^{/)){if(c=JSON.parse(c),c=c.records[0]){var d;m.forEach(c.links,function(b){"details"==b.type&&(d=b)});c="\x3ch4\x3e"+c.title+"\x3c/h4\x3e\x3cp\x3e"+c.summary+"\x3c/p\x3e";c=aa.sanitise(c);detailsUrl=d?d.href&&d.href.match(/^(https?:)?\/\//)?
d.href:b:b;c+="\x3ca title\x3d'Details will open in a new window' href\x3d"+detailsUrl+" target\x3d'_blank'\x3eDetails\x3c/a\x3e ";e.set("content",c)}}else c=c.replace(/<img[^>]*>/g,""),e.set("content",aa.sanitise(c))},function(c){e.set("content","\x3cp class\x3d'error'\x3eError loading metadata snippet\x3c/p\x3e\x3ca class\x3d'capitalise' href\x3d"+b+" target\x3d'_blank'\x3eMetadata\x3c/a\x3e")}):e.set("content",b);var g=new P({"class":"basemapPopup",style:"max-width:400px",content:e});v.add(g.domNode,
"dijitTooltipLeft");x.set(g.domNode,"marginTop","-23px");var f=u.create("img",{style:{cursor:"pointer",display:"none"},title:"View Metadata",onclick:function(){d._showMetaInfo(g,f,c)},src:d.apiUrl+"sixmaps/app/images/metadata.png"});return f}},updateVisibility:function(){var b=this;m.forEach([b.graphicsRootItem,b.mapRootItem],function(c){m.forEach(c.children,function(c){var d=b.tree.model.getCheckBoxState(c),e=[];if("mixed"==d||d){var g=[];for(c.children&&g.push(c.children);g.length;){var f=g.pop();
m.forEach(f,function(c){1!=b.tree.model.getCheckBoxState(c)||"none"==b.tree.model.checkboxInheritance&&c.children?b.tree.model.getCheckBoxState(c)&&c.children&&g.push(c.children):(c=b.tree.model.store.getValue(c,"layer"),e.push(c.id))})}}f=b.tree.model.store.getValue(c,"layer");0==e.length&&(e=[-1]);c.children&&f.setVisibleLayers(e);b.setVisibility(c,d)})})},setVisibility:function(b,c){this.tree.model.store.getValue(b,"layer").setVisibility(c)},zoomToLayer:function(b){S("send","event","Map Contents",
"Zoom to Layer",b.name||b.id);var c;b.fullExtent?c=[b.fullExtent]:(c=[],b.getLayers?m.forEach(b.getLayers(),function(b){c.push(b.fullExtent)}):b.graphics&&(c=b.graphics));this.mapGraphics.zoomToFeatures(c)},getServiceNames:function(){var b=this;m.forEach(b.map.layerIds,function(c){var d=b.map.getLayer(c);if(c==b.itemInfo.itemData.baseMap.baseMapLayers[0].id)d.name=b.itemInfo.itemData.baseMap.title;else for(var e=0;e<b.itemInfo.itemData.operationalLayers.length;e++)c==b.itemInfo.itemData.operationalLayers[e].id&&
(d.name=b.itemInfo.itemData.operationalLayers[e].title)})},generateMenu:function(b){var d=this.tree.getNodesByItem(b.storeItem)[0];if(d){var e=u.create("img",{src:require.toUrl("sixmaps/dijits/tools/")+"images/Context_menu11.png",style:"visibility:hidden; cursor:pointer;"},d.labelNode,"after");!b.serviceMenu&&(b.serviceMenu=this.createServiceMenu(e,b));y(d,"mouseover",function(){x.set(e,{visibility:"visible"})});y(d,"mouseout",function(){if(b.serviceMenu.isShowingNow)var d=c.after(b.serviceMenu,"onClose",
function(){x.set(e,{visibility:"hidden"});d.remove()});else x.set(e,{visibility:"hidden"})})}},createServiceMenu:function(b,d){var e=this,g=new E({targetNodeIds:[b],leftClickToOpen:!0}),f=u.create("div",{id:"sliderDiv",style:{width:"215px",height:"55px"}}),h=u.create("div"),k=u.create("div"),l=u.create("div");!d.setOpacity&&(d.setOpacity=function(b){d.getLayers&&m.forEach(d.getLayers(),function(c){c.setOpacity(b)})});var q=new C({name:"slider",value:100*d.opacity||100,minimum:0,maximum:100,intermediateChanges:!0,
style:{width:"200px"},showButtons:!1});c.after(q,"onChange",function(){d.setOpacity(q.value/100);8>=w("ie")&&d.refresh()});q.placeAt(f,"last");(new A({container:"topDecoration",count:2,labels:["Transparent","Opaque"],style:"padding-bottom:20px;margin-left:15px;"},k)).placeAt(q);(new B({count:5,style:{height:"10px"}},h)).placeAt(q);(new A({container:"bottomDecoration",count:3,labels:["0%","50%","100%"]},l)).placeAt(q);f=new P({content:f,onOpen:function(){v.add(this.domNode,"dijitTooltipABLeft")?v.add(this.domNode,
"dijitTooltipRight"):v.add(this.domNode,"dijitTooltipLeft")}});x.set(f.domNode,"marginTop","-23px");f=new G({label:"Transparency",popup:f});h=new H({label:"Zoom to Layer",onClick:function(){e.zoomToLayer(d)}});k=new H({label:"Remove Layer",onClick:function(){S("send","event","Map Contents","Remove Layer",d.name||d.id);e.removeFromTOC(d)}});e.addLayerToLegend(d);d.params&&d.params.noTransparencyMenu||g.addChild(f);d.params&&d.params.noZoomMenu||g.addChild(h);d.params&&d.params.noRemoveMenu||g.addChild(k);
d.legendParams&&d.legendParams.show&&(f=new H({label:"Legend",onClick:function(){S("send","event","Map Contents","Show Legend",d.name||d.id);e.onLegendSelected(d)}}),g.addChild(f));g.startup();return g},onLegendSelected:function(b){},addLayerToLegend:function(b){},getChildNodes:function(){var b=this,c=[];z("*",b.domNode).forEach(function(b){c.push(b)});m.forEach([b.graphicsRootItem,b.mapRootItem],function(d){m.forEach(d.children,function(d){(d=b.store.getValue(d,"layer").serviceMenu)&&z("*",d.domNode).forEach(function(b){c.push(b)});
d&&m.forEach(d.getChildren(),function(b){b.popup&&z("*",b.popup.domNode).forEach(function(b){c.push(b)})})})});b._metadataDropDown&&z("*",b._metadataDropDown).forEach(function(b){c.push(b)});return c}})})},"dojo/data/ItemFileWriteStore":function(){define("dojo/data/ItemFileWriteStore","../_base/lang ../_base/declare ../_base/array ../_base/json ../_base/kernel ./ItemFileReadStore ../date/stamp".split(" "),function(m,p,f,l,k,h,q){return p("dojo.data.ItemFileWriteStore",h,{constructor:function(g){this._features["dojo.data.api.Write"]=
!0;this._features["dojo.data.api.Notification"]=!0;this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};this._datatypeMap.Date.serialize||(this._datatypeMap.Date.serialize=function(e){return q.toISOString(e,{zulu:!0})});g&&!1===g.referenceIntegrity&&(this.referenceIntegrity=!1);this._saveInProgress=!1},referenceIntegrity:!0,_assert:function(g){if(!g)throw Error("assertion failed in ItemFileWriteStore");},_getIdentifierAttribute:function(){return this.getFeatures()["dojo.data.api.Identity"]},
newItem:function(g,e){this._assert(!this._saveInProgress);this._loadFinished||this._forceLoad();if("object"!=typeof g&&"undefined"!=typeof g)throw Error("newItem() was passed something other than an object");var c=null,b=this._getIdentifierAttribute();if(b===Number)c=this._arrayOfAllItems.length;else{c=g[b];if("undefined"===typeof c)throw Error("newItem() was not passed an identity for the new item");if(m.isArray(c))throw Error("newItem() was not passed an single-valued identity");}this._itemsByIdentity&&
this._assert("undefined"===typeof this._itemsByIdentity[c]);this._assert("undefined"===typeof this._pending._newItems[c]);this._assert("undefined"===typeof this._pending._deletedItems[c]);var d={};d[this._storeRefPropName]=this;d[this._itemNumPropName]=this._arrayOfAllItems.length;this._itemsByIdentity&&(this._itemsByIdentity[c]=d,d[b]=[c]);this._arrayOfAllItems.push(d);b=null;if(e&&e.parent&&e.attribute){var b={item:e.parent,attribute:e.attribute,oldValue:void 0},f=this.getValues(e.parent,e.attribute);
if(f&&0<f.length){var h=f.slice(0,f.length);b.oldValue=1===f.length?f[0]:f.slice(0,f.length);h.push(d);this._setValueOrValues(e.parent,e.attribute,h,!1);b.newValue=this.getValues(e.parent,e.attribute)}else this._setValueOrValues(e.parent,e.attribute,d,!1),b.newValue=d}else d[this._rootItemPropName]=!0,this._arrayOfTopLevelItems.push(d);this._pending._newItems[c]=d;for(var k in g){if(k===this._storeRefPropName||k===this._itemNumPropName)throw Error("encountered bug in ItemFileWriteStore.newItem");
e=g[k];m.isArray(e)||(e=[e]);d[k]=e;if(this.referenceIntegrity)for(c=0;c<e.length;c++)f=e[c],this.isItem(f)&&this._addReferenceToMap(f,d,k)}this.onNew(d,b);return d},_removeArrayElement:function(g,e){e=f.indexOf(g,e);return-1!=e?(g.splice(e,1),!0):!1},deleteItem:function(g){this._assert(!this._saveInProgress);this._assertIsItem(g);var e=g[this._itemNumPropName],c=this.getIdentity(g);if(this.referenceIntegrity){var b=this.getAttributes(g);g[this._reverseRefMap]&&(g["backup_"+this._reverseRefMap]=m.clone(g[this._reverseRefMap]));
f.forEach(b,function(b){f.forEach(this.getValues(g,b),function(c){this.isItem(c)&&(g["backupRefs_"+this._reverseRefMap]||(g["backupRefs_"+this._reverseRefMap]=[]),g["backupRefs_"+this._reverseRefMap].push({id:this.getIdentity(c),attr:b}),this._removeReferenceFromMap(c,g,b))},this)},this);if(b=g[this._reverseRefMap])for(var d in b){var h=null;if(h=this._itemsByIdentity?this._itemsByIdentity[d]:this._arrayOfAllItems[d])for(var k in b[d]){var l=this.getValues(h,k)||[],q=f.filter(l,function(b){return!(this.isItem(b)&&
this.getIdentity(b)==c)},this);this._removeReferenceFromMap(g,h,k);q.length<l.length&&this._setValueOrValues(h,k,q,!0)}}}this._arrayOfAllItems[e]=null;g[this._storeRefPropName]=null;this._itemsByIdentity&&delete this._itemsByIdentity[c];this._pending._deletedItems[c]=g;g[this._rootItemPropName]&&this._removeArrayElement(this._arrayOfTopLevelItems,g);this.onDelete(g);return!0},setValue:function(g,e,c){return this._setValueOrValues(g,e,c,!0)},setValues:function(g,e,c){return this._setValueOrValues(g,
e,c,!0)},unsetAttribute:function(g,e){return this._setValueOrValues(g,e,[],!0)},_setValueOrValues:function(g,e,c,b){this._assert(!this._saveInProgress);this._assertIsItem(g);this._assert(m.isString(e));this._assert("undefined"!==typeof c);var d=this._getIdentifierAttribute();if(e==d)throw Error("ItemFileWriteStore does not have support for changing the value of an item's identifier.");var d=this._getValueOrValues(g,e),h=this.getIdentity(g);if(!this._pending._modifiedItems[h]){var k={},l;for(l in g)k[l]=
l===this._storeRefPropName||l===this._itemNumPropName||l===this._rootItemPropName?g[l]:l===this._reverseRefMap?m.clone(g[l]):g[l].slice(0,g[l].length);this._pending._modifiedItems[h]=k}h=!1;if(m.isArray(c)&&0===c.length){if(h=delete g[e],c=void 0,this.referenceIntegrity&&d){l=d;m.isArray(l)||(l=[l]);for(var q=0;q<l.length;q++)k=l[q],this.isItem(k)&&this._removeReferenceFromMap(k,g,e)}}else{h=m.isArray(c)?c.slice(0,c.length):[c];if(this.referenceIntegrity)if(d){l=d;m.isArray(l)||(l=[l]);var p={};f.forEach(l,
function(b){this.isItem(b)&&(b=this.getIdentity(b),p[b.toString()]=!0)},this);f.forEach(h,function(b){if(this.isItem(b)){var c=this.getIdentity(b);p[c.toString()]?delete p[c.toString()]:this._addReferenceToMap(b,g,e)}},this);for(q in p)this._removeReferenceFromMap(this._itemsByIdentity?this._itemsByIdentity[q]:this._arrayOfAllItems[q],g,e)}else for(q=0;q<h.length;q++)k=h[q],this.isItem(k)&&this._addReferenceToMap(k,g,e);g[e]=h;h=!0}if(b)this.onSet(g,e,d,c);return h},_addReferenceToMap:function(g,
e,c){e=this.getIdentity(e);var b=g[this._reverseRefMap];b||(b=g[this._reverseRefMap]={});(g=b[e])||(g=b[e]={});g[c]=!0},_removeReferenceFromMap:function(g,e,c){e=this.getIdentity(e);var b=g[this._reverseRefMap],d;if(b){for(d in b)d==e&&(delete b[d][c],this._isEmpty(b[d])&&delete b[d]);this._isEmpty(b)&&delete g[this._reverseRefMap]}},_dumpReferenceMap:function(){var g;for(g=0;g<this._arrayOfAllItems.length;g++);},_getValueOrValues:function(g,e){var c=void 0;this.hasAttribute(g,e)&&(g=this.getValues(g,
e),c=1==g.length?g[0]:g);return c},_flatten:function(g){if(this.isItem(g))return{_reference:this.getIdentity(g)};if("object"===typeof g)for(var e in this._datatypeMap){var c=this._datatypeMap[e];if(m.isObject(c)&&!m.isFunction(c)){if(g instanceof c.type){if(!c.serialize)throw Error("ItemFileWriteStore:  No serializer defined for type mapping: ["+e+"]");return{_type:e,_value:c.serialize(g)}}}else if(g instanceof c)return{_type:e,_value:g.toString()}}return g},_getNewFileContentString:function(){var g=
{},e=this._getIdentifierAttribute();e!==Number&&(g.identifier=e);this._labelAttr&&(g.label=this._labelAttr);g.items=[];for(e=0;e<this._arrayOfAllItems.length;++e){var c=this._arrayOfAllItems[e];if(null!==c){var b={},d;for(d in c)if(d!==this._storeRefPropName&&d!==this._itemNumPropName&&d!==this._reverseRefMap&&d!==this._rootItemPropName){var f=this.getValues(c,d);if(1==f.length)b[d]=this._flatten(f[0]);else for(var h=[],k=0;k<f.length;++k)h.push(this._flatten(f[k])),b[d]=h}g.items.push(b)}}return l.toJson(g,
!0)},_isEmpty:function(g){var e=!0;if(m.isObject(g))for(var c in g){e=!1;break}else m.isArray(g)&&0<g.length&&(e=!1);return e},save:function(g){this._assert(!this._saveInProgress);this._saveInProgress=!0;var e=this,c=function(){e._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};e._saveInProgress=!1;g&&g.onComplete&&g.onComplete.call(g.scope||k.global)},b=function(b){e._saveInProgress=!1;g&&g.onError&&g.onError.call(g.scope||k.global,b)};if(this._saveEverything){var d=this._getNewFileContentString();
this._saveEverything(c,b,d)}this._saveCustom&&this._saveCustom(c,b);this._saveEverything||this._saveCustom||c()},revert:function(){this._assert(!this._saveInProgress);for(var g in this._pending._modifiedItems){var e=this._pending._modifiedItems[g],c=null,c=this._itemsByIdentity?this._itemsByIdentity[g]:this._arrayOfAllItems[g];e[this._storeRefPropName]=this;for(var b in c)delete c[b];m.mixin(c,e)}var d;for(g in this._pending._deletedItems)d=this._pending._deletedItems[g],d[this._storeRefPropName]=
this,e=d[this._itemNumPropName],d["backup_"+this._reverseRefMap]&&(d[this._reverseRefMap]=d["backup_"+this._reverseRefMap],delete d["backup_"+this._reverseRefMap]),this._arrayOfAllItems[e]=d,this._itemsByIdentity&&(this._itemsByIdentity[g]=d),d[this._rootItemPropName]&&this._arrayOfTopLevelItems.push(d);for(g in this._pending._deletedItems)d=this._pending._deletedItems[g],d["backupRefs_"+this._reverseRefMap]&&(f.forEach(d["backupRefs_"+this._reverseRefMap],function(b){this._addReferenceToMap(this._itemsByIdentity?
this._itemsByIdentity[b.id]:this._arrayOfAllItems[b.id],d,b.attr)},this),delete d["backupRefs_"+this._reverseRefMap]);for(g in this._pending._newItems)e=this._pending._newItems[g],e[this._storeRefPropName]=null,this._arrayOfAllItems[e[this._itemNumPropName]]=null,e[this._rootItemPropName]&&this._removeArrayElement(this._arrayOfTopLevelItems,e),this._itemsByIdentity&&delete this._itemsByIdentity[g];this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};return!0},isDirty:function(g){return g?
(g=this.getIdentity(g),(new Boolean(this._pending._newItems[g]||this._pending._modifiedItems[g]||this._pending._deletedItems[g])).valueOf()):!this._isEmpty(this._pending._newItems)||!this._isEmpty(this._pending._modifiedItems)||!this._isEmpty(this._pending._deletedItems)},onSet:function(g,e,c,b){},onNew:function(g,e){},onDelete:function(g){},close:function(g){if(this.clearOnClose){if(this.isDirty())throw Error("dojo.data.ItemFileWriteStore: There are unsaved changes present in the store.  Please save or revert the changes before invoking close.");
this.inherited(arguments)}}})})},"dojo/data/ItemFileReadStore":function(){define("dojo/data/ItemFileReadStore","../_base/kernel ../_base/lang ../_base/declare ../_base/array ../_base/xhr ../Evented ./util/filter ./util/simpleFetch ../date/stamp".split(" "),function(m,p,f,l,k,h,q,g,e){f=f("dojo.data.ItemFileReadStore",[h],{constructor:function(c){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=!1;this.url=this._ccUrl=this._jsonFileUrl=c.url;this._jsonData=c.data;this.data=
null;this._datatypeMap=c.typeMap||{};this._datatypeMap.Date||(this._datatypeMap.Date={type:Date,deserialize:function(b){return e.fromISOString(b)}});this._features={"dojo.data.api.Read":!0,"dojo.data.api.Identity":!0};this._itemsByIdentity=null;this._storeRefPropName="_S";this._itemNumPropName="_0";this._rootItemPropName="_RI";this._reverseRefMap="_RRM";this._loadInProgress=!1;this._queuedFetches=[];void 0!==c.urlPreventCache&&(this.urlPreventCache=c.urlPreventCache?!0:!1);void 0!==c.hierarchical&&
(this.hierarchical=c.hierarchical?!0:!1);c.clearOnClose&&(this.clearOnClose=!0);"failOk"in c&&(this.failOk=c.failOk?!0:!1)},url:"",_ccUrl:"",data:null,typeMap:null,clearOnClose:!1,urlPreventCache:!1,failOk:!1,hierarchical:!0,_assertIsItem:function(c){if(!this.isItem(c))throw Error(this.declaredClass+": Invalid item argument.");},_assertIsAttribute:function(c){if("string"!==typeof c)throw Error(this.declaredClass+": Invalid attribute argument.");},getValue:function(c,b,d){c=this.getValues(c,b);return 0<
c.length?c[0]:d},getValues:function(c,b){this._assertIsItem(c);this._assertIsAttribute(b);return(c[b]||[]).slice(0)},getAttributes:function(c){this._assertIsItem(c);var b=[],d;for(d in c)d!==this._storeRefPropName&&d!==this._itemNumPropName&&d!==this._rootItemPropName&&d!==this._reverseRefMap&&b.push(d);return b},hasAttribute:function(c,b){this._assertIsItem(c);this._assertIsAttribute(b);return b in c},containsValue:function(c,b,d){var e=void 0;"string"===typeof d&&(e=q.patternToRegExp(d,!1));return this._containsValue(c,
b,d,e)},_containsValue:function(c,b,d,e){return l.some(this.getValues(c,b),function(b){if(null!==b&&!p.isObject(b)&&e){if(b.toString().match(e))return!0}else if(d===b)return!0})},isItem:function(c){return c&&c[this._storeRefPropName]===this&&this._arrayOfAllItems[c[this._itemNumPropName]]===c?!0:!1},isItemLoaded:function(c){return this.isItem(c)},loadItem:function(c){this._assertIsItem(c.item)},getFeatures:function(){return this._features},getLabel:function(c){if(this._labelAttr&&this.isItem(c))return this.getValue(c,
this._labelAttr)},getLabelAttributes:function(c){return this._labelAttr?[this._labelAttr]:null},filter:function(c,b,d){var e=[],g,f;if(c.query){var h;g=c.queryOptions?c.queryOptions.ignoreCase:!1;var k={};for(f in c.query)h=c.query[f],"string"===typeof h?k[f]=q.patternToRegExp(h,g):h instanceof RegExp&&(k[f]=h);for(g=0;g<b.length;++g){var l=!0,m=b[g];if(null===m)l=!1;else for(f in c.query)h=c.query[f],this._containsValue(m,f,h,k[f])||(l=!1);l&&e.push(m)}}else for(g=0;g<b.length;++g)f=b[g],null!==
f&&e.push(f);d(e,c)},_fetchItems:function(c,b,d){var e=this;if(this._loadFinished)this.filter(c,this._getItemsArray(c.queryOptions),b);else if(this._jsonFileUrl!==this._ccUrl?(m.deprecated(this.declaredClass+": ","To change the url, set the url property of the store, not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0"),this.url=this._ccUrl=this._jsonFileUrl):this.url!==this._ccUrl&&(this._ccUrl=this._jsonFileUrl=this.url),null!=this.data&&(this._jsonData=this.data,this.data=null),this._jsonFileUrl)if(this._loadInProgress)this._queuedFetches.push({args:c,
filter:p.hitch(e,"filter"),findCallback:p.hitch(e,b)});else{this._loadInProgress=!0;var g=k.get({url:e._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk});g.addCallback(function(g){try{e._getItemsFromLoadedData(g),e._loadFinished=!0,e._loadInProgress=!1,e.filter(c,e._getItemsArray(c.queryOptions),b),e._handleQueuedFetches()}catch(x){e._loadFinished=!0,e._loadInProgress=!1,d(x,c)}});g.addErrback(function(b){e._loadInProgress=!1;d(b,c)});var f=null;c.abort&&
(f=c.abort);c.abort=function(){var b=g;b&&-1===b.fired&&(b.cancel(),b=null);f&&f.call(c)}}else if(this._jsonData)try{this._loadFinished=!0,this._getItemsFromLoadedData(this._jsonData),this._jsonData=null,e.filter(c,this._getItemsArray(c.queryOptions),b)}catch(t){d(t,c)}else d(Error(this.declaredClass+": No JSON source data was provided as either URL or a nested Javascript object."),c)},_handleQueuedFetches:function(){if(0<this._queuedFetches.length){for(var c=0;c<this._queuedFetches.length;c++){var b=
this._queuedFetches[c],d=b.args,e=b.filter,b=b.findCallback;e?e(d,this._getItemsArray(d.queryOptions),b):this.fetchItemByIdentity(d)}this._queuedFetches=[]}},_getItemsArray:function(c){return c&&c.deep?this._arrayOfAllItems:this._arrayOfTopLevelItems},close:function(c){this.clearOnClose&&this._loadFinished&&!this._loadInProgress&&(this._arrayOfAllItems=[],this._arrayOfTopLevelItems=[],this._loadFinished=!1,this._itemsByIdentity=null,this._loadInProgress=!1,this._queuedFetches=[])},_getItemsFromLoadedData:function(c){function b(b){return null!==
b&&"object"===typeof b&&(!p.isArray(b)||e)&&!p.isFunction(b)&&(b.constructor==Object||p.isArray(b))&&"undefined"===typeof b._reference&&"undefined"===typeof b._type&&"undefined"===typeof b._value&&g.hierarchical}function d(c){g._arrayOfAllItems.push(c);for(var e in c){var f=c[e];if(f)if(p.isArray(f))for(var h=0;h<f.length;++h){var k=f[h];b(k)&&d(k)}else b(f)&&d(f)}}var e=!1,g=this;this._labelAttr=c.label;var f,h;this._arrayOfAllItems=[];this._arrayOfTopLevelItems=c.items;for(f=0;f<this._arrayOfTopLevelItems.length;++f)h=
this._arrayOfTopLevelItems[f],p.isArray(h)&&(e=!0),d(h),h[this._rootItemPropName]=!0;var k={},l;for(f=0;f<this._arrayOfAllItems.length;++f)for(l in h=this._arrayOfAllItems[f],h){if(l!==this._rootItemPropName){var m=h[l];null!==m?p.isArray(m)||(h[l]=[m]):h[l]=[null]}k[l]=l}for(;k[this._storeRefPropName];)this._storeRefPropName+="_";for(;k[this._itemNumPropName];)this._itemNumPropName+="_";for(;k[this._reverseRefMap];)this._reverseRefMap+="_";if(k=c.identifier)for(this._itemsByIdentity={},this._features["dojo.data.api.Identity"]=
k,f=0;f<this._arrayOfAllItems.length;++f)if(h=this._arrayOfAllItems[f],c=h[k],c=c[0],Object.hasOwnProperty.call(this._itemsByIdentity,c)){if(this._jsonFileUrl)throw Error(this.declaredClass+":  The json data as specified by: ["+this._jsonFileUrl+"] is malformed.  Items within the list have identifier: ["+k+"].  Value collided: ["+c+"]");if(this._jsonData)throw Error(this.declaredClass+":  The json data provided by the creation arguments is malformed.  Items within the list have identifier: ["+k+"].  Value collided: ["+
c+"]");}else this._itemsByIdentity[c]=h;else this._features["dojo.data.api.Identity"]=Number;for(f=0;f<this._arrayOfAllItems.length;++f)h=this._arrayOfAllItems[f],h[this._storeRefPropName]=this,h[this._itemNumPropName]=f;for(f=0;f<this._arrayOfAllItems.length;++f)for(l in h=this._arrayOfAllItems[f],h)for(c=h[l],k=0;k<c.length;++k)if(m=c[k],null!==m&&"object"==typeof m){if("_type"in m&&"_value"in m){var q=m._type,B=this._datatypeMap[q];if(B)if(p.isFunction(B))c[k]=new B(m._value);else if(p.isFunction(B.deserialize))c[k]=
B.deserialize(m._value);else throw Error("dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function");else throw Error("dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '"+q+"'");}if(m._reference){m=m._reference;if(p.isObject(m))for(q=0;q<this._arrayOfAllItems.length;++q){var B=this._arrayOfAllItems[q],A=!0,C;for(C in m)B[C]!=m[C]&&(A=!1);A&&(c[k]=B)}else c[k]=this._getItemByIdentity(m);
this.referenceIntegrity&&(m=c[k],this.isItem(m)&&this._addReferenceToMap(m,h,l))}else this.isItem(m)&&this.referenceIntegrity&&this._addReferenceToMap(m,h,l)}},_addReferenceToMap:function(c,b,d){},getIdentity:function(c){var b=this._features["dojo.data.api.Identity"];return b===Number?c[this._itemNumPropName]:(c=c[b])?c[0]:null},fetchItemByIdentity:function(c){var b,d;if(this._loadFinished)b=this._getItemByIdentity(c.identity),c.onItem&&(d=c.scope?c.scope:m.global,c.onItem.call(d,b));else{var e=this;
this._jsonFileUrl!==this._ccUrl?(m.deprecated(this.declaredClass+": ","To change the url, set the url property of the store, not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0"),this.url=this._ccUrl=this._jsonFileUrl):this.url!==this._ccUrl&&(this._ccUrl=this._jsonFileUrl=this.url);null!=this.data&&null==this._jsonData&&(this._jsonData=this.data,this.data=null);this._jsonFileUrl?this._loadInProgress?this._queuedFetches.push({args:c}):(this._loadInProgress=!0,d=k.get({url:e._jsonFileUrl,
handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk}),d.addCallback(function(d){var g=c.scope?c.scope:m.global;try{e._getItemsFromLoadedData(d),e._loadFinished=!0,e._loadInProgress=!1,b=e._getItemByIdentity(c.identity),c.onItem&&c.onItem.call(g,b),e._handleQueuedFetches()}catch(t){e._loadInProgress=!1,c.onError&&c.onError.call(g,t)}}),d.addErrback(function(b){e._loadInProgress=!1;c.onError&&c.onError.call(c.scope?c.scope:m.global,b)})):this._jsonData&&(e._getItemsFromLoadedData(e._jsonData),
e._jsonData=null,e._loadFinished=!0,b=e._getItemByIdentity(c.identity),c.onItem&&(d=c.scope?c.scope:m.global,c.onItem.call(d,b)))}},_getItemByIdentity:function(c){var b=null;this._itemsByIdentity?Object.hasOwnProperty.call(this._itemsByIdentity,c)&&(b=this._itemsByIdentity[c]):Object.hasOwnProperty.call(this._arrayOfAllItems,c)&&(b=this._arrayOfAllItems[c]);void 0===b&&(b=null);return b},getIdentityAttributes:function(c){c=this._features["dojo.data.api.Identity"];return c===Number?null:[c]},_forceLoad:function(){var c=
this;this._jsonFileUrl!==this._ccUrl?(m.deprecated(this.declaredClass+": ","To change the url, set the url property of the store, not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0"),this.url=this._ccUrl=this._jsonFileUrl):this.url!==this._ccUrl&&(this._ccUrl=this._jsonFileUrl=this.url);null!=this.data&&(this._jsonData=this.data,this.data=null);if(this._jsonFileUrl){var b=k.get({url:this._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk,
sync:!0});b.addCallback(function(b){try{if(!0!==c._loadInProgress&&!c._loadFinished)c._getItemsFromLoadedData(b),c._loadFinished=!0;else if(c._loadInProgress)throw Error(this.declaredClass+":  Unable to perform a synchronous load, an async load is in progress.");}catch(r){throw r;}});b.addErrback(function(b){throw b;})}else this._jsonData&&(c._getItemsFromLoadedData(c._jsonData),c._jsonData=null,c._loadFinished=!0)}});p.extend(f,g);return f})},"dojo/data/util/filter":function(){define("dojo/data/util/filter",
["../../_base/lang"],function(m){var p={};m.setObject("dojo.data.util.filter",p);p.patternToRegExp=function(f,l){for(var k="^",h=null,m=0;m<f.length;m++)switch(h=f.charAt(m),h){case "\\":k+=h;m++;k+=f.charAt(m);break;case "*":k+=".*";break;case "?":k+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":k+="\\";default:k+=h}k+="$";return l?new RegExp(k,"mi"):new RegExp(k,"m")};return p})},"dojo/data/util/simpleFetch":function(){define("dojo/data/util/simpleFetch",
["../../_base/lang","../../_base/kernel","./sorter"],function(m,p,f){var l={};m.setObject("dojo.data.util.simpleFetch",l);l.errorHandler=function(f,h){h.onError&&h.onError.call(h.scope||p.global,f,h)};l.fetchHandler=function(k,h){var l=h.abort||null,g=!1,e=h.start?h.start:0,c=h.count&&Infinity!==h.count?e+h.count:k.length;h.abort=function(){g=!0;l&&l.call(h)};var b=h.scope||p.global;h.store||(h.store=this);h.onBegin&&h.onBegin.call(b,k.length,h);h.sort&&k.sort(f.createSortFunction(h.sort,this));if(h.onItem)for(var d=
e;d<k.length&&d<c;++d){var m=k[d];g||h.onItem.call(b,m,h)}h.onComplete&&!g&&(d=null,h.onItem||(d=k.slice(e,c)),h.onComplete.call(b,d,h))};l.fetch=function(f){f=f||{};f.store||(f.store=this);this._fetchItems(f,m.hitch(this,"fetchHandler"),m.hitch(this,"errorHandler"));return f};return l})},"dojo/dnd/Avatar":function(){define("dojo/dnd/Avatar","../_base/declare ../_base/window ../dom ../dom-attr ../dom-class ../dom-construct ../hccss ../query".split(" "),function(m,p,f,l,k,h,q,g){return m("dojo.dnd.Avatar",
null,{constructor:function(e){this.manager=e;this.construct()},construct:function(){var e=h.create("table",{"class":"dojoDndAvatar",style:{position:"absolute",zIndex:"1999",margin:"0px"}}),c=this.manager.source,b,d=h.create("tbody",null,e),g=h.create("tr",null,d),f=h.create("td",null,g),k=Math.min(5,this.manager.nodes.length),m=0;q("highcontrast")&&h.create("span",{id:"a11yIcon",innerHTML:this.manager.copy?"+":"\x3c"},f);h.create("span",{innerHTML:c.generateText?this._generateText():""},f);for(l.set(g,
{"class":"dojoDndAvatarHeader",style:{opacity:.9}});m<k;++m)c.creator?b=c._normalizedCreator(c.getItem(this.manager.nodes[m].id).data,"avatar").node:(b=this.manager.nodes[m].cloneNode(!0),"tr"==b.tagName.toLowerCase()&&(g=h.create("table"),h.create("tbody",null,g).appendChild(b),b=g)),b.id="",g=h.create("tr",null,d),f=h.create("td",null,g),f.appendChild(b),l.set(g,{"class":"dojoDndAvatarItem",style:{opacity:(9-m)/10}});this.node=e},destroy:function(){h.destroy(this.node);this.node=!1},update:function(){k.toggle(this.node,
"dojoDndAvatarCanDrop",this.manager.canDropFlag);if(q("highcontrast")){var e=f.byId("a11yIcon"),c="+";this.manager.canDropFlag&&!this.manager.copy?c="\x3c ":this.manager.canDropFlag||this.manager.copy?this.manager.canDropFlag||(c="x"):c="o";e.innerHTML=c}g("tr.dojoDndAvatarHeader td span"+(q("highcontrast")?" span":""),this.node).forEach(function(b){b.innerHTML=this.manager.source.generateText?this._generateText():""},this)},_generateText:function(){return this.manager.nodes.length.toString()}})})},
"dojo/dnd/Manager":function(){define("dojo/dnd/Manager","../_base/array ../_base/declare ../_base/lang ../_base/window ../dom-class ../Evented ../has ../keys ../on ../topic ../touch ./common ./autoscroll ./Avatar".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d,r,v){var u=p("dojo.dnd.Manager",[h],{constructor:function(){this.source=this.avatar=null;this.nodes=[];this.copy=!0;this.target=null;this.canDropFlag=!1;this.events=[]},OFFSET_X:q("touch")?4:16,OFFSET_Y:q("touch")?4:16,overSource:function(b){this.avatar&&
(this.target=b&&"Disabled"!=b.targetState?b:null,this.canDropFlag=!!this.target,this.avatar.update());c.publish("/dnd/source/over",b)},outSource:function(b){this.avatar?this.target==b&&(this.target=null,this.canDropFlag=!1,this.avatar.update(),c.publish("/dnd/source/over",null)):c.publish("/dnd/source/over",null)},startDrag:function(d,g,h){function m(b){b.preventDefault();b.stopPropagation()}r.autoScrollStart(l.doc);this.source=d;this.nodes=g;this.copy=!!h;this.avatar=this.makeAvatar();l.body().appendChild(this.avatar.node);
c.publish("/dnd/start",d,g,this.copy);this.events=[e(l.doc,b.move,f.hitch(this,"onMouseMove")),e(l.doc,b.release,f.hitch(this,"onMouseUp")),e(l.doc,"keydown",f.hitch(this,"onKeyDown")),e(l.doc,"keyup",f.hitch(this,"onKeyUp")),e(l.doc,"dragstart",m),e(l.body(),"selectstart",m)];d="dojoDnd"+(h?"Copy":"Move");k.add(l.body(),d)},canDrop:function(b){b=!(!this.target||!b);this.canDropFlag!=b&&(this.canDropFlag=b,this.avatar.update())},stopDrag:function(){k.remove(l.body(),["dojoDndCopy","dojoDndMove"]);
m.forEach(this.events,function(b){b.remove()});this.events=[];this.avatar.destroy();this.source=this.target=this.avatar=null;this.nodes=[]},makeAvatar:function(){return new v(this)},updateAvatar:function(){this.avatar.update()},onMouseMove:function(b){var c=this.avatar;c&&(r.autoScrollNodes(b),c=c.node.style,c.left=b.pageX+this.OFFSET_X+"px",c.top=b.pageY+this.OFFSET_Y+"px",c=!!this.source.copyState(d.getCopyKeyState(b)),this.copy!=c&&this._setCopyStatus(c));q("touch")&&b.preventDefault()},onMouseUp:function(b){if(this.avatar){if(this.target&&
this.canDropFlag){var e=!!this.source.copyState(d.getCopyKeyState(b));c.publish("/dnd/drop/before",this.source,this.nodes,e,this.target,b);c.publish("/dnd/drop",this.source,this.nodes,e,this.target,b)}else c.publish("/dnd/cancel");this.stopDrag()}},onKeyDown:function(b){if(this.avatar)switch(b.keyCode){case g.CTRL:b=!!this.source.copyState(!0);this.copy!=b&&this._setCopyStatus(b);break;case g.ESCAPE:c.publish("/dnd/cancel"),this.stopDrag()}},onKeyUp:function(b){this.avatar&&b.keyCode==g.CTRL&&(b=
!!this.source.copyState(!1),this.copy!=b&&this._setCopyStatus(b))},_setCopyStatus:function(b){this.copy=b;this.source._markDndStatus(this.copy);this.updateAvatar();k.replace(l.body(),"dojoDnd"+(this.copy?"Copy":"Move"),"dojoDnd"+(this.copy?"Move":"Copy"))}});d._manager=null;u.manager=d.manager=function(){d._manager||(d._manager=new u);return d._manager};return u})},"dijit/form/HorizontalRule":function(){define("dijit/form/HorizontalRule",["dojo/_base/declare","../_Widget","../_TemplatedMixin"],function(m,
p,f){return m("dijit.form.HorizontalRule",[p,f],{templateString:'\x3cdiv class\x3d"dijitRuleContainer dijitRuleContainerH"\x3e\x3c/div\x3e',count:3,container:"containerNode",ruleStyle:"",_positionPrefix:'\x3cdiv class\x3d"dijitRuleMark dijitRuleMarkH" style\x3d"left:',_positionSuffix:"%;",_suffix:'"\x3e\x3c/div\x3e',_genHTML:function(f){return this._positionPrefix+f+this._positionSuffix+this.ruleStyle+this._suffix},_isHorizontal:!0,buildRendering:function(){this.inherited(arguments);var f;if(1==this.count)f=
this._genHTML(50,0);else{var k,h=100/(this.count-1);if(!this._isHorizontal||this.isLeftToRight()){f=this._genHTML(0,0);for(k=1;k<this.count-1;k++)f+=this._genHTML(h*k,k);f+=this._genHTML(100,this.count-1)}else{f=this._genHTML(100,0);for(k=1;k<this.count-1;k++)f+=this._genHTML(100-h*k,k);f+=this._genHTML(0,this.count-1)}}this.domNode.innerHTML=f}})})},"dijit/form/HorizontalRuleLabels":function(){define("dijit/form/HorizontalRuleLabels","dojo/_base/declare dojo/has dojo/number dojo/query dojo/_base/lang ./HorizontalRule".split(" "),
function(m,p,f,l,k,h){m=m("dijit.form.HorizontalRuleLabels",h,{templateString:'\x3cdiv class\x3d"dijitRuleContainer dijitRuleContainerH dijitRuleLabelsContainer dijitRuleLabelsContainerH"\x3e\x3c/div\x3e',labelStyle:"",labels:[],numericMargin:0,minimum:0,maximum:1,constraints:{pattern:"#%"},_positionPrefix:'\x3cdiv class\x3d"dijitRuleLabelContainer dijitRuleLabelContainerH" style\x3d"left:',_labelPrefix:'"\x3e\x3cdiv class\x3d"dijitRuleLabel dijitRuleLabelH"\x3e',_suffix:"\x3c/div\x3e\x3c/div\x3e",
_calcPosition:function(f){return f},_genHTML:function(f,g){g=this.labels[g];return this._positionPrefix+this._calcPosition(f)+this._positionSuffix+this.labelStyle+this._genDirectionHTML(g)+this._labelPrefix+g+this._suffix},_genDirectionHTML:function(f){return""},getLabels:function(){var h=this.labels;!h.length&&this.srcNodeRef&&(h=l("\x3e li",this.srcNodeRef).map(function(b){return String(b.innerHTML)}));if(!h.length&&1<this.count)for(var h=[],g=this.minimum,e=(this.maximum-g)/(this.count-1),c=0;c<
this.count;c++)h.push(c<this.numericMargin||c>=this.count-this.numericMargin?"":f.format(g,this.constraints)),g+=e;return h},postMixInProperties:function(){this.inherited(arguments);this.labels=this.getLabels();this.count=this.labels.length}});p("dojo-bidi")&&m.extend({_setTextDirAttr:function(f){this.textDir!=f&&(this._set("textDir",f),l(".dijitRuleLabelContainer",this.domNode).forEach(k.hitch(this,function(g){g.style.direction=this.getTextDir(g.innerText||g.textContent||"")})))},_genDirectionHTML:function(f){return this.textDir?
"direction:"+this.getTextDir(f)+";":""}});return m})},"dijit/PopupMenuItem":function(){define("dijit/PopupMenuItem","dojo/_base/declare dojo/dom-style dojo/_base/lang dojo/query ./popup ./registry ./MenuItem ./hccss".split(" "),function(m,p,f,l,k,h,q){return m("dijit.PopupMenuItem",q,{baseClass:"dijitMenuItem dijitPopupMenuItem",_fillContent:function(){if(this.srcNodeRef){var g=l("*",this.srcNodeRef);this.inherited(arguments,[g[0]]);this.dropDownContainer=this.srcNodeRef}},_openPopup:function(g,e){var c=
this.popup;k.open(f.delegate(g,{popup:this.popup,around:this.domNode}));e&&c.focus&&c.focus()},_closePopup:function(){k.close(this.popup);this.popup.parentMenu=null},startup:function(){if(!this._started){this.inherited(arguments);if(!this.popup){var g=l("[widgetId]",this.dropDownContainer)[0];this.popup=h.byNode(g)}this.ownerDocumentBody.appendChild(this.popup.domNode);this.popup.domNode.setAttribute("aria-labelledby",this.containerNode.id);this.popup.startup();this.popup.domNode.style.display="none";
this.arrowWrapper&&p.set(this.arrowWrapper,"visibility","");this.focusNode.setAttribute("aria-haspopup","true")}},destroyDescendants:function(g){this.popup&&(this.popup._destroyed||this.popup.destroyRecursive(g),delete this.popup);this.inherited(arguments)}})})},"dijit/tree/dndSource":function(){define("dijit/tree/dndSource","dojo/_base/array dojo/_base/declare dojo/dnd/common dojo/dom-class dojo/dom-geometry dojo/_base/lang dojo/mouse dojo/on dojo/touch dojo/topic dojo/dnd/Manager ./_dndSelector".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d){return p("dijit.tree.dndSource",d,{isSource:!0,accept:["text","treeNode"],copyOnly:!1,dragThreshold:5,betweenThreshold:0,generateText:!0,constructor:function(b,d){d||(d={});h.mixin(this,d);b=d.accept instanceof Array?d.accept:["text","treeNode"];this.accept=null;if(b.length)for(this.accept={},d=0;d<b.length;++d)this.accept[b[d]]=1;this.mouseDown=this.isDragging=!1;this.targetBox=this.targetAnchor=null;this.dropPosition="";this._lastY=this._lastX=0;this.sourceState=
"";this.isSource&&l.add(this.node,"dojoDndSource");this.targetState="";this.accept&&l.add(this.node,"dojoDndTarget");this.topics=[c.subscribe("/dnd/source/over",h.hitch(this,"onDndSourceOver")),c.subscribe("/dnd/start",h.hitch(this,"onDndStart")),c.subscribe("/dnd/drop",h.hitch(this,"onDndDrop")),c.subscribe("/dnd/cancel",h.hitch(this,"onDndCancel"))]},checkAcceptance:function(){return!0},copyState:function(b){return this.copyOnly||b},destroy:function(){this.inherited(arguments);for(var b;b=this.topics.pop();)b.remove();
this.targetAnchor=null},_onDragMouse:function(c,d){var e=b.manager(),g=this.targetAnchor,f=this.current,h=this.dropPosition,l="Over";f&&0<this.betweenThreshold&&(this.targetBox&&g==f||(this.targetBox=k.position(f.rowNode,!0)),c.pageY-this.targetBox.y<=this.betweenThreshold?l="Before":c.pageY-this.targetBox.y>=this.targetBox.h-this.betweenThreshold&&(l="After"));if(d||f!=g||l!=h){g&&this._removeItemClass(g.rowNode,h);f&&this._addItemClass(f.rowNode,l);if(f)if(f==this.tree.rootNode&&"Over"!=l)e.canDrop(!1);
else{d=c=!1;if(e.source==this){d="Over"===l;for(var m in this.selection){g=this.selection[m];if(g.item===f.item){c=!0;break}g.getParent().id!==f.id&&(d=!1)}}e.canDrop(!c&&!d&&!this._isParentChildDrop(e.source,f.rowNode)&&this.checkItemAcceptance(f.rowNode,e.source,l.toLowerCase()))}else e.canDrop(!1);this.targetAnchor=f;this.dropPosition=l}},onMouseMove:function(c){if(!this.isDragging||"Disabled"!=this.targetState){this.inherited(arguments);var d=b.manager();if(this.isDragging)this._onDragMouse(c);
else if(this.mouseDown&&this.isSource&&(Math.abs(c.pageX-this._lastX)>=this.dragThreshold||Math.abs(c.pageY-this._lastY)>=this.dragThreshold)){var e=this.getSelectedTreeNodes();if(e.length){if(1<e.length){var g=this.selection,h=0,k=[],l,q;a:for(;l=e[h++];){for(q=l.getParent();q&&q!==this.tree;q=q.getParent())if(g[q.id])continue a;k.push(l)}e=k}e=m.map(e,function(b){return b.domNode});d.startDrag(this,e,this.copyState(f.getCopyKeyState(c)));this._onDragMouse(c,!0)}}}},onMouseDown:function(b){if("touchstart"==
b.type||q.isLeft(b))this.mouseDown=!0,this.mouseButton=b.button,this._lastX=b.pageX,this._lastY=b.pageY;this.inherited(arguments)},onMouseUp:function(b){this.mouseDown&&(this.mouseDown=!1,this.inherited(arguments))},onMouseOut:function(){this.inherited(arguments);this._unmarkTargetAnchor()},checkItemAcceptance:function(){return!0},onDndSourceOver:function(c){this!=c?(this.mouseDown=!1,this._unmarkTargetAnchor()):this.isDragging&&b.manager().canDrop(!1)},onDndStart:function(c,d,e){this.isSource&&this._changeState("Source",
this==c?e?"Copied":"Moved":"");d=this.checkAcceptance(c,d);this._changeState("Target",d?"":"Disabled");this==c&&b.manager().overSource(this);this.isDragging=!0},itemCreator:function(b){return m.map(b,function(b){return{id:b.id,name:b.textContent||b.innerText||""}})},onDndDrop:function(b,c,d){if("Over"==this.containerState){var e=this.tree,g=e.model,f=this.targetAnchor,h=!1;this.isDragging=!1;var k,l,q;k=f&&f.item||e.item;"Before"==this.dropPosition||"After"==this.dropPosition?(k=f.getParent()&&f.getParent().item||
e.item,l=f.getIndexInParent(),"After"==this.dropPosition?(l=f.getIndexInParent()+1,q=f.getNextSibling()&&f.getNextSibling().item):q=f.item):(k=f&&f.item||e.item,h=!0);var r;m.forEach(c,function(e,h){e=b.getItem(e.id);if(-1!=m.indexOf(e.type,"treeNode"))var p=e.data,t=p.item,u=p.getParent().item;b==this?("number"==typeof l&&k==u&&p.getIndexInParent()<l&&--l,g.pasteItem(t,u,k,d,l,q)):g.isItem(t)?g.pasteItem(t,u,k,d,l,q):(r||(r=this.itemCreator(c,f.rowNode,b)),g.newItem(r[h],k,l,q))},this);h&&this.tree._expandNode(f)}this.onDndCancel()},
onDndCancel:function(){this._unmarkTargetAnchor();this.mouseDown=this.isDragging=!1;delete this.mouseButton;this._changeState("Source","");this._changeState("Target","")},onOverEvent:function(){this.inherited(arguments);b.manager().overSource(this)},onOutEvent:function(){this._unmarkTargetAnchor();var c=b.manager();this.isDragging&&c.canDrop(!1);c.outSource(this);this.inherited(arguments)},_isParentChildDrop:function(b,c){if(!b.tree||b.tree!=this.tree)return!1;var d=b.tree.domNode;b=b.selection;for(c=
c.parentNode;c!=d&&!b[c.id];)c=c.parentNode;return c.id&&b[c.id]},_unmarkTargetAnchor:function(){this.targetAnchor&&(this._removeItemClass(this.targetAnchor.rowNode,this.dropPosition),this.dropPosition=this.targetBox=this.targetAnchor=null)},_markDndStatus:function(b){this._changeState("Source",b?"Copied":"Moved")}})})},"dijit/tree/_dndSelector":function(){define("dijit/tree/_dndSelector","dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/dnd/common dojo/dom dojo/mouse dojo/on dojo/touch ../a11yclick ./_dndContainer".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b){return p("dijit.tree._dndSelector",b,{constructor:function(){this.selection={};this.anchor=null;this.events.push(g(this.tree.domNode,e.press,l.hitch(this,"onMouseDown")),g(this.tree.domNode,e.release,l.hitch(this,"onMouseUp")),g(this.tree.domNode,e.move,l.hitch(this,"onMouseMove")),g(this.tree.domNode,c.press,l.hitch(this,"onClickPress")),g(this.tree.domNode,c.release,l.hitch(this,"onClickRelease")))},singular:!1,getSelectedTreeNodes:function(){var b=[],c=this.selection,
e;for(e in c)b.push(c[e]);return b},selectNone:function(){this.setSelection([]);return this},destroy:function(){this.inherited(arguments);this.selection=this.anchor=null},addTreeNode:function(b,c){this.setSelection(this.getSelectedTreeNodes().concat([b]));c&&(this.anchor=b);return b},removeTreeNode:function(b){var c=m.filter(this.getSelectedTreeNodes(),function(c){return!h.isDescendant(c.domNode,b.domNode)});this.setSelection(c);return b},isTreeNodeSelected:function(b){return b.id&&!!this.selection[b.id]},
setSelection:function(b){var c=this.getSelectedTreeNodes();m.forEach(this._setDifference(c,b),l.hitch(this,function(b){b.setSelected(!1);this.anchor==b&&delete this.anchor;delete this.selection[b.id]}));m.forEach(this._setDifference(b,c),l.hitch(this,function(b){b.setSelected(!0);this.selection[b.id]=b}));this._updateSelectionProperties()},_setDifference:function(b,c){m.forEach(c,function(b){b.__exclude__=!0});b=m.filter(b,function(b){return!b.__exclude__});m.forEach(c,function(b){delete b.__exclude__});
return b},_updateSelectionProperties:function(){var b=this.getSelectedTreeNodes(),c=[],e=[];m.forEach(b,function(b){var d=b.getTreePath();e.push(b);c.push(d)},this);b=m.map(e,function(b){return b.item});this.tree._set("paths",c);this.tree._set("path",c[0]||[]);this.tree._set("selectedNodes",e);this.tree._set("selectedNode",e[0]||null);this.tree._set("selectedItems",b);this.tree._set("selectedItem",b[0]||null)},onClickPress:function(b){if(!(this.current&&this.current.isExpandable&&this.tree.isExpandoNode(b.target,
this.current))){"mousedown"==b.type&&q.isLeft(b)&&b.preventDefault();var c="keydown"==b.type?this.tree.focusedChild:this.current;if(c){var d=k.getCopyKeyState(b),e=c.id;this.singular||b.shiftKey||!this.selection[e]?(this._doDeselect=!1,this.userSelect(c,d,b.shiftKey)):this._doDeselect=!0}}},onClickRelease:function(b){this._doDeselect&&(this._doDeselect=!1,this.userSelect("keyup"==b.type?this.tree.focusedChild:this.current,k.getCopyKeyState(b),b.shiftKey))},onMouseMove:function(){this._doDeselect=
!1},onMouseDown:function(){},onMouseUp:function(){},_compareNodes:function(b,c){if(b===c)return 0;if("sourceIndex"in document.documentElement)return b.sourceIndex-c.sourceIndex;if("compareDocumentPosition"in document.documentElement)return b.compareDocumentPosition(c)&2?1:-1;if(document.createRange){var d=doc.createRange();d.setStartBefore(b);b=doc.createRange();b.setStartBefore(c);return d.compareBoundaryPoints(d.END_TO_END,b)}throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");
},userSelect:function(b,c,e){if(this.singular)this.anchor==b&&c?this.selectNone():(this.setSelection([b]),this.anchor=b);else if(e&&this.anchor){c=this._compareNodes(this.anchor.rowNode,b.rowNode);e=this.anchor;0>c?c=e:(c=b,b=e);for(e=[];c!=b;)e.push(c),c=this.tree._getNext(c);e.push(b);this.setSelection(e)}else this.selection[b.id]&&c?this.removeTreeNode(b):c?this.addTreeNode(b,!0):(this.setSelection([b]),this.anchor=b)},getItem:function(b){return{data:this.selection[b],type:["treeNode"]}},forInSelectedItems:function(b,
c){c=c||f.global;for(var d in this.selection)b.call(c,this.getItem(d),d,this)}})})},"dijit/tree/_dndContainer":function(){define("dijit/tree/_dndContainer","dojo/aspect dojo/_base/declare dojo/dom-class dojo/_base/lang dojo/on dojo/touch".split(" "),function(m,p,f,l,k,h){return p("dijit.tree._dndContainer",null,{constructor:function(q,g){this.tree=q;this.node=q.domNode;l.mixin(this,g);this.containerState="";f.add(this.node,"dojoDndContainer");this.events=[k(this.node,h.enter,l.hitch(this,"onOverEvent")),
k(this.node,h.leave,l.hitch(this,"onOutEvent")),m.after(this.tree,"_onNodeMouseEnter",l.hitch(this,"onMouseOver"),!0),m.after(this.tree,"_onNodeMouseLeave",l.hitch(this,"onMouseOut"),!0),k(this.node,"dragstart, selectstart",function(e){e.preventDefault()})]},destroy:function(){for(var f;f=this.events.pop();)f.remove();this.node=this.parent=null},onMouseOver:function(f){this.current=f},onMouseOut:function(){this.current=null},_changeState:function(h,g){var e="dojoDnd"+h;h=h.toLowerCase()+"State";f.replace(this.node,
e+g,e+this[h]);this[h]=g},_addItemClass:function(h,g){f.add(h,"dojoDndItem"+g)},_removeItemClass:function(h,g){f.remove(h,"dojoDndItem"+g)},onOverEvent:function(){this._changeState("Container","Over")},onOutEvent:function(){this._changeState("Container","")}})})},"sixmaps/dijits/CheckBoxStoreModel":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dijit/tree/TreeStoreModel"],function(m,p,f,l){return p("sixmaps.dijits.CheckBoxStoreModel",[l],{checkboxIdent:"checkbox",checkboxAll:!0,
checkboxRoot:!1,checkboxState:!1,checkboxInheritance:"mixed",updateCheckBox:function(f,h){"mixed"!=h&&("none"==this.checkboxInheritance?this._setCheckBoxState(f,h):this._updateChildCheckBox(f,h))},getCheckBoxState:function(f){var h=void 0;f==this.root?"undefined"==typeof f.checkBox?(this.root.checkBox=void 0,this.checkboxRoot&&(this._setCheckBoxState(f,this.checkboxState,!1),h=this.checkboxState)):h=this.root.checkBox:(h=this.store.getValue(f,this.checkboxIdent),void 0==h&&this.checkboxAll&&(this._setCheckBoxState(f,
this.checkboxState,!1),h=this.checkboxState));return h},_setCheckBoxState:function(f,h){var k=!0;if(f!=this.root){var g=this.store.getValue(f,this.checkboxIdent);g==h||void 0===g&&!this.checkboxAll?k=!1:this.store.setValue(f,this.checkboxIdent,h)}else this.root.checkBox==h||void 0===this.root.checkBox&&!this.checkboxRoot?k=!1:this.root.checkBox=h;if(k)this.onCheckBoxChange(f,h);return k},_updateChildCheckBox:function(k,h){var l=this;"none"!=this.checkboxInheritance&&(this.mayHaveChildren(k)?"mixed"==
this.checkboxInheritance?(1==h&&this.getChildren(k,f.hitch(this,function(g){var e=m.every(g,function(b){return ret=0==l.store.getValue(b,l.checkboxIdent)}),c=!e&&!m.every(g,function(b){return 1==l.store.getValue(b,l.checkboxIdent)});e?m.forEach(g,function(b){this._updateChildCheckBox(b,h)},this):c&&(h="mixed")}),function(g){}),this._setCheckBoxState(k,h)&&this._updateParentCheckBox(k)):this.getChildren(k,f.hitch(this,function(g){m.forEach(g,function(e){this._updateChildCheckBox(e,h)},this)}),function(g){}):
this._setCheckBoxState(k,h)&&this._updateParentCheckBox(k))},_updateParentCheckBox:function(k){var h=this._getParentsItem(k);m.forEach(h,function(h){this.getChildren(h,f.hitch(this,function(g){var e=!1,c=!1;g=m.some(g,function(b){b=this.getCheckBoxState(b);if("mixed"==b)return!0;b?e=!0:c=!0},this);state=!g&&e^c?e:"mixed";if(this._isValidating||"strict"==this.checkboxInheritance||this.getCheckBoxState(h)||this.getCheckBoxState(k)&&this.getCheckBoxState(h)||!this._isValidating&&(e||g))this._setCheckBoxState(h,
state),this._updateParentCheckBox(h)}),function(g){})},this)},_getParentsItem:function(f){var h=[];if(f!=this.root)for(itemId in f=f[this.store._reverseRefMap],f)f[itemId][this.childrenAttrs[0]]&&h.push(this.store._itemsByIdentity[itemId]);return h},validateData:function(f){if("none"!==this.checkboxInheritance){try{this.store._forceLoad()}catch(h){}this._isValidating=!0;this._validateStore(f);this._isValidating=!1}},_validateStore:function(f){var h=this;h.getChildren(f,function(f){var g=[];m.forEach(f,
function(e){for(e.children&&g.push(e.children);g.length;){var c=g.pop();m.forEach(c,function(b){if("strict"==h.checkboxInheritance){var c=h._getParentsItem(b)[0];h.getCheckBoxState(e)&&h.getCheckBoxState(c)?1==h.getCheckBoxState(e)&&h._updateParentCheckBox(b):h._setCheckBoxState(b,!1);b.children&&1==h.getCheckBoxState(b)&&(c=b.children,m.forEach(c,function(b){h._setCheckBoxState(b,!0)}))}else"mixed"==h.checkboxInheritance&&(1==h.getCheckBoxState(e)&&h._updateParentCheckBox(b),b.children&&1==h.getCheckBoxState(b)&&
(c=b.children,m.some(c,function(b){return h.getCheckBoxState(b)})||h._setCheckBoxState(b,!1)));b.children&&g.push(b.children)})}})},function(f){})},onCheckBoxChange:function(f){}})})},"dijit/tree/TreeStoreModel":function(){define("dijit/tree/TreeStoreModel",["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(m,p,f,l){return f("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",root:null,query:null,deferItemLoadingUntilExpand:!1,
constructor:function(f){l.mixin(this,f);this.connects=[];f=this.store;if(!f.getFeatures()["dojo.data.api.Identity"])throw Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");f.getFeatures()["dojo.data.api.Notification"]&&(this.connects=this.connects.concat([p.after(f,"onNew",l.hitch(this,"onNewItem"),!0),p.after(f,"onDelete",l.hitch(this,"onDeleteItem"),!0),p.after(f,"onSet",l.hitch(this,"onSetItem"),!0)]))},destroy:function(){for(var f;f=this.connects.pop();)f.remove()},getRoot:function(f,
h){this.root?f(this.root):this.store.fetch({query:this.query,onComplete:l.hitch(this,function(h){if(1!=h.length)throw Error("dijit.tree.TreeStoreModel: root query returned "+h.length+" items, but must return exactly one");this.root=h[0];f(this.root)}),onError:h})},mayHaveChildren:function(f){return m.some(this.childrenAttrs,function(h){return this.store.hasAttribute(f,h)},this)},getChildren:function(f,h,q){var g=this.store;if(g.isItemLoaded(f)){for(var e=[],c=0;c<this.childrenAttrs.length;c++)var b=
g.getValues(f,this.childrenAttrs[c]),e=e.concat(b);var d=0;this.deferItemLoadingUntilExpand||m.forEach(e,function(b){g.isItemLoaded(b)||d++});0==d?h(e):m.forEach(e,function(b,c){g.isItemLoaded(b)||g.loadItem({item:b,onItem:function(b){e[c]=b;0==--d&&h(e)},onError:q})})}else{var k=l.hitch(this,arguments.callee);g.loadItem({item:f,onItem:function(b){k(b,h,q)},onError:q})}},isItem:function(f){return this.store.isItem(f)},fetchItemByIdentity:function(f){this.store.fetchItemByIdentity(f)},getIdentity:function(f){return this.store.getIdentity(f)},
getLabel:function(f){return this.labelAttr?this.store.getValue(f,this.labelAttr):this.store.getLabel(f)},newItem:function(f,h,l){var g={parent:h,attribute:this.childrenAttrs[0]},e;this.newItemIdAttr&&f[this.newItemIdAttr]?this.fetchItemByIdentity({identity:f[this.newItemIdAttr],scope:this,onItem:function(c){c?this.pasteItem(c,null,h,!0,l):(e=this.store.newItem(f,g))&&void 0!=l&&this.pasteItem(e,h,h,!1,l)}}):(e=this.store.newItem(f,g))&&void 0!=l&&this.pasteItem(e,h,h,!1,l)},pasteItem:function(f,h,
l,g,e){var c=this.store,b=this.childrenAttrs[0];h&&m.forEach(this.childrenAttrs,function(d){if(c.containsValue(h,d,f)){if(!g){var e=m.filter(c.getValues(h,d),function(b){return b!=f});c.setValues(h,d,e)}b=d}});if(l)if("number"==typeof e){var d=c.getValues(l,b).slice();d.splice(e,0,f);c.setValues(l,b,d)}else c.setValues(l,b,c.getValues(l,b).concat(f))},onChange:function(){},onChildrenChange:function(){},onDelete:function(){},onNewItem:function(f,h){h&&this.getChildren(h.item,l.hitch(this,function(f){this.onChildrenChange(h.item,
f)}))},onDeleteItem:function(f){this.onDelete(f)},onSetItem:function(f,h){if(-1!=m.indexOf(this.childrenAttrs,h))this.getChildren(f,l.hitch(this,function(h){this.onChildrenChange(f,h)}));else this.onChange(f)}})})},"sixmaps/dijits/CheckBoxTree":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/aspect dojo/dom-style dojo/on dijit/a11yclick dijit/registry dijit/Tree sixmaps/util/Require sixmaps/dijits/_CheckBoxTreeNode".split(" "),function(m,p,f,l,k,h,q,g,
e,c,b,d){return p("sixmaps.dijits.CheckBoxTree",c,{rootCheckbox:!1,checkboxStyle:"dijit",checkboxMultiState:!0,branchIcons:!0,nodeIcons:!0,constructor:function(){var c=require.toUrl("sixmaps/dijits/CheckBoxTree/");b.requireCss(c+"themes/claro/sixmapsdijits.css")},getIconClass:function(b,c){return!b||this.model.mayHaveChildren(b)?this.branchIcons?c?"dijitFolderOpened":"dijitFolderClosed":"":this.nodeIcons?"dijitLeaf":""},onNodeChecked:function(b,c){},onNodeUnchecked:function(b,c){},_onClick:function(b,
c){if("INPUT"!=c.target.nodeName)return this.inherited(arguments);this._publish("execute",{item:b.item,node:b});this.model.updateCheckBox(b.item,b._getCheckedState());this.onClick(b.item,b,c);if(b._getCheckedState())this.onNodeChecked(b.item,b);else this.onNodeUnchecked(b.item,b);this.focusNode(b);"dijit"==this.checkboxStyle&&f.stop(c)},_onCheckBoxChange:function(b){var c=this.model,d=c.getCheckBoxState(b);b=c.getIdentity(b);(b=this._itemNodesMap[b])&&m.forEach(b,function(b){null!=b._checkBox&&b._setCheckedState(d)},
this);this.onCheckBoxChange()},onCheckBoxChange:function(){},postCreate:function(){var b=this;if(!b.model.store.getFeatures()["dojo.data.api.Write"])throw Error("sixmaps.dijits.CheckBoxTree: store must support dojo.data.Write");q(b.containerNode,g,function(c){var g=e.getEnclosingWidget(c.target);g.isInstanceOf(d)||(g=g.getParent());var f=-1<c.target.className.indexOf("dijitTreeExpando")?!0:!1;g.isInstanceOf(d)&&!f&&b._onClick(g,c)});k.after(b.model,"onCheckBoxChange",l.hitch(b,"_onCheckBoxChange"),
!0);b.model.getRoot(function(c){b.model.validateData(c)});this.inherited(arguments);!1===b.rootCheckbox&&h.set(b.rootNode._checkBox.domNode,"display","none")},_createTreeNode:function(b){return new d(b)},onClick:function(b,c,d){var e=this;if(d.ctrlKey&&b&&(c=e.model._getParentsItem(b))&&c.length){c=c[0].children;var g=e.model.store.getValue(b,"checkbox");m.forEach(c,function(b){e.model.updateCheckBox(b,g)})}},resize:function(b){var c=this._nodePixelIndent;this.inherited(arguments);0==this._nodePixelIndent&&
(this._nodePixelIndent=c);this.tree.rootNode&&this.tree.rootNode.set("indent",this.showRoot?0:-1)}})})},"dijit/Tree":function(){require({cache:{"url:dijit/templates/TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\r\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"contentNode"\r\n\t\t\tclass\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem"\r\n\t\t\t\t   tabindex\x3d"-1" aria-selected\x3d"false" id\x3d"${id}_label"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\r\n\t\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation"\r\n\t\t style\x3d"display: none;" aria-labelledby\x3d"${id}_label"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/Tree.html":'\x3cdiv role\x3d"tree"\x3e\r\n\t\x3cdiv class\x3d"dijitInline dijitTreeIndent" style\x3d"position: absolute; top: -9999px" data-dojo-attach-point\x3d"indentDetector"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTreeExpando dijitTreeExpandoLoading" data-dojo-attach-point\x3d"rootLoadingIndicator"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeContainer" role\x3d"presentation"\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n'}});define("dijit/Tree",
"dojo/_base/array dojo/aspect dojo/cookie dojo/_base/declare dojo/Deferred dojo/promise/all dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/errors/create dojo/fx dojo/has dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/topic dojo/touch dojo/when ./a11yclick ./focus ./registry ./_base/manager ./_Widget ./_TemplatedMixin ./_Container ./_Contained ./_CssStateMixin ./_KeyNavMixin dojo/text!./templates/TreeNode.html dojo/text!./templates/Tree.html ./tree/TreeStoreModel ./tree/ForestStoreModel ./tree/_dndSelector dojo/query!css2".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x,w,y,z,B,A,C,F,E,H,D,G,I,P,Q,O,N,M,J){function K(b){return t.delegate(b.promise||b,{addCallback:function(b){this.then(b)},addErrback:function(b){this.otherwise(b)}})}var U=l("dijit._TreeNode",[E,H,D,G,I],{item:null,isTreeNode:!0,label:"",_setLabelAttr:function(b){this.labelNode["html"==this.labelType?"innerHTML":"innerText"in this.labelNode?"innerText":"textContent"]=b;this._set("label",b);r("dojo-bidi")&&this.applyTextDir(this.labelNode)},labelType:"text",
isExpandable:null,isExpanded:!1,state:"NotLoaded",templateString:Q,baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);this._setExpando();this._updateItemClasses(this.item);this.isExpandable&&this.labelNode.setAttribute("aria-expanded",this.isExpanded);this.setSelected(!1)},_setIndentAttr:function(b){var d=Math.max(b,0)*this.tree._nodePixelIndent+"px";c.set(this.domNode,
"backgroundPosition",d+" 0px");c.set(this.rowNode,this.isLeftToRight()?"paddingLeft":"paddingRight",d);m.forEach(this.getChildren(),function(c){c.set("indent",b+1)});this._set("indent",b)},markProcessing:function(){this.state="Loading";this._setExpando(!0)},unmarkProcessing:function(){this._setExpando(!1)},_updateItemClasses:function(b){var c=this.tree,d=c.model;c._v10Compat&&b===d.root&&(b=null);this._applyClassAndStyle(b,"icon","Icon");this._applyClassAndStyle(b,"label","Label");this._applyClassAndStyle(b,
"row","Row");this.tree._startPaint(!0)},_applyClassAndStyle:function(b,d,e){var f="_"+d+"Class";d+="Node";var h=this[f];this[f]=this.tree["get"+e+"Class"](b,this.isExpanded);g.replace(this[d],this[f]||"",h||"");c.set(this[d],this.tree["get"+e+"Style"](b,this.isExpanded)||{})},_updateLayout:function(){var b=this.getParent(),b=!b||!b.rowNode||"none"==b.rowNode.style.display;g.toggle(this.domNode,"dijitTreeIsRoot",b);g.toggle(this.domNode,"dijitTreeIsLast",!b&&!this.getNextSibling())},_setExpando:function(b){var c=
["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"];b=b?0:this.isExpandable?this.isExpanded?1:2:3;g.replace(this.expandoNode,c[b],c);this.expandoNodeText.innerHTML=["*","-","+","*"][b]},expand:function(){if(this._expandDeferred)return K(this._expandDeferred);this._collapseDeferred&&(this._collapseDeferred.cancel(),delete this._collapseDeferred);this.isExpanded=!0;this.labelNode.setAttribute("aria-expanded","true");(this.tree.showRoot||this!==this.tree.rootNode)&&
this.containerNode.setAttribute("role","group");g.add(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","true");var b=d.wipeIn({node:this.containerNode,duration:F.defaultDuration}),c=this._expandDeferred=new k(function(){b.stop()});p.after(b,"onEnd",function(){c.resolve(!0)},!0);b.play();return K(c)},collapse:function(){if(this._collapseDeferred)return K(this._collapseDeferred);
this._expandDeferred&&(this._expandDeferred.cancel(),delete this._expandDeferred);this.isExpanded=!1;this.labelNode.setAttribute("aria-expanded","false");this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","false");g.remove(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);var b=d.wipeOut({node:this.containerNode,duration:F.defaultDuration}),c=this._collapseDeferred=new k(function(){b.stop()});p.after(b,"onEnd",
function(){c.resolve(!0)},!0);b.play();return K(c)},indent:0,setChildItems:function(b){var c=this.tree,d=c.model,e=[],g=c.focusedChild,f=this.getChildren();m.forEach(f,function(b){D.prototype.removeChild.call(this,b)},this);this.defer(function(){m.forEach(f,function(b){if(!b._destroyed&&!b.getParent()){var e=function(b){var g=d.getIdentity(b.item),f=c._itemNodesMap[g];1==f.length?delete c._itemNodesMap[g]:(g=m.indexOf(f,b),-1!=g&&f.splice(g,1));m.forEach(b.getChildren(),e)};c.dndController.removeTreeNode(b);
e(b);if(c.persist){var f=m.map(b.getTreePath(),function(b){return c.model.getIdentity(b)}).join("/"),h;for(h in c._openedNodes)h.substr(0,f.length)==f&&delete c._openedNodes[h];c._saveExpandedNodes()}c.lastFocusedChild&&!q.isDescendant(c.lastFocusedChild.domNode,c.domNode)&&delete c.lastFocusedChild;g&&!q.isDescendant(g.domNode,c.domNode)&&c.focus();b.destroyRecursive()}})});this.state="Loaded";b&&0<b.length?(this.isExpandable=!0,m.forEach(b,function(b){var g=d.getIdentity(b),f=c._itemNodesMap[g],
h;if(f)for(var k=0;k<f.length;k++)if(f[k]&&!f[k].getParent()){h=f[k];h.set("indent",this.indent+1);break}h||(h=this.tree._createTreeNode({item:b,tree:c,isExpandable:d.mayHaveChildren(b),label:c.getLabel(b),labelType:c.model&&c.model.labelType||"text",tooltip:c.getTooltip(b),ownerDocument:c.ownerDocument,dir:c.dir,lang:c.lang,textDir:c.textDir,indent:this.indent+1}),f?f.push(h):c._itemNodesMap[g]=[h]);this.addChild(h);(this.tree.autoExpand||this.tree._state(h))&&e.push(c._expandNode(h))},this),m.forEach(this.getChildren(),
function(b){b._updateLayout()})):this.isExpandable=!1;this._setExpando&&this._setExpando(!1);this._updateItemClasses(this.item);b=h(e);this.tree._startPaint(b);return K(b)},getTreePath:function(){for(var b=this,c=[];b&&b!==this.tree.rootNode;)c.unshift(b.item),b=b.getParent();c.unshift(this.tree.rootNode.item);return c},getIdentity:function(){return this.tree.model.getIdentity(this.item)},removeChild:function(b){this.inherited(arguments);var c=this.getChildren();0==c.length&&(this.isExpandable=!1,
this.collapse());m.forEach(c,function(b){b._updateLayout()})},makeExpandable:function(){this.isExpandable=!0;this._setExpando(!1)},setSelected:function(b){this.labelNode.setAttribute("aria-selected",b?"true":"false");g.toggle(this.rowNode,"dijitTreeRowSelected",b)},focus:function(){A.focus(this.focusNode)}});r("dojo-bidi")&&U.extend({_setTextDirAttr:function(b){!b||this.textDir==b&&this._created||(this._set("textDir",b),this.applyTextDir(this.labelNode),m.forEach(this.getChildren(),function(c){c.set("textDir",
b)},this))}});var R=l("dijit.Tree",[E,P,H,I],{baseClass:"dijitTree",store:null,model:null,query:null,label:"",showRoot:!0,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:!1,openOnDblClick:!1,templateString:O,persist:!1,autoExpand:!1,dndController:J,dndParams:"onDndDrop itemCreator onDndCancel checkAcceptance checkItemAcceptance dragThreshold betweenThreshold".split(" "),onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,checkItemAcceptance:null,
dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(b,c){w.publish(this.id,t.mixin({tree:this,event:b},c||{}))},postMixInProperties:function(){this.tree=this;this.autoExpand&&(this.persist=!1);this._itemNodesMap={};!this.cookieName&&this.id&&(this.cookieName=this.id+"SaveStateCookie");this.expandChildrenDeferred=new k;this.pendingCommandsPromise=this.expandChildrenDeferred.promise;this.inherited(arguments)},postCreate:function(){this._initState();var b=this;this.own(x(this.containerNode,
x.selector(".dijitTreeNode",y.enter),function(c){b._onNodeMouseEnter(C.byNode(this),c)}),x(this.containerNode,x.selector(".dijitTreeNode",y.leave),function(c){b._onNodeMouseLeave(C.byNode(this),c)}),x(this.containerNode,x.selector(".dijitTreeRow",B.press),function(c){b._onNodePress(C.getEnclosingWidget(this),c)}),x(this.containerNode,x.selector(".dijitTreeRow",B),function(c){b._onClick(C.getEnclosingWidget(this),c)}),x(this.containerNode,x.selector(".dijitTreeRow","dblclick"),function(c){b._onDblClick(C.getEnclosingWidget(this),
c)}));this.model||this._store2model();this.own(p.after(this.model,"onChange",t.hitch(this,"_onItemChange"),!0),p.after(this.model,"onChildrenChange",t.hitch(this,"_onItemChildrenChange"),!0),p.after(this.model,"onDelete",t.hitch(this,"_onItemDelete"),!0));this.inherited(arguments);if(this.dndController){t.isString(this.dndController)&&(this.dndController=t.getObject(this.dndController));for(var c={},d=0;d<this.dndParams.length;d++)this[this.dndParams[d]]&&(c[this.dndParams[d]]=this[this.dndParams[d]]);
this.dndController=new this.dndController(this,c)}this._load();this.onLoadDeferred=K(this.pendingCommandsPromise);this.onLoadDeferred.then(t.hitch(this,"onLoad"))},_store2model:function(){this._v10Compat=!0;v.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var b={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};this.params.mayHaveChildren&&(b.mayHaveChildren=t.hitch(this,"mayHaveChildren"));this.params.getItemChildren&&
(b.getChildren=t.hitch(this,function(b,c,d){this.getItemChildren(this._v10Compat&&b===this.model.root?null:b,c,d)}));this.model=new M(b);this.showRoot=!!this.label},onLoad:function(){},_load:function(){this.model.getRoot(t.hitch(this,function(b){var c=this.rootNode=this.tree._createTreeNode({item:b,tree:this,isExpandable:!0,label:this.label||this.getLabel(b),labelType:this.model.labelType||"text",textDir:this.textDir,indent:this.showRoot?0:-1});this.showRoot?(this.domNode.setAttribute("aria-multiselectable",
!this.dndController.singular),this.rootLoadingIndicator.style.display="none"):(c.rowNode.style.display="none",this.domNode.setAttribute("role","presentation"),this.domNode.removeAttribute("aria-expanded"),this.domNode.removeAttribute("aria-multiselectable"),this["aria-label"]?(c.containerNode.setAttribute("aria-label",this["aria-label"]),this.domNode.removeAttribute("aria-label")):this["aria-labelledby"]&&(c.containerNode.setAttribute("aria-labelledby",this["aria-labelledby"]),this.domNode.removeAttribute("aria-labelledby")),
c.labelNode.setAttribute("role","presentation"),c.labelNode.removeAttribute("aria-selected"),c.containerNode.setAttribute("role","tree"),c.containerNode.setAttribute("aria-expanded","true"),c.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular));this.containerNode.appendChild(c.domNode);b=this.model.getIdentity(b);this._itemNodesMap[b]?this._itemNodesMap[b].push(c):this._itemNodesMap[b]=[c];c._updateLayout();this._expandNode(c).then(t.hitch(this,function(){this._destroyed||
(this.rootLoadingIndicator.style.display="none",this.expandChildrenDeferred.resolve(!0))}))}),t.hitch(this,function(b){}))},getNodesByItem:function(b){if(!b)return[];b=t.isString(b)?b:this.model.getIdentity(b);return[].concat(this._itemNodesMap[b])},_setSelectedItemAttr:function(b){this.set("selectedItems",[b])},_setSelectedItemsAttr:function(b){var c=this;return this.pendingCommandsPromise=this.pendingCommandsPromise.always(t.hitch(this,function(){var d=m.map(b,function(b){return!b||t.isString(b)?
b:c.model.getIdentity(b)}),e=[];m.forEach(d,function(b){e=e.concat(c._itemNodesMap[b]||[])});this.set("selectedNodes",e)}))},_setPathAttr:function(b){return b.length?K(this.set("paths",[b]).then(function(b){return b[0]})):K(this.set("paths",[]).then(function(b){return b[0]}))},_setPathsAttr:function(b){function c(b,e){var g=b.shift(),f=m.filter(e,function(b){return b.getIdentity()==g})[0];if(f)return b.length?d._expandNode(f).then(function(){return c(b,f.getChildren())}):f;throw new R.PathError("Could not expand path at "+
g);}var d=this;return K(this.pendingCommandsPromise=this.pendingCommandsPromise.always(function(){return h(m.map(b,function(b){b=m.map(b,function(b){return b&&t.isObject(b)?d.model.getIdentity(b):b});if(b.length)return c(b,[d.rootNode]);throw new R.PathError("Empty path");}))}).then(function(b){d.set("selectedNodes",b);return d.paths}))},_setSelectedNodeAttr:function(b){this.set("selectedNodes",[b])},_setSelectedNodesAttr:function(b){this.dndController.setSelection(b)},expandAll:function(){function b(d){return c._expandNode(d).then(function(){var c=
m.filter(d.getChildren()||[],function(b){return b.isExpandable});return h(m.map(c,b))})}var c=this;return K(b(this.rootNode))},collapseAll:function(){function b(d){var e=m.filter(d.getChildren()||[],function(b){return b.isExpandable}),e=h(m.map(e,b));return!d.isExpanded||d==c.rootNode&&!c.showRoot?e:e.then(function(){return c._collapseNode(d)})}var c=this;return K(b(this.rootNode))},mayHaveChildren:function(){},getItemChildren:function(){},getLabel:function(b){return this.model.getLabel(b)},getIconClass:function(b,
c){return!b||this.model.mayHaveChildren(b)?c?"dijitFolderOpened":"dijitFolderClosed":"dijitLeaf"},getLabelClass:function(){},getRowClass:function(){},getIconStyle:function(){},getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return""},_onDownArrow:function(b,c){(b=this._getNext(c))&&b.isTreeNode&&this.focusNode(b)},_onUpArrow:function(b,c){if(b=c.getPreviousSibling())for(c=b;c.isExpandable&&c.isExpanded&&c.hasChildren();)c=c.getChildren(),c=c[c.length-1];else if(b=c.getParent(),
this.showRoot||b!==this.rootNode)c=b;c&&c.isTreeNode&&this.focusNode(c)},_onRightArrow:function(b,c){c.isExpandable&&!c.isExpanded?this._expandNode(c):c.hasChildren()&&(c=c.getChildren()[0])&&c.isTreeNode&&this.focusNode(c)},_onLeftArrow:function(b,c){c.isExpandable&&c.isExpanded?this._collapseNode(c):(b=c.getParent())&&b.isTreeNode&&(this.showRoot||b!==this.rootNode)&&this.focusNode(b)},focusLastChild:function(){var b=this._getLast();b&&b.isTreeNode&&this.focusNode(b)},_getFirst:function(){return this.showRoot?
this.rootNode:this.rootNode.getChildren()[0]},_getLast:function(){for(var b=this.rootNode;b.isExpanded;){var c=b.getChildren();if(!c.length)break;b=c[c.length-1]}return b},_getNext:function(b){if(b.isExpandable&&b.isExpanded&&b.hasChildren())return b.getChildren()[0];for(;b&&b.isTreeNode;){var c=b.getNextSibling();if(c)return c;b=b.getParent()}return null},childSelector:".dijitTreeRow",isExpandoNode:function(b,c){return q.isDescendant(b,c.expandoNode)||q.isDescendant(b,c.expandoNodeText)},_onNodePress:function(b,
c){this.focusNode(b)},__click:function(b,c,d,e){var g=this.isExpandoNode(c.target,b);b.isExpandable&&(d||g)?this._onExpandoClick({node:b}):(this._publish("execute",{item:b.item,node:b,evt:c}),this[e](b.item,b,c),this.focusNode(b));c.stopPropagation();c.preventDefault()},_onClick:function(b,c){this.__click(b,c,this.openOnClick,"onClick")},_onDblClick:function(b,c){this.__click(b,c,this.openOnDblClick,"onDblClick")},_onExpandoClick:function(b){b=b.node;this.focusNode(b);b.isExpanded?this._collapseNode(b):
this._expandNode(b)},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(b){v.deprecated(this.declaredClass+"::_getNextNode(node) is deprecated. Use _getNext(node) instead.","","2.0");return this._getNext(b)},_getRootOrFirstNode:function(){v.deprecated(this.declaredClass+"::_getRootOrFirstNode() is deprecated. Use _getFirst() instead.","","2.0");return this._getFirst()},_collapseNode:function(b){b._expandNodeDeferred&&delete b._expandNodeDeferred;
if("Loading"!=b.state&&b.isExpanded){var c=b.collapse();this.onClose(b.item,b);this._state(b,!1);this._startPaint(c);return c}},_expandNode:function(b){if(b._expandNodeDeferred)return b._expandNodeDeferred;var c=this.model,d=b.item;b._loadDeferred||(b.markProcessing(),b._loadDeferred=new k,c.getChildren(d,function(c){b.unmarkProcessing();b.setChildItems(c).then(function(){b._loadDeferred.resolve(c)})},function(c){b._loadDeferred.reject(c)}));c=b._loadDeferred.then(t.hitch(this,function(){var c=b.expand();
this.onOpen(b.item,b);this._state(b,!0);return c}));this._startPaint(c);return c},focusNode:function(b){for(var c=[],d=this.domNode;d&&d.tagName&&"IFRAME"!==d.tagName.toUpperCase();d=d.parentNode)c.push({domNode:d.contentWindow||d,scrollLeft:d.scrollLeft||0,scrollTop:d.scrollTop||0});this.focusChild(b);this.defer(function(){for(var b=0,d=c.length;b<d;b++)c[b].domNode.scrollLeft=c[b].scrollLeft,c[b].domNode.scrollTop=c[b].scrollTop},0)},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},
_onItemChange:function(b){var c=this.model.getIdentity(b);if(c=this._itemNodesMap[c]){var d=this.getLabel(b),e=this.getTooltip(b);m.forEach(c,function(c){c.set({item:b,label:d,tooltip:e});c._updateItemClasses(b)})}},_onItemChildrenChange:function(b,c){b=this.model.getIdentity(b);(b=this._itemNodesMap[b])&&m.forEach(b,function(b){b.setChildItems(c)})},_onItemDelete:function(b){b=this.model.getIdentity(b);var c=this._itemNodesMap[b];c&&(m.forEach(c,function(b){this.dndController.removeTreeNode(b);var c=
b.getParent();c&&c.removeChild(b);this.lastFocusedChild&&!q.isDescendant(this.lastFocusedChild.domNode,this.domNode)&&delete this.lastFocusedChild;this.focusedChild&&!q.isDescendant(this.focusedChild.domNode,this.domNode)&&this.focus();b.destroyRecursive()},this),delete this._itemNodesMap[b])},_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var b=f(this.cookieName);b&&m.forEach(b.split(","),function(b){this._openedNodes[b]=!0},this)}},_state:function(b,c){if(!this.persist)return!1;
var d=m.map(b.getTreePath(),function(b){return this.model.getIdentity(b)},this).join("/");if(1===arguments.length)return this._openedNodes[d];c?this._openedNodes[d]=!0:delete this._openedNodes[d];this._saveExpandedNodes()},_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var b=[],c;for(c in this._openedNodes)b.push(c);f(this.cookieName,b.join(","),{expires:365})}},destroy:function(){this._curSearch&&(this._curSearch.timer.remove(),delete this._curSearch);this.rootNode&&this.rootNode.destroyRecursive();
this.dndController&&!t.isString(this.dndController)&&this.dndController.destroy();this.rootNode=null;this.inherited(arguments)},destroyRecursive:function(){this.destroy()},resize:function(b){b&&e.setMarginBox(this.domNode,b);this._nodePixelIndent=e.position(this.tree.indentDetector).w||this._nodePixelIndent;this.expandChildrenDeferred.then(t.hitch(this,function(){this.rootNode.set("indent",this.showRoot?0:-1);this._adjustWidths()}))},_outstandingPaintOperations:0,_startPaint:function(b){this._outstandingPaintOperations++;
this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);var c=t.hitch(this,function(){this._outstandingPaintOperations--;0>=this._outstandingPaintOperations&&!this._adjustWidthsTimer&&this._started&&(this._adjustWidthsTimer=this.defer("_adjustWidths"))});z(b,c,c)},_adjustWidths:function(){this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);this.containerNode.style.width="auto";this.containerNode.style.width=this.domNode.scrollWidth>
this.domNode.offsetWidth?"auto":"100%"},_createTreeNode:function(b){return new U(b)},focus:function(){this.lastFocusedChild?this.focusNode(this.lastFocusedChild):this.focusFirstChild()}});r("dojo-bidi")&&R.extend({_setTextDirAttr:function(b){b&&this.textDir!=b&&(this._set("textDir",b),this.rootNode.set("textDir",b))}});R.PathError=b("TreePathError");R._TreeNode=U;return R})},"dijit/tree/ForestStoreModel":function(){define("dijit/tree/ForestStoreModel",["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel",
"dojo/_base/lang","./TreeStoreModel"],function(m,p,f,l,k){return p("dijit.tree.ForestStoreModel",k,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(f){this.root={store:this,root:!0,id:f.rootId,label:f.rootLabel,children:f.rootChildren}},mayHaveChildren:function(f){return f===this.root||this.inherited(arguments)},getChildren:function(f,k,g){f===this.root?this.root.children?k(this.root.children):this.store.fetch({query:this.query,onComplete:l.hitch(this,function(e){this.root.children=
e;k(e)}),onError:g}):this.inherited(arguments)},isItem:function(f){return f===this.root?!0:this.inherited(arguments)},fetchItemByIdentity:function(h){if(h.identity==this.root.id){var k=h.scope||f.global;h.onItem&&h.onItem.call(k,this.root)}else this.inherited(arguments)},getIdentity:function(f){return f===this.root?this.root.id:this.inherited(arguments)},getLabel:function(f){return f===this.root?this.root.label:this.inherited(arguments)},newItem:function(f,k,g){return k===this.root?(this.onNewRootItem(f),
this.store.newItem(f)):this.inherited(arguments)},onNewRootItem:function(){},pasteItem:function(f,k,g,e,c){if(k===this.root&&!e)this.onLeaveRoot(f);this.inherited(arguments,[f,k===this.root?null:k,g===this.root?null:g,e,c]);if(g===this.root)this.onAddToRoot(f)},onAddToRoot:function(f){},onLeaveRoot:function(f){},_requeryTop:function(){var f=this.root.children||[];this.store.fetch({query:this.query,onComplete:l.hitch(this,function(h){this.root.children=h;if(f.length!=h.length||m.some(f,function(g,
e){return h[e]!=g}))this.onChildrenChange(this.root,h)})})},onNewItem:function(f,k){this._requeryTop();this.inherited(arguments)},onDeleteItem:function(f){-1!=m.indexOf(this.root.children,f)&&this._requeryTop();this.inherited(arguments)},onSetItem:function(f,k,g,e){this._requeryTop();this.inherited(arguments)}})})},"sixmaps/dijits/_CheckBoxTreeNode":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/window dojo/dom-class dojo/dom-construct dijit/Tree sixmaps/dijits/CheckBox".split(" "),
function(m,p,f,l,k,h,q){return m("sixmaps.dijits._CheckBoxTreeNode",h._TreeNode,{constructor:function(){this.msgNode=k.create("span")},_checkBox:null,_createCheckBox:function(){var g=this.tree.model.getCheckBoxState(this.item);void 0!==g&&("dijit"==this.tree.checkboxStyle?this._checkBox=(new q).placeAt(this.expandoNode,"after"):(this._checkBox=f.doc.createElement("input"),this._checkBox.className="sixmapsdijitsHTMLCheckBox",this._checkBox.type="checkbox",k.place(this._checkBox,this.expandoNode,"after")),
this._setCheckedState(g));this.isExpandable?this.tree.branchIcons||l.remove(this.iconNode,"dijitTreeIcon"):this.tree.nodeIcons||l.remove(this.iconNode,"dijitTreeIcon")},_setItemAttr:function(g){g.msgNode&&(this.msgNode.innerHTML="",(g=this.tree.model.store.getValue(g,"msgNode"))&&k.place(g,this.msgNode))},_setCheckedState:function(g){this.tree.checkboxMultiState||"mixed"!=g||(g=!0);"dijit"==this.tree.checkboxStyle?this._checkBox.attr("checked",g):this._checkBox.checked=g},_getCheckedState:function(){return this._checkBox.checked},
postCreate:function(){this._createCheckBox();this.inherited(arguments);k.place(this.msgNode,this.labelNode,"before")}})})},"sixmaps/dijits/CheckBox":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dijit/form/CheckBox"],function(m,p,f,l){return p("sixmaps.dijits.CheckBox",[l],{baseClass:"sixmapsdijitsCheckBox",_setStateClass:function(){function f(b){h=h.concat(m.map(h,function(c){return c+b}),"dijit"+b)}var h=this.baseClass.split(" ");"mixed"==this.attr("checked")?f("Mixed"):
this.checked&&f("Checked");this.disabled?f("Disabled"):this._active?f(this.stateModifier+"Active"):(this._focused&&f("Focused"),this._hovering&&f(this.stateModifier+"Hover"));var l=this.stateNode||this.domNode,g={};m.forEach(l.className.split(" "),function(b){g[b]=!0});"_stateClasses"in this&&m.forEach(this._stateClasses,function(b){delete g[b]});m.forEach(h,function(b){g[b]=!0});var e=[],c;for(c in g)e.push(c);l.className=e.join(" ");this._stateClasses=h},_setValueAttr:function(k){"string"==typeof k&&
(this.value=k,f.set(this.focusNode,"value",k))},_getValueAttr:function(){return this.value}})})},"sixmaps/map/layers/KMLLayer":function(){define(["dojo/_base/array","dojo/_base/declare","esri/layers/KMLLayer"],function(m,p,f){return p("sixmaps.map.layers.KMLLayer",[f],{_addInternalLayers:function(){var f=this;m.forEach(f.getLayers(),function(k){k.parentLayer=f});f.inherited(arguments)}})})},"esri/layers/KMLLayer":function(){require({cache:{"esri/layers/KMLFolder":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel","../lang"],function(m,p,f,l,k){m=m(null,{declaredClass:"esri.layers.KMLFolder",constructor:function(f){p.mixin(this,f);k.isDefined(this.visibility)&&(this.visible=!!this.visibility)}});f("extend-esri")&&p.setObject("layers.KMLFolder",m,l);return m})},"esri/layers/KMLGroundOverlay":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./MapImage".split(" "),function(m,p,f,l,k,h){m=m([h],{declaredClass:"esri.layers.KMLGroundOverlay",
constructor:function(f){k.isDefined(this.visibility)&&(this.visible=!!this.visibility)}});f("extend-esri")&&p.setObject("layers.KMLGroundOverlay",m,l);return m})},"*noref":1}});define("esri/layers/KMLLayer","dojo/_base/kernel dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/sniff dojo/io-query dojo/dom-construct dojo/dom-style ../kernel ../config ../lang ../request ../urlUtils ../SpatialReference ../geometry/webMercatorUtils ../dijit/PopupTemplate ./layer ./KMLFolder ./KMLGroundOverlay ./MapImageLayer ./FeatureLayer".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x,w,y,z,B,A,C){var F=p([y],{declaredClass:"esri.layers.KMLLayer",serviceUrl:u.getProtocolForWebResource()+"//utility.arcgis.com/sharing/kml",constructor:function(b,c){this._url=u.urlToObject(this.url=b);this._outSR=c&&c.outSR||new t({wkid:4326});this._options=l.mixin({},c);d.defaults.kmlService&&(this.serviceUrl=d.defaults.kmlService);if(b=this.linkInfo=c&&c.linkInfo)this.visible=!!b.visibility,this._waitingForMap=!!b.viewFormat;(!b||b&&b.visibility&&!this._waitingForMap)&&
this._parseKml();this.refresh=l.hitch(this,this.refresh);this.registerConnectEvents("esri.layers.KMLLayer",!0)},getFeature:function(b){if(b){var c=b.type,d=b.id,e;switch(c){case "esriGeometryPoint":case "esriGeometryPolyline":case "esriGeometryPolygon":(b=this["_"+c])&&(e=l.getObject("_mode._featureMap."+d,!1,b));break;case "GroundOverlay":if(b=this._groundLyr){var g=b.getImages(),c=g.length;for(b=0;b<c;b++)if(g[b].id===d){e=g[b];break}}break;case "NetworkLink":k.some(this._links,function(b){return b.linkInfo&&
b.linkInfo.id===d?(e=b,!0):!1});break;case "Folder":for(c=(g=this.folders)?g.length:0,b=0;b<c;b++)if(g[b].id===d){e=g[b];break}}return e}},getLayers:function(){var b=[];this._groundLyr&&b.push(this._groundLyr);this._fLayers&&(b=b.concat(this._fLayers));this._links&&k.forEach(this._links,function(c){c.declaredClass&&b.push(c)});return b},setFolderVisibility:function(b,c){b&&(this._fireUpdateStart(),(b.visible=c)&&(c=this._areLocalAncestorsVisible(b)),this._setState(b,c),this._fireUpdateEnd())},_eventMap:{"network-link-error":["error"]},
onRefresh:function(){},onOpacityChange:function(){},onNetworkLinkError:function(){},_parseKml:function(b){var c=this;this._fireUpdateStart();this._io=v({url:this.serviceUrl,content:{url:this._url.path+this._getQueryParameters(b),model:"simple",folders:"",refresh:this.loaded?!0:void 0,outSR:h.toJson(this._outSR.toJson())},callbackParamName:"callback",load:function(b){c._io=null;c._initLayer(b)},error:function(b){c._io=null;b=l.mixin(Error(),b);b.message="Unable to load KML: "+(b.message||"");c._fireUpdateEnd(b);
c._errorHandler(b)}})},_initLayer:function(b){var c;this.loaded&&(c=[],k.forEach(this.folders,function(b){b.visible&&c.push(b.id)}),this._options.minScale=this.minScale,this._options.maxScale=this.maxScale,this._options.opacity=this.opacity,this._removeInternalLayers());this.name=b.name;this.description=b.description;this.snippet=b.snippet;this.visibility=b.visibility;this.featureInfos=b.featureInfos;var d,e,g=this.folders=b.folders,f=[],h;if(g)for(e=g.length,d=0;d<e;d++)h=g[d]=new z(g[d]),-1===h.parentFolderId&&
f.push(h);var g=this._links=b.networkLinks,m;e=g?g.length:0;for(d=0;d<e;d++)g[d].viewRefreshMode&&-1!==g[d].viewRefreshMode.toLowerCase().indexOf("onregion")||(m=l.mixin({},this._options),m.linkInfo=g[d],m.id&&(m.id=m.id+"_"+d),h=g[d]=new F(g[d].href,m),h._parentLayer=this,h._parentFolderId=this._getLinkParentId(h.linkInfo.id),h._linkErrorHandle=h.on("error,network-link-error",l.hitch(h,function(b){this._parentLayer.onNetworkLinkError(b.error)})));if((g=b.groundOverlays)&&0<g.length)for(m=l.mixin({},
this._options),m.id&&(m.id+="_mapImage"),h=this._groundLyr=new A(m),e=g.length,d=0;d<e;d++)h.addImage(new B(g[d]));(b=l.getObject("featureCollection.layers",!1,b))&&0<b.length&&(this._fLayers=[],k.forEach(b,function(b,c){var d=l.getObject("featureSet.features",!1,b);d&&0<d.length&&(m=l.mixin({outFields:["*"],infoTemplate:b.popupInfo?new w(b.popupInfo):null,editable:!1},this._options),m.id&&(m.id=m.id+"_"+c),m.webgl=!1,b.layerDefinition.capabilities="Query,Data",b=new C(b,m),b.geometryType&&(this["_"+
b.geometryType]=b),this._fLayers.push(b))},this),0===this._fLayers.length&&delete this._fLayers);if(!this.loaded)for(e=f.length,d=0;d<e;d++)h=f[d],this._setState(h,h.visible);this._fireUpdateEnd();this.loaded?(this._addInternalLayers(),k.forEach(this.folders,function(b){-1<k.indexOf(c,b.id)?this.setFolderVisibility(b,!0):this.setFolderVisibility(b,!1)},this),this.onRefresh()):(this.loaded=!0,this.onLoad(this))},_addInternalLayers:function(){var b=this._map;this._fireUpdateStart();this._links&&k.forEach(this._links,
function(c){c.declaredClass&&(b.addLayer(c),c._waitingForMap&&(c._waitingForMap=null,c.visible?c._parseKml(b):c._wMap=b))});var c=b.spatialReference,d=this._outSR,e;if(!c.equals(d))if(c.isWebMercator()&&4326===d.wkid)e=x.geographicToWebMercator;else if(d.isWebMercator()&&4326===c.wkid)e=x.webMercatorToGeographic;else return;this._groundLyr&&(e&&k.forEach(this._groundLyr.getImages(),function(b){b.extent=e(b.extent)}),b.addLayer(this._groundLyr));(c=this._fLayers)&&0<c.length&&k.forEach(c,function(c){if(e){var d=
c.graphics,g,f,h=d?d.length:0;for(g=0;g<h;g++)(f=d[g].geometry)&&d[g].setGeometry(e(f))}b.addLayer(c)});this.onVisibilityChange(this.visible)},_removeInternalLayers:function(){var b=this._map;this._links&&k.forEach(this._links,function(b){b.declaredClass&&b._io&&b._io.cancel();b._linkErrorHandle&&(b._linkErrorHandle.remove(),b._linkErrorHandle=null)});b&&k.forEach(this.getLayers(),b.removeLayer,b)},_setState:function(b,c){b=b.featureInfos;var d,e,g,f=b?b.length:0,h=c?"show":"hide";for(g=0;g<f;g++)if(d=
b[g],e=this.getFeature(d))if("Folder"===d.type)this._setState(e,c&&e.visible);else if("NetworkLink"===d.type)this._setInternalVisibility(e,c);else e[h]()},_areLocalAncestorsVisible:function(b){var c=b.parentFolderId;for(b=b.visible;b&&-1!==c;)c=this.getFeature({type:"Folder",id:c}),b=b&&c.visible,c=c.parentFolderId;return b},_setInternalVisibility:function(b,c){var d=b._parentLayer,e=b._parentFolderId;for(c=c&&b.visible;c&&d;)c=c&&d.visible,-1<e&&(c=c&&d._areLocalAncestorsVisible(d.getFeature({type:"Folder",
id:e}))),e=d._parentFolderId,d=d._parentLayer;this._setIntState(b,c)},_setIntState:function(b,c){b&&k.forEach(b.getLayers(),function(d){d.linkInfo?b._setIntState(d,c&&d.visible&&b._areLocalAncestorsVisible(b.getFeature({type:"Folder",id:d._parentFolderId}))):d.setVisibility(c)})},_getLinkParentId:function(b){var c=-1;this.folders&&k.some(this.folders,function(d){return d.networkLinkIds&&-1!==k.indexOf(d.networkLinkIds,b)?(c=d.id,!0):!1});return c},_checkAutoRefresh:function(){var b=this.linkInfo;
if(b)if(this.visible){if(this.loaded&&this._map){var c=b.refreshMode,d=b.refreshInterval,e=b.viewRefreshMode,b=b.viewRefreshTime;c&&-1!==c.toLowerCase().indexOf("oninterval")&&0<d&&(this._stopAutoRefresh(),this._timeoutHandle=setTimeout(this.refresh,1E3*d));e&&-1!==e.toLowerCase().indexOf("onstop")&&0<b&&!this._extChgHandle&&(this._extChgHandle=f.connect(this._map,"onExtentChange",this,this._extentChanged))}}else this._stopAutoRefresh(),f.disconnect(this._extChgHandle),delete this._extChgHandle},
_stopAutoRefresh:function(){clearTimeout(this._timeoutHandle);this._timeoutHandle=null},_getQueryParameters:function(c){c=c||this._map;var d={},e=this.linkInfo,f=c&&c.extent,h;this._url.query&&(l.mixin(d,this._url.query),h=!!this._url.query.token);b.id&&!h&&(h=b.id.findCredential(this._url.path))&&(d.token=h.token);if(e){h=e.viewFormat;var k=e.httpQuery,e=e.viewBoundScale;if(f&&h){var q=f,p=f,t=f.spatialReference;t&&(t.isWebMercator()?q=x.webMercatorToGeographic(f):4326===t.wkid&&(p=x.geographicToWebMercator(f)));
f=q.getCenter();p=Math.max(p.getWidth(),p.getHeight());e&&(q=q.expand(e));h=h.replace(/\[bboxWest\]/ig,q.xmin).replace(/\[bboxEast\]/ig,q.xmax).replace(/\[bboxSouth\]/ig,q.ymin).replace(/\[bboxNorth\]/ig,q.ymax).replace(/\[lookatLon\]/ig,f.x).replace(/\[lookatLat\]/ig,f.y).replace(/\[lookatRange\]/ig,p).replace(/\[lookatTilt\]/ig,0).replace(/\[lookatHeading\]/ig,0).replace(/\[lookatTerrainLon\]/ig,f.x).replace(/\[lookatTerrainLat\]/ig,f.y).replace(/\[lookatTerrainAlt\]/ig,0).replace(/\[cameraLon\]/ig,
f.x).replace(/\[cameraLat\]/ig,f.y).replace(/\[cameraAlt\]/ig,p).replace(/\[horizFov\]/ig,60).replace(/\[vertFov\]/ig,60).replace(/\[horizPixels\]/ig,c.width).replace(/\[vertPixels\]/ig,c.height).replace(/\[terrainEnabled\]/ig,0);l.mixin(d,g.queryToObject(h))}k&&(k=k.replace(/\[clientVersion\]/ig,b.version).replace(/\[kmlVersion\]/ig,2.2).replace(/\[clientName\]/ig,"ArcGIS API for JavaScript").replace(/\[language\]/ig,m.locale),l.mixin(d,g.queryToObject(k)))}c=[];for(var u in d)r.isDefined(d[u])&&
c.push(u+"\x3d"+d[u]);return(c=c.join("\x26"))?"?"+c:""},setScaleRange:function(b,c){this.inherited(arguments);k.forEach(this.getLayers(),function(d){d.setScaleRange(b,c)})},setOpacity:function(b){this.opacity!=b&&(k.forEach(this.getLayers(),function(c){c.setOpacity(b)}),this.opacity=b,this.onOpacityChange(b))},_setMap:function(b,d){this.inherited(arguments);this._map=b;var g=this._div=e.create("div",null,d);c.set(g,"position","absolute");this._addInternalLayers();this.evaluateSuspension();return g},
_unsetMap:function(b,c){this._io&&this._io.cancel();this._stopAutoRefresh();f.disconnect(this._extChgHandle);delete this._extChgHandle;this._removeInternalLayers();var d=this._div;d&&(c.removeChild(d),e.destroy(d));this._wMap=this._div=null;this.inherited(arguments)},onVisibilityChange:function(b){this.loaded?(this._fireUpdateStart(),this._setInternalVisibility(this,b),this._checkAutoRefresh(),this._fireUpdateEnd()):this.linkInfo&&b&&(this._waitingForMap||this._parseKml(this._wMap))},refresh:function(){this.loaded&&
this._map&&!this._io&&this.visible&&this._parseKml()},getFeatureCollection:function(b){var c,d=[];(b=this.getFeature({type:"Folder",id:b}))&&(c=k.map(b.featureInfos,function(b){if("esriGeometryPoint"===b.type||"esriGeometryPolyline"===b.type||"esriGeometryPolygon"===b.type)return b.id},this))&&0<c.length&&k.forEach(this._fLayers,function(b){var e,g;e=b.toJson();e.featureSet.features&&0<e.featureSet.features.length&&(g=k.filter(e.featureSet.features,function(d){if(-1!==k.indexOf(c,d.attributes[b.objectIdField]))return d},
this));g&&0<g.length&&(e.featureSet.features=g,d.push(e))},this);return d},getFeatureCount:function(b){b=this.getFeature({type:"Folder",id:b});var c={points:0,polylines:0,polygons:0};b&&k.forEach(b.featureInfos,function(b){"esriGeometryPoint"===b.type&&(c.points+=1);"esriGeometryPolyline"===b.type&&(c.polylines+=1);"esriGeometryPolygon"===b.type&&(c.polygons+=1)});return c},_extentChanged:function(){this._stopAutoRefresh();this._timeoutHandle=setTimeout(this.refresh,1E3*this.linkInfo.viewRefreshTime)}});
q("extend-esri")&&l.setObject("layers.KMLLayer",F,b);return F})},"esri/layers/KMLFolder":function(){define("esri/layers/KMLFolder",["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(m,p,f,l,k){m=m(null,{declaredClass:"esri.layers.KMLFolder",constructor:function(f){p.mixin(this,f);k.isDefined(this.visibility)&&(this.visible=!!this.visibility)}});f("extend-esri")&&p.setObject("layers.KMLFolder",m,l);return m})},"esri/layers/KMLGroundOverlay":function(){define("esri/layers/KMLGroundOverlay",
"dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./MapImage".split(" "),function(m,p,f,l,k,h){m=m([h],{declaredClass:"esri.layers.KMLGroundOverlay",constructor:function(f){k.isDefined(this.visibility)&&(this.visible=!!this.visibility)}});f("extend-esri")&&p.setObject("layers.KMLGroundOverlay",m,l);return m})},"sixmaps/dijits/TitlePane":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/sniff dojo/text!sixmaps/dijits/TitlePane.html dojo/aspect dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/on dojox/fx/flip dijit/layout/ContentPane dijit/_TemplatedMixin dijit/TitlePane".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t){return p("sixmaps.dijits.TitlePane",[t,u],{templateString:l,_minimiseButton:null,_closeButton:null,toggleable:!1,helpContent:null,helpOpen:!1,_settingsContent:null,_settingsOpen:!1,_normalContent:null,_normalTitle:null,visible:!1,postCreate:function(){this.inherited(arguments);var b=this;d(b.titleBarNode,"dblclick",function(){b.toggle()});b._resetButton=g.create("div",{style:"display:none;","class":"resetButton",title:"Reset Tool"},b.iconNode);d(b._resetButton,
"click",function(){b.resetPane()});b._settingsButton=g.create("div",{style:"display:none;","class":"settingsButton",title:"Settings"},b.iconNode);d(b._settingsButton,"click",function(){b.toggleSettings(b._settingsOpen)});b._helpButton=g.create("div",{style:"display:none;","class":"helpButton",title:"Help"},b.iconNode);d(b._helpButton,"click",function(){b.toggleHelp()});b._minimiseButton=g.create("div",{"class":"minimiseButton",title:"Minimise"},b.iconNode);d(b._minimiseButton,"click",function(){b.toggle()});
b._closeButton=g.create("div",{"class":"closeButton",title:"Close"},b.iconNode);d(b._closeButton,"click",function(){b.set("visible",!1)});k.after(b,"toggle",function(){b._checkMinimiseClass()});k.after(b,"onShowPane",function(){b._checkMinimiseClass()})},_checkMinimiseClass:function(){q.contains(this._minimiseButton,this.open?"minimiseButton":"restoreButton")||(q.toggle(this._minimiseButton,"minimiseButton"),q.toggle(this._minimiseButton,"restoreButton"));q.contains(this._minimiseButton,"restoreButton")?
h.set(this._minimiseButton,"title","Restore"):q.contains(this._minimiseButton,"minimiseButton")&&h.set(this._minimiseButton,"title","Minimise")},_setHelpContentAttr:function(b){(this.helpContent=b)?c.set(this._helpButton,"display",""):c.set(this._helpButton,"display","none")},_setResetAttr:function(b){c.set(this._resetButton,"display","")},_setHelpOpenAttr:function(b){this.helpOpen=b},resetPane:function(){},toggleHelp:function(){this.helpOpen?this.set("helpOpen",!1):this.set("helpOpen",!0)},_setSettingsContentAttr:function(b){var d=
g.create("div"),e=new v({"class":"toolPaneContainer"});e.set("content",b);e.placeAt(d);this._settingsContent=d;b?c.set(this._settingsButton,"display",""):c.set(this._settingsButton,"display","none")},_setNormalContentAttr:function(b){this._normalContent=[new v({"class":"toolPaneContainer"})];this._normalContent[0].set()},toggleSettings:function(d){var f=this;if(f._settingsOpen==d){var h=e.position(this.domNode,!0),l=dojox.fx.flip({node:f.domNode,dir:d?"left":"right",darkColor:"#A4A4A4",lightColor:"#A4A4A4",
endColor:"#A4A4A4",duration:300});k.after(l,"onEnd",function(){c.set(f.domNode,"backgroundColor","")});l.play();d||(f._normalContent=[],f._normalTitle=f.title);m.forEach(f.containerNode.childNodes,function(c){!d&&f._normalContent.push(c);b("ie")&&f.containerNode.removeChild(c)});f.containerNode.innerHTML="";m.forEach(d?f._normalContent:[f._settingsContent],function(b){g.place(b,f.containerNode)});f._setToggleIcon();f._settingsButton.title=d?"Settings":"Back";f.set("title",d?f._normalTitle:f.title+
" Settings");l=e.position(this.domNode,!0);c.set(this.domNode,{left:h.x+(h.w-l.w)/2+"px",top:h.y+"px"});f._settingsOpen=!f._settingsOpen}},_setToggleIcon:function(){q.toggle(this._settingsButton,"settingsButton");q.toggle(this._settingsButton,"backButton")},_setVisibleAttr:function(b){this._set("visible",b);b?(c.set(this.domNode,"visibility","visible"),this.onShowPane()):(c.set(this.domNode,"visibility","hidden"),this.onClosePane(),this.set("helpOpen",!1))},onClosePane:function(){},onShowPane:function(){}})})},
"dojox/fx/flip":function(){define("dojox/fx/flip","dojo/_base/kernel dojo/_base/html dojo/dom dojo/dom-construct dojo/dom-geometry dojo/_base/connect dojo/_base/Color dojo/_base/sniff dojo/_base/lang dojo/_base/window dojo/_base/fx dojo/fx ./_base".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d,r){m.experimental("dojox.fx.flip");r.flip=function(k){var m=l.create("div"),r=k.node=f.byId(k.node),v=r.style,w=null,y=null,z=null,B=k.lightColor||"#dddddd",A=k.darkColor||"#555555",C=p.style(r,"backgroundColor"),
F=k.endColor||C,E={},H=[],D=k.duration?k.duration/2:250,z=k.dir||"left",G=.9,y="transparent",I=k.whichAnim,P=k.axis||"center",G=k.depth,Q=function(b){return"#000000"===(new q(b)).toHex()?"#000001":b};7>g("ie")&&(F=Q(F),B=Q(B),A=Q(A),C=Q(C),y="black",m.style.filter="chroma(color\x3d'#000000')");(function(b){return function(){var c=p.coords(b,!0);w={top:c.y,left:c.x,width:c.w,height:c.h}}})(r)();y={position:"absolute",top:w.top+"px",left:w.left+"px",height:"0",width:"0",zIndex:k.zIndex||v.zIndex||0,
border:"0 solid "+y,fontSize:"0",visibility:"hidden"};r=[{},{top:w.top,left:w.left}];z={left:"Left Right Top Bottom Width Height endHeightMin Left endHeightMax".split(" "),right:"Right Left Top Bottom Width Height endHeightMin Left endHeightMax".split(" "),top:"Top Bottom Left Right Height Width endWidthMin Top endWidthMax".split(" "),bottom:"Bottom Top Left Right Height Width endWidthMin Top endWidthMax".split(" ")}[z];"undefined"!=typeof G?(G=Math.max(0,Math.min(1,G))/2,G=.4+(.5-G)):G=Math.min(.9,
Math.max(.4,w[z[5].toLowerCase()]/w[z[4].toLowerCase()]));for(var Q=r[0],O=4;6>O;O++)"center"==P||"cube"==P?(w["end"+z[O]+"Min"]=w[z[O].toLowerCase()]*G,w["end"+z[O]+"Max"]=w[z[O].toLowerCase()]/G):"shortside"==P?(w["end"+z[O]+"Min"]=w[z[O].toLowerCase()],w["end"+z[O]+"Max"]=w[z[O].toLowerCase()]/G):"longside"==P&&(w["end"+z[O]+"Min"]=w[z[O].toLowerCase()]*G,w["end"+z[O]+"Max"]=w[z[O].toLowerCase()]);"center"==P?Q[z[2].toLowerCase()]=w[z[2].toLowerCase()]-(w[z[8]]-w[z[6]])/4:"shortside"==P&&(Q[z[2].toLowerCase()]=
w[z[2].toLowerCase()]-(w[z[8]]-w[z[6]])/2);E[z[5].toLowerCase()]=w[z[5].toLowerCase()]+"px";E[z[4].toLowerCase()]="0";E["border"+z[1]+"Width"]=w[z[4].toLowerCase()]+"px";E["border"+z[1]+"Color"]=C;Q["border"+z[1]+"Width"]=0;Q["border"+z[1]+"Color"]=A;Q["border"+z[2]+"Width"]=Q["border"+z[3]+"Width"]="cube"!=P?(w["end"+z[5]+"Max"]-w["end"+z[5]+"Min"])/2:w[z[6]]/2;Q[z[7].toLowerCase()]=w[z[7].toLowerCase()]+w[z[4].toLowerCase()]/2+(k.shift||0);Q[z[5].toLowerCase()]=w[z[6]];k=r[1];k["border"+z[0]+"Color"]=
{start:B,end:F};k["border"+z[0]+"Width"]=w[z[4].toLowerCase()];k["border"+z[2]+"Width"]=0;k["border"+z[3]+"Width"]=0;k[z[5].toLowerCase()]={start:w[z[6]],end:w[z[5].toLowerCase()]};e.mixin(y,E);p.style(m,y);c.body().appendChild(m);B=function(){l.destroy(m);v.backgroundColor=F;v.visibility="visible"};if("last"==I){for(O in Q)Q[O]={start:Q[O]};Q["border"+z[1]+"Color"]={start:A,end:F};k=Q}I&&"first"!=I||H.push(b.animateProperty({node:m,duration:D,properties:Q}));I&&"last"!=I||H.push(b.animateProperty({node:m,
duration:D,properties:k,onEnd:B}));h.connect(H[0],"play",function(){m.style.visibility="visible";v.visibility="hidden"});return d.chain(H)};r.flipCube=function(b){var c=[],g=k.getMarginBox(b.node),f=g.w/2,g=g.h/2,f={top:{pName:"height",args:[{whichAnim:"first",dir:"top",shift:-g},{whichAnim:"last",dir:"bottom",shift:g}]},right:{pName:"width",args:[{whichAnim:"first",dir:"right",shift:f},{whichAnim:"last",dir:"left",shift:-f}]},bottom:{pName:"height",args:[{whichAnim:"first",dir:"bottom",shift:g},
{whichAnim:"last",dir:"top",shift:-g}]},left:{pName:"width",args:[{whichAnim:"first",dir:"left",shift:-f},{whichAnim:"last",dir:"right",shift:f}]}}[b.dir||"left"].args;b.duration=b.duration?2*b.duration:500;b.depth=.8;b.axis="cube";for(g=f.length-1;0<=g;g--)e.mixin(b,f[g]),c.push(r.flip(b));return d.combine(c)};r.flipPage=function(b){var g=b.node,f=p.coords(g,!0),k=f.x,m=f.y,q=f.w,r=f.h,v=p.style(g,"backgroundColor"),A=b.lightColor||"#dddddd",C=b.darkColor,F=l.create("div"),E=[],H=[],D=b.dir||"right",
G={left:["left","right","x","w"],top:["top","bottom","y","h"],right:["left","left","x","w"],bottom:["top","top","y","h"]},I={right:[1,-1],left:[-1,1],top:[-1,1],bottom:[1,-1]};p.style(F,{position:"absolute",width:q+"px",height:r+"px",top:m+"px",left:k+"px",visibility:"hidden"});k=[];for(m=0;2>m;m++){var r=(q=m%2)?G[D][1]:D,P=q?"last":"first",Q=q?v:A,O=q?Q:b.startColor||g.style.backgroundColor;H[m]=e.clone(F);var N=function(b){return function(){l.destroy(H[b])}}(m);c.body().appendChild(H[m]);k[m]=
{backgroundColor:q?O:v};k[m][G[D][0]]=f[G[D][2]]+I[D][0]*m*f[G[D][3]]+"px";p.style(H[m],k[m]);E.push(dojox.fx.flip({node:H[m],dir:r,axis:"shortside",depth:b.depth,duration:b.duration/2,shift:I[D][m]*f[G[D][3]]/2,darkColor:C,lightColor:A,whichAnim:P,endColor:Q}));h.connect(E[m],"onEnd",N)}return d.chain(E)};r.flipGrid=function(b){var g=b.rows||4,f=b.cols||4,k=[],m=l.create("div"),q=b.node,r=p.coords(q,!0),v=r.x,A=r.y,C=r.w,F=r.h,E=r.w/f,H=r.h/g,r=[];p.style(m,{position:"absolute",width:E+"px",height:H+
"px",backgroundColor:p.style(q,"backgroundColor")});for(var D=0;D<g;D++){var G=D%2,I=G?"right":"left",P=G?1:-1,Q=e.clone(q);p.style(Q,{position:"absolute",width:C+"px",height:F+"px",top:A+"px",left:v+"px",clip:"rect("+D*H+"px,"+C+"px,"+F+"px,0)"});c.body().appendChild(Q);k[D]=[];for(var O=0;O<f;O++){var N=e.clone(m),M=G?O:f-(O+1),J=function(b,c,d){return function(){c%2?p.style(b,{clip:"rect("+c*H+"px,"+C+"px,"+(c+1)*H+"px,"+(d+1)*E+"px)"}):p.style(b,{clip:"rect("+c*H+"px,"+(C-(d+1)*E)+"px,"+(c+1)*
H+"px,0px)"})}}(Q,D,O);c.body().appendChild(N);p.style(N,{left:v+M*E+"px",top:A+D*H+"px",visibility:"hidden"});M=dojox.fx.flipPage({node:N,dir:I,duration:b.duration||900,shift:P*E/2,depth:.2,darkColor:b.darkColor,lightColor:b.lightColor,startColor:b.startColor||b.node.style.backgroundColor});N=function(b){return function(){l.destroy(b)}}(N);h.connect(M,"play",this,J);h.connect(M,"play",this,N);k[D].push(M)}r.push(d.chain(k[D]))}h.connect(r[0],"play",function(){p.style(q,{visibility:"hidden"})});return d.combine(r)};
return r})},"dojox/fx/_base":function(){define("dojox/fx/_base","dojo/_base/array dojo/_base/lang dojo/_base/fx dojo/fx dojo/dom dojo/dom-style dojo/dom-geometry dojo/_base/connect dojo/_base/html".split(" "),function(m,p,f,l,k,h,q,g,e){m=p.getObject("dojox.fx",!0);p.mixin(m,{anim:f.anim,animateProperty:f.animateProperty,fadeTo:f._fade,fadeIn:f.fadeIn,fadeOut:f.fadeOut,combine:l.combine,chain:l.chain,slideTo:l.slideTo,wipeIn:l.wipeIn,wipeOut:l.wipeOut});m.sizeTo=function(c){var b=c.node=k.byId(c.node),
d=c.method||"chain";c.duration||(c.duration=500);"chain"==d&&(c.duration=Math.floor(c.duration/2));var e,g,m,q,x,w=null,y=function(b){return function(){var d=h.getComputedStyle(b),f=d.position,k=d.width,l=d.height;e="absolute"==f?b.offsetTop:parseInt(d.top)||0;m="absolute"==f?b.offsetLeft:parseInt(d.left)||0;x="auto"==k?0:parseInt(k);w="auto"==l?0:parseInt(l);q=m-Math.floor((c.width-x)/2);g=e-Math.floor((c.height-w)/2);"absolute"!=f&&"relative"!=f&&(d=h.coords(b,!0),e=d.y,m=d.x,b.style.position="absolute",
b.style.top=e+"px",b.style.left=m+"px")}}(b),b=f.animateProperty(p.mixin({properties:{height:function(){y();return{end:c.height||0,start:w}},top:function(){return{start:e,end:g}}}},c)),d=f.animateProperty(p.mixin({properties:{width:function(){return{start:x,end:c.width||0}},left:function(){return{start:m,end:q}}}},c));return l["combine"==c.method?"combine":"chain"]([b,d])};m.slideBy=function(c){var b,d,e=function(c){return function(){var e=h.getComputedStyle(c),g=e.position;b="absolute"==g?c.offsetTop:
parseInt(e.top)||0;d="absolute"==g?c.offsetLeft:parseInt(e.left)||0;"absolute"!=g&&"relative"!=g&&(e=q.coords(c,!0),b=e.y,d=e.x,c.style.position="absolute",c.style.top=b+"px",c.style.left=d+"px")}}(c.node=k.byId(c.node));e();c=f.animateProperty(p.mixin({properties:{top:b+(c.top||0),left:d+(c.left||0)}},c));g.connect(c,"beforeBegin",c,e);return c};m.crossFade=function(c){var b=c.nodes[0]=k.byId(c.nodes[0]),d=e.style(b,"opacity"),g=c.nodes[1]=k.byId(c.nodes[1]);e.style(g,"opacity");return l.combine([f[0==
d?"fadeIn":"fadeOut"](p.mixin({node:b},c)),f[0==d?"fadeOut":"fadeIn"](p.mixin({node:g},c))])};m.highlight=function(c){var b=c.node=k.byId(c.node);c.duration=c.duration||400;var d=c.color||"#ffff99",h=e.style(b,"backgroundColor");"rgba(0, 0, 0, 0)"==h&&(h="transparent");c=f.animateProperty(p.mixin({properties:{backgroundColor:{start:d,end:h}}},c));"transparent"==h&&g.connect(c,"onEnd",c,function(){b.style.backgroundColor=h});return c};m.wipeTo=function(c){c.node=k.byId(c.node);var b=c.node,d=b.style,
g=c.width?"width":"height",h={};h[g]={start:function(){d.overflow="hidden";if("hidden"==d.visibility||"none"==d.display)return d[g]="1px",d.display="",d.visibility="",1;var c=e.style(b,g);return Math.max(c,1)},end:c[g]};return f.animateProperty(p.mixin({properties:h},c))};return m})},"dijit/TitlePane":function(){require({cache:{"url:dijit/templates/TitlePane.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-attach-event\x3d"ondijitclick:_onTitleClick, onkeydown:_onTitleKey"\r\n\t\t\tclass\x3d"dijitTitlePaneTitle" data-dojo-attach-point\x3d"titleBarNode" id\x3d"${id}_titleBarNode"\x3e\r\n\t\t\x3cdiv class\x3d"dijitTitlePaneTitleFocus" data-dojo-attach-point\x3d"focusNode"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"arrowNode" class\x3d"dijitInline dijitArrowNode" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"arrowNodeInner" class\x3d"dijitArrowNodeInner"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitTitlePaneTextNode"\x3e\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTitlePaneContentOuter" data-dojo-attach-point\x3d"hideNode" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv class\x3d"dijitReset" data-dojo-attach-point\x3d"wipeNode" role\x3d"presentation"\x3e\r\n\t\t\t\x3cdiv class\x3d"dijitTitlePaneContentInner" data-dojo-attach-point\x3d"containerNode" role\x3d"region" id\x3d"${id}_pane" aria-labelledby\x3d"${id}_titleBarNode"\x3e\r\n\t\t\t\t\x3c!-- nested divs because wipeIn()/wipeOut() doesn\'t work right on node w/padding etc.  Put padding on inner div. --\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n'}});
define("dijit/TitlePane","dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/fx dojo/has dojo/_base/kernel dojo/keys ./_CssStateMixin ./_TemplatedMixin ./layout/ContentPane dojo/text!./templates/TitlePane.html ./_base/manager ./a11yclick".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u){p=p("dijit.TitlePane",[r,d,b],{title:"",_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!0,toggleable:!0,tabIndex:"0",duration:u.defaultDuration,baseClass:"dijitTitlePane",
templateString:v,doLayout:!1,_setTooltipAttr:{node:"focusNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);f.setSelectable(this.titleNode,!1)},postCreate:function(){this.inherited(arguments);this.toggleable&&this._trackMouseState(this.titleBarNode,this.baseClass+"Title");var b=this.hideNode,c=this.wipeNode;this._wipeIn=q.wipeIn({node:c,duration:this.duration,beforeBegin:function(){b.style.display=""}});this._wipeOut=q.wipeOut({node:c,duration:this.duration,
onEnd:function(){b.style.display="none"}})},_setOpenAttr:function(b,c){m.forEach([this._wipeIn,this._wipeOut],function(b){b&&"playing"==b.status()&&b.stop()});c?this[b?"_wipeIn":"_wipeOut"].play():this.hideNode.style.display=this.wipeNode.style.display=b?"":"none";if(this._started)if(b)this._onShow();else this.onHide();this.containerNode.setAttribute("aria-hidden",b?"false":"true");this.focusNode.setAttribute("aria-pressed",b?"true":"false");this._set("open",b);this._setCss()},_setToggleableAttr:function(b){this.focusNode.setAttribute("role",
b?"button":"heading");b?(this.focusNode.setAttribute("aria-controls",this.id+"_pane"),this.focusNode.setAttribute("tabIndex",this.tabIndex),this.focusNode.setAttribute("aria-pressed",this.open)):(l.remove(this.focusNode,"aria-controls"),l.remove(this.focusNode,"tabIndex"),l.remove(this.focusNode,"aria-pressed"));this._set("toggleable",b);this._setCss()},_setContentAttr:function(b){this.open&&this._wipeOut&&"playing"!=this._wipeOut.status()?(this._wipeIn&&"playing"==this._wipeIn.status()&&this._wipeIn.stop(),
h.setMarginBox(this.wipeNode,{h:h.getMarginBox(this.wipeNode).h}),this.inherited(arguments),this._wipeIn?this._wipeIn.play():this.hideNode.style.display=""):this.inherited(arguments)},toggle:function(){this._setOpenAttr(!this.open,!0)},_setCss:function(){var b=this.titleBarNode||this.focusNode,c=this._titleBarClass;this._titleBarClass=this.baseClass+"Title"+(this.toggleable?"":"Fixed")+(this.open?"Open":"Closed");k.replace(b,this._titleBarClass,c||"");k.replace(b,this._titleBarClass.replace("TitlePaneTitle",
""),(c||"").replace("TitlePaneTitle",""));this.arrowNodeInner.innerHTML=this.open?"-":"+"},_onTitleKey:function(b){b.keyCode==c.DOWN_ARROW&&this.open&&(this.containerNode.focus(),b.preventDefault())},_onTitleClick:function(){this.toggleable&&this.toggle()},setTitle:function(b){e.deprecated("dijit.TitlePane.setTitle() is deprecated.  Use set('title', ...) instead.","","2.0");this.set("title",b)}});g("dojo-bidi")&&p.extend({_setTitleAttr:function(b){this._set("title",b);this.titleNode.innerHTML=b;this.applyTextDir(this.titleNode)},
_setTooltipAttr:function(b){this._set("tooltip",b);this.textDir&&(b=this.enforceTextDirWithUcc(null,b));l.set(this.focusNode,"title",b)},_setTextDirAttr:function(b){this._created&&this.textDir!=b&&(this._set("textDir",b),this.set("title",this.title),this.set("tooltip",this.tooltip))}});return p})},"sixmaps/dijits/Toolbar":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/aspect","dijit/Toolbar","dijit/form/ToggleButton"],function(m,p,f,l,k){return p("sixmaps.dijits.Toolbar",l,{autoClose:!0,
constructor:function(h,l){var g=this;f.after(g,"addChild",function(e){e.isInstanceOf(k)&&f.after(e,"onClick",function(){g.setActiveTool(e)})},!0)},setActiveTool:function(f){var h=this.getChildren();m.forEach(h,function(g,e){g.isInstanceOf(k)&&g.checked&&g!=f&&g.set("checked",!1)});f&&!f.checked&&f.set("checked",!0)},getActiveTool:function(){var f=this.getChildren(),k;m.some(f,function(g){if(g.checked)return k=g,!1});return k},addTool:function(f){this.addChild(f)},deactivate:function(){this.setActiveTool(null)}})})},
"dijit/Toolbar":function(){define("dijit/Toolbar","require dojo/_base/declare dojo/has dojo/keys dojo/ready ./_Widget ./_KeyNavContainer ./_TemplatedMixin".split(" "),function(m,p,f,l,k,h,q,g){f("dijit-legacy-requires")&&k(0,function(){m(["dijit/ToolbarSeparator"])});return p("dijit.Toolbar",[h,g,q],{templateString:'\x3cdiv class\x3d"dijit" role\x3d"toolbar" tabIndex\x3d"${tabIndex}" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e',baseClass:"dijitToolbar",_onLeftArrow:function(){this.focusPrev()},
_onRightArrow:function(){this.focusNext()}})})},"sixmaps/map/layers/Json":function(){define("dojo/_base/array dojo/_base/lang dojo/aspect esri/InfoTemplate esri/layers/ArcGISDynamicMapServiceLayer esri/layers/ImageParameters esri/layers/ImageServiceParameters esri/layers/MosaicRule esri/graphic sixmaps/map/layers/DynamicFCLayer".split(" "),function(m,p,f,l,k,h,q,g,e,c){return{fromJson:function(b,d){var r=null;!b.url&&(b.url="");var v=b.url=d?d(b.url):b.url;!b.params&&(b.params={});b.params.infoTemplate&&
(b.params.infoTemplate=new l(b.params.infoTemplate));b.params.imageParameters&&(b.params.imageParameters=p.mixin(new h,b.params.imageParameters));if(b.type&&"dynamic"==b.type)r=new k(v,b.params);else if(b.type&&"esri.layers.ArcGISImageServiceLayer"==b.type&&b.url){if(b.params){if(b.params.imageServiceParameters){var u=new q;p.mixin(u,b.params.imageServiceParameters);b.params.imageServiceParameters=u}b.params.mosaicRule&&(u=new g,p.mixin(u,b.params.mosaicRule),u.mosaicMethod&&(u.method=u.mosaicMethod),
b.params.mosaicRule=u)}r=(new p.getObject(b.type))(v,b.params||{});b.params&&b.params.mosaicRule&&r.setMosaicRule&&r.setMosaicRule(b.params.mosaicRule)}else b.type&&b.url?r=(new p.getObject(b.type))(v,b.params):b.type?r=(new p.getObject(b.type))(b.params):(b.params.counters&&m.forEach(b.params.counters,function(b){d&&(b.url=d(b.url))}),r=new c(v,b.params));b.params&&b.params.name&&!r.loaded&&r.onLoad&&f.after(r,"onLoad",function(){r.name=b.params.name});r.params||(r.params={});b.params.noRemoveMenu&&
(r.params.noRemoveMenu=b.params.noRemoveMenu);b.params.noZoomMenu&&(r.params.noZoomMenu=b.params.noZoomMenu);b.params.noTransparentMenu&&(r.params.noTransparentMenu=b.params.noTransparentMenu);b.includeLayerIDs&&(r.includeLayerIDs=b.includeLayerIDs);b.legendParams&&(r.legendParams=b.legendParams);b.subLayerDetails&&(r.subLayerDetails=b.subLayerDetails);b.visibleLayers&&r.setVisibleLayers&&r.setVisibleLayers(b.visibleLayers);b.definitionExpression&&r.setDefinitionExpression(b.definitionExpression);
b.visible||r.hide();b.params.layerDefinitions&&r.setLayerDefinitions(b.params.layerDefinitions);"undefined"!=typeof b.listLayers&&(r.listLayers=b.listLayers);b.mixinParams&&p.mixin(r,b.mixinParams);r.params=b.params;"esri.layers.GraphicsLayer"==r.declaredClass&&b.graphics&&m.forEach(b.graphics,function(b){r.add(new e(b))});return r},toJson:function(b){var c={};b.url&&(c.url=b.url);b.declaredClass&&(c.type=b.declaredClass);c.params={};!b.params&&(b.params={});b.legendParams&&(c.legendParams={});b._outFields&&
(c.params.outFields=b._outFields);b.params&&b.infoTemplate&&(c.params.infoTemplate=b.infoTemplate.toJson());b.params&&b.imageParameters&&(c.params.imageParameters=b.imageParameters);b.mosaicRule&&(c.params.mosaicRule=b.mosaicRule.toJson?b.mosaicRule.toJson():b.mosaicRule);b.counters&&(c.params.counters=[],m.forEach(b.counters,function(b){counterJson={};counterJson.url=b.url;counterJson.maxFeatureCount=b.maxFeatureCount;counterJson.maxScale=b.maxScale;c.params.counters.push(counterJson)}));b.params&&
b.layers&&(c.param.layers=[],m.forEach(b.layers,function(b){c.params.layers.push(b.toJson())}));b.selected&&(c.params.selected=b.selected);b.name&&(c.params.name=b.name);b.title&&(c.params.title=b.title);b.opacity&&(c.params.opacity=b.opacity);b.filter&&(c.params.filter=b.filter);b.noRemoveMenu&&(c.params.noRemoveMenu=b.noRemoveMenu);b.noZoomMenu&&(c.params.noZoomMenu=b.noZoomMenu);b.metadata&&(c.params.metadata=b.metadata);b.noTransparentMenu&&(c.params.noTransparentMenu=b.noTransparentMenu);b.thumbnailUrl&&
(c.params.thumbnailUrl=b.thumbnailUrl);b.metadataUrl&&(c.params.metadataUrl=b.metadataUrl);b.legendParams&&b.legendParams.show&&(c.legendParams.show=b.legendParams.show);b.legendParams&&b.legendParams.html&&(c.legendParams.html=b.legendParams.html);b.includeLayerIDs&&(c.includeLayerIDs=b.includeLayerIDs);b.legendParams&&(c.legendParams=b.legendParams);b.subLayerDetails&&(c.subLayerDetails=b.subLayerDetails);b.visibleLayers&&(c.visibleLayers=b.visibleLayers);b.includeLayerIDs&&(c.includeLayerIDs=b.includeLayerIDs);
b.visible&&(c.visible=b.visible);b.restrictAreaField&&(c.restrictAreaField=b.restrictAreaField);"undefined"!=typeof b.listLayers&&(c.listLayers=b.listLayers);b.layerDefinitions&&(c.params.layerDefinitions=b.layerDefinitions);"undefined"!=typeof b.getDefinitionExpression&&(c.definitionExpression=b.getDefinitionExpression());b.mixinParams&&(c.mixinParams={});b.mixinParams&&b.mixinParams.metadata&&(c.mixinParams.metadata=b.mixinParams.metadata);"esri.layers.GraphicsLayer"==b.declaredClass&&b.graphics&&
(c.graphics=m.map(b.graphics,function(b){return b.toJson()}));return c}}})},"esri/layers/ImageServiceParameters":function(){define("esri/layers/ImageServiceParameters","dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../lang".split(" "),function(m,p,f,l,k,h){m=m(null,{declaredClass:"esri.layers.ImageServiceParameters",extent:null,width:null,height:null,imageSpatialReference:null,format:null,interpolation:null,compressionQuality:null,bandIds:null,timeExtent:null,mosaicRule:null,
renderingRule:null,renderer:null,noData:null,compressionTolerance:null,adjustAspectRatio:null,lercVersion:null,toJson:function(k){var g=this.bbox||this.extent;k=(g=g&&k&&g._normalize(!0))?g.spatialReference.wkid||f.toJson(g.spatialReference.toJson()):null;var e=this.imageSpatialReference,g={bbox:g?g.xmin+","+g.ymin+","+g.xmax+","+g.ymax:null,bboxSR:k,size:null!==this.width&&null!==this.height?this.width+","+this.height:null,imageSR:e?e.wkid||f.toJson(e.toJson()):k,format:this.format,interpolation:this.interpolation,
compressionQuality:this.compressionQuality,bandIds:this.bandIds?this.bandIds.join(","):null,mosaicRule:this.mosaicRule?f.toJson(this.mosaicRule.toJson()):null,renderingRule:this.renderingRule?f.toJson(this.renderingRule.toJson()):null,renderer:this.renderer?f.toJson(this.renderer.toJson()):null,noData:this.noData,noDataInterpretation:this.noDataInterpretation,compressionTolerance:this.compressionTolerance,adjustAspectRatio:this.adjustAspectRatio,lercVersion:this.lercVersion};k=this.timeExtent;g.time=
k?k.toJson().join(","):null;return h.filter(g,function(c){if(null!==c&&void 0!==c)return!0})}});p.mixin(m,{INTERPOLATION_BILINEAR:"RSP_BilinearInterpolation",INTERPOLATION_CUBICCONVOLUTION:"RSP_CubicConvolution",INTERPOLATION_MAJORITY:"RSP_Majority",INTERPOLATION_NEARESTNEIGHBOR:"RSP_NearestNeighbor",NODATA_MATCH_ALL:"esriNoDataMatchAll",NODATA_MATCH_ANY:"esriNoDataMatchAny"});l("extend-esri")&&p.setObject("layers.ImageServiceParameters",m,k);return m})},"esri/layers/MosaicRule":function(){define("esri/layers/MosaicRule",
"dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../geometry/Point ./RasterFunction".split(" "),function(m,p,f,l,k,h,q){var g=m(null,{declaredClass:"esri.layers.MosaicRule",method:null,where:null,sortField:null,sortValue:null,ascending:!1,lockRasterIds:null,viewpoint:null,objectIds:null,operation:null,multidimensionalDefinition:[],itemRenderingRule:null,constructor:function(e){p.isObject(e)&&(p.mixin(this,e),e.mosaicMethod&&(this.method=e.mosaicMethod),this.method&&"esri"!==this.method.toLowerCase().substring(0,
4)&&(this.method=this._getMethodEnum(this.method)),e.mosaicOperation&&(this.operation=e.mosaicOperation),this.operation&&"MT_"!==this.operation.toUpperCase().substring(0,3)&&(this.operation=this._getOperatorEnum(this.operation)),e.fids&&(this.objectIds=e.fids),e.viewpoint&&(this.viewpoint=new h(e.viewpoint)),e.itemRenderingRule&&(this.itemRenderingRule=new q(e.itemRenderingRule)),this.multidimensionalDefinition=e.multidimensionalDefinition||[])},toJson:function(){var e=null,c=this.multidimensionalDefinition?
this.multidimensionalDefinition.length:0;if(c)for(var e=[],b=0;b<c;b++)e.push("esri.layers.DimensionalDefinition"===this.multidimensionalDefinition[b].declaredClass?this.multidimensionalDefinition[b].toJson():this.multidimensionalDefinition[b]);e={mosaicMethod:this.method,where:this.where,sortField:this.sortField,sortValue:this.sortValue,ascending:this.ascending,lockRasterIds:p.clone(this.lockRasterIds),viewpoint:this.viewpoint?this.viewpoint.toJson():null,fids:p.clone(this.objectIds),mosaicOperation:this.operation,
multidimensionalDefinition:e,itemRenderingRule:this.itemRenderingRule?this.itemRenderingRule.toJson():null};return k.filter(e,function(b){if(null!==b)return!0})},_getMethodEnum:function(e){if(e){var c=g.METHOD_NONE;switch(e.toLowerCase()){case "byattribute":c=g.METHOD_ATTRIBUTE;break;case "center":c=g.METHOD_CENTER;break;case "lockraster":c=g.METHOD_LOCKRASTER;break;case "nadir":c=g.METHOD_NADIR;break;case "northwest":c=g.METHOD_NORTHWEST;break;case "seamline":c=g.METHOD_SEAMLINE;break;case "viewpoint":c=
g.METHOD_VIEWPOINT}return c}},_getOperatorEnum:function(e){if(e)switch(e.toLowerCase()){case "first":return g.OPERATION_FIRST;case "last":return g.OPERATION_LAST;case "max":return g.OPERATION_MAX;case "min":return g.OPERATION_MIN;case "blend":return g.OPERATION_BLEND;case "mean":return g.OPERATION_MEAN;case "sum":return g.OPERATION_SUM}}});p.mixin(g,{METHOD_NONE:"esriMosaicNone",METHOD_CENTER:"esriMosaicCenter",METHOD_NADIR:"esriMosaicNadir",METHOD_VIEWPOINT:"esriMosaicViewpoint",METHOD_ATTRIBUTE:"esriMosaicAttribute",
METHOD_LOCKRASTER:"esriMosaicLockRaster",METHOD_NORTHWEST:"esriMosaicNorthwest",METHOD_SEAMLINE:"esriMosaicSeamline",OPERATION_FIRST:"MT_FIRST",OPERATION_LAST:"MT_LAST",OPERATION_MIN:"MT_MIN",OPERATION_MAX:"MT_MAX",OPERATION_MEAN:"MT_MEAN",OPERATION_BLEND:"MT_BLEND",OPERATION_SUM:"MT_SUM"});f("extend-esri")&&p.setObject("layers.MosaicRule",g,l);return g})},"sixmaps/map/layers/DynamicFCLayer":function(){define(["dojo/_base/array","dojo/_base/declare","esri/geometry/scaleUtils","esri/layers/ArcGISDynamicMapServiceLayer",
"sixmaps/map/layers/FeatureCount"],function(m,p,f,l,k){return p("sixmaps.map.layers.DynamicFCLayer",[l],{featureCount:null,currentCount:null,constructor:function(f,l){l&&p.safeMixin(this,l);this.featureCount=new k(l)},getImageUrl:function(h,k,g,e){function c(){e(require.toUrl("dojo/resources/blank.gif"))}var b=this,d=arguments,l=b._map&&f.getScale(b._map);if(b._map&&b.layerInfos&&!m.some(b.layerInfos,function(b){return b.minScale&&b.minScale<l||b.maxScale&&b.maxScale>l?!1:!0}))c();else{b.currentCount&&
b.currentCount.cancel();var q=b._jsonRequest=b.featureCount.doCount(h,l);b.currentCount=q;q.then(function(f){b.currentCount=null;f.maxedOut?c():b.inherited(d,[h,k,g,function(c){c=unescape(c);var d=c.indexOf("layers\x3dshow:"),g=c.substr(c.indexOf("layers\x3dshow:")).indexOf("\x26");if(-1!=d&&-1!=g){var h=function(c){var d=l[c];d&&(-1!=k.indexOf(c)||null!=b.includeLayerIDs&&-1==b.includeLayerIDs.indexOf(c)||d&&!d.subLayerIds&&k.push(c),(c=d.subLayerIds)&&c.forEach(function(b){h(b)}))},d=c.substr(d,
g),g=d.substr(d.indexOf(":")+1).split(",").map(Number),k=[],l={};b.layerInfos.forEach(function(b){l[b.id]=b});g.forEach(function(b){h(b)});g=k;f.layersInFC&&(g=k.filter(function(b){return-1!=f.layersInFC.indexOf(b)}));0==g.length&&(g=[-2]);c=c.replace(d,"layers\x3dshow:"+g)}return e(c)}])},function(d){d&&d.message&&b.onError("Problem with featureCount. "+d.message);c()})}},_imgSrcFunc:function(f){this._img_loading&&(this._img_loading.src=f)}})})},"sixmaps/map/layers/FeatureCount":function(){define(["dojo/_base/array",
"dojo/_base/declare","dojo/Deferred","esri/tasks/QueryTask","esri/tasks/query"],function(m,p,f,l,k){return p("sixmaps.map.layers.FeatureCount",null,{counters:null,queryTask:null,maxFeatureCount:100,maxScale:5E5,constructor:function(f){var h=this;h.counters=[];f&&p.safeMixin(h,f);m.forEach(h.counters,function(g){g.url=g.url.replace(/MapServer[\/]?$/,"MapServer/0");g.queryTask=new l(g.url);g.maxFeatureCount=g.maxFeatureCount||h.maxFeatureCount;g.maxScale=g.maxScale||h.maxScale})},doCount:function(h,
l){function g(d,f){e.isFulfilled()||(d.minScale&&l&&l<d.minScale?e.resolve({maxedOut:!1,counter:d,count:null}):d.maxScale&&l&&l>d.maxScale?e.resolve({maxedOut:!0,counter:d,count:null}):d.queryTask.executeForCount(c,function(c){if(!e.isFulfilled())if(d&&d.maxFeatureCount&&"object"==typeof d.maxFeatureCount){for(var h=[],k=0;k<d.maxFeatureCount.length;k++){var m=d.maxFeatureCount[k];m.minScale&&l&&m.minScale>l?h[h.length]=m.layerid:c<m.count&&(h[h.length]=m.layerid)}if(0<h.length){m=[];if(f)for(k=0;k<
f.length;k++)for(var q=0;q<h.length;q++){if(h[q]==f[k]){m[m.length]=h[q];break}}else m=h;b.length?g(b.pop(),m):e.resolve({maxedOut:!1,counter:d,count:c,layersInFC:m})}else e.resolve({maxedOut:!0,counter:d,count:c})}else c<d.maxFeatureCount?b.length?g(b.pop(),m):e.resolve({maxedOut:!1,counter:d,count:c}):e.resolve({maxedOut:!0,counter:d,count:c})},function(b){!e.isFulfilled()&&e.reject(b)}))}var e=new f,c=new k;c.geometry=h;c.spatialRelationship=k.SPATIAL_REL_CONTAINS;var b=this.counters.slice(0);
b.length&&g(b.pop());return e}})})},"sixmaps/util/dnd/Moveable":function(){define(["dojo/_base/declare","dojo/_base/window","dojo/dom-geometry","dojo/dom-style","dojo/dnd/Moveable"],function(m,p,f,l,k){return m("sixmaps.util.dnd.Moveable",[k],{startPos:null,windowNode:null,winSize:null,minTop:0,constructor:function(f,k){m.safeMixin(this,k)},onMove:function(f,k,g){g=this.startPos;var e=this.winSize;0>e.w-(k.l+g.w)&&(k.l=e.w-g.w);0>e.h-(k.t+g.h)&&(k.t=e.h-g.h);f=f.node.style;f.left=(0<k.l?k.l:0)+"px";
f.top=(k.t>this.minTop?k.t:this.minTop)+"px"},onMoveStart:function(f){this._startMove();this.inherited(arguments)},onMoveStop:function(){this.inherited(arguments);var h=f.position(this.node),k=this.winSize,g=k.w+k.x-(h.x+h.w),e=h.x-k.x;0>g&&(g=0);g<e&&20<e?l.set(this.node,{left:"",right:g+"px"}):l.set(this.node,{left:(0<e?e:0)+"px",right:""});g=k.h+k.y-(h.y+h.h);0>g&&(g=0);h=h.y-k.y;g<h&&h>this.minTop+20?l.set(this.node,{top:"",bottom:g+"px"}):l.set(this.node,{top:(h>this.minTop?h:this.minTop)+"px",
bottom:""})},_startMove:function(){this.startPos=f.position(this.node);this.winSize=f.position(this.windowNode||p.body());this.node.style.right&&l.set(this.node,{left:this.startPos.x-this.winSize.x+"px",right:""});this.node.style.bottom&&l.set(this.node,{top:this.startPos.y-this.winSize.y+"px",bottom:""})},checkPosition:function(){this._startMove();this.onMoveStop()}})})},"sixmaps/util/IdentityStore":function(){define("dojo/_base/declare dojo/cookie dojo/json dojo/on dijit/_WidgetBase esri/IdentityManager".split(" "),
function(m,p,f,l,k,h){return m("sixmaps.util.IdentityStore",[k],{cred:"esri_jsapi_id_manager_data",postCreate:function(){var f=this;f.inherited(arguments);l(esri.id,"credential-create",function(){f.storeCredentials()});f.loadCredentials()},supportsLocalStorage:function(){try{return"localStorage"in window&&null!==window.localStorage}catch(q){return!1}},loadCredentials:function(){var k;(k=this.supportsLocalStorage()?window.localStorage.getItem(this.cred):p(this.cred))&&"null"!=k&&4<k.length&&(k=f.parse(k),
h.initialize(k))},storeCredentials:function(){if(0!==h.credentials.length){var k=f.stringify(h.toJson());this.supportsLocalStorage()?window.localStorage.setItem(this.cred,k):p(this.cred,k,{expires:1})}}})})},"sixmaps/util/alertify/js/alertify":function(){!function(m,p){var f,l=m.document;f=function(){var f,h,q,g,e,c,b,d,r,v,u,t,x={},w={},y=!1,z=[];return w={buttons:{holder:'\x3cnav class\x3d"alertify-buttons"\x3e{{buttons}}\x3c/nav\x3e',submit:'\x3cbutton type\x3d"submit" class\x3d"alertify-button alertify-button-ok" id\x3d"alertify-ok"\x3e{{ok}}\x3c/button\x3e',
ok:'\x3cbutton class\x3d"alertify-button alertify-button-ok" id\x3d"alertify-ok"\x3e{{ok}}\x3c/button\x3e',cancel:'\x3cbutton class\x3d"alertify-button alertify-button-cancel" id\x3d"alertify-cancel"\x3e{{cancel}}\x3c/button\x3e'},input:'\x3cdiv class\x3d"alertify-text-wrapper"\x3e\x3cinput type\x3d"text" class\x3d"alertify-text" id\x3d"alertify-text"\x3e\x3c/div\x3e',message:'\x3cp class\x3d"alertify-message"\x3e{{message}}\x3c/p\x3e',log:'\x3carticle class\x3d"alertify-log{{class}}"\x3e{{message}}\x3c/article\x3e'},
t=function(){var b,c,d=!1,e=l.createElement("fakeelement"),g={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"};for(b in g)if(e.style[b]!==p){c=g[b];d=!0;break}return{type:c,supported:d}},f=function(b){return l.getElementById(b)},x={labels:{ok:"OK",cancel:"Cancel"},delay:5E3,buttonReverse:!1,buttonFocus:"ok",transition:p,addListeners:function(b){var c,d,f,k,m,r="undefined"!=typeof q,p="undefined"!=typeof h,t="undefined"!=
typeof u,v="",w=this;c=function(c){return"undefined"!=typeof c.preventDefault&&c.preventDefault(),f(c),"undefined"!=typeof u&&(v=u.value),"function"==typeof b&&("undefined"!=typeof u?b(!0,v):b(!0)),!1};d=function(c){return"undefined"!=typeof c.preventDefault&&c.preventDefault(),f(c),"function"==typeof b&&b(!1),!1};f=function(){w.hide();w.unbind(l.body,"keyup",k);w.unbind(g,"focus",m);r&&w.unbind(q,"click",c);p&&w.unbind(h,"click",d)};k=function(b){var e=b.keyCode;(32===e&&!t||t&&13===e)&&c(b);27===
e&&p&&d(b)};m=function(){t?u.focus():!p||w.buttonReverse?q.focus():h.focus()};this.bind(g,"focus",m);this.bind(e,"focus",m);r&&this.bind(q,"click",c);p&&this.bind(h,"click",d);this.bind(l.body,"keyup",k);this.transition.supported||this.setFocus()},bind:function(b,c,d){"function"==typeof b.addEventListener?b.addEventListener(c,d,!1):b.attachEvent&&b.attachEvent("on"+c,d)},handleErrors:function(){if("undefined"!=typeof m.onerror){var b=this;return m.onerror=function(c,d,e){b.error("["+c+" on line "+
e+" of "+d+"]",0)},!0}return!1},appendButtons:function(b,c){return this.buttonReverse?c+b:b+c},build:function(b){var c="",e=b.type,g=b.message;b=b.cssClass||"";switch(c+='\x3cdiv class\x3d"alertify-dialog"\x3e',c+='\x3ca id\x3d"alertify-resetFocusBack" class\x3d"alertify-resetFocus" href\x3d"#"\x3eReset Focus\x3c/a\x3e',"none"===x.buttonFocus&&(c+='\x3ca href\x3d"#" id\x3d"alertify-noneFocus" class\x3d"alertify-hidden"\x3e\x3c/a\x3e'),"prompt"===e&&(c+='\x3cdiv id\x3d"alertify-form"\x3e'),c+='\x3carticle class\x3d"alertify-inner"\x3e',
c+=w.message.replace("{{message}}",g),"prompt"===e&&(c+=w.input),c+=w.buttons.holder,c+="\x3c/article\x3e","prompt"===e&&(c+="\x3c/div\x3e"),c+='\x3ca id\x3d"alertify-resetFocus" class\x3d"alertify-resetFocus" href\x3d"#"\x3eReset Focus\x3c/a\x3e',c+="\x3c/div\x3e",e){case "confirm":c=c.replace("{{buttons}}",this.appendButtons(w.buttons.cancel,w.buttons.ok));c=c.replace("{{ok}}",this.labels.ok).replace("{{cancel}}",this.labels.cancel);break;case "prompt":c=c.replace("{{buttons}}",this.appendButtons(w.buttons.cancel,
w.buttons.submit));c=c.replace("{{ok}}",this.labels.ok).replace("{{cancel}}",this.labels.cancel);break;case "alert":c=c.replace("{{buttons}}",w.buttons.ok),c=c.replace("{{ok}}",this.labels.ok)}return r.className="alertify alertify-"+e+" "+b,d.className="alertify-cover",c},close:function(b,c){var d,e,g=c&&!isNaN(c)?+c:this.delay,f=this;this.bind(b,"click",function(){d(b)});e=function(b){b.stopPropagation();f.unbind(this,f.transition.type,e);v.removeChild(this);v.hasChildNodes()||(v.className+=" alertify-logs-hidden")};
d=function(b){"undefined"!=typeof b&&b.parentNode===v&&(f.transition.supported?(f.bind(b,f.transition.type,e),b.className+=" alertify-log-hide"):(v.removeChild(b),v.hasChildNodes()||(v.className+=" alertify-logs-hidden")))};0!==c&&setTimeout(function(){d(b)},g)},dialog:function(c,e,g,f,h){b=l.activeElement;var k=function(){v&&null!==v.scrollTop&&d&&null!==d.scrollTop||k()};if("string"!=typeof c)throw Error("message must be a string");if("string"!=typeof e)throw Error("type must be a string");if("undefined"!=
typeof g&&"function"!=typeof g)throw Error("fn must be a function");return this.init(),k(),z.push({type:e,message:c,callback:g,placeholder:f,cssClass:h}),y||this.setup(),this},extend:function(b){if("string"!=typeof b)throw Error("extend method must have exactly one parameter");return function(c,d){return this.log(c,b,d),this}},hide:function(){var c,e=this;z.splice(0,1);0<z.length?this.setup(!0):(y=!1,c=function(b){b.stopPropagation();e.unbind(r,e.transition.type,c)},this.transition.supported?(this.bind(r,
this.transition.type,c),r.className="alertify alertify-hide alertify-hidden"):r.className="alertify alertify-hide alertify-hidden alertify-isHidden",d.className="alertify-cover alertify-cover-hidden",b.focus())},init:function(){l.createElement("nav");l.createElement("article");l.createElement("section");null==f("alertify-cover")&&(d=l.createElement("div"),d.setAttribute("id","alertify-cover"),d.className="alertify-cover alertify-cover-hidden",l.body.appendChild(d));null==f("alertify")&&(y=!1,z=[],
r=l.createElement("section"),r.setAttribute("id","alertify"),r.className="alertify alertify-hidden",l.body.appendChild(r));null==f("alertify-logs")&&(v=l.createElement("section"),v.setAttribute("id","alertify-logs"),v.className="alertify-logs alertify-logs-hidden",l.body.appendChild(v));l.body.setAttribute("tabindex","0");this.transition=t()},log:function(b,c,d,e){var g=function(){v&&null!==v.scrollTop||g()};return this.init(),g(),v.className="alertify-logs",this.notify(b,c,d,e),this},notify:function(b,
c,d,e){var g=l.createElement("article");g.className="alertify-log"+("string"==typeof c&&""!==c?" alertify-log-"+c:"");"string"==typeof b?g.innerHTML=b:g.appendChild(b);"function"==typeof e&&this.bind(g,"click",e);v.appendChild(g);setTimeout(function(){g.className+=" alertify-log-show"},50);this.close(g,d)},set:function(b){var c;if("object"!=typeof b&&b instanceof Array)throw Error("args must be an object");for(c in b)b.hasOwnProperty(c)&&(this[c]=b[c])},setFocus:function(){u?(u.focus(),u.select()):
c.focus()},setup:function(b){var d,k=z[0],l=this;y=!0;d=function(b){b.stopPropagation();l.setFocus();l.unbind(r,l.transition.type,d)};this.transition.supported&&!b&&this.bind(r,this.transition.type,d);r.innerHTML=this.build(k);g=f("alertify-resetFocus");e=f("alertify-resetFocusBack");q=f("alertify-ok")||p;h=f("alertify-cancel")||p;c="cancel"===x.buttonFocus?h:"none"===x.buttonFocus?f("alertify-noneFocus"):q;u=f("alertify-text")||p;f("alertify-form");"string"==typeof k.placeholder&&""!==k.placeholder&&
(u.value=k.placeholder);b&&this.setFocus();this.addListeners(k.callback)},unbind:function(b,c,d){"function"==typeof b.removeEventListener?b.removeEventListener(c,d,!1):b.detachEvent&&b.detachEvent("on"+c,d)}},{alert:function(b,c,d){return x.dialog(b,"alert",c,"",d),this},confirm:function(b,c,d){return x.dialog(b,"confirm",c,"",d),this},extend:x.extend,init:x.init,log:function(b,c,d,e){return x.log(b,c,d,e),this},prompt:function(b,c,d,e){return x.dialog(b,"prompt",c,d,e),this},success:function(b,c,
d){return x.log(b,"success",c,d),this},error:function(b,c,d){return x.log(b,"error",c,d),this},set:function(b){x.set(b)},labels:x.labels,debug:x.handleErrors}};"function"==typeof define?define([],function(){return new f}):"undefined"==typeof m.alertify&&(m.alertify=new f)}(this)},"sixmaps/app/SearchPane":function(){define("dojo/_base/declare dojo/aspect dojo/dom-construct dojo/query dojo/text!sixmaps/dijits/tools/Help/AdvancedSearchHelp.html dijit/layout/ContentPane sixmaps/dijits/takeMeTo/Settings sixmaps/dijits/takeMeTo/TakeMeTo sixmaps/dijits/HelpTopic sixmaps/dijits/TitlePane".split(" "),
function(m,p,f,l,k,h,q,g,e,c){return m("sixmaps.app.SearchPane",[c],{title:"Advanced Search",searchContainer:null,singleSearch:null,visible:!1,mapGraphics:null,constructor:function(b,c){b&&m.safeMixin(this,b)},postCreate:function(){var b=this;b.inherited(arguments);b.set("helpContent",new e({templateString:k,imagesUrl:require.toUrl("sixmaps/dijits/tools/Help/Images/"),baseUrl:require.toUrl("sixmaps//")}));if("advanced"==b.mode){var c=new h({content:"Loading settings"});p.after(b,"toggleSettings",
function(d){if(!d){d=b.searchContainer.selectedChildWidget;var e=new e({title:d.title,layerUrl:d.layerUrl,fieldParams:d.fieldParams,resultsWidgetParams:d.resultsWidgetParams,style:"max-height:400px"});e.onSave=function(c){c.closable=!0;b.searchContainer.addChild(new g(c))};c.set("content",e)}},!0);b.set("settingsContent",c)}p.after(b,"onShow",function(){b.set("visible",!0);b.searchContainer&&b.searchContainer.resize()});b.searchContainer&&p.after(b,"onClosePane",function(){b.searchContainer.clearSelection()});
b.singleSearch&&(b.searchContainer&&(p.after(b.searchContainer,"onSearchResult",function(c,d,e,g,f){1!=c.features.length?(b.set("open",!0),b.set("visible",!0)):c.features[0].geometry&&c.features[0].geometry.getExtent()||(b.set("open",!0),b.set("visible",!0))},!0),p.after(b.searchContainer,"onSearchError",function(c,d){b.set("open",!0);b.set("visible",!0)}),p.after(b.singleSearch,"onClear",function(){b.searchContainer.clearSelection()})),p.after(b.singleSearch,"onAdvancedSearch",function(){b.set("open",
!0);b.set("visible",!0)}));b.searchContainer&&(b.mapGraphics&&b.searchContainer.connectSelectionToMapGraphics(b.mapGraphics),b.mapGraphics&&b.searchContainer.connectMouseoversToMapGraphics(b.mapGraphics),f.place(b.searchContainer.domNode,b.containerNode),b.searchContainer.startup(),b.searchContainer.resize(),l("\x3e*",b.searchContainer.containerNode).style({left:"0px",right:"0px",padding:"2px"}),b.searchContainer.helpContent&&b.helpContent.domNode.appendChild(b.searchContainer.helpContent))}})})},
"sixmaps/dijits/takeMeTo/Settings":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/json dojo/_base/lang dojo/_base/window dojo/aspect dojo/dom-construct dijit/form/Button dijit/form/CheckBox dijit/form/Textarea dijit/form/TextBox dijit/layout/ContentPane esri/layers/FeatureLayer esri/tasks/QueryTask sixmaps/dijits/DropTarget sixmaps/dijits/takeMeTo/TakeMeTo sixmaps/util/WidgetCreator".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x){return p("sixmaps.dijits.takeMeTo.Settings",
d,{layerUrl:"",fieldIds:null,fieldParams:null,resultsParams:null,title:"",constructor:function(b,c){this.fieldIds=["*"];this.fieldParams=[];b.fieldParams&&"string"==typeof b.fieldParams&&(b.fieldParams=f.fromJson(b.fieldParams));p.safeMixin(this,b)},postCreate:function(){var c=this,e=k.doc.createTextNode("Url");c.domNode.appendChild(e);var h=(new b({style:"width:35em",value:c.layerUrl,onChange:function(){c.setAttribute("layerUrl",this.value)}})).placeAt(c.domNode),e=k.doc.createTextNode("Search Name");
q.create("br",null,c.domNode);c.domNode.appendChild(e);c.titleField=(new b({style:"width:15em",value:c.title,onChange:function(){c.setAttribute("title",this.value)}})).placeAt(c.domNode);(new u({node:h.domNode})).onDropText=function(b){h.set("value",b)};q.create("br",{},c.domNode);e=k.doc.createTextNode("Field Ids");c.domNode.appendChild(e);(new b({style:"width:10em",value:c.fieldIds,onChange:function(){c.setAttribute("fieldIds",this.value.split(","))}})).placeAt(c.domNode);(new g({onClick:function(){c.set("fieldParams",
[]);c.set("layerUrl",c.layerUrl);c.set("resultsWidgetParams",null)},label:"Reset",value:"Reset"})).placeAt(c.domNode);c.fieldsNode=q.create("div",{},c.domNode);c.updateFields();(new g({onClick:l.hitch(c,"doUpdateParams"),label:"Update",value:"Update"})).placeAt(c.domNode);(new g({onClick:l.hitch(c,"doSave"),label:"Save",value:"Save"})).placeAt(c.domNode);c.previewPane=(new d({style:"border:1px solid white; border-radius:5px; margin-top:10px;"})).placeAt(c.domNode);c.paramsBox=(new Textarea({onChange:function(b){b=
f.fromJson(b);b.fieldParams.length&&c.previewPane?c.previewPane.set("content",new t(b)):c.previewPane.set("content","No fields selected.")}})).placeAt(c.domNode);c.paramsBox.set("value",c.getParamsJson(!0))},_setTitleAttr:function(b){this.title=b;this.titleField&&this.titleField.set("value",b)},_setLayerUrlAttr:function(b){var c=this;c.layerUrl=b;c.layerUrl&&(c._queryTask=new v(c.layerUrl),c._layerFields=[],b=new r(c.layerUrl,{outFields:["*"]}),h.after(b,"onLoad",function(b){var d=b.fields;c.set("title",
b.name);for(var e={},g=0;g<c.fieldIds.length;g++)e[c.fieldIds[g]]=!0;b.typeIdField&&b.typeIdField.toLowerCase();m.forEach(d,function(d,g){d.id=g;if(!c.fieldIds.length||e[d.id]||e["*"]||e[""])b.types&&b.typeIdField&&d.name.match(new RegExp("^"+b.typeIdField+"$","i"))&&(d.domain={type:"codedValue",codedValues:m.map(b.types,function(b){return{name:b.name,code:b.id}})}),c._layerFields.push(d)});c.updateFields()}))},updateFields:function(){var c=this;if(c.fieldsNode){c.fieldsNode.innerHTML="";var d={};
m.forEach(c.fieldParams,function(b){d[b.name]=b});m.forEach(c._layerFields,function(g){var f=d[g.name];l.mixin(g,f||{});var h=q.create("div",null,c.fieldsNode);g.aliasBox=(new b({type:"text",style:"width:8em",value:g.alias})).placeAt(h,"first");var k=q.create("span",{},h);c._createInputBox(g,g.params).then(function(b){g.inputBox=b.placeAt(k)});g.checkBox=(new e({checked:!!f})).placeAt(h,"last")})}},_setFieldParamsAttr:function(b){this.fieldParams=b;this.updateFields()},onSaveParams:function(b){},
_createInputBox:function(b,c){var d={value:b.value};l.mixin(d,c);d.value||delete d.value;if(b.domain)return this._createDomainField(b,d);switch(b.type){case "esriFieldTypeSmallInteger":case "esriFieldTypeInteger":case "esriFieldTypeSingle":case "esriFieldTypeDouble":return x.createWidget("dijit.form.NumberTextBox",l.mixin(d,{type:"number"}));case "esriFieldTypeDate":return x.createWidget("dijit.form.DateTextBox",l.mixin(d,{type:"date"}));default:return x.createWidget("dijit.form.TextBox",l.mixin(d,
{type:"text"}))}},_createDomainField:function(b,c){if(b.domain.codedValues){var d={dataStore:{type:"dojo.data.ItemFileReadStore",params:{data:{label:"name",identifier:"code",items:[{name:"",code:""}].concat(b.domain.codedValues)}}},searchAttr:"name",required:!1};l.mixin(d,c);return x.createWidget("dijit.form.FilteringSelect",d)}d={required:!1};l.mixin(d,c);return x.createWidget("dijit.form.NumberSpinner",d)},doUpdateParams:function(){var b=this;b.fieldParams=[];m.forEach(b._layerFields,function(c){if(c.checkBox&&
c.checkBox.checked){var d={name:c.name,type:c.type,alias:c.aliasBox.value,searchType:c.searchType,noQuery:c.noQuery,widgetType:c.inputBox.declaredClass,params:c.inputBox.params};if((c=c.inputBox.value)||0===c)d.params.value=c;d.params&&d.params.store&&delete d.params.store;for(a in d)"undefined"==typeof d[a]&&delete d[a];b.fieldParams.push(d)}});b.set("fieldParams",b.fieldParams);b.paramsBox.setAttribute("value",b.getParamsJson(!0))},getSettings:function(){return{fieldParams:this.fieldParams,layerUrl:this.layerUrl,
title:this.title,fieldIds:this.fieldIds,resultsWidgetParams:this.resultsWidgetParams||{}}},getParamsJson:function(b){var c=f.toJsonIndentStr;f.toJsonIndentStr="  ";b=f.toJson(this.getSettings(),b).toString();f.toJsonIndentStr=c;return b},doSave:function(){this.onSave(f.fromJson(this.paramsBox.value))},onSave:function(b){}})})},"dijit/form/Textarea":function(){define("dijit/form/Textarea",["dojo/_base/declare","dojo/dom-style","./_ExpandingTextAreaMixin","./SimpleTextarea"],function(m,p,f,l){return m("dijit.form.Textarea",
[l,f],{baseClass:"dijitTextBox dijitTextArea dijitExpandingTextArea",cols:"",buildRendering:function(){this.inherited(arguments);p.set(this.textbox,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"})}})})},"dijit/form/_ExpandingTextAreaMixin":function(){define("dijit/form/_ExpandingTextAreaMixin","dojo/_base/declare dojo/dom-construct dojo/has dojo/_base/lang dojo/on dojo/_base/window ../Viewport".split(" "),
function(m,p,f,l,k,h,q){f.add("textarea-needs-help-shrinking",function(){var g=h.body(),e=p.create("textarea",{rows:"5",cols:"20",value:" ",style:{zoom:1,fontSize:"12px",height:"96px",overflow:"hidden",visibility:"hidden",position:"absolute",border:"5px solid white",margin:"0",padding:"0",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"}},g,"last"),c=e.scrollHeight>=e.clientHeight;g.removeChild(e);return c});return m("dijit.form._ExpandingTextAreaMixin",
null,{_setValueAttr:function(){this.inherited(arguments);this.resize()},postCreate:function(){this.inherited(arguments);var g=this.textbox;g.style.overflowY="hidden";this.own(k(g,"focus, resize",l.hitch(this,"_resizeLater")))},startup:function(){this.inherited(arguments);this.own(q.on("resize",l.hitch(this,"_resizeLater")));this._resizeLater()},_onInput:function(g){this.inherited(arguments);this.resize()},_estimateHeight:function(){var g=this.textbox;g.rows=(g.value.match(/\n/g)||[]).length+1},_resizeLater:function(){this.defer("resize")},
resize:function(){function g(){var b=!1;""===e.value&&(e.value=" ",b=!0);var c=e.scrollHeight;b&&(e.value="");return c}var e=this.textbox;"hidden"==e.style.overflowY&&(e.scrollTop=0);if(!this.busyResizing){this.busyResizing=!0;if(g()||e.offsetHeight){var c=g()+Math.max(e.offsetHeight-e.clientHeight,0),b=c+"px";b!=e.style.height&&(e.style.height=b,e.rows=1);if(f("textarea-needs-help-shrinking")){var d=g(),h=e.style.minHeight,k=4,l=e.scrollTop;e.style.minHeight=b;for(e.style.height="auto";0<c;){e.style.minHeight=
Math.max(c-k,4)+"px";b=g();d-=b;c-=d;if(d<k)break;d=b;k<<=1}e.style.height=c+"px";e.style.minHeight=h;e.scrollTop=l}e.style.overflowY=g()>e.clientHeight?"auto":"hidden";"hidden"==e.style.overflowY&&(e.scrollTop=0)}else this._estimateHeight();this.busyResizing=!1}}})})},"sixmaps/dijits/DropTarget":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/dom dojo/on dijit/_WidgetBase".split(" "),function(m,p,f,l,k,h,q){return p("sixmaps.dijits.DropTarget",[q],{node:null,
handle:null,events:null,constructor:function(g){g.node=k.byId(g.node);g.handle=k.byId(g.handle);p.safeMixin(this,g);this.events=[]},_setNodeAttr:function(g){this._set("node",k.byId(g));m.forEach(this.events,function(e){e.remove()});this.node&&(this.events=[h(this.node,"dragenter",l.hitch(this,"_onDragEnter")),h(this.node,"dragover",l.hitch(this,"_onDragOver")),h(this.node,"drop",l.hitch(this,"_onDrop"))])},destroy:function(){m.forEach(this.events,function(g){g.remove()});this.events=this.node=this.handle=
null},_onDrop:function(g){f.stop(g);this.onDrop(g)},_onDragEnter:function(g){f.stop(g);this.onDragEnter(g)},_onDragOver:function(g){f.stop(g);this.onDragOver(g)},onDrop:function(g){if(g.dataTransfer.files&&g.dataTransfer.files.length)this.onDropFiles(g.dataTransfer.files,g);if(m.some(g.dataTransfer.types,function(e){return"text/plain"==e}))this.onDropText(g.dataTransfer.getData("text/plain"))},onDragEnter:function(g){},onDragOver:function(g){},onDropText:function(g){},onDropFiles:function(g,e){}})})},
"sixmaps/app/Print":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/window dojo/_base/xhr dojo/date/locale dojo/promise/all dojo/aspect dojo/Deferred dojo/dom dojo/dom-class dojo/dom-construct dojo/dom-style dojo/query dojo/text!sixmaps/dijits/tools/Help/printPDFHelp.html dojo/when dijit/form/Select dijit/_WidgetBase esri/geometry/scaleUtils esri/layers/ArcGISDynamicMapServiceLayer esri/layers/GraphicsLayer esri/domUtils esri/lang esri/map esri/utils sixmaps/dijits/HelpTopic sixmaps/dijits/InputForm sixmaps/map/layers/Json sixmaps/util/Analytics sixmaps/util/Require".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x,w,y,z,B,A,C,F,E,H,D,G,I,P){function Q(b,c){var d=function(b,c,e){var g="";if(b instanceof Array)for(var f=0,h=b.length;f<h;f++)g+=e+d(b[f],c,e+"\t")+"\n";else if("object"==typeof b){f=!1;g+=e+"\x3c"+c;for(h in b)"@"==h.charAt(0)?g+=" "+h.substr(1)+'\x3d"'+b[h].toString()+'"':f=!0;g+=f?"\x3e":"/\x3e";if(f){for(h in b)"#text"==h?g+=b[h]:"#cdata"==h?g+="\x3c![CDATA["+b[h]+"]]\x3e":"@"!=h.charAt(0)&&(g+=d(b[h],h,e+"\t"));g+=("\n"==g.charAt(g.length-1)?e:"")+
"\x3c/"+c+"\x3e"}}else g+=e+"\x3c"+c+"\x3e"+b.toString()+"\x3c/"+c+"\x3e";return g},e="",g;for(g in b)e+=d(b[g],g,"");return c?e.replace(/\t/g,c):e.replace(/\t|\n/g,"")}return p("sixmaps.app.Print",[w],{pdfUrl:"/SIXReports/servlet/ReportServlet",app:null,map:null,previewNode:null,layers:null,reportDisclaimer:null,constructor:function(b){this.reportDisclaimer="Disclaimer: This report has been generated by various sources and is provided for information purposes only. Spatial Services does not warrant or represent that the information is free from errors or omission, or that it is exhaustive. Spatial Services gives no warranty in relation to the information, especially material supplied by third parties. Spatial Services accepts no liability for loss, damage, or costs that you may incur relating to any use or reliance upon the information in this report.";
this.printCss=P.requireCss(require.toUrl("sixmaps/app/css/")+"print.css",{media:"print"});this.printPreviewCss=P.requireCss(require.toUrl("sixmaps/app/css/")+"printPreviewPrint.css",{media:"print"});b&&p.safeMixin(this,b)},createTemplateInputForm:function(b){var c=this,d=new D({fieldParams:b.fieldParams,submitParams:{label:"Preview"}});g.after(d,"onSubmit",function(d){var e=b.templateParams||{},g;for(g in d)e[g]=d[g].value;c.displayPrintPreview(e,b)},!0);return d},postCreate:function(){var b=this;
b.inherited(arguments);var c=[];m.forEach(b.templates,function(b){c.push({label:b.title,value:b})});var e=d.create("div",{innerHTML:"\x3cb\x3eTemplate\x3c/b\x3e",style:{borderBottom:"2px solid white",paddingBottom:"10px",marginBottom:"10px"}},b.domNode),g=new x({style:{marginLeft:"15px"},options:c});g.placeAt(e);g.watch("value",function(){f()});var f=function(){b.inputForm&&b.inputForm.destroy();b.inputForm=b.createTemplateInputForm(g.getValue());b.inputForm.placeAt(b.domNode);b.inputForm.startup()};
f();b.helpNode=new H({templateString:u,imagesUrl:require.toUrl("sixmaps/dijits/tools/Help/Images/"),baseUrl:require.toUrl("sixmaps//")})},close:function(){this.onClose()},onClose:function(){},displayPrintPreview:function(e,q,p){var u=this;I("send","event","Print Tool","Display Print Preview");!p&&(p={});var v={mapScale:Math.round(y.getScale(u.map)),date:h.format(new Date,{selector:"date",datePattern:"dd MMM yy"})};f.mixin(v,e);u.app.resizeMap();u.printCss.media="all";var w=d.create("div",{},l.body());
r.set(w,{minWidth:"100%",minHeight:"100%",background:"#333",position:"absolute",zIndex:999999,top:"0px",left:"0px"});b.add(w,"noBackgroundPrint");e=d.create("div",{},w);r.set(e,{color:"white",padding:"10px",cursor:"pointer"});b.add(e,"previewNoPrint");var N=d.create("span",{"class":"dojoxGridLoading",style:"display:none"}),x=d.create("span",{"class":"dojoxGridError",style:"display:none"}),M=d.create("div",{innerHTML:"Generate PDF","class":"previewButton",onclick:function(){var b=u.createPdf(v,q,u.previewMap);
N.style.display="";A.hide(x);b.then(function(b){A.hide(N)},function(b){A.hide(N);x.style.display="";x.title=b.message||b})}},e);d.place(N,M);d.place(x,M);d.create("div",{innerHTML:"Close","class":"previewButton",onclick:function(){u.closeButtonClicked();w.parentNode.removeChild(w);u.printCss.media="print";u.app.resizeMap();u.app.toolbar.reposition()}},e);if(v&&v.emailSettings){var z=d.create("span",{"class":"dojoxGridLoading",style:"display:none"}),H=d.create("span",{"class":"dojoxGridError",style:"display:none"}),
M=d.create("div",{innerHTML:"Send Report via Email","class":"previewButton",onclick:function(){I("send","event","Print Tool","Email Report");u.emailButtonClicked();z.style.display="";A.hide(H);var b=v.emailSettings;u.createPdf(v,q,u.previewMap).then(function(c){b.pdfDoc=c;c=JSON.stringify(b);k.post({url:b.emailServiceUrl,postData:c,load:function(b,c){u.handleEmailResponse(!0);A.hide(z)},error:function(b){u.handleEmailResponse(!1);A.hide(z);H.style.display="";H.title=b.message||b}});A.hide(z)},function(b){A.hide(z);
x.style.display="";x.title=b.message||b})}},e);d.place(z,M);d.place(H,M);M="\x3cb\x3eNOTE:\x3c/b\x3e You can position and zoom the map with the mouse prior to generating PDF.\x3cbr/\x3eEmails will be sent to \x3cb\x3e";M=v.emailSettings.targetEmailAddress?M+v.emailSettings.targetEmailAddress:M+"Spatial Services";e=d.create("div",{innerHTML:M+" \x3c/b\x3eand include an attached PDF report as shown below."},e);r.set(e,"fontSize","8pt")}u.previewNode=d.create("div",null,w);b.add(u.previewNode,u.declaredClass.replace(/\./g,
"_")+"_PreviewDocument");r.set(u.previewNode,{width:q.width+"px",height:q.height+"px",background:"white"});var E=u.id+"_mapPreview",D={mapConfig:"\x3cdiv id\x3d'"+E+"' style\x3d'width:100%;height:100%'\x3e\x3c/div\x3e",pdfDisclaimer:u.reportDisclaimer,apiUrl:require.toUrl("sixmaps").toString().replace(/sixmaps\/$/,"")};q.html||(q.html=k.get({url:q.templateUrl}));t(q.html,function(b){q.html=b;b=C.substitute(f.mixin(D,v),q.html);u.previewNode.innerHTML=b;c.byId(E);u.previewMap&&u.previewMap.destroy();
var d=u.map.getLevel();u.previewMap=new F(E,{lods:u.map.lods,extent:p.extent||u.map.extent,fitExtent:!1,logo:!1,slider:!1});g.after(u.previewMap,"onLoad",function(){u.previewMap.setLevel(d)});var e=[];u.layers&&u.layers.length&&!u.includeMapLayers&&!u.mapLayerIds||m.forEach(u.mapLayerIds||u.map.layerIds,function(b){(b=u.map.getLayer(b))&&e.push(b)});e=e.concat(u.layers);m.forEach(e,function(b){b&&!b.isInstanceOf(B)&&(b=G.toJson(b),b=G.fromJson(b),u.previewMap.addLayer(b))});u.close()})},emailButtonClicked:function(){},
closeButtonClicked:function(){},handleEmailResponse:function(b){},_convertUrlToAbsolute:function(b){if(b&&0!=b.indexOf("http")){var c=document.createElement("div");c.innerHTML='\x3ca href\x3d"'+b.split("\x26amp;").join("\x26").split("\x26lt;").join("\x3c").split("\x26quot;").join('"')+'"\x3ex\x3c/a\x3e';b=c.childNodes[0].href}return b.replace(/\/mapsd/g,"/mapsq").replace(/\.six\.nsw\.gov\.au/,"").replace(/\/api\/local\//g,"/api/trunk/").replace("png8","png24")},generateMapConfig:function(b){var c=
this;b=b||c.map;var d=new e,g={version:"1.00",size:{"@width":b.width,"@height":b.height},bbox:{"@minx":b.extent.xmin,"@miny":b.extent.ymin,"@maxx":b.extent.xmax,"@maxy":b.extent.ymax},layers:{layer_group:[]}},f=[];m.forEach(b.layerIds,function(d){var g=b.getLayer(d);if(g.visible&&(!g._div||"none"!=g._div.style.display)){d=g.getImageUrl?g:new z(g.url);var h=new e;d.getImageUrl(b.extent,b.width,b.height,function(b){h.resolve({"@transparency":1,layer:{"@type":"ecwp","@transparency":"undefined"!=typeof g.opacity?
g.opacity:1,"@url":encodeURIComponent(c._convertUrlToAbsolute(b))}})});f.push(h)}});q(f).then(function(b){m.forEach(b,function(b){g.layers.layer_group.push(b)});d.resolve(g)});return d},generateMapNode:function(b){var c=this;b=b||c.map;var g=new e,f=d.create("div"),h=0,k=!1;m.forEach(b.layerIds,function(e){var l=b.getLayer(e);!l.visible||l._div&&"none"==l._div.style.display||(h++,(l.getImageUrl?l:new z(l.url)).getImageUrl(b.extent,b.width,b.height,function(b){b=d.create("img",{src:b},f);r.set(b,{opacity:l.opacity,
width:c.map.width+"px",height:c.map.height+"px",position:"absolute",top:"0px",left:"0px"});h--;!g.isFulfilled()&&g.progress(h);k&&0==h&&!g.isFulfilled()&&g.resolve(f)}))});(k=!0,0==h)&&g.resolve(f);return g},generateMapConfigXml:function(b){var c=new e;this.generateMapConfig(b).then(function(b){c.resolve(Q(b))},c.reject);return c},createPdf:function(b,c,d){var g=this;I("send","event","Print Tool","Generate PDF");var h=new e;g.generatePdfConfig(b,c,d).then(function(b){h.progress({mapConfig:b.mapConfig,
url:g.pdfUrl,html:b.html,template:c,map:d});k.post({url:g.pdfUrl,postData:b.html,headers:{"X-SIX_ORIENTATION":c.pdfParams.orientation,"X-SIX_USER_SPACE_WIDTH":c.pdfParams.pageWidth,"Content-Type":"text/plain"},handleAs:"text",load:function(b){h.resolve(b.replace(/http:\/\/[a-z\-0-9.]*:9080/i,""))},error:h.reject})});h.then(f.hitch(g,"onPdfCreated"),f.hitch(g,"onPdfError"),f.hitch(g,"onPdfProgress"));return h},generatePdfConfig:function(b,c,g){var h=this;c.html||(c.html=k.get({url:c.templateUrl}));
var l=new e;t(c.html,function(e){c.html=e;h.generateMapConfig(g).then(function(e){var k=d.create("div");v("img",k).forEach(function(b){b.src=h._convertUrlToAbsolute(b.src)});var m=Q(e),k="\x3cdiv style\x3d'position:relative;top:0px;left:0px'\x3e"+k.innerHTML+"\x3csix_map\x3e"+m+"\x3c/six_map\x3e\x3c/div\x3e",k={mapConfig:k,pdfDisclaimer:h.reportDisclaimer,apiUrl:h._convertUrlToAbsolute(require.toUrl("sixmaps").toString().replace(/sixmaps\/$/,""))},k=C.substitute(f.mixin(k,b),c.html);l.resolve({mapConfig:e,
mapXml:m,html:k,map:g})})});return l},onPdfCreated:function(b){window.open(b,"_blank")},onPdfError:function(b){I("send","event","Print Tool","PDF Error")},onPdfProgress:function(b){}})})},"esri/utils":function(){define("esri/utils","./domUtils ./lang ./urlUtils ./request ./tileUtils ./graphicsUtils ./deferredUtils ./layerUtils ./geometry/normalizeUtils".split(" "),function(){return{}})},"sixmaps/dijits/form/ComboBox":function(){define(["dojo/_base/declare","dijit/form/ComboBox","sixmaps/dijits/TakeMeToStore",
"sixmaps/dijits/takeMeTo/TakeMeToSearch"],function(m,p,f,l){return m("sixmaps.dijits.form.ComboBox",[p],{required:!1,hasDownArrow:!1,ignoreCase:!0,value:"",dataStore:null,sourceUrl:"",fieldName:"",queryField:"name",fieldParams:null,fieldMapping:null,constructor:function(k,h){this.fieldParams={searchType:"startsWith"};k&&m.safeMixin(this,k);this.store=new f({fieldName:this.fieldName,queryField:this.queryField,fieldParams:this.fieldParams,takeMeToSearch:new l({layerUrl:this.sourceUrl,outFields:[this.fieldName],
queryParams:{returnGeometry:!1}})})}})})},"dijit/form/ComboBox":function(){define("dijit/form/ComboBox",["dojo/_base/declare","./ValidationTextBox","./ComboBoxMixin"],function(m,p,f){return m("dijit.form.ComboBox",[p,f],{})})},"dijit/form/ComboBoxMixin":function(){require({cache:{"url:dijit/form/templates/DropDownBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tid\x3d"widget_${id}"\r\n\trole\x3d"combobox"\r\n\taria-haspopup\x3d"true"\r\n\tdata-dojo-attach-point\x3d"_popupStateNode"\r\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer\'\r\n\t\tdata-dojo-attach-point\x3d"_buttonNode" role\x3d"presentation"\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitArrowButtonInner" value\x3d"\x26#9660; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"button presentation" aria-hidden\x3d"true"\r\n\t\t\t${_buttonInputDisabled}\r\n\t/\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t/\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\r\n\t\t\x3e\x3cinput class\x3d\'dijitReset dijitInputInner\' ${!nameAttrSetting} type\x3d"${type}" autocomplete\x3d"off"\r\n\t\t\tdata-dojo-attach-point\x3d"textbox,focusNode" role\x3d"textbox"\r\n\t/\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n'}});
define("dijit/form/ComboBoxMixin","dojo/_base/declare dojo/Deferred dojo/_base/kernel dojo/_base/lang dojo/store/util/QueryResults ./_AutoCompleterMixin ./_ComboBoxMenu ../_HasDropDown dojo/text!./templates/DropDownBox.html".split(" "),function(m,p,f,l,k,h,q,g,e){return m("dijit.form.ComboBoxMixin",[g,h],{dropDownClass:q,hasDownArrow:!0,templateString:e,baseClass:"dijitTextBox dijitComboBox",cssStateNodes:{_buttonNode:"dijitDownArrowButton"},_setHasDownArrowAttr:function(c){this._set("hasDownArrow",
c);this._buttonNode.style.display=c?"":"none"},_showResultList:function(){this.displayMessage("");this.inherited(arguments)},_setStoreAttr:function(c){c.get||l.mixin(c,{_oldAPI:!0,get:function(b){var c=new p;this.fetchItemByIdentity({identity:b,onItem:function(b){c.resolve(b)},onError:function(b){c.reject(b)}});return c.promise},query:function(b,c){var d=new p(function(){e.abort&&e.abort()});d.total=new p;var e=this.fetch(l.mixin({query:b,onBegin:function(b){d.total.resolve(b)},onComplete:function(b){d.resolve(b)},
onError:function(b){d.reject(b)}},c));return k(d)}});this._set("store",c)},postMixInProperties:function(){var c=this.params.store||this.store;c&&this._setStoreAttr(c);this.inherited(arguments);if(!this.params.store&&this.store&&!this.store._oldAPI){var b=this.declaredClass;l.mixin(this.store,{getValue:function(c,e){f.deprecated(b+".store.getValue(item, attr) is deprecated for builtin store.  Use item.attr directly","","2.0");return c[e]},getLabel:function(c){f.deprecated(b+".store.getLabel(item) is deprecated for builtin store.  Use item.label directly",
"","2.0");return c.name},fetch:function(c){f.deprecated(b+".store.fetch() is deprecated for builtin store.","Use store.query()","2.0");require(["dojo/data/ObjectStore"],l.hitch(this,function(b){(new b({objectStore:this})).fetch(c)}))}})}},buildRendering:function(){this.inherited(arguments);this.focusNode.setAttribute("aria-autocomplete",this.autoComplete?"both":"list")}})})},"dijit/form/_AutoCompleterMixin":function(){define("dijit/form/_AutoCompleterMixin","dojo/aspect dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/query dojo/regexp dojo/sniff ./DataList ./_TextBoxMixin ./_SearchMixin".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b){p=p("dijit.form._AutoCompleterMixin",b,{item:null,autoComplete:!0,highlightMatch:"first",labelAttr:"",labelType:"text",maxHeight:-1,_stopClickEvents:!1,_getCaretPos:function(b){var c=0;if("number"==typeof b.selectionStart)c=b.selectionStart;else if(g("ie")){var d=b.ownerDocument.selection.createRange().duplicate();b=b.createTextRange();d.move("character",0);b.move("character",0);try{b.setEndPoint("EndToEnd",d),c=String(b.text).replace(/\r/g,"").length}catch(u){}}return c},
_setCaretPos:function(b,e){e=parseInt(e);c.selectInputText(b,e,e)},_setDisabledAttr:function(b){this.inherited(arguments);this.domNode.setAttribute("aria-disabled",b?"true":"false")},_onKey:function(b){if(!(32<=b.charCode)){var c=b.charCode||b.keyCode;if(c!=l.ALT&&c!=l.CTRL&&c!=l.META&&c!=l.SHIFT){var d=this.dropDown,e=null;this._abortQuery();this.inherited(arguments);if(!(b.altKey||b.ctrlKey||b.metaKey))switch(this._opened&&(e=d.getHighlightedOption()),c){case l.PAGE_DOWN:case l.DOWN_ARROW:case l.PAGE_UP:case l.UP_ARROW:this._opened&&
this._announceOption(e);b.stopPropagation();b.preventDefault();break;case l.ENTER:if(e){if(e==d.nextButton){this._nextSearch(1);b.stopPropagation();b.preventDefault();break}else if(e==d.previousButton){this._nextSearch(-1);b.stopPropagation();b.preventDefault();break}b.stopPropagation();b.preventDefault()}else this._setBlurValue(),this._setCaretPos(this.focusNode,this.focusNode.value.length);case l.TAB:c=this.get("displayedValue");if(d&&(c==d._messages.previousMessage||c==d._messages.nextMessage))break;
e&&this._selectOption(e);case l.ESCAPE:this._opened&&(this._lastQuery=null,this.closeDropDown())}}}},_autoCompleteText:function(b){var d=this.focusNode;c.selectInputText(d,d.value.length);var e=this.ignoreCase?"toLowerCase":"substr";0==b[e](0).indexOf(this.focusNode.value[e](0))?(e=this.autoComplete?this._getCaretPos(d):d.value.length,e+1>d.value.length&&(d.value=b,c.selectInputText(d,e))):(d.value=b,c.selectInputText(d))},_openResultList:function(b,c,e){var d=this.dropDown.getHighlightedOption();
this.dropDown.clearResultList();b.length||0!=e.start?(this._nextSearch=this.dropDown.onPage=k.hitch(this,function(c){b.nextPage(-1!==c);this.focus()}),this.dropDown.createOptions(b,e,k.hitch(this,"_getMenuLabelFromItem")),this._showResultList(),"direction"in e?(e.direction?this.dropDown.highlightFirstOption():e.direction||this.dropDown.highlightLastOption(),d&&this._announceOption(this.dropDown.getHighlightedOption())):!this.autoComplete||this._prev_key_backspace||/^[*]+$/.test(c[this.searchAttr].toString())||
this._announceOption(this.dropDown.containerNode.firstChild.nextSibling)):this.closeDropDown()},_showResultList:function(){this.closeDropDown(!0);this.openDropDown();this.domNode.setAttribute("aria-expanded","true")},loadDropDown:function(){this._startSearchAll()},isLoaded:function(){return!1},closeDropDown:function(){this._abortQuery();this._opened&&(this.inherited(arguments),this.domNode.setAttribute("aria-expanded","false"))},_setBlurValue:function(){var b=this.get("displayedValue"),c=this.dropDown;
!c||b!=c._messages.previousMessage&&b!=c._messages.nextMessage?"undefined"==typeof this.item?(this.item=null,this.set("displayedValue",b)):(this.value!=this._lastValueReported&&this._handleOnChange(this.value,!0),this._refreshState()):this._setValueAttr(this._lastValueReported,!0);this.focusNode.removeAttribute("aria-activedescendant")},_setItemAttr:function(b,c,e){var d="";b&&(e||(e=this.store._oldAPI?this.store.getValue(b,this.searchAttr):b[this.searchAttr]),d=this._getValueField()!=this.searchAttr?
this.store.getIdentity(b):e);this.set("value",d,c,e,b)},_announceOption:function(b){if(b){var c;if(b==this.dropDown.nextButton||b==this.dropDown.previousButton)c=b.innerHTML,this.item=void 0,this.value="";else{var d=this.dropDown.items[b.getAttribute("item")];c=(this.store._oldAPI?this.store.getValue(d,this.searchAttr):d[this.searchAttr]).toString();this.set("item",d,!1,c)}this.focusNode.value=this.focusNode.value.substring(0,this._lastInput.length);this.focusNode.setAttribute("aria-activedescendant",
f.get(b,"id"));this._autoCompleteText(c)}},_selectOption:function(b){this.closeDropDown();b&&this._announceOption(b);this._setCaretPos(this.focusNode,this.focusNode.value.length);this._handleOnChange(this.value,!0);this.focusNode.removeAttribute("aria-activedescendant")},_startSearchAll:function(){this._startSearch("")},_startSearchFromInput:function(){this.item=void 0;this.inherited(arguments)},_startSearch:function(b){if(!this.dropDown){var c=this.id+"_popup";this.dropDown=new (k.isString(this.dropDownClass)?
k.getObject(this.dropDownClass,!1):this.dropDownClass)({onChange:k.hitch(this,this._selectOption),id:c,dir:this.dir,textDir:this.textDir})}this._lastInput=b;this.inherited(arguments)},_getValueField:function(){return this.searchAttr},postMixInProperties:function(){this.inherited(arguments);if(!this.store&&this.srcNodeRef&&(this.store=new e({},this.srcNodeRef),!("value"in this.params))){var b=this.item=this.store.fetchSelectedItem();if(b){var c=this._getValueField();this.value=this.store._oldAPI?this.store.getValue(b,
c):b[c]}}},postCreate:function(){var b=h('label[for\x3d"'+this.id+'"]');b.length&&(b[0].id||(b[0].id=this.id+"_label"),this.domNode.setAttribute("aria-labelledby",b[0].id));this.inherited(arguments);m.after(this,"onSearch",k.hitch(this,"_openResultList"),!0)},_getMenuLabelFromItem:function(b){b=this.labelFunc(b,this.store);var c=this.labelType;"none"!=this.highlightMatch&&"text"==this.labelType&&this._lastInput&&(b=this.doHighlight(b,this._lastInput),c="html");return{html:"html"==c,label:b}},doHighlight:function(b,
c){var d=(this.ignoreCase?"i":"")+("all"==this.highlightMatch?"g":""),e=this.queryExpr.indexOf("${0}");c=q.escapeString(c);return this._escapeHtml(b.replace(new RegExp((0==e?"^":"")+"("+c+")"+(e==this.queryExpr.length-4?"$":""),d),"\uffff$1\uffff")).replace(/\uFFFF([^\uFFFF]+)\uFFFF/g,'\x3cspan class\x3d"dijitComboBoxHighlightMatch"\x3e$1\x3c/span\x3e')},_escapeHtml:function(b){return b=String(b).replace(/&/gm,"\x26amp;").replace(/</gm,"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;")},
reset:function(){this.item=null;this.inherited(arguments)},labelFunc:function(b,c){return(c._oldAPI?c.getValue(b,this.labelAttr||this.searchAttr):b[this.labelAttr||this.searchAttr]).toString()},_setValueAttr:function(b,c,e,g){this._set("item",g||null);null==b&&(b="");this.inherited(arguments)}});g("dojo-bidi")&&p.extend({_setTextDirAttr:function(b){this.inherited(arguments);this.dropDown&&this.dropDown._set("textDir",b)}});return p})},"dijit/form/DataList":function(){define("dijit/form/DataList",
"dojo/_base/declare dojo/dom dojo/_base/lang dojo/query dojo/store/Memory ../registry".split(" "),function(m,p,f,l,k,h){function q(g){return{id:g.value,value:g.value,name:f.trim(g.innerText||g.textContent||"")}}return m("dijit.form.DataList",k,{constructor:function(g,e){this.domNode=p.byId(e);f.mixin(this,g);this.id&&h.add(this);this.domNode.style.display="none";this.inherited(arguments,[{data:l("option",this.domNode).map(q)}])},destroy:function(){h.remove(this.id)},fetchSelectedItem:function(){var g=
l("\x3e option[selected]",this.domNode)[0]||l("\x3e option",this.domNode)[0];return g&&q(g)}})})},"dijit/form/_SearchMixin":function(){define("dijit/form/_SearchMixin","dojo/_base/declare dojo/keys dojo/_base/lang dojo/query dojo/string dojo/when ../registry".split(" "),function(m,p,f,l,k,h,q){return m("dijit.form._SearchMixin",null,{pageSize:Infinity,store:null,fetchProperties:{},query:{},list:"",_setListAttr:function(g){this._set("list",g)},searchDelay:200,searchAttr:"name",queryExpr:"${0}*",ignoreCase:!0,
_patternToRegExp:function(g){return new RegExp("^"+g.replace(/(\\.)|(\*)|(\?)|\W/g,function(e,c,b,d){return b?".*":d?".":c?c:"\\"+e})+"$",this.ignoreCase?"mi":"m")},_abortQuery:function(){this.searchTimer&&(this.searchTimer=this.searchTimer.remove());this._queryDeferHandle&&(this._queryDeferHandle=this._queryDeferHandle.remove());this._fetchHandle&&(this._fetchHandle.abort&&(this._cancelingQuery=!0,this._fetchHandle.abort(),this._cancelingQuery=!1),this._fetchHandle.cancel&&(this._cancelingQuery=
!0,this._fetchHandle.cancel(),this._cancelingQuery=!1),this._fetchHandle=null)},_processInput:function(g){if(!this.disabled&&!this.readOnly){g=g.charOrCode;this._prev_key_backspace=!1;if(g==p.DELETE||g==p.BACKSPACE)this._maskValidSubsetError=this._prev_key_backspace=!0;if(this.store)this.searchTimer=this.defer("_startSearchFromInput",1);else this.onSearch()}},onSearch:function(){},_startSearchFromInput:function(){this._startSearch(this.focusNode.value)},_startSearch:function(g){this._abortQuery();
var e=this,c=f.clone(this.query),b={start:0,count:this.pageSize,queryOptions:{ignoreCase:this.ignoreCase,deep:!0}},d=k.substitute(this.queryExpr,[g.replace(/([\\\*\?])/g,"\\$1")]),l,m=function(){var d=e._fetchHandle=e.store.query(c,b);e.disabled||e.readOnly||l!==e._lastQuery||h(d,function(g){e._fetchHandle=null;e.disabled||e.readOnly||l!==e._lastQuery||h(d.total,function(d){g.total=d;var f=e.pageSize;if(isNaN(f)||f>g.total)f=g.total;g.nextPage=function(d){b.direction=d=!1!==d;b.count=f;d?(b.start+=
g.length,b.start>=g.total&&(b.count=0)):(b.start-=f,0>b.start&&(b.count=Math.max(f+b.start,0),b.start=0));0>=b.count?(g.length=0,e.onSearch(g,c,b)):m()};e.onSearch(g,c,b)})},function(b){e._fetchHandle=null})};f.mixin(b,this.fetchProperties);this.store._oldAPI?l=d:(l=this._patternToRegExp(d),l.toString=function(){return d});this._lastQuery=c[this.searchAttr]=l;this._queryDeferHandle=this.defer(m,this.searchDelay)},constructor:function(){this.query={};this.fetchProperties={}},postMixInProperties:function(){if(!this.store){var g=
this.list;g&&(this.store=q.byId(g))}this.inherited(arguments)}})})},"dijit/form/_ComboBoxMenu":function(){define("dijit/form/_ComboBoxMenu","dojo/_base/declare dojo/dom-class dojo/dom-style dojo/keys ../_WidgetBase ../_TemplatedMixin ./_ComboBoxMenuMixin ./_ListMouseMixin".split(" "),function(m,p,f,l,k,h,q,g){return m("dijit.form._ComboBoxMenu",[k,h,g,q],{templateString:"\x3cdiv class\x3d'dijitReset dijitMenu' data-dojo-attach-point\x3d'containerNode' style\x3d'overflow: auto; overflow-x: hidden;' role\x3d'listbox'\x3e\x3cdiv class\x3d'dijitMenuItem dijitMenuPreviousButton' data-dojo-attach-point\x3d'previousButton' role\x3d'option'\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitMenuItem dijitMenuNextButton' data-dojo-attach-point\x3d'nextButton' role\x3d'option'\x3e\x3c/div\x3e\x3c/div\x3e",
baseClass:"dijitComboBoxMenu",postCreate:function(){this.inherited(arguments);this.isLeftToRight()||(p.add(this.previousButton,"dijitMenuItemRtl"),p.add(this.nextButton,"dijitMenuItemRtl"));this.containerNode.setAttribute("role","listbox")},_createMenuItem:function(){var e=this.ownerDocument.createElement("div");e.className="dijitReset dijitMenuItem"+(this.isLeftToRight()?"":" dijitMenuItemRtl");e.setAttribute("role","option");return e},onHover:function(e){p.add(e,"dijitMenuItemHover")},onUnhover:function(e){p.remove(e,
"dijitMenuItemHover")},onSelect:function(e){p.add(e,"dijitMenuItemSelected")},onDeselect:function(e){p.remove(e,"dijitMenuItemSelected")},_page:function(e){var c=0,b=this.domNode.scrollTop,d=f.get(this.domNode,"height");for(this.getHighlightedOption()||this.selectNextNode();c<d;){var g=this.getHighlightedOption();if(e){if(!g.previousSibling||"none"==g.previousSibling.style.display)break;this.selectPreviousNode()}else{if(!g.nextSibling||"none"==g.nextSibling.style.display)break;this.selectNextNode()}g=
this.domNode.scrollTop;c+=(g-b)*(e?-1:1);b=g}},handleKey:function(e){switch(e.keyCode){case l.DOWN_ARROW:return this.selectNextNode(),!1;case l.PAGE_DOWN:return this._page(!1),!1;case l.UP_ARROW:return this.selectPreviousNode(),!1;case l.PAGE_UP:return this._page(!0),!1;default:return!0}}})})},"dijit/form/_ComboBoxMenuMixin":function(){define("dijit/form/_ComboBoxMenuMixin","dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/has dojo/i18n dojo/i18n!./nls/ComboBox".split(" "),function(m,p,f,l,
k){var h=p("dijit.form._ComboBoxMenuMixin"+(l("dojo-bidi")?"_NoBidi":""),null,{_messages:null,postMixInProperties:function(){this.inherited(arguments);this._messages=k.getLocalization("dijit.form","ComboBox",this.lang)},buildRendering:function(){this.inherited(arguments);this.previousButton.innerHTML=this._messages.previousMessage;this.nextButton.innerHTML=this._messages.nextMessage},_setValueAttr:function(f){this._set("value",f);this.onChange(f)},onClick:function(f){if(f==this.previousButton)this._setSelectedAttr(null),
this.onPage(-1);else if(f==this.nextButton)this._setSelectedAttr(null),this.onPage(1);else this.onChange(f)},onChange:function(){},onPage:function(){},onClose:function(){this._setSelectedAttr(null)},_createOption:function(f,g){var e=this._createMenuItem();f=g(f);f.html?e.innerHTML=f.label:e.appendChild(e.ownerDocument.createTextNode(f.label));""==e.innerHTML&&(e.innerHTML="\x26#160;");return e},createOptions:function(h,g,e){this.items=h;this.previousButton.style.display=0==g.start?"none":"";f.set(this.previousButton,
"id",this.id+"_prev");m.forEach(h,function(b,c){b=this._createOption(b,e);b.setAttribute("item",c);f.set(b,"id",this.id+c);this.nextButton.parentNode.insertBefore(b,this.nextButton)},this);var c=!1;h.total&&!h.total.then&&-1!=h.total?g.start+g.count<h.total?c=!0:g.start+g.count>h.total&&g.count==h.length&&(c=!0):g.count==h.length&&(c=!0);this.nextButton.style.display=c?"":"none";f.set(this.nextButton,"id",this.id+"_next")},clearResultList:function(){for(var f=this.containerNode;2<f.childNodes.length;)f.removeChild(f.childNodes[f.childNodes.length-
2]);this._setSelectedAttr(null)},highlightFirstOption:function(){this.selectFirstNode()},highlightLastOption:function(){this.selectLastNode()},selectFirstNode:function(){this.inherited(arguments);this.getHighlightedOption()==this.previousButton&&this.selectNextNode()},selectLastNode:function(){this.inherited(arguments);this.getHighlightedOption()==this.nextButton&&this.selectPreviousNode()},getHighlightedOption:function(){return this.selected}});l("dojo-bidi")&&(h=p("dijit.form._ComboBoxMenuMixin",
h,{_createOption:function(){var f=this.inherited(arguments);this.applyTextDir(f);return f}}));return h})},"dijit/form/_ListMouseMixin":function(){define("dijit/form/_ListMouseMixin",["dojo/_base/declare","dojo/on","dojo/touch","./_ListBase"],function(m,p,f,l){return m("dijit.form._ListMouseMixin",l,{postCreate:function(){this.inherited(arguments);this.domNode.dojoClick=!0;this._listConnect("click","_onClick");this._listConnect("mousedown","_onMouseDown");this._listConnect("mouseup","_onMouseUp");
this._listConnect("mouseover","_onMouseOver");this._listConnect("mouseout","_onMouseOut")},_onClick:function(f,h){this._setSelectedAttr(h,!1);this._deferredClick&&this._deferredClick.remove();this._deferredClick=this.defer(function(){this._deferredClick=null;this.onClick(h)})},_onMouseDown:function(f,h){this._hoveredNode&&(this.onUnhover(this._hoveredNode),this._hoveredNode=null);this._isDragging=!0;this._setSelectedAttr(h,!1)},_onMouseUp:function(f,h){this._isDragging=!1;var k=this.selected,g=this._hoveredNode;
k&&h==k?this.defer(function(){this._onClick(f,k)}):g&&this.defer(function(){this._onClick(f,g)})},_onMouseOut:function(f,h){this._hoveredNode&&(this.onUnhover(this._hoveredNode),this._hoveredNode=null);this._isDragging&&(this._cancelDrag=(new Date).getTime()+1E3)},_onMouseOver:function(f,h){this._cancelDrag&&((new Date).getTime()>this._cancelDrag&&(this._isDragging=!1),this._cancelDrag=null);this._hoveredNode=h;this.onHover(h);this._isDragging&&this._setSelectedAttr(h,!1)}})})},"dijit/form/_ListBase":function(){define("dijit/form/_ListBase",
["dojo/_base/declare","dojo/on","dojo/window"],function(m,p,f){return m("dijit.form._ListBase",null,{selected:null,_listConnect:function(f,k){var h=this;return h.own(p(h.containerNode,p.selector(function(f,g,e){return f.parentNode==e},f),function(f){h[k](f,this)}))},selectFirstNode:function(){for(var f=this.containerNode.firstChild;f&&"none"==f.style.display;)f=f.nextSibling;this._setSelectedAttr(f,!0)},selectLastNode:function(){for(var f=this.containerNode.lastChild;f&&"none"==f.style.display;)f=
f.previousSibling;this._setSelectedAttr(f,!0)},selectNextNode:function(){var f=this.selected;if(f){for(f=f.nextSibling;f&&"none"==f.style.display;)f=f.nextSibling;f?this._setSelectedAttr(f,!0):this.selectFirstNode()}else this.selectFirstNode()},selectPreviousNode:function(){var f=this.selected;if(f){for(f=f.previousSibling;f&&"none"==f.style.display;)f=f.previousSibling;f?this._setSelectedAttr(f,!0):this.selectLastNode()}else this.selectLastNode()},_setSelectedAttr:function(l,k){if(this.selected!=
l){var h=this.selected;if(h)this.onDeselect(h);l&&(k&&f.scrollIntoView(l),this.onSelect(l));this._set("selected",l)}else if(l)this.onSelect(l)}})})},"sixmaps/dijits/TakeMeToStore":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/store/util/QueryResults dojo/Deferred dojo/when".split(" "),function(m,p,f,l,k,h){return p("sixmaps.dijits.TakeMeToStore",null,{fields:"",queryParams:"",takeMeToSearch:null,fieldName:null,fieldParams:null,queryField:null,cache:null,constructor:function(f){p.safeMixin(this,
f||{});this.cache={}},get:function(f){return this.cache[f]},query:function(q,g){q=q.name.toString();var e=this,c=new k;if("*"==q||""==q)return[];var b={};b[e.fieldName]=e.fieldParams?f.mixin({},e.fieldParams,{value:q.replace(/\*/g,"%")}):q;b=e.takeMeToSearch.search(b);h(b,function(b){e.cache={};var d=[];m.forEach(b.result.features,function(b,c){var g=b.attributes[e.fieldName],f={};f[e.queryField]=g;e.cache[g]||(e.cache[g]=f,d.push(f))});b=l(d);!c.isFulfilled()&&c.resolve(b)});return c}})})},"sixmaps/dijits/takeMeTo/Address":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/xhr dojo/data/ItemFileReadStore dojo/Deferred dojo/text!sixmaps/dijits/takeMeTo/Help/AddressHelp.html sixmaps/dijits/FeedMapper sixmaps/dijits/takeMeTo/AddressResults sixmaps/dijits/takeMeTo/TakeMeTo sixmaps/map/Graphics".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b){return p("sixmaps.dijits.takeMeTo.Address",c,{title:"Address",map:null,layerUrl:"http://maps.six.nsw.gov.au/arcgis/rest/services/sixmaps/Boundaries/MapServer/0",addressQueryUrl:"http://mapsq.six.nsw.gov.au/arcgis/rest/services/sixmaps/Boundaries/MapServer/22",spatialReference:null,resultsWidgetType:"sixmaps/dijits/takeMeTo/AddressResults",resultsWidgetParams:null,arcGISServerUrl:null,_roadTypes:"(ACCESS|ALLEY|ARCADE|AVENUE|BEND|BOULEVARD|BOULEVARDE|BRACE|BRAE|BRANCH|BYPASS|CAUSEWAY|CHASE|CIRCLE|CIRCLET|CIRCUIT|CLOSE|COPSE|CORNER|COURT|COVE|CRESCENT|CREST|CROSSING|DEVIATION|DISTRIBUTOR|DRIVE|DRIVEWAY|END|ENTRANCE|ESPLANADE|ESTATE|FAIRWAY|FIRETRAIL|FLAT|GARDEN|GARDENS|GATE|GLADE|GLEN|GRANGE|GREEN|GROVE|HEIGHTS|HIGHWAY|HILL|ISLAND|KEY|LANE|LINK|LOOKOUT|LOOP|MALL|MEW|MEWS|MOTORWAY|NOOK|PARADE|PARK|PARKWAY|PASS|PATH|PATHWAY|PIAZZA|PKW|PLACE|PLAZA|POCKET|POINT|PORT|PROMENADE|QUAY|RAMBLE|RANGE|REACH|RESERVE|REST|RETREAT|RIDGE|RIGHT OF WAY|RING|RISE|RIVER|ROAD|ROADWAY|ROUTE|ROW|RUN|SERVICEWAY|SPUR|SQUARE|STRAIT|STREET|STRIP|TERRACE|TOR|TRACK|TRAIL|VIEW|VISTA|WADE|WALK|WALKWAY|WAY|RD|ST|AVE|BLVD|HIWAY|HWY|PDE|PL)",
helpHTML:q,constructor:function(c,e){this.spatialReference={wkid:3857};this.fieldParams=[{name:"houseNumber",alias:"Number",style:"width:4em;"},{name:"roadName",alias:"Road Name",widgetType:"dijit.form.ValidationTextBox",required:!0,style:"width:13em;"},{name:"roadType",alias:"Road Type",widgetType:"dijit.form.ComboBox",required:!1,ignoreCase:!0,style:"width:9em;",dataStore:{type:"dojo.data.ItemFileReadStore",value:"",params:{data:{label:"name",identifier:"name",items:[{name:""},{name:"ACCESS"},{name:"ALLEY"},
{name:"ARCADE"},{name:"AVENUE"},{name:"BEND"},{name:"BOULEVARD"},{name:"BOULEVARDE"},{name:"BRACE"},{name:"BRAE"},{name:"BRANCH"},{name:"BYPASS"},{name:"CAUSEWAY"},{name:"CHASE"},{name:"CIRCLE"},{name:"CIRCLET"},{name:"CIRCUIT"},{name:"CLOSE"},{name:"COPSE"},{name:"CORNER"},{name:"COURT"},{name:"COVE"},{name:"CRESCENT"},{name:"CREST"},{name:"CROSSING"},{name:"DEVIATION"},{name:"DISTRIBUTOR"},{name:"DRIVE"},{name:"DRIVEWAY"},{name:"END"},{name:"ENTRANCE"},{name:"ESPLANADE"},{name:"ESTATE"},{name:"FAIRWAY"},
{name:"FIRETRAIL"},{name:"FLAT"},{name:"GARDEN"},{name:"GARDENS"},{name:"GATE"},{name:"GLADE"},{name:"GLEN"},{name:"GRANGE"},{name:"GREEN"},{name:"GROVE"},{name:"HEIGHTS"},{name:"HIGHWAY"},{name:"HILL"},{name:"ISLAND"},{name:"KEY"},{name:"LANE"},{name:"LINK"},{name:"LOOKOUT"},{name:"LOOP"},{name:"MALL"},{name:"MEW"},{name:"MEWS"},{name:"MOTORWAY"},{name:"NOOK"},{name:"PARADE"},{name:"PARK"},{name:"PARKWAY"},{name:"PASS"},{name:"PATH"},{name:"PATHWAY"},{name:"PIAZZA"},{name:"PKW"},{name:"PLACE"},{name:"PLAZA"},
{name:"POCKET"},{name:"POINT"},{name:"PORT"},{name:"PROMENADE"},{name:"QUAY"},{name:"RAMBLE"},{name:"RANGE"},{name:"REACH"},{name:"RESERVE"},{name:"REST"},{name:"RETREAT"},{name:"RIDGE"},{name:"RIGHT OF WAY"},{name:"RING"},{name:"RISE"},{name:"RIVER"},{name:"ROAD"},{name:"ROADWAY"},{name:"ROUTE"},{name:"ROW"},{name:"RUN"},{name:"SERVICEWAY"},{name:"SPUR"},{name:"SQUARE"},{name:"STRAIT"},{name:"STREET"},{name:"STRIP"},{name:"TERRACE"},{name:"TOR"},{name:"TRACK"},{name:"TRAIL"},{name:"VIEW"},{name:"VISTA"},
{name:"WADE"},{name:"WALK"},{name:"WALKWAY"},{name:"WAY"},{name:"RD"},{name:"ST"},{name:"AVE"},{name:"BLVD"},{name:"HIWAY"},{name:"HWY"},{name:"PDE"},{name:"PL"}]}}}},{name:"suburbname",alias:"Suburb",widgetType:"sixmaps.dijits.form.ComboBox",params:{sourceUrl:this.layerUrl,style:"width:13em;",fieldName:"suburbname",hasDownArrow:!1}},{name:"postCode",alias:"Postcode",style:"width:3em;",widgetType:"dijit.form.ValidationTextBox",required:!1}];var d=new b({map:this.map,name:"Address Secondary Graphics"});
this.singleSearches=[{match:"^(\\d+[a-z]?(\\/\\d*[a-z]?)?)\\s([a-z\\s]+)\\s"+this._roadTypes+"\\s(\\d{4}|[a-z]+[a-z\\s]*|[a-z]+[a-z\\s]*\\d{4})$",fields:{houseNumber:1,roadName:3,roadType:4,suburbname:5}}];d=f.mixin({selectFirstResult:!0,sortInfo:-3,structure:[{field:"address",name:"Address",width:"280px"},{field:"principaladdresstype",name:"Type",width:"70px"}],map:this.map,secondaryGraphics:d},c.resultsWidgetParams);p.safeMixin(this,c);p.safeMixin(this.resultsWidgetParams,d)},postCreate:function(){var b=
this;b.inherited(arguments);p.safeMixin(b.inputWidget,{validate:function(){this.inherited(arguments);var c=m.filter(b.inputWidget._inputFields,function(b){return"suburbname"==b.name||"postCode"==b.name});m.some(c,function(b){return""!=b.inputBox.getValue()})||m.forEach(c,function(b){b.inputBox.set("state","Error")})}});b.inputWidget.on("submit",function(){b.inputWidget.validate()});b.inputWidget.on("reset",function(){m.forEach(b.inputWidget._inputFields,function(b){b.inputBox.reset()})})},search:function(b,
c){var d=this;b=d._beforeSearch.apply(d,arguments);var e=new h;e.then(f.hitch(d,"onSearchResult"),f.hitch(d,"onSearchError"));var q=b.suburbname&&b.suburbname.value,r=b.postCode&&b.postCode.value;if(q){var p=q.match(/\d{4}/);p&&(r=r||p[0],q=q.match(/[a-z]+[a-z\s]*/i))}l.get({url:"/AddressSearchWS/service/searchAddress",handleAs:"json",content:{houseNumber:b.houseNumber&&b.houseNumber.value||"",roadName:b.roadName&&b.roadName.value||"",roadType:b.roadType&&b.roadType.value||"",suburb:q||"",postCode:r||
"",projection:b.projection&&b.projection.value||"EPSG:"+d.spatialReference.wkid},headers:{accept:"application/json"},load:function(b,c){if(b.addressResult&&!b.addressResult.errMsg){var f=[],h=new g({queryUrl:d.addressQueryUrl,fieldMapping:{propid:{name:"propid"}},inQueryField:"propid",keepQueryAttributes:!0});m.forEach(b.addressResult.addresses,function(b){f.push({propid:b.propid,shortAddressString:b.shortAddressString,postCode:b.postCode})});var l=new k({data:{items:f}});h.updateFeed({store:l}).then(e.resolve)}else e.reject(b.addressResult&&
b.addressResult.errMsg||"Unkown error")}});return e}})})},"sixmaps/dijits/FeedMapper":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/sniff dojo/aspect dojo/Deferred dojo/dom-construct dojo/dom-style dojo/has dojo/text!sixmaps/dijits/tools/Help/csvDropperHelp.html dojo/store/DataStore dojox/form/Uploader dijit/_WidgetBase dijit/form/Button dijit/form/CheckBox dijit/form/TextBox dijit/layout/ContentPane esri/geometry/Polygon esri/geometry/Polyline esri/geometry/Multipoint esri/layers/FeatureLayer esri/graphic esri/tasks/query esri/tasks/QueryTask sixmaps/dijits/DropFeed sixmaps/dijits/DropMapLayers sixmaps/dijits/HelpTopic sixmaps/dijits/takeMeTo/TakeMeToResults sixmaps/dijits/takeMeTo/TakeMeToSearch sixmaps/util/CsvStore sixmaps/util/Analytics".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x,w,y,z,B,A,C,F,E,H,D,G,I,P,Q){l=p("sixmaps.dijits.FeedMapper",[r],{mapGraphics:null,url:"",takeMeTo:null,outSR:102100,settingsNode:null,dropPrompt:"",matchHelp:null,baseUrl:"sixmaps.dijits.tools.images",iconUrl:"images/csv.png",helpHTML:c,matchers:null,fieldMapping:null,_queryTask:null,inQueryField:null,saveOption:!1,sendOption:!1,queryUrl:null,constructor:function(b,c){this.matchers=[];p.safeMixin(this,b);this.settingsNode=new x({content:"No settings available, load a file first..."})},
onDrop:function(b){var c=this;setTimeout(function(){c.updateFeed(b)},0)},onSaveSettings:function(b){var c=this;Q("send","event","Tool - FeedMapper","Settings Saved");c.domNode.innerHTML="";q.create("span",{"class":"dojoxGridLoading",innerHTML:"Updating feed..."},c.domNode);setTimeout(function(){c.createResultsNode(b)},500)},createSettings:function(b){var c=this;b=new O({title:c.title+" Settings",queryUrl:c.queryUrl,fields:b[0]});c.settingsNode.set("content",b);b.on("save",function(b){c.onSaveSettings(b)})},
postCreate:function(){var b=this;b.dropFeed=new E({node:b.domNode,onDropStore:function(c){b.onDrop({layout:null,store:c,fieldMapping:null})}});b.dropMapLayers=new H({node:b.domNode,onDropLayer:function(c){c.graphics&&(b.features=c.graphics,b.createResultsNode())}});b.updateFeed();b.domNode.innerHTML="";if(e("ie")||e("safari")){var c="\x3cb\x3eThis tool is not supported in "+(e("ie")?"Internet Explorer":"Safari")+".\x3c/b\x3e\x3cbr/\x3eTry using one of these browsers instead:\x3cbr/\x3e\x3cbr/\x3e\x3cdiv class\x3d'welcomeSplash' style\x3d'text-align: center; width: 100%'\x3e\x3ctable style\x3d'width: 80%; margin: 0 auto;'\x3e\x3ctr\x3e\x3ctd style\x3d'text-align: center; padding: 0 10px 0 10px'\x3e\x3ca href\x3d'//www.mozilla.com/' target\x3d'_blank'\x3e\x3cimg src\x3d'"+
require.toUrl("sixmaps/dijits/images/")+"firefox.png' title\x3d'Firefox' style\x3d'border:none;'/\x3e\x3cbr/\x3eFirefox\x3c/a\x3e\x3c/td\x3e\x3ctd style\x3d'text-align: center; padding: 0 10px 0 10px'\x3e\x3ca href\x3d'//www.google.com/chrome/' target\x3d'_blank'\x3e\x3cimg src\x3d'"+require.toUrl("sixmaps/dijits/images/")+"chrome.png' title\x3d'Chrome' style\x3d'border:none;'/\x3e\x3cbr/\x3eChrome\x3c/a\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e";q.create("div",{style:{"float":"left",width:"auto"},
"class":"dojoxGridError"},b.domNode);q.create("div",{style:"float:right;",innerHTML:c},b.domNode)}else b.reset();b.helpNode=new D({templateString:b.helpHTML,imagesUrl:require.toUrl("sixmaps/dijits/tools/Help/Images/"),baseUrl:require.toUrl("sixmaps//")});b.btnContainer=q.create("div")},_setMapGraphicsAttr:function(b){this._set("mapGraphics",b);this.resultsNode&&this.resultsNode.set("mapGraphics",b)},deactivate:function(){this.mapGraphics&&this.mapGraphics.clear();this.mapGraphics&&this.mapGraphics.clearHighlight()},
updateFeed:function(c){var d=this;c=c||{};d.domNode.innerHTML="";q.create("span",{"class":"dojoxGridLoading",innerHTML:"Updating feed..."},d.domNode);c&&p.safeMixin(d,c);var e=new h;d.store=c.store||d.url&&new P({url:d.url});if(d.store)return d.objectStore=new b({store:d.store}),d.objectStore.query().then(function(b){var c=d.layout,g={};m.forEach(b,function(b){for(var c in b)g[c]||(g[c]=!0)});var k=[],l=null,q={},r;for(r in g)if(k.push(r),r.match(/^\^.*\@.*/))l=r;else if(r.match(/.+=.+/)){var p=r.split("\x3d")[0];
r.split("\x3d");q[p]={name:r}}if(!c){var u=[];m.forEach(k,function(b){var c=b.split("\x3d")[1]||b;b.match(/^\^.*\@.*/)&&(c=b.match(/^\^(.*)\@.*/)[1]);u.push({field:b,name:c,editable:b.match(/^#/),formatter:function(b){return b&&b.toString()}})});d.layout=[u]}l&&(p=l.match(/^\^(.*)\@.*/)[1],c=l.match(/^\^.*\@(.*)/)[1],q[p]={name:l,type:"string"},d.fieldMapping=q,d.queryUrl=c,d.inQueryField=p);d.maxAllowableOffset=null;d.fieldMapping||(d.fieldMapping={},m.some(d.matchers,function(b){var c={},e=!0,h;
for(h in b.fields){var k=b.fields[h];"string"==typeof k&&(k={regExp:new RegExp(k,"i")});"string"==typeof k.regExp&&(k.regExp=new RegExp(k.regExp,k.regExpFlags||"i"));var l=k.optional,q;for(q in g)if(q.match(k.regExp)){c[h]=f.mixin({name:q},k.params);k.params&&k.params.width&&m.forEach(d.layout[0],function(b){b.name.match(k.regExp)&&(b.width=k.params.width)});l=!0;break}if(!l){e=!1;break}}return e?(d.fieldMapping=c,d.queryUrl=b.queryUrl,d.inQueryField=b.inQueryField,d.maxAllowableOffset=b.maxAllowableOffset,
d.matchField=b.matchField,!0):!1}));d.matchField&&d.matchField.getter&&m.forEach(b,function(b){var c={},e;for(e in b)for(var g in d.fieldMapping)d.fieldMapping[g].name==e&&(c[g]=b[e]);d.fieldMapping[d.matchField.name]={name:d.matchField.name};c=d.matchField.getter(c);b[d.matchField.name]=c});var t=new B(d.queryUrl),v=new h;t.loaded?v.resolve():(t.onLoad=function(){v.resolve()},t.onError=function(b){d.domNode.innerHTML="Could not load layer. Please check csv parameters and try again.";e.reject("Could not load feature layer. "+
b.message)});v.then(function(){m.forEach(t.fields,function(b){d.fieldMapping[b.name]&&(d.fieldMapping[b.name].type=b.type)});var c="";if(!d.inQueryField){var g=[];m.forEach(b,function(b){var c={},e;for(e in d.fieldMapping){var h=d.fieldMapping[e];c[e]=f.mixin({},h,{value:b[h.name]})}b=I.prototype.createWhereParams(c);b.length&&g.push("("+b.join(" AND ")+")")});c=g.join(" OR ")}else if(d.fieldMapping[d.inQueryField]){var h=[],k=d.fieldMapping[d.inQueryField];m.forEach(b,function(b){if(b=b[k.name]){if("string"==
k.type||"esriFieldTypeString"==k.type||isNaN(Number(b)))if(b="'"+(""+b).replace(/'/g,"''")+"'",!k.exactCase||k.ignoreCase)b=b.toUpperCase();h.push(b)}});c=d.inQueryField;k.ignoreCase&&(c="UPPER("+c+")");c=c+" in ("+h.join(",")+")"}var l={where:c,outSpatialReference:{wkid:d.outSR},returnGeometry:!0,maxAllowableOffset:d.maxAllowableOffset||null,outFields:["*"]};d._queryTask=new F(d.queryUrl);c=new C;f.mixin(c,l);d._query=c;d._queryTask.execute(c,function(c){var g=[];d.keepQueryAttributes?g=c.features:
m.forEach(b,function(b,e){var h=[];d.matchField?m.forEach(c.features,function(c){c.attributes[d.matchField.name]==b[d.matchField.name]&&h.push(c)}):m.forEach(c.features,function(c){var e=!0,g;for(g in d.fieldMapping){var k={ignoreCase:!0};f.mixin(k,d.fieldMapping[g]);var l=c.attributes[g];null==l&&(l="");var m=b[k.name];null==m&&(m="");var q=m;switch(k.searchType){case "startsWith":q="^"+q;break;case "endsWith":q+="$";break;case "exact":q="^"+q+"$"}k=new RegExp(q,k.ignoreCase?"i":"");if(l.match&&
!l.match(k)||!l.match&&l!=m){e=!1;break}}if(e)return h.push(c),!0});var k=h[0],l;if(k)switch(l=k.geometry,k.type){case "polygon":l=new w(c.spatialReference);var q;e=0;for(var r=h.length;e<r;e++){q=h[e].geometry.rings;for(var p=0,u=q.length;p<u;p++)l.addRing(q[p])}break;case "line":l=new y(c.spatialReference);e=0;for(r=h.length;e<r;e++)for(u=h[e].geometry.paths,q=0,p=u.length;q<p;q++)l.addPath(u[q]);break;case "point":for(l=new z(c.spatialReference),e=0,r=h.length;e<r;e++)for(u=h[e].geometry.points,
q=0,p=u.length;q<p;q++)l.addPoint(u[q])}r=new A;f.mixin(r,{attributes:{},matchedFeatures:h,geometry:l});for(var t in b)t.match(/.+=.+/)&&k?(l=t.split("\x3d")[0],r.attributes[t]=k.attributes[l]):r.attributes[t]=b[t];g.push(r)});e.resolve({features:g,params:l});d.features=g;d.createResultsNode(d.layout);d.createSettings(d.layout)},function(b){d.domNode.innerHTML="An error occurred: "+b;e.reject({error:b})})})}),e},createResultsNode:function(b){var c=this;c.resultsNode&&(m.forEach(c.resultsNode.connects,
function(b){b.remove()}),c.resultsNode.clear(),c.resultsNode.destroyRecursive());c.domNode.innerHTML="";c.resultsNode=new G({autoWidth:!0,width:600,height:"400px",autoHeight:10,structure:b,mapGraphics:c.mapGraphics});c.resultsNode.placeAt(c.domNode);c.messageNode=q.create("div",{},c.domNode,"first");c.resultsNode.startup();c.resultsNode.showResults(c.features);c.resultsNode.connects=[];c.resultsNode.connects.push(c.resultsNode.on("showMessage",function(){c.messageNode.innerHTML=c.resultsNode.messagesNode.innerHTML;
g.set(c.messageNode,"marginTop",c.messageNode.innerHTML.length?"10px":"0px");g.set(c.resultsNode.messagesNode,"visibility","hidden")}));c.btnContainer=q.create("div");g.set(c.btnContainer,{paddingBottom:"5px"});q.place(c.btnContainer,c.domNode,"first");c.saveOption&&(c.resultsNode.exporter.url="/SIXREST/servlet/SaveDataServlet/",(new v({label:"Export",onClick:function(){c.resultsNode.downloadFeaturesAsCsv()}})).placeAt(c.btnContainer),g.set(c.btnContainer,"display",""))},reset:function(){this.domNode.innerHTML=
"";q.create("div",{innerHTML:this.dropPrompt},this.domNode);this.matchHelp&&q.create("div",{innerHTML:this.matchHelp},this.domNode);var b=new x({content:"No settings available, load a file first..."});this.settingsNode.set("content",b);this.mapGraphics&&this.mapGraphics.clear()}});var O=p("sixmaps.dijits.FeedMapperSettings",[x],{title:"",queryUrl:"",style:{padding:"5px",maxHeight:"200px",width:"360px"},constructor:function(b,c){p.safeMixin(this,b)},postCreate:function(){this.inherited(arguments);
this.fieldsNode=q.create("div",null,this.domNode);this.updateFields()},updateFields:function(){if(this.fieldsNode){q.create("div",{innerHTML:"Fields:",style:{"float":"left",width:"65px"}},this.fieldsNode);var b=q.create("div",{style:"float:left;"},this.fieldsNode);m.forEach(this.fields,function(c){var d=q.create("div",null,b);!c.alias&&(c.alias=c.name);c.checkBox=(new u({checked:!0})).placeAt(d,"first");c.aliasBox=(new t({type:"text",style:{width:"10em",marginLeft:"5px"},value:c.alias,onChange:function(){c.name=
this.value}})).placeAt(d,"last")});(new v({style:{marginLeft:"40px",position:"absolute",bottom:"30px"},onClick:f.hitch(this,"doSave"),label:"Update Fields",value:"Update Fields"})).placeAt(this.fieldsNode)}},doSave:function(){var b=[];m.forEach(this.fields,function(c){c.checkBox&&c.checkBox.checked&&b.push(c)});this.onSave(b)},onSave:function(b){}});return l})},"dojo/store/DataStore":function(){define("dojo/store/DataStore","../_base/lang ../_base/declare ../Deferred ../_base/array ./util/QueryResults ./util/SimpleQueryEngine".split(" "),
function(m,p,f,l,k,h){return p("dojo.store.DataStore",null,{target:"",constructor:function(f){m.mixin(this,f);if(!("idProperty"in f)){var g;try{g=this.store.getIdentityAttributes()}catch(e){}this.idProperty=(m.isArray(g)?g[0]:g)||this.idProperty}f=this.store.getFeatures();f["dojo.data.api.Read"]||(this.get=null);f["dojo.data.api.Identity"]||(this.getIdentity=null);f["dojo.data.api.Write"]||(this.put=this.add=null)},idProperty:"id",store:null,queryEngine:h,_objectConverter:function(f){function g(b){for(var d=
{},f=e.getAttributes(b),h=0;h<f.length;h++){var k=f[h],l=e.getValues(b,k);if(1<l.length){for(k=0;k<l.length;k++){var m=l[k];"object"==typeof m&&e.isItem(m)&&(l[k]=g(m))}m=l}else m=e.getValue(b,k),"object"==typeof m&&e.isItem(m)&&(m=g(m));d[f[h]]=m}c in d||!e.getIdentity||(d[c]=e.getIdentity(b));return d}var e=this.store,c=this.idProperty;return function(b){return f(b&&g(b))}},get:function(h,g){var e,c,b=new f;this.store.fetchItemByIdentity({identity:h,onItem:this._objectConverter(function(c){b.resolve(e=
c)}),onError:function(d){b.reject(c=d)}});if(void 0!==e)return null==e?void 0:e;if(c)throw c;return b.promise},put:function(h,g){g=g||{};var e="undefined"!=typeof g.id?g.id:this.getIdentity(h),c=this.store,b=this.idProperty,d=new f;if("undefined"==typeof e){var k=c.newItem(h);c.save({onComplete:function(){d.resolve(k)},onError:function(b){d.reject(b)}})}else c.fetchItemByIdentity({identity:e,onItem:function(e){if(e){if(!1===g.overwrite)return d.reject(Error("Overwriting existing object not allowed"));
for(var f in h)f!=b&&h.hasOwnProperty(f)&&c.getValue(e,f)!=h[f]&&c.setValue(e,f,h[f])}else{if(!0===g.overwrite)return d.reject(Error("Creating new object not allowed"));e=c.newItem(h)}c.save({onComplete:function(){d.resolve(e)},onError:function(b){d.reject(b)}})},onError:function(b){d.reject(b)}});return d.promise},add:function(f,g){(g=g||{}).overwrite=!1;return this.put(f,g)},remove:function(h){var g=this.store,e=new f;this.store.fetchItemByIdentity({identity:h,onItem:function(c){try{null==c?e.resolve(!1):
(g.deleteItem(c),g.save(),e.resolve(!0))}catch(b){e.reject(b)}},onError:function(c){e.reject(c)}});return e.promise},query:function(h,g){var e,c=new f(function(){e.abort&&e.abort()});c.total=new f;var b=this._objectConverter(function(b){return b});e=this.store.fetch(m.mixin({query:h,onBegin:function(b){c.total.resolve(b)},onComplete:function(d){c.resolve(l.map(d,b))},onError:function(b){c.reject(b)}},g));return k(c)},getIdentity:function(f){return f[this.idProperty]}})})},"dojox/form/Uploader":function(){require({cache:{"url:dojox/form/resources/Uploader.html":'\x3cspan class\x3d"dijit dijitReset dijitInline"\r\n\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonNode"\r\n\t\tdata-dojo-attach-event\x3d"ondijitclick:_onClick"\r\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode,focusNode"\r\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitToggleButtonIconChar"\x3e\x26#x25CF;\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tid\x3d"${id}_label"\r\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\x3e\x3c/span\r\n\t\x3e\x3c/span\r\n\t\x3e \r\n\t\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen" tabIndex\x3d"-1" data-dojo-attach-point\x3d"valueNode" /\x3e\r\n\x3c/span\x3e\r\n'}});
define("dojox/form/Uploader","dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/window dojo/dom-style dojo/dom-class dojo/dom-geometry dojo/dom-attr dojo/dom-construct dojo/dom-form dijit dijit/form/Button ./uploader/_Base ./uploader/_HTML5 ./uploader/_IFrame ./uploader/_Flash dojo/i18n!./nls/Uploader dojo/text!./resources/Uploader.html".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x,w,y,z){return p("dojox.form.Uploader",[u,v,t,x,w],{uploadOnSelect:!1,
tabIndex:0,multiple:!1,label:y.label,url:"",name:"uploadedfile",flashFieldName:"",force:"",uploadType:"",showInput:"",focusedClass:"dijitButtonHover",_nameIndex:0,templateString:z,baseClass:"dijitUploader "+v.prototype.baseClass,postMixInProperties:function(){this._inputs=[];this._cons=[];this.force=this.force.toLowerCase();this.supports("multiple")?this.uploadType="form"===this.force?"form":"html5":this.uploadType="flash"===this.force?"flash":"iframe";this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);
q.set(this.domNode,{overflow:"hidden",position:"relative"});this._buildDisplay();c.set(this.titleNode,"tabIndex",-1)},_buildDisplay:function(){this.showInput&&(this.displayInput=b.create("input",{"class":"dijitUploadDisplayInput",tabIndex:-1,autocomplete:"off",role:"presentation"},this.containerNode,this.showInput),this._attachPoints.push("displayInput"),this.connect(this,"onChange",function(b){for(var c=0,d,e=[];d=b[c++];)d&&d.name&&e.push(d.name);this.displayInput.value=e.join(", ")}),this.connect(this,
"reset",function(){this.displayInput.value=""}))},startup:function(){this._buildInitialized||(this._buildInitialized=!0,this._getButtonStyle(this.domNode),this._setButtonStyle(),this.inherited(arguments))},onChange:function(b){},onBegin:function(b){},onProgress:function(b){},onComplete:function(b){this.reset()},onCancel:function(){},onAbort:function(){},onError:function(b){},upload:function(b){b=b||{};b.uploadType=this.uploadType;this.inherited(arguments)},submit:function(b){b=b?b.tagName?b:this.getForm():
this.getForm();b=d.toObject(b);b.uploadType=this.uploadType;this.upload(b)},reset:function(){delete this._files;this._disconnectButton();l.forEach(this._inputs,b.destroy);this._inputs=[];this._nameIndex=0;this._createInput()},getFileList:function(){var b=[];this.supports("multiple")?l.forEach(this._files,function(c,d){b.push({index:d,name:c.name,size:c.size,type:c.type})},this):l.forEach(this._inputs,function(c,d){c.value&&b.push({index:d,name:c.value.substring(c.value.lastIndexOf("\\")+1),size:0,
type:c.value.substring(c.value.lastIndexOf(".")+1)})},this);return b},_getValueAttr:function(){return this.getFileList()},_setValueAttr:function(b){},_setDisabledAttr:function(b){this.disabled!=b&&this.inputNode&&(this.inherited(arguments),q.set(this.inputNode,"display",b?"none":""))},_getButtonStyle:function(b){this.btnSize={w:q.get(b,"width"),h:q.get(b,"height")}},_setButtonStyle:function(){this.inputNodeFontSize=Math.max(2,Math.max(Math.ceil(this.btnSize.w/60),Math.ceil(this.btnSize.h/15)));this._createInput()},
_getFileFieldName:function(){return this.supports("multiple")&&this.multiple?this.name+"s[]":this.name+(this.multiple?this._nameIndex:"")},_createInput:function(){this._inputs.length&&(q.set(this.inputNode,{top:"500px"}),this._disconnectButton(),this._nameIndex++);var d=this._getFileFieldName();this.focusNode=this.inputNode=b.create("input",{type:"file",name:d,"aria-labelledby":this.id+"_label"},this.domNode,"first");this.supports("multiple")&&this.multiple&&c.set(this.inputNode,"multiple",!0);this._inputs.push(this.inputNode);
q.set(this.inputNode,{position:"absolute",fontSize:this.inputNodeFontSize+"em",top:"-3px",right:"-3px",opacity:0});this._connectButton()},_connectButton:function(){this._cons.push(k.connect(this.inputNode,"change",this,function(b){this._files=this.inputNode.files;this.onChange(this.getFileList(b));!this.supports("multiple")&&this.multiple&&this._createInput()}));-1<this.tabIndex&&(this.inputNode.tabIndex=this.tabIndex,this._cons.push(k.connect(this.inputNode,"focus",this,function(){g.add(this.domNode,
this.focusedClass)})),this._cons.push(k.connect(this.inputNode,"blur",this,function(){g.remove(this.domNode,this.focusedClass)})))},_disconnectButton:function(){l.forEach(this._cons,k.disconnect);this._cons.splice(0,this._cons.length)}})})},"dojox/form/uploader/_Base":function(){define("dojox/form/uploader/_Base","dojo/dom-form dojo/dom-style dojo/dom-construct dojo/dom-attr dojo/has dojo/_base/declare dojo/_base/event dijit/_Widget dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin".split(" "),
function(m,p,f,l,k,h,q,g,e,c){k.add("FormData",function(){return!!window.FormData});k.add("xhr-sendAsBinary",function(){var b=window.XMLHttpRequest&&new window.XMLHttpRequest;return b&&!!b.sendAsBinary});k.add("file-multiple",function(){return!!{"true":1,"false":1}[l.get(document.createElement("input",{type:"file"}),"multiple")]});return h("dojox.form.uploader._Base",[g,e,c],{getForm:function(){if(!this.form)for(var b=this.domNode;b&&b.tagName&&b!==document.body;){if("form"==b.tagName.toLowerCase()){this.form=
b;break}b=b.parentNode}return this.form},getUrl:function(){this.uploadUrl&&(this.url=this.uploadUrl);if(this.url)return this.url;this.getForm()&&(this.url=this.form.action);return this.url},connectForm:function(){this.url=this.getUrl();!this._fcon&&this.getForm()&&(this._fcon=!0,this.connect(this.form,"onsubmit",function(b){q.stop(b);this.submit(this.form)}))},supports:function(b){switch(b){case "multiple":if("flash"==this.force||"iframe"==this.force)break;return k("file-multiple");case "FormData":return k(b);
case "sendAsBinary":return k("xhr-sendAsBinary")}return!1},getMimeType:function(){return"application/octet-stream"},getFileType:function(b){return b.substring(b.lastIndexOf(".")+1).toUpperCase()},convertBytes:function(b){var c=Math.round(b/1024*1E5)/1E5,e=Math.round(b/1048576*1E5)/1E5,g=Math.round(b/1073741824*1E5)/1E5,f=b;1<c&&(f=c.toFixed(1)+" kb");1<e&&(f=e.toFixed(1)+" mb");1<g&&(f=g.toFixed(1)+" gb");return{kb:c,mb:e,gb:g,bytes:b,value:f}}})})},"dojox/form/uploader/_HTML5":function(){define("dojox/form/uploader/_HTML5",
"dojo/_base/declare dojo/_base/lang dojo/_base/array dojo dojo/request dojo/has".split(" "),function(m,p,f,l,k,h){return m("dojox.form.uploader._HTML5",[],{errMsg:"Error uploading files. Try checking permissions",uploadType:"html5",postMixInProperties:function(){this.inherited(arguments)},postCreate:function(){this.connectForm();this.inherited(arguments);this.uploadOnSelect&&this.connect(this,"onChange",function(f){this.upload(f[0])})},_drop:function(f){l.stopEvent(f);this._files=f.dataTransfer.files;
this.onChange(this.getFileList())},upload:function(f){this.onBegin(this.getFileList());this.uploadWithFormData(f)},addDropTarget:function(f,g){g||(this.connect(f,"dragenter",l.stopEvent),this.connect(f,"dragover",l.stopEvent),this.connect(f,"dragleave",l.stopEvent));this.connect(f,"drop","_drop")},uploadWithFormData:function(l){function g(b){d._xhrProgress(b);"load"===b.type&&(d.onComplete(m.response.data),m.response.xhr.removeEventListener("load",g,!1),m.response.xhr.upload.removeEventListener("progress",
g,!1),m=null)}if(this.getUrl()){var e=new FormData,c=this._getFileFieldName();f.forEach(this._files,function(b,d){e.append(c,b)},this);if(l){l.uploadType=this.uploadType;for(var b in l)e.append(b,l[b])}var d=this,m=k(this.getUrl(),{method:"POST",data:e,handleAs:"json",uploadProgress:!0,headers:{Accept:"application/json"}},!0);m.promise.response.otherwise(function(b){d.onError(b)});h("native-xhr2")?(m.response.xhr.addEventListener("load",g,!1),m.response.xhr.upload.addEventListener("progress",g,!1)):
m.promise.then(function(b){d.onComplete(b)})}},_xhrProgress:function(f){if(f.lengthComputable){var g={bytesLoaded:f.loaded,bytesTotal:f.total,type:f.type,timeStamp:f.timeStamp};"load"==f.type?(g.percent="100%",g.decimal=1):(g.decimal=f.loaded/f.total,g.percent=Math.ceil(f.loaded/f.total*100)+"%");this.onProgress(g)}}})})},"dojox/form/uploader/_IFrame":function(){define("dojox/form/uploader/_IFrame","dojo/query dojo/dom-construct dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-form dojo/request/iframe".split(" "),
function(m,p,f,l,k,h,q){return f("dojox.form.uploader._IFrame",[],{postMixInProperties:function(){this.inherited(arguments);"iframe"===this.uploadType&&(this.uploadType="iframe",this.upload=this.uploadIFrame)},uploadIFrame:function(g){var e={},c;this.getForm();var b=this.getUrl(),d=this;g=g||{};g.uploadType=this.uploadType;c=p.place('\x3cform enctype\x3d"multipart/form-data" method\x3d"post"\x3e\x3c/form\x3e',this.domNode);k.forEach(this._inputs,function(b,d){""!==b.value&&(c.appendChild(b),e[b.name]=
b.value)},this);if(g)for(nm in g)void 0===e[nm]&&p.create("input",{name:nm,value:g[nm],type:"hidden"},c);q.post(b,{form:c,handleAs:"json",content:g}).then(function(b){p.destroy(c);if(b.ERROR||b.error)d.onError(b);else d.onComplete(b)},function(b){p.destroy(c);d.onError(b)})}})})},"dojox/form/uploader/_Flash":function(){define("dojox/form/uploader/_Flash","dojo/dom-form dojo/dom-style dojo/dom-construct dojo/dom-attr dojo/_base/declare dojo/_base/config dojo/_base/connect dojo/_base/lang dojo/_base/array dojox/embed/Flash".split(" "),
function(m,p,f,l,k,h,q,g,e,c){return k("dojox.form.uploader._Flash",[],{swfPath:h.uploaderPath||require.toUrl("dojox/form/resources/uploader.swf"),preventCache:!0,skipServerCheck:!0,serverTimeout:2E3,isDebug:!1,devMode:!1,deferredUploading:0,postMixInProperties:function(){"flash"===this.uploadType&&(this._files=[],this._fileMap={},this._createInput=this._createFlashUploader,this.getFileList=this.getFlashFileList,this.reset=this.flashReset,this.upload=this.uploadFlash,this.fieldname="flashUploadFiles");
this.inherited(arguments)},onReady:function(b){},onLoad:function(b){},onFileChange:function(b){},onFileProgress:function(b){},getFlashFileList:function(){return this._files},flashReset:function(){this.flashMovie.reset();this._files=[];this._fileMap={}},uploadFlash:function(b){this.onBegin(this.getFileList());b=b||{};b.returnType="F";b.uploadType=this.uploadType;this.flashMovie.doUpload(b)},_change:function(b){this._files=this._files.concat(b);e.forEach(b,function(b){b.bytesLoaded=0;b.bytesTotal=b.size;
this._fileMap[b.name+"_"+b.size]=b},this);this.onChange(this._files);this.onFileChange(b)},_complete:function(b){this._getCustomEvent().type="load";this.onComplete(b)},_progress:function(b){this._fileMap[b.name+"_"+b.bytesTotal].bytesLoaded=b.bytesLoaded;var c=this._getCustomEvent();this.onFileProgress(b);this.onProgress(c)},_error:function(b){this.onError(b)},_onFlashBlur:function(b){},_getCustomEvent:function(){var b={bytesLoaded:0,bytesTotal:0,type:"progress",timeStamp:(new Date).getTime()},c;
for(c in this._fileMap)b.bytesTotal+=this._fileMap[c].bytesTotal,b.bytesLoaded+=this._fileMap[c].bytesLoaded;b.decimal=b.bytesLoaded/b.bytesTotal;b.percent=Math.ceil(b.bytesLoaded/b.bytesTotal*100)+"%";return b},_connectFlash:function(){this._subs=[];this._cons=[];var b=g.hitch(this,function(b,c){this._subs.push(q.subscribe(this.id+b,this,c))});b("/filesSelected","_change");b("/filesUploaded","_complete");b("/filesProgress","_progress");b("/filesError","_error");b("/filesCanceled","onCancel");b("/stageBlur",
"_onFlashBlur");this.connect(this.domNode,"focus",function(){this.flashMovie.focus();this.flashMovie.doFocus()});0<=this.tabIndex&&l.set(this.domNode,"tabIndex",this.tabIndex)},_createFlashUploader:function(){var b=this.btnSize.w,d=this.btnSize.h;if(b){var e=this.getUrl();if(e&&0>e.toLowerCase().indexOf("http")&&0!=e.indexOf("/")){var h=window.location.href.split("/");h.pop();h=h.join("/")+"/";e=h+e}this.inputNode=f.create("div",{className:"dojoxFlashNode"},this.domNode,"first");p.set(this.inputNode,
{position:"absolute",top:"-2px",width:b+"px",height:d+"px",opacity:0});b={expressInstall:!0,path:(this.swfPath.uri||this.swfPath)+(this.preventCache?"?cb_"+(new Date).getTime():""),width:b,height:d,allowScriptAccess:"always",allowNetworking:"all",vars:{uploadDataFieldName:this.flashFieldName||this.name+"Flash",uploadUrl:e,uploadOnSelect:this.uploadOnSelect,deferredUploading:this.deferredUploading||0,selectMultipleFiles:this.multiple,id:this.id,isDebug:this.isDebug,noReturnCheck:this.skipServerCheck,
serverTimeout:this.serverTimeout},params:{scale:"noscale",wmode:"opaque",allowScriptAccess:"always",allowNetworking:"all"}};this.flashObject=new c(b,this.inputNode);this.flashObject.onError=g.hitch(function(b){});this.flashObject.onReady=g.hitch(this,function(){this.onReady(this)});this.flashObject.onLoad=g.hitch(this,function(b){this.flashMovie=b;this.flashReady=!0;this.onLoad(this)});this._connectFlash()}else setTimeout(dojo.hitch(this,function(){this._getButtonStyle(this.domNode);this._createFlashUploader()}),
200)}})})},"dojox/embed/Flash":function(){define("dojox/embed/Flash","dojo/_base/lang dojo/_base/unload dojo/_base/array dojo/query dojo/has dojo/dom dojo/on dojo/window dojo/string".split(" "),function(m,p,f,l,k,h,q,g,e){function c(b){b=m.delegate(v,b);if(!("path"in b))return null;"id"in b||(b.id="dojox-embed-flash-"+r++);return b}var b,d,r=0,v={expressInstall:!1,width:320,height:240,swLiveConnect:"true",allowScriptAccess:"sameDomain",allowNetworking:"all",style:null,redirect:null};k("ie")?(b=function(b){b=
c(b);if(!b)return null;var d,g=b.path;if(b.vars){var f=[];for(d in b.vars)f.push(encodeURIComponent(d)+"\x3d"+encodeURIComponent(b.vars[d]));b.params.FlashVars=f.join("\x26");delete b.vars}g='\x3cobject id\x3d"'+e.escape(String(b.id))+'" classid\x3d"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width\x3d"'+e.escape(String(b.width))+'" height\x3d"'+e.escape(String(b.height))+'"'+(b.style?' style\x3d"'+e.escape(String(b.style))+'"':"")+'\x3e\x3cparam name\x3d"movie" value\x3d"'+e.escape(String(g))+'" /\x3e';
if(b.params)for(d in b.params)g+='\x3cparam name\x3d"'+e.escape(d)+'" value\x3d"'+e.escape(String(b.params[d]))+'" /\x3e';return{id:b.id,markup:g+"\x3c/object\x3e"}},d=function(){for(var b=10,c=null;!c&&7<b;)try{c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+b--)}catch(w){}return c?(b=c.GetVariable("$version").split(" ")[1].split(","),{major:null!=b[0]?parseInt(b[0]):0,minor:null!=b[1]?parseInt(b[1]):0,rev:null!=b[2]?parseInt(b[2]):0}):{major:0,minor:0,rev:0}}(),p.addOnWindowUnload(function(){var b=
function(){};l("object").reverse().style("display","none").forEach(function(c){for(var d in c)if("FlashVars"!=d&&"function"==typeof c[d])try{c[d]=b}catch(y){}})})):(b=function(b){b=c(b);if(!b)return null;var d,g=b.path;if(b.vars){var f=[];for(d in b.vars)f.push(encodeURIComponent(d)+"\x3d"+encodeURIComponent(b.vars[d]));b.params.flashVars=f.join("\x26");delete b.vars}g='\x3cembed type\x3d"application/x-shockwave-flash" src\x3d"'+e.escape(String(g))+'" id\x3d"'+e.escape(String(b.id))+'" width\x3d"'+
e.escape(String(b.width))+'" height\x3d"'+e.escape(String(b.height))+'"'+(b.style?' style\x3d"'+e.escape(String(b.style))+'" ':"")+'pluginspage\x3d"'+window.location.protocol+'//www.adobe.com/go/getflashplayer" ';if(b.params)for(d in b.params)g+=" "+e.escape(d)+'\x3d"'+e.escape(String(b.params[d]))+'"';return{id:b.id,markup:g+" /\x3e"}},d=function(){var b=navigator.plugins["Shockwave Flash"];return b&&b.description?(b=b.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."),
{major:null!=b[0]?parseInt(b[0]):0,minor:null!=b[1]?parseInt(b[1]):0,rev:null!=b[2]?parseInt(b[2]):0}):{major:0,minor:0,rev:0}}());var u=function(b,c){if(-1<location.href.toLowerCase().indexOf("file://"))throw Error("dojox.embed.Flash can't be run directly from a file. To instatiate the required SWF correctly it must be run from a server, like localHost.");this.available=d.major;this.minimumVersion=b.minimumVersion||9;this.domNode=this.movie=this.id=null;c&&(c=h.byId(c));setTimeout(m.hitch(this,function(){if(b.expressInstall||
this.available&&this.available>=this.minimumVersion)if(b&&c)this.init(b,c);else this.onError("embed.Flash was not provided with the proper arguments.");else if(this.available)this.onError("Flash version detected: "+this.available+" is out of date. Minimum required: "+this.minimumVersion);else this.onError("Flash is not installed.")}),100)};m.extend(u,{onReady:function(b){},onLoad:function(b){},onError:function(b){},_onload:function(){clearInterval(this._poller);delete this._poller;delete this._pollCount;
delete this._pollMax;this.onLoad(this.movie)},init:function(b,c){this.destroy();c=h.byId(c||this.domNode);if(!c)throw Error("dojox.embed.Flash: no domNode reference has been passed.");var d=0;this._poller=null;this._pollCount=0;this._pollMax=15;this.pollTime=100;u.initialized&&(this.id=u.place(b,c),this.domNode=c,setTimeout(m.hitch(this,function(){this.movie=this.byId(this.id,b.doc);this.onReady(this.movie);this._poller=setInterval(m.hitch(this,function(){try{d=this.movie.PercentLoaded()}catch(y){}if(100==
d)this._onload();else if(0==d&&this._pollCount++>this._pollMax)throw clearInterval(this._poller),Error("Building SWF failed.");}),this.pollTime)}),1))},_destroy:function(){try{this.domNode.removeChild(this.movie)}catch(t){}this.id=this.movie=this.domNode=null},destroy:function(){if(this.movie){var b=m.delegate({id:!0,movie:!0,domNode:!0,onReady:!0,onLoad:!0}),c;for(c in this)b[c]||delete this[c];this._poller?q(this,"Load",this,"_destroy"):this._destroy()}},byId:function(b,c){c=c||document;return c.embeds[b]?
c.embeds[b]:c[b]?c[b]:window[b]?window[b]:document[b]?document[b]:null}});m.mixin(u,{minSupported:8,available:d.major,supported:d.major>=d.required,minimumRequired:d.required,version:d,initialized:!1,onInitialize:function(){u.initialized=!0},__ie_markup__:function(c){return b(c)},proxy:function(b,c){f.forEach(c instanceof Array?c:[c],function(b){this[b]=m.hitch(this,function(){return function(){return eval(this.movie.CallFunction('\x3cinvoke name\x3d"'+b+'" returntype\x3d"javascript"\x3e\x3carguments\x3e'+
f.map(arguments,function(b){return __flash__toXML(b)}).join("")+"\x3c/arguments\x3e\x3c/invoke\x3e"))}.apply(this,arguments||[])})},b)}});u.place=function(c,d){c=b(c);(d=h.byId(d))||(d=g.doc.createElement("div"),d.id=c.id+"-container",g.body().appendChild(d));return c?(d.innerHTML=c.markup,c.id):null};u.onInitialize();m.setObject("dojox.embed.Flash",u);return u})},"sixmaps/dijits/DropFeed":function(){define(["dojo/_base/declare","sixmaps/dijits/DropTarget","sixmaps/util/CsvStore","sixmaps/util/Analytics"],
function(m,p,f,l){return m("sixmaps.dijits.DropFeed",p,{feedReader:null,constructor:function(f,h){m.safeMixin(this,f)},onDropText:function(k){l("send","event","Tool - DropFeed","Text");if(k.match(/^http/g))this.onDropStore(new f({url:k}));else this.onDropStore(new f({data:k.replace(/\t/g,",")}))},onDropFiles:function(k){var h=this,m=k[0];if(m)if(m.name.match(/\.csv$/i)){l("send","event","Tool - DropFeed","CSV file");var g=new FileReader;g.onload=function(){h.onDropStore(new f({data:g.result}))};g.readAsText(m)}else m.name.match(/\.xlsx$/i)&&
(l("send","event","Tool - DropFeed","xlsx file"),require(["sixmaps/lib/xlsx.core.min"],function(e){var c=new FileReader;c.onload=function(b){b=e.read(c.result,{type:"binary"});b=e.utils.sheet_to_csv(b.Sheets[b.SheetNames[0]]);h.onDropStore(new f({data:b}))};c.readAsBinaryString(m)}))},onDropStore:function(f){}})})},"sixmaps/util/CsvStore":function(){define(["dojo/_base/declare","dojo/_base/lang","dojox/data/CsvStore"],function(m,p,f){m("sixmaps.util.CsvStore",[f],{_getArrayOfArraysFromCsvFileContents:function(f){if(p.isString(f)){var k=
RegExp("^\\s+","g"),h=RegExp("\\s+$","g"),l=RegExp('""',"g"),g=[],e=this._splitLines(f);for(f=0;f<e.length;++f){var c=e[f];if(0<c.length){for(var c=c.split(this.separator),b=0;b<c.length;){var d=c[b].replace(k,""),m=d.replace(h,""),v=m.charAt(0),u=m.charAt(m.length-1),t=m.charAt(m.length-2),x=m.charAt(m.length-3);if(2===m.length&&'""'==m)c[b]="";else if('"'==v&&('"'!=u||'"'==u&&'"'==t&&'"'!=x)){if(b+1===c.length)return;c[b]=d+this.separator+c[b+1];c.splice(b+1,1)}else'"'==v&&'"'==u&&(m=m.slice(1,
m.length-1),m=m.replace(l,'"')),c[b]=isNaN(m)?m:Number(m),b+=1}g.push(c)}}this._attributes=g.shift();for(f=0;f<this._attributes.length;f++)this._attributeIndexes[this._attributes[f]]=f;this._dataArray=g}}});return sixmaps.util.CsvStore})},"dojox/data/CsvStore":function(){define("dojox/data/CsvStore","dojo/_base/lang dojo/_base/declare dojo/_base/xhr dojo/_base/kernel dojo/data/util/filter dojo/data/util/simpleFetch".split(" "),function(m,p,f,l,k,h){p=p("dojox.data.CsvStore",null,{constructor:function(f){this._attributes=
[];this._attributeIndexes={};this._dataArray=[];this._arrayOfAllItems=[];this._loadFinished=!1;f.url&&(this.url=f.url);this._csvData=f.data;f.label?this.label=f.label:""===this.label&&(this.label=void 0);this._storeProp="_csvStore";this._idProp="_csvId";this._features={"dojo.data.api.Read":!0,"dojo.data.api.Identity":!0};this._loadInProgress=!1;this._queuedFetches=[];this.identifier=f.identifier;""===this.identifier?delete this.identifier:this._idMap={};"separator"in f&&(this.separator=f.separator);
"urlPreventCache"in f&&(this.urlPreventCache=f.urlPreventCache?!0:!1)},url:"",label:"",identifier:"",separator:",",urlPreventCache:!1,_assertIsItem:function(f){if(!this.isItem(f))throw Error(this.declaredClass+": a function was passed an item argument that was not an item");},_getIndex:function(f){f=this.getIdentity(f);this.identifier&&(f=this._idMap[f]);return f},getValue:function(f,g,e){this._assertIsItem(f);var c=e;if("string"===typeof g)g=this._attributeIndexes[g],null!=g&&(c=this._dataArray[this._getIndex(f)][g]||
e);else throw Error(this.declaredClass+": a function was passed an attribute argument that was not a string");return c},getValues:function(f,g){return(f=this.getValue(f,g))?[f]:[]},getAttributes:function(f){this._assertIsItem(f);var g=[];f=this._dataArray[this._getIndex(f)];for(var e=0;e<f.length;e++)""!==f[e]&&g.push(this._attributes[e]);return g},hasAttribute:function(f,g){this._assertIsItem(f);if("string"===typeof g)return g=this._attributeIndexes[g],f=this._dataArray[this._getIndex(f)],"undefined"!==
typeof g&&g<f.length&&""!==f[g];throw Error(this.declaredClass+": a function was passed an attribute argument that was not a string");},containsValue:function(f,g,e){var c=void 0;"string"===typeof e&&(c=k.patternToRegExp(e,!1));return this._containsValue(f,g,e,c)},_containsValue:function(f,g,e,c){f=this.getValues(f,g);for(g=0;g<f.length;++g){var b=f[g];if("string"===typeof b&&c)return null!==b.match(c);if(e===b)return!0}return!1},isItem:function(f){if(f&&f[this._storeProp]===this)if(f=f[this._idProp],
this.identifier){if(this._dataArray[this._idMap[f]])return!0}else if(0<=f&&f<this._dataArray.length)return!0;return!1},isItemLoaded:function(f){return this.isItem(f)},loadItem:function(f){},getFeatures:function(){return this._features},getLabel:function(f){if(this.label&&this.isItem(f))return this.getValue(f,this.label)},getLabelAttributes:function(f){return this.label?[this.label]:null},_fetchItems:function(h,g,e){var c=this,b=function(b,d){var e=null;if(b.query){var f,h,e=[],l=b.queryOptions?b.queryOptions.ignoreCase:
!1,m={};for(f in b.query)h=b.query[f],"string"===typeof h&&(m[f]=k.patternToRegExp(h,l));for(l=0;l<d.length;++l){var q=!0,r=d[l];for(f in b.query)h=b.query[f],c._containsValue(r,f,h,m[f])||(q=!1);q&&e.push(r)}}else e=d.slice(0,d.length);g(e,b)};if(this._loadFinished)b(h,this._arrayOfAllItems);else if(""!==this.url)if(this._loadInProgress)this._queuedFetches.push({args:h,filter:b});else{this._loadInProgress=!0;var d=f.get({url:c.url,handleAs:"text",preventCache:c.urlPreventCache});d.addCallback(function(d){try{c._processData(d),
b(h,c._arrayOfAllItems),c._handleQueuedFetches()}catch(t){e(t,h)}});d.addErrback(function(b){c._loadInProgress=!1;if(e)e(b,h);else throw b;});var l=null;h.abort&&(l=h.abort);h.abort=function(){var b=d;b&&-1===b.fired&&(b.cancel(),b=null);l&&l.call(h)}}else if(this._csvData)try{this._processData(this._csvData),this._csvData=null,b(h,this._arrayOfAllItems)}catch(u){e(u,h)}else{var m=Error(this.declaredClass+": No CSV source data was provided as either URL or String data input.");if(e)e(m,h);else throw m;
}},close:function(f){},_getArrayOfArraysFromCsvFileContents:function(f){if(m.isString(f)){var g=/^\s+/g,e=/\s+$/g,c=/""/g,b=[],d=this._splitLines(f);for(f=0;f<d.length;++f){var h=d[f];if(0<h.length){for(var h=h.split(this.separator),k=0;k<h.length;){var l=h[k].replace(g,""),q=l.replace(e,""),p=q.charAt(0),w=q.charAt(q.length-1),y=q.charAt(q.length-2),z=q.charAt(q.length-3);if(2===q.length&&'""'==q)h[k]="";else if('"'==p&&('"'!=w||'"'==w&&'"'==y&&'"'!=z)){if(k+1===h.length)return;h[k]=l+this.separator+
h[k+1];h.splice(k+1,1)}else'"'==p&&'"'==w&&(q=q.slice(1,q.length-1),q=q.replace(c,'"')),h[k]=q,k+=1}b.push(h)}}this._attributes=b.shift();for(f=0;f<this._attributes.length;f++)this._attributeIndexes[this._attributes[f]]=f;this._dataArray=b}},_splitLines:function(f){var g=[],e,c="",b=!1;for(e=0;e<f.length;e++){var d=f.charAt(e);switch(d){case '"':b=!b;c+=d;break;case "\r":b?c+=d:(g.push(c),c="",e<f.length-1&&"\n"==f.charAt(e+1)&&e++);break;case "\n":b?c+=d:(g.push(c),c="");break;default:c+=d}}""!==
c&&g.push(c);return g},_processData:function(f){this._getArrayOfArraysFromCsvFileContents(f);this._arrayOfAllItems=[];if(this.identifier&&void 0===this._attributeIndexes[this.identifier])throw Error(this.declaredClass+": Identity specified is not a column header in the data set.");for(f=0;f<this._dataArray.length;f++){var g=f;this.identifier&&(g=this._dataArray[f][this._attributeIndexes[this.identifier]],this._idMap[g]=f);this._arrayOfAllItems.push(this._createItemFromIdentity(g))}this._loadFinished=
!0;this._loadInProgress=!1},_createItemFromIdentity:function(f){var g={};g[this._storeProp]=this;g[this._idProp]=f;return g},getIdentity:function(f){return this.isItem(f)?f[this._idProp]:null},fetchItemByIdentity:function(h){var g,e=h.scope?h.scope:l.global;if(this._loadFinished)g=this._createItemFromIdentity(h.identity),this.isItem(g)||(g=null),h.onItem&&h.onItem.call(e,g);else{var c=this;if(""!==this.url)this._loadInProgress?this._queuedFetches.push({args:h}):(this._loadInProgress=!0,g=f.get({url:c.url,
handleAs:"text"}),g.addCallback(function(b){try{c._processData(b);var d=c._createItemFromIdentity(h.identity);c.isItem(d)||(d=null);h.onItem&&h.onItem.call(e,d);c._handleQueuedFetches()}catch(r){h.onError&&h.onError.call(e,r)}}),g.addErrback(function(b){this._loadInProgress=!1;h.onError&&h.onError.call(e,b)}));else if(this._csvData)try{c._processData(c._csvData),c._csvData=null,g=c._createItemFromIdentity(h.identity),c.isItem(g)||(g=null),h.onItem&&h.onItem.call(e,g)}catch(b){h.onError&&h.onError.call(e,
b)}}},getIdentityAttributes:function(f){return this.identifier?[this.identifier]:null},_handleQueuedFetches:function(){if(0<this._queuedFetches.length){for(var f=0;f<this._queuedFetches.length;f++){var g=this._queuedFetches[f],e=g.filter,c=g.args;e?e(c,this._arrayOfAllItems):this.fetchItemByIdentity(g.args)}this._queuedFetches=[]}}});m.extend(p,h);return p})},"sixmaps/dijits/DropMapLayers":function(){define("dojo/_base/array dojo/_base/Color dojo/_base/declare dojo/_base/json dojo/aspect dojo/dom-construct dojo/text!sixmaps/dijits/dragDropHelp.html dojox/data/CsvStore esri/geometry/Point esri/geometry/webMercatorUtils esri/layers/ArcGISDynamicMapServiceLayer esri/layers/ArcGISImageServiceLayer esri/layers/FeatureLayer esri/layers/GraphicsLayer esri/layers/KMLLayer esri/graphic esri/InfoTemplate esri/symbols/jsonUtils esri/symbols/PictureMarkerSymbol esri/symbols/SimpleMarkerSymbol esri/symbols/SimpleLineSymbol esri/urlUtils sixmaps/dijits/DropTarget sixmaps/dijits/HelpTopic sixmaps/map/layers/Json sixmaps/map/layers/JsonConverter sixmaps/map/layers/KMLLayer sixmaps/map/Graphics sixmaps/util/Analytics".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x,w,y,z,B,A,C,F,E,H,D,G,I){return f("sixmaps.dijits.DropMapLayers",[C],{title:"Drag \x26 Drop",helpHTML:q,displayHelp:!0,app:null,map:null,mapGraphics:null,addLayersToMap:!0,zoomToLayers:!0,useMapNodeForDrop:!0,constructor:function(b){b&&f.safeMixin(this,b)},postCreate:function(){this.inherited(arguments);this.displayHelp&&(this.helpNode=new F({templateString:this.helpHTML,imagesUrl:require.toUrl("sixmaps/dijits/images/"),baseUrl:require.toUrl("sixmaps//")}))},
_setMapAttr:function(b){this._set("map",b);this.useMapNodeForDrop&&(b&&b.id?this.set("node",b.id):this.set("node",null))},onDrop:function(b){this.handleDrop(b)},_onDropLayer:function(b,c){if(b.isInstanceOf(r))this.onDropFeatureLayer(b,c);else if(b.isInstanceOf(u))this.onDropKMLLayer(b,c);this.onDropLayer(b,c)},onDropLayer:function(b,c){var d=this;d.addLayersToMap&&d.map&&d.map.addLayer(b);d.zoomToLayers&&d.mapGraphics&&(k.after(b,"onLoad",function(){b.graphics?d.mapGraphics.zoomToFeatures(b.graphics):
b.fullExtent&&d.mapGraphics.zoomToFeatures(b.fullExtent)}),b.loaded&&b.onLoad())},onDropFeatureLayer:function(b,c){},onDropKmlLayer:function(b,c){},handleJson:function(b,c){"object"!=typeof b&&(b=l.fromJson(b));var d;if(b.type)d=E.fromJson(b);else if(b.layerDefinition&&b.layerDefinition.type&&"Feature Layer"==b.layerDefinition.type)d=new r(b);else if(b[0]&&b[0].geometry){d=new v;c&&(d.name=c.name);d.setInfoTemplate(new x("Details","${*}"));var e=new G({map:this.map,addGraphicsLayer:!1,graphicsLayer:d}),
g=[];m.forEach(b,function(b){g.push(new t(b))});e.add(g)}this._onDropLayer(d);return d},handleJsonFile:function(b){var c=this;I("send","event","Tool - DropMapLayers","JSON file");var d=new FileReader;d.onload=function(){c.handleJson(d.result,b)};d.readAsText(b)},handleDrop:function(b){b.preventDefault();var c=b.dataTransfer,d=c.files,e=c.types;if(d&&1===d.length)d=d[0],-1!==d.type.indexOf("image/")?this.handleImage(d,b.layerX,b.layerY):-1!==d.name.indexOf(".json")?this.handleJsonFile(d):-1!==d.name.indexOf(".csv")?
this.handleCsv(d):-1!==d.name.indexOf(".kml")&&this.handleKml(d);else if(e){m.forEach(e,function(b){});var g;m.some(e,function(b){return-1!==b.indexOf("text/uri-list")?(g=c.getData("text/uri-list"),!0):-1!==b.indexOf("text/x-moz-url")?(g=c.getData("text/plain"),!0):-1!==b.indexOf("text/plain")&&(g=c.getData("text/plain"),g=g.replace(/^\s+|\s+$/g,""),g.match(/^http/))?!0:!1})?(g=g.replace(/^\s+|\s+$/g,""),-1!==g.indexOf("www.google.com/url")&&(b=A.urlToObject(g))&&b.query&&b.query.url&&(g=b.query.url),
g.match(/MapServer\/?$/i)?this.handleMapServer(g):g.match(/(Map|Feature)Server\/\d+\/?$/i)?this.handleFeatureLayer(g):g.match(/ImageServer\/?$/i)?this.handleImageService(g):g.match(/kml|kmz/i)&&this.handleKmlService(g)):(b=c.getData("text/plain"),b.match&&b.match(/^(\{|\[)/)&&this.handleJson(b))}},handleKml:function(b){I("send","event","Tool - DropMapLayers","KML file");var c=this,d=new FileReader;d.onload=function(){var e=d.result,e=atob(e.split(",")[1]),e=H.kmlToEsri(e),e=c.app.mergeIn({},e,!0),
g=new v;g.name=b.name;g.showInToc=!0;g.setInfoTemplate(new x("${name}","${description}"));var f=new G({map:c.map,addGraphicsLayer:!1,graphicsLayer:g}),h=w.fromJson({color:[210,105,30,191],size:6,angle:0,xoffset:0,yoffset:0,type:"esriSMS",style:"esriSMSCircle",outline:{color:[0,0,128,255],width:0,type:"esriSLS",style:"esriSLSSolid"}}),k=new x(g.name,"${*}"),l=[];m.forEach(e.features,function(b){b=new t(b);if(!b.symbol)switch(b.geometry.type){case "point":case "multipoint":b.symbol=h;break;case "polyline":b.symbol=
f.defaultSymbolLine;break;case "extent":case "polygon":b.symbol=f.defaultSymbolPolygon}l.push(b);b.attributes&&b.attributes.description?b.attributes.description=b.attributes.description.replace(/<a href=/g,"\x3ca target\x3d'_blank' href\x3d"):b.infoTemplate=k});f.add(l);f.zoomToFeatures(l);c.map.addLayer(g)};d.readAsDataURL(b)},handleImage:function(b,c,d){I("send","event","Tool - DropMapLayers","Image file");var g=this,f=new FileReader;f.onload=function(){var b=h.create("img");b.onload=function(){var h=
b.width,k=b.height,h=new y(f.result,64<h?64:h,64<k?64:k),k=g.map.toMap(new e(c,d)),h=new t(k,h);g.map.graphics.add(h)};b.src=f.result};f.readAsDataURL(b)},handleKmlService:function(b){I("send","event","Tool - DropMapLayers","KML Service");b=new D(b);this._onDropLayer(b);return b},handleMapServer:function(c){I("send","event","Tool - DropMapLayers","Map Service");var d=new b(c,{opacity:.75});c=c.match(/services\/(.*)\/(Map|Feature)Server/);1<c.length&&(d.name=c[1]);d.listLayers=!0;this._onDropLayer(d);
return d},handleFeatureLayer:function(b){I("send","event","Tool - DropMapLayers","Feature Layer");b=new r(b,{opacity:.75,outFields:["*"],mode:r.MODE_ONDEMAND,infoTemplate:new x(null,"${*}")});this._onDropLayer(b);return b},handleImageService:function(b){I("send","event","Tool - DropMapLayers","Image Service");b=new d(b,{opacity:.75});this._onDropLayer(b);return b},handleCsv:function(b){I("send","event","Tool - DropMapLayers","CSV file");var c=this,d=new FileReader;d.onload=function(){c.processCsvData(d.result,
b)};d.readAsText(b)},processCsvData:function(b,d){var f=new g({data:b}),h=new v;h.name=d.name;f.fetch({onComplete:function(b,d){var g=new z(z.STYLE_X,12,new B(B.STYLE_SOLID,new p([255,0,0,.75]),4.5)),k=new x(null,"${*}");m.forEach(b,function(b,d){var l=f.getAttributes(b),q={};m.forEach(l,function(c){q[c]=f.getValue(b,c)});var l=parseFloat(q.latitude),r=parseFloat(q.longitude);isNaN(l)||isNaN(r)||(l=c.geographicToWebMercator(new e(r,l)),h.add(new t(l,g,q,k)))})},onError:function(b){}});this._onDropLayer(h);
return h},clearAll:function(){var b=this;b.map.graphics.clear();var c=b.map.graphicsLayerIds.slice(0),c=c.concat(b.map.layerIds.slice(1));m.forEach(c,function(c){b.map.removeLayer(b.map.getLayer(c))})}})})},"esri/layers/ArcGISImageServiceLayer":function(){require({cache:{"esri/layers/ImageServiceLayerMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/_base/array dojo/_base/json dojo/_base/config dojo/_base/connect dojo/has dojo/io-query dojo/DeferredList ../kernel ../config ../lang ../request ../deferredUtils ../urlUtils ../geometry/Extent ../geometry/Point ../geometry/Polygon ../renderers/colorRampUtils ./MosaicRule ./RasterFunction ./DimensionalDefinition ./Raster ./PixelBlock ./pixelFilters/VectorFieldPixelFilter ./rasterFormats/ImageCanvasDecoder ./TimeInfo ./Field ../graphic ../tasks/ImageServiceIdentifyTask ../tasks/ImageServiceIdentifyParameters".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x,w,y,z,B,A,C,F,E,H,D,G,I,P,Q,O){m=m(null,{declaredClass:"esri.layers.ImageServiceLayerMixin",_rasterFieldPrefix:"Raster.",_renderingRuleFieldSubPrefix:"ServicePixelValue.",_rasterFunctionServiceInfoProps:"bandCount pixelType hasRasterAttributeTable hasColormap hasHistograms minValues maxValues meanValues stdvValues serviceDataType".split(" "),_pixelTypeRanges:{U1:[0,1],U2:[0,3],U4:[0,15],U8:[0,255],S8:[-128,127],U16:[0,65535],S16:[-32768,32767]},_eventMap:{"rendering-change":!0,
"mosaic-rule-change":!0,"spatial-reference-change":!0,"renderer-change":!0},_cachedVariableStats:{},constructor:function(b,c){this.useMapTime=c&&c.hasOwnProperty("useMapTime")?!!c.useMapTime:!0},_initialize:function(b,c){this._url=t.urlToObject(b);this.raster=new F(this._url.path);this._rasterFunctionTemplateInfos={};this._customRenderingRuleId={};this.infoTemplate=c&&c.infoTemplate;this.format=(b=c&&c.imageServiceParameters)&&b.format;this.compressionTolerance=b&&b.compressionTolerance?b.compressionTolerance:
.01;this.interpolation=b?b.interpolation:null;this.compressionQuality=b?b.compressionQuality:null;this.bandIds=b?b.bandIds:null;this.mosaicRule=b?b.mosaicRule:null;this.renderingRule=b?b.renderingRule:null;this.renderer=b?b.renderer:null;this.useMapDimensionValue=c&&c.hasOwnProperty("useMapDimensionValue")?!!c.useMapDimensionValue:!0;this.hasImageFilter=c&&c.hasImageFilter;this.activeMapDimensions=c&&c.activeMapDimensions;this._params=p.mixin({},this._url.query,{f:"image",interpolation:this.interpolation,
format:this.format,compressionQuality:this.compressionQuality,bandIds:this.bandIds?this.bandIds.join(","):null},b?b.toJson():{});this.pixelFilter=c&&c.pixelFilter;this.originalPixelData=this.pixelData=null;this.hasDataChanged=!0;this._requestDataHandler=p.hitch(this,this._requestDataHandler);this._requestDataErrorHandler=p.hitch(this,this._requestDataErrorHandler);this._rasterReadPromise=null;this._initLayer=p.hitch(this,this._initLayer);this._queryVisibleRastersHandler=p.hitch(this,this._queryVisibleRastersHandler);
this._visibleRasters=[];this._rasterAttributeTableFields=[];this._rasterAttributeTableFeatures=[];this._renderingRuleAttributeTable={};this._renderingRuleColormap={};this._useRenderingRuleAttributeTable=!1;this._loadCallback=c&&c.loadCallback;b&&b.renderer&&(b.renderer.outputUnit||b.renderer.inputUnit)&&(this.vectorFieldPixelFilter=new H,this.vectorFieldPixelFilter.setUnits(b.renderer.inputUnit,b.renderer.outputUnit));(c=c&&c.resourceInfo)?this._initLayer(c):v({url:this._url.path,content:p.mixin({f:"json"},
this._url.query),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});this.registerConnectEvents()},disableClientCaching:!1,_initLayer:function(b,c){if(null!==b&&void 0!==b){this._findCredential();(this.credential&&this.credential.ssl||b&&b._ssl)&&this._useSSL();c=this.minScale;var d=this.maxScale;p.mixin(this,b);this.minScale=c;this.maxScale=d;this.initialExtent=this.fullExtent=this.extent=new x(b.extent);this.spatialReference=this.initialExtent.spatialReference;this.pixelSizeX=
parseFloat(this.pixelSizeX);this.pixelSizeY=parseFloat(this.pixelSizeY);var e=this.minValues,g=this.maxValues,f=this.meanValues,h=this.stdvValues,k=this.bands=[];c=0;for(d=this.bandCount;c<d;c++)k[c]={min:e[c],max:g[c],mean:f[c],stddev:h[c]};this.timeInfo=(c=this.timeInfo)&&c.timeExtent?new G(c):null;d=this.fields=[];if(e=b.fields)for(c=0;c<e.length;c++)d.push(new I(e[c]));this._updateInfoTemplateFields(this.fields);(this.version=b.currentVersion)||(this.version="fields"in b||"objectIdField"in b||
"timeInfo"in b?10:9.3);r.isDefined(b.minScale)&&!this._hasMin&&"Raster"!==b.cacheType&&this.setMinScale(b.minScale);r.isDefined(b.maxScale)&&!this._hasMax&&"Raster"!==b.cacheType&&this.setMaxScale(b.maxScale);c={};b.defaultMosaicMethod?(c.method=b.defaultMosaicMethod,c.operation=b.mosaicOperator,c.sortField=b.sortField,c.sortValue=b.sortValue):c.method=B.METHOD_NONE;this.defaultMosaicRule=new B(c);this.defaultMosaicRule.ascending=!0;this._useRenderingRuleAttributeTable=10<this.version&&"esriImageServiceDataTypeThematic"===
this.serviceDataType;this._setDefaultRenderingRule(!0);this._getRenderingRuleAttributeTableAndColormap();this._isScientificData()&&(!this.mosaicRule||this.mosaicRule&&!this.mosaicRule.multidimensionalDefinition)&&this._setDefaultMultidimensionalDefinition(!0);10<this.version&&this.hasRasterAttributeTable&&this.getRasterAttributeTable().then(p.hitch(this,function(b){b&&(b.features&&b.fields&&(this.rasterAttributeTable=p.clone(b)),b.features&&0<b.features.length&&(this._rasterAttributeTableFeatures=
p.clone(b.features)),b.fields&&0<b.fields.length&&(this._rasterAttributeTableFields=p.clone(b.fields)),this.renderingRule||!this.renderer||"esri.renderer.ClassBreaksRenderer"!==this.renderer.declaredClass&&"esri.renderer.UniqueValueRenderer"!==this.renderer.declaredClass||this.refresh())}));this._initVectorPixelFilter();this.bandIds||2!==this.bandCount||this.renderingRule||"esri.layers.ArcGISImageServiceLayer"!==this.declaredClass||this.setBandIds([0,0,0],!0);10.3<=this.version&&this.rasterFunctionInfos&&
this.rasterFunctionInfos.length&&this.getRasterFunctionInfos().then(p.hitch(this,function(b){if(b&&b.length){this.rasterFunctionInfos=b;var c=[],d;l.forEach(b,function(b){if(b){var e=b.functionType;d=d||1===e||2===e;c.push(b.name)}},this);this._hasItemLevelRFT=d;this._rasterFunctionNames=c;d&&(this._initVectorPixelFilter(),this.refresh())}}));this.loaded=!0;this._setDefaultFilter();this.onLoad(this);if(b=this._loadCallback)delete this._loadCallback,b(this)}},_updateInfoTemplateFields:function(b){if(b&&
!(1>b.length)&&this.infoTemplate&&this.infoTemplate.info&&this.infoTemplate.info.fieldInfos&&!(1>this.infoTemplate.info.fieldInfos.length)){var c,d,e,g;g=this.infoTemplate.info.fieldInfos;for(c=0;c<b.length;c++)for(e=b[c],d=0;d<g.length;d++)if(g[d].fieldName.toLowerCase()===e.name.toLowerCase()&&g[d].fieldName!==e.name){g[d].fieldName=e.name;break}}},getKeyProperties:function(b){var c=this._url.path+"/keyProperties",d=new f(u._dfdCanceller),e={f:"json"};b&&b.renderingRule&&(e.renderingRule=k.toJson(b.renderingRule.toJson()));
10<this.version?(d._pendingDfd=v({url:c,content:e,handleAs:"json",callbackParamName:"callback"}),d._pendingDfd.then(function(b){d.callback(b)},function(b){d.errback(b)})):(b=Error("Layer does not have key properties"),b.log=!!h.isDebug,d.errback(b));return d},getRasterAttributeTable:function(b){var c=this._url.path+"/rasterAttributeTable",d=new f(u._dfdCanceller),e={f:"json"},g=this.hasRasterAttributeTable;b&&b.renderingRule&&(e.renderingRule=k.toJson(b.renderingRule.toJson()),g=!0);!this.loaded||
10<this.version&&g?(d._pendingDfd=v({url:c,content:e,handleAs:"json",callbackParamName:"callback"}),d._pendingDfd.then(function(b){d.callback(b)},function(b){d.errback(b)})):(b=Error("Layer does not support raster attribute table"),b.log=!!h.isDebug,d.errback(b));return d},getRenderingRuleAttributeTable:function(b){var c=new f(u._dfdCanceller);if(!b||!b.renderingRule)return c.errback(Error("Rendering rule is not specified")),c;b=b.renderingRule;var d=this._getRenderingRuleId(b);this._renderingRuleAttributeTable&&
d&&this._renderingRuleAttributeTable.hasOwnProperty(d)?c.resolve(this._renderingRuleAttributeTable[d]):c=this.getRasterAttributeTable({renderingRule:b}).then(p.hitch(this,function(b){var c;b&&b.features&&b.features.length&&b.fields&&b.fields.length&&(c={features:p.clone(b.features),fields:p.clone(b.fields)},d&&(this._renderingRuleAttributeTable[d]=c));return c}));return c},_initVectorPixelFilter:function(){var b;this._hasItemLevelRFT&&this.renderingRule&&(b=this._getItemLevelRenderingRule(this.renderingRule));
if(b=b||this.renderingRule)return this.getRenderingRuleServiceInfo(b).then(p.hitch(this,function(b){!b||!this._isVectorData(b)&&"esri.layers.ArcGISImageServiceVectorLayer"!==this.declaredClass||r.isDefined(this.pixelFilter)||(this.vectorFieldPixelFilter=this.vectorFieldPixelFilter||new H,this.vectorFieldPixelFilter.isDataUV="esriImageServiceDataTypeVector-UV"===b.serviceDataType,this.pixelFilter=this.vectorFieldPixelFilter.computeMagnitudeAndDirection,this.getKeyProperties().then(p.hitch(this,this._setFlowRepresentation)),
this._applyVectorResamplingType(b.serviceDataType))}))},_applyVectorResamplingType:function(b){if(b){var c=this.renderingRule;c&&"Resample"===c.functionName&&((c.functionArguments||{}).ResamplingType="esriImageServiceDataTypeVector-UV"===b?7:10,this.setRenderingRule(new A(c.toJson())))}},_getRasterAttributeTableFeatures:function(){var b=new f;if(this._rasterAttributeTableFeatures&&0<this._rasterAttributeTableFeatures.length)return b.resolve(this._rasterAttributeTableFeatures),b;if(10<this.version&&
this.hasRasterAttributeTable)return b=this.getRasterAttributeTable(),b.then(p.hitch(this,function(b){b&&b.features&&0<b.features.length&&(this._rasterAttributeTableFeatures=p.clone(b.features))})),b;b.resolve(this._rasterAttributeTableFeatures);return b},_getRenderingRuleAttributeTableFeatures:function(b){return(b=b&&b.renderingRule)?this.getRenderingRuleAttributeTable({renderingRule:b}).then(function(b){return b&&b.features}):(b=new f,b.errback(Error("Rendering rule is not specified")),b)},_getRenderingRuleAttributeTableAndColormap:function(){this.renderingRule&&
this.getRenderingRuleServiceInfo(this.renderingRule).then(p.hitch(this,function(b){b.hasRasterAttributeTable&&this.getRenderingRuleAttributeTable({renderingRule:this.renderingRule}).then(p.hitch(this,function(){!this.renderer||"esri.renderer.ClassBreaksRenderer"!==this.renderer.declaredClass&&"esri.renderer.UniqueValueRenderer"!==this.renderer.declaredClass||this.refresh()}));b.hasColormap&&this.getRenderingRuleColormap({renderingRule:this.renderingRule}).then(p.hitch(this,function(){this.renderer&&
"esri.renderer.ColormapRenderer"===this.renderer.declaredClass&&this.refresh()}))}))},getCustomRasterFields:function(b){var c=b?b.rasterAttributeTableFieldPrefix:this._rasterFieldPrefix;b=10.3<=this.version?"esriFieldTypeDouble":"esriFieldTypeString";var d={name:this._rasterFieldPrefix+"ItemPixelValue",alias:"Item Pixel Value",domain:null,editable:!1,length:50,type:b},e={name:this._rasterFieldPrefix+"ServicePixelValue",alias:"Service Pixel Value",domain:null,editable:!1,length:50,type:b},g={name:this._rasterFieldPrefix+
"ServicePixelValue.Raw",alias:"Raw Service Pixel Value",domain:null,editable:!1,length:50,type:"esriFieldTypeDouble"},f=this.fields?p.clone(this.fields):[];b=f.length;f[b]=e;10.4<=this.version&&"esri.layers.ArcGISImageServiceLayer"===this.declaredClass&&(!this.rasterFunctionInfos||!this.rasterFunctionInfos.length||this._isRenderingRuleAProcessingTemplate({functionName:"none"}))&&(b++,f[b]=g);if(this.capabilities&&-1<this.capabilities.toLowerCase().indexOf("catalog")||this.fields&&0<this.fields.length)b++,
f[b]=d;!r.isDefined(this.pixelFilter)||"esriImageServiceDataTypeVector-UV"!==this.serviceDataType&&"esriImageServiceDataTypeVector-MagDir"!==this.serviceDataType||(d={name:this._rasterFieldPrefix+"Magnitude",alias:"Magnitude",domain:null,editable:!1,type:"esriFieldTypeDouble"},e={name:this._rasterFieldPrefix+"Direction",alias:"Direction",domain:null,editable:!1,type:"esriFieldTypeDouble"},b++,f[b]=d,b++,f[b]=e);b=this._rasterAttributeTableFields;(d=this.renderingRule&&this._getRenderingRuleId(this.renderingRule))&&
this._renderingRuleAttributeTable&&this._renderingRuleAttributeTable.hasOwnProperty(d)&&(b=this._renderingRuleAttributeTable[d].fields);b&&0<b.length&&(b=l.filter(b,function(b){return"esriFieldTypeOID"!==b.type&&"value"!==b.name.toLowerCase()}),b=l.map(b,function(b){var d=p.clone(b);d.name=c+b.name;return d}),f=f.concat(b));var h=this._rasterFieldPrefix+this._renderingRuleFieldSubPrefix;10.4<=this.version&&this.rasterFunctionInfos&&l.forEach(this.rasterFunctionInfos,function(b){b&&b.name&&"none"!==
b.name.toLowerCase()&&(b={name:h+b.name.replace(/ /gi,"_"),alias:b.name,domain:null,editable:!1,type:"esriFieldTypeDouble"},f.push(b))});return f},_applyTimeToMultidimensionalCRF:function(b,c){var d=this._isTimeSupportedOnCRF();if(d&&(!b||!b.multidimensionalDefinition))return b;var e=this.timeInfo&&this.timeInfo.startTimeField;if((c=c||this._params.time)&&e&&this._isMultidimensionalCRF()){b=p.clone(b||this.defaultMosaicRule)||new B;b.multidimensionalDefinition=b.multidimensionalDefinition||[];var g=
b.multidimensionalDefinition.filter(function(b){return b.dimensionName===e}),f=c.split(",").map(function(b){return parseInt(b,10)});2===f.length&&f[0]===f[1]&&(f.length=1);0<g.length?d?b.multidimensionalDefinition.forEach(function(b){b.dimensionName===e&&(b.dimensionName=null,b.isSlice=null,b.values=null)}):b.multidimensionalDefinition.forEach(function(b){b.dimensionName===e&&(b.isSlice=1===f.length,b.values=1===f.length?f:[f])}):d||(b.multidimensionalDefinition.some(function(b){return null!=b.variableName&&
null==b.dimensionName})?b.multidimensionalDefinition.forEach(function(b){null!=b.variableName&&null==b.dimensionName&&(b.dimensionName=e,b.isSlice=1===f.length,b.values=1===f.length?f:[f])}):b.multidimensionalDefinition.push(new C({variableName:"",dimensionName:e,isSlice:1===f.length,values:1===f.length?f:[f]})));this._cleanupMultidimensionalDefinition(b)}return b},_prepareGetImageParameters:function(b,c,d,e){e=r.isDefined(e)?e:this._params;if(this.renderer||this._hasItemLevelRFT&&this.renderingRule){var g=
this.getExportImageRenderingRule();e.renderingRule=g?k.toJson(g.toJson()):null}g=this.getExportImageMosaicRule(e);e.mosaicRule=g?k.toJson(g.toJson()):null;g=b.spatialReference.wkid||k.toJson(b.spatialReference.toJson(!1));delete e._ts;p.mixin(e,{bbox:b.xmin+","+b.ymin+","+b.xmax+","+b.ymax,imageSR:g,bboxSR:g,size:c+","+d},this.disableClientCaching?{_ts:(new Date).getTime()}:{});delete e.compressionTolerance;e.format&&"LERC"===e.format.toUpperCase()&&(e.compressionTolerance=this.compressionTolerance);
e.token=this._getToken()},getImageUrl:function(b,c,g,f,h){h=r.isDefined(h)?h:this._params;this._prepareGetImageParameters(b,c,g,h);b=p.clone(h);this._cleanupRequestParams(b);c=this._url.path+"/exportImage?";g=t.addProxy(c+e.objectToQuery(p.mixin(b,{f:"image"})));var k=b.token;g.length>d.defaults.io.postLength||this.useMapImage?this._jsonRequest=v({url:c,content:p.mixin(b,{f:"json"}),callbackParamName:"callback",load:function(b,c){b=b.href;k&&(b+=-1===b.indexOf("?")?"?token\x3d"+k:"\x26token\x3d"+
k);f(t.addProxy(b))},error:this._errorHandler}):f(g)},onRenderingChange:function(){},onMosaicRuleChange:function(){},onRendererChange:function(){},setInterpolation:function(b,c){this.interpolation=this._params.interpolation=b;c||this.refresh(!0)},setCompressionQuality:function(b,c){this.compressionQuality=this._params.compressionQuality=b;c||this.refresh(!0)},setCompressionTolerance:function(b,c){this.compressionTolerance=b;c||this.refresh(!0)},setBandIds:function(b,c){var d=!1;this.bandIds!==b&&
(d=!0);this.bandIds=b;this._params.bandIds=b.join(",");if(d&&!c)this.onRenderingChange();c||this.refresh(!0)},setDefaultBandIds:function(b){this.bandIds=this._params.bandIds=null;b||this.refresh(!0)},setDisableClientCaching:function(b){this.disableClientCaching=b},setMosaicRule:function(b,c){var d=!1;this.mosaicRule!==b&&(d=!0);this.mosaicRule=b;this._params.mosaicRule=k.toJson(b.toJson());if(d&&!c)this.onMosaicRuleChange();c||this.refresh(!0)},getRasterFunctionInfos:function(){if(!(10.3>this.version)&&
this.rasterFunctionInfos&&this.rasterFunctionInfos.length)return v({url:this._url.path+"/rasterFunctionInfos",content:{f:"json"},handleAs:"json",load:function(b){return b&&b.rasterFunctionInfos}})},setRenderingRule:function(b,c){var d=!1;this.renderingRule!==b&&(d=!0);this.renderingRule=b;this._params.renderingRule=b?k.toJson(b.toJson()):null;this._useRenderingRuleAttributeTable?this.getRenderingRuleAttributeTable({renderingRule:b}):"esri.layers.RasterXLayer"!==this.declaredClass&&this._getRenderingRuleAttributeTableAndColormap();
if(d)this.onRenderingChange();this._setDefaultFilter();c||this.refresh(!0)},setImageFormat:function(b,c){this.format=this._params.format=b;this._setDefaultFilter();c||this.refresh(!0)},setInfoTemplate:function(b){this.infoTemplate=b;this._updateInfoTemplateFields(this.fields)},setDefinitionExpression:function(b,c){var d=this.mosaicRule?this.mosaicRule.toJson():{};this.mosaicRule||(this.defaultMosaicRule?d=this.defaultMosaicRule.toJson():d.method=B.METHOD_NONE);d.where=b;b=new B(d);this.setMosaicRule(b,
c);return this},getDefinitionExpression:function(){return this.mosaicRule?this.mosaicRule.where:null},setPixelFilter:function(b){this.pixelFilter=b;this._isDefaultPixelFilter=!1},getPixelData:function(b){return b?(this._useBrowserDecoding()&&(this.originalPixelData={pixelBlock:this._getPixelBlockFromCanvas(this._context,this._map.width,this._map.height),extent:this._map.extent}),this.originalPixelData):this.pixelData},getExportImageRenderingRule:function(){var b;this._hasItemLevelRFT&&this.renderingRule&&
(b=this._getServiceLevelRenderingRule(this.renderingRule));b=b||this.renderingRule;this._isItemLevelRasterFunction(this.renderingRule)&&(b=void 0);return this._combineRenderingRule(this._convertRendererToRenderingRule(this.renderer),b)},getExportImageMosaicRule:function(){var b=this.mosaicRule,c;this._hasItemLevelRFT&&this.renderingRule&&(c=this._getItemLevelRenderingRule(this.renderingRule));c&&(b=b||this.defaultMosaicRule||new B,b.itemRenderingRule=c);return b=this._applyTimeToMultidimensionalCRF(b)},
redraw:function(){this.hasDataChanged=!1;this._setPixelData(this.originalPixelData)},getHistograms:function(){var b=new f(u._dfdCanceller);if(this.hasHistograms)b._pendingDfd=v({url:this._url.path+"/histograms",content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),b._pendingDfd.then(function(c){b.callback(c)},function(c){b.errback(c)});else{var c=Error("Layer does not have histograms.");c.log=!!h.isDebug;b.errback(c)}return b},computeHistograms:function(b){var c=new f(u._dfdCanceller);
if(10.1<=this.currentVersion){b=b||{};var d=b.geometry||this.fullExtent,e=(b.geometry||this.fullExtent).toJson(),d="extent"===d.type?"esriGeometryEnvelope":"esriGeometryPolygon",g=b.renderingRule||this.renderingRule||this.defaultRenderingRule,g=g?g.toJson():null,k=b.mosaicRule||this.mosaicRule||this.defaultMosaicRule,k=k?k.toJson():null;b=b.pixelSize||{x:this.pixelSizeX,y:this.pixelSizeY};c._pendingDfd=v({url:this._url.path+"/computeHistograms",content:p.mixin({f:"json",geometry:JSON.stringify(e),
geometryType:d,renderingRule:JSON.stringify(g),mosaicRule:JSON.stringify(k),pixelSize:JSON.stringify(b),callbackParamName:"callback"}),handleAs:"json"});c._pendingDfd.then(function(b){c.callback(b)},function(b){c.errback(b)})}else e=Error("Layer doesn't support computeHistograms."),e.log=!!h.isDebug,c.errback(e);return c},getRenderingRuleServiceInfo:function(b,c){function d(b){return b.name&&b.arguments&&b.function&&b.hasOwnProperty("functionType")}var e=new u._fixDfd(new f(u._dfdCanceller));if(!b)return e.errback(Error("Rendering rule is not specified")),
e;if(!d(b)){var g=this._getRenderingRuleId(b);if(g&&this._rasterFunctionTemplateInfos[g])return e.resolve(this._rasterFunctionTemplateInfos[g]),e}return v({url:this._url.path,content:p.mixin(p.mixin({f:"json",renderingRule:JSON.stringify(b.toJson())},this._url.query)),callbackParamName:"callback",load:p.hitch(this,function(c){var e={};l.forEach(this._rasterFunctionServiceInfoProps,function(b){e[b]=c[b]});d(b)||(this._rasterFunctionTemplateInfos[g]=e);return e}),error:c||this._errorHandler})},queryVisibleRasters:function(b,
c,d,e){var g=this._map,h=u._fixDfd(new f(u._dfdCanceller));this._visibleRasters=[];var k,m,q=!0,r=!0,t=null,v=this.infoTemplate?this.infoTemplate.info:null,x=v?p.clone(this.infoTemplate.info.fieldInfos):null;c=c||{};if(v&&this.infoTemplate.info.mediaInfos&&this.infoTemplate.info.mediaInfos.length){var y=[];l.forEach(this.infoTemplate.info.mediaInfos,function(b){y=y.concat(b&&b.value&&b.value.fields||[])});y.length&&l.forEach(x,function(b){b&&-1<y.indexOf(b.fieldName)&&(b.visible=!0)})}if(x&&0<x.length)for(q=
!1,k=0;k<x.length;k++)if((m=x[k])&&m.fieldName.toLowerCase()!==this._rasterFieldPrefix.toLowerCase()+"servicepixelvalue"&&(m.visible||v.title&&-1<v.title.toLowerCase().indexOf(m.fieldName.toLowerCase()))){q=!0;break}this.infoTemplate&&this.infoTemplate.info&&this.infoTemplate.info.layerOptions&&this.infoTemplate.info.layerOptions.hasOwnProperty("returnTopmostRaster")&&(t=this.infoTemplate.info.layerOptions.returnTopmostRaster?1:null);x&&0<x.length&&(r=!1,l.some(x,function(b){if(b&&b.fieldName.toLowerCase()===
this._rasterFieldPrefix.toLowerCase()+"itempixelvalue"&&b.visible)return r=!0},this));var N=(m=this._removeVisualizationStretchFunction(this.renderingRule))&&m.functionName,C=[];if(10.4<=this.version){var G=!1;if(this.rasterFunctionInfos&&x){var F=this._rasterFieldPrefix+this._renderingRuleFieldSubPrefix;l.forEach(this.rasterFunctionInfos,function(b){var c=F+b.name.replace(/ /gi,"_");l.some(x,function(b){return b.visible&&b.fieldName===c})&&(G=G||N&&N===b.name,C.push(new A({rasterFunction:b.name})))})}m&&
!G&&C.push(m)}k=new O;k.geometry=b.geometry;k.returnGeometry=this._map.spatialReference.equals(this.spatialReference);k.returnCatalogItems=q;k.timeExtent=this.timeInfo?b.timeExtent:null;k.returnPixelValues=r;k.maxItemCount=t||b.maxItemCount;this._params.time&&this.mosaicRule?(b=p.clone(this.mosaicRule),b=this._filterOutTimeDimension(b),k.mosaicRule=b):k.mosaicRule=this.mosaicRule||null;this._isMultidimensionalCRF()&&k.timeExtent&&(k.mosaicRule=this._applyTimeToMultidimensionalCRF(k.mosaicRule,k.timeExtent.toJson().join(",")),
this._isTimeSupportedOnCRF()||delete k.timeExtent);k.renderingRule=10.4>this.version&&m||null;k.renderingRules=C||null;10.8>this.version&&(k.returnPixelValues=void 0,k.maxItemCount=void 0);g&&(g=new w((g.extent.xmax-g.extent.xmin)/g.width,(g.extent.ymax-g.extent.ymin)/g.height,g.extent.spatialReference),k.pixelSize=g);c.requestParams=k;var z=this,g=new Q(this.url);(h._pendingDfd=g.execute(k)).addCallbacks(function(b){z._queryVisibleRastersHandler(b,c,d,e,h)},function(b){z._resolve([b],null,e,h,!0)});
return h},_queryVisibleRastersHandler:function(b,c,d,e,g){function f(){var b=this.getCustomRasterFields(c),e=this._getDomainFields(b),f=c?c.returnDomainValues:!1,k=c&&c.rasterAttributeTableFieldPrefix,t,v,w,y,N,A,C,G,z,H,b=(b=this._getRenderingRuleId(this.renderingRule))&&this._rasterFunctionTemplateInfos[b];this.renderingRule&&(this._useRenderingRuleAttributeTable||b)?(b=this._getRenderingRuleAttributeTableFeatures({renderingRule:this.renderingRule}),this.hasRasterAttributeTable||(H=h)):b=this._getRasterAttributeTableFeatures();
b.then(p.hitch(this,function(b){for(t=0;t<u.length;t++){K=u[t];K.setInfoTemplate(this.infoTemplate);K._layer=this;if(h){z=h.replace(/ /gi,"").split(",");v=h;w=z;q&&q.length>=t&&(v=q[t].replace(/ /gi,", "),w=q[t].split(" "));K.attributes[this._rasterFieldPrefix+"ItemPixelValue"]=w;K.attributes[this._rasterFieldPrefix+"ServicePixelValue"]=z;m&&(K.attributes[this._rasterFieldPrefix+"ServicePixelValue.Raw"]=m.replace(/ /gi,"").split(","));if(this.pixelFilter){var c=new E({height:1,width:1,pixelType:"F32",
pixels:[],statistics:[]});l.forEach(w,function(b){c.addData({pixels:[b],statistics:{minValue:b,maxValue:b,noDataValue:null}})});this.pixelFilter({pixelBlock:c,extent:new x(0,0,0,0,this._map.spatialReference)});if("esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType)K.attributes[this._rasterFieldPrefix+"Magnitude"]=c.pixels[0][0],K.attributes[this._rasterFieldPrefix+"Direction"]=c.pixels[1][0]}l.forEach(F,function(b){K.attributes[b.name]=
b.value});var D;D=0<this.fields.length?H||v:H||m;if(b&&0<b.length&&(y=l.filter(b,function(b){if(b&&b.attributes)return b.attributes.hasOwnProperty("Value")?b.attributes.Value==D:b.attributes.VALUE==D}),0<y.length&&(N=p.clone(y[0]),k&&N))){G={};for(A in N.attributes)N.attributes.hasOwnProperty(A)&&(C=k+A,G[C]=N.attributes[A]);N.attributes=G;K.attributes=p.mixin(K.attributes,N.attributes)}}f&&e&&0<e.length&&l.forEach(e,function(b){if(b){var c=K.attributes[b.name];r.isDefined(c)&&(c=this._getDomainValue(b.domain,
c),r.isDefined(c)&&(K.attributes[b.name]=c))}},this);Q.push(K);this._visibleRasters.push(K)}this._resolve([Q,null,!0],null,d,g)}))}var h=b.value,m=b.value,q,u,t=0,w=0,N=this,C=this.objectIdField,A,G,F=[];e=c.requestParams.renderingRules;var z=b.processedValues,H=this.renderingRule&&k.toJson(this._removeVisualizationStretchFunction(this.renderingRule).toJson());if(e&&z&&e.length===z.length){var D=this._rasterFieldPrefix+this._renderingRuleFieldSubPrefix;l.forEach(e,function(b,c){if(b.functionName){var d=
{name:D+b.functionName.replace(/ /gi,"_"),value:z[c].replace(/ /gi,"").split(",")};F.push(d);H&&H===k.toJson(b.toJson())&&(h=z[c])}})}e=this.infoTemplate&&this.infoTemplate.info&&this.infoTemplate.info.layerOptions&&this.infoTemplate.info.layerOptions.hasOwnProperty("showNoDataRecords")?this.infoTemplate.info.layerOptions.showNoDataRecords:!0;if(b.catalogItems){var M=0,B,I,J=b.catalogItems.features.length;G=0;u=Array(J);q=Array(J);A=Array(J);if(b.properties&&b.properties.Values){J=b.properties.Values.length;
for(t=0;t<J;t++)-1<b.properties.Values[t].toLowerCase().indexOf("nodata")&&G++;B=J-G;for(t=0;t<J;t++)G=!0,-1<b.properties.Values[t].toLowerCase().indexOf("nodata")?(I=B++,e||(G=!1,u.length--,q.length--,A.length--)):I=M++,G&&(u[I]=b.catalogItems.features[t],q[I]=b.properties.Values[t],A[I]=u[I].attributes[C])}else{for(t=0;t<J;t++)u[t]=b.catalogItems.features[t],A[t]=u[t].attributes[C];q=null}}this._visibleRasters=[];var K;(b=-1<h.toLowerCase().indexOf("nodata"))&&!e&&(u=[],q=[],A=[]);!h||u||b||(C=
"ObjectId",u=[],K=new P(new x(this.fullExtent),null,{ObjectId:0}),u.push(K));var Q=[];u?!this._map.spatialReference.equals(this.spatialReference)&&A&&0<A.length?v({url:this._url.path+"/query",content:{f:"json",objectIds:A.join(","),returnGeometry:!0,outSR:k.toJson(N._map.spatialReference.toJson()),outFields:C},handleAs:"json",callbackParamName:"callback",load:function(b){if(0===b.features.length)N._resolve([Q,null,null],null,d,g);else{for(t=0;t<b.features.length;t++)for(w=0;w<u.length;w++)u[w].attributes[C]==
b.features[t].attributes[C]&&(u[w].geometry=new y(b.features[t].geometry),u[w].geometry.setSpatialReference(N._map.spatialReference));f.call(N)}},error:function(b){N._resolve([Q,null,null],null,d,g)}}):f.call(this):this._resolve([Q,null,null],null,d,g)},getVisibleRasters:function(){var b=this._visibleRasters,c=[],d;for(d in b)b.hasOwnProperty(d)&&c.push(b[d]);return c},_getDomainFields:function(b){if(b){var c=[];l.forEach(b,function(b){if(b.domain){var d={};d.name=b.name;d.domain=b.domain;c.push(d)}});
return c}},_getDomainValue:function(b,c){if(b&&b.codedValues){var d;l.some(b.codedValues,function(b){return b.code===c?(d=b.name,!0):!1});return d}},_requestData:function(b,c,d){this._rasterReadPromise&&this._rasterReadPromise.cancel();b=p.clone(b);var e=b._normalize(!0);this._prepareGetImageParameters(e,c,d);c=p.clone(this._params);this._cleanupRequestParams(c);c.extent=b;c.format=c.format||(10.3<=this.version?"lerc":"jpgpng");"lerc"===c.format.toLowerCase()&&!c.lercVersion&&10.5<=this.version&&
(c.lercVersion=2);this._params.time&&this._isMultidimensionalCRF()&&!this._isTimeSupportedOnCRF()&&delete c.time;d=null;this._useBrowserDecoding()&&(d=new D({ctx:this._context}));c={imageServiceParameters:c,nBands:Math.min(this.bandCount,3),pixelType:this.pixelType,decodeFunc:d?p.hitch(d,"decode"):null};this._rasterReadPromise=this.raster.read(c,this._requestDataHandler,this._requestDataErrorHandler)},_requestDataHandler:function(b){this._rasterReadPromise&&this._rasterReadPromise.isCanceled()||(this.originalPixelData=
b,this.hasDataChanged=!0,this._setPixelData(b))},_setPixelData:function(b){b=this._clonePixelData(b);this.pixelFilter&&this.pixelFilter(b);this.pixelData=b;this._rasterReadPromise&&this._rasterReadPromise.isCanceled()||(this._drawPixelData(),this._rasterReadPromise=null)},_clonePixelData:function(b){if(null===b||void 0===b)return b;var c={};b.extent&&(c.extent=p.clone(b.extent));b=b.pixelBlock;if(null===b||void 0===b)return c;c.pixelBlock=b.clone();return c},_setDefaultFilter:function(){},_getPixelBlockFromCanvas:function(b,
c,d){b=b.getImageData(0,0,c,d).data;for(var e=c*d,g=0,f=0,h=new Uint8Array(e),k=new Uint8Array(e),l=new Uint8Array(e),m=new Uint8Array(e),q=Infinity,r=Infinity,p=Infinity,u=-Infinity,t=-Infinity,v=-Infinity,w,x,y,g=0;g<e;g++)w=b[f++],x=b[f++],y=b[f++],q=q<w?q:w,u=u>w?u:w,r=r<x?r:x,t=t>x?t:x,p=p<y?p:y,v=v>y?v:y,h[g]=w,k[g]=x,l[g]=y,m[g]=b[f++]&1;return new E({width:c,height:d,pixels:[h,k,l],pixelType:"U8",mask:m,statistics:[{minValue:q,maxValue:u},{minValue:r,maxValue:t},{minValue:p,maxValue:v}]})},
_useBrowserDecoding:function(){return(void 0===this.pixelFilter||null===this.pixelFilter)&&("jpeg"===this.format.toLowerCase()||"jpg"===this.format.toLowerCase()||-1<this.format.toLowerCase().indexOf("png"))},getMultidimensionalInfo:function(){var b=this._url.path+"/multiDimensionalInfo",c=new f(u._dfdCanceller);if(this._multidimensionalInfo)return c.resolve(this._multidimensionalInfo),c;!this.loaded||10.3<=this.version&&this.hasMultidimensions?(c._pendingDfd=v({url:b,content:{f:"json"},handleAs:"json",
callbackParamName:"callback"}),c._pendingDfd.then(p.hitch(this,function(b){this._multidimensionalInfo=b.multidimensionalInfo;c.callback(b.multidimensionalInfo)}),function(b){c.errback(b)})):(b=Error("Layer does not support multidimensional info"),b.log=!!h.isDebug,c.errback(b));return c},getVariableStats:function(b){var c=new f,d=p.clone(this.url);if(this._cachedVariableStats[b])c.resolve(this._cachedVariableStats[b]);else{var e=this.url.indexOf("?token");-1<e&&(d=d.substring(0,e));v({url:d+"/statistics",
content:{f:"json",variable:b},handleAs:"json",callbackParamName:"callback",load:p.hitch(this,function(d){this._cachedVariableStats[b]=d.statistics;c.resolve(d.statistics)}),error:function(b){c.reject(b)}})}return c},getDefaultMultidimensionalDefinition:function(){var b=new f(u._dfdCanceller);if(this._defaultMultidimensionalDefinition)return b.resolve(p.clone(this._defaultMultidimensionalDefinition)),b;b._pendingDfd=this.getMultidimensionalInfo();b._pendingDfd.then(p.hitch(this,function(c){c=this._getDefaultMultidimensionalDefinition(c);
b.callback(c)}),function(c){b.errback(c)});return b},_getDefaultMultidimensionalDefinition:function(b,c,d){var e,g=[],f="",h=b.variables[0].dimensions;d&&(f=b.variables[0].name);for(e in h)h.hasOwnProperty(e)&&(c||"StdTime"!==h[e].name)&&(b=h[e],g.push(new C({variableName:f,dimensionName:b.name,isSlice:!b.hasRanges,values:[this._getDefaultDimensionValue(b)]})));this._defaultMultidimensionalDefinition=g;return p.clone(g)},_getDefaultDimensionValue:function(b){if(b&&b.values&&b.values.length){var c,
d,e=Infinity,g,f;if(b.hasRanges)return b.values[0];if(b.name&&"stdz"===b.name.toLowerCase()){for(f=0;f<b.values.length&&(g=b.values[f],d=Math.abs(g-0),d<e&&(e=d,c=g),0!==d);f++);return c}return b.extent[0]}},_setDefaultMultidimensionalDefinition:function(b){var c,d={};this.getDefaultMultidimensionalDefinition().then(p.hitch(this,function(e){c=e;0<c.length&&(this.mosaicRule?(d=p.clone(this.mosaicRule),d.multidimensionalDefinition=c):this.defaultMosaicRule?(d=p.clone(this.defaultMosaicRule),d.multidimensionalDefinition=
c):d=new B({multidimensionalDefinition:c}),this.setMosaicRule(d,b))}))},_setDefaultRenderingRule:function(b){var c={},d=this.renderingRule;if(!d&&"esri.layers.ArcGISImageServiceVectorLayer"!==this.declaredClass&&!this.bandIds&&this.rasterFunctionInfos&&this.rasterFunctionInfos.length&&"none"!==this.rasterFunctionInfos[0].name.toLowerCase())c.rasterFunction=this.rasterFunctionInfos[0].name;else if("esri.layers.ArcGISImageServiceVectorLayer"===this.declaredClass&&10.3<this.version&&(!d||"Resample"!==
d.functionName)){var e="esriImageServiceDataTypeVector-UV"===this.serviceDataType?7:10;c.rasterFunction="Resample";c.rasterFunctionArguments={ResamplingType:e,InputCellSize:{x:this.pixelSizeX,y:this.pixelSizeY}};d&&(c.rasterFunctionArguments.Raster=d.toJson())}c.hasOwnProperty("rasterFunction")&&(this.defaultRenderingRule=new A(c),this.setRenderingRule(this.defaultRenderingRule,b))},_cleanupRequestParams:function(b){if(!b)return b;if(b.time&&b.mosaicRule){var c=new B(k.fromJson(b.mosaicRule)),c=this._filterOutTimeDimension(c);
b.mosaicRule=k.toJson(c.toJson())}var c="displayOnPan drawMode styling id opacity visible resourceInfo useMapDimensionValue extent renderer".split(" "),d;for(d in c)b.hasOwnProperty(c[d])&&delete b[c[d]];return b},_filterOutTimeDimension:function(b){if(this._isMultidimensionalCRF())return b;if(b&&b.multidimensionalDefinition&&0<b.multidimensionalDefinition.length){var c=l.filter(b.multidimensionalDefinition,function(b){return"StdTime"!==b.dimensionName});b.multidimensionalDefinition=c}return b},_removeVisualizationStretchFunction:function(b){var c=
b&&b.functionName;if(!c||"stretch"!==c.toLowerCase())return b;var d=b.functionArguments.Raster;return d&&d.functionName&&l.some(this.rasterFunctionInfos,function(b){return d.functionName===b.name})?d:b},_isMultidimensionalCRF:function(){return 10.71<=this.version&&this.hasMultidimensions&&this.timeInfo&&!(this.objectIdField&&this.fields&&1<this.fields.length)},_isTimeSupportedOnCRF:function(){return 10.8<=this.version},_cleanupMultidimensionalDefinition:function(b){b&&b.multidimensionalDefinition&&
(b.multidimensionalDefinition=b.multidimensionalDefinition.filter(function(b){return!(!b.variableName&&!b.dimensionName)}),0===b.multidimensionalDefinition.length&&(b.multidimensionalDefinition=null))},_isScientificData:function(){return"esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType||"esriImageServiceDataTypeScientific"===this.serviceDataType},_isVectorData:function(b){b=(b=b||this)&&b.serviceDataType;return"esriImageServiceDataTypeVector-UV"===
b||"esriImageServiceDataTypeVector-MagDir"===b},_isRenderingRuleAProcessingTemplate:function(b){var c=b&&b.functionName;return!c||b.functionArguments?!1:l.some(c&&(this.rasterFunctionInfos||[]),function(b){return b&&b.name&&b.name.toLowerCase()===c.toLowerCase()})},_getRenderingRuleId:function(b){var c=b&&b.functionName;if(c){if(this._isRenderingRuleAProcessingTemplate(b))return c;var d=this._customRenderingRuleId[c];if(d){if(d!==b){for(var e in this._customRenderingRuleId)if(this._customRenderingRuleId[e]===
b)return e;for(d=0;this._customRenderingRuleId[g];)d+=1;var g;this._customRenderingRuleId[c+d]=b}}else this._customRenderingRuleId[c]=b;return c}},_createPixelData:function(b){b=new E({width:2,height:2,pixels:b,pixelType:this.pixelType,statistics:b});var c=this.fullExtent.getCenter(),c=new x(c.x,c.y,c.x+this.pixelSizeX,c.y+this.pixelSizeY,this.spatialReference);return{pixelBlock:b,extent:c}},_convertRendererToRenderingRule:function(b){var c=b&&b.declaredClass;if(!c||"esri.renderer.UniqueValueRenderer"!==
c&&"esri.renderer.ClassBreaksRenderer"!==c&&"esri.renderer.StretchRenderer"!==c&&"esri.renderer.ShadedReliefRenderer"!==c&&"esri.renderer.ColormapRenderer"!==c)return null;var d=null;"esri.renderer.StretchRenderer"===c?d=b.toRenderingRule({convertToColormap:10.6>this.version}):"esri.renderer.ClassBreaksRenderer"===c?d=this._convertClassifyRenderer(b):"esri.renderer.UniqueValueRenderer"===c?d=this._convertUniqueValueRenderer(b):"esri.renderer.ShadedReliefRenderer"===c?d=this._convertShadedReliefRenderer(b):
"esri.renderer.ColormapRenderer"===c&&(d=this._convertColormapRenderer(b));return d},_getValueField:function(b){if(b&&b.length){var c,d;l.some(b,function(b){if((d=b.name)&&"value"===d.toLowerCase())return c=d,!0});return c}},_convertColormapRenderer:function(b){var c=new A;c.functionName="Colormap";c.functionArguments={};b=b.colormapInfos.map(function(b){return[b.value].concat(b.color)});c.functionArguments.Colormap=b;return c},_convertShadedReliefRenderer:function(b){var c=new A;c.functionName="Hillshade";
var d="traditional"===b.hillshadeType?0:1,e="none"===b.scalingType?1:3,g={HillshadeType:d,SlopeType:e,ZFactor:b.zFactor};0===d&&(g.Azimuth=b.azimuth,g.Altitude=b.altitude);3===e&&(g.PSPower=b.pixelSizePower,g.PSZFactor=b.pixelSizeFactor);c.functionArguments=g;c.variableName="Raster";b.colorRamp&&(c.functionName="ShadedRelief",g.Colormap=z.convertColorRampToColormap(b.colorRamp,256));return c},_convertClassifyRenderer:function(b){var c,d=[],e=[],g=[],f=[],h;c=this.renderingRule&&this._getRenderingRuleId(this.renderingRule);
var k,m,q=this.hasRasterAttributeTable,r,p;c&&(q=this._rasterFunctionTemplateInfos[c]?this._rasterFunctionTemplateInfos[c].hasRasterAttributeTable:this.hasRasterAttributeTable,m=this._renderingRuleAttributeTable[c],p=this._rasterFunctionTemplateInfos[c]);k=m&&m.features?m.features:this._rasterAttributeTableFeatures;r=this._getValueField(m&&m.fields?m.fields:this._rasterAttributeTableFields);q&&k?(l.forEach(b.infos,function(c,d){var e,g=c.symbol.color;g.a&&l.forEach(k,function(h){e=h.attributes[b.attributeField];
(e>=c.minValue&&e<c.maxValue||d===b.infos.length-1&&e>=c.minValue)&&f.push([h.attributes[r],g.r,g.g,g.b])},this)},this),c=p&&p.pixelType||this.pixelType,this._adjustColormapToPixelTypeRange(f,c),c=new A,c.functionName="Colormap",c.functionArguments={},c.functionArguments.Colormap=f,c.variableName="Raster"):(l.forEach(b.infos,function(b,c){h=b.symbol&&b.symbol.color;h.a?(0===c?d.push.call(d,b.minValue,b.maxValue+1E-4):d.push.call(d,b.minValue+1E-4,b.maxValue+1E-4),e.push(c),f.push([c,h.r,h.g,h.b])):
g.push(b.minValue,b.maxValue)}),c=p&&p.pixelType||this.pixelType,this._adjustColormapToPixelTypeRange(f,c),c=new A,c.functionName="Remap",c.functionArguments={InputRanges:d,OutputValues:e,NoDataRanges:g},c.variableName="Raster",m=new A,m.functionName="Colormap",m.functionArguments={Colormap:f,Raster:c},c=m);return c},_convertUniqueValueRenderer:function(b){var c=[],d=this.renderingRule&&this._getRenderingRuleId(this.renderingRule),e,g,f,h;d&&(g=this._renderingRuleAttributeTable[d],h=this._rasterFunctionTemplateInfos[d]);
e=g&&g.features?g.features:this._rasterAttributeTableFeatures;f=(d=g&&g.fields?g.fields:this._rasterAttributeTableFields)&&d.length?this._getValueField(d):"Value";l.forEach(b.infos,function(d){var g=d.symbol.color;g.a&&(b.attributeField!==f&&e?l.forEach(e,function(e){e.attributes[b.attributeField]==d.value&&c.push([e.attributes[f],g.r,g.g,g.b])},this):c.push([d.value,g.r,g.g,g.b]))},this);this._adjustColormapToPixelTypeRange(c,h&&h.pixelType||this.pixelType);h=new A;h.functionName="Colormap";h.functionArguments=
{};h.functionArguments.Colormap=c;h.variableName="Raster";return h},_adjustColormapToPixelTypeRange:function(b,c){(c=this._pixelTypeRanges[c])&&b.push([Math.floor(c[0]-1),0,0,0],[Math.ceil(c[1]+1),0,0,0]);return b},_combineRenderingRule:function(b,c){if(!b||!c)return b||c;var d=function(b){var c=b.Raster;return c=c&&"esri.layers.RasterFunction"===c.declaredClass?d(c.functionArguments):b};b=p.clone(b);"none"!==c.functionName.toLocaleLowerCase()&&(d(b.functionArguments).Raster=c);return b},_isItemLevelRasterFunction:function(b){var c=
b&&b.functionName;if(!c||!this._hasItemLevelRFT)return!1;var d=!1;l.some(this.rasterFunctionInfos,function(b){if(b&&b.name===c){if(1===b.functionType||2===b.functionType)d=!0;return!0}});return d},_getServiceLevelRenderingRule:function(b){if(!this._hasItemLevelRFT||!b)return b;b=new A(b.toJson());var c;c=b.functionArguments;for(var d;;)if((d=c&&c.Raster)&&d.functionArguments&&d.functionArguments.Raster)c=d,c=c.functionArguments;else{this._isItemLevelRasterFunction(d)&&delete c.Raster;break}return b},
_getItemLevelRenderingRule:function(b){if(!this._hasItemLevelRFT||!b)return null;if(this._isItemLevelRasterFunction(b))return b;b=new A(b.toJson());for(b=b.functionArguments;;)if((b=b&&b.Raster)&&b.functionArguments&&b.functionArguments.Raster)b=b.functionArguments;else{if(this._isItemLevelRasterFunction(b))return b;break}},_resolve:function(b,c,d,e,g){c&&this[c].apply(this,b);d&&d.apply(null,b);e&&u._resDfd(e,b,g)},_toggleTime:function(){var b=this._map;this.timeInfo&&this.useMapTime&&b&&!this.suspended?
(this._timeConnect||(this._timeConnect=q.connect(b,"onTimeExtentChange",this,this._onTimeExtentChangeHandler)),this._setTime(b.timeExtent)):(q.disconnect(this._timeConnect),this._timeConnect=null,this._setTime(null))},setUseMapTime:function(b,c){this.useMapTime=b;this._toggleTime();!c&&this._map&&this.refresh(!0)},_setTime:function(b){this._params&&(this._params.time=b?b.toJson().join(","):null)},_onTimeExtentChangeHandler:function(b){this.suspended||(this._setTime(b),this.refresh(!0))},handleSpatialReferenceChange:function(){this.onSpatialReferenceChange()},
getColormap:function(b){var c=this._url.path+"/colormap",d=new f(u._dfdCanceller),e={f:"json"};b&&b.renderingRule&&(e.renderingRule=k.toJson(b.renderingRule.toJson()));this.hasColormap?(d._pendingDfd=v({url:c,content:e,handleAs:"json",callbackParamName:"callback"}),d._pendingDfd.then(function(b){d.callback(b)},function(b){d.errback(b)})):(b=Error("Layer does not support colormap"),b.log=!!h.isDebug,d.errback(b));return d},getRenderingRuleColormap:function(b){var c=new f(u._dfdCanceller);if(!b||!b.renderingRule)return c.errback(Error("Rendering rule is not specified")),
c;b=b.renderingRule;var d=this._getRenderingRuleId(b);this._renderingRuleColormap&&d&&this._renderingRuleColormap.hasOwnProperty(d)?c.resolve(this._renderingRuleColormap[d]):c=this.getColormap({renderingRule:b}).then(p.hitch(this,function(b){b=b&&b.colormap;d&&(this._renderingRuleColormap[d]=b);return b}));return c}});g("extend-esri")&&p.setObject("layers.ImageServiceLayerMixin",m,b);return m})},"esri/layers/MosaicRule":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../geometry/Point ./RasterFunction".split(" "),
function(m,p,f,l,k,h,q){var g=m(null,{declaredClass:"esri.layers.MosaicRule",method:null,where:null,sortField:null,sortValue:null,ascending:!1,lockRasterIds:null,viewpoint:null,objectIds:null,operation:null,multidimensionalDefinition:[],itemRenderingRule:null,constructor:function(e){p.isObject(e)&&(p.mixin(this,e),e.mosaicMethod&&(this.method=e.mosaicMethod),this.method&&"esri"!==this.method.toLowerCase().substring(0,4)&&(this.method=this._getMethodEnum(this.method)),e.mosaicOperation&&(this.operation=
e.mosaicOperation),this.operation&&"MT_"!==this.operation.toUpperCase().substring(0,3)&&(this.operation=this._getOperatorEnum(this.operation)),e.fids&&(this.objectIds=e.fids),e.viewpoint&&(this.viewpoint=new h(e.viewpoint)),e.itemRenderingRule&&(this.itemRenderingRule=new q(e.itemRenderingRule)),this.multidimensionalDefinition=e.multidimensionalDefinition||[])},toJson:function(){var e=null,c=this.multidimensionalDefinition?this.multidimensionalDefinition.length:0;if(c)for(var e=[],b=0;b<c;b++)e.push("esri.layers.DimensionalDefinition"===
this.multidimensionalDefinition[b].declaredClass?this.multidimensionalDefinition[b].toJson():this.multidimensionalDefinition[b]);e={mosaicMethod:this.method,where:this.where,sortField:this.sortField,sortValue:this.sortValue,ascending:this.ascending,lockRasterIds:p.clone(this.lockRasterIds),viewpoint:this.viewpoint?this.viewpoint.toJson():null,fids:p.clone(this.objectIds),mosaicOperation:this.operation,multidimensionalDefinition:e,itemRenderingRule:this.itemRenderingRule?this.itemRenderingRule.toJson():
null};return k.filter(e,function(b){if(null!==b)return!0})},_getMethodEnum:function(e){if(e){var c=g.METHOD_NONE;switch(e.toLowerCase()){case "byattribute":c=g.METHOD_ATTRIBUTE;break;case "center":c=g.METHOD_CENTER;break;case "lockraster":c=g.METHOD_LOCKRASTER;break;case "nadir":c=g.METHOD_NADIR;break;case "northwest":c=g.METHOD_NORTHWEST;break;case "seamline":c=g.METHOD_SEAMLINE;break;case "viewpoint":c=g.METHOD_VIEWPOINT}return c}},_getOperatorEnum:function(e){if(e)switch(e.toLowerCase()){case "first":return g.OPERATION_FIRST;
case "last":return g.OPERATION_LAST;case "max":return g.OPERATION_MAX;case "min":return g.OPERATION_MIN;case "blend":return g.OPERATION_BLEND;case "mean":return g.OPERATION_MEAN;case "sum":return g.OPERATION_SUM}}});p.mixin(g,{METHOD_NONE:"esriMosaicNone",METHOD_CENTER:"esriMosaicCenter",METHOD_NADIR:"esriMosaicNadir",METHOD_VIEWPOINT:"esriMosaicViewpoint",METHOD_ATTRIBUTE:"esriMosaicAttribute",METHOD_LOCKRASTER:"esriMosaicLockRaster",METHOD_NORTHWEST:"esriMosaicNorthwest",METHOD_SEAMLINE:"esriMosaicSeamline",
OPERATION_FIRST:"MT_FIRST",OPERATION_LAST:"MT_LAST",OPERATION_MIN:"MT_MIN",OPERATION_MAX:"MT_MAX",OPERATION_MEAN:"MT_MEAN",OPERATION_BLEND:"MT_BLEND",OPERATION_SUM:"MT_SUM"});f("extend-esri")&&p.setObject("layers.MosaicRule",g,l);return g})},"esri/layers/DimensionalDefinition":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(m,p,f,l,k){m=m(null,{declaredClass:"esri.layers.DimensionalDefinition",variableName:null,dimensionName:null,values:[],isSlice:!1,
constructor:function(f){p.isObject(f)&&p.mixin(this,f)},toJson:function(){var f={variableName:this.variableName,dimensionName:this.dimensionName,values:p.clone(this.values),isSlice:this.isSlice};return k.filter(f,function(f){return null!==f})}});f("extend-esri")&&p.setObject("layers.DimensionalDefinition",m,l);return m})},"esri/layers/Raster":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/_base/array dojo/_base/config dojo/json dojo/sniff ../kernel ../Evented ../request ../geometry/Extent ../SpatialReference ../deferredUtils ./PixelBlock ./rasterFormats/LercCodec ./rasterFormats/Lerc2Codec".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x){var w,y,z,B,A,C;p=p(c,{declaredClass:"esri.layers.Raster",imageServiceUrl:null,validPixelTypes:"U1 U2 U4 U8 U16 U32 S8 S16 S32 F32".split(" "),validFormats:"lerc jpeg jpg jpgpng png png8 png24 png32 bip bsq tiff".split(" "),_eventMap:{"raster-read-complete":["pixelData","params"]},constructor:function(b){this.imageServiceUrl=b;this.registerConnectEvents();this._loadRasterFormatModules()},read:function(c,d,e){var h=this,m=new l(v._dfdCanceller);if(10>g("ie"))throw"This browser is not supported.";
if(!c.imageServiceParameters)throw"Insufficient parameters to read data";var q=f.clone(c.imageServiceParameters),r=c.pixelType;k.some(this.validPixelTypes,function(b){return b===r})||(q.pixelType="F32");k.some(this.validFormats,function(b){return b.toLowerCase()===q.format.toLowerCase()})||(q.format="lerc");var p=c.decodeFunc,u;this._prepareGetImageParameters(q);var t=q.width,w=q.height,x=q.extent;delete q.width;delete q.height;delete q.extent;m._pendingDfd=b({url:this.imageServiceUrl+"/exportImage",
handleAs:"arraybuffer",content:f.mixin(q,{f:"image"}),load:function(b){h.decode(b,{width:t,height:w,planes:null,pixelType:r,noDataValue:q.noData,format:q.format,decodeFunc:p}).then(function(b){u={pixelBlock:b,extent:x};h._resolve([u,q],"onRasterReadComplete",d,m)},function(b){h._resolve([b],null,e,m,!0)})},error:function(b){h._resolve([b],null,e,m,!0)}});return m.promise},decode:function(b,c){if(void 0===c||null===c)throw"missing decode options";var d,e;c.format&&(d=c.format.toUpperCase());"BSQ"!==
d&&"BIP"!==d&&(d=this._getFormat(b));e=c.decodeFunc;if(void 0===e||null===e)e=this._getFormatDecoderDfd(d);return e(b,c)},onRasterReadComplete:function(){},_prepareGetImageParameters:function(b){if(b.size&&b.bbox){var c=b.size.split(",");b.width=parseFloat(c[0]);b.height=parseFloat(c[1]);b.extent||(c=b.bbox.split(","),b.extent=new d(parseFloat(c[0]),parseFloat(c[1]),parseFloat(c[2]),parseFloat(c[3]),new r(b.bboxSR)))}else{if(!b.width||Math.floor(b.width)!==b.width||!b.height||Math.floor(b.height)!==
b.height)throw"Incorrect Image Dimensions";if(!b.extent||"esri.geometry.Extent"!==b.extent.declaredClass)throw"Incorrect extent";var c=b.extent,e=c.spatialReference.wkid||q.toJson(c.spatialReference.toJson());delete b._ts;f.mixin(b,{bbox:c.xmin+","+c.ymin+","+c.xmax+","+c.ymax,imageSR:e,bboxSR:e,size:b.width+","+b.height},b.disableClientCaching?{_ts:(new Date).getTime()}:{})}},_adjustExtent:function(b,c,d){var e=b.ymax-b.ymin,g=b.xmax-b.xmin;d>=c?b.ymax=b.ymin+g*c/d:b.xmax=b.xmin+e*d/c;return b},
_resolve:function(b,c,d,e,g){c&&this[c].apply(this,b);d&&d.apply(null,b);e&&v._resDfd(e,b,g)},_getFormatDecoderDfd:function(b){var c=null;switch(b){case "LERC":c=this._decodeLerc;break;case "LERC2":c=this._decodeLerc2;break;case "JPEG":c=this._decodeJpeg;break;case "PNG":c=this._decodePng;break;case "BSQ":c=this._decodeBsq;break;case "BIP":c=this._decodeBip;break;case "TIFF":c=this._decodeTiff;break;default:c=function(b,c){throw"The raster format is not supported";}}c=f.hitch(this,c);return function(d,
e){var g=new l;try{var f;"LERC"===b||!0===A?(f=c(d,e),g.resolve(f)):C.then(function(){f=c(d,e);g.resolve(f)})}catch(M){g.reject(M)}return g}},_getFormat:function(b){b=new Uint8Array(b,0,10);var c="";if(255===b[0]&&216===b[1])c="JPEG";else if(137===b[0]&&80===b[1]&&78===b[2]&&71===b[3])c="PNG";else if(67===b[0]&&110===b[1]&&116===b[2]&&90===b[3]&&73===b[4]&&109===b[5]&&97===b[6]&&103===b[7]&&101===b[8]&&32===b[9])c="LERC";else if(76===b[0]&&101===b[1]&&114===b[2]&&99===b[3]&&50===b[4]&&32===b[5])c=
"LERC2";else if(-1<String.fromCharCode.apply(null,b).toLowerCase().indexOf("error"))c="ERROR";else if(73===b[0]&&73===b[1]&&42===b[2]&&0===b[3]||77===b[0]&&77===b[1]&&0===b[2]&&42===b[3])c="TIFF";return c},_validateDecodeParams:function(b){if(!b.height||Math.floor(b.height)!==b.height)throw"Height not provided.";if(!b.width||Math.floor(b.width)!==b.width)throw"Width not provided.";},_decodeJpeg:function(b,c){if(!w)throw"The jpeg decoder module is not loaded.";this._validateDecodeParams(c);b=(new w).decode(b);
if(!D(b,c))throw"The decoded image dimensions are incorrect.";c=[];var d,e;for(d=0;d<b.pixels.length;d++)e=b.pixels[d],c.push(this._calculateBandStatistics(e));return new u({width:b.width,height:b.height,pixels:b.pixels,pixelType:"U8",mask:b.mask,statistics:c})},_decodePng:function(b,c){if(!y)throw"The png decoder module is not loaded.";this._validateDecodeParams(c);b=new Uint8Array(b);var d=new y(b);b=new Uint8Array(c.width*c.height*4);d.copyToImageData(b,d.decodePixels());for(var e=d=0,g,e=new Uint8Array(c.width*
c.height),d=0;d<c.width*c.height;d++)e[d]=b[4*d+3];for(var f=new u({width:c.width,height:c.height,pixels:[],pixelType:"U8",mask:e,statistics:[]}),d=0;3>d;d++){g=new Uint8Array(c.width*c.height);for(e=0;e<c.width*c.height;e++)g[e]=b[4*e+d];f.addData({pixels:g,statistics:this._calculateBandStatistics(g)})}return f},_decodeBsq:function(b,c){if(!z)throw"The bsq decoder module is not loaded.";this._validateDecodeParams(c);E=c.noDataValue;c.pixelType=H(c.pixelType);b=z.decodeBSQ(b,{bandCount:c.planes,width:c.width,
height:c.height,pixelType:F,noDataValue:E});var d=[],e,g=null;for(e=0;e<b.pixels.length;e++)g=b.pixels[e],d.push(this._calculateBandStatistics(g));return new u({width:c.width,height:c.height,pixels:b.pixels,pixelType:c.pixelType,mask:b.maskData,statistics:d})},_decodeBip:function(b,c){this._validateDecodeParams(c);E=c.noDataValue;c.pixelType=H(c.pixelType);b=z.decodeBIP(b,{bandCount:c.planes,width:c.width,height:c.height,pixelType:F,noDataValue:E});var d=[],e,g=null;for(e=0;e<b.pixels.length;e++)g=
b.pixels[e],d.push(this._calculateBandStatistics(g));return new u({width:c.width,height:c.height,pixels:b.pixels,pixelType:c.pixelType,mask:b.maskData,statistics:d})},_decodeTiff:function(b,c){this._validateDecodeParams(c);E=c.noDataValue;c.pixelType=H(c.pixelType);b=B.decode(b);c=[];var d,e=null;for(d=0;d<b.pixels.length;d++)e=b.pixels[d],c.push(this._calculateBandStatistics(e,b.maskData));return new u({width:b.width,height:b.height,pixels:b.pixels,pixelType:b.pixelType,mask:b.maskData,statistics:c})},
_decodeLerc:function(b,c){this._validateDecodeParams(c);E=c.noDataValue;c.pixelType=H(c.pixelType);for(var d=0,e,g=0,f,h=b.byteLength-10;g<h;){var k=t.decode(b,{inputOffset:g,encodedMaskData:e,returnMask:0===d?!0:!1,returnEncodedMask:0===d?!0:!1,returnFileInfo:!0,pixelType:F,noDataValue:E}),g=k.fileInfo.eofOffset;0===d&&(e=k.encodedMaskData,f=new u({width:c.width,height:c.height,pixels:[],pixelType:c.pixelType,mask:k.maskData,statistics:[]}));d++;if(!D(k,c))throw"The decoded image dimensions are incorrect";
f.addData({pixels:k.pixelData,statistics:{minValue:k.minValue,maxValue:k.maxValue,noDataValue:k.noDataValue}})}return f},_decodeLerc2:function(b,c){this._validateDecodeParams(c);E=c.noDataValue;c.pixelType=H(c.pixelType);for(var d=0,e,g,f=0,h,k=b.byteLength-10,l=[];f<k;){g=x.decode(b,{inputOffset:f,maskData:e,returnFileInfo:!0});f=g.fileInfo.eofOffset;0===d&&(e=g.maskData,h=new u({width:c.width,height:c.height,pixels:[],pixelType:g.fileInfo.pixelType,mask:g.maskData,statistics:[]}));g.fileInfo.mask&&
0<g.fileInfo.mask.numBytes&&l.push(g.maskData);d++;if(!D(g,c))throw"The decoded image dimensions are incorrect";h.addData({pixels:g.pixelData,statistics:{minValue:g.minValue,maxValue:g.maxValue,noDataValue:g.noDataValue}})}if(1<l.length){g=h.width*h.height;h.bandMasks=l;e=new Uint8Array(g);e.set(l[0]);for(c=1;c<l.length;c++)for(b=l[c],d=0;d<g;d++)e[d]&=b[d];h.maskData=e}return h},_calculateBandStatistics:function(b,c){var d=Infinity,e=-Infinity,g=b.length,f,h=0;if(c)for(f=0;f<g;f++)c[f]&&(h=b[f],
d=h<d?h:d,e=h>e?h:e);else for(f=0;f<g;f++)h=b[f],d=h<d?h:d,e=h>e?h:e;return{minValue:d,maxValue:e}},_loadRasterFormatModules:function(){A||(C||(C=new l),10>g("ie")?C.isRejected()||C.reject("unsupported browser version"):m(["./rasterFormats/JpgPlus","./rasterFormats/Png","./rasterFormats/Raw","./rasterFormats/TiffDecoder","./rasterFormats/Zlib"],function(b,c,d,e){w=b;y=c;z=d;B=e;A=!0;C.isResolved()||C.resolve(!0)}))}});var F=null,E=null,H=function(b){if("U1"===b||"U2"===b||"U4"===b||"U8"===b)return E=
Math.pow(2,8)-1,F=Uint8Array,"U8";"U16"===b?(E=E||Math.pow(2,16)-1,F=Uint16Array):"U32"===b?(E=E||Math.pow(2,32)-1,F=Uint32Array):"S8"===b?(E=E||0-Math.pow(2,7),F=Int8Array):"S16"===b?(E=E||0-Math.pow(2,15),F=Int16Array):"S32"===b?(E=E||0-Math.pow(2,31),F=Int32Array):F=Float32Array;return b},D=function(b,c){return b.height!==c.height||b.width!==c.width?!1:!0};g("extend-esri")&&f.setObject("layers.Raster",p,e);return p})},"esri/layers/PixelBlock":function(){define(["dojo/_base/declare","dojo/_base/lang",
"dojo/has","../kernel"],function(m,p,f,l){m=m([],{declaredClass:"esri.layers.PixelBlock",planes:null,width:null,height:null,pixelType:null,pixels:[],statistics:[],maskIsAlpha:!1,validPixelCount:null,constructor:function(f){if(f){if(!f.width||Math.floor(f.width)!==f.width)throw"PixelBlock: incorrect width";if(!f.height||Math.floor(f.height)!==f.height)throw"PixelBlock: incorrect height";if(!f.pixels)throw"PixelBlock: pixel data not present";this.width=f.width;this.height=f.height;this.pixels=f.pixels;
this.pixelType=f.pixelType||null;this.statistics=f.statistics;this.mask=f.mask||null;this.maskIsAlpha=f.maskIsAlpha||!1;f=f.validPixelCount;null==f&&(f=this.mask?this._getValidPixelCount(this.mask):this.width*this.height);this.validPixelCount=f}},getPlaneCount:function(){return this.pixels.length!==this.statistics.length?0:this.statistics.length},addData:function(f){if(!f.pixels||!f.statistics)throw"Pixel data or statistics are not present";if(f.pixels.length!==this.width*this.height)throw"Inconsistent pixel data size";
this.statistics.push(f.statistics);this.pixels.push(f.pixels)},getAsRGBA:function(){var f=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case "S8":case "S16":case "U16":case "S32":case "U32":case "F32":case "F64":this._fillFromNon8Bit(f);break;default:this._fillFrom8Bit(f)}return new Uint8ClampedArray(f)},getAsRGBAFloat:function(){var f=new Float32Array(this.width*this.height*4);this._fillFrom32Bit(f);return f},clone:function(f){f=f||this;var h=new this.constructor;h.width=f.width;
h.height=f.height;h.pixelType=f.pixelType;h.maskIsAlpha=f.maskIsAlpha;f.mask&&(h.mask=new Uint8Array(f.mask));var k,g,e;if(f.pixels)for(h.pixels=[],e=(g=f.pixels.length)&&f.pixels[0].slice,k=0;k<g;k++)h.pixels[k]=e?f.pixels[k].slice(0,f.pixels[k].length):new f.pixels[k].constructor(f.pixels[k]);if(f.statistics)for(h.statistics=[],g=f.statistics.length,k=0;k<g;k++)h.statistics[k]=p.clone(f.statistics[k]);f=f.validPixelCount;null==f&&(f=h.mask?this._getValidPixelCount(h.mask):h.width*h.height);return h},
clamp:function(f){if("F64"!==f&&"F32"!==f){var h;switch(f){case "U8":h=[0,255];break;case "U16":h=[0,65535];break;case "U32":h=[0,4294967295];break;case "S8":h=[-128,127];break;case "S16":h=[-32768,32767];break;case "S32":h=[-2147483648,2147483647];break;default:h=[-3.4*1E39,3.4*1E39]}var k=h[0];h=h[1];var g=this.pixels,e=this.width*this.height,c=g.length,b,d,l,m,p,t=[];for(m=0;m<c;m++){l=this._createEmptyBand(f,e);b=g[m];for(p=0;p<e;p++)d=b[p],l[p]=d>h?h:d<k?k:d;t.push(l)}this.pixels=t;this.pixelType=
f}},calculateStatistics:function(){var f,h=[],l,g=this.mask;for(f=0;f<this.pixels.length;f++)l=this.pixels[f],h.push(this._calculateBandStatistics(l,g));this.statistics=h},_getValidPixelCount:function(f){var h,k=0;for(h=0;h<f.length;h++)f[h]&&k++;return k},_createEmptyBand:function(f,h){switch(f){case "U8":f=new Uint8Array(h);break;case "U16":f=new Uint16Array(h);break;case "U32":f=new Uint32Array(h);break;case "S8":f=new Int8Array(h);break;case "S16":f=new Int16Array(h);break;case "S32":f=new Int32Array(h);
break;case "U32":f=new Uint32Array(h);break;case "F32":f=new Float32Array(h);break;case "F64":f=new Float64Array(h);break;default:f=new Float32Array(h)}return f},_fillFrom8Bit:function(f){var h=this.pixels,k=this.mask;if(!f||!h||!h.length)return 0;var g,e,c;g=e=c=h[0];3<=h.length&&(e=h[1],c=h[2]);var h=new Uint32Array(f),b=this.width*this.height;if(g.length!==b)return 0;if(k&&k.length===b)if(this.maskIsAlpha)for(f=0;f<b;f++)k[f]&&(h[f]=k[f]<<24|c[f]<<16|e[f]<<8|g[f]);else for(f=0;f<b;f++)k[f]&&(h[f]=
-16777216|c[f]<<16|e[f]<<8|g[f]);else for(f=0;f<b;f++)h[f]=-16777216|c[f]<<16|e[f]<<8|g[f]},_fillFromNon8Bit:function(f){var h=this.pixels,k=this.mask,g=this.statistics;if(!f||!h||!h.length)return 0;var e=1,c=0,e=1;g&&0<g.length?(c=g.map(function(b){return b.minValue}).reduce(function(b,c){return Math.min(b,c)}),e=g.map(function(b){return b.maxValue-b.minValue}).reduce(function(b,c){return Math.max(b,c)}),e=255/e):(e=255,"S8"===this.pixelType?(c=-128,e=127):"U16"===this.pixelType?e=65535:"S16"===
this.pixelType?(c=-32768,e=32767):"U32"===this.pixelType?e=4294967295:"S32"===this.pixelType?(c=-2147483648,e=2147483647):"F32"===this.pixelType?(c=-3.4*1E39,e=3.4*1E39):"F64"===this.pixelType&&(c=-Number.MAX_VALUE,e=Number.MAX_VALUE),e=255/(e-c));f=new Uint32Array(f);var g=this.width*this.height,b,d,l;b=h[0];if(b.length!==g)return 0;if(3<=h.length)if(d=h[1],l=h[2],k&&k.length===g)for(h=0;h<g;h++)k[h]&&(f[h]=-16777216|(l[h]-c)*e<<16|(d[h]-c)*e<<8|(b[h]-c)*e);else for(h=0;h<g;h++)f[h]=-16777216|(l[h]-
c)*e<<16|(d[h]-c)*e<<8|(b[h]-c)*e;else if(k&&k.length===g)for(h=0;h<g;h++)d=(b[h]-c)*e,k[h]&&(f[h]=-16777216|d<<16|d<<8|d);else for(h=0;h<g;h++)d=(b[h]-c)*e,f[h]=-16777216|d<<16|d<<8|d},_fillFrom32Bit:function(f){var h=this.pixels,k=this.mask;if(!f||!h||!h.length)return 0;var g,e,c;g=e=c=h[0];3<=h.length&&(e=h[1],c=h[2]);var b=this.width*this.height;if(g.length!==b)return 0;var d=0;if(k&&k.length===b)for(h=0;h<b;h++)f[d++]=g[h],f[d++]=e[h],f[d++]=c[h],f[d++]=k[h]&1;else for(h=0;h<b;h++)f[d++]=g[h],
f[d++]=e[h],f[d++]=c[h],f[d++]=1},_calculateBandStatistics:function(f,h){var k=Infinity,g=-Infinity,e=f.length,c,b=0;if(h)for(c=0;c<e;c++)h[c]&&(b=f[c],k=b<k?b:k,g=b>g?b:g);else for(c=0;c<e;c++)b=f[c],k=b<k?b:k,g=b>g?b:g;return{minValue:k,maxValue:g}}});f("extend-esri")&&p.setObject("layers.PixelBlock",m,l);return m})},"esri/layers/rasterFormats/LercCodec":function(){define([],function(){var m={defaultNoDataValue:-3.4027999387901484E38,decode:function(f,l){var k;l=l||{};var h=l.inputOffset||0,q=l.encodedMaskData||
null===l.encodedMaskData,g={},e=new Uint8Array(f,h,10);g.fileIdentifierString=String.fromCharCode.apply(null,e);if("CntZImage"!=g.fileIdentifierString.trim())throw"Unexpected file identifier string: "+g.fileIdentifierString;h+=10;e=new DataView(f,h,24);g.fileVersion=e.getInt32(0,!0);g.imageType=e.getInt32(4,!0);g.height=e.getUint32(8,!0);g.width=e.getUint32(12,!0);g.maxZError=e.getFloat64(16,!0);h+=24;if(!q)if(e=new DataView(f,h,16),g.mask={},g.mask.numBlocksY=e.getUint32(0,!0),g.mask.numBlocksX=
e.getUint32(4,!0),g.mask.numBytes=e.getUint32(8,!0),g.mask.maxValue=e.getFloat32(12,!0),h+=16,0<g.mask.numBytes){var q=new Uint8Array(Math.ceil(g.width*g.height/8)),e=new DataView(f,h,g.mask.numBytes),c=e.getInt16(0,!0),b=2,d=0;do{if(0<c)for(;c--;)q[d++]=e.getUint8(b++);else for(var r=e.getUint8(b++),c=-c;c--;)q[d++]=r;c=e.getInt16(b,!0);b+=2}while(b<g.mask.numBytes);if(-32768!==c||d<q.length)throw"Unexpected end of mask RLE encoding";g.mask.bitset=q;h+=g.mask.numBytes}else 0===(g.mask.numBytes|g.mask.numBlocksY|
g.mask.maxValue)&&(q=new Uint8Array(Math.ceil(g.width*g.height/8)),g.mask.bitset=q);e=new DataView(f,h,16);g.pixels={};g.pixels.numBlocksY=e.getUint32(0,!0);g.pixels.numBlocksX=e.getUint32(4,!0);g.pixels.numBytes=e.getUint32(8,!0);g.pixels.maxValue=e.getFloat32(12,!0);h+=16;q=g.pixels.numBlocksX;e=g.pixels.numBlocksY;q+=0<g.width%q?1:0;c=e+(0<g.height%e?1:0);g.pixels.blocks=Array(q*c);for(d=b=0;d<c;d++)for(r=0;r<q;r++){var v=0,e=new DataView(f,h,Math.min(10,f.byteLength-h)),u={};g.pixels.blocks[b++]=
u;var t=e.getUint8(0);v++;u.encoding=t&63;if(3<u.encoding)throw"Invalid block encoding ("+u.encoding+")";if(2===u.encoding)h++;else{if(0!==t&&2!==t){t>>=6;u.offsetType=t;if(2===t)u.offset=e.getInt8(1),v++;else if(1===t)u.offset=e.getInt16(1,!0),v+=2;else if(0===t)u.offset=e.getFloat32(1,!0),v+=4;else throw"Invalid block offset type";if(1===u.encoding)if(t=e.getUint8(v),v++,u.bitsPerPixel=t&63,t>>=6,u.numValidPixelsType=t,2===t)u.numValidPixels=e.getUint8(v),v++;else if(1===t)u.numValidPixels=e.getUint16(v,
!0),v+=2;else if(0===t)u.numValidPixels=e.getUint32(v,!0),v+=4;else throw"Invalid valid pixel count type";}h+=v;if(3!=u.encoding)if(0===u.encoding){t=(g.pixels.numBytes-1)/4;if(t!==Math.floor(t))throw"uncompressed block has invalid length";e=new ArrayBuffer(4*t);v=new Uint8Array(e);v.set(new Uint8Array(f,h,4*t));e=new Float32Array(e);u.rawData=e;h+=4*t}else 1===u.encoding&&(t=Math.ceil(u.numValidPixels*u.bitsPerPixel/8),e=new ArrayBuffer(4*Math.ceil(t/4)),v=new Uint8Array(e),v.set(new Uint8Array(f,
h,t)),u.stuffedData=new Uint32Array(e),h+=t)}}g.eofOffset=h;f=null!=l.noDataValue?l.noDataValue:m.defaultNoDataValue;var q=l.encodedMaskData,t=l.returnMask,c=0,b=g.pixels.numBlocksX,d=g.pixels.numBlocksY,r=Math.floor(g.width/b),u=Math.floor(g.height/d),v=2*g.maxZError,h=Number.MAX_VALUE,x,q=q||(g.mask?g.mask.bitset:null),w,e=new (l.pixelType||Float32Array)(g.width*g.height);t&&q&&(w=new Uint8Array(g.width*g.height));for(var t=new Float32Array(r*u),y,z,B=0;B<=d;B++){var A=B!==d?u:g.height%d;if(0!==
A)for(var C=0;C<=b;C++){var F=C!==b?r:g.width%b;if(0!==F){var E=B*g.width*u+C*r,H=g.width-F,D=g.pixels.blocks[c],G,I;if(2>D.encoding){if(0===D.encoding)G=D.rawData;else{G=D.stuffedData;I=D.bitsPerPixel;x=D.numValidPixels;y=D.offset;z=v;var P=t,Q=g.pixels.maxValue,O=(1<<I)-1,N=0,M=void 0,J=0,K=void 0,U=void 0,R=Math.ceil((Q-y)/z);G[G.length-1]<<=8*(4*G.length-Math.ceil(I*x/8));for(M=0;M<x;M++)0===J&&(U=G[N++],J=32),J>=I?(K=U>>>J-I&O,J-=I):(J=I-J,K=(U&O)<<J&O,U=G[N++],J=32-J,K+=U>>>J),P[M]=K<R?y+K*
z:Q;G=t}I=0}else k=2===D.encoding?0:D.offset;var Y;if(q)for(z=0;z<A;z++){E&7&&(Y=q[E>>3],Y<<=E&7);for(y=0;y<F;y++)E&7||(Y=q[E>>3]),Y&128?(w&&(w[E]=1),x=2>D.encoding?G[I++]:k,h=h>x?x:h,e[E++]=x):(w&&(w[E]=0),e[E++]=f),Y<<=1;E+=H}else if(2>D.encoding)for(z=0;z<A;z++){for(y=0;y<F;y++)x=G[I++],h=h>x?x:h,e[E++]=x;E+=H}else for(h=h>k?k:h,z=0;z<A;z++){for(y=0;y<F;y++)e[E++]=k;E+=H}if(1===D.encoding&&I!==D.numValidPixels)throw"Block and Mask do not match";c++}}}k=w;w={width:g.width,height:g.height,pixelData:e,
minValue:h,maxValue:g.pixels.maxValue,noDataValue:f};k&&(w.maskData=k);l.returnEncodedMask&&g.mask&&(w.encodedMaskData=g.mask.bitset?g.mask.bitset:null);if(l.returnFileInfo&&(w.fileInfo=p(g),l.computeUsedBitDepths)){l=w.fileInfo;k=g.pixels.numBlocksX*g.pixels.numBlocksY;Y={};for(G=0;G<k;G++)I=g.pixels.blocks[G],0===I.encoding?Y.float32=!0:1===I.encoding?Y[I.bitsPerPixel]=!0:Y[0]=!0;g=Object.keys(Y);l.bitDepths=g}return w}},p=function(f){return{fileIdentifierString:f.fileIdentifierString,fileVersion:f.fileVersion,
imageType:f.imageType,height:f.height,width:f.width,maxZError:f.maxZError,eofOffset:f.eofOffset,mask:f.mask?{numBlocksX:f.mask.numBlocksX,numBlocksY:f.mask.numBlocksY,numBytes:f.mask.numBytes,maxValue:f.mask.maxValue}:null,pixels:{numBlocksX:f.pixels.numBlocksX,numBlocksY:f.pixels.numBlocksY,numBytes:f.pixels.numBytes,maxValue:f.pixels.maxValue,noDataValue:this.noDataValue}}};return m})},"esri/layers/rasterFormats/Lerc2Codec":function(){define([],function(){var m={unstuff:function(f,k,h,m,g,e,c,b){var d=
(1<<h)-1,l=0,q,p=0,t,x;f[f.length-1]<<=8*(4*f.length-Math.ceil(h*m/8));if(g)for(q=0;q<m;q++)0===p&&(x=f[l++],p=32),p>=h?(t=x>>>p-h&d,p-=h):(p=h-p,t=(x&d)<<p&d,x=f[l++],p=32-p,t+=x>>>p),k[q]=g[t];else for(g=Math.ceil((b-e)/c),q=0;q<m;q++)0===p&&(x=f[l++],p=32),p>=h?(t=x>>>p-h&d,p-=h):(p=h-p,t=(x&d)<<p&d,x=f[l++],p=32-p,t+=x>>>p),k[q]=t<g?e+t*c:b},unstuffLUT:function(f,k,h,m,g,e){var c=(1<<k)-1,b=0,d=0,l=0,q=l=0,p,t=[];f[f.length-1]<<=8*(4*f.length-Math.ceil(k*h/8));for(var x=Math.ceil((e-m)/g),d=0;d<
h;d++)0===l&&(p=f[b++],l=32),l>=k?(q=p>>>l-k&c,l-=k):(l=k-l,q=(p&c)<<l&c,p=f[b++],l=32-l,q+=p>>>l),t[d]=q<x?m+q*g:e;t.unshift(m);return t},unstuff2:function(f,k,h,m,g,e,c,b){var d=(1<<h)-1,l=0,q,p=0,t=0,x,w,y;if(g)for(q=0;q<m;q++)0===p&&(w=f[l++],p=32,t=0),p>=h?(x=w>>>t&d,p-=h,t+=h):(y=h-p,x=w>>>t&d,w=f[l++],p=32-y,x|=(w&(1<<y)-1)<<h-y,t=y),k[q]=g[x];else for(g=Math.ceil((b-e)/c),q=0;q<m;q++)0===p&&(w=f[l++],p=32,t=0),p>=h?(x=w>>>t&d,p-=h,t+=h):(y=h-p,x=w>>>t&d,w=f[l++],p=32-y,x|=(w&(1<<y)-1)<<h-
y,t=y),k[q]=x<g?e+x*c:b;return k},unstuffLUT2:function(f,k,h,m,g,e){for(var c=(1<<k)-1,b=0,d=0,l=0,q=0,p=0,t=0,x,w=[],y=Math.ceil((e-m)/g),d=0;d<h;d++)0===q&&(x=f[b++],q=32,t=0),q>=k?(p=x>>>t&c,q-=k,t+=k):(l=k-q,p=x>>>t&c,x=f[b++],q=32-l,p|=(x&(1<<l)-1)<<k-l,t=l),w[d]=p<y?m+p*g:e;w.unshift(m);return w},originalUnstuff:function(f,k,h,m){var g=(1<<h)-1,e=0,c,b=0,d,l;f[f.length-1]<<=8*(4*f.length-Math.ceil(h*m/8));for(c=0;c<m;c++)0===b&&(l=f[e++],b=32),b>=h?(d=l>>>b-h&g,b-=h):(b=h-b,d=(l&g)<<b&g,l=f[e++],
b=32-b,d+=l>>>b),k[c]=d;return k},originalUnstuff2:function(f,k,h,m){var g=(1<<h)-1,e=0,c,b=0,d=0,l,q,p;for(c=0;c<m;c++)0===b&&(q=f[e++],b=32,d=0),b>=h?(l=q>>>d&g,b-=h,d+=h):(p=h-b,l=q>>>d&g,q=f[e++],b=32-p,l|=(q&(1<<p)-1)<<h-p,d=p),k[c]=l;return k}},p={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(f){for(var k=65535,h=65535,l=f.length,g=Math.floor(l/2),e=0;g;){var c=359<=g?359:g,g=g-c;do k+=f[e++]<<8,h+=k+=f[e++];while(--c);k=(k&65535)+(k>>>16);h=(h&65535)+(h>>>16)}l&1&&(h+=k+=f[e]<<
8);return((h&65535)+(h>>>16)<<16|(k&65535)+(k>>>16))>>>0},readHeaderInfo:function(f,k){var h=k.ptr,l=new Uint8Array(f,h,6),g={};g.fileIdentifierString=String.fromCharCode.apply(null,l);if(0!==g.fileIdentifierString.lastIndexOf("Lerc2",0))throw"Unexpected file identifier string (expect Lerc2 ): "+g.fileIdentifierString;var h=h+6,l=new DataView(f,h,8),e=l.getInt32(0,!0);g.fileVersion=e;h+=4;3<=e&&(g.checksum=l.getUint32(4,!0),h+=4);l=new DataView(f,h,12);g.height=l.getUint32(0,!0);g.width=l.getUint32(4,
!0);h+=8;4<=e?(g.numDims=l.getUint32(8,!0),h+=4):g.numDims=1;l=new DataView(f,h,40);g.numValidPixel=l.getUint32(0,!0);g.microBlockSize=l.getInt32(4,!0);g.blobSize=l.getInt32(8,!0);g.imageType=l.getInt32(12,!0);g.maxZError=l.getFloat64(16,!0);g.zMin=l.getFloat64(24,!0);g.zMax=l.getFloat64(32,!0);h+=40;k.headerInfo=g;k.ptr=h;if(3<=e&&(f=this.computeChecksumFletcher32(new Uint8Array(f,h-(4<=e?52:48),g.blobSize-14)),f!==g.checksum))throw"Checksum failed.";return!0},checkMinMaxRanges:function(f,k){var h=
k.headerInfo,l=this.getDataTypeArray(h.imageType),g=h.numDims*this.getDataTypeSize(h.imageType),e=this.readSubArray(f,k.ptr,l,g);f=this.readSubArray(f,k.ptr+g,l,g);k.ptr+=2*g;g=!0;for(k=0;k<h.numDims;k++)if(e[k]!==f[k]){g=!1;break}h.minValues=e;h.maxValues=f;return g},readSubArray:function(f,k,h,m){if(h===Uint8Array)f=new Uint8Array(f,k,m);else{var g=new ArrayBuffer(m);(new Uint8Array(g)).set(new Uint8Array(f,k,m));f=new h(g)}return f},readMask:function(f,k){var h=k.ptr,l=k.headerInfo,g=l.width*l.height,
e=l.numValidPixel,c=new DataView(f,h,4),l={};l.numBytes=c.getUint32(0,!0);h+=4;if((0===e||g===e)&&0!==l.numBytes)throw"invalid mask";if(0===e)e=new Uint8Array(Math.ceil(g/8)),l.bitset=e,c=new Uint8Array(g),k.pixels.resultMask=c,h+=l.numBytes;else if(0<l.numBytes){e=new Uint8Array(Math.ceil(g/8));c=new DataView(f,h,l.numBytes);f=c.getInt16(0,!0);var b=2,d=0,m=0;do{if(0<f)for(;f--;)e[d++]=c.getUint8(b++);else for(m=c.getUint8(b++),f=-f;f--;)e[d++]=m;f=c.getInt16(b,!0);b+=2}while(b<l.numBytes);if(-32768!==
f||d<e.length)throw"Unexpected end of mask RLE encoding";c=new Uint8Array(g);for(b=b=f=0;b<g;b++)b&7?(f=e[b>>3],f<<=b&7):f=e[b>>3],f&128&&(c[b]=1);k.pixels.resultMask=c;l.bitset=e;h+=l.numBytes}k.ptr=h;k.mask=l;return!0},readDataOneSweep:function(f,k,h){var l=k.ptr,g=k.headerInfo,e=g.numDims,c=g.width*g.height,g=g.numValidPixel*p.getDataTypeSize(g.imageType)*e,b=k.pixels.resultMask;if(h===Uint8Array)f=new Uint8Array(f,l,g);else{var d=new ArrayBuffer(g);(new Uint8Array(d)).set(new Uint8Array(f,l,g));
f=new h(d)}if(f.length===c*e)k.pixels.resultPixels=f;else{k.pixels.resultPixels=new h(c*e);var m=d=h=0,v=0;if(1<e)for(m=0;m<e;m++)for(v=m*c,d=0;d<c;d++)b[d]&&(k.pixels.resultPixels[v+d]=f[h++]);else for(d=0;d<c;d++)b[d]&&(k.pixels.resultPixels[d]=f[h++])}k.ptr=l+g;return!0},readHuffmanTree:function(l,k){var h=this.HUFFMAN_LUT_BITS_MAX,m=new DataView(l,k.ptr,16);k.ptr+=16;if(2>m.getInt32(0,!0))throw"unsupported Huffman version";var g=m.getInt32(4,!0),e=m.getInt32(8,!0),m=m.getInt32(12,!0);if(e>=m)return!1;
var c=new Uint32Array(m-e);p.decodeBits(l,k,c);var b=[],d,r,v;for(d=e;d<m;d++)r=d-(d<g?0:g),b[r]={first:c[d-e],second:null};d=l.byteLength-k.ptr;c=new ArrayBuffer(4*Math.ceil(d/4));(new Uint8Array(c)).set(new Uint8Array(l,k.ptr,d));l=new Uint32Array(c);k=0;var u,c=0;u=l[0];for(d=e;d<m;d++)r=d-(d<g?0:g),v=b[r].first,0<v&&(b[r].second=u<<k>>>32-v,32-k>=v?(k+=v,32===k&&(k=0,c++,u=l[c])):(k+=v-32,c++,u=l[c],b[r].second|=u>>>32-k));var t=u=0,x=new f;for(d=0;d<b.length;d++)void 0!==b[d]&&(u=Math.max(u,
b[d].first));var t=u>=h?h:u,h=[],w;for(d=e;d<m;d++)if(r=d-(d<g?0:g),v=b[r].first,0<v)if(e=[v,r],v<=t)for(r=b[r].second<<t-v,w=1<<t-v,v=0;v<w;v++)h[r|v]=e;else for(r=b[r].second,w=x,--v;0<=v;v--)r>>>v&1?(w.right||(w.right=new f),w=w.right):(w.left||(w.left=new f),w=w.left),0!==v||w.val||(w.val=e[1]);return{decodeLut:h,numBitsLUTQick:t,numBitsLUT:u,tree:x,stuffedData:l,srcPtr:c,bitPos:k}},readHuffman:function(f,k,h){var l=k.headerInfo,g=l.numDims,e=k.headerInfo.height,c=k.headerInfo.width,b=c*e,d=this.readHuffmanTree(f,
k);f=d.decodeLut;var m=d.tree,p=d.stuffedData,u=d.srcPtr,t=d.bitPos,x=d.numBitsLUTQick,d=d.numBitsLUT,w=0===k.headerInfo.imageType?128:0,y,z,B=k.pixels.resultMask,A,C,F,E,H,D=0;0<t&&(u++,t=0);var G=p[u],I=1===k.encodeMode,P=new h(b*g),Q=P,O;for(O=0;O<l.numDims;O++){1<g&&(Q=new h(P.buffer,b*O,b),D=0);if(k.headerInfo.numValidPixel===c*e)for(C=E=0;C<e;C++)for(F=0;F<c;F++,E++){z=0;y=A=G<<t>>>32-x;32-t<x&&(y=A|=p[u+1]>>>64-t-x);if(f[y])z=f[y][1],t+=f[y][0];else for(y=A=G<<t>>>32-d,32-t<d&&(y=A|=p[u+1]>>>
64-t-d),y=m,H=0;H<d;H++)if(y=A>>>d-H-1&1?y.right:y.left,!y.left&&!y.right){z=y.val;t=t+H+1;break}32<=t&&(t-=32,u++,G=p[u]);z-=w;I?(z=0<F?z+D:0<C?z+Q[E-c]:z+D,z&=255,D=Q[E]=z):Q[E]=z}else for(C=E=0;C<e;C++)for(F=0;F<c;F++,E++)if(B[E]){z=0;y=A=G<<t>>>32-x;32-t<x&&(y=A|=p[u+1]>>>64-t-x);if(f[y])z=f[y][1],t+=f[y][0];else for(y=A=G<<t>>>32-d,32-t<d&&(y=A|=p[u+1]>>>64-t-d),y=m,H=0;H<d;H++)if(y=A>>>d-H-1&1?y.right:y.left,!y.left&&!y.right){z=y.val;t=t+H+1;break}32<=t&&(t-=32,u++,G=p[u]);z-=w;I?(z=0<F&&B[E-
1]?z+D:0<C&&B[E-c]?z+Q[E-c]:z+D,z&=255,D=Q[E]=z):Q[E]=z}k.ptr=k.ptr+4*(u+1)+(0<t?4:0)}k.pixels.resultPixels=P},decodeBits:function(f,k,h,q,g){var e=k.headerInfo,c=e.fileVersion,b=0,d=new DataView(f,k.ptr,5<=f.byteLength-k.ptr?5:f.byteLength-k.ptr),l=d.getUint8(0);b++;var p=l>>6,u=0===p?4:3-p,t=0<(l&32)?!0:!1,p=l&31,l=0;if(1===u)l=d.getUint8(b),b++;else if(2===u)l=d.getUint16(b,!0),b+=2;else if(4===u)l=d.getUint32(b,!0),b+=4;else throw"Invalid valid pixel count type";var u=2*e.maxZError,x,w;g=1<e.numDims?
e.maxValues[g]:e.zMax;if(t){k.counter.lut++;t=d.getUint8(b);b++;e=Math.ceil((t-1)*p/8);x=Math.ceil(e/4);x=new ArrayBuffer(4*x);w=new Uint8Array(x);k.ptr+=b;w.set(new Uint8Array(f,k.ptr,e));b=new Uint32Array(x);k.ptr+=e;for(d=0;t-1>>>d;)d++;e=Math.ceil(l*d/8);x=Math.ceil(e/4);x=new ArrayBuffer(4*x);w=new Uint8Array(x);w.set(new Uint8Array(f,k.ptr,e));f=new Uint32Array(x);k.ptr+=e;k=3<=c?m.unstuffLUT2(b,p,t-1,q,u,g):m.unstuffLUT(b,p,t-1,q,u,g);3<=c?m.unstuff2(f,h,d,l,k):m.unstuff(f,h,d,l,k)}else k.counter.bitstuffer++,
d=p,k.ptr+=b,0<d&&(e=Math.ceil(l*d/8),x=Math.ceil(e/4),x=new ArrayBuffer(4*x),w=new Uint8Array(x),w.set(new Uint8Array(f,k.ptr,e)),f=new Uint32Array(x),k.ptr+=e,3<=c?null==q?m.originalUnstuff2(f,h,d,l):m.unstuff2(f,h,d,l,!1,q,u,g):null==q?m.originalUnstuff(f,h,d,l):m.unstuff(f,h,d,l,!1,q,u,g))},readTiles:function(f,k,h){var l=k.headerInfo,g=l.width,e=l.height,c=l.microBlockSize,b=l.imageType,d=p.getDataTypeSize(b),m=Math.ceil(g/c),v=Math.ceil(e/c);k.pixels.numBlocksY=v;k.pixels.numBlocksX=m;for(var u=
k.pixels.ptr=0,t=0,x=0,w=0,y=0,z=0,B=0,A=0,C=0,F=0,E=0,H=0,D=0,B=D=B=0,G,I=new h(c*c),P=e%c||c,Q=g%c||c,O=l.numDims,N,M=k.pixels.resultMask,J=k.pixels.resultPixels,K=5<=l.fileVersion?14:15,U=l.zMax,x=0;x<v;x++)for(y=x!==v-1?c:P,w=0;w<m;w++)for(z=w!==m-1?c:Q,E=x*g*c+w*c,H=g-z,N=0;N<O;N++){1<O?(D=J,E=x*g*c+w*c,J=new h(k.pixels.resultPixels.buffer,g*e*N*d,g*e),U=l.maxValues[N]):D=null;B=f.byteLength-k.ptr;u=new DataView(f,k.ptr,Math.min(10,B));t={};B=0;A=u.getUint8(0);B++;G=5<=l.fileVersion?A&4:0;C=
A>>6&255;F=A>>2&K;if(F!==(w*c>>3&K))throw"integrity issue";if(G&&0===N)throw"integrity issue";A&=3;if(3<A)throw k.ptr+=B,"Invalid block encoding ("+A+")";if(2===A){if(G)if(M)for(u=0;u<y;u++)for(t=0;t<z;t++)M[E]&&(J[E]=D[E]),E++;else for(u=0;u<y;u++)for(t=0;t<z;t++)J[E]=D[E],E++;k.counter.constant++;k.ptr+=B}else if(0===A){if(G)throw"integrity issue";k.counter.uncompressed++;k.ptr+=B;D=y*z*d;B=f.byteLength-k.ptr;D=D<B?D:B;B=new ArrayBuffer(0===D%d?D:D+d-D%d);G=new Uint8Array(B);G.set(new Uint8Array(f,
k.ptr,D));B=new h(B);D=0;if(M)for(u=0;u<y;u++){for(t=0;t<z;t++)M[E]&&(J[E]=B[D++]),E++;E+=H}else for(u=0;u<y;u++){for(t=0;t<z;t++)J[E++]=B[D++];E+=H}k.ptr+=D*d}else if(C=p.getDataTypeUsed(G&&6>b?4:b,C),F=p.getOnePixel(t,B,C,u),B+=p.getDataTypeSize(C),3===A)if(k.ptr+=B,k.counter.constantoffset++,M)for(u=0;u<y;u++){for(t=0;t<z;t++)M[E]&&(J[E]=G?Math.min(U,D[E]+F):F),E++;E+=H}else for(u=0;u<y;u++){for(t=0;t<z;t++)J[E]=G?Math.min(U,D[E]+F):F,E++;E+=H}else if(k.ptr+=B,p.decodeBits(f,k,I,F,N),B=0,G)if(M)for(u=
0;u<y;u++){for(t=0;t<z;t++)M[E]&&(J[E]=I[B++]+D[E]),E++;E+=H}else for(u=0;u<y;u++){for(t=0;t<z;t++)J[E]=I[B++]+D[E],E++;E+=H}else if(M)for(u=0;u<y;u++){for(t=0;t<z;t++)M[E]&&(J[E]=I[B++]),E++;E+=H}else for(u=0;u<y;u++){for(t=0;t<z;t++)J[E++]=I[B++];E+=H}}},formatFileInfo:function(f){return{fileIdentifierString:f.headerInfo.fileIdentifierString,fileVersion:f.headerInfo.fileVersion,imageType:f.headerInfo.imageType,height:f.headerInfo.height,width:f.headerInfo.width,numValidPixel:f.headerInfo.numValidPixel,
microBlockSize:f.headerInfo.microBlockSize,blobSize:f.headerInfo.blobSize,maxZError:f.headerInfo.maxZError,pixelType:p.getPixelType(f.headerInfo.imageType),eofOffset:f.eofOffset,mask:f.mask?{numBytes:f.mask.numBytes}:null,pixels:{numBlocksX:f.pixels.numBlocksX,numBlocksY:f.pixels.numBlocksY,maxValue:f.headerInfo.zMax,minValue:f.headerInfo.zMin,noDataValue:f.noDataValue}}},constructConstantSurface:function(f){var k=f.headerInfo.zMax,h=f.headerInfo.numDims,l=f.headerInfo.height*f.headerInfo.width,g=
0,e=0,c=0,b=f.pixels.resultMask,d=f.pixels.resultPixels;if(b)if(1<h)for(g=0;g<h;g++)for(c=g*l,k=f.headerInfo.maxValues[g],e=0;e<l;e++)b[e]&&(d[c+e]=k);else for(e=0;e<l;e++)b[e]&&(d[e]=k);else if(1<h)for(g=0;g<h;g++)for(c=g*l,k=f.headerInfo.maxValues[g],e=0;e<l;e++)d[c+e]=k;else for(e=0;e<l;e++)d[e]=k},getDataTypeArray:function(f){switch(f){case 0:f=Int8Array;break;case 1:f=Uint8Array;break;case 2:f=Int16Array;break;case 3:f=Uint16Array;break;case 4:f=Int32Array;break;case 5:f=Uint32Array;break;case 6:f=
Float32Array;break;case 7:f=Float64Array;break;default:f=Float32Array}return f},getPixelType:function(f){switch(f){case 0:f="S8";break;case 1:f="U8";break;case 2:f="S16";break;case 3:f="U16";break;case 4:f="S32";break;case 5:f="U32";break;case 6:f="F32";break;case 7:f="F64";break;default:f="F32"}return f},isValidPixelValue:function(f,k){if(null==k)return!1;switch(f){case 0:f=-128<=k&&127>=k;break;case 1:f=0<=k&&255>=k;break;case 2:f=-32768<=k&&32767>=k;break;case 3:f=0<=k&&65536>=k;break;case 4:f=
-2147483648<=k&&2147483647>=k;break;case 5:f=0<=k&&4294967296>=k;break;case 6:f=-3.4027999387901484E38<=k&&3.4027999387901484E38>=k;break;case 7:f=4.9E-324<=k&&1.7976931348623157E308>=k;break;default:f=!1}return f},getDataTypeSize:function(f){var k=0;switch(f){case 0:case 1:k=1;break;case 2:case 3:k=2;break;case 4:case 5:case 6:k=4;break;case 7:k=8;break;default:k=f}return k},getDataTypeUsed:function(f,k){var h=f;switch(f){case 2:case 4:h=f-k;break;case 3:case 5:h=f-2*k;break;case 6:h=0===k?f:1===
k?2:1;break;case 7:h=0===k?f:f-2*k+1;break;default:h=f}return h},getOnePixel:function(f,k,h,m){f=0;switch(h){case 0:f=m.getInt8(k);break;case 1:f=m.getUint8(k);break;case 2:f=m.getInt16(k,!0);break;case 3:f=m.getUint16(k,!0);break;case 4:f=m.getInt32(k,!0);break;case 5:f=m.getUInt32(k,!0);break;case 6:f=m.getFloat32(k,!0);break;case 7:f=m.getFloat64(k,!0);break;default:throw"the decoder does not understand this pixel type";}return f}},f=function(f,k,h){this.val=f;this.left=k;this.right=h};return{decode:function(f,
k){k=k||{};var h=k.noDataValue,l=0,g={};g.ptr=k.inputOffset||0;g.pixels={};if(p.readHeaderInfo(f,g)){var l=g.headerInfo,e=l.fileVersion,c=p.getDataTypeArray(l.imageType);if(5<e)throw"unsupported lerc version 2."+e;p.readMask(f,g);l.numValidPixel===l.width*l.height||g.pixels.resultMask||(g.pixels.resultMask=k.maskData);var b=l.width*l.height;g.pixels.resultPixels=new c(b*l.numDims);g.counter={onesweep:0,uncompressed:0,lut:0,bitstuffer:0,constant:0,constantoffset:0};if(0!==l.numValidPixel)if(l.zMax===
l.zMin)p.constructConstantSurface(g);else if(4<=e&&p.checkMinMaxRanges(f,g))p.constructConstantSurface(g);else{var d=new DataView(f,g.ptr,2),m=d.getUint8(0);g.ptr++;if(m)p.readDataOneSweep(f,g,c);else if(1<e&&1>=l.imageType&&1E-5>Math.abs(l.maxZError-.5)){d=d.getUint8(1);g.ptr++;g.encodeMode=d;if(2<d||4>e&&1<d)throw"Invalid Huffman flag "+d;d?p.readHuffman(f,g,c):p.readTiles(f,g,c)}else p.readTiles(f,g,c)}g.eofOffset=g.ptr;k.inputOffset?(f=g.headerInfo.blobSize+k.inputOffset-g.ptr,1<=Math.abs(f)&&
(g.eofOffset=k.inputOffset+g.headerInfo.blobSize)):(f=g.headerInfo.blobSize-g.ptr,1<=Math.abs(f)&&(g.eofOffset=g.headerInfo.blobSize));f={width:l.width,height:l.height,pixelData:g.pixels.resultPixels,minValue:l.zMin,maxValue:l.zMax,validPixelCount:l.numValidPixel,dimCount:l.numDims,dimStats:{minValues:l.minValues,maxValues:l.maxValues},maskData:g.pixels.resultMask};if(g.pixels.resultMask&&p.isValidPixelValue(l.imageType,h)){e=g.pixels.resultMask;for(l=0;l<b;l++)e[l]||(f.pixelData[l]=h);f.noDataValue=
h}g.noDataValue=h;k.returnFileInfo&&(f.fileInfo=p.formatFileInfo(g));return f}},getBandCount:function(f){for(var k=0,h=0,l={ptr:0,pixels:{}};h<f.byteLength-58;)p.readHeaderInfo(f,l),h+=l.headerInfo.blobSize,k++,l.ptr=h;return k}}})},"esri/layers/pixelFilters/VectorFieldPixelFilter":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../../kernel ../../lang dojo/_base/array".split(" "),function(m,p,f,l,k,h){m=m(null,{declaredClass:"esri.layers.pixelFilters.VectorFieldPixelFilter",speedUnits:["esriMetersPerSecond",
"esriKilometersPerHour","esriKnots","esriFeetPerSecond","esriMilesPerHour"],constructor:function(f){p.mixin(this,f);this.isDataUV=f&&f.isDataUV?f.isDataUV:!1;this.computeMagnitudeAndDirection=p.hitch(this,this.computeMagnitudeAndDirection);this.unitConversionFactor=1;this._updateUnitConvFactor()},setUnits:function(f,g){this.inputUnit=f;this.outputUnit=g;this.unitConversionFactor=1;this._updateUnitConvFactor()},_updateUnitConvFactor:function(){var f=h.indexOf(this.speedUnits,this.inputUnit),g=h.indexOf(this.speedUnits,
this.outputUnit);if(this.inputUnit&&this.outputUnit&&0<=f&&0<=g){var e=[1,.277778,.514444,.3048,.44704,0];this.unitConversionFactor=e[f]/e[g]}},computeMagnitudeAndDirection:function(f){if(!k.isDefined(f))throw"Could not compute magnitude and direction. No pixel data is available.";var g=f.pixelBlock;if(!k.isDefined(g)||2!==g.getPlaneCount())throw"Could not compute magnitude and direction. Pixel data does not contain two bands.";var e=f.extent,c=(e.xmax-e.xmin)/g.width,b=(e.ymax-e.ymin)/g.height,d=
e.xmin+c/2,e=e.ymax-b/2;g.statistics[0].minValue=0;g.statistics[0].maxValue=0;var h=180/Math.PI,l=[],m=0,q=0,p=0,w=!k.isDefined(g.mask),y,z,B,A,C,F,E,H;C=E=Infinity;F=H=-Infinity;for(m=0;m<g.height;m++)for(q=0;q<g.width;q++,p++)if(l.push([d+c*q,e-b*m]),w||g.mask[p])B=y=g.pixels[0][p]*this.unitConversionFactor,A=z=g.pixels[1][p],this.isDataUV&&(B=Math.sqrt(y*y+z*z),A=90-h*Math.atan2(z,y),g.pixels[0][p]=B*this.unitConversionFactor,g.pixels[1][p]=A),B>F&&(F=B),B<C&&(C=B),A>H&&(H=A),A<E&&(E=A);g.statistics[0].maxValue=
F;g.statistics[0].minValue=C;g.statistics[1].maxValue=H;g.statistics[1].minValue=E;f.locations=l;return f}});f("extend-esri")&&p.setObject("layers.pixelFilters.VectorFieldPixelFilter",m,l);return m})},"esri/layers/rasterFormats/ImageCanvasDecoder":function(){define(["require","dojo/_base/declare","dojo/Deferred","dojo/sniff"],function(m,p,f,l){var k;return p(null,{constructor:function(f){this.ctx=f.ctx;this._loadRasterFormatModule()},decode:function(h,k){if(!k.width||!k.height)throw"Native decoding requires the image format, width and height";
var g=new f,e,c=new Uint8Array(h);h=this._getFormat(h);if("error"===h)throw"invalid format";"jpeg"===h&&(e=this._getMask(c,k));var b="",d,l;for(d=0;d<c.length;d+=65535)l=c.subarray(d,d+65535>c.length-1?c.length-1:d+65535),b+=String.fromCharCode.apply(null,l);var c="data:image/"+h+";base64,"+window.btoa(b),m=new Image,q;m.src=c;var p=this;m.onload=function(){p.ctx.clearRect(0,0,k.width,k.height);p.ctx.drawImage(m,0,0);var b=p.ctx.getImageData(0,0,m.width,m.height);q=b.data;if(e)for(d=0;d<e.length;d++)q[4*
d+3]=e[d]?255:0;p.ctx.putImageData(b,0,0);g.resolve(null)};m.onerror=function(){g.reject("cannot load image")};return g},_getFormat:function(f){f=new Uint8Array(f,0,10);var h="error";255===f[0]&&216===f[1]?h="jpeg":137===f[0]&&80===f[1]&&78===f[2]&&71===f[3]&&(h="png");return h},_getMask:function(f,l){var g;try{if(!k)throw"The zlib decoder module is not loaded.";var e=0,c=0,b=Math.round(f.length/2);1===b%2&&(b+=1);for(var d=f.length-2,e=b;e<d&&(255!==f[e]||217!==f[e+1]);e++);b=e+=2;if(b<f.length-
1){var h=(new k(f.subarray(b))).getBytes();g=new Uint8Array(l.width*l.height);for(e=f=0;e<h.length;e++)for(c=7;0<=c;c--)g[f++]=h[e]>>c&1}}catch(v){}return g},_loadRasterFormatModule:function(){10>l("ie")||m(["./Zlib"],function(f){k=f})}})})},"esri/tasks/ImageServiceIdentifyTask":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../request ../geometry/normalizeUtils ./Task ./ImageServiceIdentifyResult".split(" "),function(m,p,f,l,k,h,q,g){m=m(q,{declaredClass:"esri.tasks.ImageServiceIdentifyTask",
constructor:function(e){this._url.path+="/identify";this._handler=p.hitch(this,this._handler)},__msigns:[{n:"execute",c:3,a:[{i:0,p:["geometry"]}],e:2}],_handler:function(e,c,b,d,f){try{var h=new g(e);this._successHandler([h],"onComplete",b,f)}catch(u){this._errorHandler(u,d,f)}},execute:function(e,c,b,d){var f=d.assembly;e=this._encode(p.mixin({},this._url.query,{f:"json"},e.toJson(f&&f[0])));var g=this._handler,h=this._errorHandler;return k({url:this._url.path,content:e,callbackParamName:"callback",
load:function(e,f){g(e,f,c,b,d.dfd)},error:function(c){h(c,b,d.dfd)}})},onComplete:function(){}});h._createWrappers(m);f("extend-esri")&&p.setObject("tasks.ImageServiceIdentifyTask",m,l);return m})},"esri/tasks/ImageServiceIdentifyResult":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../geometry/jsonUtils ./FeatureSet".split(" "),function(m,p,f,l,k,h){m=m(null,{declaredClass:"esri.tasks.ImageServiceIdentifyResult",constructor:function(f){f.catalogItems&&(this.catalogItems=
new h(f.catalogItems));f.location&&(this.location=k.fromJson(f.location));this.catalogItemVisibilities=f.catalogItemVisibilities;this.name=f.name;this.objectId=f.objectId;this.value=f.value;this.processedValues=f.processedValues;this.properties=f.properties}});f("extend-esri")&&p.setObject("tasks.ImageServiceIdentifyResult",m,l);return m})},"esri/tasks/ImageServiceIdentifyParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/_base/array dojo/has ../kernel ../lang ../geometry/jsonUtils".split(" "),
function(m,p,f,l,k,h,q,g){m=m(null,{declaredClass:"esri.tasks.ImageServiceIdentifyParameters",geometry:null,mosaicRule:null,renderingRule:null,renderingRules:null,pixelSizeX:null,pixelSizeY:null,pixelSize:null,returnGeometry:!1,returnCatalogItems:!0,timeExtent:null,maxItemCount:null,returnPixelValues:!0,toJson:function(e){var c=e&&e.geometry||this.geometry;e={geometry:c,returnGeometry:this.returnGeometry,returnCatalogItems:this.returnCatalogItems,mosaicRule:this.mosaicRule?f.toJson(this.mosaicRule.toJson()):
null,renderingRule:this.renderingRule?f.toJson(this.renderingRule.toJson()):null};c&&(e.geometryType=g.getJsonType(c));c=this.timeExtent;e.time=c?c.toJson().join(","):null;q.isDefined(this.pixelSizeX)&&q.isDefined(this.pixelSizeY)?e.pixelSize=f.toJson({x:parseFloat(this.pixelSizeX),y:parseFloat(this.pixelSizeY)}):this.pixelSize&&(e.pixelSize=this.pixelSize?f.toJson(this.pixelSize.toJson()):null);this.renderingRules&&(e.renderingRules=f.toJson(l.map(this.renderingRules,function(b){return b.toJson()})));
q.isDefined(this.returnPixelValues)&&(e.returnPixelValues=this.returnPixelValues);q.isDefined(this.maxItemCount)&&(e.maxItemCount=this.maxItemCount);return e}});k("extend-esri")&&p.setObject("tasks.ImageServiceIdentifyParameters",m,h);return m})},"*noref":1}});define("esri/layers/ArcGISImageServiceLayer","dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../config ./DynamicMapServiceLayer ./ImageServiceLayerMixin".split(" "),function(m,p,f,l,k,h,q){m=m([h,q],{declaredClass:"esri.layers.ArcGISImageServiceLayer",
constructor:function(f,e){this._initialize(f,e);this.useMapImage=e&&e.useMapImage||!1},refresh:function(f){if(f)this.inherited(arguments);else{var e=this.disableClientCaching;this.disableClientCaching=!0;this.inherited(arguments);this.disableClientCaching=e}},setRenderer:function(f,e){this.renderer=f;this.onRendererChange();e||this.refresh(!0)},exportMapImage:function(f,e){var c=k.defaults.map;f=p.mixin({size:c.width+","+c.height},this._params,f?f.toJson(this.normalization):{},{f:"json"});delete f._ts;
this._exportMapImage(this._url.path+"/exportImage",f,e)}});f("extend-esri")&&p.setObject("layers.ArcGISImageServiceLayer",m,l);return m})},"esri/layers/ImageServiceLayerMixin":function(){define("esri/layers/ImageServiceLayerMixin","dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/_base/array dojo/_base/json dojo/_base/config dojo/_base/connect dojo/has dojo/io-query dojo/DeferredList ../kernel ../config ../lang ../request ../deferredUtils ../urlUtils ../geometry/Extent ../geometry/Point ../geometry/Polygon ../renderers/colorRampUtils ./MosaicRule ./RasterFunction ./DimensionalDefinition ./Raster ./PixelBlock ./pixelFilters/VectorFieldPixelFilter ./rasterFormats/ImageCanvasDecoder ./TimeInfo ./Field ../graphic ../tasks/ImageServiceIdentifyTask ../tasks/ImageServiceIdentifyParameters".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x,w,y,z,B,A,C,F,E,H,D,G,I,P,Q,O){m=m(null,{declaredClass:"esri.layers.ImageServiceLayerMixin",_rasterFieldPrefix:"Raster.",_renderingRuleFieldSubPrefix:"ServicePixelValue.",_rasterFunctionServiceInfoProps:"bandCount pixelType hasRasterAttributeTable hasColormap hasHistograms minValues maxValues meanValues stdvValues serviceDataType".split(" "),_pixelTypeRanges:{U1:[0,1],U2:[0,3],U4:[0,15],U8:[0,255],S8:[-128,127],U16:[0,65535],S16:[-32768,32767]},_eventMap:{"rendering-change":!0,
"mosaic-rule-change":!0,"spatial-reference-change":!0,"renderer-change":!0},_cachedVariableStats:{},constructor:function(b,c){this.useMapTime=c&&c.hasOwnProperty("useMapTime")?!!c.useMapTime:!0},_initialize:function(b,c){this._url=t.urlToObject(b);this.raster=new F(this._url.path);this._rasterFunctionTemplateInfos={};this._customRenderingRuleId={};this.infoTemplate=c&&c.infoTemplate;this.format=(b=c&&c.imageServiceParameters)&&b.format;this.compressionTolerance=b&&b.compressionTolerance?b.compressionTolerance:
.01;this.interpolation=b?b.interpolation:null;this.compressionQuality=b?b.compressionQuality:null;this.bandIds=b?b.bandIds:null;this.mosaicRule=b?b.mosaicRule:null;this.renderingRule=b?b.renderingRule:null;this.renderer=b?b.renderer:null;this.useMapDimensionValue=c&&c.hasOwnProperty("useMapDimensionValue")?!!c.useMapDimensionValue:!0;this.hasImageFilter=c&&c.hasImageFilter;this.activeMapDimensions=c&&c.activeMapDimensions;this._params=p.mixin({},this._url.query,{f:"image",interpolation:this.interpolation,
format:this.format,compressionQuality:this.compressionQuality,bandIds:this.bandIds?this.bandIds.join(","):null},b?b.toJson():{});this.pixelFilter=c&&c.pixelFilter;this.originalPixelData=this.pixelData=null;this.hasDataChanged=!0;this._requestDataHandler=p.hitch(this,this._requestDataHandler);this._requestDataErrorHandler=p.hitch(this,this._requestDataErrorHandler);this._rasterReadPromise=null;this._initLayer=p.hitch(this,this._initLayer);this._queryVisibleRastersHandler=p.hitch(this,this._queryVisibleRastersHandler);
this._visibleRasters=[];this._rasterAttributeTableFields=[];this._rasterAttributeTableFeatures=[];this._renderingRuleAttributeTable={};this._renderingRuleColormap={};this._useRenderingRuleAttributeTable=!1;this._loadCallback=c&&c.loadCallback;b&&b.renderer&&(b.renderer.outputUnit||b.renderer.inputUnit)&&(this.vectorFieldPixelFilter=new H,this.vectorFieldPixelFilter.setUnits(b.renderer.inputUnit,b.renderer.outputUnit));(c=c&&c.resourceInfo)?this._initLayer(c):v({url:this._url.path,content:p.mixin({f:"json"},
this._url.query),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});this.registerConnectEvents()},disableClientCaching:!1,_initLayer:function(b,c){if(null!==b&&void 0!==b){this._findCredential();(this.credential&&this.credential.ssl||b&&b._ssl)&&this._useSSL();c=this.minScale;var d=this.maxScale;p.mixin(this,b);this.minScale=c;this.maxScale=d;this.initialExtent=this.fullExtent=this.extent=new x(b.extent);this.spatialReference=this.initialExtent.spatialReference;this.pixelSizeX=
parseFloat(this.pixelSizeX);this.pixelSizeY=parseFloat(this.pixelSizeY);var e=this.minValues,f=this.maxValues,g=this.meanValues,h=this.stdvValues,k=this.bands=[];c=0;for(d=this.bandCount;c<d;c++)k[c]={min:e[c],max:f[c],mean:g[c],stddev:h[c]};this.timeInfo=(c=this.timeInfo)&&c.timeExtent?new G(c):null;d=this.fields=[];if(e=b.fields)for(c=0;c<e.length;c++)d.push(new I(e[c]));this._updateInfoTemplateFields(this.fields);(this.version=b.currentVersion)||(this.version="fields"in b||"objectIdField"in b||
"timeInfo"in b?10:9.3);r.isDefined(b.minScale)&&!this._hasMin&&"Raster"!==b.cacheType&&this.setMinScale(b.minScale);r.isDefined(b.maxScale)&&!this._hasMax&&"Raster"!==b.cacheType&&this.setMaxScale(b.maxScale);c={};b.defaultMosaicMethod?(c.method=b.defaultMosaicMethod,c.operation=b.mosaicOperator,c.sortField=b.sortField,c.sortValue=b.sortValue):c.method=B.METHOD_NONE;this.defaultMosaicRule=new B(c);this.defaultMosaicRule.ascending=!0;this._useRenderingRuleAttributeTable=10<this.version&&"esriImageServiceDataTypeThematic"===
this.serviceDataType;this._setDefaultRenderingRule(!0);this._getRenderingRuleAttributeTableAndColormap();this._isScientificData()&&(!this.mosaicRule||this.mosaicRule&&!this.mosaicRule.multidimensionalDefinition)&&this._setDefaultMultidimensionalDefinition(!0);10<this.version&&this.hasRasterAttributeTable&&this.getRasterAttributeTable().then(p.hitch(this,function(b){b&&(b.features&&b.fields&&(this.rasterAttributeTable=p.clone(b)),b.features&&0<b.features.length&&(this._rasterAttributeTableFeatures=
p.clone(b.features)),b.fields&&0<b.fields.length&&(this._rasterAttributeTableFields=p.clone(b.fields)),this.renderingRule||!this.renderer||"esri.renderer.ClassBreaksRenderer"!==this.renderer.declaredClass&&"esri.renderer.UniqueValueRenderer"!==this.renderer.declaredClass||this.refresh())}));this._initVectorPixelFilter();this.bandIds||2!==this.bandCount||this.renderingRule||"esri.layers.ArcGISImageServiceLayer"!==this.declaredClass||this.setBandIds([0,0,0],!0);10.3<=this.version&&this.rasterFunctionInfos&&
this.rasterFunctionInfos.length&&this.getRasterFunctionInfos().then(p.hitch(this,function(b){if(b&&b.length){this.rasterFunctionInfos=b;var c=[],d;l.forEach(b,function(b){if(b){var e=b.functionType;d=d||1===e||2===e;c.push(b.name)}},this);this._hasItemLevelRFT=d;this._rasterFunctionNames=c;d&&(this._initVectorPixelFilter(),this.refresh())}}));this.loaded=!0;this._setDefaultFilter();this.onLoad(this);if(b=this._loadCallback)delete this._loadCallback,b(this)}},_updateInfoTemplateFields:function(b){if(b&&
!(1>b.length)&&this.infoTemplate&&this.infoTemplate.info&&this.infoTemplate.info.fieldInfos&&!(1>this.infoTemplate.info.fieldInfos.length)){var c,d,e,f;f=this.infoTemplate.info.fieldInfos;for(c=0;c<b.length;c++)for(e=b[c],d=0;d<f.length;d++)if(f[d].fieldName.toLowerCase()===e.name.toLowerCase()&&f[d].fieldName!==e.name){f[d].fieldName=e.name;break}}},getKeyProperties:function(b){var c=this._url.path+"/keyProperties",d=new f(u._dfdCanceller),e={f:"json"};b&&b.renderingRule&&(e.renderingRule=k.toJson(b.renderingRule.toJson()));
10<this.version?(d._pendingDfd=v({url:c,content:e,handleAs:"json",callbackParamName:"callback"}),d._pendingDfd.then(function(b){d.callback(b)},function(b){d.errback(b)})):(b=Error("Layer does not have key properties"),b.log=!!h.isDebug,d.errback(b));return d},getRasterAttributeTable:function(b){var c=this._url.path+"/rasterAttributeTable",d=new f(u._dfdCanceller),e={f:"json"},g=this.hasRasterAttributeTable;b&&b.renderingRule&&(e.renderingRule=k.toJson(b.renderingRule.toJson()),g=!0);!this.loaded||
10<this.version&&g?(d._pendingDfd=v({url:c,content:e,handleAs:"json",callbackParamName:"callback"}),d._pendingDfd.then(function(b){d.callback(b)},function(b){d.errback(b)})):(b=Error("Layer does not support raster attribute table"),b.log=!!h.isDebug,d.errback(b));return d},getRenderingRuleAttributeTable:function(b){var c=new f(u._dfdCanceller);if(!b||!b.renderingRule)return c.errback(Error("Rendering rule is not specified")),c;b=b.renderingRule;var d=this._getRenderingRuleId(b);this._renderingRuleAttributeTable&&
d&&this._renderingRuleAttributeTable.hasOwnProperty(d)?c.resolve(this._renderingRuleAttributeTable[d]):c=this.getRasterAttributeTable({renderingRule:b}).then(p.hitch(this,function(b){var c;b&&b.features&&b.features.length&&b.fields&&b.fields.length&&(c={features:p.clone(b.features),fields:p.clone(b.fields)},d&&(this._renderingRuleAttributeTable[d]=c));return c}));return c},_initVectorPixelFilter:function(){var b;this._hasItemLevelRFT&&this.renderingRule&&(b=this._getItemLevelRenderingRule(this.renderingRule));
if(b=b||this.renderingRule)return this.getRenderingRuleServiceInfo(b).then(p.hitch(this,function(b){!b||!this._isVectorData(b)&&"esri.layers.ArcGISImageServiceVectorLayer"!==this.declaredClass||r.isDefined(this.pixelFilter)||(this.vectorFieldPixelFilter=this.vectorFieldPixelFilter||new H,this.vectorFieldPixelFilter.isDataUV="esriImageServiceDataTypeVector-UV"===b.serviceDataType,this.pixelFilter=this.vectorFieldPixelFilter.computeMagnitudeAndDirection,this.getKeyProperties().then(p.hitch(this,this._setFlowRepresentation)),
this._applyVectorResamplingType(b.serviceDataType))}))},_applyVectorResamplingType:function(b){if(b){var c=this.renderingRule;c&&"Resample"===c.functionName&&((c.functionArguments||{}).ResamplingType="esriImageServiceDataTypeVector-UV"===b?7:10,this.setRenderingRule(new A(c.toJson())))}},_getRasterAttributeTableFeatures:function(){var b=new f;if(this._rasterAttributeTableFeatures&&0<this._rasterAttributeTableFeatures.length)return b.resolve(this._rasterAttributeTableFeatures),b;if(10<this.version&&
this.hasRasterAttributeTable)return b=this.getRasterAttributeTable(),b.then(p.hitch(this,function(b){b&&b.features&&0<b.features.length&&(this._rasterAttributeTableFeatures=p.clone(b.features))})),b;b.resolve(this._rasterAttributeTableFeatures);return b},_getRenderingRuleAttributeTableFeatures:function(b){return(b=b&&b.renderingRule)?this.getRenderingRuleAttributeTable({renderingRule:b}).then(function(b){return b&&b.features}):(b=new f,b.errback(Error("Rendering rule is not specified")),b)},_getRenderingRuleAttributeTableAndColormap:function(){this.renderingRule&&
this.getRenderingRuleServiceInfo(this.renderingRule).then(p.hitch(this,function(b){b.hasRasterAttributeTable&&this.getRenderingRuleAttributeTable({renderingRule:this.renderingRule}).then(p.hitch(this,function(){!this.renderer||"esri.renderer.ClassBreaksRenderer"!==this.renderer.declaredClass&&"esri.renderer.UniqueValueRenderer"!==this.renderer.declaredClass||this.refresh()}));b.hasColormap&&this.getRenderingRuleColormap({renderingRule:this.renderingRule}).then(p.hitch(this,function(){this.renderer&&
"esri.renderer.ColormapRenderer"===this.renderer.declaredClass&&this.refresh()}))}))},getCustomRasterFields:function(b){var c=b?b.rasterAttributeTableFieldPrefix:this._rasterFieldPrefix;b=10.3<=this.version?"esriFieldTypeDouble":"esriFieldTypeString";var d={name:this._rasterFieldPrefix+"ItemPixelValue",alias:"Item Pixel Value",domain:null,editable:!1,length:50,type:b},e={name:this._rasterFieldPrefix+"ServicePixelValue",alias:"Service Pixel Value",domain:null,editable:!1,length:50,type:b},f={name:this._rasterFieldPrefix+
"ServicePixelValue.Raw",alias:"Raw Service Pixel Value",domain:null,editable:!1,length:50,type:"esriFieldTypeDouble"},g=this.fields?p.clone(this.fields):[];b=g.length;g[b]=e;10.4<=this.version&&"esri.layers.ArcGISImageServiceLayer"===this.declaredClass&&(!this.rasterFunctionInfos||!this.rasterFunctionInfos.length||this._isRenderingRuleAProcessingTemplate({functionName:"none"}))&&(b++,g[b]=f);if(this.capabilities&&-1<this.capabilities.toLowerCase().indexOf("catalog")||this.fields&&0<this.fields.length)b++,
g[b]=d;!r.isDefined(this.pixelFilter)||"esriImageServiceDataTypeVector-UV"!==this.serviceDataType&&"esriImageServiceDataTypeVector-MagDir"!==this.serviceDataType||(d={name:this._rasterFieldPrefix+"Magnitude",alias:"Magnitude",domain:null,editable:!1,type:"esriFieldTypeDouble"},e={name:this._rasterFieldPrefix+"Direction",alias:"Direction",domain:null,editable:!1,type:"esriFieldTypeDouble"},b++,g[b]=d,b++,g[b]=e);b=this._rasterAttributeTableFields;(d=this.renderingRule&&this._getRenderingRuleId(this.renderingRule))&&
this._renderingRuleAttributeTable&&this._renderingRuleAttributeTable.hasOwnProperty(d)&&(b=this._renderingRuleAttributeTable[d].fields);b&&0<b.length&&(b=l.filter(b,function(b){return"esriFieldTypeOID"!==b.type&&"value"!==b.name.toLowerCase()}),b=l.map(b,function(b){var d=p.clone(b);d.name=c+b.name;return d}),g=g.concat(b));var h=this._rasterFieldPrefix+this._renderingRuleFieldSubPrefix;10.4<=this.version&&this.rasterFunctionInfos&&l.forEach(this.rasterFunctionInfos,function(b){b&&b.name&&"none"!==
b.name.toLowerCase()&&(b={name:h+b.name.replace(/ /gi,"_"),alias:b.name,domain:null,editable:!1,type:"esriFieldTypeDouble"},g.push(b))});return g},_applyTimeToMultidimensionalCRF:function(b,c){var d=this._isTimeSupportedOnCRF();if(d&&(!b||!b.multidimensionalDefinition))return b;var e=this.timeInfo&&this.timeInfo.startTimeField;if((c=c||this._params.time)&&e&&this._isMultidimensionalCRF()){b=p.clone(b||this.defaultMosaicRule)||new B;b.multidimensionalDefinition=b.multidimensionalDefinition||[];var f=
b.multidimensionalDefinition.filter(function(b){return b.dimensionName===e}),g=c.split(",").map(function(b){return parseInt(b,10)});2===g.length&&g[0]===g[1]&&(g.length=1);0<f.length?d?b.multidimensionalDefinition.forEach(function(b){b.dimensionName===e&&(b.dimensionName=null,b.isSlice=null,b.values=null)}):b.multidimensionalDefinition.forEach(function(b){b.dimensionName===e&&(b.isSlice=1===g.length,b.values=1===g.length?g:[g])}):d||(b.multidimensionalDefinition.some(function(b){return null!=b.variableName&&
null==b.dimensionName})?b.multidimensionalDefinition.forEach(function(b){null!=b.variableName&&null==b.dimensionName&&(b.dimensionName=e,b.isSlice=1===g.length,b.values=1===g.length?g:[g])}):b.multidimensionalDefinition.push(new C({variableName:"",dimensionName:e,isSlice:1===g.length,values:1===g.length?g:[g]})));this._cleanupMultidimensionalDefinition(b)}return b},_prepareGetImageParameters:function(b,c,d,e){e=r.isDefined(e)?e:this._params;if(this.renderer||this._hasItemLevelRFT&&this.renderingRule){var f=
this.getExportImageRenderingRule();e.renderingRule=f?k.toJson(f.toJson()):null}f=this.getExportImageMosaicRule(e);e.mosaicRule=f?k.toJson(f.toJson()):null;f=b.spatialReference.wkid||k.toJson(b.spatialReference.toJson(!1));delete e._ts;p.mixin(e,{bbox:b.xmin+","+b.ymin+","+b.xmax+","+b.ymax,imageSR:f,bboxSR:f,size:c+","+d},this.disableClientCaching?{_ts:(new Date).getTime()}:{});delete e.compressionTolerance;e.format&&"LERC"===e.format.toUpperCase()&&(e.compressionTolerance=this.compressionTolerance);
e.token=this._getToken()},getImageUrl:function(b,c,f,g,h){h=r.isDefined(h)?h:this._params;this._prepareGetImageParameters(b,c,f,h);b=p.clone(h);this._cleanupRequestParams(b);c=this._url.path+"/exportImage?";f=t.addProxy(c+e.objectToQuery(p.mixin(b,{f:"image"})));var k=b.token;f.length>d.defaults.io.postLength||this.useMapImage?this._jsonRequest=v({url:c,content:p.mixin(b,{f:"json"}),callbackParamName:"callback",load:function(b,c){b=b.href;k&&(b+=-1===b.indexOf("?")?"?token\x3d"+k:"\x26token\x3d"+
k);g(t.addProxy(b))},error:this._errorHandler}):g(f)},onRenderingChange:function(){},onMosaicRuleChange:function(){},onRendererChange:function(){},setInterpolation:function(b,c){this.interpolation=this._params.interpolation=b;c||this.refresh(!0)},setCompressionQuality:function(b,c){this.compressionQuality=this._params.compressionQuality=b;c||this.refresh(!0)},setCompressionTolerance:function(b,c){this.compressionTolerance=b;c||this.refresh(!0)},setBandIds:function(b,c){var d=!1;this.bandIds!==b&&
(d=!0);this.bandIds=b;this._params.bandIds=b.join(",");if(d&&!c)this.onRenderingChange();c||this.refresh(!0)},setDefaultBandIds:function(b){this.bandIds=this._params.bandIds=null;b||this.refresh(!0)},setDisableClientCaching:function(b){this.disableClientCaching=b},setMosaicRule:function(b,c){var d=!1;this.mosaicRule!==b&&(d=!0);this.mosaicRule=b;this._params.mosaicRule=k.toJson(b.toJson());if(d&&!c)this.onMosaicRuleChange();c||this.refresh(!0)},getRasterFunctionInfos:function(){if(!(10.3>this.version)&&
this.rasterFunctionInfos&&this.rasterFunctionInfos.length)return v({url:this._url.path+"/rasterFunctionInfos",content:{f:"json"},handleAs:"json",load:function(b){return b&&b.rasterFunctionInfos}})},setRenderingRule:function(b,c){var d=!1;this.renderingRule!==b&&(d=!0);this.renderingRule=b;this._params.renderingRule=b?k.toJson(b.toJson()):null;this._useRenderingRuleAttributeTable?this.getRenderingRuleAttributeTable({renderingRule:b}):"esri.layers.RasterXLayer"!==this.declaredClass&&this._getRenderingRuleAttributeTableAndColormap();
if(d)this.onRenderingChange();this._setDefaultFilter();c||this.refresh(!0)},setImageFormat:function(b,c){this.format=this._params.format=b;this._setDefaultFilter();c||this.refresh(!0)},setInfoTemplate:function(b){this.infoTemplate=b;this._updateInfoTemplateFields(this.fields)},setDefinitionExpression:function(b,c){var d=this.mosaicRule?this.mosaicRule.toJson():{};this.mosaicRule||(this.defaultMosaicRule?d=this.defaultMosaicRule.toJson():d.method=B.METHOD_NONE);d.where=b;b=new B(d);this.setMosaicRule(b,
c);return this},getDefinitionExpression:function(){return this.mosaicRule?this.mosaicRule.where:null},setPixelFilter:function(b){this.pixelFilter=b;this._isDefaultPixelFilter=!1},getPixelData:function(b){return b?(this._useBrowserDecoding()&&(this.originalPixelData={pixelBlock:this._getPixelBlockFromCanvas(this._context,this._map.width,this._map.height),extent:this._map.extent}),this.originalPixelData):this.pixelData},getExportImageRenderingRule:function(){var b;this._hasItemLevelRFT&&this.renderingRule&&
(b=this._getServiceLevelRenderingRule(this.renderingRule));b=b||this.renderingRule;this._isItemLevelRasterFunction(this.renderingRule)&&(b=void 0);return this._combineRenderingRule(this._convertRendererToRenderingRule(this.renderer),b)},getExportImageMosaicRule:function(){var b=this.mosaicRule,c;this._hasItemLevelRFT&&this.renderingRule&&(c=this._getItemLevelRenderingRule(this.renderingRule));c&&(b=b||this.defaultMosaicRule||new B,b.itemRenderingRule=c);return b=this._applyTimeToMultidimensionalCRF(b)},
redraw:function(){this.hasDataChanged=!1;this._setPixelData(this.originalPixelData)},getHistograms:function(){var b=new f(u._dfdCanceller);if(this.hasHistograms)b._pendingDfd=v({url:this._url.path+"/histograms",content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),b._pendingDfd.then(function(c){b.callback(c)},function(c){b.errback(c)});else{var c=Error("Layer does not have histograms.");c.log=!!h.isDebug;b.errback(c)}return b},computeHistograms:function(b){var c=new f(u._dfdCanceller);
if(10.1<=this.currentVersion){b=b||{};var d=b.geometry||this.fullExtent,e=(b.geometry||this.fullExtent).toJson(),d="extent"===d.type?"esriGeometryEnvelope":"esriGeometryPolygon",g=b.renderingRule||this.renderingRule||this.defaultRenderingRule,g=g?g.toJson():null,k=b.mosaicRule||this.mosaicRule||this.defaultMosaicRule,k=k?k.toJson():null;b=b.pixelSize||{x:this.pixelSizeX,y:this.pixelSizeY};c._pendingDfd=v({url:this._url.path+"/computeHistograms",content:p.mixin({f:"json",geometry:JSON.stringify(e),
geometryType:d,renderingRule:JSON.stringify(g),mosaicRule:JSON.stringify(k),pixelSize:JSON.stringify(b),callbackParamName:"callback"}),handleAs:"json"});c._pendingDfd.then(function(b){c.callback(b)},function(b){c.errback(b)})}else e=Error("Layer doesn't support computeHistograms."),e.log=!!h.isDebug,c.errback(e);return c},getRenderingRuleServiceInfo:function(b,c){function d(b){return b.name&&b.arguments&&b.function&&b.hasOwnProperty("functionType")}var e=new u._fixDfd(new f(u._dfdCanceller));if(!b)return e.errback(Error("Rendering rule is not specified")),
e;if(!d(b)){var g=this._getRenderingRuleId(b);if(g&&this._rasterFunctionTemplateInfos[g])return e.resolve(this._rasterFunctionTemplateInfos[g]),e}return v({url:this._url.path,content:p.mixin(p.mixin({f:"json",renderingRule:JSON.stringify(b.toJson())},this._url.query)),callbackParamName:"callback",load:p.hitch(this,function(c){var e={};l.forEach(this._rasterFunctionServiceInfoProps,function(b){e[b]=c[b]});d(b)||(this._rasterFunctionTemplateInfos[g]=e);return e}),error:c||this._errorHandler})},queryVisibleRasters:function(b,
c,d,e){var g=this._map,h=u._fixDfd(new f(u._dfdCanceller));this._visibleRasters=[];var k,m,q=!0,r=!0,t=null,v=this.infoTemplate?this.infoTemplate.info:null,x=v?p.clone(this.infoTemplate.info.fieldInfos):null;c=c||{};if(v&&this.infoTemplate.info.mediaInfos&&this.infoTemplate.info.mediaInfos.length){var y=[];l.forEach(this.infoTemplate.info.mediaInfos,function(b){y=y.concat(b&&b.value&&b.value.fields||[])});y.length&&l.forEach(x,function(b){b&&-1<y.indexOf(b.fieldName)&&(b.visible=!0)})}if(x&&0<x.length)for(q=
!1,k=0;k<x.length;k++)if((m=x[k])&&m.fieldName.toLowerCase()!==this._rasterFieldPrefix.toLowerCase()+"servicepixelvalue"&&(m.visible||v.title&&-1<v.title.toLowerCase().indexOf(m.fieldName.toLowerCase()))){q=!0;break}this.infoTemplate&&this.infoTemplate.info&&this.infoTemplate.info.layerOptions&&this.infoTemplate.info.layerOptions.hasOwnProperty("returnTopmostRaster")&&(t=this.infoTemplate.info.layerOptions.returnTopmostRaster?1:null);x&&0<x.length&&(r=!1,l.some(x,function(b){if(b&&b.fieldName.toLowerCase()===
this._rasterFieldPrefix.toLowerCase()+"itempixelvalue"&&b.visible)return r=!0},this));var C=(m=this._removeVisualizationStretchFunction(this.renderingRule))&&m.functionName,z=[];if(10.4<=this.version){var F=!1;if(this.rasterFunctionInfos&&x){var H=this._rasterFieldPrefix+this._renderingRuleFieldSubPrefix;l.forEach(this.rasterFunctionInfos,function(b){var c=H+b.name.replace(/ /gi,"_");l.some(x,function(b){return b.visible&&b.fieldName===c})&&(F=F||C&&C===b.name,z.push(new A({rasterFunction:b.name})))})}m&&
!F&&z.push(m)}k=new O;k.geometry=b.geometry;k.returnGeometry=this._map.spatialReference.equals(this.spatialReference);k.returnCatalogItems=q;k.timeExtent=this.timeInfo?b.timeExtent:null;k.returnPixelValues=r;k.maxItemCount=t||b.maxItemCount;this._params.time&&this.mosaicRule?(b=p.clone(this.mosaicRule),b=this._filterOutTimeDimension(b),k.mosaicRule=b):k.mosaicRule=this.mosaicRule||null;this._isMultidimensionalCRF()&&k.timeExtent&&(k.mosaicRule=this._applyTimeToMultidimensionalCRF(k.mosaicRule,k.timeExtent.toJson().join(",")),
this._isTimeSupportedOnCRF()||delete k.timeExtent);k.renderingRule=10.4>this.version&&m||null;k.renderingRules=z||null;10.8>this.version&&(k.returnPixelValues=void 0,k.maxItemCount=void 0);g&&(g=new w((g.extent.xmax-g.extent.xmin)/g.width,(g.extent.ymax-g.extent.ymin)/g.height,g.extent.spatialReference),k.pixelSize=g);c.requestParams=k;var E=this,g=new Q(this.url);(h._pendingDfd=g.execute(k)).addCallbacks(function(b){E._queryVisibleRastersHandler(b,c,d,e,h)},function(b){E._resolve([b],null,e,h,!0)});
return h},_queryVisibleRastersHandler:function(b,c,d,e,f){function g(){var b=this.getCustomRasterFields(c),e=this._getDomainFields(b),g=c?c.returnDomainValues:!1,k=c&&c.rasterAttributeTableFieldPrefix,t,v,w,y,C,A,z,F,D,G,b=(b=this._getRenderingRuleId(this.renderingRule))&&this._rasterFunctionTemplateInfos[b];this.renderingRule&&(this._useRenderingRuleAttributeTable||b)?(b=this._getRenderingRuleAttributeTableFeatures({renderingRule:this.renderingRule}),this.hasRasterAttributeTable||(G=h)):b=this._getRasterAttributeTableFeatures();
b.then(p.hitch(this,function(b){for(t=0;t<u.length;t++){K=u[t];K.setInfoTemplate(this.infoTemplate);K._layer=this;if(h){D=h.replace(/ /gi,"").split(",");v=h;w=D;q&&q.length>=t&&(v=q[t].replace(/ /gi,", "),w=q[t].split(" "));K.attributes[this._rasterFieldPrefix+"ItemPixelValue"]=w;K.attributes[this._rasterFieldPrefix+"ServicePixelValue"]=D;m&&(K.attributes[this._rasterFieldPrefix+"ServicePixelValue.Raw"]=m.replace(/ /gi,"").split(","));if(this.pixelFilter){var c=new E({height:1,width:1,pixelType:"F32",
pixels:[],statistics:[]});l.forEach(w,function(b){c.addData({pixels:[b],statistics:{minValue:b,maxValue:b,noDataValue:null}})});this.pixelFilter({pixelBlock:c,extent:new x(0,0,0,0,this._map.spatialReference)});if("esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType)K.attributes[this._rasterFieldPrefix+"Magnitude"]=c.pixels[0][0],K.attributes[this._rasterFieldPrefix+"Direction"]=c.pixels[1][0]}l.forEach(H,function(b){K.attributes[b.name]=
b.value});var B;B=0<this.fields.length?G||v:G||m;if(b&&0<b.length&&(y=l.filter(b,function(b){if(b&&b.attributes)return b.attributes.hasOwnProperty("Value")?b.attributes.Value==B:b.attributes.VALUE==B}),0<y.length&&(C=p.clone(y[0]),k&&C))){F={};for(A in C.attributes)C.attributes.hasOwnProperty(A)&&(z=k+A,F[z]=C.attributes[A]);C.attributes=F;K.attributes=p.mixin(K.attributes,C.attributes)}}g&&e&&0<e.length&&l.forEach(e,function(b){if(b){var c=K.attributes[b.name];r.isDefined(c)&&(c=this._getDomainValue(b.domain,
c),r.isDefined(c)&&(K.attributes[b.name]=c))}},this);Q.push(K);this._visibleRasters.push(K)}this._resolve([Q,null,!0],null,d,f)}))}var h=b.value,m=b.value,q,u,t=0,w=0,A=this,C=this.objectIdField,z,F,H=[];e=c.requestParams.renderingRules;var D=b.processedValues,G=this.renderingRule&&k.toJson(this._removeVisualizationStretchFunction(this.renderingRule).toJson());if(e&&D&&e.length===D.length){var B=this._rasterFieldPrefix+this._renderingRuleFieldSubPrefix;l.forEach(e,function(b,c){if(b.functionName){var d=
{name:B+b.functionName.replace(/ /gi,"_"),value:D[c].replace(/ /gi,"").split(",")};H.push(d);G&&G===k.toJson(b.toJson())&&(h=D[c])}})}e=this.infoTemplate&&this.infoTemplate.info&&this.infoTemplate.info.layerOptions&&this.infoTemplate.info.layerOptions.hasOwnProperty("showNoDataRecords")?this.infoTemplate.info.layerOptions.showNoDataRecords:!0;if(b.catalogItems){var I=0,N,M,J=b.catalogItems.features.length;F=0;u=Array(J);q=Array(J);z=Array(J);if(b.properties&&b.properties.Values){J=b.properties.Values.length;
for(t=0;t<J;t++)-1<b.properties.Values[t].toLowerCase().indexOf("nodata")&&F++;N=J-F;for(t=0;t<J;t++)F=!0,-1<b.properties.Values[t].toLowerCase().indexOf("nodata")?(M=N++,e||(F=!1,u.length--,q.length--,z.length--)):M=I++,F&&(u[M]=b.catalogItems.features[t],q[M]=b.properties.Values[t],z[M]=u[M].attributes[C])}else{for(t=0;t<J;t++)u[t]=b.catalogItems.features[t],z[t]=u[t].attributes[C];q=null}}this._visibleRasters=[];var K;(b=-1<h.toLowerCase().indexOf("nodata"))&&!e&&(u=[],q=[],z=[]);!h||u||b||(C=
"ObjectId",u=[],K=new P(new x(this.fullExtent),null,{ObjectId:0}),u.push(K));var Q=[];u?!this._map.spatialReference.equals(this.spatialReference)&&z&&0<z.length?v({url:this._url.path+"/query",content:{f:"json",objectIds:z.join(","),returnGeometry:!0,outSR:k.toJson(A._map.spatialReference.toJson()),outFields:C},handleAs:"json",callbackParamName:"callback",load:function(b){if(0===b.features.length)A._resolve([Q,null,null],null,d,f);else{for(t=0;t<b.features.length;t++)for(w=0;w<u.length;w++)u[w].attributes[C]==
b.features[t].attributes[C]&&(u[w].geometry=new y(b.features[t].geometry),u[w].geometry.setSpatialReference(A._map.spatialReference));g.call(A)}},error:function(b){A._resolve([Q,null,null],null,d,f)}}):g.call(this):this._resolve([Q,null,null],null,d,f)},getVisibleRasters:function(){var b=this._visibleRasters,c=[],d;for(d in b)b.hasOwnProperty(d)&&c.push(b[d]);return c},_getDomainFields:function(b){if(b){var c=[];l.forEach(b,function(b){if(b.domain){var d={};d.name=b.name;d.domain=b.domain;c.push(d)}});
return c}},_getDomainValue:function(b,c){if(b&&b.codedValues){var d;l.some(b.codedValues,function(b){return b.code===c?(d=b.name,!0):!1});return d}},_requestData:function(b,c,d){this._rasterReadPromise&&this._rasterReadPromise.cancel();b=p.clone(b);var e=b._normalize(!0);this._prepareGetImageParameters(e,c,d);c=p.clone(this._params);this._cleanupRequestParams(c);c.extent=b;c.format=c.format||(10.3<=this.version?"lerc":"jpgpng");"lerc"===c.format.toLowerCase()&&!c.lercVersion&&10.5<=this.version&&
(c.lercVersion=2);this._params.time&&this._isMultidimensionalCRF()&&!this._isTimeSupportedOnCRF()&&delete c.time;d=null;this._useBrowserDecoding()&&(d=new D({ctx:this._context}));c={imageServiceParameters:c,nBands:Math.min(this.bandCount,3),pixelType:this.pixelType,decodeFunc:d?p.hitch(d,"decode"):null};this._rasterReadPromise=this.raster.read(c,this._requestDataHandler,this._requestDataErrorHandler)},_requestDataHandler:function(b){this._rasterReadPromise&&this._rasterReadPromise.isCanceled()||(this.originalPixelData=
b,this.hasDataChanged=!0,this._setPixelData(b))},_setPixelData:function(b){b=this._clonePixelData(b);this.pixelFilter&&this.pixelFilter(b);this.pixelData=b;this._rasterReadPromise&&this._rasterReadPromise.isCanceled()||(this._drawPixelData(),this._rasterReadPromise=null)},_clonePixelData:function(b){if(null===b||void 0===b)return b;var c={};b.extent&&(c.extent=p.clone(b.extent));b=b.pixelBlock;if(null===b||void 0===b)return c;c.pixelBlock=b.clone();return c},_setDefaultFilter:function(){},_getPixelBlockFromCanvas:function(b,
c,d){b=b.getImageData(0,0,c,d).data;for(var e=c*d,f=0,g=0,h=new Uint8Array(e),k=new Uint8Array(e),l=new Uint8Array(e),m=new Uint8Array(e),q=Infinity,r=Infinity,p=Infinity,u=-Infinity,t=-Infinity,v=-Infinity,w,x,y,f=0;f<e;f++)w=b[g++],x=b[g++],y=b[g++],q=q<w?q:w,u=u>w?u:w,r=r<x?r:x,t=t>x?t:x,p=p<y?p:y,v=v>y?v:y,h[f]=w,k[f]=x,l[f]=y,m[f]=b[g++]&1;return new E({width:c,height:d,pixels:[h,k,l],pixelType:"U8",mask:m,statistics:[{minValue:q,maxValue:u},{minValue:r,maxValue:t},{minValue:p,maxValue:v}]})},
_useBrowserDecoding:function(){return(void 0===this.pixelFilter||null===this.pixelFilter)&&("jpeg"===this.format.toLowerCase()||"jpg"===this.format.toLowerCase()||-1<this.format.toLowerCase().indexOf("png"))},getMultidimensionalInfo:function(){var b=this._url.path+"/multiDimensionalInfo",c=new f(u._dfdCanceller);if(this._multidimensionalInfo)return c.resolve(this._multidimensionalInfo),c;!this.loaded||10.3<=this.version&&this.hasMultidimensions?(c._pendingDfd=v({url:b,content:{f:"json"},handleAs:"json",
callbackParamName:"callback"}),c._pendingDfd.then(p.hitch(this,function(b){this._multidimensionalInfo=b.multidimensionalInfo;c.callback(b.multidimensionalInfo)}),function(b){c.errback(b)})):(b=Error("Layer does not support multidimensional info"),b.log=!!h.isDebug,c.errback(b));return c},getVariableStats:function(b){var c=new f,d=p.clone(this.url);if(this._cachedVariableStats[b])c.resolve(this._cachedVariableStats[b]);else{var e=this.url.indexOf("?token");-1<e&&(d=d.substring(0,e));v({url:d+"/statistics",
content:{f:"json",variable:b},handleAs:"json",callbackParamName:"callback",load:p.hitch(this,function(d){this._cachedVariableStats[b]=d.statistics;c.resolve(d.statistics)}),error:function(b){c.reject(b)}})}return c},getDefaultMultidimensionalDefinition:function(){var b=new f(u._dfdCanceller);if(this._defaultMultidimensionalDefinition)return b.resolve(p.clone(this._defaultMultidimensionalDefinition)),b;b._pendingDfd=this.getMultidimensionalInfo();b._pendingDfd.then(p.hitch(this,function(c){c=this._getDefaultMultidimensionalDefinition(c);
b.callback(c)}),function(c){b.errback(c)});return b},_getDefaultMultidimensionalDefinition:function(b,c,d){var e,f=[],g="",h=b.variables[0].dimensions;d&&(g=b.variables[0].name);for(e in h)h.hasOwnProperty(e)&&(c||"StdTime"!==h[e].name)&&(b=h[e],f.push(new C({variableName:g,dimensionName:b.name,isSlice:!b.hasRanges,values:[this._getDefaultDimensionValue(b)]})));this._defaultMultidimensionalDefinition=f;return p.clone(f)},_getDefaultDimensionValue:function(b){if(b&&b.values&&b.values.length){var c,
d,e=Infinity,f,g;if(b.hasRanges)return b.values[0];if(b.name&&"stdz"===b.name.toLowerCase()){for(g=0;g<b.values.length&&(f=b.values[g],d=Math.abs(f-0),d<e&&(e=d,c=f),0!==d);g++);return c}return b.extent[0]}},_setDefaultMultidimensionalDefinition:function(b){var c,d={};this.getDefaultMultidimensionalDefinition().then(p.hitch(this,function(e){c=e;0<c.length&&(this.mosaicRule?(d=p.clone(this.mosaicRule),d.multidimensionalDefinition=c):this.defaultMosaicRule?(d=p.clone(this.defaultMosaicRule),d.multidimensionalDefinition=
c):d=new B({multidimensionalDefinition:c}),this.setMosaicRule(d,b))}))},_setDefaultRenderingRule:function(b){var c={},d=this.renderingRule;if(!d&&"esri.layers.ArcGISImageServiceVectorLayer"!==this.declaredClass&&!this.bandIds&&this.rasterFunctionInfos&&this.rasterFunctionInfos.length&&"none"!==this.rasterFunctionInfos[0].name.toLowerCase())c.rasterFunction=this.rasterFunctionInfos[0].name;else if("esri.layers.ArcGISImageServiceVectorLayer"===this.declaredClass&&10.3<this.version&&(!d||"Resample"!==
d.functionName)){var e="esriImageServiceDataTypeVector-UV"===this.serviceDataType?7:10;c.rasterFunction="Resample";c.rasterFunctionArguments={ResamplingType:e,InputCellSize:{x:this.pixelSizeX,y:this.pixelSizeY}};d&&(c.rasterFunctionArguments.Raster=d.toJson())}c.hasOwnProperty("rasterFunction")&&(this.defaultRenderingRule=new A(c),this.setRenderingRule(this.defaultRenderingRule,b))},_cleanupRequestParams:function(b){if(!b)return b;if(b.time&&b.mosaicRule){var c=new B(k.fromJson(b.mosaicRule)),c=this._filterOutTimeDimension(c);
b.mosaicRule=k.toJson(c.toJson())}var c="displayOnPan drawMode styling id opacity visible resourceInfo useMapDimensionValue extent renderer".split(" "),d;for(d in c)b.hasOwnProperty(c[d])&&delete b[c[d]];return b},_filterOutTimeDimension:function(b){if(this._isMultidimensionalCRF())return b;if(b&&b.multidimensionalDefinition&&0<b.multidimensionalDefinition.length){var c=l.filter(b.multidimensionalDefinition,function(b){return"StdTime"!==b.dimensionName});b.multidimensionalDefinition=c}return b},_removeVisualizationStretchFunction:function(b){var c=
b&&b.functionName;if(!c||"stretch"!==c.toLowerCase())return b;var d=b.functionArguments.Raster;return d&&d.functionName&&l.some(this.rasterFunctionInfos,function(b){return d.functionName===b.name})?d:b},_isMultidimensionalCRF:function(){return 10.71<=this.version&&this.hasMultidimensions&&this.timeInfo&&!(this.objectIdField&&this.fields&&1<this.fields.length)},_isTimeSupportedOnCRF:function(){return 10.8<=this.version},_cleanupMultidimensionalDefinition:function(b){b&&b.multidimensionalDefinition&&
(b.multidimensionalDefinition=b.multidimensionalDefinition.filter(function(b){return!(!b.variableName&&!b.dimensionName)}),0===b.multidimensionalDefinition.length&&(b.multidimensionalDefinition=null))},_isScientificData:function(){return"esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType||"esriImageServiceDataTypeScientific"===this.serviceDataType},_isVectorData:function(b){b=(b=b||this)&&b.serviceDataType;return"esriImageServiceDataTypeVector-UV"===
b||"esriImageServiceDataTypeVector-MagDir"===b},_isRenderingRuleAProcessingTemplate:function(b){var c=b&&b.functionName;return!c||b.functionArguments?!1:l.some(c&&(this.rasterFunctionInfos||[]),function(b){return b&&b.name&&b.name.toLowerCase()===c.toLowerCase()})},_getRenderingRuleId:function(b){var c=b&&b.functionName;if(c){if(this._isRenderingRuleAProcessingTemplate(b))return c;var d=this._customRenderingRuleId[c];if(d){if(d!==b){for(var e in this._customRenderingRuleId)if(this._customRenderingRuleId[e]===
b)return e;for(d=0;this._customRenderingRuleId[f];)d+=1;var f;this._customRenderingRuleId[c+d]=b}}else this._customRenderingRuleId[c]=b;return c}},_createPixelData:function(b){b=new E({width:2,height:2,pixels:b,pixelType:this.pixelType,statistics:b});var c=this.fullExtent.getCenter(),c=new x(c.x,c.y,c.x+this.pixelSizeX,c.y+this.pixelSizeY,this.spatialReference);return{pixelBlock:b,extent:c}},_convertRendererToRenderingRule:function(b){var c=b&&b.declaredClass;if(!c||"esri.renderer.UniqueValueRenderer"!==
c&&"esri.renderer.ClassBreaksRenderer"!==c&&"esri.renderer.StretchRenderer"!==c&&"esri.renderer.ShadedReliefRenderer"!==c&&"esri.renderer.ColormapRenderer"!==c)return null;var d=null;"esri.renderer.StretchRenderer"===c?d=b.toRenderingRule({convertToColormap:10.6>this.version}):"esri.renderer.ClassBreaksRenderer"===c?d=this._convertClassifyRenderer(b):"esri.renderer.UniqueValueRenderer"===c?d=this._convertUniqueValueRenderer(b):"esri.renderer.ShadedReliefRenderer"===c?d=this._convertShadedReliefRenderer(b):
"esri.renderer.ColormapRenderer"===c&&(d=this._convertColormapRenderer(b));return d},_getValueField:function(b){if(b&&b.length){var c,d;l.some(b,function(b){if((d=b.name)&&"value"===d.toLowerCase())return c=d,!0});return c}},_convertColormapRenderer:function(b){var c=new A;c.functionName="Colormap";c.functionArguments={};b=b.colormapInfos.map(function(b){return[b.value].concat(b.color)});c.functionArguments.Colormap=b;return c},_convertShadedReliefRenderer:function(b){var c=new A;c.functionName="Hillshade";
var d="traditional"===b.hillshadeType?0:1,e="none"===b.scalingType?1:3,f={HillshadeType:d,SlopeType:e,ZFactor:b.zFactor};0===d&&(f.Azimuth=b.azimuth,f.Altitude=b.altitude);3===e&&(f.PSPower=b.pixelSizePower,f.PSZFactor=b.pixelSizeFactor);c.functionArguments=f;c.variableName="Raster";b.colorRamp&&(c.functionName="ShadedRelief",f.Colormap=z.convertColorRampToColormap(b.colorRamp,256));return c},_convertClassifyRenderer:function(b){var c,d=[],e=[],f=[],g=[],h;c=this.renderingRule&&this._getRenderingRuleId(this.renderingRule);
var k,m,q=this.hasRasterAttributeTable,r,p;c&&(q=this._rasterFunctionTemplateInfos[c]?this._rasterFunctionTemplateInfos[c].hasRasterAttributeTable:this.hasRasterAttributeTable,m=this._renderingRuleAttributeTable[c],p=this._rasterFunctionTemplateInfos[c]);k=m&&m.features?m.features:this._rasterAttributeTableFeatures;r=this._getValueField(m&&m.fields?m.fields:this._rasterAttributeTableFields);q&&k?(l.forEach(b.infos,function(c,d){var e,f=c.symbol.color;f.a&&l.forEach(k,function(h){e=h.attributes[b.attributeField];
(e>=c.minValue&&e<c.maxValue||d===b.infos.length-1&&e>=c.minValue)&&g.push([h.attributes[r],f.r,f.g,f.b])},this)},this),c=p&&p.pixelType||this.pixelType,this._adjustColormapToPixelTypeRange(g,c),c=new A,c.functionName="Colormap",c.functionArguments={},c.functionArguments.Colormap=g,c.variableName="Raster"):(l.forEach(b.infos,function(b,c){h=b.symbol&&b.symbol.color;h.a?(0===c?d.push.call(d,b.minValue,b.maxValue+1E-4):d.push.call(d,b.minValue+1E-4,b.maxValue+1E-4),e.push(c),g.push([c,h.r,h.g,h.b])):
f.push(b.minValue,b.maxValue)}),c=p&&p.pixelType||this.pixelType,this._adjustColormapToPixelTypeRange(g,c),c=new A,c.functionName="Remap",c.functionArguments={InputRanges:d,OutputValues:e,NoDataRanges:f},c.variableName="Raster",m=new A,m.functionName="Colormap",m.functionArguments={Colormap:g,Raster:c},c=m);return c},_convertUniqueValueRenderer:function(b){var c=[],d=this.renderingRule&&this._getRenderingRuleId(this.renderingRule),e,f,g,h;d&&(f=this._renderingRuleAttributeTable[d],h=this._rasterFunctionTemplateInfos[d]);
e=f&&f.features?f.features:this._rasterAttributeTableFeatures;g=(d=f&&f.fields?f.fields:this._rasterAttributeTableFields)&&d.length?this._getValueField(d):"Value";l.forEach(b.infos,function(d){var f=d.symbol.color;f.a&&(b.attributeField!==g&&e?l.forEach(e,function(e){e.attributes[b.attributeField]==d.value&&c.push([e.attributes[g],f.r,f.g,f.b])},this):c.push([d.value,f.r,f.g,f.b]))},this);this._adjustColormapToPixelTypeRange(c,h&&h.pixelType||this.pixelType);h=new A;h.functionName="Colormap";h.functionArguments=
{};h.functionArguments.Colormap=c;h.variableName="Raster";return h},_adjustColormapToPixelTypeRange:function(b,c){(c=this._pixelTypeRanges[c])&&b.push([Math.floor(c[0]-1),0,0,0],[Math.ceil(c[1]+1),0,0,0]);return b},_combineRenderingRule:function(b,c){if(!b||!c)return b||c;var d=function(b){var c=b.Raster;return c=c&&"esri.layers.RasterFunction"===c.declaredClass?d(c.functionArguments):b};b=p.clone(b);"none"!==c.functionName.toLocaleLowerCase()&&(d(b.functionArguments).Raster=c);return b},_isItemLevelRasterFunction:function(b){var c=
b&&b.functionName;if(!c||!this._hasItemLevelRFT)return!1;var d=!1;l.some(this.rasterFunctionInfos,function(b){if(b&&b.name===c){if(1===b.functionType||2===b.functionType)d=!0;return!0}});return d},_getServiceLevelRenderingRule:function(b){if(!this._hasItemLevelRFT||!b)return b;b=new A(b.toJson());var c;c=b.functionArguments;for(var d;;)if((d=c&&c.Raster)&&d.functionArguments&&d.functionArguments.Raster)c=d,c=c.functionArguments;else{this._isItemLevelRasterFunction(d)&&delete c.Raster;break}return b},
_getItemLevelRenderingRule:function(b){if(!this._hasItemLevelRFT||!b)return null;if(this._isItemLevelRasterFunction(b))return b;b=new A(b.toJson());for(b=b.functionArguments;;)if((b=b&&b.Raster)&&b.functionArguments&&b.functionArguments.Raster)b=b.functionArguments;else{if(this._isItemLevelRasterFunction(b))return b;break}},_resolve:function(b,c,d,e,f){c&&this[c].apply(this,b);d&&d.apply(null,b);e&&u._resDfd(e,b,f)},_toggleTime:function(){var b=this._map;this.timeInfo&&this.useMapTime&&b&&!this.suspended?
(this._timeConnect||(this._timeConnect=q.connect(b,"onTimeExtentChange",this,this._onTimeExtentChangeHandler)),this._setTime(b.timeExtent)):(q.disconnect(this._timeConnect),this._timeConnect=null,this._setTime(null))},setUseMapTime:function(b,c){this.useMapTime=b;this._toggleTime();!c&&this._map&&this.refresh(!0)},_setTime:function(b){this._params&&(this._params.time=b?b.toJson().join(","):null)},_onTimeExtentChangeHandler:function(b){this.suspended||(this._setTime(b),this.refresh(!0))},handleSpatialReferenceChange:function(){this.onSpatialReferenceChange()},
getColormap:function(b){var c=this._url.path+"/colormap",d=new f(u._dfdCanceller),e={f:"json"};b&&b.renderingRule&&(e.renderingRule=k.toJson(b.renderingRule.toJson()));this.hasColormap?(d._pendingDfd=v({url:c,content:e,handleAs:"json",callbackParamName:"callback"}),d._pendingDfd.then(function(b){d.callback(b)},function(b){d.errback(b)})):(b=Error("Layer does not support colormap"),b.log=!!h.isDebug,d.errback(b));return d},getRenderingRuleColormap:function(b){var c=new f(u._dfdCanceller);if(!b||!b.renderingRule)return c.errback(Error("Rendering rule is not specified")),
c;b=b.renderingRule;var d=this._getRenderingRuleId(b);this._renderingRuleColormap&&d&&this._renderingRuleColormap.hasOwnProperty(d)?c.resolve(this._renderingRuleColormap[d]):c=this.getColormap({renderingRule:b}).then(p.hitch(this,function(b){b=b&&b.colormap;d&&(this._renderingRuleColormap[d]=b);return b}));return c}});g("extend-esri")&&p.setObject("layers.ImageServiceLayerMixin",m,b);return m})},"esri/layers/DimensionalDefinition":function(){define("esri/layers/DimensionalDefinition",["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel","../lang"],function(m,p,f,l,k){m=m(null,{declaredClass:"esri.layers.DimensionalDefinition",variableName:null,dimensionName:null,values:[],isSlice:!1,constructor:function(f){p.isObject(f)&&p.mixin(this,f)},toJson:function(){var f={variableName:this.variableName,dimensionName:this.dimensionName,values:p.clone(this.values),isSlice:this.isSlice};return k.filter(f,function(f){return null!==f})}});f("extend-esri")&&p.setObject("layers.DimensionalDefinition",m,l);
return m})},"esri/layers/Raster":function(){define("esri/layers/Raster","require dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/_base/array dojo/_base/config dojo/json dojo/sniff ../kernel ../Evented ../request ../geometry/Extent ../SpatialReference ../deferredUtils ./PixelBlock ./rasterFormats/LercCodec ./rasterFormats/Lerc2Codec".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x){var w,y,z,B,A,C;p=p(c,{declaredClass:"esri.layers.Raster",imageServiceUrl:null,validPixelTypes:"U1 U2 U4 U8 U16 U32 S8 S16 S32 F32".split(" "),
validFormats:"lerc jpeg jpg jpgpng png png8 png24 png32 bip bsq tiff".split(" "),_eventMap:{"raster-read-complete":["pixelData","params"]},constructor:function(b){this.imageServiceUrl=b;this.registerConnectEvents();this._loadRasterFormatModules()},read:function(c,d,e){var h=this,m=new l(v._dfdCanceller);if(10>g("ie"))throw"This browser is not supported.";if(!c.imageServiceParameters)throw"Insufficient parameters to read data";var q=f.clone(c.imageServiceParameters),r=c.pixelType;k.some(this.validPixelTypes,
function(b){return b===r})||(q.pixelType="F32");k.some(this.validFormats,function(b){return b.toLowerCase()===q.format.toLowerCase()})||(q.format="lerc");var p=c.decodeFunc,u;this._prepareGetImageParameters(q);var t=q.width,w=q.height,x=q.extent;delete q.width;delete q.height;delete q.extent;m._pendingDfd=b({url:this.imageServiceUrl+"/exportImage",handleAs:"arraybuffer",content:f.mixin(q,{f:"image"}),load:function(b){h.decode(b,{width:t,height:w,planes:null,pixelType:r,noDataValue:q.noData,format:q.format,
decodeFunc:p}).then(function(b){u={pixelBlock:b,extent:x};h._resolve([u,q],"onRasterReadComplete",d,m)},function(b){h._resolve([b],null,e,m,!0)})},error:function(b){h._resolve([b],null,e,m,!0)}});return m.promise},decode:function(b,c){if(void 0===c||null===c)throw"missing decode options";var d,e;c.format&&(d=c.format.toUpperCase());"BSQ"!==d&&"BIP"!==d&&(d=this._getFormat(b));e=c.decodeFunc;if(void 0===e||null===e)e=this._getFormatDecoderDfd(d);return e(b,c)},onRasterReadComplete:function(){},_prepareGetImageParameters:function(b){if(b.size&&
b.bbox){var c=b.size.split(",");b.width=parseFloat(c[0]);b.height=parseFloat(c[1]);b.extent||(c=b.bbox.split(","),b.extent=new d(parseFloat(c[0]),parseFloat(c[1]),parseFloat(c[2]),parseFloat(c[3]),new r(b.bboxSR)))}else{if(!b.width||Math.floor(b.width)!==b.width||!b.height||Math.floor(b.height)!==b.height)throw"Incorrect Image Dimensions";if(!b.extent||"esri.geometry.Extent"!==b.extent.declaredClass)throw"Incorrect extent";var c=b.extent,e=c.spatialReference.wkid||q.toJson(c.spatialReference.toJson());
delete b._ts;f.mixin(b,{bbox:c.xmin+","+c.ymin+","+c.xmax+","+c.ymax,imageSR:e,bboxSR:e,size:b.width+","+b.height},b.disableClientCaching?{_ts:(new Date).getTime()}:{})}},_adjustExtent:function(b,c,d){var e=b.ymax-b.ymin,f=b.xmax-b.xmin;d>=c?b.ymax=b.ymin+f*c/d:b.xmax=b.xmin+e*d/c;return b},_resolve:function(b,c,d,e,f){c&&this[c].apply(this,b);d&&d.apply(null,b);e&&v._resDfd(e,b,f)},_getFormatDecoderDfd:function(b){var c=null;switch(b){case "LERC":c=this._decodeLerc;break;case "LERC2":c=this._decodeLerc2;
break;case "JPEG":c=this._decodeJpeg;break;case "PNG":c=this._decodePng;break;case "BSQ":c=this._decodeBsq;break;case "BIP":c=this._decodeBip;break;case "TIFF":c=this._decodeTiff;break;default:c=function(b,c){throw"The raster format is not supported";}}c=f.hitch(this,c);return function(d,e){var f=new l;try{var g;"LERC"===b||!0===A?(g=c(d,e),f.resolve(g)):C.then(function(){g=c(d,e);f.resolve(g)})}catch(M){f.reject(M)}return f}},_getFormat:function(b){b=new Uint8Array(b,0,10);var c="";if(255===b[0]&&
216===b[1])c="JPEG";else if(137===b[0]&&80===b[1]&&78===b[2]&&71===b[3])c="PNG";else if(67===b[0]&&110===b[1]&&116===b[2]&&90===b[3]&&73===b[4]&&109===b[5]&&97===b[6]&&103===b[7]&&101===b[8]&&32===b[9])c="LERC";else if(76===b[0]&&101===b[1]&&114===b[2]&&99===b[3]&&50===b[4]&&32===b[5])c="LERC2";else if(-1<String.fromCharCode.apply(null,b).toLowerCase().indexOf("error"))c="ERROR";else if(73===b[0]&&73===b[1]&&42===b[2]&&0===b[3]||77===b[0]&&77===b[1]&&0===b[2]&&42===b[3])c="TIFF";return c},_validateDecodeParams:function(b){if(!b.height||
Math.floor(b.height)!==b.height)throw"Height not provided.";if(!b.width||Math.floor(b.width)!==b.width)throw"Width not provided.";},_decodeJpeg:function(b,c){if(!w)throw"The jpeg decoder module is not loaded.";this._validateDecodeParams(c);b=(new w).decode(b);if(!D(b,c))throw"The decoded image dimensions are incorrect.";c=[];var d,e;for(d=0;d<b.pixels.length;d++)e=b.pixels[d],c.push(this._calculateBandStatistics(e));return new u({width:b.width,height:b.height,pixels:b.pixels,pixelType:"U8",mask:b.mask,
statistics:c})},_decodePng:function(b,c){if(!y)throw"The png decoder module is not loaded.";this._validateDecodeParams(c);b=new Uint8Array(b);var d=new y(b);b=new Uint8Array(c.width*c.height*4);d.copyToImageData(b,d.decodePixels());for(var e=d=0,f,e=new Uint8Array(c.width*c.height),d=0;d<c.width*c.height;d++)e[d]=b[4*d+3];for(var g=new u({width:c.width,height:c.height,pixels:[],pixelType:"U8",mask:e,statistics:[]}),d=0;3>d;d++){f=new Uint8Array(c.width*c.height);for(e=0;e<c.width*c.height;e++)f[e]=
b[4*e+d];g.addData({pixels:f,statistics:this._calculateBandStatistics(f)})}return g},_decodeBsq:function(b,c){if(!z)throw"The bsq decoder module is not loaded.";this._validateDecodeParams(c);E=c.noDataValue;c.pixelType=H(c.pixelType);b=z.decodeBSQ(b,{bandCount:c.planes,width:c.width,height:c.height,pixelType:F,noDataValue:E});var d=[],e,f=null;for(e=0;e<b.pixels.length;e++)f=b.pixels[e],d.push(this._calculateBandStatistics(f));return new u({width:c.width,height:c.height,pixels:b.pixels,pixelType:c.pixelType,
mask:b.maskData,statistics:d})},_decodeBip:function(b,c){this._validateDecodeParams(c);E=c.noDataValue;c.pixelType=H(c.pixelType);b=z.decodeBIP(b,{bandCount:c.planes,width:c.width,height:c.height,pixelType:F,noDataValue:E});var d=[],e,f=null;for(e=0;e<b.pixels.length;e++)f=b.pixels[e],d.push(this._calculateBandStatistics(f));return new u({width:c.width,height:c.height,pixels:b.pixels,pixelType:c.pixelType,mask:b.maskData,statistics:d})},_decodeTiff:function(b,c){this._validateDecodeParams(c);E=c.noDataValue;
c.pixelType=H(c.pixelType);b=B.decode(b);c=[];var d,e=null;for(d=0;d<b.pixels.length;d++)e=b.pixels[d],c.push(this._calculateBandStatistics(e,b.maskData));return new u({width:b.width,height:b.height,pixels:b.pixels,pixelType:b.pixelType,mask:b.maskData,statistics:c})},_decodeLerc:function(b,c){this._validateDecodeParams(c);E=c.noDataValue;c.pixelType=H(c.pixelType);for(var d=0,e,f=0,g,h=b.byteLength-10;f<h;){var k=t.decode(b,{inputOffset:f,encodedMaskData:e,returnMask:0===d?!0:!1,returnEncodedMask:0===
d?!0:!1,returnFileInfo:!0,pixelType:F,noDataValue:E}),f=k.fileInfo.eofOffset;0===d&&(e=k.encodedMaskData,g=new u({width:c.width,height:c.height,pixels:[],pixelType:c.pixelType,mask:k.maskData,statistics:[]}));d++;if(!D(k,c))throw"The decoded image dimensions are incorrect";g.addData({pixels:k.pixelData,statistics:{minValue:k.minValue,maxValue:k.maxValue,noDataValue:k.noDataValue}})}return g},_decodeLerc2:function(b,c){this._validateDecodeParams(c);E=c.noDataValue;c.pixelType=H(c.pixelType);for(var d=
0,e,f,g=0,h,k=b.byteLength-10,l=[];g<k;){f=x.decode(b,{inputOffset:g,maskData:e,returnFileInfo:!0});g=f.fileInfo.eofOffset;0===d&&(e=f.maskData,h=new u({width:c.width,height:c.height,pixels:[],pixelType:f.fileInfo.pixelType,mask:f.maskData,statistics:[]}));f.fileInfo.mask&&0<f.fileInfo.mask.numBytes&&l.push(f.maskData);d++;if(!D(f,c))throw"The decoded image dimensions are incorrect";h.addData({pixels:f.pixelData,statistics:{minValue:f.minValue,maxValue:f.maxValue,noDataValue:f.noDataValue}})}if(1<
l.length){f=h.width*h.height;h.bandMasks=l;e=new Uint8Array(f);e.set(l[0]);for(c=1;c<l.length;c++)for(b=l[c],d=0;d<f;d++)e[d]&=b[d];h.maskData=e}return h},_calculateBandStatistics:function(b,c){var d=Infinity,e=-Infinity,f=b.length,g,h=0;if(c)for(g=0;g<f;g++)c[g]&&(h=b[g],d=h<d?h:d,e=h>e?h:e);else for(g=0;g<f;g++)h=b[g],d=h<d?h:d,e=h>e?h:e;return{minValue:d,maxValue:e}},_loadRasterFormatModules:function(){A||(C||(C=new l),10>g("ie")?C.isRejected()||C.reject("unsupported browser version"):m(["./rasterFormats/JpgPlus",
"./rasterFormats/Png","./rasterFormats/Raw","./rasterFormats/TiffDecoder","./rasterFormats/Zlib"],function(b,c,d,e){w=b;y=c;z=d;B=e;A=!0;C.isResolved()||C.resolve(!0)}))}});var F=null,E=null,H=function(b){if("U1"===b||"U2"===b||"U4"===b||"U8"===b)return E=Math.pow(2,8)-1,F=Uint8Array,"U8";"U16"===b?(E=E||Math.pow(2,16)-1,F=Uint16Array):"U32"===b?(E=E||Math.pow(2,32)-1,F=Uint32Array):"S8"===b?(E=E||0-Math.pow(2,7),F=Int8Array):"S16"===b?(E=E||0-Math.pow(2,15),F=Int16Array):"S32"===b?(E=E||0-Math.pow(2,
31),F=Int32Array):F=Float32Array;return b},D=function(b,c){return b.height!==c.height||b.width!==c.width?!1:!0};g("extend-esri")&&f.setObject("layers.Raster",p,e);return p})},"esri/layers/PixelBlock":function(){define("esri/layers/PixelBlock",["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(m,p,f,l){m=m([],{declaredClass:"esri.layers.PixelBlock",planes:null,width:null,height:null,pixelType:null,pixels:[],statistics:[],maskIsAlpha:!1,validPixelCount:null,constructor:function(f){if(f){if(!f.width||
Math.floor(f.width)!==f.width)throw"PixelBlock: incorrect width";if(!f.height||Math.floor(f.height)!==f.height)throw"PixelBlock: incorrect height";if(!f.pixels)throw"PixelBlock: pixel data not present";this.width=f.width;this.height=f.height;this.pixels=f.pixels;this.pixelType=f.pixelType||null;this.statistics=f.statistics;this.mask=f.mask||null;this.maskIsAlpha=f.maskIsAlpha||!1;f=f.validPixelCount;null==f&&(f=this.mask?this._getValidPixelCount(this.mask):this.width*this.height);this.validPixelCount=
f}},getPlaneCount:function(){return this.pixels.length!==this.statistics.length?0:this.statistics.length},addData:function(f){if(!f.pixels||!f.statistics)throw"Pixel data or statistics are not present";if(f.pixels.length!==this.width*this.height)throw"Inconsistent pixel data size";this.statistics.push(f.statistics);this.pixels.push(f.pixels)},getAsRGBA:function(){var f=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case "S8":case "S16":case "U16":case "S32":case "U32":case "F32":case "F64":this._fillFromNon8Bit(f);
break;default:this._fillFrom8Bit(f)}return new Uint8ClampedArray(f)},getAsRGBAFloat:function(){var f=new Float32Array(this.width*this.height*4);this._fillFrom32Bit(f);return f},clone:function(f){f=f||this;var h=new this.constructor;h.width=f.width;h.height=f.height;h.pixelType=f.pixelType;h.maskIsAlpha=f.maskIsAlpha;f.mask&&(h.mask=new Uint8Array(f.mask));var k,g,e;if(f.pixels)for(h.pixels=[],e=(g=f.pixels.length)&&f.pixels[0].slice,k=0;k<g;k++)h.pixels[k]=e?f.pixels[k].slice(0,f.pixels[k].length):
new f.pixels[k].constructor(f.pixels[k]);if(f.statistics)for(h.statistics=[],g=f.statistics.length,k=0;k<g;k++)h.statistics[k]=p.clone(f.statistics[k]);f=f.validPixelCount;null==f&&(f=h.mask?this._getValidPixelCount(h.mask):h.width*h.height);return h},clamp:function(f){if("F64"!==f&&"F32"!==f){var h;switch(f){case "U8":h=[0,255];break;case "U16":h=[0,65535];break;case "U32":h=[0,4294967295];break;case "S8":h=[-128,127];break;case "S16":h=[-32768,32767];break;case "S32":h=[-2147483648,2147483647];
break;default:h=[-3.4*1E39,3.4*1E39]}var k=h[0];h=h[1];var g=this.pixels,e=this.width*this.height,c=g.length,b,d,l,m,p,t=[];for(m=0;m<c;m++){l=this._createEmptyBand(f,e);b=g[m];for(p=0;p<e;p++)d=b[p],l[p]=d>h?h:d<k?k:d;t.push(l)}this.pixels=t;this.pixelType=f}},calculateStatistics:function(){var f,h=[],l,g=this.mask;for(f=0;f<this.pixels.length;f++)l=this.pixels[f],h.push(this._calculateBandStatistics(l,g));this.statistics=h},_getValidPixelCount:function(f){var h,k=0;for(h=0;h<f.length;h++)f[h]&&
k++;return k},_createEmptyBand:function(f,h){switch(f){case "U8":f=new Uint8Array(h);break;case "U16":f=new Uint16Array(h);break;case "U32":f=new Uint32Array(h);break;case "S8":f=new Int8Array(h);break;case "S16":f=new Int16Array(h);break;case "S32":f=new Int32Array(h);break;case "U32":f=new Uint32Array(h);break;case "F32":f=new Float32Array(h);break;case "F64":f=new Float64Array(h);break;default:f=new Float32Array(h)}return f},_fillFrom8Bit:function(f){var h=this.pixels,k=this.mask;if(!f||!h||!h.length)return 0;
var g,e,c;g=e=c=h[0];3<=h.length&&(e=h[1],c=h[2]);var h=new Uint32Array(f),b=this.width*this.height;if(g.length!==b)return 0;if(k&&k.length===b)if(this.maskIsAlpha)for(f=0;f<b;f++)k[f]&&(h[f]=k[f]<<24|c[f]<<16|e[f]<<8|g[f]);else for(f=0;f<b;f++)k[f]&&(h[f]=-16777216|c[f]<<16|e[f]<<8|g[f]);else for(f=0;f<b;f++)h[f]=-16777216|c[f]<<16|e[f]<<8|g[f]},_fillFromNon8Bit:function(f){var h=this.pixels,k=this.mask,g=this.statistics;if(!f||!h||!h.length)return 0;var e=1,c=0,e=1;g&&0<g.length?(c=g.map(function(b){return b.minValue}).reduce(function(b,
c){return Math.min(b,c)}),e=g.map(function(b){return b.maxValue-b.minValue}).reduce(function(b,c){return Math.max(b,c)}),e=255/e):(e=255,"S8"===this.pixelType?(c=-128,e=127):"U16"===this.pixelType?e=65535:"S16"===this.pixelType?(c=-32768,e=32767):"U32"===this.pixelType?e=4294967295:"S32"===this.pixelType?(c=-2147483648,e=2147483647):"F32"===this.pixelType?(c=-3.4*1E39,e=3.4*1E39):"F64"===this.pixelType&&(c=-Number.MAX_VALUE,e=Number.MAX_VALUE),e=255/(e-c));f=new Uint32Array(f);var g=this.width*this.height,
b,d,l;b=h[0];if(b.length!==g)return 0;if(3<=h.length)if(d=h[1],l=h[2],k&&k.length===g)for(h=0;h<g;h++)k[h]&&(f[h]=-16777216|(l[h]-c)*e<<16|(d[h]-c)*e<<8|(b[h]-c)*e);else for(h=0;h<g;h++)f[h]=-16777216|(l[h]-c)*e<<16|(d[h]-c)*e<<8|(b[h]-c)*e;else if(k&&k.length===g)for(h=0;h<g;h++)d=(b[h]-c)*e,k[h]&&(f[h]=-16777216|d<<16|d<<8|d);else for(h=0;h<g;h++)d=(b[h]-c)*e,f[h]=-16777216|d<<16|d<<8|d},_fillFrom32Bit:function(f){var h=this.pixels,k=this.mask;if(!f||!h||!h.length)return 0;var g,e,c;g=e=c=h[0];
3<=h.length&&(e=h[1],c=h[2]);var b=this.width*this.height;if(g.length!==b)return 0;var d=0;if(k&&k.length===b)for(h=0;h<b;h++)f[d++]=g[h],f[d++]=e[h],f[d++]=c[h],f[d++]=k[h]&1;else for(h=0;h<b;h++)f[d++]=g[h],f[d++]=e[h],f[d++]=c[h],f[d++]=1},_calculateBandStatistics:function(f,h){var k=Infinity,g=-Infinity,e=f.length,c,b=0;if(h)for(c=0;c<e;c++)h[c]&&(b=f[c],k=b<k?b:k,g=b>g?b:g);else for(c=0;c<e;c++)b=f[c],k=b<k?b:k,g=b>g?b:g;return{minValue:k,maxValue:g}}});f("extend-esri")&&p.setObject("layers.PixelBlock",
m,l);return m})},"esri/layers/rasterFormats/LercCodec":function(){define("esri/layers/rasterFormats/LercCodec",[],function(){var m={defaultNoDataValue:-3.4027999387901484E38,decode:function(f,l){var k;l=l||{};var h=l.inputOffset||0,q=l.encodedMaskData||null===l.encodedMaskData,g={},e=new Uint8Array(f,h,10);g.fileIdentifierString=String.fromCharCode.apply(null,e);if("CntZImage"!=g.fileIdentifierString.trim())throw"Unexpected file identifier string: "+g.fileIdentifierString;h+=10;e=new DataView(f,h,
24);g.fileVersion=e.getInt32(0,!0);g.imageType=e.getInt32(4,!0);g.height=e.getUint32(8,!0);g.width=e.getUint32(12,!0);g.maxZError=e.getFloat64(16,!0);h+=24;if(!q)if(e=new DataView(f,h,16),g.mask={},g.mask.numBlocksY=e.getUint32(0,!0),g.mask.numBlocksX=e.getUint32(4,!0),g.mask.numBytes=e.getUint32(8,!0),g.mask.maxValue=e.getFloat32(12,!0),h+=16,0<g.mask.numBytes){var q=new Uint8Array(Math.ceil(g.width*g.height/8)),e=new DataView(f,h,g.mask.numBytes),c=e.getInt16(0,!0),b=2,d=0;do{if(0<c)for(;c--;)q[d++]=
e.getUint8(b++);else for(var r=e.getUint8(b++),c=-c;c--;)q[d++]=r;c=e.getInt16(b,!0);b+=2}while(b<g.mask.numBytes);if(-32768!==c||d<q.length)throw"Unexpected end of mask RLE encoding";g.mask.bitset=q;h+=g.mask.numBytes}else 0===(g.mask.numBytes|g.mask.numBlocksY|g.mask.maxValue)&&(q=new Uint8Array(Math.ceil(g.width*g.height/8)),g.mask.bitset=q);e=new DataView(f,h,16);g.pixels={};g.pixels.numBlocksY=e.getUint32(0,!0);g.pixels.numBlocksX=e.getUint32(4,!0);g.pixels.numBytes=e.getUint32(8,!0);g.pixels.maxValue=
e.getFloat32(12,!0);h+=16;q=g.pixels.numBlocksX;e=g.pixels.numBlocksY;q+=0<g.width%q?1:0;c=e+(0<g.height%e?1:0);g.pixels.blocks=Array(q*c);for(d=b=0;d<c;d++)for(r=0;r<q;r++){var v=0,e=new DataView(f,h,Math.min(10,f.byteLength-h)),u={};g.pixels.blocks[b++]=u;var t=e.getUint8(0);v++;u.encoding=t&63;if(3<u.encoding)throw"Invalid block encoding ("+u.encoding+")";if(2===u.encoding)h++;else{if(0!==t&&2!==t){t>>=6;u.offsetType=t;if(2===t)u.offset=e.getInt8(1),v++;else if(1===t)u.offset=e.getInt16(1,!0),
v+=2;else if(0===t)u.offset=e.getFloat32(1,!0),v+=4;else throw"Invalid block offset type";if(1===u.encoding)if(t=e.getUint8(v),v++,u.bitsPerPixel=t&63,t>>=6,u.numValidPixelsType=t,2===t)u.numValidPixels=e.getUint8(v),v++;else if(1===t)u.numValidPixels=e.getUint16(v,!0),v+=2;else if(0===t)u.numValidPixels=e.getUint32(v,!0),v+=4;else throw"Invalid valid pixel count type";}h+=v;if(3!=u.encoding)if(0===u.encoding){t=(g.pixels.numBytes-1)/4;if(t!==Math.floor(t))throw"uncompressed block has invalid length";
e=new ArrayBuffer(4*t);v=new Uint8Array(e);v.set(new Uint8Array(f,h,4*t));e=new Float32Array(e);u.rawData=e;h+=4*t}else 1===u.encoding&&(t=Math.ceil(u.numValidPixels*u.bitsPerPixel/8),e=new ArrayBuffer(4*Math.ceil(t/4)),v=new Uint8Array(e),v.set(new Uint8Array(f,h,t)),u.stuffedData=new Uint32Array(e),h+=t)}}g.eofOffset=h;f=null!=l.noDataValue?l.noDataValue:m.defaultNoDataValue;var q=l.encodedMaskData,t=l.returnMask,c=0,b=g.pixels.numBlocksX,d=g.pixels.numBlocksY,r=Math.floor(g.width/b),u=Math.floor(g.height/
d),v=2*g.maxZError,h=Number.MAX_VALUE,x,q=q||(g.mask?g.mask.bitset:null),w,e=new (l.pixelType||Float32Array)(g.width*g.height);t&&q&&(w=new Uint8Array(g.width*g.height));for(var t=new Float32Array(r*u),y,z,B=0;B<=d;B++){var A=B!==d?u:g.height%d;if(0!==A)for(var C=0;C<=b;C++){var F=C!==b?r:g.width%b;if(0!==F){var E=B*g.width*u+C*r,H=g.width-F,D=g.pixels.blocks[c],G,I;if(2>D.encoding){if(0===D.encoding)G=D.rawData;else{G=D.stuffedData;I=D.bitsPerPixel;x=D.numValidPixels;y=D.offset;z=v;var P=t,Q=g.pixels.maxValue,
O=(1<<I)-1,N=0,M=void 0,J=0,K=void 0,U=void 0,R=Math.ceil((Q-y)/z);G[G.length-1]<<=8*(4*G.length-Math.ceil(I*x/8));for(M=0;M<x;M++)0===J&&(U=G[N++],J=32),J>=I?(K=U>>>J-I&O,J-=I):(J=I-J,K=(U&O)<<J&O,U=G[N++],J=32-J,K+=U>>>J),P[M]=K<R?y+K*z:Q;G=t}I=0}else k=2===D.encoding?0:D.offset;var Y;if(q)for(z=0;z<A;z++){E&7&&(Y=q[E>>3],Y<<=E&7);for(y=0;y<F;y++)E&7||(Y=q[E>>3]),Y&128?(w&&(w[E]=1),x=2>D.encoding?G[I++]:k,h=h>x?x:h,e[E++]=x):(w&&(w[E]=0),e[E++]=f),Y<<=1;E+=H}else if(2>D.encoding)for(z=0;z<A;z++){for(y=
0;y<F;y++)x=G[I++],h=h>x?x:h,e[E++]=x;E+=H}else for(h=h>k?k:h,z=0;z<A;z++){for(y=0;y<F;y++)e[E++]=k;E+=H}if(1===D.encoding&&I!==D.numValidPixels)throw"Block and Mask do not match";c++}}}k=w;w={width:g.width,height:g.height,pixelData:e,minValue:h,maxValue:g.pixels.maxValue,noDataValue:f};k&&(w.maskData=k);l.returnEncodedMask&&g.mask&&(w.encodedMaskData=g.mask.bitset?g.mask.bitset:null);if(l.returnFileInfo&&(w.fileInfo=p(g),l.computeUsedBitDepths)){l=w.fileInfo;k=g.pixels.numBlocksX*g.pixels.numBlocksY;
Y={};for(G=0;G<k;G++)I=g.pixels.blocks[G],0===I.encoding?Y.float32=!0:1===I.encoding?Y[I.bitsPerPixel]=!0:Y[0]=!0;g=Object.keys(Y);l.bitDepths=g}return w}},p=function(f){return{fileIdentifierString:f.fileIdentifierString,fileVersion:f.fileVersion,imageType:f.imageType,height:f.height,width:f.width,maxZError:f.maxZError,eofOffset:f.eofOffset,mask:f.mask?{numBlocksX:f.mask.numBlocksX,numBlocksY:f.mask.numBlocksY,numBytes:f.mask.numBytes,maxValue:f.mask.maxValue}:null,pixels:{numBlocksX:f.pixels.numBlocksX,
numBlocksY:f.pixels.numBlocksY,numBytes:f.pixels.numBytes,maxValue:f.pixels.maxValue,noDataValue:this.noDataValue}}};return m})},"esri/layers/rasterFormats/Lerc2Codec":function(){define("esri/layers/rasterFormats/Lerc2Codec",[],function(){var m={unstuff:function(f,k,h,m,g,e,c,b){var d=(1<<h)-1,l=0,q,p=0,t,x;f[f.length-1]<<=8*(4*f.length-Math.ceil(h*m/8));if(g)for(q=0;q<m;q++)0===p&&(x=f[l++],p=32),p>=h?(t=x>>>p-h&d,p-=h):(p=h-p,t=(x&d)<<p&d,x=f[l++],p=32-p,t+=x>>>p),k[q]=g[t];else for(g=Math.ceil((b-
e)/c),q=0;q<m;q++)0===p&&(x=f[l++],p=32),p>=h?(t=x>>>p-h&d,p-=h):(p=h-p,t=(x&d)<<p&d,x=f[l++],p=32-p,t+=x>>>p),k[q]=t<g?e+t*c:b},unstuffLUT:function(f,k,h,m,g,e){var c=(1<<k)-1,b=0,d=0,l=0,q=l=0,p,t=[];f[f.length-1]<<=8*(4*f.length-Math.ceil(k*h/8));for(var x=Math.ceil((e-m)/g),d=0;d<h;d++)0===l&&(p=f[b++],l=32),l>=k?(q=p>>>l-k&c,l-=k):(l=k-l,q=(p&c)<<l&c,p=f[b++],l=32-l,q+=p>>>l),t[d]=q<x?m+q*g:e;t.unshift(m);return t},unstuff2:function(f,k,h,m,g,e,c,b){var d=(1<<h)-1,l=0,q,p=0,t=0,x,w,y;if(g)for(q=
0;q<m;q++)0===p&&(w=f[l++],p=32,t=0),p>=h?(x=w>>>t&d,p-=h,t+=h):(y=h-p,x=w>>>t&d,w=f[l++],p=32-y,x|=(w&(1<<y)-1)<<h-y,t=y),k[q]=g[x];else for(g=Math.ceil((b-e)/c),q=0;q<m;q++)0===p&&(w=f[l++],p=32,t=0),p>=h?(x=w>>>t&d,p-=h,t+=h):(y=h-p,x=w>>>t&d,w=f[l++],p=32-y,x|=(w&(1<<y)-1)<<h-y,t=y),k[q]=x<g?e+x*c:b;return k},unstuffLUT2:function(f,k,h,m,g,e){for(var c=(1<<k)-1,b=0,d=0,l=0,q=0,p=0,t=0,x,w=[],y=Math.ceil((e-m)/g),d=0;d<h;d++)0===q&&(x=f[b++],q=32,t=0),q>=k?(p=x>>>t&c,q-=k,t+=k):(l=k-q,p=x>>>t&
c,x=f[b++],q=32-l,p|=(x&(1<<l)-1)<<k-l,t=l),w[d]=p<y?m+p*g:e;w.unshift(m);return w},originalUnstuff:function(f,k,h,m){var g=(1<<h)-1,e=0,c,b=0,d,l;f[f.length-1]<<=8*(4*f.length-Math.ceil(h*m/8));for(c=0;c<m;c++)0===b&&(l=f[e++],b=32),b>=h?(d=l>>>b-h&g,b-=h):(b=h-b,d=(l&g)<<b&g,l=f[e++],b=32-b,d+=l>>>b),k[c]=d;return k},originalUnstuff2:function(f,k,h,m){var g=(1<<h)-1,e=0,c,b=0,d=0,l,q,p;for(c=0;c<m;c++)0===b&&(q=f[e++],b=32,d=0),b>=h?(l=q>>>d&g,b-=h,d+=h):(p=h-b,l=q>>>d&g,q=f[e++],b=32-p,l|=(q&(1<<
p)-1)<<h-p,d=p),k[c]=l;return k}},p={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(f){for(var k=65535,h=65535,l=f.length,g=Math.floor(l/2),e=0;g;){var c=359<=g?359:g,g=g-c;do k+=f[e++]<<8,h+=k+=f[e++];while(--c);k=(k&65535)+(k>>>16);h=(h&65535)+(h>>>16)}l&1&&(h+=k+=f[e]<<8);return((h&65535)+(h>>>16)<<16|(k&65535)+(k>>>16))>>>0},readHeaderInfo:function(f,k){var h=k.ptr,l=new Uint8Array(f,h,6),g={};g.fileIdentifierString=String.fromCharCode.apply(null,l);if(0!==g.fileIdentifierString.lastIndexOf("Lerc2",
0))throw"Unexpected file identifier string (expect Lerc2 ): "+g.fileIdentifierString;var h=h+6,l=new DataView(f,h,8),e=l.getInt32(0,!0);g.fileVersion=e;h+=4;3<=e&&(g.checksum=l.getUint32(4,!0),h+=4);l=new DataView(f,h,12);g.height=l.getUint32(0,!0);g.width=l.getUint32(4,!0);h+=8;4<=e?(g.numDims=l.getUint32(8,!0),h+=4):g.numDims=1;l=new DataView(f,h,40);g.numValidPixel=l.getUint32(0,!0);g.microBlockSize=l.getInt32(4,!0);g.blobSize=l.getInt32(8,!0);g.imageType=l.getInt32(12,!0);g.maxZError=l.getFloat64(16,
!0);g.zMin=l.getFloat64(24,!0);g.zMax=l.getFloat64(32,!0);h+=40;k.headerInfo=g;k.ptr=h;if(3<=e&&(f=this.computeChecksumFletcher32(new Uint8Array(f,h-(4<=e?52:48),g.blobSize-14)),f!==g.checksum))throw"Checksum failed.";return!0},checkMinMaxRanges:function(f,k){var h=k.headerInfo,l=this.getDataTypeArray(h.imageType),g=h.numDims*this.getDataTypeSize(h.imageType),e=this.readSubArray(f,k.ptr,l,g);f=this.readSubArray(f,k.ptr+g,l,g);k.ptr+=2*g;g=!0;for(k=0;k<h.numDims;k++)if(e[k]!==f[k]){g=!1;break}h.minValues=
e;h.maxValues=f;return g},readSubArray:function(f,k,h,m){if(h===Uint8Array)f=new Uint8Array(f,k,m);else{var g=new ArrayBuffer(m);(new Uint8Array(g)).set(new Uint8Array(f,k,m));f=new h(g)}return f},readMask:function(f,k){var h=k.ptr,l=k.headerInfo,g=l.width*l.height,e=l.numValidPixel,c=new DataView(f,h,4),l={};l.numBytes=c.getUint32(0,!0);h+=4;if((0===e||g===e)&&0!==l.numBytes)throw"invalid mask";if(0===e)e=new Uint8Array(Math.ceil(g/8)),l.bitset=e,c=new Uint8Array(g),k.pixels.resultMask=c,h+=l.numBytes;
else if(0<l.numBytes){e=new Uint8Array(Math.ceil(g/8));c=new DataView(f,h,l.numBytes);f=c.getInt16(0,!0);var b=2,d=0,m=0;do{if(0<f)for(;f--;)e[d++]=c.getUint8(b++);else for(m=c.getUint8(b++),f=-f;f--;)e[d++]=m;f=c.getInt16(b,!0);b+=2}while(b<l.numBytes);if(-32768!==f||d<e.length)throw"Unexpected end of mask RLE encoding";c=new Uint8Array(g);for(b=b=f=0;b<g;b++)b&7?(f=e[b>>3],f<<=b&7):f=e[b>>3],f&128&&(c[b]=1);k.pixels.resultMask=c;l.bitset=e;h+=l.numBytes}k.ptr=h;k.mask=l;return!0},readDataOneSweep:function(f,
k,h){var l=k.ptr,g=k.headerInfo,e=g.numDims,c=g.width*g.height,g=g.numValidPixel*p.getDataTypeSize(g.imageType)*e,b=k.pixels.resultMask;if(h===Uint8Array)f=new Uint8Array(f,l,g);else{var d=new ArrayBuffer(g);(new Uint8Array(d)).set(new Uint8Array(f,l,g));f=new h(d)}if(f.length===c*e)k.pixels.resultPixels=f;else{k.pixels.resultPixels=new h(c*e);var m=d=h=0,v=0;if(1<e)for(m=0;m<e;m++)for(v=m*c,d=0;d<c;d++)b[d]&&(k.pixels.resultPixels[v+d]=f[h++]);else for(d=0;d<c;d++)b[d]&&(k.pixels.resultPixels[d]=
f[h++])}k.ptr=l+g;return!0},readHuffmanTree:function(l,k){var h=this.HUFFMAN_LUT_BITS_MAX,m=new DataView(l,k.ptr,16);k.ptr+=16;if(2>m.getInt32(0,!0))throw"unsupported Huffman version";var g=m.getInt32(4,!0),e=m.getInt32(8,!0),m=m.getInt32(12,!0);if(e>=m)return!1;var c=new Uint32Array(m-e);p.decodeBits(l,k,c);var b=[],d,r,v;for(d=e;d<m;d++)r=d-(d<g?0:g),b[r]={first:c[d-e],second:null};d=l.byteLength-k.ptr;c=new ArrayBuffer(4*Math.ceil(d/4));(new Uint8Array(c)).set(new Uint8Array(l,k.ptr,d));l=new Uint32Array(c);
k=0;var u,c=0;u=l[0];for(d=e;d<m;d++)r=d-(d<g?0:g),v=b[r].first,0<v&&(b[r].second=u<<k>>>32-v,32-k>=v?(k+=v,32===k&&(k=0,c++,u=l[c])):(k+=v-32,c++,u=l[c],b[r].second|=u>>>32-k));var t=u=0,x=new f;for(d=0;d<b.length;d++)void 0!==b[d]&&(u=Math.max(u,b[d].first));var t=u>=h?h:u,h=[],w;for(d=e;d<m;d++)if(r=d-(d<g?0:g),v=b[r].first,0<v)if(e=[v,r],v<=t)for(r=b[r].second<<t-v,w=1<<t-v,v=0;v<w;v++)h[r|v]=e;else for(r=b[r].second,w=x,--v;0<=v;v--)r>>>v&1?(w.right||(w.right=new f),w=w.right):(w.left||(w.left=
new f),w=w.left),0!==v||w.val||(w.val=e[1]);return{decodeLut:h,numBitsLUTQick:t,numBitsLUT:u,tree:x,stuffedData:l,srcPtr:c,bitPos:k}},readHuffman:function(f,k,h){var l=k.headerInfo,g=l.numDims,e=k.headerInfo.height,c=k.headerInfo.width,b=c*e,d=this.readHuffmanTree(f,k);f=d.decodeLut;var m=d.tree,p=d.stuffedData,u=d.srcPtr,t=d.bitPos,x=d.numBitsLUTQick,d=d.numBitsLUT,w=0===k.headerInfo.imageType?128:0,y,z,B=k.pixels.resultMask,A,C,F,E,H,D=0;0<t&&(u++,t=0);var G=p[u],I=1===k.encodeMode,P=new h(b*g),
Q=P,O;for(O=0;O<l.numDims;O++){1<g&&(Q=new h(P.buffer,b*O,b),D=0);if(k.headerInfo.numValidPixel===c*e)for(C=E=0;C<e;C++)for(F=0;F<c;F++,E++){z=0;y=A=G<<t>>>32-x;32-t<x&&(y=A|=p[u+1]>>>64-t-x);if(f[y])z=f[y][1],t+=f[y][0];else for(y=A=G<<t>>>32-d,32-t<d&&(y=A|=p[u+1]>>>64-t-d),y=m,H=0;H<d;H++)if(y=A>>>d-H-1&1?y.right:y.left,!y.left&&!y.right){z=y.val;t=t+H+1;break}32<=t&&(t-=32,u++,G=p[u]);z-=w;I?(z=0<F?z+D:0<C?z+Q[E-c]:z+D,z&=255,D=Q[E]=z):Q[E]=z}else for(C=E=0;C<e;C++)for(F=0;F<c;F++,E++)if(B[E]){z=
0;y=A=G<<t>>>32-x;32-t<x&&(y=A|=p[u+1]>>>64-t-x);if(f[y])z=f[y][1],t+=f[y][0];else for(y=A=G<<t>>>32-d,32-t<d&&(y=A|=p[u+1]>>>64-t-d),y=m,H=0;H<d;H++)if(y=A>>>d-H-1&1?y.right:y.left,!y.left&&!y.right){z=y.val;t=t+H+1;break}32<=t&&(t-=32,u++,G=p[u]);z-=w;I?(z=0<F&&B[E-1]?z+D:0<C&&B[E-c]?z+Q[E-c]:z+D,z&=255,D=Q[E]=z):Q[E]=z}k.ptr=k.ptr+4*(u+1)+(0<t?4:0)}k.pixels.resultPixels=P},decodeBits:function(f,k,h,q,g){var e=k.headerInfo,c=e.fileVersion,b=0,d=new DataView(f,k.ptr,5<=f.byteLength-k.ptr?5:f.byteLength-
k.ptr),l=d.getUint8(0);b++;var p=l>>6,u=0===p?4:3-p,t=0<(l&32)?!0:!1,p=l&31,l=0;if(1===u)l=d.getUint8(b),b++;else if(2===u)l=d.getUint16(b,!0),b+=2;else if(4===u)l=d.getUint32(b,!0),b+=4;else throw"Invalid valid pixel count type";var u=2*e.maxZError,x,w;g=1<e.numDims?e.maxValues[g]:e.zMax;if(t){k.counter.lut++;t=d.getUint8(b);b++;e=Math.ceil((t-1)*p/8);x=Math.ceil(e/4);x=new ArrayBuffer(4*x);w=new Uint8Array(x);k.ptr+=b;w.set(new Uint8Array(f,k.ptr,e));b=new Uint32Array(x);k.ptr+=e;for(d=0;t-1>>>
d;)d++;e=Math.ceil(l*d/8);x=Math.ceil(e/4);x=new ArrayBuffer(4*x);w=new Uint8Array(x);w.set(new Uint8Array(f,k.ptr,e));f=new Uint32Array(x);k.ptr+=e;k=3<=c?m.unstuffLUT2(b,p,t-1,q,u,g):m.unstuffLUT(b,p,t-1,q,u,g);3<=c?m.unstuff2(f,h,d,l,k):m.unstuff(f,h,d,l,k)}else k.counter.bitstuffer++,d=p,k.ptr+=b,0<d&&(e=Math.ceil(l*d/8),x=Math.ceil(e/4),x=new ArrayBuffer(4*x),w=new Uint8Array(x),w.set(new Uint8Array(f,k.ptr,e)),f=new Uint32Array(x),k.ptr+=e,3<=c?null==q?m.originalUnstuff2(f,h,d,l):m.unstuff2(f,
h,d,l,!1,q,u,g):null==q?m.originalUnstuff(f,h,d,l):m.unstuff(f,h,d,l,!1,q,u,g))},readTiles:function(f,k,h){var l=k.headerInfo,g=l.width,e=l.height,c=l.microBlockSize,b=l.imageType,d=p.getDataTypeSize(b),m=Math.ceil(g/c),v=Math.ceil(e/c);k.pixels.numBlocksY=v;k.pixels.numBlocksX=m;for(var u=k.pixels.ptr=0,t=0,x=0,w=0,y=0,z=0,B=0,A=0,C=0,F=0,E=0,H=0,D=0,B=D=B=0,G,I=new h(c*c),P=e%c||c,Q=g%c||c,O=l.numDims,N,M=k.pixels.resultMask,J=k.pixels.resultPixels,K=5<=l.fileVersion?14:15,U=l.zMax,x=0;x<v;x++)for(y=
x!==v-1?c:P,w=0;w<m;w++)for(z=w!==m-1?c:Q,E=x*g*c+w*c,H=g-z,N=0;N<O;N++){1<O?(D=J,E=x*g*c+w*c,J=new h(k.pixels.resultPixels.buffer,g*e*N*d,g*e),U=l.maxValues[N]):D=null;B=f.byteLength-k.ptr;u=new DataView(f,k.ptr,Math.min(10,B));t={};B=0;A=u.getUint8(0);B++;G=5<=l.fileVersion?A&4:0;C=A>>6&255;F=A>>2&K;if(F!==(w*c>>3&K))throw"integrity issue";if(G&&0===N)throw"integrity issue";A&=3;if(3<A)throw k.ptr+=B,"Invalid block encoding ("+A+")";if(2===A){if(G)if(M)for(u=0;u<y;u++)for(t=0;t<z;t++)M[E]&&(J[E]=
D[E]),E++;else for(u=0;u<y;u++)for(t=0;t<z;t++)J[E]=D[E],E++;k.counter.constant++;k.ptr+=B}else if(0===A){if(G)throw"integrity issue";k.counter.uncompressed++;k.ptr+=B;D=y*z*d;B=f.byteLength-k.ptr;D=D<B?D:B;B=new ArrayBuffer(0===D%d?D:D+d-D%d);G=new Uint8Array(B);G.set(new Uint8Array(f,k.ptr,D));B=new h(B);D=0;if(M)for(u=0;u<y;u++){for(t=0;t<z;t++)M[E]&&(J[E]=B[D++]),E++;E+=H}else for(u=0;u<y;u++){for(t=0;t<z;t++)J[E++]=B[D++];E+=H}k.ptr+=D*d}else if(C=p.getDataTypeUsed(G&&6>b?4:b,C),F=p.getOnePixel(t,
B,C,u),B+=p.getDataTypeSize(C),3===A)if(k.ptr+=B,k.counter.constantoffset++,M)for(u=0;u<y;u++){for(t=0;t<z;t++)M[E]&&(J[E]=G?Math.min(U,D[E]+F):F),E++;E+=H}else for(u=0;u<y;u++){for(t=0;t<z;t++)J[E]=G?Math.min(U,D[E]+F):F,E++;E+=H}else if(k.ptr+=B,p.decodeBits(f,k,I,F,N),B=0,G)if(M)for(u=0;u<y;u++){for(t=0;t<z;t++)M[E]&&(J[E]=I[B++]+D[E]),E++;E+=H}else for(u=0;u<y;u++){for(t=0;t<z;t++)J[E]=I[B++]+D[E],E++;E+=H}else if(M)for(u=0;u<y;u++){for(t=0;t<z;t++)M[E]&&(J[E]=I[B++]),E++;E+=H}else for(u=0;u<
y;u++){for(t=0;t<z;t++)J[E++]=I[B++];E+=H}}},formatFileInfo:function(f){return{fileIdentifierString:f.headerInfo.fileIdentifierString,fileVersion:f.headerInfo.fileVersion,imageType:f.headerInfo.imageType,height:f.headerInfo.height,width:f.headerInfo.width,numValidPixel:f.headerInfo.numValidPixel,microBlockSize:f.headerInfo.microBlockSize,blobSize:f.headerInfo.blobSize,maxZError:f.headerInfo.maxZError,pixelType:p.getPixelType(f.headerInfo.imageType),eofOffset:f.eofOffset,mask:f.mask?{numBytes:f.mask.numBytes}:
null,pixels:{numBlocksX:f.pixels.numBlocksX,numBlocksY:f.pixels.numBlocksY,maxValue:f.headerInfo.zMax,minValue:f.headerInfo.zMin,noDataValue:f.noDataValue}}},constructConstantSurface:function(f){var k=f.headerInfo.zMax,h=f.headerInfo.numDims,l=f.headerInfo.height*f.headerInfo.width,g=0,e=0,c=0,b=f.pixels.resultMask,d=f.pixels.resultPixels;if(b)if(1<h)for(g=0;g<h;g++)for(c=g*l,k=f.headerInfo.maxValues[g],e=0;e<l;e++)b[e]&&(d[c+e]=k);else for(e=0;e<l;e++)b[e]&&(d[e]=k);else if(1<h)for(g=0;g<h;g++)for(c=
g*l,k=f.headerInfo.maxValues[g],e=0;e<l;e++)d[c+e]=k;else for(e=0;e<l;e++)d[e]=k},getDataTypeArray:function(f){switch(f){case 0:f=Int8Array;break;case 1:f=Uint8Array;break;case 2:f=Int16Array;break;case 3:f=Uint16Array;break;case 4:f=Int32Array;break;case 5:f=Uint32Array;break;case 6:f=Float32Array;break;case 7:f=Float64Array;break;default:f=Float32Array}return f},getPixelType:function(f){switch(f){case 0:f="S8";break;case 1:f="U8";break;case 2:f="S16";break;case 3:f="U16";break;case 4:f="S32";break;
case 5:f="U32";break;case 6:f="F32";break;case 7:f="F64";break;default:f="F32"}return f},isValidPixelValue:function(f,k){if(null==k)return!1;switch(f){case 0:f=-128<=k&&127>=k;break;case 1:f=0<=k&&255>=k;break;case 2:f=-32768<=k&&32767>=k;break;case 3:f=0<=k&&65536>=k;break;case 4:f=-2147483648<=k&&2147483647>=k;break;case 5:f=0<=k&&4294967296>=k;break;case 6:f=-3.4027999387901484E38<=k&&3.4027999387901484E38>=k;break;case 7:f=4.9E-324<=k&&1.7976931348623157E308>=k;break;default:f=!1}return f},getDataTypeSize:function(f){var k=
0;switch(f){case 0:case 1:k=1;break;case 2:case 3:k=2;break;case 4:case 5:case 6:k=4;break;case 7:k=8;break;default:k=f}return k},getDataTypeUsed:function(f,k){var h=f;switch(f){case 2:case 4:h=f-k;break;case 3:case 5:h=f-2*k;break;case 6:h=0===k?f:1===k?2:1;break;case 7:h=0===k?f:f-2*k+1;break;default:h=f}return h},getOnePixel:function(f,k,h,m){f=0;switch(h){case 0:f=m.getInt8(k);break;case 1:f=m.getUint8(k);break;case 2:f=m.getInt16(k,!0);break;case 3:f=m.getUint16(k,!0);break;case 4:f=m.getInt32(k,
!0);break;case 5:f=m.getUInt32(k,!0);break;case 6:f=m.getFloat32(k,!0);break;case 7:f=m.getFloat64(k,!0);break;default:throw"the decoder does not understand this pixel type";}return f}},f=function(f,k,h){this.val=f;this.left=k;this.right=h};return{decode:function(f,k){k=k||{};var h=k.noDataValue,l=0,g={};g.ptr=k.inputOffset||0;g.pixels={};if(p.readHeaderInfo(f,g)){var l=g.headerInfo,e=l.fileVersion,c=p.getDataTypeArray(l.imageType);if(5<e)throw"unsupported lerc version 2."+e;p.readMask(f,g);l.numValidPixel===
l.width*l.height||g.pixels.resultMask||(g.pixels.resultMask=k.maskData);var b=l.width*l.height;g.pixels.resultPixels=new c(b*l.numDims);g.counter={onesweep:0,uncompressed:0,lut:0,bitstuffer:0,constant:0,constantoffset:0};if(0!==l.numValidPixel)if(l.zMax===l.zMin)p.constructConstantSurface(g);else if(4<=e&&p.checkMinMaxRanges(f,g))p.constructConstantSurface(g);else{var d=new DataView(f,g.ptr,2),m=d.getUint8(0);g.ptr++;if(m)p.readDataOneSweep(f,g,c);else if(1<e&&1>=l.imageType&&1E-5>Math.abs(l.maxZError-
.5)){d=d.getUint8(1);g.ptr++;g.encodeMode=d;if(2<d||4>e&&1<d)throw"Invalid Huffman flag "+d;d?p.readHuffman(f,g,c):p.readTiles(f,g,c)}else p.readTiles(f,g,c)}g.eofOffset=g.ptr;k.inputOffset?(f=g.headerInfo.blobSize+k.inputOffset-g.ptr,1<=Math.abs(f)&&(g.eofOffset=k.inputOffset+g.headerInfo.blobSize)):(f=g.headerInfo.blobSize-g.ptr,1<=Math.abs(f)&&(g.eofOffset=g.headerInfo.blobSize));f={width:l.width,height:l.height,pixelData:g.pixels.resultPixels,minValue:l.zMin,maxValue:l.zMax,validPixelCount:l.numValidPixel,
dimCount:l.numDims,dimStats:{minValues:l.minValues,maxValues:l.maxValues},maskData:g.pixels.resultMask};if(g.pixels.resultMask&&p.isValidPixelValue(l.imageType,h)){e=g.pixels.resultMask;for(l=0;l<b;l++)e[l]||(f.pixelData[l]=h);f.noDataValue=h}g.noDataValue=h;k.returnFileInfo&&(f.fileInfo=p.formatFileInfo(g));return f}},getBandCount:function(f){for(var k=0,h=0,l={ptr:0,pixels:{}};h<f.byteLength-58;)p.readHeaderInfo(f,l),h+=l.headerInfo.blobSize,k++,l.ptr=h;return k}}})},"esri/layers/pixelFilters/VectorFieldPixelFilter":function(){define("esri/layers/pixelFilters/VectorFieldPixelFilter",
"dojo/_base/declare dojo/_base/lang dojo/has ../../kernel ../../lang dojo/_base/array".split(" "),function(m,p,f,l,k,h){m=m(null,{declaredClass:"esri.layers.pixelFilters.VectorFieldPixelFilter",speedUnits:["esriMetersPerSecond","esriKilometersPerHour","esriKnots","esriFeetPerSecond","esriMilesPerHour"],constructor:function(f){p.mixin(this,f);this.isDataUV=f&&f.isDataUV?f.isDataUV:!1;this.computeMagnitudeAndDirection=p.hitch(this,this.computeMagnitudeAndDirection);this.unitConversionFactor=1;this._updateUnitConvFactor()},
setUnits:function(f,g){this.inputUnit=f;this.outputUnit=g;this.unitConversionFactor=1;this._updateUnitConvFactor()},_updateUnitConvFactor:function(){var f=h.indexOf(this.speedUnits,this.inputUnit),g=h.indexOf(this.speedUnits,this.outputUnit);if(this.inputUnit&&this.outputUnit&&0<=f&&0<=g){var e=[1,.277778,.514444,.3048,.44704,0];this.unitConversionFactor=e[f]/e[g]}},computeMagnitudeAndDirection:function(f){if(!k.isDefined(f))throw"Could not compute magnitude and direction. No pixel data is available.";
var g=f.pixelBlock;if(!k.isDefined(g)||2!==g.getPlaneCount())throw"Could not compute magnitude and direction. Pixel data does not contain two bands.";var e=f.extent,c=(e.xmax-e.xmin)/g.width,b=(e.ymax-e.ymin)/g.height,d=e.xmin+c/2,e=e.ymax-b/2;g.statistics[0].minValue=0;g.statistics[0].maxValue=0;var h=180/Math.PI,l=[],m=0,q=0,p=0,w=!k.isDefined(g.mask),y,z,B,A,C,F,E,H;C=E=Infinity;F=H=-Infinity;for(m=0;m<g.height;m++)for(q=0;q<g.width;q++,p++)if(l.push([d+c*q,e-b*m]),w||g.mask[p])B=y=g.pixels[0][p]*
this.unitConversionFactor,A=z=g.pixels[1][p],this.isDataUV&&(B=Math.sqrt(y*y+z*z),A=90-h*Math.atan2(z,y),g.pixels[0][p]=B*this.unitConversionFactor,g.pixels[1][p]=A),B>F&&(F=B),B<C&&(C=B),A>H&&(H=A),A<E&&(E=A);g.statistics[0].maxValue=F;g.statistics[0].minValue=C;g.statistics[1].maxValue=H;g.statistics[1].minValue=E;f.locations=l;return f}});f("extend-esri")&&p.setObject("layers.pixelFilters.VectorFieldPixelFilter",m,l);return m})},"esri/layers/rasterFormats/ImageCanvasDecoder":function(){define("esri/layers/rasterFormats/ImageCanvasDecoder",
["require","dojo/_base/declare","dojo/Deferred","dojo/sniff"],function(m,p,f,l){var k;return p(null,{constructor:function(f){this.ctx=f.ctx;this._loadRasterFormatModule()},decode:function(h,k){if(!k.width||!k.height)throw"Native decoding requires the image format, width and height";var g=new f,e,c=new Uint8Array(h);h=this._getFormat(h);if("error"===h)throw"invalid format";"jpeg"===h&&(e=this._getMask(c,k));var b="",d,l;for(d=0;d<c.length;d+=65535)l=c.subarray(d,d+65535>c.length-1?c.length-1:d+65535),
b+=String.fromCharCode.apply(null,l);var c="data:image/"+h+";base64,"+window.btoa(b),m=new Image,q;m.src=c;var p=this;m.onload=function(){p.ctx.clearRect(0,0,k.width,k.height);p.ctx.drawImage(m,0,0);var b=p.ctx.getImageData(0,0,m.width,m.height);q=b.data;if(e)for(d=0;d<e.length;d++)q[4*d+3]=e[d]?255:0;p.ctx.putImageData(b,0,0);g.resolve(null)};m.onerror=function(){g.reject("cannot load image")};return g},_getFormat:function(f){f=new Uint8Array(f,0,10);var h="error";255===f[0]&&216===f[1]?h="jpeg":
137===f[0]&&80===f[1]&&78===f[2]&&71===f[3]&&(h="png");return h},_getMask:function(f,l){var g;try{if(!k)throw"The zlib decoder module is not loaded.";var e=0,c=0,b=Math.round(f.length/2);1===b%2&&(b+=1);for(var d=f.length-2,e=b;e<d&&(255!==f[e]||217!==f[e+1]);e++);b=e+=2;if(b<f.length-1){var h=(new k(f.subarray(b))).getBytes();g=new Uint8Array(l.width*l.height);for(e=f=0;e<h.length;e++)for(c=7;0<=c;c--)g[f++]=h[e]>>c&1}}catch(v){}return g},_loadRasterFormatModule:function(){10>l("ie")||m(["./Zlib"],
function(f){k=f})}})})},"esri/tasks/ImageServiceIdentifyTask":function(){define("esri/tasks/ImageServiceIdentifyTask","dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../request ../geometry/normalizeUtils ./Task ./ImageServiceIdentifyResult".split(" "),function(m,p,f,l,k,h,q,g){m=m(q,{declaredClass:"esri.tasks.ImageServiceIdentifyTask",constructor:function(e){this._url.path+="/identify";this._handler=p.hitch(this,this._handler)},__msigns:[{n:"execute",c:3,a:[{i:0,p:["geometry"]}],e:2}],_handler:function(e,
c,b,d,f){try{var h=new g(e);this._successHandler([h],"onComplete",b,f)}catch(u){this._errorHandler(u,d,f)}},execute:function(e,c,b,d){var f=d.assembly;e=this._encode(p.mixin({},this._url.query,{f:"json"},e.toJson(f&&f[0])));var g=this._handler,h=this._errorHandler;return k({url:this._url.path,content:e,callbackParamName:"callback",load:function(e,f){g(e,f,c,b,d.dfd)},error:function(c){h(c,b,d.dfd)}})},onComplete:function(){}});h._createWrappers(m);f("extend-esri")&&p.setObject("tasks.ImageServiceIdentifyTask",
m,l);return m})},"esri/tasks/ImageServiceIdentifyResult":function(){define("esri/tasks/ImageServiceIdentifyResult","dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../geometry/jsonUtils ./FeatureSet".split(" "),function(m,p,f,l,k,h){m=m(null,{declaredClass:"esri.tasks.ImageServiceIdentifyResult",constructor:function(f){f.catalogItems&&(this.catalogItems=new h(f.catalogItems));f.location&&(this.location=k.fromJson(f.location));this.catalogItemVisibilities=f.catalogItemVisibilities;this.name=
f.name;this.objectId=f.objectId;this.value=f.value;this.processedValues=f.processedValues;this.properties=f.properties}});f("extend-esri")&&p.setObject("tasks.ImageServiceIdentifyResult",m,l);return m})},"esri/tasks/ImageServiceIdentifyParameters":function(){define("esri/tasks/ImageServiceIdentifyParameters","dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/_base/array dojo/has ../kernel ../lang ../geometry/jsonUtils".split(" "),function(m,p,f,l,k,h,q,g){m=m(null,{declaredClass:"esri.tasks.ImageServiceIdentifyParameters",
geometry:null,mosaicRule:null,renderingRule:null,renderingRules:null,pixelSizeX:null,pixelSizeY:null,pixelSize:null,returnGeometry:!1,returnCatalogItems:!0,timeExtent:null,maxItemCount:null,returnPixelValues:!0,toJson:function(e){var c=e&&e.geometry||this.geometry;e={geometry:c,returnGeometry:this.returnGeometry,returnCatalogItems:this.returnCatalogItems,mosaicRule:this.mosaicRule?f.toJson(this.mosaicRule.toJson()):null,renderingRule:this.renderingRule?f.toJson(this.renderingRule.toJson()):null};
c&&(e.geometryType=g.getJsonType(c));c=this.timeExtent;e.time=c?c.toJson().join(","):null;q.isDefined(this.pixelSizeX)&&q.isDefined(this.pixelSizeY)?e.pixelSize=f.toJson({x:parseFloat(this.pixelSizeX),y:parseFloat(this.pixelSizeY)}):this.pixelSize&&(e.pixelSize=this.pixelSize?f.toJson(this.pixelSize.toJson()):null);this.renderingRules&&(e.renderingRules=f.toJson(l.map(this.renderingRules,function(b){return b.toJson()})));q.isDefined(this.returnPixelValues)&&(e.returnPixelValues=this.returnPixelValues);
q.isDefined(this.maxItemCount)&&(e.maxItemCount=this.maxItemCount);return e}});k("extend-esri")&&p.setObject("tasks.ImageServiceIdentifyParameters",m,h);return m})},"sixmaps/map/layers/JsonConverter":function(){define(["dojo/query","sixmaps/lib/esriJsonConverters","sixmaps/lib/kmlGpxToGeoJson"],function(m,p,f){function l(f){f=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(f);f.shift();return f.map(function(f){return parseInt(f,16)}).reverse()}function k(f){f&&f.normalize&&f.normalize();
return f&&f.firstChild&&f.firstChild.nodeValue||""}return{esriToGeoJson:p.esriConverter().toGeoJson,geoJsonToEsri:p.geoJsonConverter().toEsri,kmlToGeoJson:function(h){"string"==typeof h&&(h=(new DOMParser).parseFromString(h,"text/xml"));return f.kml(h)},gpxToGeoJson:function(h){"string"==typeof h&&(h=(new DOMParser).parseFromString(h,"text/xml"));return f.gpx(h)},kmlToEsri:function(f){var h={};"string"==typeof f&&(f=(new DOMParser).parseFromString(f,"text/xml"));m("Document Style",f).forEach(function(f){var e=
k(m("IconStyle Icon href",f)[0]),c=k(m("LineStyle color",f)[0]);if(e)e={height:20,width:20,angle:0,xoffset:0,yoffset:0,type:"esriPMS",url:e};else if(c)e={type:"esriSLS",style:"esriSLSSolid",color:l(c),width:1};else{e={size:"auto",angle:0,xoffset:0,yoffset:0,type:"esriSMS"};if(c=k(m("IconStyle color",f)[0]))e.color=l(c);if(c=k(m("IconStyle color",f)[0]))e.size*=c}h["#"+f.getAttribute("id")]=e});m("Document StyleMap",f).forEach(function(f){var e=f.getAttribute("id");f=k(m("Pair styleUrl",f)[0]);h["#"+
e]=h[f]});f=this.kmlToGeoJson(f,{styles:!0});f=this.geoJsonToEsri(f);f.features.forEach(function(f){var e=h[f.attributes.styleUrl];e&&(f.symbol=JSON.parse(JSON.stringify(e)))});return f},gpxToEsri:function(h){"string"==typeof h&&(h=(new DOMParser).parseFromString(kml,"text/xml"));return p.geoJsonConverter().toEsri(f.gpx(h))}}})},"sixmaps/lib/esriJsonConverters":function(){(function(){function m(f){var h=0,g=0,e=f.length,c=f[g],b;for(g;g<e-1;g++)b=f[g+1],h+=(b[0]-c[0])*(b[1]+c[1]),c=b;return 0<=h}
function p(){function f(f){var e,c,b;if(f){if((f.x&&"NaN"!==f.x||0===f.x)&&(f.y&&"NaN"!==f.y||0===f.y))b="Point",c=[f.x,f.y];else if(f.points&&f.points.length)b="MultiPoint",c=f.points;else if(f.paths&&f.paths.length)f=f.paths,1===f.length?(b="LineString",c=f[0]):(b="MultiLineString",c=f);else if(f.rings&&f.rings.length){b=[];f=f.rings;for(e=0;e<f.length;e++)c=f[e],m(c)?b.push([c]):0<b.length&&b[b.length-1].push(c);1<b.length?(c=b,b="MultiPolygon"):(c=b.pop(),b="Polygon")}e=c&&b?{type:b,coordinates:c}:
null}return e}function k(g){var e=null,c,b;if(g&&(e={type:"Feature"},g.geometry&&(e.geometry=f(g.geometry)),g.attributes)){b={};for(c in g.attributes)b[c]=g.attributes[c];e.properties=b}return e}return{toGeoJson:function(g){var e,c,b;if(g)if(g.features)for(e={type:"FeatureCollection",features:[]},c=g.features,g=0;g<c.length;g++)(b=k(c[g]))&&e.features.push(b);else e=g.geometry?k(g):f(g);return e}}}function f(){function f(c){var b,d;if("Point"===c)b="esriGeometryPoint";else if("MultiPoint"===c)b="esriGeometryMultipoint",
d="points";else if("LineString"===c||"MultiLineString"===c)b="esriGeometryPolyline",d="paths";else if("Polygon"===c||"MultiPolygon"===c)b="esriGeometryPolygon",d="rings";return{type:b,geomHolder:d}}function k(c){var b,d,e=[],f;b=0;for(d=c.length;b<d;b++)f=c[b],0==b!=m(f)&&(f=f.reverse()),e.push(f);return e}function g(c){var b,d,e,g,h;if("GeometryCollection"===c.type)for(d=[c.geometries.shift()],b=f(d[0].type),e=0;e<c.geometries.length;e++){g=b.type;h=c.geometries[e].type;var l=!1;"esriGeometryPoint"!==
g&&"esriGeometryMultipoint"!==g||"Point"!==h&&"MultiPoint"!==h?"esriGeometryPolyline"!==g||"LineString"!==h&&"MultiLineString"!==h?"esriGeometryPolygon"!==g||"Polygon"!==h&&"MultiPolygon"!==h||(l=!0):l=!0:l=!0;l&&d.push(c.geometries[e])}else b=f(c.type),d=[c];"esriGeometryPoint"===b.type&&1<d.length&&(b=f("MultiPoint"));c={spatialReference:{wkid:4326}};if("esriGeometryPoint"===b.type)0===d[0].coordinates.length?(c.x=null,c.y=null):(c.x=d[0].coordinates[0],c.y=d[0].coordinates[1]);else for(c[b.geomHolder]=
[],e=0;e<d.length;e++){g=d[e];var m=l=h=void 0;if("MultiPoint"===g.type||"MultiLineString"===g.type)m=g.coordinates;else if("Point"===g.type||"LineString"===g.type)m=[g.coordinates];else if("Polygon"===g.type)m=k(g.coordinates);else if("MultiPolygon"===g.type)for(m=[],h=0,l=g.coordinates.length;h<l;h++)m.push(k(g.coordinates[h])[0]);h=m;for(g=0;g<h.length;g++)c[b.geomHolder].push(h[g])}return c}function e(c){var b,d,e;if(c&&(b={},c.geometry&&(b.geometry=g(c.geometry)),c.properties)){e={};for(d in c.properties)e[d]=
c.properties[d];b.attributes=e}return b}return{toEsri:function(c){var b,d,f;if(c)if("FeatureCollection"===c.type)for(b={features:[]},d=c.features,c=0;c<d.length;c++)(f=e(d[c]))&&b.features.push(f);else b="Feature"===c.type?e(c):g(c);return b}}}var l;l="undefined"!==typeof exports&&null!==exports?exports:this;if("function"===typeof define){var k={esriConverter:p,geoJsonConverter:f};define([],function(){return k})}else l.esriConverter=p,l.geoJsonConverter=f}).call(this)},"sixmaps/lib/kmlGpxToGeoJson":function(){define([],
function(){return function(){function m(b){if(!b||!b.length)return 0;for(var c=0,d=0;c<b.length;c++)d=(d<<5)-d+b.charCodeAt(c)|0;return d}function p(b,c){var d=b.getElementsByTagName(c);return d.length?d[0]:null}function f(b){for(var c=0,d=[];c<b.length;c++)d[c]=parseFloat(b[c]);return d}function l(b){b&&b.normalize&&b.normalize();return b&&b.firstChild&&b.firstChild.nodeValue||""}function k(b){b=b.replace(e,"").split(c);for(var d=[],h=0;h<b.length;h++)d.push(f(b[h].replace(g,"").split(",")));return d}
function h(b){var c=[parseFloat(b.getAttribute("lon")),parseFloat(b.getAttribute("lat"))];(b=p(b,"ele"))&&c.push(parseFloat(l(b)));return c}function q(){return{type:"FeatureCollection",features:[]}}var g=/\s*/g,e=/^\s*|\s*$/g,c=/\s+/,b;"undefined"!==typeof XMLSerializer?b=new XMLSerializer:"object"!==typeof exports||"object"!==typeof process||process.browser||(b=new (require("xmldom").XMLSerializer));return{kml:function(c,e){function d(b){var c,d;b=b||"";"#"===b.substr(0,1)&&(b=b.substr(1));if(6===
b.length||3===b.length)c=b;8===b.length&&(d=parseInt(b.substr(0,2),16)/255,c=b.substr(2));return[c,isNaN(d)?void 0:d]}function h(b){b=b.getElementsByTagName("coord");for(var c=[],d=0;d<b.length;d++)c.push(f(l(b[d]).split(" ")));return c}function r(b){var c,d,e,m,q=[];if(p(b,"MultiGeometry"))return r(p(b,"MultiGeometry"));if(p(b,"MultiTrack"))return r(p(b,"MultiTrack"));for(e=0;e<z.length;e++)if(d=b.getElementsByTagName(z[e]))for(m=0;m<d.length;m++)if(c=d[m],"Point"==z[e])q.push({type:"Point",coordinates:f(l(p(c,
"coordinates")).replace(g,"").split(","))});else if("LineString"==z[e])q.push({type:"LineString",coordinates:k(l(p(c,"coordinates")))});else if("Polygon"==z[e]){var t=c.getElementsByTagName("LinearRing"),u=[];for(c=0;c<t.length;c++)u.push(k(l(p(t[c],"coordinates"))));q.push({type:"Polygon",coordinates:u})}else"Track"==z[e]&&q.push({type:"LineString",coordinates:h(c)});return q}function x(b){var c=r(b),e,f={},g=l(p(b,"name")),h=l(p(b,"styleUrl")),k=l(p(b,"description")),m=p(b,"TimeSpan");e=p(b,"ExtendedData");
var q=p(b,"LineStyle");b=p(b,"PolyStyle");if(!c.length)return[];g&&(f.name=g);h&&(f.styleUrl=h,y[h]&&(f.styleHash=y[h]));k&&(f.description=k);m&&(g=l(p(m,"begin")),m=l(p(m,"end")),f.timespan={begin:g,end:m});q&&(g=d(l(p(q,"color"))),m=g[0],g=g[1],q=parseFloat(l(p(q,"width"))),m&&(f.stroke=m),isNaN(g)||(f["stroke-opacity"]=g),isNaN(q)||(f["stroke-width"]=q));b&&(m=d(l(p(b,"color"))),q=m[0],m=m[1],g=l(p(b,"fill")),b=l(p(b,"outline")),q&&(f.fill=q),isNaN(m)||(f["fill-opacity"]=m),g&&(f["fill-opacity"]=
"1"===g?1:0),b&&(f["stroke-opacity"]="1"===b?1:0));if(e){b=e.getElementsByTagName("Data");q=e.getElementsByTagName("SimpleData");for(e=0;e<b.length;e++)f[b[e].getAttribute("name")]=l(p(b[e],"value"));for(e=0;e<q.length;e++)f[q[e].getAttribute("name")]=l(q[e])}return[{type:"Feature",geometry:1===c.length?c[0]:{type:"GeometryCollection",geometries:c},properties:f}]}for(var w=q(),y={},z=["Polygon","LineString","Point","Track"],B=c.getElementsByTagName("Placemark"),A=c.getElementsByTagName("Style"),C=
0;C<A.length;C++)y["#"+A[C].getAttribute("id")]=m(b.serializeToString(A[C])).toString(16);for(A=0;A<B.length;A++)w.features=w.features.concat(x(B[A]));return w},gpx:function(b,c){function d(b,c){for(var d=b.getElementsByTagName(c),e=[],f=0;f<d.length;f++)e.push(h(d[f]));return e}function e(b){for(var c=b.getElementsByTagName("trkseg"),e=[],f=0;f<c.length;f++)e.push(d(c[f],"trkpt"));return{type:"Feature",properties:k(b),geometry:{type:1===e.length?"LineString":"MultiLineString",coordinates:1===e.length?
e[0]:e}}}function f(b){return{type:"Feature",properties:k(b),geometry:{type:"LineString",coordinates:d(b,"rtept")}}}function g(b){var c=k(b);c.sym=l(p(b,"sym"));return{type:"Feature",properties:c,geometry:{type:"Point",coordinates:h(b)}}}function k(b){var c="name desc author copyright link time keywords".split(" "),d={},e;for(e=0;e<c.length;e++)d[c[e]]=l(p(b,c[e]));b={};for(var f in d)d[f]&&(b[f]=d[f]);return b}var m,r=b.getElementsByTagName("trk"),B=b.getElementsByTagName("rte"),A=b.getElementsByTagName("wpt"),
C=q();for(m=0;m<r.length;m++)C.features.push(e(r[m]));for(m=0;m<B.length;m++)C.features.push(f(B[m]));for(m=0;m<A.length;m++)C.features.push(g(A[m]));return C}}}()})},"sixmaps/dijits/takeMeTo/TakeMeToResults":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/json dojo/_base/lang dojo/aspect dojo/Deferred dojo/dom-construct dojo/dom-style dojo/data/ItemFileWriteStore dojo/on dojo/store/DataStore dojo/topic dijit/form/Button dijit/layout/ContentPane dijit/_WidgetBase dijit/Menu dijit/MenuItem dijit/popup dojox/grid/DataGrid esri/lang sixmaps/dijits/Export".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x,w,y,z,B){var A=p("ContextIcon",[u],{constructor:function(b,c){this.inherited(arguments);this.domNode=q.create("i",{"class":"icon-chevron-sign-right",title:"Open Menu",style:"font-size:12pt;"})}});return p("sixmaps.dijits.takeMeTo.TakeMeToResults",[y],{autoWidth:null,autoHeight:10,fastScroll:!1,selectable:!0,mapGraphics:null,selectSingleResult:!0,selectFirstResult:null,warnOnInvalidGeometrySelected:!0,showExportButtons:!1,title:"",rowActions:null,constructor:function(b,
e){var f=this;b.structure&&(b.structure=l.clone(b.structure));p.safeMixin(this,b);if(f.rowActions)if(1<f.rowActions.length)f.structure.push({name:"Actions",formatter:function(b,e,g){b=g.grid.getItem(e);var h=g.grid.store.getValue(b,"_feature"),k=new A,l=new t;m.forEach(f.rowActions,function(b){l.addChild(new x({label:b.alias||b.name,style:"text-align:center",onClick:function(){d.publish("sixmaps_action",b,h)}}))});l.startup();c(k,"click",function(){w.open({popup:l,around:k.domNode,orient:["after",
"before"],onExecute:function(){w.close(l)},onCancel:function(){w.close(l)}});c.once(l,"blur",function(){w.close(l)})});return k},styles:"text-align: center;",width:"15%"});else{var g=f.rowActions[0];f.structure.push({name:"Actions",formatter:function(b,c,e){b=e.grid.getItem(c);var f=e.grid.store.getValue(b,"_feature");return new r({label:g.alias||g.name,onClick:function(){d.publish("sixmaps_action",g,f)}})},styles:"text-align: center;",width:"20%"})}f.exporter=new B({title:f.title});if(!f.autoWidth&&
!f.rowActions&&f.structure)if(m.some(f.structure,function(b){return b.width&&!(""+b.width).match(/%/)}))!1!==f.autoWidth&&(f.autoWidth=!0);else{var h=100/f.structure.length;m.forEach(f.structure,function(b){b.width=h+"%"})}m.forEach(f.structure,function(b){b.formats&&!b.formatter&&(l.isArray(b.formats)||(b.formats=[b.formats]),b.formatters=[],m.forEach(b.formats,function(c){(c=f.formatters[c])&&b.formatters.push(c)}),b.formatter=function(c){m.forEach(b.formatters,function(b){c=b(c)});return c});b.moreInfoUrl&&
!b.formatter?b.formatter=function(c,d,e){c=e.grid.getItem(d);d=e.grid.store.getValue(c,"_feature");"string"==typeof b.moreInfoUrl&&(b.moreInfoUrl={url:b.moreInfoUrl});if(c=z.substitute(d.attributes,b.moreInfoUrl.url)){e=z.substitute(d.attributes,b.moreInfoUrl.label||d.attributes[b.field]||b.name);d=z.substitute(d.attributes,b.moreInfoUrl.title||"More Info");var f="undefined"==typeof b.moreInfoUrl.target?"_blank":b.moreInfoUrl.target;c=q.create("a",{href:c,title:d,target:f,onclick:function(){window.open("about:blank",
f).close();return!0}});q.place(document.createTextNode(e),c);return new v({doLayout:!1,style:"padding:0px;text-overflow:ellipsis;",content:c})}return b.moreInfoUrl.noUrlLabel||""}:b.compositeValue&&(b.formatter=function(c,d,e){c=e.grid.getItem(d);c=e.grid.store.getValue(c,"_feature");e={removeNulls:!0,removeWhiteSpace:!0};"string"==typeof b.compositeValue&&(b.compositeValue={label:b.compositeValue,replace:null});l.mixin(e,b.compositeValue);c=z.substitute(c.attributes,b.compositeValue.label);b.compositeValue.replace&&
(c=c.replace(new RegExp(b.compositeValue.replace.match,b.compositeValue.replace.options),b.compositeValue.replace.replacement));e.removeNulls&&(c=c.replace(/\bnull\b/ig,""));e.removeWhiteSpace&&(c=c.replace(/[ ]{2,}/g," "));e.removeWhiteSpace&&(c=c.replace(/(^ *| *$)/g,""));e=document.createTextNode(c);return new v({doLayout:!1,style:"padding:0px",content:e})})});c(f,"rowMouseOver",function(b){f.loadSelectedItems().then(function(){f.onResultMouseOver(f.store.getValue(f.getItem(b.rowIndex),"_feature"))})});
c(f,"rowMouseOut",function(b){f.loadSelectedItems().then(function(){f.onResultMouseOut(f.store.getValue(f.getItem(b.rowIndex),"_feature"))})});c(f,"selected",function(b){f.loadSelectedItems().then(function(){f.onResultSelected(f.store.getValue(f.getItem(b),"_feature"))})});c(f,"deselected",function(b){f.loadSelectedItems().then(function(){var c=f.getItem(b);c&&f.onResultDeselected(f.store.getValue(c,"_feature"))})});c(f,"selectionChanged",function(){f.loadSelectedItems().then(function(){f.onResultSelectionChanged(m.map(f.selection.getSelected(),
function(b,c){return f.store.getValue(b,"_feature")}))})})},destroy:function(){this.inherited(arguments);this.exportNode&&q.destroy(this.exportNode)},loadSelectedItems:function(){var b=this;b.selection.getSelected();var c=new h;setTimeout(function(){if(b._isLoaded)c.resolve();else var d=k.after(b,"_onFetchComplete",function(){b._isLoaded&&(d.remove(),c.resolve())})},1);return c},postCreate:function(){this.inherited(arguments);this.autoWidth||g.set(this.domNode,{width:"100%"});this.clear()},startup:function(){this.inherited(arguments);
this.showExportButtons&&!this.exportNode&&(this.exportNode=q.create("div",{style:"text-align:right"},this.domNode,"before"),q.create("span",{innerHTML:"Export JSON |",onclick:l.hitch(this,this.exportFeaturesToJson)},this.exportNode),q.create("span",{innerHTML:"Export CSV",onclick:l.hitch(this,this.exportFeaturesToCsv)},this.exportNode))},exportFeaturesToJson:function(){var b=new h;this.objectStore.query().then(function(c){c=m.map(c,function(b,c){var d=b._feature,e;for(e in b)"_feature"!=e&&(d.attributes[e]=
b[e]);return d.toJson()});b.resolve(c)});return b},exportFeaturesToCsv:function(){var b=new h,c=[],d=[];this.objectStore.query().then(function(e){m.forEach(e,function(b,e){var f=[],g;for(g in b)if("_feature"!=g){0==e&&c.push('"'+g+'"');var h=b[g];"undefined"==typeof h&&(h="");f.push('"'+h+'"')}d.push(f.join(","))});e=c.join(",");e+="\n"+d.join("\n");b.resolve(e)});return b},downloadFeaturesAsCsv:function(){var b=this;b.exportFeaturesToCsv().then(function(c){var d=prompt("Export:",(b.realTitle||b.title||
"features")+".csv");null!=d&&b.exporter.download(d,c,"application/octet-stream")})},downloadFeaturesAsJson:function(){var b=this;b.exportFeaturesToJson().then(function(c){var d=prompt("Export:",(b.realTitle||b.title||"features")+".json");null!=d&&b.exporter.download(d,c,"application/octet-stream")})},clear:function(){this.selection.clear();this.setStore(new e({data:{items:[]}}));this.features=[]},highlightFeature:function(b){for(var c=0,d=this.rowCount;c<d;c++)if(this.getItem(c)&&this.store.getValue(this.getItem(c),
"_feature")===b){this.rows.setOverRow(c);this.scrollToRow(c);break}},clearFeatureHighlight:function(){this.rows.setOverRow(null)},clearSelection:function(){this.selection.clear()},showResults:function(c){if((this.features=c=c&&(c.features||c))&&c.length){this.showMessage(null);c=m.map(c,function(b){var c=l.mixin({},b.attributes);return l.mixin(c,{_feature:l.clone(b)})});var d=new e({data:{items:c}});this.objectStore=new b({store:d});this.selection.clear();this.setStore(d);this.filterParams&&this.filter(this.filterParams);
(this.selectFirstResult&&0<c.length||this.selectSingleResult&&1==c.length)&&this.selection.select(0)}else this.clear(),this.showMessage("No results")},displayLoadingMessage:function(){this.clear();this.showMessage(this.loadingMessage)},displayError:function(b){this.clear();this.showMessage("\x3cspan class\x3d'dojoxGridError'\x3e"+b+"\x3c/span\x3e")},_setMapGraphicsAttr:function(b){this._set("mapGraphics",b);null!=b&&(this.connectMouseoversToMapGraphics(b),this.connectSelectionToMapGraphics(b))},connectMouseoversToMapGraphics:function(b){k.after(this,
"onResultMouseOver",function(c){b.highlightFeature(c)},!0);k.after(this,"onResultMouseOut",function(){b.clearHighlight()})},connectSelectionToMapGraphics:function(b){c(this,"resultSelectionChanged",function(c){b.clear();m.forEach(c,function(c){b.add(c)});b.zoomToFeatures(c)})},onResultMouseOver:function(b){},onResultMouseOut:function(b){},onResultSelected:function(b){},onRowAction:function(b){},onResultDeselected:function(b){},onResultSelectionChanged:function(b){b&&0!=b.length&&this.warnOnInvalidGeometrySelected&&
(m.some(b,function(b){if(!b.geometry||b.geometry.rings&&0==b.geometry.rings.length)return!0})?this.showMessage("\x3cspan class\x3d'dojoxGridError'\x3eWarning: "+(1==b.length?"The selected feature":"One or more selected features")+" doesn't contain geometry.\x3c/span\x3e"):this.showMessage())}})})},"dojox/grid/DataGrid":function(){define("dojox/grid/DataGrid","../main dojo/_base/array dojo/_base/lang dojo/_base/json dojo/_base/sniff dojo/_base/declare ./_Grid ./DataSelection dojo/_base/html dojo/has dojo/has!dojo-bidi?./bidi/_BidiMixin".split(" "),
function(m,p,f,l,k,h,q,g,e){var c=h("dojox.grid.DataGrid",q,{store:null,query:null,queryOptions:null,fetchText:"...",sortFields:null,updateDelay:1,items:null,_store_connects:null,_by_idty:null,_by_idx:null,_cache:null,_pages:null,_pending_requests:null,_bop:-1,_eop:-1,_requests:0,rowCount:0,_isLoaded:!1,_isLoading:!1,keepSelection:!1,postCreate:function(){this._pages=[];this._store_connects=[];this._by_idty={};this._by_idx=[];this._cache=[];this._pending_requests={};this._setStore(this.store);this.inherited(arguments)},
destroy:function(){this.selection.destroy();this.inherited(arguments)},createSelection:function(){this.selection=new g(this)},get:function(b,c){if(c&&"_item"==this.field&&!this.fields)return c;if(c&&this.fields){var d=[],e=this.grid.store;p.forEach(this.fields,function(b){d=d.concat(e.getValues(c,b))});return d}return c||"string"!==typeof b?c?this.field?"_item"==this.field?c:this.grid.store.getValue(c,this.field):this.value:this.defaultValue:this.inherited(arguments)},_checkUpdateStatus:function(){if(0<
this.updateDelay){var b=!1;this._endUpdateDelay&&(clearTimeout(this._endUpdateDelay),delete this._endUpdateDelay,b=!0);this.updating||(this.beginUpdate(),b=!0);if(b){var c=this;this._endUpdateDelay=setTimeout(function(){delete c._endUpdateDelay;c.endUpdate()},this.updateDelay)}}},_onSet:function(b,c,e,f){this._checkUpdateStatus();b=this.getItemIndex(b);-1<b&&this.updateRow(b)},_createItem:function(b,c){c=this._hasIdentity?this.store.getIdentity(b):l.toJson(this.query)+":idx:"+c+":sort:"+l.toJson(this.getSortProps());
return this._by_idty[c]={idty:c,item:b}},_addItem:function(b,c,e){this._by_idx[c]=this._createItem(b,c);e||this.updateRow(c)},_onNew:function(b,c){this._checkUpdateStatus();c=this.get("rowCount");this._addingItem=!0;this.updateRowCount(c+1);this._addingItem=!1;this._addItem(b,c);this.showMessage()},_onDelete:function(b){this._checkUpdateStatus();b=this._getItemIndex(b,!0);if(0<=b){this._pages=[];this._eop=this._bop=-1;var c=this._by_idx[b];this._by_idx.splice(b,1);delete this._by_idty[c.idty];this.updateRowCount(this.get("rowCount")-
1);0===this.get("rowCount")&&this.showMessage(this.noDataMessage)}this.selection.isSelected(b)&&(this.selection.deselect(b),this.selection.selected.splice(b,1))},_onRevert:function(){this._refresh()},setStore:function(b,c,e){this._requestsPending(0)||(this._setQuery(c,e),this._setStore(b),this._refresh(!0))},setQuery:function(b,c){this._requestsPending(0)||(this._setQuery(b,c),this._refresh(!0))},setItems:function(b){this.items=b;this._setStore(this.store);this._refresh(!0)},_setQuery:function(b,
c){this.query=b;this.queryOptions=c||this.queryOptions},_setStore:function(b){this.store&&this._store_connects&&p.forEach(this._store_connects,this.disconnect,this);if(this.store=b){b=this.store.getFeatures();var c=[];this._canEdit=!!b["dojo.data.api.Write"]&&!!b["dojo.data.api.Identity"];this._hasIdentity=!!b["dojo.data.api.Identity"];b["dojo.data.api.Notification"]&&!this.items&&(c.push(this.connect(this.store,"onSet","_onSet")),c.push(this.connect(this.store,"onNew","_onNew")),c.push(this.connect(this.store,
"onDelete","_onDelete")));this._canEdit&&c.push(this.connect(this.store,"revert","_onRevert"));this._store_connects=c}},_onFetchBegin:function(b,c){this.scroller&&(this.rowCount!=b&&(c.isRender?(this.scroller.init(b,this.keepRows,this.rowsPerPage),this.rowCount=b,this._setAutoHeightAttr(this.autoHeight,!0),this._skipRowRenormalize=!0,this.prerender(),this._skipRowRenormalize=!1):this.updateRowCount(b)),b?this.showMessage():(this.views.render(),this._resize(),this.showMessage(this.noDataMessage),this.focus.initFocusView()))},
_onFetchComplete:function(b,c){this.scroller&&(b&&0<b.length&&(p.forEach(b,function(b,d){this._addItem(b,c.start+d,!0)},this),this.updateRows(c.start,b.length),c.isRender?(this.setScrollTop(0),this.postrender()):this._lastScrollTop&&this.setScrollTop(this._lastScrollTop),k("ie")&&e.setSelectable(this.domNode,this.selectable)),delete this._lastScrollTop,this._isLoaded||(this._isLoading=!1,this._isLoaded=!0),this._pending_requests[c.start]=!1)},_onFetchError:function(b,c){delete this._lastScrollTop;
this._isLoaded||(this._isLoading=!1,this._isLoaded=!0,this.showMessage(this.errorMessage));this._pending_requests[c.start]=!1;this.onFetchError(b,c)},onFetchError:function(b,c){},_fetch:function(b,c){b=b||0;if(this.store&&!this._pending_requests[b]){this._isLoaded||this._isLoading||(this._isLoading=!0,this.showMessage(this.loadingMessage));this._pending_requests[b]=!0;try{if(this.items){var d=this.items,e=this.store;this.rowsPerPage=d.length;var g={start:b,count:this.rowsPerPage,isRender:c};this._onFetchBegin(d.length,
g);var h=0;p.forEach(d,function(b){e.isItemLoaded(b)||h++});if(0===h)this._onFetchComplete(d,g);else{var k=function(b){h--;0===h&&this._onFetchComplete(d,g)};p.forEach(d,function(b){e.isItemLoaded(b)||e.loadItem({item:b,onItem:k,scope:this})},this)}}else this.store.fetch({start:b,count:this.rowsPerPage,query:this.query,sort:this.getSortProps(),queryOptions:this.queryOptions,isRender:c,onBegin:f.hitch(this,"_onFetchBegin"),onComplete:f.hitch(this,"_onFetchComplete"),onError:f.hitch(this,"_onFetchError")})}catch(w){this._onFetchError(w,
{start:b,count:this.rowsPerPage})}}},_clearData:function(){this.updateRowCount(0);this._by_idty={};this._by_idx=[];this._pages=[];this._bop=this._eop=-1;this._isLoading=this._isLoaded=!1},getItem:function(b){var c=this._by_idx[b];return!c||c&&!c.item?(this._preparePage(b),null):c.item},getItemIndex:function(b){return this._getItemIndex(b,!1)},_getItemIndex:function(b,c){if(!c&&!this.store.isItem(b))return-1;c=this._hasIdentity?this.store.getIdentity(b):null;for(var d=0,e=this._by_idx.length;d<e;d++){var f=
this._by_idx[d];if(f&&(c&&f.idty==c||f.item===b))return d}return-1},filter:function(b,c){this.query=b;c&&this._clearData();this._fetch()},_getItemAttr:function(b,c){return(b=this.getItem(b))?this.store.getValue(b,c):this.fetchText},_render:function(){this.domNode.parentNode&&(this.scroller.init(this.get("rowCount"),this.keepRows,this.rowsPerPage),this.prerender(),this._fetch(0,!0))},_requestsPending:function(b){return this._pending_requests[b]},_rowToPage:function(b){return this.rowsPerPage?Math.floor(b/
this.rowsPerPage):b},_pageToRow:function(b){return this.rowsPerPage?this.rowsPerPage*b:b},_preparePage:function(b){(b<this._bop||b>=this._eop)&&!this._addingItem&&(b=this._rowToPage(b),this._needPage(b),this._bop=b*this.rowsPerPage,this._eop=this._bop+(this.rowsPerPage||this.get("rowCount")))},_needPage:function(b){this._pages[b]||(this._pages[b]=!0,this._requestPage(b))},_requestPage:function(b){b=this._pageToRow(b);0<Math.min(this.rowsPerPage,this.get("rowCount")-b)&&(this._requests++,this._requestsPending(b)||
setTimeout(f.hitch(this,"_fetch",b,!1),1))},getCellName:function(b){return b.field},_refresh:function(b){this._clearData();this._fetch(0,b)},sort:function(){this.edit.apply();this._lastScrollTop=this.scrollTop;this._refresh()},canSort:function(){return!this._isLoading},getSortProps:function(){var b=this.getCell(this.getSortIndex());if(b){var c=b.sortDesc,e=!(0<this.sortInfo);return[{attribute:b.field,descending:"undefined"==typeof c?e:e?!c:c}]}return this.sortFields?this.sortFields:null},styleRowState:function(b){if(this.store&&
this.store.getState){for(var c=this.store.getState(b.index),e="",f=0,g=["inflight","error","inserting"],h;h=g[f];f++)if(c[h]){e=" dojoxGridRow-"+h;break}b.customClasses+=e}},onStyleRow:function(b){this.styleRowState(b);this.inherited(arguments)},canEdit:function(b,c){return this._canEdit},_copyAttr:function(b,c){b=this.getItem(b);return this.store.getValue(b,c)},doStartEdit:function(b,c){this._cache[c]||(this._cache[c]=this._copyAttr(c,b.field));this.onStartEdit(b,c)},doApplyCellEdit:function(b,c,
e){this.store.fetchItemByIdentity({identity:this._by_idx[c].idty,onItem:f.hitch(this,function(d){var f=this.store.getValue(d,e);"number"==typeof f?b=isNaN(b)?b:parseFloat(b):"boolean"==typeof f?b="true"==b?!0:"false"==b?!1:b:f instanceof Date&&(f=new Date(b),b=isNaN(f.getTime())?b:f);this.store.setValue(d,e,b);this.onApplyCellEdit(b,c,e)})})},doCancelEdit:function(b){this._cache[b]&&(this.updateRow(b),delete this._cache[b]);this.onCancelEdit.apply(this,arguments)},doApplyEdit:function(b,c){this.onApplyEdit(b)},
removeSelectedRows:function(){if(this._canEdit){this.edit.apply();var b=f.hitch(this,function(b){b.length&&(p.forEach(b,this.store.deleteItem,this.store),this.selection.clear())});this.allItemsSelected?this.store.fetch({query:this.query,queryOptions:this.queryOptions,onComplete:b}):b(this.selection.getSelected())}}});c.cell_markupFactory=function(b,c,g){var d=f.trim(e.attr(c,"field")||"");d&&(g.field=d);g.field=g.field||g.name;if(d=f.trim(e.attr(c,"fields")||""))g.fields=d.split(",");b&&b(c,g)};c.markupFactory=
function(b,d,e,g){return q.markupFactory(b,d,e,f.partial(c.cell_markupFactory,g))};return c})},"dojox/grid/_Grid":function(){require({cache:{"url:dojox/grid/resources/_Grid.html":'\x3cdiv hidefocus\x3d"hidefocus" role\x3d"grid" dojoAttachEvent\x3d"onmouseout:_mouseOut"\x3e\r\n\t\x3cdiv class\x3d"dojoxGridMasterHeader" dojoAttachPoint\x3d"viewsHeaderNode" role\x3d"presentation"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dojoxGridMasterView" dojoAttachPoint\x3d"viewsNode" role\x3d"presentation"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dojoxGridMasterMessages" style\x3d"display: none;" dojoAttachPoint\x3d"messagesNode"\x3e\x3c/div\x3e\r\n\t\x3cspan dojoAttachPoint\x3d"lastFocusNode" tabindex\x3d"0"\x3e\x3c/span\x3e\r\n\x3c/div\x3e\r\n'}});
define("dojox/grid/_Grid","dojo/_base/kernel ../main dojo/_base/declare ./_Events ./_Scroller ./_Layout ./_View ./_ViewManager ./_RowManager ./_FocusManager ./_EditManager ./Selection ./_RowSelector ./util dijit/_Widget dijit/_TemplatedMixin dijit/CheckedMenuItem dojo/text!./resources/_Grid.html dojo/string dojo/_base/array dojo/_base/lang dojo/_base/sniff dojox/html/metrics dojo/_base/html dojo/query dojo/dnd/common dojo/i18n!dijit/nls/loading".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,
x,w,y,z,B,A,C,F,E){m.isCopyKey||(m.isCopyKey=m.dnd.getCopyKeyState);f=f("dojox.grid._Grid",[u,t,l],{templateString:w,classTag:"dojoxGrid",rowCount:5,keepRows:75,rowsPerPage:25,autoWidth:!1,initialWidth:"",autoHeight:"",rowHeight:0,autoRender:!0,defaultHeight:"15em",height:"",structure:null,elasticView:-1,singleClickEdit:!1,selectionMode:"extended",rowSelector:"",columnReordering:!1,headerMenu:null,placeholderLabel:"GridColumns",selectable:!1,_click:null,loadingMessage:"\x3cspan class\x3d'dojoxGridLoading'\x3e${loadingState}\x3c/span\x3e",
errorMessage:"\x3cspan class\x3d'dojoxGridError'\x3e${errorState}\x3c/span\x3e",noDataMessage:"",escapeHTMLInData:!0,formatterScope:null,editable:!1,summary:"",_setSummaryAttr:"domNode",sortInfo:0,_placeholders:null,_layoutClass:h,buildRendering:function(){this.inherited(arguments);this.domNode.getAttribute("tabIndex")||(this.domNode.tabIndex="0");this.createScroller();this.createLayout();this.createViews();this.createManagers();this.createSelection();this.connect(this.selection,"onSelected","onSelected");
this.connect(this.selection,"onDeselected","onDeselected");this.connect(this.selection,"onChanged","onSelectionChanged");C.initOnFontResize();this.connect(C,"onFontResize","textSizeChanged");v.funnelEvents(this.domNode,this,"doKeyEvent",v.keyEvents);"none"!=this.selectionMode&&this.domNode.setAttribute("aria-multiselectable","single"==this.selectionMode?"false":"true");F.addClass(this.domNode,this.classTag);this.isLeftToRight()||F.addClass(this.domNode,this.classTag+"Rtl");0<this.rowHeight&&F.addClass(this.viewsNode,
this.classTag+"FixedRowHeight")},postMixInProperties:function(){this.inherited(arguments);var b=m.i18n.getLocalization("dijit","loading",this.lang);this.loadingMessage=y.substitute(this.loadingMessage,b);this.errorMessage=y.substitute(this.errorMessage,b);this.srcNodeRef&&this.srcNodeRef.style.height&&(this.height=this.srcNodeRef.style.height);this._setAutoHeightAttr(this.autoHeight,!0);this.lastScrollTop=this.scrollTop=0},postCreate:function(){this._placeholders=[];this._setHeaderMenuAttr(this.headerMenu);
this._setStructureAttr(this.structure);this._click=[];this.inherited(arguments);this.domNode&&this.autoWidth&&this.initialWidth&&(this.domNode.style.width=this.initialWidth);this.domNode&&!this.editable&&F.attr(this.domNode,"aria-readonly","true")},destroy:function(){this.domNode.onReveal=null;this.domNode.onSizeChange=null;delete this._click;this.scroller&&(this.scroller.destroy(),delete this.scroller);this.edit.destroy();delete this.edit;this.views.destroyViews();this.focus&&(this.focus.destroy(),
delete this.focus);this.headerMenu&&this._placeholders.length&&(z.forEach(this._placeholders,function(b){b.unReplace(!0)}),this.headerMenu.unBindDomNode(this.viewsHeaderNode));this.inherited(arguments)},_setAutoHeightAttr:function(b,c){"string"==typeof b&&(b=b&&"false"!=b?"true"==b?!0:window.parseInt(b,10):!1);"number"==typeof b&&(isNaN(b)&&(b=!1),0>b?b=!0:0===b&&(b=!1));this.autoHeight=b;this._autoHeight="boolean"==typeof b?b:"number"==typeof b?b>=this.get("rowCount"):!1;this._started&&!c&&this.render()},
_getRowCountAttr:function(){return this.updating&&this.invalidated&&void 0!=this.invalidated.rowCount?this.invalidated.rowCount:this.rowCount},textSizeChanged:function(){this.render()},sizeChange:function(){this.update()},createManagers:function(){this.rows=new e(this);this.focus=new c(this);this.edit=new b(this)},createSelection:function(){this.selection=new d(this)},createScroller:function(){this.scroller=new k;this.scroller.grid=this;this.scroller.renderRow=B.hitch(this,"renderRow");this.scroller.removeRow=
B.hitch(this,"rowRemoved")},createLayout:function(){this.layout=new this._layoutClass(this);this.connect(this.layout,"moveColumn","onMoveColumn")},onMoveColumn:function(){this.update()},onResizeColumn:function(b){},createViews:function(){this.views=new g(this);this.views.createView=B.hitch(this,"createView")},createView:function(b,c){b=new (B.getObject(b))({grid:this,index:c});this.viewsNode.appendChild(b.domNode);this.viewsHeaderNode.appendChild(b.headerNode);this.views.addView(b);F.attr(this.domNode,
"align",this.isLeftToRight()?"left":"right");return b},buildViews:function(){for(var b=0,c;c=this.layout.structure[b];b++)this.createView(c.type||p._scopeName+".grid._View",b).setStructure(c);this.scroller.setContentNodes(this.views.getContentNodes())},_setStructureAttr:function(b){b&&B.isString(b)&&(m.deprecated("dojox.grid._Grid.set('structure', 'objVar')","use dojox.grid._Grid.set('structure', objVar) instead","2.0"),b=B.getObject(b));this.structure=b;if(!b)if(this.layout.structure)b=this.layout.structure;
else return;this.views.destroyViews();this.focus.focusView=null;b!==this.layout.structure&&this.layout.setStructure(b);this._structureChanged()},setStructure:function(b){m.deprecated("dojox.grid._Grid.setStructure(obj)","use dojox.grid._Grid.set('structure', obj) instead.","2.0");this._setStructureAttr(b)},getColumnTogglingItems:function(){var b,c=[];b=z.map(this.layout.cells,function(b){b.menuItems||(b.menuItems=[]);var d=this,e=new x({label:b.name,checked:!b.hidden,_gridCell:b,onChange:function(b){if(d.layout.setColumnVisibility(this._gridCell.index,
b)){var c=this._gridCell.menuItems;1<c.length&&z.forEach(c,function(c){c!==this&&c.setAttribute("checked",b)},this);b=z.filter(d.layout.cells,function(b){1<b.menuItems.length?z.forEach(b.menuItems,"item.set('disabled', false);"):b.menuItems[0].set("disabled",!1);return!b.hidden});1==b.length&&z.forEach(b[0].menuItems,"item.set('disabled', true);")}},destroy:function(){var b=z.indexOf(this._gridCell.menuItems,this);this._gridCell.menuItems.splice(b,1);delete this._gridCell;x.prototype.destroy.apply(this,
arguments)}});b.menuItems.push(e);b.hidden||c.push(e);return e},this);1==c.length&&c[0].set("disabled",!0);return b},_setHeaderMenuAttr:function(b){this._placeholders&&this._placeholders.length&&(z.forEach(this._placeholders,function(b){b.unReplace(!0)}),this._placeholders=[]);this.headerMenu&&this.headerMenu.unBindDomNode(this.viewsHeaderNode);if(this.headerMenu=b)this.headerMenu.bindDomNode(this.viewsHeaderNode),this.headerMenu.getPlaceholders&&(this._placeholders=this.headerMenu.getPlaceholders(this.placeholderLabel))},
setHeaderMenu:function(b){m.deprecated("dojox.grid._Grid.setHeaderMenu(obj)","use dojox.grid._Grid.set('headerMenu', obj) instead.","2.0");this._setHeaderMenuAttr(b)},setupHeaderMenu:function(){this._placeholders&&this._placeholders.length&&z.forEach(this._placeholders,function(b){b._replaced&&b.unReplace(!0);b.replace(this.getColumnTogglingItems())},this)},_fetch:function(b){this.setScrollTop(0)},getItem:function(b){return null},showMessage:function(b){b?(this.messagesNode.innerHTML=b,this.messagesNode.style.display=
""):(this.messagesNode.innerHTML="",this.messagesNode.style.display="none")},_structureChanged:function(){this.buildViews();this.autoRender&&this._started&&this.render()},hasLayout:function(){return this.layout.cells.length},resize:function(b,c){this._pendingChangeSize=b;this._pendingResultSize=c;this.sizeChange()},_getPadBorder:function(){return this._padBorder=this._padBorder||F._getPadBorderExtents(this.domNode)},_getHeaderHeight:function(){var b=this.viewsHeaderNode.style,c="none"==b.display?
0:this.views.measureHeader();b.height=c+"px";this.views.normalizeHeaderNodeHeight();return c},_resize:function(b,c){b=b||this._pendingChangeSize;c=c||this._pendingResultSize;delete this._pendingChangeSize;delete this._pendingResultSize;if(this.domNode){var d=this.domNode.parentNode;if(d&&1==d.nodeType&&this.hasLayout()&&"hidden"!=d.style.visibility&&"none"!=d.style.display){var e=this._getPadBorder(),f=void 0,g;this._autoHeight?this.domNode.style.height="auto":"number"==typeof this.autoHeight?(g=
f=this._getHeaderHeight(),g+=this.scroller.averageRowHeight*this.autoHeight,this.domNode.style.height=g+"px"):this.domNode.clientHeight<=e.h&&(d==document.body?this.domNode.style.height=this.defaultHeight:this.height?this.domNode.style.height=this.height:this.fitTo="parent");c&&(b=c);!this._autoHeight&&b?(F.marginBox(this.domNode,b),this.height=this.domNode.style.height,delete this.fitTo):"parent"==this.fitTo&&(g=this._parentContentBoxHeight=0<this._parentContentBoxHeight?this._parentContentBoxHeight:
F._getContentBox(d).h,this.domNode.style.height=Math.max(0,g)+"px");b=z.some(this.views.views,function(b){return b.flexCells});this._autoHeight||0!==(g||F._getContentBox(this.domNode).h)?(this.viewsHeaderNode.style.display="block",b||void 0!==f||(f=this._getHeaderHeight())):this.viewsHeaderNode.style.display="none";b&&(f=void 0);this.adaptWidth();this.adaptHeight(f);this.postresize()}}},adaptWidth:function(){var b=!this.initialWidth&&this.autoWidth,c=b?0:this.domNode.clientWidth||this.domNode.offsetWidth-
this._getPadBorder().w,c=this.views.arrange(1,c);this.views.onEach("adaptWidth");b&&(this.domNode.style.width=c+"px")},adaptHeight:function(b){b=void 0===b?this._getHeaderHeight():b;var c=this._autoHeight?-1:Math.max(this.domNode.clientHeight-b,0)||0;this.views.onEach("setSize",[0,c]);this.views.onEach("adaptHeight");if(!this._autoHeight){var d=0,e=0,f=z.filter(this.views.views,function(b){(b=b.hasHScrollbar())?d++:e++;return!b});0<d&&0<e&&z.forEach(f,function(b){b.adaptHeight(!0)})}!0===this.autoHeight||
-1!=c||"number"==typeof this.autoHeight&&this.autoHeight>=this.get("rowCount")?this.scroller.windowHeight=c:this.scroller.windowHeight=Math.max(this.domNode.clientHeight-b,0)},startup:function(){this._started||(this.inherited(arguments),this.autoRender&&this.render())},render:function(){this.domNode&&this._started&&(this.hasLayout()?(this.update=this.defaultUpdate,this._render()):this.scroller.init(0,this.keepRows,this.rowsPerPage))},_render:function(){this.scroller.init(this.get("rowCount"),this.keepRows,
this.rowsPerPage);this.prerender();this.setScrollTop(0);this.postrender()},prerender:function(){this.keepRows=this._autoHeight?0:this.keepRows;this.scroller.setKeepInfo(this.keepRows);this.views.render();this._resize()},postrender:function(){this.postresize();this.focus.initFocusView();F.setSelectable(this.domNode,this.selectable)},postresize:function(){if(this._autoHeight){var b=Math.max(this.views.measureContent())+"px";this.viewsNode.style.height=b}},renderRow:function(b,c){this.views.renderRow(b,
c,this._skipRowRenormalize)},rowRemoved:function(b){this.views.rowRemoved(b)},invalidated:null,updating:!1,beginUpdate:function(){this.invalidated=[];this.updating=!0},endUpdate:function(){this.updating=!1;var b=this.invalidated,c;if(b.all)this.update();else if(void 0!=b.rowCount)this.updateRowCount(b.rowCount);else for(c in b)this.updateRow(Number(c));this.invalidated=[]},defaultUpdate:function(){this.domNode&&(this.updating?this.invalidated.all=!0:(this.lastScrollTop=this.scrollTop,this.prerender(),
this.scroller.invalidateNodes(),this.setScrollTop(this.lastScrollTop),this.postrender()))},update:function(){this.render()},updateRow:function(b){b=Number(b);this.updating?this.invalidated[b]=!0:(this.views.updateRow(b),this.scroller.rowHeightChanged(b))},updateRows:function(b,c){b=Number(b);c=Number(c);var d;if(this.updating)for(d=0;d<c;d++)this.invalidated[d+b]=!0;else{for(d=0;d<c;d++)this.views.updateRow(d+b,this._skipRowRenormalize);this.scroller.rowHeightChanged(b)}},updateRowCount:function(b){this.updating?
this.invalidated.rowCount=b:(this.rowCount=b,this._setAutoHeightAttr(this.autoHeight,!0),this.layout.cells.length&&this.scroller.updateRowCount(b),this.layout.cells.length&&this.setScrollTop(this.scrollTop),this._resize())},updateRowStyles:function(b){this.views.updateRowStyles(b)},getRowNode:function(b){if(!this.focus.focusView||this.focus.focusView instanceof r)for(var c=0,d;d=this.views.views[c];c++){if(!(d instanceof r))return d.rowNodes[b]}else return this.focus.focusView.rowNodes[b];return null},
rowHeightChanged:function(b){this.views.renormalizeRow(b);this.scroller.rowHeightChanged(b)},fastScroll:!0,delayScroll:!1,scrollRedrawThreshold:A("ie")?100:50,scrollTo:function(b){if(this.fastScroll){var c=Math.abs(this.lastScrollTop-b);this.lastScrollTop=b;if(c>this.scrollRedrawThreshold||this.delayScroll){this.delayScroll=!0;this.scrollTop=b;this.views.setScrollTop(b);this._pendingScroll&&window.clearTimeout(this._pendingScroll);var d=this;this._pendingScroll=window.setTimeout(function(){delete d._pendingScroll;
d.finishScrollJob()},200)}else this.setScrollTop(b)}else this.setScrollTop(b)},finishScrollJob:function(){this.delayScroll=!1;this.setScrollTop(this.scrollTop)},setScrollTop:function(b){this.scroller.scroll(this.views.setScrollTop(b))},scrollToRow:function(b){this.setScrollTop(this.scroller.findScrollTop(b)+1)},styleRowNode:function(b,c){c&&this.rows.styleRowNode(b,c)},_mouseOut:function(b){this.rows.setOverRow(-2)},getCell:function(b){return this.layout.cells[b]},setCellWidth:function(b,c){this.getCell(b).unitWidth=
c},getCellName:function(b){return"Cell "+b.index},canSort:function(b){},sort:function(){},getSortAsc:function(b){b=void 0==b?this.sortInfo:b;return 0<b},getSortIndex:function(b){b=void 0==b?this.sortInfo:b;return Math.abs(b)-1},setSortIndex:function(b,c){var d=b+1;void 0!=c?d*=c?1:-1:this.getSortIndex()==b&&(d=-this.sortInfo);this.setSortInfo(d)},setSortInfo:function(b){this.canSort(b)&&(this.sortInfo=b,this.sort(),this.update())},doKeyEvent:function(b){b.dispatch="do"+b.type;this.onKeyEvent(b)},
_dispatch:function(b,c){return b in this?this[b](c):!1},dispatchKeyEvent:function(b){this._dispatch(b.dispatch,b)},dispatchContentEvent:function(b){this.edit.dispatchEvent(b)||b.sourceView.dispatchContentEvent(b)||this._dispatch(b.dispatch,b)},dispatchHeaderEvent:function(b){b.sourceView.dispatchHeaderEvent(b)||this._dispatch("doheader"+b.type,b)},dokeydown:function(b){this.onKeyDown(b)},doclick:function(b){if(b.cellNode)this.onCellClick(b);else this.onRowClick(b)},dodblclick:function(b){if(b.cellNode)this.onCellDblClick(b);
else this.onRowDblClick(b)},docontextmenu:function(b){if(b.cellNode)this.onCellContextMenu(b);else this.onRowContextMenu(b)},doheaderclick:function(b){if(b.cellNode)this.onHeaderCellClick(b);else this.onHeaderClick(b)},doheaderdblclick:function(b){if(b.cellNode)this.onHeaderCellDblClick(b);else this.onHeaderDblClick(b)},doheadercontextmenu:function(b){if(b.cellNode)this.onHeaderCellContextMenu(b);else this.onHeaderContextMenu(b)},doStartEdit:function(b,c){this.onStartEdit(b,c)},doApplyCellEdit:function(b,
c,d){this.onApplyCellEdit(b,c,d)},doCancelEdit:function(b){this.onCancelEdit(b)},doApplyEdit:function(b){this.onApplyEdit(b)},addRow:function(){this.updateRowCount(this.get("rowCount")+1)},removeSelectedRows:function(){this.allItemsSelected?this.updateRowCount(0):this.updateRowCount(Math.max(0,this.get("rowCount")-this.selection.getSelected().length));this.selection.clear()}});f.markupFactory=function(b,c,d,e){var f=function(b){b=F.attr(b,"width")||"auto";"auto"!=b&&"em"!=b.slice(-2)&&"%"!=b.slice(-1)&&
(b=parseInt(b,10)+"px");return b};b.structure||"table"!=c.nodeName.toLowerCase()||(b.structure=E("\x3e colgroup",c).map(function(b){var c=F.attr(b,"span"),c={noscroll:"true"==F.attr(b,"noscroll")?!0:!1,__span:c?parseInt(c,10):1,cells:[]};F.hasAttr(b,"width")&&(c.width=f(b));return c}),b.structure.length||b.structure.push({__span:Infinity,cells:[]}),E("thead \x3e tr",c).forEach(function(c,d){var g=0,h=0,k,l=null;E("\x3e th",c).map(function(c){l?g>=k+l.__span&&(h++,k+=l.__span,l=b.structure[h]):(k=
0,l=b.structure[0]);var m={name:B.trim(F.attr(c,"name")||c.innerHTML),colSpan:parseInt(F.attr(c,"colspan")||1,10),type:B.trim(F.attr(c,"cellType")||""),id:B.trim(F.attr(c,"id")||"")};g+=m.colSpan;var q=F.attr(c,"rowspan");q&&(m.rowSpan=q);F.hasAttr(c,"width")&&(m.width=f(c));F.hasAttr(c,"relWidth")&&(m.relWidth=window.parseInt(F.attr(c,"relWidth"),10));F.hasAttr(c,"hidden")&&(m.hidden="true"==F.attr(c,"hidden")||!0===F.attr(c,"hidden"));e&&e(c,m);m.type=m.type?B.getObject(m.type):p.grid.cells.Cell;
m.type&&m.type.markupFactory&&m.type.markupFactory(c,m);l.cells[d]||(l.cells[d]=[]);l.cells[d].push(m)})}));return new d(b,c)};return f})},"dojox/grid/_Events":function(){define("dojox/grid/_Events",["dojo/keys","dojo/dom-class","dojo/_base/declare","dojo/_base/event","dojo/_base/sniff"],function(m,p,f,l,k){return f("dojox.grid._Events",null,{cellOverClass:"dojoxGridCellOver",onKeyEvent:function(f){this.dispatchKeyEvent(f)},onContentEvent:function(f){this.dispatchContentEvent(f)},onHeaderEvent:function(f){this.dispatchHeaderEvent(f)},
onStyleRow:function(f){f.customClasses+=(f.odd?" dojoxGridRowOdd":"")+(f.selected?" dojoxGridRowSelected":"")+(f.over?" dojoxGridRowOver":"");this.focus.styleRow(f);this.edit.styleRow(f)},onKeyDown:function(f){if(!f.altKey&&!f.metaKey){var h;switch(f.keyCode){case m.ESCAPE:this.edit.cancel();break;case m.ENTER:if(!this.edit.isEditing()){h=this.focus.getHeaderIndex();if(0<=h){this.setSortIndex(h);break}else this.selection.clickSelect(this.focus.rowIndex,dojo.isCopyKey(f),f.shiftKey);l.stop(f)}f.shiftKey||
(h=this.edit.isEditing(),this.edit.apply(),h||this.edit.setEditCell(this.focus.cell,this.focus.rowIndex));this.edit.isEditing()||((this.focus.focusView||this.views.views[0]).content.decorateEvent(f),this.onRowClick(f),l.stop(f));break;case m.SPACE:this.edit.isEditing()||(h=this.focus.getHeaderIndex(),0<=h?this.setSortIndex(h):(this.selection.clickSelect(this.focus.rowIndex,dojo.isCopyKey(f),f.shiftKey),this.focus._focusifyCellNode(!0),this.focus.setFocusCell(this.focus.cell,this.focus.rowIndex),l.stop(f)));
break;case m.TAB:this.focus[f.shiftKey?"previousKey":"nextKey"](f);break;case m.LEFT_ARROW:case m.RIGHT_ARROW:if(!this.edit.isEditing()){var g=f.keyCode;l.stop(f);h=this.focus.getHeaderIndex();0<=h&&f.shiftKey&&f.ctrlKey?this.focus.colSizeAdjust(f,h,5*(g==m.LEFT_ARROW?-1:1)):(f=g==m.LEFT_ARROW?1:-1,this.isLeftToRight()&&(f*=-1),this.focus.move(0,f))}break;case m.UP_ARROW:this.edit.isEditing()||0===this.focus.rowIndex||(l.stop(f),this.focus.move(-1,0));break;case m.DOWN_ARROW:this.edit.isEditing()||
this.focus.rowIndex+1==this.rowCount||(l.stop(f),this.focus.move(1,0));break;case m.PAGE_UP:this.edit.isEditing()||0===this.focus.rowIndex||(l.stop(f),this.focus.rowIndex!=this.scroller.firstVisibleRow+1?this.focus.move(this.scroller.firstVisibleRow-this.focus.rowIndex,0):(this.setScrollTop(this.scroller.findScrollTop(this.focus.rowIndex-1)),this.focus.move(this.scroller.firstVisibleRow-this.scroller.lastVisibleRow+1,0)));break;case m.PAGE_DOWN:this.edit.isEditing()||this.focus.rowIndex+1==this.rowCount||
(l.stop(f),this.focus.rowIndex!=this.scroller.lastVisibleRow-1?this.focus.move(this.scroller.lastVisibleRow-this.focus.rowIndex-1,0):(this.setScrollTop(this.scroller.findScrollTop(this.focus.rowIndex+1)),this.focus.move(this.scroller.lastVisibleRow-this.scroller.firstVisibleRow-1,0)))}}},onMouseOver:function(f){-1==f.rowIndex?this.onHeaderCellMouseOver(f):this.onCellMouseOver(f)},onMouseOut:function(f){-1==f.rowIndex?this.onHeaderCellMouseOut(f):this.onCellMouseOut(f)},onMouseDown:function(f){-1==
f.rowIndex?this.onHeaderCellMouseDown(f):this.onCellMouseDown(f)},onMouseOverRow:function(f){this.rows.isOver(f.rowIndex)||(this.rows.setOverRow(f.rowIndex),-1==f.rowIndex?this.onHeaderMouseOver(f):this.onRowMouseOver(f))},onMouseOutRow:function(f){if(this.rows.isOver(-1))this.onHeaderMouseOut(f);else this.rows.isOver(-2)||(this.rows.setOverRow(-2),this.onRowMouseOut(f))},onMouseDownRow:function(f){if(-1!=f.rowIndex)this.onRowMouseDown(f)},onCellMouseOver:function(f){f.cellNode&&p.add(f.cellNode,
this.cellOverClass)},onCellMouseOut:function(f){f.cellNode&&p.remove(f.cellNode,this.cellOverClass)},onCellMouseDown:function(f){},onCellClick:function(f){this._click[0]=this._click[1];this._click[1]=f;this.edit.isEditCell(f.rowIndex,f.cellIndex)||this.focus.setFocusCell(f.cell,f.rowIndex);1<this._click.length&&null==this._click[0]&&this._click.shift();this.onRowClick(f)},onCellDblClick:function(f){var h;h=1<this._click.length&&k("ie")?this._click[1]:1<this._click.length&&this._click[0].rowIndex!=
this._click[1].rowIndex?this._click[0]:f;this.focus.setFocusCell(h.cell,h.rowIndex);this.edit.setEditCell(h.cell,h.rowIndex);this.onRowDblClick(f)},onCellContextMenu:function(f){this.onRowContextMenu(f)},onCellFocus:function(f,k){this.edit.cellFocus(f,k)},onRowClick:function(f){this.edit.rowClick(f);this.selection.clickSelectEvent(f)},onRowDblClick:function(f){},onRowMouseOver:function(f){},onRowMouseOut:function(f){},onRowMouseDown:function(f){},onRowContextMenu:function(f){l.stop(f)},onHeaderMouseOver:function(f){},
onHeaderMouseOut:function(f){},onHeaderCellMouseOver:function(f){f.cellNode&&p.add(f.cellNode,this.cellOverClass)},onHeaderCellMouseOut:function(f){f.cellNode&&p.remove(f.cellNode,this.cellOverClass)},onHeaderCellMouseDown:function(f){},onHeaderClick:function(f){},onHeaderCellClick:function(f){this.setSortIndex(f.cell.index);this.onHeaderClick(f)},onHeaderDblClick:function(f){},onHeaderCellDblClick:function(f){this.onHeaderDblClick(f)},onHeaderCellContextMenu:function(f){this.onHeaderContextMenu(f)},
onHeaderContextMenu:function(f){this.headerMenu||l.stop(f)},onStartEdit:function(f,k){},onApplyCellEdit:function(f,k,g){},onCancelEdit:function(f){},onApplyEdit:function(f){},onCanSelect:function(f){return!0},onCanDeselect:function(f){return!0},onSelected:function(f){this.updateRowStyles(f)},onDeselected:function(f){this.updateRowStyles(f)},onSelectionChanged:function(){}})})},"dojox/grid/_Scroller":function(){define("dojox/grid/_Scroller",["dijit/registry","dojo/_base/declare","dojo/_base/lang",
"./util","dojo/_base/html"],function(m,p,f,l,k){var h=function(f){f&&dojo.forEach(m.toArray(),function(e){e.domNode&&k.isDescendant(e.domNode,f,!0)&&e.destroy()})},q=function(f,e){for(var c=[],b=0,d;d=f.childNodes[b];){b++;var g=k.byId(d);(g&&g.tagName?g.tagName.toLowerCase():"")==e&&c.push(d)}return c};return p("dojox.grid._Scroller",null,{constructor:function(f){this.setContentNodes(f);this.pageHeights=[];this.pageNodes=[];this.stack=[]},rowCount:0,defaultRowHeight:32,keepRows:100,contentNode:null,
scrollboxNode:null,defaultPageHeight:0,keepPages:10,pageCount:0,windowHeight:0,firstVisibleRow:0,lastVisibleRow:0,averageRowHeight:0,page:0,pageTop:0,init:function(g,e,c){switch(arguments.length){case 3:this.rowsPerPage=c;case 2:this.keepRows=e;case 1:this.rowCount=g}this.defaultPageHeight=(0<this.grid.rowHeight?this.grid.rowHeight:this.defaultRowHeight)*this.rowsPerPage;this.pageCount=this._getPageCount(this.rowCount,this.rowsPerPage);this.setKeepInfo(this.keepRows);this.invalidate();this.scrollboxNode&&
(this.scrollboxNode.scrollTop=0,this.scroll(0),this.scrollboxNode.onscroll=f.hitch(this,"onscroll"))},_getPageCount:function(f,e){return f?Math.ceil(f/e)||1:0},destroy:function(){this.invalidateNodes();delete this.contentNodes;delete this.contentNode;delete this.scrollboxNode},setKeepInfo:function(f){this.keepPages=(this.keepRows=f)?Math.max(Math.ceil(this.keepRows/this.rowsPerPage),2):this.keepPages},setContentNodes:function(f){this.colCount=(this.contentNodes=f)?this.contentNodes.length:0;this.pageNodes=
[];for(f=0;f<this.colCount;f++)this.pageNodes[f]=[]},getDefaultNodes:function(){return this.pageNodes[0]||[]},invalidate:function(){this._invalidating=!0;this.invalidateNodes();this.pageHeights=[];this.height=this.pageCount?(this.pageCount-1)*this.defaultPageHeight+this.calcLastPageHeight():0;this.resize();this._invalidating=!1},updateRowCount:function(f){this.invalidateNodes();this.rowCount=f;f=this.pageCount;0===f&&(this.height=1);this.pageCount=this._getPageCount(this.rowCount,this.rowsPerPage);
if(this.pageCount<f)for(--f;f>=this.pageCount;f--)this.height-=this.getPageHeight(f),delete this.pageHeights[f];else this.pageCount>f&&(this.height+=this.defaultPageHeight*(this.pageCount-f-1)+this.calcLastPageHeight());this.resize()},pageExists:function(f){return!!this.getDefaultPageNode(f)},measurePage:function(f){return this.grid.rowHeight?((f+1)*this.rowsPerPage>this.rowCount?this.rowCount-f*this.rowsPerPage:this.rowsPerPage)*this.grid.rowHeight:(f=this.getDefaultPageNode(f))&&f.innerHTML?f.offsetHeight:
void 0},positionPage:function(f,e){for(var c=0;c<this.colCount;c++)this.pageNodes[c][f].style.top=e+"px"},repositionPages:function(f){for(var e=this.getDefaultNodes(),c=0,b=0;b<this.stack.length;b++)c=Math.max(this.stack[b],c);var d=(b=e[f])?this.getPageNodePosition(b)+this.getPageHeight(f):0;for(f+=1;f<=c;f++){if(b=e[f]){if(this.getPageNodePosition(b)==d)break;this.positionPage(f,d)}d+=this.getPageHeight(f)}},installPage:function(f){for(var e=0;e<this.colCount;e++)this.contentNodes[e].appendChild(this.pageNodes[e][f])},
preparePage:function(f,e){e=e?this.popPage():null;for(var c=0;c<this.colCount;c++){var b=this.pageNodes[c],d=null===e?this.createPageNode():this.invalidatePageNode(e,b);d.pageIndex=f;b[f]=d}},renderPage:function(f){var e=[],c;for(c=0;c<this.colCount;c++)e[c]=this.pageNodes[c][f];c=0;for(f*=this.rowsPerPage;c<this.rowsPerPage&&f<this.rowCount;c++,f++)this.renderRow(f,e)},removePage:function(f){var e=0;for(f*=this.rowsPerPage;e<this.rowsPerPage;e++,f++)this.removeRow(f)},destroyPage:function(f){for(var e=
0;e<this.colCount;e++){var c=this.invalidatePageNode(f,this.pageNodes[e]);c&&k.destroy(c)}},pacify:function(f){},pacifying:!1,pacifyTicks:200,setPacifying:function(f){this.pacifying!=f&&(this.pacifying=f,this.pacify(this.pacifying))},startPacify:function(){this.startPacifyTicks=(new Date).getTime()},doPacify:function(){var f=(new Date).getTime()-this.startPacifyTicks>this.pacifyTicks;this.setPacifying(!0);this.startPacify();return f},endPacify:function(){this.setPacifying(!1)},resize:function(){this.scrollboxNode&&
(this.windowHeight=this.scrollboxNode.clientHeight);for(var f=0;f<this.colCount;f++)l.setStyleHeightPx(this.contentNodes[f],Math.max(1,this.height));f=!this._invalidating;if(!f){var e=this.grid.get("autoHeight");"number"==typeof e&&e<=Math.min(this.rowsPerPage,this.rowCount)&&(f=!0)}f&&this.needPage(this.page,this.pageTop);f=this.page<this.pageCount-1?this.rowsPerPage:this.rowCount%this.rowsPerPage||this.rowsPerPage;e=this.getPageHeight(this.page);this.averageRowHeight=0<e&&0<f?e/f:0},calcLastPageHeight:function(){return this.pageCount?
this.pageHeights[this.pageCount-1]=(this.rowCount%this.rowsPerPage||this.rowsPerPage)*this.defaultRowHeight:0},updateContentHeight:function(f){this.height+=f;this.resize()},updatePageHeight:function(f,e,c){if(this.pageExists(f)){var b=this.getPageHeight(f),d=this.measurePage(f);void 0===d&&(d=b);this.pageHeights[f]=d;if(b!=d){this.updateContentHeight(d-b);var g=this.grid.get("autoHeight");"number"==typeof g&&g>this.rowCount||!0===g&&!e?c?(e=this.grid.viewsNode.style,e.height=parseInt(e.height)+d-
b+"px",this.repositionPages(f)):this.grid.sizeChange():this.repositionPages(f)}return d}return 0},rowHeightChanged:function(f,e){this.updatePageHeight(Math.floor(f/this.rowsPerPage),!1,e)},invalidateNodes:function(){for(;this.stack.length;)this.destroyPage(this.popPage())},createPageNode:function(){var f=document.createElement("div");k.attr(f,"role","presentation");f.style.position="absolute";f.style[this.grid.isLeftToRight()?"left":"right"]="0";return f},getPageHeight:function(f){f=this.pageHeights[f];
return void 0!==f?f:this.defaultPageHeight},pushPage:function(f){return this.stack.push(f)},popPage:function(){return this.stack.shift()},findPage:function(f){for(var e=0,c=0,b=0;e<this.pageCount&&!(b=this.getPageHeight(e),c+b>=f);e++,c+=b);this.page=e;this.pageTop=c},buildPage:function(f,e,c){this.preparePage(f,e);this.positionPage(f,c);this.installPage(f);this.renderPage(f);this.pushPage(f)},needPage:function(f,e){var c=this.getPageHeight(f);this.pageExists(f)?this.positionPage(f,e):(this.buildPage(f,
!this.grid._autoHeight&&this.keepPages&&this.stack.length>=this.keepPages,e),c=this.updatePageHeight(f,!0));return c},onscroll:function(){this.scroll(this.scrollboxNode.scrollTop)},scroll:function(f){this.grid.scrollTop=f;if(this.colCount){this.startPacify();this.findPage(f);for(var e=this.height,c=this.getScrollBottom(f),b=this.page,d=this.pageTop;b<this.pageCount&&(0>c||d<c);b++)d+=this.needPage(b,d);this.firstVisibleRow=this.getFirstVisibleRow(this.page,this.pageTop,f);this.lastVisibleRow=this.getLastVisibleRow(b-
1,d,c);e!=this.height&&this.repositionPages(b-1);this.endPacify()}},getScrollBottom:function(f){return 0<=this.windowHeight?f+this.windowHeight:-1},processNodeEvent:function(f,e){for(var c=f.target;c&&c!=e&&c.parentNode&&c.parentNode.parentNode!=e;)c=c.parentNode;if(!c||!c.parentNode||c.parentNode.parentNode!=e)return!1;f.topRowIndex=c.parentNode.pageIndex*this.rowsPerPage;e=f.topRowIndex;var b;a:{b=0;for(var d,g=c.parentNode;d=g.childNodes[b++];)if(d==c){--b;break a}b=-1}f.rowIndex=e+b;f.rowTarget=
c;return!0},processEvent:function(f){return this.processNodeEvent(f,this.contentNode)},renderRow:function(f,e){},removeRow:function(f){},getDefaultPageNode:function(f){return this.getDefaultNodes()[f]},positionPageNode:function(f,e){},getPageNodePosition:function(f){return f.offsetTop},invalidatePageNode:function(f,e){var c=e[f];c&&(delete e[f],this.removePage(f,c),h(c),c.innerHTML="");return c},getPageRow:function(f){return f*this.rowsPerPage},getLastPageRow:function(f){return Math.min(this.rowCount,
this.getPageRow(f+1))-1},getFirstVisibleRow:function(f,e,c){if(!this.pageExists(f))return 0;var b=this.getPageRow(f),d=this.getDefaultNodes();f=q(d[f],"div");for(var d=0,g=f.length;d<g&&e<c;d++,b++)e+=f[d].offsetHeight;return b?b-1:b},getLastVisibleRow:function(f,e,c){if(!this.pageExists(f))return 0;var b=this.getDefaultNodes(),d=this.getLastPageRow(f);f=q(b[f],"div");for(b=f.length-1;0<=b&&e>c;b--,d--)e-=f[b].offsetHeight;return d+1},findTopRow:function(f){for(var e=this.getDefaultNodes(),e=q(e[this.page],
"div"),c=0,b=e.length,d=this.pageTop,g;c<b;c++)if(g=e[c].offsetHeight,d+=g,d>=f)return this.offset=g-(d-f),c+this.page*this.rowsPerPage;return-1},findScrollTop:function(f){var e=Math.floor(f/this.rowsPerPage),c=0,b;for(b=0;b<e;b++)c+=this.getPageHeight(b);this.pageTop=c;this.page=e;this.needPage(e,this.pageTop);b=this.getDefaultNodes();var d=q(b[e],"div"),e=f-this.rowsPerPage*e;b=0;for(f=d.length;b<f&&b<e;b++)c+=d[b].offsetHeight;return c},dummy:0})})},"dojox/grid/util":function(){define("dojox/grid/util",
["../main","dojo/_base/lang","dojo/dom","dojo/_base/sniff"],function(m,p,f,l){var k=p.getObject("grid.util",!0,m);k.na="...";k.rowIndexTag="gridRowIndex";k.gridViewTag="gridView";k.fire=function(f,k,g){function e(b,c){if(null==b)return null;var d=c?"Width":"Height";return b["scroll"+d]>b["client"+d]?b:e(b.parentNode,c)}var c,b,d,h;if(l("webkit")&&"focus"==k){b=f.domNode?f.domNode:f;if(c=e(b,!1))d=c.scrollTop;if(b=e(b,!0))h=b.scrollLeft}var m=f&&k&&f[k];f=m&&(g?m.apply(f,g):f[k]());l("webkit")&&"focus"==
k&&(c&&(c.scrollTop=d),b&&(b.scrollLeft=h));return f};k.setStyleHeightPx=function(f,k){if(0<=k){var g=f.style;k+="px";f&&g.height!=k&&(g.height=k)}};k.mouseEvents="mouseover mouseout mousedown mouseup click dblclick contextmenu".split(" ");k.keyEvents=["keyup","keydown","keypress"];k.funnelEvents=function(f,l,g,e){e=e?e:k.mouseEvents.concat(k.keyEvents);for(var c=0,b=e.length;c<b;c++)l.connect(f,"on"+e[c],g)};k.removeNode=function(h){(h=f.byId(h))&&h.parentNode&&h.parentNode.removeChild(h);return h};
k.arrayCompare=function(f,k){for(var g=0,e=f.length;g<e;g++)if(f[g]!=k[g])return!1;return f.length==k.length};k.arrayInsert=function(f,k,g){f.length<=k?f[k]=g:f.splice(k,0,g)};k.arrayRemove=function(f,k){f.splice(k,1)};k.arraySwap=function(f,k,g){var e=f[k];f[k]=f[g];f[g]=e};return k})},"dojox/grid/_Layout":function(){define("dojox/grid/_Layout","dojo/_base/kernel ../main dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/dom-geometry ./cells ./_RowSelector".split(" "),function(m,p,f,l,k,h){return f("dojox.grid._Layout",
null,{constructor:function(f){this.grid=f},cells:[],structure:null,defaultWidth:"6em",moveColumn:function(f,g,e,c,b){var d=this.structure[f].cells[0],h=this.structure[g].cells[0],k=null,m=k=0;f=0;for(var p;p=d[f];f++)if(p.index==e){k=f;break}k=d.splice(k,1)[0];k.view=this.grid.views.views[g];f=0;for(p=null;p=h[f];f++)if(p.index==c){m=f;break}b||(m+=1);h.splice(m,0,k);if(e=this.grid.getCell(this.grid.getSortIndex()))e._currentlySorted=this.grid.getSortAsc();this.cells=[];for(f=e=0;g=this.structure[f];f++)for(c=
0;b=g.cells[c];c++)for(d=0;p=b[d];d++)p.index=e,this.cells.push(p),"_currentlySorted"in p&&(h=e+1,h*=p._currentlySorted?1:-1,this.grid.sortInfo=h,delete p._currentlySorted),e++;l.forEach(this.cells,function(b){var c=b.markup[2].split(" ");parseInt(c[1].substring(5))!=b.index&&(c[1]='idx\x3d"'+b.index+'"',b.markup[2]=c.join(" "))});this.grid.setupHeaderMenu()},setColumnVisibility:function(f,g){f=this.cells[f];if(f.hidden==g){f.hidden=!g;g=f.view;var e=g.viewWidth;e&&"auto"!=e&&(g._togglingColumn=h.getMarginBox(f.getHeaderNode()).w||
0);g.update();return!0}return!1},addCellDef:function(f,g,e){var c=this,b=function(b){var d=0;1<b.colSpan?d=0:(d=b.width||c._defaultCellProps.width||c.defaultWidth,isNaN(d)||(d+="em"));return d};f={grid:this.grid,subrow:f,layoutIndex:g,index:this.cells.length};if(e&&e instanceof p.grid.cells._Base)return g=k.clone(e),f.unitWidth=b(g._props),g=k.mixin(g,this._defaultCellProps,e._props,f);g=e.type||e.cellType||this._defaultCellProps.type||this._defaultCellProps.cellType||p.grid.cells.Cell;k.isString(g)&&
(g=k.getObject(g));f.unitWidth=b(e);return new g(k.mixin({},this._defaultCellProps,e,f))},addRowDef:function(f,g){for(var e=[],c=0,b=0,d=!0,h=0,k;k=g[h];h++)k=this.addCellDef(f,h,k),e.push(k),this.cells.push(k),d&&k.relWidth?c+=k.relWidth:k.width&&(k=k.width,"string"==typeof k&&"%"==k.slice(-1)?b+=window.parseInt(k,10):"auto"==k&&(d=!1));c&&d&&l.forEach(e,function(d){d.relWidth&&(d.width=d.unitWidth=d.relWidth/c*(100-b)+"%")});return e},addRowsDef:function(f){var g=[];if(k.isArray(f))if(k.isArrayLike(f[0]))for(var e=
0,c;f&&(c=f[e]);e++)g.push(this.addRowDef(e,c));else g.push(this.addRowDef(0,f));return g},addViewDef:function(f){this._defaultCellProps=f.defaultCell||{};f.width&&"auto"==f.width&&delete f.width;return k.mixin({},f,{cells:this.addRowsDef(f.rows||f.cells)})},setStructure:function(f){this.fieldIndex=0;this.cells=[];var g=this.structure=[];if(this.grid.rowSelector){var e={type:p._scopeName+".grid._RowSelector"};if(k.isString(this.grid.rowSelector)){var c=this.grid.rowSelector;"false"==c?e=null:"true"!=
c&&(e.width=c)}else this.grid.rowSelector||(e=null);e&&g.push(this.addViewDef(e))}var b=function(b){return"name"in b||"field"in b||"get"in b},e=function(c){return k.isArray(c)&&(k.isArray(c[0])||b(c[0]))?!0:!1},c=function(c){return null!==c&&k.isObject(c)&&("cells"in c||"rows"in c||"type"in c&&!b(c))};if(k.isArrayLike(f)){for(var d=!1,h=0,l;l=f[h];h++)if(c(l)){d=!0;break}if(d)for(h=0;l=f[h];h++)e(l)?g.push(this.addViewDef({cells:l})):c(l)&&g.push(this.addViewDef(l));else g.push(this.addViewDef({cells:f}))}else c(f)&&
g.push(this.addViewDef(f));this.cellCount=this.cells.length;this.grid.setupHeaderMenu()}})})},"dojox/grid/cells":function(){define("dojox/grid/cells",["../main","./cells/_base"],function(m){return m.grid.cells})},"dojox/grid/cells/_base":function(){define("dojox/grid/cells/_base","dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/event dojo/_base/connect dojo/_base/array dojo/_base/sniff dojo/dom dojo/dom-attr dojo/dom-construct dijit/_Widget ../util".split(" "),function(m,p,f,l,k,h,
q,g,e,c,b,d){var r=p("dojox.grid._DeferredTextWidget",b,{deferred:null,_destroyOnRemove:!0,postCreate:function(){this.deferred&&this.deferred.addBoth(f.hitch(this,function(b){this.domNode&&(this.domNode.innerHTML=b)}))}}),v=function(){setTimeout(f.hitch.apply(m,arguments),0)},u=p("dojox.grid.cells._Base",null,{styles:"",classes:"",editable:!1,alwaysEditing:!1,formatter:null,defaultValue:"...",value:null,hidden:!1,noresize:!1,draggable:!0,_valueProp:"value",_formatPending:!1,constructor:function(b){this._props=
b||{};f.mixin(this,b);void 0===this.draggable&&(this.draggable=!0)},_defaultFormat:function(b,d){var e=this.grid.formatterScope||this,f=this.formatter;f&&e&&"string"==typeof f&&(f=this.formatter=e[f]);b=b!=this.defaultValue&&f?f.apply(e,d):b;if("undefined"==typeof b)return this.defaultValue;b&&b.addBoth&&(b=new r({deferred:b},c.create("span",{innerHTML:this.defaultValue})));return b&&b.declaredClass&&b.startup?"\x3cdiv class\x3d'dojoxGridStubNode' linkWidget\x3d'"+b.id+"' cellIdx\x3d'"+this.index+
"'\x3e"+this.defaultValue+"\x3c/div\x3e":b},format:function(b,c){var d=this.grid.edit.info;(c=this.get?this.get(b,c):this.value||this.defaultValue)&&c.replace&&this.grid.escapeHTMLInData&&(c=c.replace(/&(?![a-z0-9]{1,8}\;)/ig,"\x26amp;").replace(/</g,"\x26lt;"));return this.editable&&(this.alwaysEditing||d.rowIndex==b&&d.cell==this)?this.formatEditing(d.value?d.value:c,b):this._defaultFormat(c,[c,b,this])},formatEditing:function(b,c){},getNode:function(b){return this.view.getCellNode(b,this.index)},
getHeaderNode:function(){return this.view.getHeaderCellNode(this.index)},getEditNode:function(b){return(this.getNode(b)||0).firstChild||0},canResize:function(){var b=this.unitWidth;return b&&"auto"!==b},isFlex:function(){var b=this.unitWidth;return b&&f.isString(b)&&("auto"==b||"%"==b.slice(-1))},applyEdit:function(b,c){this.getNode(c)&&this.grid.edit.applyCellEdit(b,this,c)},cancelEdit:function(b){this.grid.doCancelEdit(b)},_onEditBlur:function(b){this.grid.edit.isEditCell(b,this.index)&&this.grid.edit.apply()},
registerOnBlur:function(b,c){this.commitOnBlur&&k.connect(b,"onblur",function(b){setTimeout(f.hitch(this,"_onEditBlur",c),250)})},needFormatNode:function(b,c){this._formatPending=!0;v(this,"_formatNode",b,c)},cancelFormatNode:function(){this._formatPending=!1},_formatNode:function(b,c){this._formatPending&&(this._formatPending=!1,q("ie")||g.setSelectable(this.grid.domNode,!0),this.formatNode(this.getEditNode(c),b,c))},formatNode:function(b,c,d){q("ie")?v(this,"focus",d,b):this.focus(d,b)},dispatchEvent:function(b,
c){if(b in this)return this[b](c)},getValue:function(b){return this.getEditNode(b)[this._valueProp]},setValue:function(b,c){(b=this.getEditNode(b))&&(b[this._valueProp]=c)},focus:function(b,c){b=c||this.getEditNode(b);try{d.fire(b,"focus"),d.fire(b,"select")}catch(z){}},save:function(b){this.value=this.value||this.getValue(b)},restore:function(b){this.setValue(b,this.value)},_finish:function(b){g.setSelectable(this.grid.domNode,!1);this.cancelFormatNode()},apply:function(b){this.applyEdit(this.getValue(b),
b);this._finish(b)},cancel:function(b){this.cancelEdit(b);this._finish(b)}});u.markupFactory=function(b,c){var d=f.trim(e.get(b,"formatter")||"");d&&(c.formatter=f.getObject(d)||d);if(d=f.trim(e.get(b,"get")||""))c.get=f.getObject(d);d=function(c,d,g){var h=f.trim(e.get(b,c)||"");h&&(d[g||c]="false"!=h.toLowerCase())};d("sortDesc",c);d("editable",c);d("alwaysEditing",c);d("noresize",c);d("draggable",c);if(d=f.trim(e.get(b,"loadingText")||e.get(b,"defaultValue")||""))c.defaultValue=d;d=function(c,
d,g){var h=f.trim(e.get(b,c)||"")||void 0;h&&(d[g||c]=h)};d("styles",c);d("headerStyles",c);d("cellStyles",c);d("classes",c);d("headerClasses",c);d("cellClasses",c)};var t=u.Cell=p("dojox.grid.cells.Cell",u,{constructor:function(){this.keyFilter=this.keyFilter},keyFilter:null,formatEditing:function(b,c){this.needFormatNode(b,c);b&&b.replace&&(b=b.replace(/"/g,"\x26quot;"));return'\x3cinput class\x3d"dojoxGridInput" type\x3d"text" value\x3d"'+b+'"\x3e'},formatNode:function(b,c,d){this.inherited(arguments);
this.registerOnBlur(b,d)},doKey:function(b){this.keyFilter&&-1==String.fromCharCode(b.charCode).search(this.keyFilter)&&l.stop(b)},_finish:function(b){this.inherited(arguments);var c=this.getEditNode(b);try{d.fire(c,"blur")}catch(z){}}});t.markupFactory=function(b,c){u.markupFactory(b,c);if(b=f.trim(e.get(b,"keyFilter")||""))c.keyFilter=new RegExp(b)};(u.RowIndex=p("dojox.grid.cells.RowIndex",t,{name:"Row",postscript:function(){this.editable=!1},get:function(b){return b+1}})).markupFactory=function(b,
c){t.markupFactory(b,c)};(u.Select=p("dojox.grid.cells.Select",t,{options:null,values:null,returnIndex:-1,constructor:function(b){this.values=this.values||this.options},formatEditing:function(b,c){this.needFormatNode(b,c);c=['\x3cselect class\x3d"dojoxGridSelect"\x3e'];for(var d=0,e,f;void 0!==(e=this.options[d])&&void 0!==(f=this.values[d]);d++)f=f.replace?f.replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;"):f,e=e.replace?e.replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;"):e,c.push("\x3coption",b==
f?" selected":"",' value\x3d"'+f+'"',"\x3e",e,"\x3c/option\x3e");c.push("\x3c/select\x3e");return c.join("")},_defaultFormat:function(b,c){var d=this.inherited(arguments);if(!this.formatter&&this.values&&this.options){var e=h.indexOf(this.values,d);0<=e&&(d=this.options[e])}return d},getValue:function(b){var c=this.getEditNode(b);if(c)return b=c.selectedIndex,c=c.options[b],-1<this.returnIndex?b:c.value||c.innerHTML}})).markupFactory=function(b,c){t.markupFactory(b,c);var d=f.trim(e.get(b,"options")||
"");if(d){var g=d.split(",");g[0]!=d&&(c.options=g)}if(b=f.trim(e.get(b,"values")||""))d=b.split(","),d[0]!=b&&(c.values=d)};var x=u.AlwaysEdit=p("dojox.grid.cells.AlwaysEdit",t,{alwaysEditing:!0,_formatNode:function(b,c){this.formatNode(this.getEditNode(c),b,c)},applyStaticValue:function(b){var c=this.grid.edit;c.applyCellEdit(this.getValue(b),this,b);c.start(this,b,!0)}});x.markupFactory=function(b,c){t.markupFactory(b,c)};(u.Bool=p("dojox.grid.cells.Bool",x,{_valueProp:"checked",formatEditing:function(b,
c){return'\x3cinput class\x3d"dojoxGridInput" type\x3d"checkbox"'+(b?' checked\x3d"checked"':"")+' style\x3d"width: auto" /\x3e'},doclick:function(b){"INPUT"==b.target.tagName&&this.applyStaticValue(b.rowIndex)}})).markupFactory=function(b,c){x.markupFactory(b,c)};return u})},"dojox/grid/_RowSelector":function(){define("dojox/grid/_RowSelector",["dojo/_base/declare","./_View"],function(m,p){return m("dojox.grid._RowSelector",p,{defaultWidth:"2em",noscroll:!0,padBorderWidth:2,buildRendering:function(){this.inherited("buildRendering",
arguments);this.scrollboxNode.style.overflow="hidden";this.headerNode.style.visibility="hidden"},getWidth:function(){return this.viewWidth||this.defaultWidth},buildRowContent:function(f,l){l.innerHTML='\x3ctable class\x3d"dojoxGridRowbarTable" style\x3d"width:'+(this.contentWidth||0)+'px;height:1px;" border\x3d"0" cellspacing\x3d"0" cellpadding\x3d"0" role\x3d"presentation"\x3e\x3ctr\x3e\x3ctd class\x3d"dojoxGridRowbarInner"\x3e\x26nbsp;\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e'},renderHeader:function(){},
updateRow:function(){},resize:function(){this.adaptHeight()},adaptWidth:function(){!("contentWidth"in this)&&this.contentNode&&0<this.contentNode.offsetWidth&&(this.contentWidth=this.contentNode.offsetWidth-this.padBorderWidth)},doStyleRowNode:function(f,l){var k=["dojoxGridRowbar dojoxGridNonNormalizedCell"];this.grid.rows.isOver(f)&&k.push("dojoxGridRowbarOver");this.grid.selection.isSelected(f)&&k.push("dojoxGridRowbarSelected");l.className=k.join(" ")},domouseover:function(f){this.grid.onMouseOverRow(f)},
domouseout:function(f){if(!this.isIntraRowEvent(f))this.grid.onMouseOutRow(f)}})})},"dojox/grid/_View":function(){require({cache:{"url:dojox/grid/resources/View.html":'\x3cdiv class\x3d"dojoxGridView" role\x3d"presentation"\x3e\r\n\t\x3cdiv class\x3d"dojoxGridHeader" dojoAttachPoint\x3d"headerNode" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv dojoAttachPoint\x3d"headerNodeContainer" style\x3d"width:9000em" role\x3d"presentation"\x3e\r\n\t\t\t\x3cdiv dojoAttachPoint\x3d"headerContentNode" role\x3d"row"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cinput type\x3d"checkbox" class\x3d"dojoxGridHiddenFocus" dojoAttachPoint\x3d"hiddenFocusNode" aria-hidden\x3d"true" /\x3e\r\n\t\x3cinput type\x3d"checkbox" class\x3d"dojoxGridHiddenFocus" aria-hidden\x3d"true" /\x3e\r\n\t\x3cdiv class\x3d"dojoxGridScrollbox" dojoAttachPoint\x3d"scrollboxNode" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv class\x3d"dojoxGridContent" dojoAttachPoint\x3d"contentNode" hidefocus\x3d"hidefocus" role\x3d"presentation"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n'}});
define("dojox/grid/_View","dojo dijit/registry ../main dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/_base/connect dojo/_base/sniff dojo/query dojo/_base/window dojo/text!./resources/View.html dojo/dnd/Source dijit/_Widget dijit/_TemplatedMixin dojox/html/metrics ./util dojo/_base/html ./_Builder dojo/dnd/Avatar dojo/dnd/Manager".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x,w,y,z){b=l("dojox.grid._View",[r,v],{defaultWidth:"18em",viewWidth:"",templateString:b,classTag:"dojoxGrid",
marginBottom:0,rowPad:2,_togglingColumn:-1,_headerBuilderClass:w._HeaderBuilder,_contentBuilderClass:w._ContentBuilder,postMixInProperties:function(){this.rowNodes={}},postCreate:function(){this.connect(this.scrollboxNode,"onscroll","doscroll");t.funnelEvents(this.contentNode,this,"doContentEvent","mouseover mouseout click dblclick contextmenu mousedown".split(" "));t.funnelEvents(this.headerNode,this,"doHeaderEvent","dblclick mouseover mouseout mousemove mousedown click contextmenu".split(" "));
this.content=new this._contentBuilderClass(this);this.header=new this._headerBuilderClass(this);this.grid.isLeftToRight()||(this.headerNodeContainer.style.width="")},destroy:function(){x.destroy(this.headerNode);delete this.headerNode;for(var b in this.rowNodes)this._cleanupRowWidgets(this.rowNodes[b]),x.destroy(this.rowNodes[b]);this.rowNodes={};this.source&&this.source.destroy();this.inherited(arguments)},focus:function(){g("ie")||g("webkit")||g("opera")?this.hiddenFocusNode.focus():this.scrollboxNode.focus()},
setStructure:function(b){b=this.structure=b;b.width&&!isNaN(b.width)?this.viewWidth=b.width+"em":this.viewWidth=b.width||(b.noscroll?"auto":this.viewWidth);this._onBeforeRow=b.onBeforeRow||function(){};this._onAfterRow=b.onAfterRow||function(){};if(this.noscroll=b.noscroll)this.scrollboxNode.style.overflow="hidden";this.simpleStructure=1==b.cells.length;this.testFlexCells();this.updateStructure()},_cleanupRowWidgets:function(b){b&&k.forEach(e("[widgetId]",b).map(p.byNode),function(b){b._destroyOnRemove?
(b.destroy(),delete b):b.domNode&&b.domNode.parentNode&&b.domNode.parentNode.removeChild(b.domNode)})},onBeforeRow:function(b,c){this._onBeforeRow(b,c);0<=b&&this._cleanupRowWidgets(this.getRowNode(b))},onAfterRow:function(b,c,d){this._onAfterRow(b,c,d);var f=this.grid;k.forEach(e(".dojoxGridStubNode",d),function(b){if(b&&b.parentNode){var c=b.getAttribute("linkWidget"),d=window.parseInt(x.attr(b,"cellIdx"),10);f.getCell(d);(c=p.byId(c))?(b.parentNode.replaceChild(c.domNode,b),c._started||c.startup(),
m.destroy(b)):b.innerHTML=""}},this)},testFlexCells:function(){this.flexCells=!1;for(var b=0,c;c=this.structure.cells[b];b++)for(var d=0,e;e=c[d];d++)e.view=this,this.flexCells=this.flexCells||e.isFlex();return this.flexCells},updateStructure:function(){this.header.update();this.content.update()},getScrollbarWidth:function(){var b=this.hasVScrollbar(),c=x.style(this.scrollboxNode,"overflow");this.noscroll||!c||"hidden"==c?b=!1:"scroll"==c&&(b=!0);return b?u.getScrollbar().w:0},getColumnsWidth:function(){var b=
this.headerContentNode;return b&&b.firstChild?b.firstChild.offsetWidth||x.style(b.firstChild,"width"):0},setColumnsWidth:function(b){this.headerContentNode.firstChild.style.width=b+"px";this.viewWidth&&(this.viewWidth=b+"px")},getWidth:function(){return this.viewWidth||this.getColumnsWidth()+this.getScrollbarWidth()+"px"},getContentWidth:function(){return Math.max(0,x._getContentBox(this.domNode).w-this.getScrollbarWidth())+"px"},render:function(){this.scrollboxNode.style.height="";this.renderHeader();
0<=this._togglingColumn&&(this.setColumnsWidth(this.getColumnsWidth()-this._togglingColumn),this._togglingColumn=-1);var b=this.grid.layout.cells,e=h.hitch(this,function(c,d){!this.grid.isLeftToRight()&&(d=!d);d=d?-1:1;c=this.header.getCellNodeIndex(c)+d;for(var e=b[c];e&&e.getHeaderNode()&&"none"==e.getHeaderNode().style.display;)c+=d,e=b[c];return e?e.getHeaderNode():null});if(this.grid.columnReordering&&this.simpleStructure){this.source&&this.source.destroy();this.bottomMarker&&x.destroy(this.bottomMarker);
this.bottomMarker=x.byId("dojoxGrid_bottomMarker");this.topMarker&&x.destroy(this.topMarker);this.topMarker=x.byId("dojoxGrid_topMarker");this.bottomMarker||(this.bottomMarker=x.create("div",{id:"dojoxGrid_bottomMarker","class":"dojoxGridColPlaceBottom"},c.body()),this._hide(this.bottomMarker),this.topMarker=x.create("div",{id:"dojoxGrid_topMarker","class":"dojoxGridColPlaceTop"},c.body()),this._hide(this.topMarker));this.arrowDim=x.contentBox(this.bottomMarker);var f=x.contentBox(this.headerContentNode.firstChild.rows[0]).h;
this.source=new d(this.headerContentNode.firstChild.rows[0],{horizontal:!0,accept:["gridColumn_"+this.grid.id],viewIndex:this.index,generateText:!1,onMouseDown:h.hitch(this,function(b){this.header.decorateEvent(b);if((this.header.overRightResizeArea(b)||this.header.overLeftResizeArea(b))&&this.header.canResize(b)&&!this.header.moveable)this.header.beginColumnResize(b);else{if(this.grid.headerMenu)this.grid.headerMenu.onCancel(!0);b.button===(9>g("ie")?1:0)&&d.prototype.onMouseDown.call(this.source,
b)}}),onMouseOver:h.hitch(this,function(b){var c=this.source;c._getChildByEvent(b)&&d.prototype.onMouseOver.apply(c,arguments)}),_markTargetAnchor:h.hitch(this,function(b){var c=this.source;if(c.current!=c.targetAnchor||c.before!=b){c.targetAnchor&&e(c.targetAnchor,c.before)&&c._removeItemClass(e(c.targetAnchor,c.before),c.before?"After":"Before");d.prototype._markTargetAnchor.call(c,b);var g=b?c.targetAnchor:e(c.targetAnchor,c.before);b=0;g||(g=c.targetAnchor,b=x.contentBox(g).w+this.arrowDim.w/
2+2);g=x.position(g,!0);b=Math.floor(g.x-this.arrowDim.w/2+b);x.style(this.bottomMarker,"visibility","visible");x.style(this.topMarker,"visibility","visible");x.style(this.bottomMarker,{left:b+"px",top:f+g.y+"px"});x.style(this.topMarker,{left:b+"px",top:g.y-this.arrowDim.h+"px"});c.targetAnchor&&e(c.targetAnchor,c.before)&&c._addItemClass(e(c.targetAnchor,c.before),c.before?"After":"Before")}}),_unmarkTargetAnchor:h.hitch(this,function(){var b=this.source;b.targetAnchor&&(b.targetAnchor&&e(b.targetAnchor,
b.before)&&b._removeItemClass(e(b.targetAnchor,b.before),b.before?"After":"Before"),this._hide(this.bottomMarker),this._hide(this.topMarker),d.prototype._unmarkTargetAnchor.call(b))}),destroy:h.hitch(this,function(){q.disconnect(this._source_conn);q.unsubscribe(this._source_sub);d.prototype.destroy.call(this.source);this.bottomMarker&&(x.destroy(this.bottomMarker),delete this.bottomMarker);this.topMarker&&(x.destroy(this.topMarker),delete this.topMarker)}),onDndCancel:h.hitch(this,function(){d.prototype.onDndCancel.call(this.source);
this._hide(this.bottomMarker);this._hide(this.topMarker)})});this._source_conn=q.connect(this.source,"onDndDrop",this,"_onDndDrop");this._source_sub=q.subscribe("/dnd/drop/before",this,"_onDndDropBefore");this.source.startup()}},_hide:function(b){x.style(b,{top:"-10000px",visibility:"hidden"})},_onDndDropBefore:function(b,c,d){z.manager().target===this.source&&(this.source._targetNode=this.source.targetAnchor,this.source._beforeTarget=this.source.before,c=this.grid.views.views,b=c[b.viewIndex],c=
c[this.index],c!=b&&(b.convertColPctToFixed(),c.convertColPctToFixed()))},_onDndDrop:function(b,c,d){if(z.manager().target!==this.source)z.manager().source===this.source&&(this._removingColumn=!0);else{this._hide(this.bottomMarker);this._hide(this.topMarker);d=function(b){return b?x.attr(b,"idx"):null};var e=x.marginBox(c[0]).w;if(b.viewIndex!==this.index){var f=this.grid.views.views,g=f[b.viewIndex],f=f[this.index];g.viewWidth&&"auto"!=g.viewWidth&&g.setColumnsWidth(g.getColumnsWidth()-e);f.viewWidth&&
"auto"!=f.viewWidth&&f.setColumnsWidth(f.getColumnsWidth())}e=this.source._targetNode;g=this.source._beforeTarget;!this.grid.isLeftToRight()&&(g=!g);var f=this.grid.layout,h=this.index;delete this.source._targetNode;delete this.source._beforeTarget;f.moveColumn(b.viewIndex,h,d(c[0]),d(e),g)}},renderHeader:function(){this.headerContentNode.innerHTML=this.header.generateHtml(this._getHeaderContent);this.flexCells&&(this.contentWidth=this.getContentWidth(),this.headerContentNode.firstChild.style.width=
this.contentWidth);t.fire(this,"onAfterRow",[-1,this.structure.cells,this.headerContentNode])},_getHeaderContent:function(b){var c=b.name||b.grid.getCellName(b);/^\s+$/.test(c)&&(c="\x26nbsp;");var d=['\x3cdiv class\x3d"dojoxGridSortNode'];b.index!=b.grid.getSortIndex()?d.push('"\x3e'):d=d.concat([" ",0<b.grid.sortInfo?"dojoxGridSortUp":"dojoxGridSortDown",'"\x3e\x3cdiv class\x3d"dojoxGridArrowButtonChar"\x3e',0<b.grid.sortInfo?"\x26#9650;":"\x26#9660;",'\x3c/div\x3e\x3cdiv class\x3d"dojoxGridArrowButtonNode" role\x3d"presentation"\x3e\x3c/div\x3e',
'\x3cdiv class\x3d"dojoxGridColCaption"\x3e']);d=d.concat([c,"\x3c/div\x3e\x3c/div\x3e"]);return d.join("")},resize:function(){this.adaptHeight();this.adaptWidth()},hasHScrollbar:function(b){var c=this._hasHScroll||!1;if(void 0==this._hasHScroll||b)this.noscroll?this._hasHScroll=!1:(b=x.style(this.scrollboxNode,"overflow"),this._hasHScroll="hidden"==b?!1:"scroll"==b?!0:this.scrollboxNode.offsetWidth-this.getScrollbarWidth()<this.contentNode.offsetWidth);c!==this._hasHScroll&&this.grid.update();return this._hasHScroll},
hasVScrollbar:function(b){var c=this._hasVScroll||!1;if(void 0==this._hasVScroll||b)this.noscroll?this._hasVScroll=!1:(b=x.style(this.scrollboxNode,"overflow"),this._hasVScroll="hidden"==b?!1:"scroll"==b?!0:this.scrollboxNode.scrollHeight>this.scrollboxNode.clientHeight);c!==this._hasVScroll&&this.grid.update();return this._hasVScroll},convertColPctToFixed:function(){var b=!1;this.grid.initialWidth="";var c=e("th",this.headerContentNode),d=k.map(c,function(c,d){var e=c.style.width;x.attr(c,"vIdx",
d);if(e&&"%"==e.slice(-1))b=!0;else if(e&&"px"==e.slice(-2))return window.parseInt(e,10);return x.contentBox(c).w});return b?(k.forEach(this.grid.layout.cells,function(b,c){if(b.view==this&&(b=b.view.getHeaderCellNode(b.index))&&x.hasAttr(b,"vIdx")){var e=window.parseInt(x.attr(b,"vIdx"));this.setColWidth(c,d[e]);x.removeAttr(b,"vIdx")}},this),!0):!1},adaptHeight:function(b){if(!this.grid._autoHeight){var c=this.domNode.style.height&&parseInt(this.domNode.style.height.replace(/px/,""),10)||this.domNode.clientHeight;
if(!b&&(b=this.noscroll))a:{for(var d=0;d<this.grid.views.views.length;++d)if(b=this.grid.views.views[d],b!==this&&b.hasHScrollbar()){b=!0;break a}b=!1}b&&(c-=u.getScrollbar().h);t.setStyleHeightPx(this.scrollboxNode,c)}this.hasVScrollbar(!0)},adaptWidth:function(){this.flexCells&&(this.contentWidth=this.getContentWidth(),this.headerContentNode.firstChild.style.width=this.contentWidth);var b=this.scrollboxNode.offsetWidth-this.getScrollbarWidth();this._removingColumn?(b=Math.min(b,this.getColumnsWidth())+
"px",this._removingColumn=!1):b=Math.max(b,this.getColumnsWidth())+"px";this.contentNode.style.width=b;this.hasHScrollbar(!0)},setSize:function(b,c){var d=this.domNode.style,e=this.headerNode.style;b&&(d.width=b,e.width=b);d.height=0<=c?c+"px":""},renderRow:function(b){var c=this.createRowNode(b);this.buildRow(b,c);return c},createRowNode:function(b){var c=document.createElement("div");c.className=this.classTag+"Row";this instanceof f.grid._RowSelector?x.attr(c,"role","presentation"):(x.attr(c,"role",
"row"),"none"!=this.grid.selectionMode&&c.setAttribute("aria-selected","false"));c[t.gridViewTag]=this.id;c[t.rowIndexTag]=b;return this.rowNodes[b]=c},buildRow:function(b,c){this.buildRowContent(b,c);this.styleRow(b,c)},buildRowContent:function(b,c){c.innerHTML=this.content.generateHtml(b,b);this.flexCells&&this.contentWidth&&(c.firstChild.style.width=this.contentWidth);t.fire(this,"onAfterRow",[b,this.structure.cells,c])},rowRemoved:function(b){0<=b&&this._cleanupRowWidgets(this.getRowNode(b));
this.grid.edit.save(this,b);delete this.rowNodes[b]},getRowNode:function(b){return this.rowNodes[b]},getCellNode:function(b,c){if(b=this.getRowNode(b))return this.content.getCellNode(b,c)},getHeaderCellNode:function(b){if(this.headerContentNode)return this.header.getCellNode(this.headerContentNode,b)},styleRow:function(b,c){var d;d=void 0==c.style.cssText?c.getAttribute("style"):c.style.cssText;c._style=d;this.styleRowNode(b,c)},styleRowNode:function(b,c){c&&this.doStyleRowNode(b,c)},doStyleRowNode:function(b,
c){this.grid.styleRowNode(b,c)},updateRow:function(b){var c=this.getRowNode(b);c&&(c.style.height="",this.buildRow(b,c));return c},updateRowStyles:function(b){this.styleRowNode(b,this.getRowNode(b))},lastTop:0,firstScroll:0,_nativeScroll:!1,doscroll:function(b){if(13<=g("ff")||g("chrome"))this._nativeScroll=!0;b=this.grid.isLeftToRight();if(2>this.firstScroll){if(!b&&1==this.firstScroll||b&&0===this.firstScroll){var c=x.marginBox(this.headerNodeContainer);g("ie")?this.headerNodeContainer.style.width=
c.w+this.getScrollbarWidth()+"px":g("mozilla")&&(this.headerNodeContainer.style.width=c.w-this.getScrollbarWidth()+"px",this.scrollboxNode.scrollLeft=b?this.scrollboxNode.clientWidth-this.scrollboxNode.scrollWidth:this.scrollboxNode.scrollWidth-this.scrollboxNode.clientWidth)}this.firstScroll++}this.headerNode.scrollLeft=this.scrollboxNode.scrollLeft;b=this.scrollboxNode.scrollTop;b!==this.lastTop&&this.grid.scrollTo(b);this._nativeScroll=!1},setScrollTop:function(b){this.lastTop=b;this._nativeScroll||
(this.scrollboxNode.scrollTop=b);return this.scrollboxNode.scrollTop},doContentEvent:function(b){if(this.content.decorateEvent(b))this.grid.onContentEvent(b)},doHeaderEvent:function(b){if(this.header.decorateEvent(b))this.grid.onHeaderEvent(b)},dispatchContentEvent:function(b){return this.content.dispatchEvent(b)},dispatchHeaderEvent:function(b){return this.header.dispatchEvent(b)},setColWidth:function(b,c){this.grid.setCellWidth(b,c+"px")},update:function(){if(this.domNode){this.content.update();
this.grid.update();var b=this.scrollboxNode.scrollLeft;this.scrollboxNode.scrollLeft=b;this.headerNode.scrollLeft=b}}});var B=l("dojox.grid._GridAvatar",y,{construct:function(){var b=c.doc,d=b.createElement("table");d.cellPadding=d.cellSpacing="0";d.className="dojoxGridDndAvatar";d.style.position="absolute";d.style.zIndex=1999;d.style.margin="0px";var e=b.createElement("tbody"),f=b.createElement("tr"),g=b.createElement("td"),h=b.createElement("td");f.className="dojoxGridDndAvatarItem";h.className=
"dojoxGridDndAvatarItemImage";h.style.width="16px";var k=this.manager.source;if(k.creator)k=k._normalizedCreator(k.getItem(this.manager.nodes[0].id).data,"avatar").node;else{var k=this.manager.nodes[0].cloneNode(!0),l,m;"tr"==k.tagName.toLowerCase()?(l=b.createElement("table"),m=b.createElement("tbody"),m.appendChild(k),l.appendChild(m),k=l):"th"==k.tagName.toLowerCase()&&(l=b.createElement("table"),m=b.createElement("tbody"),b=b.createElement("tr"),l.cellPadding=l.cellSpacing="0",b.appendChild(k),
m.appendChild(b),l.appendChild(m),k=l)}k.id="";g.appendChild(k);f.appendChild(h);f.appendChild(g);x.style(f,"opacity",.9);e.appendChild(f);d.appendChild(e);this.node=d;d=z.manager();this.oldOffsetY=d.OFFSET_Y;d.OFFSET_Y=1},destroy:function(){z.manager().OFFSET_Y=this.oldOffsetY;this.inherited(arguments)}}),A=z.manager().makeAvatar;z.manager().makeAvatar=function(){return void 0===this.source.viewIndex||x.hasClass(c.body(),"dijit_a11y")?A.call(z.manager()):new B(this)};return b})},"dojo/dnd/Source":function(){define("dojo/dnd/Source",
"../_base/array ../_base/declare ../_base/kernel ../_base/lang ../dom-class ../dom-geometry ../mouse ../ready ../topic ./common ./Selector ./Manager".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d){f.isAsync||g(0,function(){require(["dojo/dnd/AutoSource","dojo/dnd/Target"])});var r=p("dojo.dnd.Source",b,{isSource:!0,horizontal:!1,copyOnly:!1,selfCopy:!1,selfAccept:!0,skipForm:!1,withHandles:!1,autoSync:!1,delay:0,accept:["text"],generateText:!0,constructor:function(b,c){l.mixin(this,l.mixin({},c));b=
this.accept;if(b.length)for(this.accept={},c=0;c<b.length;++c)this.accept[b[c]]=1;this.mouseDown=this.isDragging=!1;this.targetBox=this.targetAnchor=null;this.before=!0;this._lastY=this._lastX=0;this.sourceState="";this.isSource&&k.add(this.node,"dojoDndSource");this.targetState="";this.accept&&k.add(this.node,"dojoDndTarget");this.horizontal&&k.add(this.node,"dojoDndHorizontal");this.topics=[e.subscribe("/dnd/source/over",l.hitch(this,"onDndSourceOver")),e.subscribe("/dnd/start",l.hitch(this,"onDndStart")),
e.subscribe("/dnd/drop",l.hitch(this,"onDndDrop")),e.subscribe("/dnd/cancel",l.hitch(this,"onDndCancel"))]},checkAcceptance:function(b,c){if(this==b)return!this.copyOnly||this.selfAccept;for(var d=0;d<c.length;++d){for(var e=b.getItem(c[d].id).type,f=!1,g=0;g<e.length;++g)if(e[g]in this.accept){f=!0;break}if(!f)return!1}return!0},copyState:function(b,c){if(b)return!0;2>arguments.length&&(c=this==d.manager().target);if(c){if(this.copyOnly)return this.selfCopy}else return this.copyOnly;return!1},destroy:function(){r.superclass.destroy.call(this);
m.forEach(this.topics,function(b){b.remove()});this.targetAnchor=null},onMouseMove:function(b){if(!this.isDragging||"Disabled"!=this.targetState){r.superclass.onMouseMove.call(this,b);var e=d.manager();if(!this.isDragging&&this.mouseDown&&this.isSource&&(Math.abs(b.pageX-this._lastX)>this.delay||Math.abs(b.pageY-this._lastY)>this.delay)){var f=this.getSelectedNodes();f.length&&e.startDrag(this,f,this.copyState(c.getCopyKeyState(b),!0))}this.isDragging&&(f=!1,this.current&&(this.targetBox&&this.targetAnchor==
this.current||(this.targetBox=h.position(this.current,!0)),f=this.horizontal?b.pageX-this.targetBox.x<this.targetBox.w/2==h.isBodyLtr(this.current.ownerDocument):b.pageY-this.targetBox.y<this.targetBox.h/2),this.current!=this.targetAnchor||f!=this.before)&&(this._markTargetAnchor(f),e.canDrop(!this.current||e.source!=this||!(this.current.id in this.selection)))}},onMouseDown:function(b){this.mouseDown||!this._legalMouseDown(b)||this.skipForm&&c.isFormElement(b)||(this.mouseDown=!0,this._lastX=b.pageX,
this._lastY=b.pageY,r.superclass.onMouseDown.call(this,b))},onMouseUp:function(b){this.mouseDown&&(this.mouseDown=!1,r.superclass.onMouseUp.call(this,b))},onDndSourceOver:function(b){this!==b?(this.mouseDown=!1,this.targetAnchor&&this._unmarkTargetAnchor()):this.isDragging&&(b=d.manager(),b.canDrop("Disabled"!=this.targetState&&(!this.current||b.source!=this||!(this.current.id in this.selection))))},onDndStart:function(b,c,e){this.autoSync&&this.sync();this.isSource&&this._changeState("Source",this==
b?e?"Copied":"Moved":"");c=this.accept&&this.checkAcceptance(b,c);this._changeState("Target",c?"":"Disabled");this==b&&d.manager().overSource(this);this.isDragging=!0},onDndDrop:function(b,c,d,e){if(this==e)this.onDrop(b,c,d);this.onDndCancel()},onDndCancel:function(){this.targetAnchor&&(this._unmarkTargetAnchor(),this.targetAnchor=null);this.before=!0;this.mouseDown=this.isDragging=!1;this._changeState("Source","");this._changeState("Target","")},onDrop:function(b,c,d){if(this!=b)this.onDropExternal(b,
c,d);else this.onDropInternal(c,d)},onDropExternal:function(b,d,e){var f=this._normalizedCreator;this._normalizedCreator=this.creator?function(c,d){return f.call(this,b.getItem(c.id).data,d)}:e?function(d){var e=b.getItem(d.id);d=d.cloneNode(!0);d.id=c.getUniqueId();return{node:d,data:e.data,type:e.type}}:function(c){var d=b.getItem(c.id);b.delItem(c.id);return{node:c,data:d.data,type:d.type}};this.selectNone();e||this.creator||b.selectNone();this.insertNodes(!0,d,this.before,this.current);!e&&this.creator&&
b.deleteSelectedNodes();this._normalizedCreator=f},onDropInternal:function(b,d){var e=this._normalizedCreator;if(!(this.current&&this.current.id in this.selection)){if(d)this._normalizedCreator=this.creator?function(b,c){return e.call(this,this.getItem(b.id).data,c)}:function(b){var d=this.getItem(b.id);b=b.cloneNode(!0);b.id=c.getUniqueId();return{node:b,data:d.data,type:d.type}};else{if(!this.current)return;this._normalizedCreator=function(b){var c=this.getItem(b.id);return{node:b,data:c.data,type:c.type}}}this._removeSelection();
this.insertNodes(!0,b,this.before,this.current);this._normalizedCreator=e}},onDraggingOver:function(){},onDraggingOut:function(){},onOverEvent:function(){r.superclass.onOverEvent.call(this);d.manager().overSource(this);if(this.isDragging&&"Disabled"!=this.targetState)this.onDraggingOver()},onOutEvent:function(){r.superclass.onOutEvent.call(this);d.manager().outSource(this);if(this.isDragging&&"Disabled"!=this.targetState)this.onDraggingOut()},_markTargetAnchor:function(b){if(this.current!=this.targetAnchor||
this.before!=b)this.targetAnchor&&this._removeItemClass(this.targetAnchor,this.before?"Before":"After"),this.targetAnchor=this.current,this.targetBox=null,this.before=b,this.targetAnchor&&this._addItemClass(this.targetAnchor,this.before?"Before":"After")},_unmarkTargetAnchor:function(){this.targetAnchor&&(this._removeItemClass(this.targetAnchor,this.before?"Before":"After"),this.targetBox=this.targetAnchor=null,this.before=!0)},_markDndStatus:function(b){this._changeState("Source",b?"Copied":"Moved")},
_legalMouseDown:function(b){if("touchstart"!=b.type&&!q.isLeft(b))return!1;if(!this.withHandles)return!0;for(b=b.target;b&&b!==this.node;b=b.parentNode){if(k.contains(b,"dojoDndHandle"))return!0;if(k.contains(b,"dojoDndItem")||k.contains(b,"dojoDndIgnore"))break}return!1}});return r})},"dojo/dnd/Selector":function(){define("dojo/dnd/Selector","../_base/array ../_base/declare ../_base/kernel ../_base/lang ../dom ../dom-construct ../mouse ../_base/NodeList ../on ../touch ./common ./Container".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d){var r=p("dojo.dnd.Selector",d,{constructor:function(b,d){d||(d={});this.singular=d.singular;this.autoSync=d.autoSync;this.selection={};this.anchor=null;this.simpleSelection=!1;this.events.push(e(this.node,c.press,l.hitch(this,"onMouseDown")),e(this.node,c.release,l.hitch(this,"onMouseUp")))},singular:!1,getSelectedNodes:function(){var c=new g,d=b._empty,e;for(e in this.selection)e in d||c.push(k.byId(e));return c},selectNone:function(){return this._removeSelection()._removeAnchor()},
selectAll:function(){this.forInItems(function(b,c){this._addItemClass(k.byId(c),"Selected");this.selection[c]=1},this);return this._removeAnchor()},deleteSelectedNodes:function(){var c=b._empty,d;for(d in this.selection)if(!(d in c)){var e=k.byId(d);this.delItem(d);h.destroy(e)}this.anchor=null;this.selection={};return this},forInSelectedItems:function(c,d){d=d||f.global;var e=this.selection,g=b._empty,h;for(h in e)h in g||c.call(d,this.getItem(h),h,this)},sync:function(){r.superclass.sync.call(this);
this.anchor&&!this.getItem(this.anchor.id)&&(this.anchor=null);var c=[],d=b._empty,e;for(e in this.selection)e in d||this.getItem(e)||c.push(e);m.forEach(c,function(b){delete this.selection[b]},this);return this},insertNodes:function(b,c,d,e){var f=this._normalizedCreator;this._normalizedCreator=function(c,d){c=f.call(this,c,d);b?(this.anchor?this.anchor!=c.node&&(this._removeItemClass(c.node,"Anchor"),this._addItemClass(c.node,"Selected")):(this.anchor=c.node,this._removeItemClass(c.node,"Selected"),
this._addItemClass(this.anchor,"Anchor")),this.selection[c.node.id]=1):(this._removeItemClass(c.node,"Selected"),this._removeItemClass(c.node,"Anchor"));return c};r.superclass.insertNodes.call(this,c,d,e);this._normalizedCreator=f;return this},destroy:function(){r.superclass.destroy.call(this);this.selection=this.anchor=null},onMouseDown:function(c){this.autoSync&&this.sync();if(this.current)if(!this.singular&&!b.getCopyKeyState(c)&&!c.shiftKey&&this.current.id in this.selection)this.simpleSelection=
!0,q.isLeft(c)&&(c.stopPropagation(),c.preventDefault());else{if(!this.singular&&c.shiftKey){b.getCopyKeyState(c)||this._removeSelection();var d=this.getAllNodes();if(d.length&&(this.anchor||(this.anchor=d[0],this._addItemClass(this.anchor,"Anchor")),this.selection[this.anchor.id]=1,this.anchor!=this.current)){for(var e=0,f;e<d.length&&(f=d[e],f!=this.anchor&&f!=this.current);++e);for(++e;e<d.length;++e){f=d[e];if(f==this.anchor||f==this.current)break;this._addItemClass(f,"Selected");this.selection[f.id]=
1}this._addItemClass(this.current,"Selected");this.selection[this.current.id]=1}}else this.singular?this.anchor==this.current?b.getCopyKeyState(c)&&this.selectNone():(this.selectNone(),this.anchor=this.current,this._addItemClass(this.anchor,"Anchor"),this.selection[this.current.id]=1):b.getCopyKeyState(c)?this.anchor==this.current?(delete this.selection[this.anchor.id],this._removeAnchor()):this.current.id in this.selection?(this._removeItemClass(this.current,"Selected"),delete this.selection[this.current.id]):
(this.anchor&&(this._removeItemClass(this.anchor,"Anchor"),this._addItemClass(this.anchor,"Selected")),this.anchor=this.current,this._addItemClass(this.current,"Anchor"),this.selection[this.current.id]=1):this.current.id in this.selection||(this.selectNone(),this.anchor=this.current,this._addItemClass(this.current,"Anchor"),this.selection[this.current.id]=1);c.stopPropagation();c.preventDefault()}},onMouseUp:function(){this.simpleSelection&&(this.simpleSelection=!1,this.selectNone(),this.current&&
(this.anchor=this.current,this._addItemClass(this.anchor,"Anchor"),this.selection[this.current.id]=1))},onMouseMove:function(){this.simpleSelection=!1},onOverEvent:function(){this.onmousemoveEvent=e(this.node,c.move,l.hitch(this,"onMouseMove"))},onOutEvent:function(){this.onmousemoveEvent&&(this.onmousemoveEvent.remove(),delete this.onmousemoveEvent)},_removeSelection:function(){var c=b._empty,d;for(d in this.selection)if(!(d in c)){var e=k.byId(d);e&&this._removeItemClass(e,"Selected")}this.selection=
{};return this},_removeAnchor:function(){this.anchor&&(this._removeItemClass(this.anchor,"Anchor"),this.anchor=null);return this}});return r})},"dojo/dnd/Container":function(){define("dojo/dnd/Container","../_base/array ../_base/declare ../_base/kernel ../_base/lang ../_base/window ../dom ../dom-class ../dom-construct ../Evented ../has ../on ../query ../touch ./common".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d,r,v){p=p("dojo.dnd.Container",e,{skipForm:!1,allowNested:!1,constructor:function(c,d){this.node=
h.byId(c);d||(d={});this.creator=d.creator||null;this.skipForm=d.skipForm;this.parent=d.dropParent&&h.byId(d.dropParent);this.map={};this.current=null;this.containerState="";q.add(this.node,"dojoDndContainer");d&&d._skipStartup||this.startup();this.events=[b(this.node,r.over,l.hitch(this,"onMouseOver")),b(this.node,r.out,l.hitch(this,"onMouseOut")),b(this.node,"dragstart",l.hitch(this,"onSelectStart")),b(this.node,"selectstart",l.hitch(this,"onSelectStart"))]},creator:function(){},getItem:function(b){return this.map[b]},
setItem:function(b,c){this.map[b]=c},delItem:function(b){delete this.map[b]},forInItems:function(b,c){c=c||f.global;var d=this.map,e=v._empty,g;for(g in d)g in e||b.call(c,d[g],g,this);return c},clearItems:function(){this.map={}},getAllNodes:function(){return d((this.allowNested?"":"\x3e ")+".dojoDndItem",this.parent)},sync:function(){var b={};this.getAllNodes().forEach(function(c){if(c.id){var d=this.getItem(c.id);if(d){b[c.id]=d;return}}else c.id=v.getUniqueId();var d=c.getAttribute("dndType"),
e=c.getAttribute("dndData");b[c.id]={data:e||c.innerHTML,type:d?d.split(/\s*,\s*/):["text"]}},this);this.map=b;return this},insertNodes:function(b,c,d){this.parent.firstChild?c?d||(d=this.parent.firstChild):d&&(d=d.nextSibling):d=null;var e;if(d)for(c=0;c<b.length;++c)e=this._normalizedCreator(b[c]),this.setItem(e.node.id,{data:e.data,type:e.type}),d.parentNode.insertBefore(e.node,d);else for(c=0;c<b.length;++c)e=this._normalizedCreator(b[c]),this.setItem(e.node.id,{data:e.data,type:e.type}),this.parent.appendChild(e.node);
return this},destroy:function(){m.forEach(this.events,function(b){b.remove()});this.clearItems();this.node=this.parent=this.current=null},markupFactory:function(b,c,d){b._skipStartup=!0;return new d(c,b)},startup:function(){if(!this.parent&&(this.parent=this.node,"table"==this.parent.tagName.toLowerCase())){var b=this.parent.getElementsByTagName("tbody");b&&b.length&&(this.parent=b[0])}this.defaultCreator=v._defaultCreator(this.parent);this.sync()},onMouseOver:function(b){for(var c=b.relatedTarget;c&&
c!=this.node;)try{c=c.parentNode}catch(x){c=null}c||(this._changeState("Container","Over"),this.onOverEvent());c=this._getChildByEvent(b);this.current!=c&&(this.current&&this._removeItemClass(this.current,"Over"),c&&this._addItemClass(c,"Over"),this.current=c)},onMouseOut:function(b){for(b=b.relatedTarget;b;){if(b==this.node)return;try{b=b.parentNode}catch(t){b=null}}this.current&&(this._removeItemClass(this.current,"Over"),this.current=null);this._changeState("Container","");this.onOutEvent()},onSelectStart:function(b){this.withHandles||
this.skipForm&&v.isFormElement(b)||(b.stopPropagation(),b.preventDefault())},onOverEvent:function(){},onOutEvent:function(){},_changeState:function(b,c){var d="dojoDnd"+b;b=b.toLowerCase()+"State";q.replace(this.node,d+c,d+this[b]);this[b]=c},_addItemClass:function(b,c){q.add(b,"dojoDndItem"+c)},_removeItemClass:function(b,c){q.remove(b,"dojoDndItem"+c)},_getChildByEvent:function(b){if(b=b.target)for(var c=b.parentNode;c;b=c,c=b.parentNode)if((c==this.parent||this.allowNested)&&q.contains(b,"dojoDndItem"))return b;
return null},_normalizedCreator:function(b,c){b=(this.creator||this.defaultCreator).call(this,b,c);l.isArray(b.type)||(b.type=["text"]);b.node.id||(b.node.id=v.getUniqueId());q.add(b.node,"dojoDndItem");return b}});v._createNode=function(b){return b?function(c){return g.create(b,{innerHTML:c})}:v._createSpan};v._createTrTd=function(b){var c=g.create("tr");g.create("td",{innerHTML:b},c);return c};v._createSpan=function(b){return g.create("span",{innerHTML:b})};v._defaultCreatorNodes={ul:"li",ol:"li",
div:"div",p:"div"};v._defaultCreator=function(b){b=b.tagName.toLowerCase();var c="tbody"==b||"thead"==b?v._createTrTd:v._createNode(v._defaultCreatorNodes[b]);return function(b,d){var e=b&&l.isObject(b),f;e&&b.tagName&&b.nodeType&&b.getAttribute?(f=b.getAttribute("dndData")||b.innerHTML,e=(e=b.getAttribute("dndType"))?e.split(/\s*,\s*/):["text"]):(f=e&&b.data?b.data:b,e=e&&b.type?b.type:["text"],b=("avatar"==d?v._createSpan:c)(String(f)));b.id||(b.id=v.getUniqueId());return{node:b,data:f,type:e}}};
return p})},"dojox/html/metrics":function(){define("dojox/html/metrics","dojo/_base/kernel dojo/_base/lang dojo/_base/sniff dojo/ready dojo/_base/unload dojo/_base/window dojo/dom-geometry".split(" "),function(m,p,f,l,k,h,q){var g=p.getObject("dojox.html.metrics",!0),e=p.getObject("dojox");g.getFontMeasurements=function(){var b={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},c;f("ie")&&(c=h.doc.documentElement.style.fontSize||
"",c||(h.doc.documentElement.style.fontSize="100%"));var d=h.doc.createElement("div"),e=d.style;e.position="absolute";e.left="-100px";e.top="0";e.width="30px";e.height="1000em";e.borderWidth="0";e.margin="0";e.padding="0";e.outline="0";e.lineHeight="1";e.overflow="hidden";h.body().appendChild(d);for(var g in b)e.fontSize=g,b[g]=16*Math.round(12*d.offsetHeight/16)/12/1E3;f("ie")&&(h.doc.documentElement.style.fontSize=c);h.body().removeChild(d);d=null;return b};var c=null;g.getCachedFontMeasurements=
function(b){if(b||!c)c=g.getFontMeasurements();return c};var b=null,d={};g.getTextBox=function(c,e,f){var g,k;if(b)g=b;else{g=b=h.doc.createElement("div");g.style.whiteSpace="nowrap";var l=h.doc.createElement("div");l.appendChild(g);k=l.style;k.overflow="scroll";k.position="absolute";k.left="0px";k.top="-10000px";k.width="1px";k.height="1px";k.visibility="hidden";k.borderWidth="0";k.margin="0";k.padding="0";k.outline="0";h.body().appendChild(l)}g.className="";k=g.style;k.borderWidth="0";k.margin=
"0";k.padding="0";k.outline="0";if(1<arguments.length&&e)for(var m in e)m in d||(k[m]=e[m]);2<arguments.length&&f&&(g.className=f);g.innerHTML=c;k=q.position(g);k.w=g.parentNode.scrollWidth;return k};var r=16,v=16;g.getScrollbar=function(){return{w:r,h:v}};g._fontResizeNode=null;g.initOnFontResize=function(b){var c=g._fontResizeNode=h.doc.createElement("iframe");b=c.style;b.position="absolute";b.width="5em";b.height="10em";b.top="-10000px";b.display="none";f("ie")?c.onreadystatechange=function(){"complete"==
c.contentWindow.document.readyState&&(c.onresize=c.contentWindow.parent[e._scopeName].html.metrics._fontresize)}:c.onload=function(){c.contentWindow.onresize=c.contentWindow.parent[e._scopeName].html.metrics._fontresize};c.setAttribute("src","javascript:'\x3chtml\x3e\x3chead\x3e\x3cscript\x3eif(\"loadFirebugConsole\" in window){window.loadFirebugConsole();}\x3c/script\x3e\x3c/head\x3e\x3cbody\x3e\x3c/body\x3e\x3c/html\x3e'");h.body().appendChild(c);g.initOnFontResize=function(){}};g.onFontResize=
function(){};g._fontresize=function(){g.onFontResize()};k.addOnUnload(function(){var b=g._fontResizeNode;b&&(f("ie")&&b.onresize?b.onresize=null:b.contentWindow&&b.contentWindow.onresize&&(b.contentWindow.onresize=null),g._fontResizeNode=null)});l(function(){try{var b=h.doc.createElement("div");b.style.cssText="top:0;left:0;width:100px;height:100px;overflow:scroll;position:absolute;visibility:hidden;";h.body().appendChild(b);r=b.offsetWidth-b.clientWidth;v=b.offsetHeight-b.clientHeight;h.body().removeChild(b);
delete b}catch(t){}"fontSizeWatch"in m.config&&m.config.fontSizeWatch&&g.initOnFontResize()});return g})},"dojox/grid/_Builder":function(){define("dojox/grid/_Builder","../main dojo/_base/array dojo/_base/lang dojo/_base/window dojo/_base/event dojo/_base/sniff dojo/_base/connect dojo/dnd/Moveable dojox/html/metrics ./util dojo/_base/html dojo/dom-geometry".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d){var r=m.grid,v=function(b){return 0<=b.rowIndex?b.rowIndex:p.indexOf(b.parentNode.childNodes,b)},
u=function(b,c){return b&&((b.rows||0)[c]||b.childNodes[c])},t=function(b){for(;b&&"TABLE"!=b.tagName;b=b.parentNode);return b},x=function(b){var c=b.toUpperCase();return function(b){return b.tagName!=c}},w=c.rowIndexTag,y=c.gridViewTag,z=r._Builder=f.extend(function(b){b&&(this.view=b,this.grid=b.grid)},{view:null,_table:'\x3ctable class\x3d"dojoxGridRowTable" border\x3d"0" cellspacing\x3d"0" cellpadding\x3d"0" role\x3d"presentation"',getTableArray:function(){var b=[this._table];this.view.viewWidth&&
b.push([' style\x3d"width:',this.view.viewWidth,';"'].join(""));b.push("\x3e");return b},generateCellMarkup:function(b,c,d,e){var f=[],g;e?(g=b.index!=b.grid.getSortIndex()?"":0<b.grid.sortInfo?'aria-sort\x3d"ascending"':'aria-sort\x3d"descending"',b.id||(b.id=this.grid.id+"Hdr"+b.index),g=['\x3cth tabIndex\x3d"-1" aria-readonly\x3d"true" role\x3d"columnheader"',g,' id\x3d"',b.id,'"']):g=['\x3ctd tabIndex\x3d"-1" role\x3d"gridcell"',this.grid.editable&&!b.editable?'aria-readonly\x3d"true"':""];b.colSpan&&
g.push(' colspan\x3d"',b.colSpan,'"');b.rowSpan&&g.push(' rowspan\x3d"',b.rowSpan,'"');g.push(' class\x3d"dojoxGridCell ');b.classes&&g.push(b.classes," ");d&&g.push(d," ");f.push(g.join(""));f.push("");g=['" idx\x3d"',b.index,'" style\x3d"'];c&&";"!=c[c.length-1]&&(c+=";");g.push(b.styles,c||"",b.hidden?"display:none;":"");b.unitWidth&&g.push("width:",b.unitWidth,";");f.push(g.join(""));f.push("");g=['"'];b.attrs&&g.push(" ",b.attrs);g.push("\x3e");f.push(g.join(""));f.push("");f.push(e?"\x3c/th\x3e":
"\x3c/td\x3e");return f},isCellNode:function(c){return!(!c||c==l.doc||!b.attr(c,"idx"))},getCellNodeIndex:function(c){return c?Number(b.attr(c,"idx")):-1},getCellNode:function(b,c){for(var d=0,e;(e=u(b.firstChild,d))&&e.cells;d++)for(var f=0,g;g=e.cells[f];f++)if(this.getCellNodeIndex(g)==c)return g;return null},findCellTarget:function(b,c){for(;b&&(!this.isCellNode(b)||b.offsetParent&&y in b.offsetParent.parentNode&&b.offsetParent.parentNode[y]!=this.view.id)&&b!=c;)b=b.parentNode;return b!=c?b:
null},baseDecorateEvent:function(b){b.dispatch="do"+b.type;b.grid=this.grid;b.sourceView=this.view;b.cellNode=this.findCellTarget(b.target,b.rowNode);b.cellIndex=this.getCellNodeIndex(b.cellNode);b.cell=0<=b.cellIndex?this.grid.getCell(b.cellIndex):null},findTarget:function(b,c){for(;b&&b!=this.domNode&&(!(c in b)||y in b&&b[y]!=this.view.id);)b=b.parentNode;return b!=this.domNode?b:null},findRowTarget:function(b){return this.findTarget(b,w)},isIntraNodeEvent:function(c){try{return c.cellNode&&c.relatedTarget&&
b.isDescendant(c.relatedTarget,c.cellNode)}catch(C){return!1}},isIntraRowEvent:function(b){try{var c=b.relatedTarget&&this.findRowTarget(b.relatedTarget);return!c&&-1==b.rowIndex||c&&b.rowIndex==c.gridRowIndex}catch(F){return!1}},dispatchEvent:function(b){return b.dispatch in this?this[b.dispatch](b):!1},domouseover:function(b){b.cellNode&&b.cellNode!=this.lastOverCellNode&&(this.lastOverCellNode=b.cellNode,this.grid.onMouseOver(b));this.grid.onMouseOverRow(b)},domouseout:function(b){if(b.cellNode&&
b.cellNode==this.lastOverCellNode&&!this.isIntraNodeEvent(b,this.lastOverCellNode)&&(this.lastOverCellNode=null,this.grid.onMouseOut(b),!this.isIntraRowEvent(b)))this.grid.onMouseOutRow(b)},domousedown:function(b){if(b.cellNode)this.grid.onMouseDown(b);this.grid.onMouseDownRow(b)},_getTextDirStyle:function(b,c,d){return""}});m=r._ContentBuilder=f.extend(function(b){z.call(this,b)},z.prototype,{update:function(){this.prepareHtml()},prepareHtml:function(){for(var b=this.grid.get,c=this.view.structure.cells,
d=0,e;e=c[d];d++)for(var f=0,g;g=e[f];f++)g.get=g.get||void 0==g.value&&b,g.markup=this.generateCellMarkup(g,g.cellStyles,g.cellClasses,!1),!this.grid.editable&&g.editable&&(this.grid.editable=!0)},generateHtml:function(b,d){b=this.getTableArray();var e=this.view.structure.cells,f=this.grid.getItem(d),g;c.fire(this.view,"onBeforeRow",[d,e]);for(var h=0,k;k=e[h];h++)if(!k.hidden&&!k.header){b.push(k.invisible?'\x3ctr class\x3d"dojoxGridInvisible"\x3e':"\x3ctr\x3e");for(var l=0,m,p,q;m=k[l];l++)p=m.markup,
g=m.customClasses=[],q=m.customStyles=[],p[5]=m.format(d,f),p[1]=g.join(" "),p[3]=q.join(";"),(g=m.textDir||this.grid.textDir)&&(p[3]+=this._getTextDirStyle(g,m,d)),b.push.apply(b,p);b.push("\x3c/tr\x3e")}b.push("\x3c/table\x3e");return b.join("")},decorateEvent:function(b){b.rowNode=this.findRowTarget(b.target);if(!b.rowNode)return!1;b.rowIndex=b.rowNode[w];this.baseDecorateEvent(b);b.cell=this.grid.getCell(b.cellIndex);return!0}});var B=r._HeaderBuilder=f.extend(function(b){this.moveable=null;z.call(this,
b)},z.prototype,{_skipBogusClicks:!1,overResizeWidth:4,minColWidth:1,update:function(){this.tableMap?this.tableMap.mapRows(this.view.structure.cells):this.tableMap=new r._TableMap(this.view.structure.cells)},generateHtml:function(b,d){var e,f=this.getTableArray(),g=this.view.structure.cells;c.fire(this.view,"onBeforeRow",[-1,g]);for(var h=0,k;k=g[h];h++)if(!k.hidden){f.push(k.invisible?'\x3ctr class\x3d"dojoxGridInvisible"\x3e':"\x3ctr\x3e");for(var l=0,m,p;m=k[l];l++)m.customClasses=[],m.customStyles=
[],this.view.simpleStructure&&(m.draggable&&(m.headerClasses?-1==m.headerClasses.indexOf("dojoDndItem")&&(m.headerClasses+=" dojoDndItem"):m.headerClasses="dojoDndItem"),m.attrs?-1==m.attrs.indexOf("dndType\x3d'gridColumn_")&&(m.attrs+=" dndType\x3d'gridColumn_"+this.grid.id+"'"):m.attrs="dndType\x3d'gridColumn_"+this.grid.id+"'"),p=this.generateCellMarkup(m,m.headerStyles,m.headerClasses,!0),p[5]=void 0!=d?d:b(m),p[3]=m.customStyles.join(";"),(e=m.textDir||this.grid.textDir)&&(p[3]+=this._getTextDirStyle(e,
m,d)),p[1]=m.customClasses.join(" "),f.push(p.join(""));f.push("\x3c/tr\x3e")}f.push("\x3c/table\x3e");return f.join("")},getCellX:function(b){var c;c=x("th");for(var e=b.target;e&&c(e);e=e.parentNode);(c=e)?(c=d.position(c),b=b.clientX-c.x):b=b.layerX;return b},decorateEvent:function(b){this.baseDecorateEvent(b);b.rowIndex=-1;b.cellX=this.getCellX(b);return!0},prepareResize:function(b,c){do{var d=b.cellIndex;b.cellNode=d?b.cellNode.parentNode.cells[d+c]:null;b.cellIndex=b.cellNode?this.getCellNodeIndex(b.cellNode):
-1}while(b.cellNode&&"none"==b.cellNode.style.display);return!!b.cellNode},canResize:function(b){if(!b.cellNode||1<b.cellNode.colSpan)return!1;b=this.grid.getCell(b.cellIndex);return!b.noresize&&b.canResize()},overLeftResizeArea:function(c){if(b.hasClass(l.body(),"dojoDndMove"))return!1;if(h("ie")){var d=c.target;if(b.hasClass(d,"dojoxGridArrowButtonNode")||b.hasClass(d,"dojoxGridArrowButtonChar")||b.hasClass(d,"dojoxGridColCaption"))return!1}return this.grid.isLeftToRight()?0<c.cellIndex&&0<c.cellX&&
c.cellX<this.overResizeWidth&&this.prepareResize(c,-1):c.cellNode&&0<c.cellX&&c.cellX<this.overResizeWidth},overRightResizeArea:function(c){if(b.hasClass(l.body(),"dojoDndMove"))return!1;if(h("ie")){var d=c.target;if(b.hasClass(d,"dojoxGridArrowButtonNode")||b.hasClass(d,"dojoxGridArrowButtonChar")||b.hasClass(d,"dojoxGridColCaption"))return!1}return this.grid.isLeftToRight()?c.cellNode&&c.cellX>=c.cellNode.offsetWidth-this.overResizeWidth:0<c.cellIndex&&c.cellX>=c.cellNode.offsetWidth-this.overResizeWidth&&
this.prepareResize(c,-1)},domousemove:function(c){if(!this.moveable){var d=this.overRightResizeArea(c)?"dojoxGridColResize":this.overLeftResizeArea(c)?"dojoxGridColResize":"";d&&!this.canResize(c)&&(d="dojoxGridColNoResize");b.toggleClass(c.sourceView.headerNode,"dojoxGridColNoResize","dojoxGridColNoResize"==d);b.toggleClass(c.sourceView.headerNode,"dojoxGridColResize","dojoxGridColResize"==d);d&&k.stop(c)}},domousedown:function(b){this.moveable||((this.overRightResizeArea(b)||this.overLeftResizeArea(b))&&
this.canResize(b)?this.beginColumnResize(b):(this.grid.onMouseDown(b),this.grid.onMouseOverRow(b)))},doclick:function(b){return this._skipBogusClicks?(k.stop(b),!0):!1},colResizeSetup:function(c,d){var f=b.contentBox(c.sourceView.headerNode);if(d){this.lineDiv=document.createElement("div");d=b.position(c.sourceView.headerNode,!0);var g=b.contentBox(c.sourceView.domNode),k=c.pageX;!this.grid.isLeftToRight()&&8>h("ie")&&(k-=e.getScrollbar().w);b.style(this.lineDiv,{top:d.y+"px",left:k+"px",height:g.h+
f.h+"px"});b.addClass(this.lineDiv,"dojoxGridResizeColLine");this.lineDiv._origLeft=k;l.body().appendChild(this.lineDiv)}d=[];for(var g=this.tableMap.findOverlappingNodes(c.cellNode),k=0,m;m=g[k];k++)d.push({node:m,index:this.getCellNodeIndex(m),width:m.offsetWidth});g=c.sourceView;m=this.grid.isLeftToRight()?1:-1;for(var p=c.grid.views.views,k=[],q=g.idx+m,r;r=p[q];q+=m)k.push({node:r.headerNode,left:window.parseInt(r.headerNode.style.left)});m=g.headerContentNode.firstChild;return{scrollLeft:c.sourceView.headerNode.scrollLeft,
view:g,node:c.cellNode,index:c.cellIndex,w:b.contentBox(c.cellNode).w,vw:f.w,table:m,tw:b.contentBox(m).w,spanners:d,followers:k}},beginColumnResize:function(c){this.moverDiv=document.createElement("div");b.style(this.moverDiv,{position:"absolute",left:0});l.body().appendChild(this.moverDiv);b.addClass(this.grid.domNode,"dojoxGridColumnResizing");var d=this.moveable=new g(this.moverDiv),e=this.colResizeSetup(c,!0);d.onMove=f.hitch(this,"doResizeColumn",e);q.connect(d,"onMoveStop",f.hitch(this,function(){this.endResizeColumn(e);
e.node.releaseCapture&&e.node.releaseCapture();this.moveable.destroy();delete this.moveable;this.moveable=null;b.removeClass(this.grid.domNode,"dojoxGridColumnResizing")}));c.cellNode.setCapture&&c.cellNode.setCapture();d.onMouseDown(c)},doResizeColumn:function(c,d,e){var f=e.l,f={deltaX:f,w:c.w+(this.grid.isLeftToRight()?f:-f),vw:c.vw+f,tw:c.tw+f};this.dragRecord={inDrag:c,mover:d,leftTop:e};f.w>=this.minColWidth&&(d?b.style(this.lineDiv,"left",this.lineDiv._origLeft+f.deltaX+"px"):this.doResizeNow(c,
f))},endResizeColumn:function(c){if(this.dragRecord){var d=this.dragRecord.leftTop,d=this.grid.isLeftToRight()?d.l:-d.l,d=d+(Math.max(c.w+d,this.minColWidth)-(c.w+d));h("webkit")&&c.spanners.length&&(d+=b._getPadBorderExtents(c.spanners[0].node).w);this.doResizeNow(c,{deltaX:d,w:c.w+d,vw:c.vw+d,tw:c.tw+d});delete this.dragRecord}b.destroy(this.lineDiv);b.destroy(this.moverDiv);b.destroy(this.moverDiv);delete this.moverDiv;this._skipBogusClicks=!0;c.view.update();this._skipBogusClicks=!1;this.grid.onResizeColumn(c.index)},
doResizeNow:function(b,c){b.view.convertColPctToFixed();if(b.view.flexCells&&!b.view.testFlexCells()){var d=t(b.node);d&&(d.style.width="")}for(var e,f,d=0;e=b.spanners[d];d++)f=e.width+c.deltaX,0<f&&(e.node.style.width=f+"px",b.view.setColWidth(e.index,f));if(this.grid.isLeftToRight()||!h("ie"))for(d=0;e=b.followers[d];d++)f=e.left+c.deltaX,e.node.style.left=f+"px";b.node.style.width=c.w+"px";b.view.setColWidth(b.index,c.w);b.view.headerNode.style.width=c.vw+"px";b.view.setColumnsWidth(c.tw);this.grid.isLeftToRight()||
(b.view.headerNode.scrollLeft=b.scrollLeft+c.deltaX)}});r._TableMap=f.extend(function(b){this.mapRows(b)},{map:null,mapRows:function(b){if(b.length){this.map=[];for(var c,d=0;c=b[d];d++)this.map[d]=[];for(d=0;c=b[d];d++)for(var e=0,f=0,g,h;g=c[e];e++){for(;this.map[d][f];)f++;this.map[d][f]={c:e,r:d};h=g.rowSpan||1;g=g.colSpan||1;for(var k=0;k<h;k++)for(var l=0;l<g;l++)this.map[d+k][f+l]=this.map[d][f];f+=g}}},dumpMap:function(){for(var b=0,c;c=this.map[b];b++)for(var d=0;c[d];d++);},getMapCoords:function(b,
c){for(var d=0,e;e=this.map[d];d++)for(var f=0,g;g=e[f];f++)if(g.c==c&&g.r==b)return{j:d,i:f};return{j:-1,i:-1}},getNode:function(b,c,d){return(b=b&&b.rows[c])&&b.cells[d]},_findOverlappingNodes:function(b,c,d){var e=[];c=this.getMapCoords(c,d);d=0;for(var f;f=this.map[d];d++)d!=c.j&&(f=(f=f[c.i])?this.getNode(b,f.r,f.c):null)&&e.push(f);return e},findOverlappingNodes:function(b){return this._findOverlappingNodes(t(b),v(b.parentNode),0<=b.cellIndex?b.cellIndex:p.indexOf(b.parentNode.cells,b))}});
return{_Builder:z,_HeaderBuilder:B,_ContentBuilder:m}})},"dojox/grid/_ViewManager":function(){define("dojox/grid/_ViewManager",["dojo/_base/declare","dojo/_base/sniff","dojo/dom-class"],function(m,p,f){return m("dojox.grid._ViewManager",null,{constructor:function(f){this.grid=f},defaultWidth:200,views:[],resize:function(){this.onEach("resize")},render:function(){this.onEach("render")},addView:function(f){f.idx=this.views.length;this.views.push(f)},destroyViews:function(){for(var f=0,k;k=this.views[f];f++)k.destroy();
this.views=[]},getContentNodes:function(){for(var f=[],k=0,h;h=this.views[k];k++)f.push(h.contentNode);return f},forEach:function(f){for(var k=0,h;h=this.views[k];k++)f(h,k)},onEach:function(f,k){k=k||[];for(var h=0,l;l=this.views[h];h++)f in l&&l[f].apply(l,k)},normalizeHeaderNodeHeight:function(){for(var f=[],k=0,h;h=this.views[k];k++)h.headerContentNode.firstChild&&f.push(h.headerContentNode);this.normalizeRowNodeHeights(f)},normalizeRowNodeHeights:function(l){var k=0,h=[];if(this.grid.rowHeight)k=
this.grid.rowHeight;else{if(1>=l.length)return;for(var m=0,g;g=l[m];m++)f.contains(g,"dojoxGridNonNormalizedCell")||(h[m]=g.firstChild.offsetHeight,k=Math.max(k,h[m]));k=0<=k?k:0;(p("mozilla")||8<p("ie"))&&k&&k++}for(m=0;g=l[m];m++)h[m]!=k&&(g.firstChild.style.height=k+"px")},resetHeaderNodeHeight:function(){for(var f=0,k;k=this.views[f];f++)if(k=k.headerContentNode.firstChild)k.style.height=""},renormalizeRow:function(f){for(var k=[],h=0,l,g;(l=this.views[h])&&(g=l.getRowNode(f));h++)g.firstChild.style.height=
"",k.push(g);this.normalizeRowNodeHeights(k)},getViewWidth:function(f){return this.views[f].getWidth()||this.defaultWidth},measureHeader:function(){this.resetHeaderNodeHeight();this.forEach(function(f){f.headerContentNode.style.height=""});var f=0;this.forEach(function(k){f=Math.max(k.headerNode.offsetHeight,f)});return f},measureContent:function(){var f=0;this.forEach(function(k){f=Math.max(k.domNode.offsetHeight,f)});return f},findClient:function(f){f=this.grid.elasticView||-1;if(0>f)for(var k=
1,h;h=this.views[k];k++)if(h.viewWidth){for(k=1;h=this.views[k];k++)if(!h.viewWidth){f=k;break}break}0>f&&(f=Math.floor(this.views.length/2));return f},arrange:function(f,k){var h,l,g,e=this.views.length,c=this,b=0>=k?e:this.findClient(),d=function(b,d){var e=b.domNode.style,f=b.headerNode.style;c.grid.isLeftToRight()?(e.left=d+"px",f.left=d+"px"):(e.right=d+"px",4>p("ff")?f.right=d+b.getScrollbarWidth()+"px":f.right=d+"px",p("webkit")||"auto"==f.width||(f.width=parseInt(f.width,10)-b.getScrollbarWidth()+
"px"));e.top="0px";f.top=0};for(h=0;(l=this.views[h])&&h<b;h++)g=this.getViewWidth(h),l.setSize(g,0),d(l,f),g=l.headerContentNode&&l.headerContentNode.firstChild?l.getColumnsWidth()+l.getScrollbarWidth():l.domNode.offsetWidth,f+=g;h++;for(var m=e-1;(l=this.views[m])&&h<=m;m--)g=this.getViewWidth(m),l.setSize(g,0),g=l.domNode.offsetWidth,k-=g,d(l,k);b<e&&(l=this.views[b],g=Math.max(1,k-f),l.setSize(g+"px",0),d(l,f));return f},renderRow:function(f,k,h){for(var l=[],g=0,e,c;(e=this.views[g])&&(c=k[g]);g++)e=
e.renderRow(f),c.appendChild(e),l.push(e);h||this.normalizeRowNodeHeights(l)},rowRemoved:function(f){this.onEach("rowRemoved",[f])},updateRow:function(f,k){for(var h=0,l;l=this.views[h];h++)l.updateRow(f);k||this.renormalizeRow(f)},updateRowStyles:function(f){this.onEach("updateRowStyles",[f])},setScrollTop:function(f){for(var k=f,h=0,l;l=this.views[h];h++)k=l.setScrollTop(f),p("ie")&&l.headerNode&&l.scrollboxNode&&(l.headerNode.scrollLeft=l.scrollboxNode.scrollLeft);return k},getFirstScrollingView:function(){for(var f=
0,k;k=this.views[f];f++)if(k.hasHScrollbar()||k.hasVScrollbar())return k;return null}})})},"dojox/grid/_RowManager":function(){define("dojox/grid/_RowManager",["dojo/_base/declare","dojo/_base/lang","dojo/dom-class"],function(m,p,f){return m("dojox.grid._RowManager",null,{constructor:function(f){this.grid=f},linesToEms:2,overRow:-2,prepareStylingRow:function(f,k){return{index:f,node:k,odd:!!(f&1),selected:!!this.grid.selection.isSelected(f),over:this.isOver(f),customStyles:"",customClasses:"dojoxGridRow"}},
styleRowNode:function(f,k){f=this.prepareStylingRow(f,k);this.grid.onStyleRow(f);this.applyStyles(f)},applyStyles:function(f){f.node.className=f.customClasses;var k=f.node.style.height,h=f.node,l=f.customStyles+";"+(f.node._style||"");void 0==h.style.cssText?h.setAttribute("style",l):h.style.cssText=l;f.node.style.height=k},updateStyles:function(f){this.grid.updateRowStyles(f)},setOverRow:function(f){var k=this.overRow;this.overRow=f;k!=this.overRow&&(p.isString(k)||0<=k)&&this.updateStyles(k);this.updateStyles(this.overRow)},
isOver:function(l){return this.overRow==l&&!f.contains(this.grid.domNode,"dojoxGridColumnResizing")}})})},"dojox/grid/_FocusManager":function(){define("dojox/grid/_FocusManager","dojo/_base/array dojo/_base/lang dojo/_base/declare dojo/_base/connect dojo/_base/event dojo/_base/sniff dojo/query ./util dojo/_base/html".split(" "),function(m,p,f,l,k,h,q,g,e){return f("dojox.grid._FocusManager",null,{constructor:function(c){this.grid=c;this.cell=null;this.rowIndex=-1;this._connects=[];this._headerConnects=
[];this.headerMenu=this.grid.headerMenu;this._connects.push(l.connect(this.grid.domNode,"onfocus",this,"doFocus"));this._connects.push(l.connect(this.grid.domNode,"onblur",this,"doBlur"));this._connects.push(l.connect(this.grid.domNode,"mousedown",this,"_mouseDown"));this._connects.push(l.connect(this.grid.domNode,"mouseup",this,"_mouseUp"));this._connects.push(l.connect(this.grid.domNode,"oncontextmenu",this,"doContextMenu"));this._connects.push(l.connect(this.grid.lastFocusNode,"onfocus",this,"doLastNodeFocus"));
this._connects.push(l.connect(this.grid.lastFocusNode,"onblur",this,"doLastNodeBlur"));this._connects.push(l.connect(this.grid,"_onFetchComplete",this,"_delayedCellFocus"));this._connects.push(l.connect(this.grid,"postrender",this,"_delayedHeaderFocus"))},destroy:function(){m.forEach(this._connects,l.disconnect);m.forEach(this._headerConnects,l.disconnect);delete this.grid;delete this.cell},_colHeadNode:null,_colHeadFocusIdx:null,_contextMenuBindNode:null,tabbingOut:!1,focusClass:"dojoxGridCellFocus",
focusView:null,initFocusView:function(){this.focusView=this.grid.views.getFirstScrollingView()||this.focusView||this.grid.views.views[0];this._initColumnHeaders()},isFocusCell:function(c,b){return this.cell==c&&this.rowIndex==b},isLastFocusCell:function(){return this.cell?this.rowIndex==this.grid.rowCount-1&&this.cell.index==this.grid.layout.cellCount-1:!1},isFirstFocusCell:function(){return this.cell?0===this.rowIndex&&0===this.cell.index:!1},isNoFocusCell:function(){return 0>this.rowIndex||!this.cell},
isNavHeader:function(){return!!this._colHeadNode},getHeaderIndex:function(){return this._colHeadNode?m.indexOf(this._findHeaderCells(),this._colHeadNode):-1},_focusifyCellNode:function(c){var b=this.cell&&this.cell.getNode(this.rowIndex);if(b&&(e.toggleClass(b,this.focusClass,c),c)){c=this.scrollIntoView();try{if(h("webkit")||!this.grid.edit.isEditing())g.fire(b,"focus"),c&&(this.cell.view.scrollboxNode.scrollLeft=c)}catch(d){}}},_delayedCellFocus:function(){if(!this.isNavHeader()&&this.grid.focused){var c=
this.cell&&this.cell.getNode(this.rowIndex);if(c)try{this.grid.edit.isEditing()||(e.toggleClass(c,this.focusClass,!0),this._colHeadNode&&this.blurHeader(),g.fire(c,"focus"))}catch(b){}}},_delayedHeaderFocus:function(){this.isNavHeader()&&this.focusHeader()},_initColumnHeaders:function(){m.forEach(this._headerConnects,l.disconnect);this._headerConnects=[];for(var c=this._findHeaderCells(),b=0;b<c.length;b++)this._headerConnects.push(l.connect(c[b],"onfocus",this,"doColHeaderFocus")),this._headerConnects.push(l.connect(c[b],
"onblur",this,"doColHeaderBlur"))},_findHeaderCells:function(){for(var c=q("th",this.grid.viewsHeaderNode),b=[],d=0;d<c.length;d++){var f=c[d],g=e.hasAttr(f,"tabIndex"),h=e.attr(f,"tabIndex");g&&0>h&&b.push(f)}return b},_setActiveColHeader:function(c,b,d){this.grid.domNode.setAttribute("aria-activedescendant",c.id);null!=d&&0<=d&&d!=b&&e.toggleClass(this._findHeaderCells()[d],this.focusClass,!1);e.toggleClass(c,this.focusClass,!0);this._colHeadNode=c;this._colHeadFocusIdx=b;this._scrollHeader(this._colHeadFocusIdx)},
scrollIntoView:function(){var c=this.cell?this._scrollInfo(this.cell):null;if(!c||!c.s)return null;var b=this.grid.scroller.findScrollTop(this.rowIndex);c.n&&c.sr&&(c.n.offsetLeft+c.n.offsetWidth>c.sr.l+c.sr.w?c.s.scrollLeft=c.n.offsetLeft+c.n.offsetWidth-c.sr.w:c.n.offsetLeft<c.sr.l&&(c.s.scrollLeft=c.n.offsetLeft));c.r&&c.sr&&(b+c.r.offsetHeight>c.sr.t+c.sr.h?this.grid.setScrollTop(b+c.r.offsetHeight-c.sr.h):b<c.sr.t&&this.grid.setScrollTop(b));return c.s.scrollLeft},_scrollInfo:function(c,b){if(c){var d=
c.view.scrollboxNode,e={w:d.clientWidth,l:d.scrollLeft,t:d.scrollTop,h:d.clientHeight},f=c.view.getRowNode(this.rowIndex);return{c:c,s:d,sr:e,n:b?b:c.getNode(this.rowIndex),r:f}}return null},_scrollHeader:function(c){var b=null;if(this._colHeadNode){var d=this.grid.getCell(c);if(!d)return;b=this._scrollInfo(d,d.getNode(0))}b&&b.s&&b.sr&&b.n&&(b.n.offsetLeft+b.n.offsetWidth>b.sr.l+b.sr.w?b.s.scrollLeft=b.n.offsetLeft+b.n.offsetWidth-b.sr.w:b.n.offsetLeft<b.sr.l?b.s.scrollLeft=b.n.offsetLeft:7>=h("ie")&&
d&&d.view.headerNode&&(d.view.headerNode.scrollLeft=b.s.scrollLeft))},_isHeaderHidden:function(){var c=this.focusView;if(!c)for(var b=0,d;d=this.grid.views.views[b];b++)if(d.headerNode){c=d;break}return c&&"none"==e.getComputedStyle(c.headerNode).display},colSizeAdjust:function(c,b,d){var e=this._findHeaderCells(),f=this.focusView;if(!f||!f.header.tableMap.map)for(var g=0,h;h=this.grid.views.views[g];g++)if(h.header.tableMap.map){f=h;break}g=e[b];!f||b==e.length-1&&0===b||(f.content.baseDecorateEvent(c),
c.cellNode=g,c.cellIndex=f.content.getCellNodeIndex(c.cellNode),c.cell=0<=c.cellIndex?this.grid.getCell(c.cellIndex):null,f.header.canResize(c)&&(b={l:d},c=f.header.colResizeSetup(c,!1),f.header.doResizeColumn(c,null,b),f.update()))},styleRow:function(c){},setFocusIndex:function(c,b){this.setFocusCell(this.grid.getCell(b),c)},setFocusCell:function(c,b){c&&!this.isFocusCell(c,b)&&(this.tabbingOut=!1,this._colHeadNode&&this.blurHeader(),this._colHeadNode=this._colHeadFocusIdx=null,this.focusGridView(),
this._focusifyCellNode(!1),this.cell=c,this.rowIndex=b,this._focusifyCellNode(!0));if(h("opera"))setTimeout(p.hitch(this.grid,"onCellFocus",this.cell,this.rowIndex),1);else this.grid.onCellFocus(this.cell,this.rowIndex)},next:function(){if(this.cell){var c=this.rowIndex,b=this.cell.index+1,d=this.grid.layout.cellCount-1,e=this.grid.rowCount-1;b>d&&(b=0,c++);c>e&&(b=d,c=e);!this.grid.edit.isEditing()||(d=this.grid.getCell(b),this.isLastFocusCell()||d.editable&&(!this.grid.canEdit||this.grid.canEdit(d,
c)))?this.setFocusIndex(c,b):(this.cell=d,this.rowIndex=c,this.next())}},previous:function(){if(this.cell){var c=this.rowIndex||0,b=(this.cell.index||0)-1;0>b&&(b=this.grid.layout.cellCount-1,c--);0>c&&(b=c=0);if(this.grid.edit.isEditing()){var d=this.grid.getCell(b);if(!this.isFirstFocusCell()&&!d.editable){this.cell=d;this.rowIndex=c;this.previous();return}}this.setFocusIndex(c,b)}},move:function(c,b){var d=0>b?-1:1;if(this.isNavHeader()){c=this._findHeaderCells();var f=currentIdx=m.indexOf(c,this._colHeadNode);
for(currentIdx+=b;0<=currentIdx&&currentIdx<c.length&&"none"==c[currentIdx].style.display;)currentIdx+=d;0<=currentIdx&&currentIdx<c.length&&this._setActiveColHeader(c[currentIdx],currentIdx,f)}else if(this.cell){var g=this.grid.scroller,f=this.rowIndex,h=this.grid.rowCount-1,k=Math.min(h,Math.max(0,f+c));c&&(0<c?k>g.getLastPageRow(g.page)&&this.grid.setScrollTop(this.grid.scrollTop+g.findScrollTop(k)-g.findScrollTop(f)):0>c&&k<=g.getPageRow(g.page)&&this.grid.setScrollTop(this.grid.scrollTop-g.findScrollTop(f)-
g.findScrollTop(k)));for(var g=this.grid.layout.cellCount-1,l=this.cell.index,p=Math.min(g,Math.max(0,l+b)),q=this.grid.getCell(p);0<=p&&p<g&&q&&!0===q.hidden;)p+=d,q=this.grid.getCell(p);q&&!0!==q.hidden||(p=l);d=q.getNode(k);!d&&c?0<=k+c&&k+c<=h&&this.move(0<c?++c:--c,b):d&&"none"!==e.style(d,"display")||!b?(this.setFocusIndex(k,p),c&&this.grid.updateRow(f)):0<=p+b&&p+b<=g&&this.move(c,0<b?++b:--b)}},previousKey:function(c){this.grid.edit.isEditing()?(k.stop(c),this.previous()):this.isNavHeader()||
this._isHeaderHidden()?(this.tabOut(this.grid.domNode),null!=this._colHeadFocusIdx&&(e.toggleClass(this._findHeaderCells()[this._colHeadFocusIdx],this.focusClass,!1),this._colHeadFocusIdx=null),this._focusifyCellNode(!1)):(this.grid.domNode.focus(),k.stop(c))},nextKey:function(c){c.target===this.grid.domNode&&null==this._colHeadFocusIdx?(this.focusHeader(),k.stop(c)):this.isNavHeader()?(this.blurHeader(),this.findAndFocusGridCell()||this.tabOut(this.grid.lastFocusNode),this._colHeadNode=this._colHeadFocusIdx=
null):this.grid.edit.isEditing()?(k.stop(c),this.next()):this.tabOut(this.grid.lastFocusNode)},tabOut:function(c){this.tabbingOut=!0;c.focus()},focusGridView:function(){g.fire(this.focusView,"focus")},focusGrid:function(c){this.focusGridView();this._focusifyCellNode(!0)},findAndFocusGridCell:function(){var c=!0,b=0===this.grid.rowCount;this.isNoFocusCell()&&!b?(b=0,this.grid.getCell(b).hidden&&(b=this.isNavHeader()?this._colHeadFocusIdx:0),this.setFocusIndex(0,b)):this.cell&&!b?(this.focusView&&!this.focusView.rowNodes[this.rowIndex]&&
this.grid.scrollToRow(this.rowIndex),this.focusGrid()):c=!1;this._colHeadNode=this._colHeadFocusIdx=null;return c},focusHeader:function(){var c=this._findHeaderCells(),b=this._colHeadFocusIdx;this._isHeaderHidden()?this.findAndFocusGridCell():this._colHeadFocusIdx||(this.isNoFocusCell()?this._colHeadFocusIdx=0:this._colHeadFocusIdx=this.cell.index);for(this._colHeadNode=c[this._colHeadFocusIdx];this._colHeadNode&&0<=this._colHeadFocusIdx&&this._colHeadFocusIdx<c.length&&"none"==this._colHeadNode.style.display;)this._colHeadFocusIdx++,
this._colHeadNode=c[this._colHeadFocusIdx];this._colHeadNode&&"none"!=this._colHeadNode.style.display?(this.headerMenu&&this._contextMenuBindNode!=this.grid.domNode&&(this.headerMenu.unBindDomNode(this.grid.viewsHeaderNode),this.headerMenu.bindDomNode(this.grid.domNode),this._contextMenuBindNode=this.grid.domNode),this._setActiveColHeader(this._colHeadNode,this._colHeadFocusIdx,b),this._scrollHeader(this._colHeadFocusIdx),this._focusifyCellNode(!1)):this.findAndFocusGridCell()},blurHeader:function(){e.removeClass(this._colHeadNode,
this.focusClass);e.removeAttr(this.grid.domNode,"aria-activedescendant");if(this.headerMenu&&this._contextMenuBindNode==this.grid.domNode){var c=this.grid.viewsHeaderNode;this.headerMenu.unBindDomNode(this.grid.domNode);this.headerMenu.bindDomNode(c);this._contextMenuBindNode=c}},doFocus:function(c){c&&c.target!=c.currentTarget?k.stop(c):this._clickFocus||(this.tabbingOut||this.focusHeader(),this.tabbingOut=!1,k.stop(c))},doBlur:function(c){k.stop(c)},doContextMenu:function(c){this.headerMenu||k.stop(c)},
doLastNodeFocus:function(c){this.tabbingOut?this._focusifyCellNode(!1):0<this.grid.rowCount?(this.isNoFocusCell()&&this.setFocusIndex(0,0),this._focusifyCellNode(!0)):this.focusHeader();this.tabbingOut=!1;k.stop(c)},doLastNodeBlur:function(c){k.stop(c)},doColHeaderFocus:function(c){this._setActiveColHeader(c.target,e.attr(c.target,"idx"),this._colHeadFocusIdx);this._scrollHeader(this.getHeaderIndex());k.stop(c)},doColHeaderBlur:function(c){e.toggleClass(c.target,this.focusClass,!1)},_mouseDown:function(c){this._clickFocus=
dojo.some(this.grid.views.views,function(b){return b.scrollboxNode===c.target})},_mouseUp:function(c){this._clickFocus=!1}})})},"dojox/grid/_EditManager":function(){define("dojox/grid/_EditManager","dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/_base/connect dojo/_base/sniff ./util".split(" "),function(m,p,f,l,k,h){return f("dojox.grid._EditManager",null,{constructor:function(f){this.grid=f;this.connections=k("ie")?[l.connect(document.body,"onfocus",m.hitch(this,"_boomerangFocus"))]:[];
this.connections.push(l.connect(this.grid,"onBlur",this,"apply"));this.connections.push(l.connect(this.grid,"prerender",this,"_onPreRender"))},info:{},destroy:function(){p.forEach(this.connections,l.disconnect)},cellFocus:function(f,g){this.grid.singleClickEdit||this.isEditRow(g)?this.setEditCell(f,g):this.apply();(this.isEditing()||f&&f.editable&&f.alwaysEditing)&&this._focusEditor(f,g)},rowClick:function(f){this.isEditing()&&!this.isEditRow(f.rowIndex)&&this.apply()},styleRow:function(f){f.index==
this.info.rowIndex&&(f.customClasses+=" dojoxGridRowEditing")},dispatchEvent:function(f){var g=f.cell;return(g=g&&g.editable?g:0)&&g.dispatchEvent(f.dispatch,f)},isEditing:function(){return void 0!==this.info.rowIndex},isEditCell:function(f,g){return this.info.rowIndex===f&&this.info.cell.index==g},isEditRow:function(f){return this.info.rowIndex===f},setEditCell:function(f,g){!this.isEditCell(g,f.index)&&this.grid.canEdit&&this.grid.canEdit(f,g)&&this.start(f,g,this.isEditRow(g)||f.editable)},_focusEditor:function(f,
g){h.fire(f,"focus",[g])},focusEditor:function(){this.isEditing()&&this._focusEditor(this.info.cell,this.info.rowIndex)},_boomerangWindow:500,_shouldCatchBoomerang:function(){return this._catchBoomerang>(new Date).getTime()},_boomerangFocus:function(){this._shouldCatchBoomerang()&&(this.grid.focus.focusGrid(),this.focusEditor(),this._catchBoomerang=0)},_doCatchBoomerang:function(){k("ie")&&(this._catchBoomerang=(new Date).getTime()+this._boomerangWindow)},start:function(f,g,e){this._isValidInput()&&
(this.grid.beginUpdate(),this.editorApply(),this.isEditing()&&!this.isEditRow(g)&&(this.applyRowEdit(),this.grid.updateRow(g)),e?(this.info={cell:f,rowIndex:g},this.grid.doStartEdit(f,g),this.grid.updateRow(g)):this.info={},this.grid.endUpdate(),this.grid.focus.focusGrid(),this._focusEditor(f,g),this._doCatchBoomerang())},_editorDo:function(f){var g=this.info.cell;if(g&&g.editable)g[f](this.info.rowIndex)},editorApply:function(){this._editorDo("apply")},editorCancel:function(){this._editorDo("cancel")},
applyCellEdit:function(f,g,e){this.grid.canEdit(g,e)&&this.grid.doApplyCellEdit(f,e,g.field)},applyRowEdit:function(){this.grid.doApplyEdit(this.info.rowIndex,this.info.cell.field)},apply:function(){this.isEditing()&&this._isValidInput()&&(this.grid.beginUpdate(),this.editorApply(),this.applyRowEdit(),this.info={},this.grid.endUpdate(),this.grid.focus.focusGrid(),this._doCatchBoomerang())},cancel:function(){this.isEditing()&&(this.grid.beginUpdate(),this.editorCancel(),this.info={},this.grid.endUpdate(),
this.grid.focus.focusGrid(),this._doCatchBoomerang())},save:function(f,g){var e=this.info.cell;!this.isEditRow(f)||g&&e.view!=g||!e.editable||e.save(e,this.info.rowIndex)},restore:function(f,g){var e=this.info.cell;this.isEditRow(g)&&e.view==f&&e.editable&&e.restore(this.info.rowIndex)},_isValidInput:function(){var f=(this.info.cell||{}).widget;if(!f||!f.isValid)return!0;f.focused=!0;return f.isValid(!0)},_onPreRender:function(){this.isEditing()&&(this.info.value=this.info.cell.getValue())}})})},
"dojox/grid/Selection":function(){define("dojox/grid/Selection",["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/dom-attr"],function(m,p,f,l){return m("dojox.grid.Selection",null,{constructor:function(f){this.grid=f;this.selected=[];this.setMode(f.selectionMode)},mode:"extended",selected:null,updating:0,selectedIndex:-1,rangeStartIndex:-1,setMode:function(f){this.selected.length&&this.deselectAll();this.mode="extended"!=f&&"multiple"!=f&&"single"!=f&&"none"!=f?"extended":f},onCanSelect:function(f){return this.grid.onCanSelect(f)},
onCanDeselect:function(f){return this.grid.onCanDeselect(f)},onSelected:function(f){},onDeselected:function(f){},onChanging:function(){},onChanged:function(){},isSelected:function(f){return"none"==this.mode?!1:this.selected[f]},getFirstSelected:function(){if(!this.selected.length||"none"==this.mode)return-1;for(var f=0,h=this.selected.length;f<h;f++)if(this.selected[f])return f;return-1},getNextSelected:function(f){if("none"==this.mode)return-1;f+=1;for(var h=this.selected.length;f<h;f++)if(this.selected[f])return f;
return-1},getSelected:function(){for(var f=[],h=0,l=this.selected.length;h<l;h++)this.selected[h]&&f.push(h);return f},getSelectedCount:function(){for(var f=0,h=0;h<this.selected.length;h++)this.selected[h]&&f++;return f},_beginUpdate:function(){if(0===this.updating)this.onChanging();this.updating++},_endUpdate:function(){this.updating--;if(0===this.updating)this.onChanged()},select:function(f){"none"!=this.mode&&("multiple"!=this.mode?(this.deselectAll(f),this.addToSelection(f)):this.toggleSelect(f))},
addToSelection:function(k){if("none"!=this.mode)if(f.isArray(k))p.forEach(k,this.addToSelection,this);else if(k=Number(k),this.selected[k])this.selectedIndex=k;else if(!1!==this.onCanSelect(k)){this.selectedIndex=k;var h=this.grid.getRowNode(k);h&&l.set(h,"aria-selected","true");this._beginUpdate();this.selected[k]=!0;this.onSelected(k);this._endUpdate()}},deselect:function(k){if("none"!=this.mode)if(f.isArray(k))p.forEach(k,this.deselect,this);else if(k=Number(k),this.selectedIndex==k&&(this.selectedIndex=
-1),this.selected[k]&&!1!==this.onCanDeselect(k)){var h=this.grid.getRowNode(k);h&&l.set(h,"aria-selected","false");this._beginUpdate();delete this.selected[k];this.onDeselected(k);this._endUpdate()}},setSelected:function(f,h){this[h?"addToSelection":"deselect"](f)},toggleSelect:function(k){f.isArray(k)?p.forEach(k,this.toggleSelect,this):this.setSelected(k,!this.selected[k])},_range:function(f,h,l){var g=0<=f?f:h;f=h;g>f&&(f=g,g=h);for(h=g;h<=f;h++)l(h)},selectRange:function(k,h){this._range(k,h,
f.hitch(this,"addToSelection"))},deselectRange:function(k,h){this._range(k,h,f.hitch(this,"deselect"))},insert:function(f){this.selected.splice(f,0,!1);this.selectedIndex>=f&&this.selectedIndex++},remove:function(f){this.selected.splice(f,1);this.selectedIndex>=f&&this.selectedIndex--},deselectAll:function(f){for(var h in this.selected)h!=f&&!0===this.selected[h]&&this.deselect(h)},clickSelect:function(f,h,l){if("none"!=this.mode){this._beginUpdate();if("extended"!=this.mode)this.select(f);else{if(!l||
0>this.rangeStartIndex)this.rangeStartIndex=f;h||this.deselectAll(f);l?this.selectRange(this.rangeStartIndex,f):h?this.toggleSelect(f):this.addToSelection(f)}this._endUpdate()}},clickSelectEvent:function(f){this.clickSelect(f.rowIndex,dojo.isCopyKey(f),f.shiftKey)},clear:function(){this._beginUpdate();this.deselectAll();this._endUpdate()}})})},"dijit/CheckedMenuItem":function(){require({cache:{"url:dijit/templates/CheckedMenuItem.html":'\x3ctr class\x3d"dijitReset" data-dojo-attach-point\x3d"focusNode" role\x3d"${role}" tabIndex\x3d"-1" aria-checked\x3d"${checked}"\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemIconCell" role\x3d"presentation"\x3e\r\n\t\t\x3cspan class\x3d"dijitInline dijitIcon dijitMenuItemIcon dijitCheckedMenuItemIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\t\x3cspan class\x3d"dijitMenuItemIconChar dijitCheckedMenuItemIconChar"\x3e${!checkedChar}\x3c/span\x3e\r\n\t\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemLabel" colspan\x3d"2" data-dojo-attach-point\x3d"containerNode,labelNode,textDirNode"\x3e\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemAccelKey" style\x3d"display: none" data-dojo-attach-point\x3d"accelKeyNode"\x3e\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuArrowCell" role\x3d"presentation"\x3e\x26#160;\x3c/td\x3e\r\n\x3c/tr\x3e\r\n'}});
define("dijit/CheckedMenuItem",["dojo/_base/declare","dojo/dom-class","./MenuItem","dojo/text!./templates/CheckedMenuItem.html","./hccss"],function(m,p,f,l){return m("dijit.CheckedMenuItem",f,{baseClass:"dijitMenuItem dijitCheckedMenuItem",templateString:l,checked:!1,_setCheckedAttr:function(f){this.domNode.setAttribute("aria-checked",f?"true":"false");this._set("checked",f)},iconClass:"",role:"menuitemcheckbox",checkedChar:"\x26#10003;",onChange:function(){},_onClick:function(f){this.disabled||(this.set("checked",
!this.checked),this.onChange(this.checked));this.onClick(f)}})})},"dojox/grid/DataSelection":function(){define("dojox/grid/DataSelection",["dojo/_base/declare","./_SelectionPreserver","./Selection"],function(m,p,f){return m("dojox.grid.DataSelection",f,{constructor:function(f){f.keepSelection&&(this.preserver=new p(this))},destroy:function(){this.preserver&&this.preserver.destroy()},getFirstSelected:function(){var l=f.prototype.getFirstSelected.call(this);return-1==l?null:this.grid.getItem(l)},getNextSelected:function(l){l=
this.grid.getItemIndex(l);l=f.prototype.getNextSelected.call(this,l);return-1==l?null:this.grid.getItem(l)},getSelected:function(){for(var f=[],k=0,h=this.selected.length;k<h;k++)this.selected[k]&&f.push(this.grid.getItem(k));return f},addToSelection:function(l){if("none"!=this.mode){var k=null,k="number"==typeof l||"string"==typeof l?l:this.grid.getItemIndex(l);f.prototype.addToSelection.call(this,k)}},deselect:function(l){if("none"!=this.mode){var k=null,k="number"==typeof l||"string"==typeof l?
l:this.grid.getItemIndex(l);f.prototype.deselect.call(this,k)}},deselectAll:function(l){var k=null;l||"number"==typeof l?(k="number"==typeof l||"string"==typeof l?l:this.grid.getItemIndex(l),f.prototype.deselectAll.call(this,k)):this.inherited(arguments)}})})},"dojox/grid/_SelectionPreserver":function(){define("dojox/grid/_SelectionPreserver",["dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/_base/array"],function(m,p,f,l){return m("dojox.grid._SelectionPreserver",null,{constructor:function(k){this.selection=
k;var h=this.grid=k.grid;this.reset();this._connects=[p.connect(h,"_setStore",this,"reset"),p.connect(h,"_addItem",this,"_reSelectById"),p.connect(k,"onSelected",f.hitch(this,"_selectById",!0)),p.connect(k,"onDeselected",f.hitch(this,"_selectById",!1)),p.connect(k,"deselectAll",this,"reset")]},destroy:function(){this.reset();l.forEach(this._connects,p.disconnect);delete this._connects},reset:function(){this._selectedById={}},_reSelectById:function(f,h){f&&this.grid._hasIdentity&&(this.selection.selected[h]=
this._selectedById[this.grid.store.getIdentity(f)])},_selectById:function(f,h){if("none"!=this.selection.mode&&this.grid._hasIdentity){var k=h,g=this.grid;if("number"==typeof h||"string"==typeof h)k=(h=g._by_idx[h])&&h.item;k&&(this._selectedById[g.store.getIdentity(k)]=!!f);return k}}})})},"sixmaps/dijits/Export":function(){define(["dojo/_base/declare","dojo/_base/window","dijit/_WidgetBase","dojo/dom-construct","sixmaps/util/Analytics"],function(m,p,f,l,k){return m("sixmaps.dijits.Export",[f],{_form:null,
url:"/configsWS/download/",constructor:function(f,k){f&&m.safeMixin(this,f)},postCreate:function(){this._form=l.create("form",{style:"display:none",method:"POST"},p.body());l.create("textarea",{name:"data"},this._form);l.create("input",{type:"hidden",name:"contentType"},this._form)},download:function(f,l,g){k("send","event","Tool - Export","Download",g);this._form.action=this.url+f;this._form.data.value=l;this._form.contentType.value=g;this._form.submit()}})})},"sixmaps/dijits/takeMeTo/AddressResults":function(){define("dojo/_base/array dojo/_base/declare dojo/data/ItemFileReadStore esri/graphic sixmaps/dijits/FeedMapper sixmaps/dijits/takeMeTo/TakeMeToResults sixmaps/map/Graphics".split(" "),
function(m,p,f,l,k,h,q){return p("sixmaps.dijits.takeMeTo.AddressResults",h,{secondaryGraphics:null,moveSecondaryGraphicsToBack:!0,queryUrl:"http://mapsq.six.nsw.gov.au/arcgis/rest/services/sixmaps/PropertyAddress/MapServer/2",constructor:function(f,e){var c=this;p.safeMixin(this,f);var b=c.map||c.mapGraphics&&c.mapGraphics.map;c.mapGraphics&&c.mapGraphics.secondaryGraphics&&(c.secondaryGraphics=c.mapGraphics.secondaryGraphics);!c.secondaryGraphics&&b&&(c.secondaryGraphics=new q({map:b,name:"Address Secondary Graphics"}));
c.moveSecondaryGraphicsToBack&&setTimeout(function(){b.reorderLayer(c.secondaryGraphics.highlightLayer,0);b.reorderLayer(c.secondaryGraphics.graphicsLayer,0)},1E3);c.mapGraphics&&(c.mapGraphics.secondaryGraphics=c.secondaryGraphics)},onResultMouseOver:function(f){this.secondaryGraphics&&f.geometry2&&this.secondaryGraphics.highlightFeature(new l({geometry:f.geometry2}));this.inherited(arguments)},onResultMouseOut:function(f){this.secondaryGraphics&&this.secondaryGraphics.clearHighlight();this.inherited(arguments)},
onResultSelectionChanged:function(f){var e=this;e.secondaryGraphics.clear();var c={};m.forEach(f,function(b){c[b.attributes.propid]||(c[b.attributes.propid]=!0,b.geometry2&&e.secondaryGraphics.add(new l({geometry:b.geometry2})))});e.inherited(arguments)},showResults:function(g){var e=this,c=arguments,b=new k({queryUrl:e.queryUrl,fieldMapping:{"AddressPoint.addressstringoid":{name:"addressstringoid"}},inQueryField:"AddressPoint.addressstringoid",keepQueryAttributes:!1}),d=m.map(g.features||g,function(b){return{RID:b.attributes.RID,
propid:b.attributes.propid,addressstringoid:b.attributes.addressstringoid,principaladdresstype:b.attributes.principaladdresstype,address:b.attributes.address,geometry2:b.geometry}}),d=new f({data:{items:d}});b.updateFeed({store:d}).then(function(b){m.forEach(b.features,function(b){b.geometry2=b.attributes.geometry2;b.attributes.principaladdresstype=1==b.attributes.principaladdresstype||"Primary"==b.attributes.principaladdresstype?"Primary":2==b.attributes.principaladdresstype||"Secondary"==b.attributes.principaladdresstype?
"Secondary":3==b.attributes.principaladdresstype||"Alternate"==b.attributes.principaladdresstype?"Alternate":"Other"});e.inherited(c,[b])})}})})},"sixmaps/dijits/takeMeTo/Lot":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/text!sixmaps/dijits/takeMeTo/Help/LotHelp.html dijit/form/Select sixmaps/dijits/takeMeTo/TakeMeTo".split(" "),function(m,p,f,l,k,h){return p("sixmaps.dijits.takeMeTo.Lot",h,{layerUrl:"http://maps.six.nsw.gov.au/arcgis/rest/services/sixmaps/Boundaries/MapServer/6",
title:"Lot",outFields:null,fieldParams:null,helpHTML:l,constructor:function(f,g){this.outFields=["*"];this.fieldParams=[{name:"lotnumber",alias:"Lot",type:"string"},{name:"sectionnumber",placeHolder:"optional",alias:"Section",type:"string"},{name:"plannumber",alias:"Plan",type:"text"},{name:"classsubtype",alias:"Plan Type","class":"lotSearchSelect",widgetType:"dijit.form.Select",style:"width:6em;",defaultValue:" ",options:[{label:" ",value:""},{label:"DP",value:"1"},{label:"SP",value:"3"}]}];this.resultsWidgetParams=
{selectFirstResult:!0,sortInfo:-3,structure:[{field:"lotnumber",name:"Lot"},{field:"sectionnumber",name:"Section"},{field:"planlabel",name:"Plan"}]};p.safeMixin(this,f)},search:function(h,g){h=f.mixin({},h);var e=h.classsubtype;e&&"1"==e.value&&(h.classsubtype.value=["1","2","4"]);return this.inherited(arguments)},singleFieldSearch:function(f){f=f.toUpperCase();var g={lotnumber:null,sectionnumber:null,plannumber:null};return f.match(/^(DP|SP)[0-9]+$/)?(g=f.match(/[A-Z]+/i)[0],g="DP"==g?["1","2","4"]:
"3",this.simpleSearch({classsubtype:g,plannumber:parseInt(f.match(/[0-9]+/))})):f.match(/^[0-9A-Z]+\/(DP|SP)?[0-9]+$/)?(tokens=f.split("/"),g.lotnumber=tokens[0],g.plannumber=parseInt(tokens[1]),this.simpleSearch(g)):f.match(/^[0-9A-Z]+\/[0-9A-Z]*\/[0-9]+$/)?(tokens=f.split("/"),g.lotnumber=tokens[0],g.sectionnumber=parseInt(tokens[1]),g.plannumber=parseInt(tokens[2]),this.simpleSearch(g)):!1}})})},"sixmaps/dijits/takeMeTo/POI":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/text!sixmaps/dijits/takeMeTo/Help/POIHelp.html",
"sixmaps/dijits/takeMeTo/SpatialTakeMeTo"],function(m,p,f,l){return p("sixmaps.dijits.takeMeTo.POI",l,{title:"POI",layerUrl:"http://maps.six.nsw.gov.au/arcgis/rest/services/sixmaps/POI/MapServer/0",poiTypePriority:null,helpHTML:f,constructor:function(f,h){this.fieldParams=[{name:"poilabel",alias:"POI",searchType:"contains"}];this.resultsWidgetParams={selectFirstResult:!0,sortInfo:-1,structure:[{field:"sortValue",name:"sort",hidden:!0},{field:"poilabel",name:"Label"},{field:"poitype",name:"Type"}]};
this.outFields=["*"];this.poiTypePriority=["City","Suburb","Town","Village","Locality"];this.singleSearches=[{match:"^[a-z0-9- ']{3,}$",fields:{poilabel:0}}];p.safeMixin(this,f)},onSearchResult:function(f,h,l,g){var e=this;m.forEach(f.features,function(c){c.attributes.sortValue=c.attributes.poigroup;m.some(e.poiTypePriority,function(b,d){b==c.attributes.poitype&&(c.attributes.sortValue+=9999-d)});var b=new RegExp("^"+h.poilabel.value,"i"),d=new RegExp(h.poilabel.value+"$","i");c.attributes.poilabel.match(new RegExp("^"+
h.poilabel.value+"$","i"))?c.attributes.sortValue*=4:c.attributes.poilabel.match(b)?c.attributes.sortValue*=3:c.attributes.poilabel.match(d)&&(c.attributes.sortValue*=2)});this.inherited(arguments)}})})},"sixmaps/dijits/takeMeTo/SpatialTakeMeTo":function(){define(["dojo/_base/declare","dojo/_base/lang","sixmaps/dijits/takeMeTo/TakeMeTo"],function(m,p,f){return m("sixmaps.dijits.takeMeTo.SpatialTakeMeTo",f,{geometry:null,queryParams:null,label:"Current Extent",addCurrentExtentField:!0,map:null,constructor:function(f,
k){this.queryParams={};m.safeMixin(this,f)},postCreate:function(){this.addCurrentExtentField&&this.fieldParams&&this.fieldParams.push({name:"_currentExtent_",alias:this.label,type:"checkbox",noQuery:!0});this.inherited(arguments)},search:function(f,k,h){k=k||{};if(f&&f._currentExtent_&&"undefined"==typeof k.geometry){var l=this.geometry;!0===f._currentExtent_.value?l=this.map&&this.map.extent||null:!1===f._currentExtent_.value&&(l=null);p.mixin(k,{geometry:l})}return this.inherited(arguments,[f,k,
h])}})})},"sixmaps/dijits/takeMeTo/Suburb":function(){define(["dojo/_base/declare","dojo/text!sixmaps/dijits/takeMeTo/Help/SuburbHelp.html","sixmaps/dijits/takeMeTo/TakeMeTo"],function(m,p,f){return m("sixmaps.dijits.takeMeTo.Suburb",f,{title:"Suburb",layerUrl:"http://maps.six.nsw.gov.au/arcgis/rest/services/sixmaps/Boundaries/MapServer/0",helpHTML:p,constructor:function(f,k){this.fieldParams=[{name:"suburbname",alias:"Suburb",widgetType:"sixmaps.dijits.form.ComboBox",params:{sourceUrl:this.layerUrl,
style:"width:13em;",fieldName:"suburbname",hasDownArrow:!1}}];this.resultsWidgetParams={selectFirstResult:!0,sortInfo:-3,structure:[{field:"suburbname",name:"Suburb"},{field:"postcode",name:"Postcode"}]};m.safeMixin(this,f||{})}})})},"sixmaps/dijits/takeMeTo/SurveyMark":function(){define(["dojo/_base/declare","dojo/text!sixmaps/dijits/takeMeTo/Help/SurveyMarkHelp.html","sixmaps/dijits/takeMeTo/TakeMeTo"],function(m,p,f){return m("sixmaps.dijits.takeMeTo.SurveyMark",f,{title:"Survey Mark",layerUrl:"http://maps.six.nsw.gov.au/arcgis/rest/services/sixmaps/SurveyMarksPublic/MapServer/0",
helpHTML:p,constructor:function(f,k){this.fieldParams=[{name:"marktype",alias:"Mark Type",widgetType:"dijit.form.FilteringSelect",style:"width:6em;",dataStore:{type:"dojo.data.ItemFileReadStore",params:{data:{label:"name",identifier:"id",items:[{name:"",id:""},{name:"PM",id:"PM"},{name:"SS",id:"SS"},{name:"TS",id:"TS"},{name:"CP",id:"CP"},{name:"CR",id:"CR"},{name:"GB",id:"GB"},{name:"MM",id:"MM"}]}}}},{name:"marknumber",alias:"Mark Number",type:"number",constraints:{pattern:"#"}},{name:"trigname",
alias:"Trig Name",placeHolder:"optional",type:"text"}];this.resultsWidgetParams={selectFirstResult:!0,sortInfo:-3,structure:[{field:"marktype",name:"Mark Type"},{field:"marknumber",name:"Mark Number"}]};m.safeMixin(this,f)},singleFieldSearch:function(f){var k={marktype:null,marknumber:null,trigname:null};return f.match(/^(PM|SS|TS|CP|CR|GB|MM)(s)?[0-9]+$/i)?(f=f.toUpperCase(),k.marktype=f.match(/^(PM|SS|TS|CP|CR|GB|MM)/i)[0],k.marknumber=f.match(/[0-9]+$/)[0],this.simpleSearch(k)):f.match(/(trig)$/i)?
(f=f.toUpperCase(),k.trigname=f.split("TRIG")[0],this.simpleSearch(k)):!1}})})},"sixmaps/dijits/tools/FullExtent":function(){define(["dojo/_base/declare","dijit/form/Button","esri/geometry/Extent","sixmaps/util/Analytics"],function(m,p,f,l){return m("sixmaps.dijits.tools.FullExtent",p,{title:"Zoom to NSW",baseUrl:"sixmaps/dijits/tools/images/",iconUrl:"nsw.png",map:null,extent:null,constructor:function(f,h){f&&m.safeMixin(this,f)},_setExtentAttr:function(k){this.extent=new f(k)},postCreate:function(){this.inherited(arguments);
this.iconUrl=require.toUrl(this.baseUrl)+this.iconUrl},onClick:function(){l("send","event","Tools - FullExtent","Click");this.map&&this.map.setExtent(this.extent)}})})},"sixmaps/dijits/tools/PrevExtent":function(){define(["dojo/_base/declare","dijit/form/Button","sixmaps/util/Analytics"],function(m,p,f){return m("sixmaps.dijits.tools.PrevExtent",p,{title:"Zoom to Previous Extent",baseUrl:"sixmaps/dijits/tools/images/",iconUrl:"extent_prev.png",navToolbar:null,constructor:function(f,k){f&&m.safeMixin(this,
f)},postCreate:function(){this.inherited(arguments);this.iconUrl=require.toUrl(this.baseUrl)+this.iconUrl},onClick:function(){f("send","event","Tools - PreviousExtent","Click");this.navToolbar&&this.navToolbar.zoomToPrevExtent()}})})},"sixmaps/dijits/tools/NextExtent":function(){define(["dojo/_base/declare","dijit/form/Button","sixmaps/util/Analytics"],function(m,p,f){return m("sixmaps.dijits.tools.NextExtent",p,{title:"Zoom to Next Extent",baseUrl:"sixmaps/dijits/tools/images/",iconUrl:"extent_next.png",
navToolbar:null,constructor:function(f,k){f&&m.safeMixin(this,f)},postCreate:function(){this.inherited(arguments);this.iconUrl=require.toUrl(this.baseUrl)+this.iconUrl},onClick:function(){f("send","event","Tools - NextExtent","Click");this.navToolbar&&this.navToolbar.zoomToNextExtent()}})})},"sixmaps/dijits/tools/Measure":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom dojo/dom-construct dojo/text!sixmaps/dijits/tools/Help/MeasureDistanceHelp.html dojo/text!sixmaps/dijits/tools/Help/MeasureAreaHelp.html esri/geometry/geodesicUtils esri/geometry/Polyline esri/geometry/webMercatorUtils esri/tasks/GeometryService esri/toolbars/draw esri/SpatialReference sixmaps/dijits/tools/Toggle sixmaps/dijits/HelpTopic sixmaps/util/Analytics".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x){return p("sixmaps.dijits.tools.Measure",u,{iconClass:"measureIcon",geometryService:new d("/arcgis/rest/services/Geometry/GeometryServer"),drawToolbar:null,mode:"distance",widgetNode:null,baseUrl:"sixmaps.dijits.tools.images",iconUrl:"images/measure.png",helpHTML:q,helpNode:null,mapGraphics:null,spatialReference:new v({wkid:3308}),constructor:function(b,c){p.safeMixin(this,b);this._myConnects=[];"area"==this.mode&&(this.iconClass="areaIcon",this.iconUrl=
"images/area.png",this.helpHTML=g);this.widgetNode=h.create("div");this.on("measureresultformatted",f.hitch(this,"displayResult"))},postCreate:function(){var b=this;this.inherited(arguments);"string"==typeof b.widgetNode&&(b.widgetNode=k.byId(b.widgetNode));b.on("activate",function(){b.initiateWidgetNode()});b.helpNode=new t({templateString:b.helpHTML,imagesUrl:require.toUrl("sixmaps/dijits/tools/Help/Images/"),baseUrl:require.toUrl("sixmaps//")})},onActivate:function(){var b=this;x("send","event",
"Tools - Measure "+b.mode,"Activate");switch(b.mode){case "distance":b.drawToolbar.activate(r.POLYLINE);b._myConnects.push(l.after(b.drawToolbar.map,"onClick",function(){b.drawToolbar._graphic&&b.measure(b.drawToolbar._graphic.geometry)}));break;case "area":b.drawToolbar.activate(r.POLYGON)}b._myConnects.push(l.after(b.drawToolbar,"onDrawEnd",function(c){b.measure(c);b.mapGraphics&&b.mapGraphics.highlightFeature(c)},!0))},onDeactivate:function(){this.drawToolbar&&this.drawToolbar.deactivate();m.forEach(this._myConnects,
function(b){b.remove()});this.mapGraphics&&this.mapGraphics.clearHighlight();this._myConnects=[]},measure:function(d){var f=this;x("send","event","Tools - Measure "+f.mode,"Measure");d.geometry&&(d=d.geometry);switch(d.type){case "polyline":var g=[];m.forEach(d.paths,function(b){var c=m.filter(b,function(c,d){return 0<d&&c.toString()==b[d-1].toString()?!1:!0});g.push(c)});d.paths=g;var h=new c(f.spatialReference);if(!d.paths||!d.paths.length||2>d.paths[0].length)break;var k=d.paths[0].length-1;h.addPath([d.paths[0][k-
1],d.paths[0][k]]);h=b.webMercatorToGeographic(h);h=e.geodesicLengths([h],esri.Units.METERS)[0];d=b.webMercatorToGeographic(d);d=e.geodesicLengths([d],esri.Units.METERS)[0];f.onMeasureResultFormatted("Total Distance: "+f.formatDistance(d)+" \x3cbr /\x3eLast Segment Distance: "+f.formatDistance(h));f.onMeasureResult(d);break;case "polygon":var l=function(d){d=b.webMercatorToGeographic(d);var g=[];m.forEach(d.rings,function(b){var c=m.filter(b,function(c,d){return 0<d&&c.toString()==b[d-1].toString()?
!1:!0});g.push(c)});d.rings=g;var h=e.geodesicAreas([d],esri.Units.SQUARE_METERS)[0],k=0,l=new c(d.spatialReference);m.forEach(d.rings,function(b){l.addPath(b);k+=e.geodesicLengths([l],esri.Units.METERS)[0]});f.onMeasureResultFormatted("Area: "+f.formatArea(h)+" \x3cbr /\x3ePerimeter: "+f.formatDistance(k));f.onMeasureResult({area:h,length:k})};d.isSelfIntersecting(d)?(f.onCalculating(),f.geometryService.simplify([d],function(b){l(b[0])})):l(d)}},formatDistance:function(b){b=Math.round(b);var c=" m";
1E3<=b&&(b=this.roundMeasurement(b/1E3),c=" km");return b+c},formatArea:function(b){b=Math.round(b);var c=" m"+"2".sup();1E6<=b?(b=this.roundMeasurement(b/1E6),c=" km"+"2".sup()):1E4<=b&&(b=this.roundMeasurement(b/1E4),c=" ha");return b+c},roundMeasurement:function(b){return b=10>b?b.toFixed(3):100>b?b.toFixed(2):1E3>b?b.toFixed(1):Math.round(b)},onMeasureResultFormatted:function(b){},onMeasureResult:function(b){},onCalculating:function(){this.displayResult("");var b=h.create("span",{"class":"dojoxGridLoading",
innerHTML:"Calculating..."});h.place(b,this.widgetNode)},displayResult:function(b){this.widgetNode.innerHTML=b},initiateWidgetNode:function(){this.widgetNode.innerHTML="Waiting for measurement..."}})})},"sixmaps/dijits/tools/Coordinate":function(){define("dojo/_base/array dojo/_base/declare dojo/aspect dojo/dom-construct dojo/dom-style dojo/sniff dojo/text!sixmaps/dijits/tools/Help/CoordinateHelp.html dijit/form/Button dijit/form/DropDownButton dijit/layout/ContentPane dijit/layout/StackContainer dijit/Menu dijit/MenuItem esri/geometry/Point esri/SpatialReference esri/tasks/ProjectParameters sixmaps/dijits/HelpTopic sixmaps/dijits/InputForm sixmaps/dijits/tools/Toggle sixmaps/util/Geolocation sixmaps/util/Projection sixmaps/util/Analytics".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x,w,y,z,B,A){return p("sixmaps.dijits.tools.Coordinate",y,{_myConnects:null,iconClass:"coordIcon",showLabel:!1,dropDown:null,widgetNode:null,helpNode:null,point:null,x:null,y:null,iconUrl:"images/xy.png",helpHTML:q,mapGraphics:null,inputsWidget:null,stackContainer:null,menuOptions:null,msgDiv:null,dmsMsgDiv:null,calculating:!1,spatialReference:new u({wkid:4326}),constructor:function(f,k){var q=this;q.menuOptions=[28354,28355,28356,28357,28358,4326,3308].concat([7854,
7855,7856,7857,7858,7844,8058],[84,null]);p.safeMixin(this,f);q._myConnects=[];var t=l.create("div",{innerHTML:"Click on the map to retrieve coordinates, or enter coordinates to locate:\x3cbr/\x3e"});q.widgetNode=t;q.inputsWidget=q._createInputs(4326);q.stackContainer=new b;var w=new d({});q.projectionButton=new e({label:"GDA94 - Geographic",name:"projectionButton",dropDown:w,style:"margin-bottom: 15px;margin-top:10px;"});q.projectionButton.placeAt(t);if(navigator.geolocation){var x=new g({label:"Current Location",
style:"margin-bottom: 15px;margin-top:10px;",onClick:function(){A("send","event","Tool - Coordinate","Current Location Button Clicked");q.calculating?x.resetPanel():(q.calculating=!0,q.msgDiv.attr("content","\x3cfont color\x3d#DDDDDD\x3e\x3cb\x3eCalculating Location...\x3c/b\x3e\x3cbr/\x3e\x3cimg src\x3d'"+require.toUrl("sixmaps/dijits/images/")+"loadingAnimation.gif'/\x3e\x3c/font\x3e"),q.stackContainer.forward(),x.attr("label","Cancel"),q.projectionButton.setDisabled(!0),z.getCurrentLocation().then(function(b){q.calculating&&
(q.setLocation(b.geometry),x.resetPanel())},function(b){if(q.calculating){x.attr("label","Back");var c="",c=1==b.code?"Location unavailable. Permission denied when determining location.":2==b.code?"Location currently unavailable. Please try again later, or try changing your proxy settings.":3==b.code?"Location calculation has timed out. Please try again later.":"An unknown error has occurred when calculating location.";q.msgDiv.attr("content","\x3ctable\x3e\x3ctr\x3e\x3ctd style\x3d'width: 16px; padding:0; padding-right: 2px;'\x3e\x3cimg width\x3d'16px' src\x3d'"+
require.toUrl("sixmaps/dijits/")+"tools/images/warningIcon.png'/\x3e\x3c/td\x3e\x3ctd\x3e\x3cfont color\x3d#DDDDDD\x3e"+c+"\x3c/font\x3e\x3c/td\x3e\x3c/table\x3e")}}))},resetPanel:function(){x.attr("label","Current Location");q.calculating=!1;q.stackContainer.back();q.projectionButton.setDisabled(!1)}});(h("android")||h("ios"))&&x.placeAt(t)}m.forEach(q.menuOptions,function(b){w.addChild(new r({label:q._getLabel(b),onClick:function(){A("send","event","Tool - Coordinate","Projection Changed");var c,
d=q.inputsWidget.getValues();if(!isNaN(d.x)&&!isNaN(d.y))c=new v(d.x,d.y,new u({wkid:d.wkid}));else if(null!=d.wkiddms)if(c=d.y,d=d.x.split(":",4),c=c.split(":",4),q.validateDMS(d,c))d=q.convertDMSToDD(d[0],d[1],d[2],d[3]),c=q.convertDMSToDD(c[0],c[1],c[2],c[3]),c=new v(d,c,new u({wkid:4326}));else{q.displayErr("ERROR - unable to convert coordinates");return}q.dmsMsgDiv.set("content",q._getDMSmsg(b));84!=b?(q.set("spatialReference",{wkid:b}),void 0!=c&&(q.errDiv.set("content",""),c&&b&&B.projectGeometry(c,
b).then(function(b){q.inputsWidget.setFieldValues({x:b.x,y:b.y,wkid:b.spatialReference.wkid})},function(b){q.displayErr("ERROR - coordinate values invalid")}))):(q.set("spatialReference",{wkid:b}),q.errDiv.set("content",""),c&&B.geometryService.project([c],new u({wkid:4326}),function(b){var c=b[0];b=q.convertDDToDMS(c.x,!0);c=q.convertDDToDMS(c.y,!1);q.inputsWidget.setFieldValues({x:b,y:c,wkid:4326})},function(b){q.displayErr("ERROR - unable to convert coordinates")}))}}))});q.msgDiv=new c({content:""});
q.dmsMsgDiv=new c({content:""});q.dmsMsgDiv.placeAt(t);q.inputsWidget.placeAt(q.stackContainer);q.msgDiv.placeAt(q.stackContainer);q.stackContainer.placeAt(t);q.errDiv=new c({content:""});q.errDiv.placeAt(t)},_getLabel:function(b){switch(b){case 7844:return"GDA2020 - Geographic";case 8058:return"GDA2020 - NSW Lambert";case 7854:return"GDA2020 - MGA54";case 7855:return"GDA2020 - MGA55";case 7856:return"GDA2020 - MGA56";case 7857:return"GDA2020 - MGA57";case 7858:return"GDA2020 - MGA58";case 4326:case 4283:return"GDA94 - Geographic";
case 3308:return"GDA94 - NSW Lambert";case 28354:return"GDA94 - MGA54";case 28355:return"GDA94 - MGA55";case 28356:return"GDA94 - MGA56";case 28357:return"GDA94 - MGA57";case 28358:return"GDA94 - MGA58";case 84:return"Geographic DMS";default:return"Other"}},_getDMSmsg:function(b){switch(b){case 7844:return"";case 8058:return"";case 7854:return"";case 7855:return"";case 7856:return"";case 7857:return"";case 7858:return"";case 4326:return"";case 4283:return"";case 3308:return"";case 28354:return"";
case 28355:return"";case 28356:return"";case 28357:return"";case 28358:return"";case 84:return"Please enter DMS in this format Degree:Minute:Second:Direction , where direction can be  [E or W] for x, and [ N or S] for y ";default:return""}},_createInputs:function(b){var c=this,d;switch(b){case 7844:case 4326:case 4283:d=new w({submitParams:{label:"GO"},fieldParams:[{name:"y",alias:"Latitude",type:"number",placeHolder:"Decimal Degrees",required:!0,constraints:{pattern:"#.#########"}},{name:"x",alias:"Longitude",
type:"number",placeHolder:"Decimal Degrees",required:!0,constraints:{pattern:"#.#########"}},{name:"wkid",alias:"EPSG",type:"hidden",value:b}]});break;case 8058:case 7854:case 7855:case 7856:case 7857:case 7858:case 3308:case 28354:case 28355:case 28356:case 28357:case 28358:d=new w({submitParams:{label:"GO"},fieldParams:[{name:"x",alias:"Easting",type:"number",required:!0,constraints:{pattern:"#.###"}},{name:"y",alias:"Northing",type:"number",required:!0,constraints:{pattern:"#.###"}},{name:"wkid",
alias:"EPSG",type:"hidden",value:b}]});break;case 84:d=new w({submitParams:{label:"GO"},fieldParams:[{name:"x",alias:"x dms",placeHolder:"Deg : Min : Sec : Dir",required:!0,constraints:{pattern:"#:#:#:#"}},{name:"y",alias:"y dms",placeHolder:"Deg : Min :Sec : Dir",required:!0,constraints:{pattern:"#:#:#:#"}},{name:"wkid",alias:"EPSG",type:"hidden",value:4326},{name:"wkiddms",alias:"EPSG",type:"hidden",value:84}]});break;default:d=new w({submitParams:{label:"GO"},fieldParams:[{name:"x",alias:"X-Axis",
type:"number",required:!0,constraints:{pattern:"#.##########"}},{name:"y",alias:"Y-Axis",type:"number",required:!0,constraints:{pattern:"#.##########"}},{name:"wkid",alias:"EPSG",type:"number",required:!0,value:b,constraints:{pattern:"#"}}]})}d.on("reset",function(){c.errDiv.set("content","");m.forEach(d._inputFields,function(b){b.inputBox.reset()});c.mapGraphics.clearHighlight();c.currentPoint=null});d.on("submit",function(e){if(d.validate()){c.errDiv.set("content","");if(84!=b){var f=new u({wkid:e.wkid.value});
c.point=new v(e.x.value,e.y.value,f)}else if(e.wkid.value=4326,f=e.y.value,e=e.x.value.split(":",4),f=f.split(":",4),c.validateDMS(e,f)){e=c.convertDMSToDD(e[0],e[1],e[2],e[3]);var g=c.convertDMSToDD(f[0],f[1],f[2],f[3]),f=new u({wkid:4326});c.point=new v(e,g,f)}else{c.displayErr("ERROR - coordinate values invalid");return}c.onPress(c.point)}else c.displayErr("ERROR - coordinate values invalid")});return d},validateDMS:function(b,c){if(!b||4!=b.length||!c||4!=c.length)return!1;var d=parseFloat(b[0]),
e=parseFloat(b[1]),f=parseFloat(b[2]),g=parseFloat(c[0]),h=parseFloat(c[1]),k=parseFloat(c[2]);return!(!(isNaN(d)||isNaN(e)||isNaN(f)||isNaN(g)||isNaN(h)||isNaN(k))&&0<=d&&180>=d&&0<=e&&59>=e&&0<=f&&60>f&&0<=g&&180>=g&&0<=h&&59>=h&&0<=k&&60>k)||"E"!=b[3]&&"e"!=b[3]&&"W"!=b[3]&&"w"!=b[3]||"N"!=c[3]&&"n"!=c[3]&&"S"!=c[3]&&"s"!=c[3]?!1:!0},_setSpatialReferenceAttr:function(b){this.spatialReference.wkid!=b.wkid&&(this.spatialReference=b,this.stackContainer.removeChild(this.inputsWidget),this.inputsWidget=
this._createInputs(b.wkid),this.inputsWidget.placeAt(this.stackContainer,"first"),this.stackContainer.selectChild(this.stackContainer.getChildren()[0]),this.projectionButton.set("label",this._getLabel(b.wkid)),k.set(dijit.byId(this.inputsWidget.resetButton.id).domNode,{verticleAlign:"bottom"}))},setLocation:function(b){var c=this;B.projectGeometry(b,{wkid:c.inputsWidget.getFieldValue("wkid")}).then(function(b){for(var d=!1,e=c.inputsWidget.fieldParams,f=0;f<e.length;f++){var g=e[f];if("wkiddms"==
g.name||84==g.value)d=!0}d?(d=c.convertDDToDMS(b.x,!0),b=c.convertDDToDMS(b.y,!1),c.inputsWidget.setFieldValues({x:d,y:b,wkid:4326})):c.inputsWidget.setFieldValues({x:b.x,y:b.y,wkid:b.spatialReference.wkid});c.errDiv.set("content","")})},onActivate:function(){var b=this;A("send","event","Tool - Coordinate","Activate");b.mapGraphics&&b.mapGraphics.map&&b._myConnects.push(f.after(b.mapGraphics.map,"onClick",function(c){A("send","event","Tool - Coordinate","Map Point Coordinates Retrieved");b.setLocation(c.mapPoint)},
!0))},onDeactivate:function(){this.mapGraphics&&this.mapGraphics.clearHighlight();m.forEach(this._myConnects,function(b){b.remove()});this._myConnects=[]},onPress:function(b){var c=this;A("send","event","Tool - Coordinate","Zoom to Coordinates");c.mapGraphics&&(c.mapGraphics.zoomToFeature(b,{minZoomScale:9028}).then(null,function(b){c.displayErr("ERROR - "+b.message+". Ensure coordinates and EPSG are valid.")}),c.mapGraphics.highlightFeature(b))},postCreate:function(){this.inherited(arguments);this.helpNode=
new x({templateString:this.helpHTML,imagesUrl:require.toUrl("sixmaps/dijits/tools/Help/Images/"),baseUrl:require.toUrl("sixmaps//")});this.stackContainer.startup()},displayErr:function(b){this.errDiv.set("content","\x3ctable\x3e\x3ctr\x3e\x3ctd style\x3d'width: 16px; padding:0; padding-right: 2px;'\x3e\x3cimg width\x3d'16px' src\x3d'"+require.toUrl("sixmaps/dijits/")+"tools/images/warningIcon.png'/\x3e\x3c/td\x3e\x3ctd\x3e\x3cfont color\x3d#DDDDDD\x3e"+b+"\x3c/font\x3e\x3c/td\x3e\x3c/table\x3e")},
displayDMSmsg:function(){this.dmsMsgDiv.set("content","please enter Degree Minutes Second(DMS) in following format D:M:S")},hideDMSmsg:function(){this.dmsMsgDiv.set("content"," ")},convertDMSToDD:function(b,c,d,e){b=parseFloat(b)+parseFloat(c/60)+parseFloat(d/3600);b=parseFloat(b);if("S"==e||"s"==e||"W"==e||"w"==e)b*=-1;return b},convertDDToDMS:function(b,c){dir=0==(b+"").indexOf("-")?c?"W":"S":c?"E":"N";return(0|(0>b?b=-b:b))+":"+(0|b%1*60)+":"+(0|60*b%1*6E3)/100+":"+dir}})})},"sixmaps/dijits/tools/Identify":function(){define("dojo/_base/array dojo/_base/Color dojo/_base/declare dojo/_base/json dojo/_base/lang dojo/promise/all dojo/aspect dojo/Deferred dojo/dom-construct dojo/dom-style dojo/text!sixmaps/dijits/tools/Help/IdentifyHelp.html dojo/when dijit/form/Button esri/geometry/Extent esri/geometry/scaleUtils esri/geometry/screenUtils esri/geometry/Polygon esri/layers/MosaicRule esri/symbols/PictureMarkerSymbol esri/symbols/SimpleFillSymbol esri/symbols/SimpleLineSymbol esri/tasks/IdentifyParameters esri/tasks/IdentifyTask esri/tasks/ImageServiceIdentifyParameters esri/tasks/ImageServiceIdentifyTask esri/toolbars/draw esri/graphic sixmaps/dijits/tools/Toggle sixmaps/dijits/HelpTopic sixmaps/dijits/Toolbar sixmaps/map/Graphics sixmaps/util/Analytics sixmaps/util/WidgetCreator".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x,w,y,z,B,A,C,F,E,H,D,G,I,P,Q,O,N){return f("sixmaps.dijits.tools.Identify",[G],{iconClass:"identifyIcon",mode:H.POINT,services:null,identifyParams:null,identifyMapLayers:!1,identifyResultsParams:null,mapGraphics:null,drawToolbar:null,widgetNode:null,resultsWidget:null,helpNode:null,iconUrl:"images/info.png",helpHTML:b,showIdentifyPoint:!0,arcGISServerUrl:null,_pendingRequests:null,closable:!1,pointSymbol:null,lineSymbol:null,polygonSymbol:null,toolConfigs:null,
resultsWidgetType:"sixmaps/dijits/tools/IdentifyResultsList",constructor:function(b,g){var l=this;l._pendingRequests=[];l.identifyParams={tolerance:0,returnGeometry:!0,layerOption:A.LAYER_OPTION_VISIBLE,timeout:12E4};l.pointSymbol=new y(require.toUrl("sixmaps/dijits/tools/images/")+"identifyPoint.png",16,16);l.polygonSymbol=new z(z.STYLE_SOLID,new B(B.STYLE_SOLID,new p([0,0,255,.5]),2),new p([100,100,255,.2]));l.lineSymbol=new B(B.STYLE_SOLID,new p([0,0,255,.5]),2);f.safeMixin(l,b);l.mapGraphics&&
!l.drawGraphics&&(l.drawGraphics=new Q({map:l.mapGraphics.map,defaultSymbolPoint:l.pointSymbol,defaultSymbolLine:l.lineSymbol,defaultSymbolPolygon:l.polygonSymbol,minPolyParams:{scale:250,length:30}}));f.safeMixin(l,b);l.widgetNode=e.create("div");l.widgetNode.reset=k.hitch(l,"reset");if(l.toolConfigs&&l.toolConfigs.length){l.toolsNode=e.create("div",null,l.widgetNode);c.set(l.toolsNode,{width:"236px",background:"#424242",borderRadius:"5px",padding:"4px"});l.toolbar=new P;c.set(l.toolbar.domNode,
{display:"inline-block",borderBottom:"0px",background:"none"});l.toolbar.placeAt(l.toolsNode);var t={drawToolbar:l.drawToolbar,showLabel:!1},u=[];m.forEach(l.toolConfigs,function(b){var c=k.mixin({},t,b.params);u.push(N.createWidget(b.type,c))});h(u).then(function(b){m.forEach(b,function(b){c.set(b.iconNode,{width:"32px",height:"32px",marginRight:"2px"});c.set(b.domNode,{marginRight:"2px"});l.toolbar.addTool(b)})});l.clearGraphicTool=new r({label:"Remove Selection Graphic",iconClass:"scimsRectangleIcon",
showLabel:!1,onClick:function(){O("send","event","Tools - Identify","Selection Graphic Cleared");l.drawGraphics.clear()}});c.set(l.clearGraphicTool.iconNode,"backgroundImage","url("+require.toUrl("sixmaps/dijits/Identify/")+"../tools/images/clearSelections.png)");c.set(l.clearGraphicTool.iconNode,{width:"32px",height:"32px"});c.set(l.clearGraphicTool.domNode,{position:"relative","float":"right",top:"-1px"});l.clearGraphicTool.placeAt(l.toolsNode);q.after(l.toolbar,"setActiveTool",function(){if(l.resultsWidget){var b=
l.toolbar.getActiveTool();b&&b.message&&l.resultsWidget.updateToolMsg&&l.resultsWidget.updateToolMsg(b.message)}})}if(!l.resultsWidget){var v={layerParams:null,mapGraphics:l.mapGraphics,infoTemplate:null,ignoreExtraLayers:!1,closable:l.closable,identifyTool:l};k.mixin(v,l.identifyResultsParams);l.resultsWidget=N.createWidget(l.resultsWidgetType,v)}d(l.resultsWidget,function(b){l.resultsWidget=b;l.resultsWidget.placeAt(l.widgetNode);l.connectResultsWidget(l.resultsWidget);q.after(l,"onDeactivate",
function(){l.resultsWidget.onDeactivate&&l.resultsWidget.onDeactivate()})});this._myConnects=[]},reset:function(){O("send","event","Tools - Identify","Reset");this.resultsWidget.reset&&this.resultsWidget.reset();this.drawGraphics.clear();this.mapGraphics.clear();this.toolbar&&(this.toolbar.deactivate(),this.toolbar.getChildren()[0]&&this.toolbar.setActiveTool(this.toolbar.getChildren()[0]))},postCreate:function(){this.inherited(arguments);this.helpNode||(this.helpNode=new I({templateString:this.helpHTML,
imagesUrl:require.toUrl("sixmaps/dijits/tools/Help/Images/"),baseUrl:require.toUrl("sixmaps//"),channelsUrl:require.toUrl("channels/")}));"undefined"==typeof this.identifyMapLayers&&(this.identifyMapLayers=!this.services.length);this.updateServices();this.identifyMapLayers&&this.addMapLayers(this.mapGraphics.map)},onActivate:function(){O("send","event","Tools - Identify","Activate");if(this.toolbar){var b=this.toolbar.getActiveTool();b?b.onActivate&&b.onActivate():this.toolbar.getChildren()[0]&&this.toolbar.setActiveTool(this.toolbar.getChildren()[0])}else this.drawToolbar.activate("point");
this.drawGraphics.show();this._myConnects.push(q.after(this.drawToolbar,"onDrawEnd",k.hitch(this,"onDrawEnd"),!0))},onDeactivate:function(){this.drawToolbar&&this.drawToolbar.deactivate();this.drawGraphics&&this.drawGraphics.hide();m.forEach(this._myConnects,function(b){b.remove()});this._myConnects=[]},addMapLayers:function(b){var c=this;m.forEach(b.layerIds,function(d){d=b.getLayer(d);c.addService(d)})},addService:function(b){this.updateService(b);this.services.push(b)},updateService:function(b){var c;
if(!b.task)if(b.url.match(/\/ImageServer$/)){if(b.task=new E(b.url),c=new F,b.identifyParams&&b.identifyParams.mosaicRule&&!b.identifyParams.mosaicRule.declaredClass){var d=new w;b.identifyParams.mosaicRule=k.mixin(d,b.identifyParams.mosaicRule)}}else b.url.match(/(.*\/MapServer)\/([0-9]*)/)?(c=b.url.match(/(.*\/MapServer\/)([0-9]*)/),b.task=new C(c[1]),k.setObject("identifyParams.layerOption",c[2],b)):b.task=new C(b.url),c=new A;b.identifyParams=k.mixin(c,this.identifyParams,b.identifyParams);!b.featureCount&&
b.featureCountParams&&require([b.featureCountParams.type.replace(/\./g,"/")],function(c){b.featureCount=new c(b.featureCountParams.params)})},updateServices:function(){var b=this;m.forEach(b.services,function(c){b.updateService(c)})},onDrawEnd:function(b){this.identify(b)},identify:function(b){var c=this;O("send","event","Tools - Identify","Identify",b.type);var e=c.drawToolbar.map;if("point"==b.type){var f=t.toScreenGeometry(e.extent,e.width,e.height,b),f=new v(f.x-1,f.y-1,f.x+1,f.y+1,b.spatialReference);
b=t.toMapGeometry(e.extent,e.width,e.height,f).expand(5)}c.drawGraphics&&c.showIdentifyPoint&&(c.drawGraphics.clear(),c.drawGraphics.add(new D(b)));m.forEach(c._pendingRequests,function(b){b.cancel()});c._pendingRequests=[];m.forEach(c.services,function(f){if(1!=f.inactive){if(f.task.isInstanceOf(E)){"extent"==b.type&&(b=new x({rings:[[[b.xmin,b.ymin],[b.xmin,b.ymax],[b.xmax,b.ymax],[b.xmax,b.ymin],[b.xmin,b.ymin]]],spatialReference:b.spatialReference}));var h=e.extent.getWidth()/e.width;f.identifyParams.pixelSizeX=
h;f.identifyParams.pixelSizeY=h}var l={geometry:b,mapExtent:e.extent,width:e.width,height:e.height};f.visibleLayers&&f.identifyParams.layerOption==A.LAYER_OPTION_VISIBLE&&(l.layerOption="visible:"+f.visibleLayers.join(","));var p=new g,q=p.cancel;p.cancel=function(b){p.cancelled=b;clearTimeout(p.timer);q.apply(p,arguments)};p.service=f;f.identifyParams.timeout&&(p.timer=setTimeout(function(){p.reject("Timeout Exceeded",f,p.params);c.onIdentifyError("Timeout Exceeded",f,p.params)},f.identifyParams.timeout));
c._pendingRequests.push(p);!1===f.visible?p.cancel({message:"No Identify Performed - Service is not currently visible."}):(h=!0,f.featureCount&&(h=u.getScale(e),h=f.featureCount.doCount(b,h)),d(h,function(b){if(b.maxedOut)!p.isFulfilled()&&p.cancel({message:"Too many features selected or nothing available at this map scale.\x3cbr /\x3e Select a smaller area or zoom in closer and try again.",count:b});else{b=f.task;var d=k.mixin({},f.identifyParams,l);d.layerOption.match(/^[0-9].*$/)&&(d.layerOption=
"all:"+d.layerOption);p.params=d;b.execute(d,function(b){clearTimeout(p.timer);d.isInstanceOf(F)&&(b=m.filter(b.catalogItems.features,function(c,d){return b.catalogItemVisibilities[d]}),b=m.map(b,function(b){return{layerName:f.name,feature:b}}));c.onIdentifyResult(b,f,d);!p.isFulfilled()&&p.resolve(b,f,d)},function(b){clearTimeout(p.timer);if("Error: undefined"!=b.toString())c.onIdentifyError(b,f,d);!p.isFulfilled()&&p.reject(b,f,d)})}},function(b){!p.isFulfilled()&&p.reject(b,f,null)}))}});c.onIdentify(c._pendingRequests);
return c._pendingRequests},onIdentify:function(b){},onWidgetNodeChange:function(){},onIdentifyResult:function(b,c,d){},onIdentifyError:function(b,c,d){O("send","event","Tools - Identify","Identify Error")},connectResultsWidget:function(b){var c=this;q.after(c,"onIdentify",function(d){b.identify(d);c.onWidgetNodeChange()},!0);q.after(c,"onIdentifyResult",k.hitch(c,"onWidgetNodeChange"));q.after(c,"onIdentifyError",k.hitch(c,"onWidgetNodeChange"))}})})},"esri/tasks/IdentifyParameters":function(){define("esri/tasks/IdentifyParameters",
"dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel ../layerUtils ../geometry/jsonUtils ../geometry/scaleUtils".split(" "),function(m,p,f,l,k,h,q,g,e){var c=m(null,{declaredClass:"esri.tasks.IdentifyParameters",constructor:function(){this.layerOption=c.LAYER_OPTION_TOP},geometry:null,spatialReference:null,layerIds:null,tolerance:null,returnGeometry:!1,returnFieldName:!1,returnUnformattedValues:!1,mapExtent:null,width:400,height:400,dpi:96,layerDefinitions:null,
timeExtent:null,layerTimeOptions:null,dynamicLayerInfos:null,toJson:function(b){var c=b&&b.geometry||this.geometry,h=this.mapExtent,k=this.spatialReference,m=this.layerIds;b={tolerance:this.tolerance,returnGeometry:this.returnGeometry,returnFieldName:this.returnFieldName,returnUnformattedValues:this.returnUnformattedValues,imageDisplay:this.width+","+this.height+","+this.dpi,maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision};if(c){var p=c.toJson();delete p.spatialReference;
b.geometry=l.toJson(p);b.geometryType=g.getJsonType(c)}k?b.sr=k.wkid||l.toJson(k.toJson()):c&&c.spatialReference?b.sr=c.spatialReference.wkid||l.toJson(c.spatialReference.toJson()):h&&h.spatialReference&&(b.sr=h.spatialReference.wkid||l.toJson(h.spatialReference.toJson()));h&&(b.mapExtent=h.xmin+","+h.ymin+","+h.xmax+","+h.ymax);b.layers=this.layerOption;m&&(b.layers+=":"+m.join(","));b.layerDefs=q._serializeLayerDefinitions(this.layerDefinitions,!0);c=this.timeExtent;b.time=c?c.toJson().join(","):
null;b.layerTimeOptions=q._serializeTimeOptions(this.layerTimeOptions);if(this.dynamicLayerInfos&&0<this.dynamicLayerInfos.length){var h=e.getScale({extent:h,width:this.width,spatialReference:h.spatialReference}),x=q._getLayersForScale(h,this.dynamicLayerInfos),w=[];f.forEach(this.dynamicLayerInfos,function(b){if(!b.subLayerIds){var c=b.id;if((!this.layerIds||this.layerIds&&-1!==f.indexOf(this.layerIds,c))&&-1!==f.indexOf(x,c)){var d={id:c};d.source=b.source&&b.source.toJson();var e;this.layerDefinitions&&
this.layerDefinitions[c]&&(e=this.layerDefinitions[c]);e&&(d.definitionExpression=e);var g;this.layerTimeOptions&&this.layerTimeOptions[c]&&(g=this.layerTimeOptions[c]);g&&(d.layerTimeOptions=g.toJson());w.push(d)}}},this);h=l.toJson(w);"[]"===h&&(h="[{}]");b.dynamicLayers=h}return b}});p.mixin(c,{LAYER_OPTION_TOP:"top",LAYER_OPTION_VISIBLE:"visible",LAYER_OPTION_ALL:"all"});k("extend-esri")&&p.setObject("tasks.IdentifyParameters",c,h);return c})},"esri/tasks/IdentifyTask":function(){define("esri/tasks/IdentifyTask",
"dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../request ../geometry/normalizeUtils ./Task ./IdentifyResult".split(" "),function(m,p,f,l,k,h,q,g,e){m=m(g,{declaredClass:"esri.tasks.IdentifyTask",_eventMap:{complete:["results"]},constructor:function(c,b){this._url.path+="/identify";this._handler=p.hitch(this,this._handler);this.gdbVersion=b&&b.gdbVersion;this.registerConnectEvents()},__msigns:[{n:"execute",c:3,a:[{i:0,p:["geometry"]}],e:2}],_handler:function(c,b,d,g,h){try{var k=
[];f.forEach(c.results,function(b,c){k[c]=new e(b)});this._successHandler([k],"onComplete",d,h)}catch(t){this._errorHandler(t,g,h)}},execute:function(c,b,d,e){var f=e.assembly;c=this._encode(p.mixin({},this._url.query,{f:"json"},c.toJson(f&&f[0])));var g=this._handler,k=this._errorHandler;this.gdbVersion&&(c.gdbVersion=this.gdbVersion);return h({url:this._url.path,content:c,callbackParamName:"callback",load:function(c,f){g(c,f,b,d,e.dfd)},error:function(b){k(b,d,e.dfd)}})},onComplete:function(){}});
q._createWrappers(m);l("extend-esri")&&p.setObject("tasks.IdentifyTask",m,k);return m})},"esri/tasks/IdentifyResult":function(){define("esri/tasks/IdentifyResult","dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../graphic ../geometry/jsonUtils".split(" "),function(m,p,f,l,k,h){m=m(null,{declaredClass:"esri.tasks.IdentifyResult",constructor:function(f){p.mixin(this,f);this.feature=new k(f.geometry?h.fromJson(f.geometry):null,null,f.attributes);delete this.geometry;delete this.attributes}});
f("extend-esri")&&p.setObject("tasks.IdentifyResult",m,l);return m})},"sixmaps/dijits/tools/IdentifyResultsList":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/promise/all dojo/Deferred dojo/dom-class dojo/dom-construct dojo/dom-style dojo/on dojo/when dijit/layout/ContentPane dijit/layout/StackContainer dijit/_OnDijitClickMixin dijit/_WidgetBase sixmaps/util/Promise sixmaps/util/Analytics".split(" "),function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t){r=p("sixmaps.dijits.tools.IdentifyResultsList",
[v],{toolMessage:"Click a point on the map to identify surrounding features.",layerParams:null,mapGraphics:null,infoTemplate:null,ignoreExtraLayers:!1,showFullDetails:!1,resultsContainer:null,resultsPanel:null,resultsPanelMaxWidth:"550px",hideCategoryPanel:null,identifyTool:null,constructor:function(b,c){this.layerParams=[];p.safeMixin(this,b)},postCreate:function(){this.inherited(arguments);this.rootContainer=(new d({doLayout:!1,style:"margin-top:5px;width:auto;height:auto;","class":"toolPaneContainer"})).placeAt(this.domNode);
this.messagePane=new b({doLayout:!1,style:"padding:0px;"});this.rootContainer.addChild(this.messagePane);var c=q.create("div",{});this.resultsContainer=new b({doLayout:!1,style:"padding:0px;"});this.resultsPanel=(new d({"class":"identifyResultsContainer",doLayout:!1,style:"float:right;margin-left:10px;max-width:"+this.resultsPanelMaxWidth+";display:none;"})).placeAt(c);this.categoryPanel=(new x({container:this.resultsPanel,"class":"identifyCategoryList",style:"position:relative;max-height:250px;width:auto;float:left;overflow-x:hidden;display:none;"})).placeAt(c);
this.resultsContainer.set("content",c);this.rootContainer.addChild(this.resultsContainer);this.categoryPanel.startup();this.resultsPanel.startup();this.rootContainer.startup();this.resultSelected=!1;this.setInfoMessage(this.toolMessage)},updateToolMsg:function(b){this.toolMessage=b;this.setInfoMessage(this.toolMessage)},setInfoMessage:function(b){this._clearMessagePane();if(b){var c=q.create("div",{style:"width:200px;text-align:center;padding:10px;"});"string"==typeof b?c.innerHTML=b:q.place(b,c);
this.messagePane.set("content",c)}},_clearMessagePane:function(){this.messagePane.set("content","")},onDeactivate:function(){m.forEach(this.categoryPanel.getChildren(),function(b){b.resultsWidget&&b.resultsWidget.clearSelection&&b.resultsWidget.clearSelection()})},onResize:function(){},reset:function(){var b=this;m.forEach(b.categoryPanel.getChildren(),function(c){b.categoryPanel.removeChild(c)});m.forEach(b.identifyTool.services,function(b){m.forEach(b.layerParams,function(b){b.layerCategoryNode&&
(q.destroy(b.layerCategoryNode.domNode),b.layerCategoryNode=null)})});g.set(b.categoryPanel.domNode,"display","none");g.set(b.resultsPanel.domNode,"display","none");b.setInfoMessage(b.toolMessage);b.rootContainer.selectChild(b.messagePane);b.resultSelected=!1},identify:function(c){var d=this;c.length?d.rootContainer.selectChild(d.resultsContainer):(d.setInfoMessage("Nothing to identify..."),d.rootContainer.selectChild(d.messagePane));var e=q.create("div",{"class":"dojoxGridLoading",innerHTML:"Loading results...",
style:"margin-bottom: 10px;"},d.rootContainer.selectedChildWidget.domNode,"first"),f=!1,h=!1;m.forEach(c,function(b){b.then(function(b){b&&0<b.length&&(f=!0)},function(c){!b.cancelled&&(h=!0)})});l(c).then(function(b){d.categoryPanel.getChildren().length||f||h||(d.setInfoMessage("\x3cspan class\x3d'identifyError'\x3eNo results found at this scale and location.\x3c/span\x3e\x3cbr/\x3e"+d.toolMessage),d.rootContainer.selectChild(d.messagePane));m.forEach(d.categoryPanel.getChildren(),function(b){setTimeout(function(){b.isLoading&&
b.displayResults(b.title,[],-1,null)},100)})});u.settle(c).then(function(){q.destroy(e)});m.forEach(c,function(c){c.service.serviceNode&&(d.categoryPanel.getChildren().length&&d.categoryPanel.removeChild(c.service.serviceNode),c.service.serviceNode=null);c.service.layerParams&&m.forEach(c.service.layerParams,function(b){if(b.layerCategoryNode&&(b.layerCategoryNode.set("numResults",-1),b.layerCategoryNode.set("isLoading",!0),b.layerCategoryNode.resultPane)){var c=q.create("span",{"class":"dojoxGridLoading",
innerHTML:"Loading "+b.title+" results."});b.layerCategoryNode.resultPane.set("content","");b.layerCategoryNode.resultPane.set("content",c)}});c.then(function(e){!c.service.layerParams&&(c.service.layerParams=[]);m.forEach(e,function(e){var f=null;c.service.layerParams&&m.some(c.service.layerParams,function(b){return b.layerName==e.layerName?(f=b,!0):!1});var h=c.service.ignoreExtraLayers;"undefined"==typeof h&&(h=d.ignoreExtraLayers);f||h||(f={layerName:e.layerName,title:e.layerName},h=c.service.showFullDetails,
"undefined"==typeof h&&(h=d.showFullDetails),h||(f.layout=[{field:e.displayFieldName,width:"15em"}]),c.service.layerParams.push(f));f&&(f.layerCategoryNode||(h=new w({"class":"identifyCategoryItem",title:f.groupName||f.title,isLoading:!0,onClick:function(){d.categoryPanel.selectChild(this);d.resultSelected=!0}}),m.some(d.categoryPanel.getChildren(),function(b){if(b.groupName&&f.groupName&&b.groupName==f.groupName)return f.layerCategoryNode=b,!0})||(f.layerCategoryNode=h)),f.layerCategoryNode.resultPane||
(f.layerCategoryNode.resultPane=new b({doLayout:!1,style:"margin:5px;text-align:center;"})),d.categoryPanel.addChild(f.layerCategoryNode,f.groupName),d.hideCategoryPanel?g.set(d.categoryPanel.domNode,"display","none"):g.set(d.categoryPanel.domNode,"display",""),g.set(d.resultsPanel.domNode,"display",""))});d.displayResults(e,c.service,c.params)},function(e){if(c.cancelled)m.forEach(c.service.layerParams,function(b){if(b.layerCategoryNode){var d=q.create("span",{"class":"identifyError",innerHTML:b.layerCategoryNode.title+
" - "+c.cancelled.message});b.layerCategoryNode.displayCancelled(d)}});else{var f=!1;g.set(d.categoryPanel.domNode,"display","");g.set(d.resultsPanel.domNode,"display","");m.forEach(c.service.layerParams,function(b){b.layerCategoryNode&&(d.displayError(e,c.service,b.layerCategoryNode),f=!0)});if(!f){var h="";if(c.service.title)h=c.service.title;else{var k=c.service.url.match(/\/([A-Za-z_\-0-9]*)\/MapServer/);k&&(h=k[1])}k=new w({"class":"identifyCategoryItem",title:h,isLoading:!1,onClick:function(){t("send",
"event","Tools - Identify","Result Category Selected",h);d.categoryPanel.selectChild(this);d.resultSelected=!0}});c.service.serviceNode=k;c.service.serviceNode.resultPane||(c.service.serviceNode.resultPane=new b({doLayout:!1,style:"margin:5px;text-align:center;"}));d.categoryPanel.addChild(c.service.serviceNode);d.displayError(e,c.service,c.service.serviceNode)}}})});d.resultsContainer.resize()},displayResults:function(b,d,e){var h=this,l={};!d.layerParams&&(d.layerParams=[]);var p=d.layerParams;
m.forEach(b,function(b){h.infoTemplate&&(b.feature.infoTemplate=h.infoTemplate);if(l[b.layerName])l[b.layerName].push(b.feature);else{var c=null;m.some(p,function(d){return d.layerName==b.layerName?(c=d,!0):!1});if(c&&c.additionalField){var e=!0;c.layout&&m.forEach(c.layout,function(b){b.name==c.additionalField.name&&(e=!1)});e&&(c.layout=[{field:c.additionalField.name,name:c.additionalField.name,width:c.additionalField.width||"8"}].concat(c.layout));b.feature&&b.feature.attributes&&(b.feature.attributes[c.additionalField.name]=
c.additionalField.value)}if(c&&l[c.groupName])l[c.groupName].push(b.feature);else{var q=d.ignoreExtraLayers;"undefined"==typeof q&&(q=h.ignoreExtraLayers);if(c||!q){c||(c={layerName:b.layerName},p.push(c));q=c.resultsWidget;if(!q||q._destroyed){var r=[];if(c.layout)r=c.layout;else{for(att in b.feature.attributes)r.push({field:att,name:att});c.layout=r}var t=new k;c.resultsWidget=t;require([(c.resultsWidgetType||"sixmaps/dijits/takeMeTo/TakeMeToResults").replace(/\./g,"/")],function(b){var d={realTitle:c.title||
c.layerName,autoHeight:!0,autoWidth:!0,structure:r,selectSingleResult:!1,mapGraphics:h.mapGraphics};f.mixin(d,c.resultsWidgetParams);b=new b(d);b.startup();g.set(b.domNode,{maxHeight:"300px","overflow-y":"auto","padding-right":"15px"});c.resultsWidget=b;t.resolve(b)})}l[c&&c.groupName||b.layerName]=[b.feature]}}}});m.forEach(p,function(b){var d=l[b.groupName||b.layerName];c(b.resultsWidget,function(c){if(!(!c||c&&c._destroyed)){var e=d&&d.length||0,f=(d.groupName=b.groupName)||c.realTitle;b.layerCategoryNode&&
b.layerCategoryNode.displayResults(f,d,e,c);h.resultSelected||(h.categoryPanel.selectChild(b.layerCategoryNode),h.resultSelected=!0)}})})},displayError:function(b,c,d){b&&(b=q.create("span",{"class":"identifyError",innerHTML:" \x3cb\x3eAn error has occurred:\x3c/b\x3e\x3cbr /\x3e\x3cbr /\x3e"+d.title+"- "+b}),d&&d.displayError(b))}});var x=p("sixmaps.dijits.tools.CategoryController",[b],{container:null,_children:null,constructor:function(){this._children=[]},addChild:function(b,c){var d=!1,d=m.some(this._children,
function(b){if(b.groupName&&b.groupName==c)return!0});d||-1!=m.indexOf(this._children,b)||(b.groupName=c,this._children.push(b),q.place(b.domNode,this.containerNode,"last"),this.container.addChild(b.resultPane))},removeChild:function(b){this._children=m.filter(this._children,function(c){return c!=b});this.container.removeChild(b.resultPane);b.resultPane=null;h.remove(b.domNode,"identifyCategoryItemSelected");q.destroy(b.domNode)},getChildren:function(){return this._children},selectChild:function(b){this.container.selectChild(b.resultPane);
m.forEach(this.getChildren(),function(b){h.remove(b.domNode,"identifyCategoryItemSelected")});h.add(b.domNode,"identifyCategoryItemSelected")}}),w=p("sixmaps.dijits.tools.IdentifyResultCategory",[v],{title:"",numResults:null,isLoading:!1,resultPane:null,titleNode:null,quantityNode:null,infoNode:null,loadImgUrl:"images/ajax-loader.gif",errorImgUrl:"images/error.png",cancelledImgUrl:"tools/images/warningIcon.png",postCreate:function(){this.inherited(arguments);this.titleNode=q.create("span",{style:"padding-right:20px;display:inline-block;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;",
title:this.title,innerHTML:this.title});q.place(this.titleNode,this.domNode);this.infoNode=q.create("span",{style:"position:absolute;right:5px;"},this.domNode);this.quantityNode=q.create("span",{style:"position:absolute;right:5px;"},this.domNode);e(this.domNode,"click",f.hitch(this,"onClick"))},_setTitleAttr:function(b){this.titleNode&&(this.titleNode.innerHTML=b)},_setIsLoadingAttr:function(b){this._set("isLoading",b);b?(this.setInfoNode("loading"),this.resultsWidget=this.results=null):this.setInfoNode("")},
_setIsErrorAttr:function(b){b?this.setInfoNode("error"):this.setInfoNode("")},_setIsCancelledAttr:function(b){b?this.setInfoNode("cancelled"):this.setInfoNode("")},setInfoNode:function(b){if(this.infoNode){this.infoNode.innerHTML="";var c,d,e;""!=b&&("loading"==b?(c=require.toUrl("sixmaps/dijits/")+this.loadImgUrl,d="",e="Loading"):"error"==b?(c=require.toUrl("sixmaps/dijits/")+this.errorImgUrl,d="",e="Error"):"cancelled"==b&&(c=require.toUrl("sixmaps/dijits/")+this.cancelledImgUrl,d="",e="Cancelled..."),
q.create("img",{src:c,alt:d,title:e,style:"position:relative;top:1px;float:right;width:14px;"},this.infoNode))}},_setNumResultsAttr:function(b){-1==b?this.quantityNode&&(this.quantityNode.innerHTML=""):this.quantityNode&&(this.quantityNode.innerHTML="("+b+")")},displayResults:function(c,d,e,f){this.results=d;this.resultsWidget=f;c&&this.set("title",c);(0==e||1<e)&&this.set("numResults",e);this.set("isLoading",!1);f&&d?(this.resultPane||(this.resultPane=new b({doLayout:!1,style:"margin:5px;text-align:center;"})),
this.resultPane.set("content",""),this.resultPane.set("content",f),this.resultsWidget.showResults(this.results),q.create("span",{style:"display:block;font-weight:bold;text-decoration:underline;margin-top:-8px;padding-bottom:5px;",innerHTML:c},this.resultPane.domNode,"first")):this.resultPane&&(this.resultPane.set("content",""),q.create("span",{style:"display:block;font-weight:bold;text-decoration:underline;margin-top:-8px;padding-bottom:5px;",innerHTML:c},this.resultPane.domNode),q.create("span",
{style:"display:block;width:86px;",innerHTML:"\x3cbr /\x3eNo Results"},this.resultPane.domNode))},displayError:function(c){this.set("isError",!0);this.resultPane||(this.resultPane=new b({doLayout:!1,style:"margin:5px;text-align:center;"}));this.resultPane.set("content","");this.resultPane.set("content",c)},displayCancelled:function(c){this.set("isCancelled",!0);this.resultPane||(this.resultPane=new b({doLayout:!1,style:"margin:5px;text-align:center;"}));this.resultPane.set("content","");this.resultPane.set("content",
c)},onClick:function(){}});return r})},"sixmaps/util/Promise":function(){define(["dojo/_base/array","dojo/Deferred"],function(m,p){return{settle:function(f){var l=new p,k=f.length,h=[];m.forEach(f,function(f,g){f.then(function(e){h[g]={state:"fulfilled",value:e};k--;0===k&&l.resolve(h)},function(e){h[g]={state:"rejected",err:e};k--;0===k&&l.resolve(h)})});return l}}})},"sixmaps/dijits/tools/WidgetDraw":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect esri/toolbars/draw sixmaps/dijits/tools/Toggle".split(" "),
function(m,p,f,l,k,h){return p("sixmaps.dijits.tools.WidgetDraw",h,{iconClass:"measureIcon",drawToolbar:null,mode:null,widgetNode:null,helpNode:null,mapGraphics:null,checked:!1,constructor:function(f,g){this.mode=k.POLYLINE;p.safeMixin(this,f);this._myConnects=[]},postCreate:function(){if(this.checked)this.onActivate()},destroy:function(){me.widgetNode=null;me.helpNode=null},onActivate:function(){this.drawToolbar&&this.drawToolbar.activate(this.mode);this.widgetNode&&this.widgetNode.activate&&this.widgetNode.activate();
this.drawToolbar&&this._myConnects.push(l.after(this.drawToolbar,"onDrawEnd",f.hitch(this,"onDrawEnd"),!0))},onDeactivate:function(){this.drawToolbar&&this.drawToolbar.deactivate();this.widgetNode&&this.widgetNode.deactivate&&this.widgetNode.deactivate();m.forEach(this._myConnects,function(f){f.remove()});this._myConnects=[];this.mapGraphics&&this.mapGraphics.clearHighlight()},onDrawEnd:function(f){this.mapGraphics&&this.mapGraphics.highlightFeature(f)}})})},"sixmaps/dijits/tools/WidgetTool":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Deferred dojo/dom-construct dijit/layout/ContentPane sixmaps/dijits/tools/Toggle sixmaps/dijits/HelpTopic sixmaps/util/WidgetCreator".split(" "),
function(m,p,f,l,k,h,q,g,e,c){return p("sixmaps.dijits.tools.WidgetTool",[g],{iconClass:"measureIcon",widgetType:"",widgetParams:null,defaultParams:null,widgetNode:null,helpNode:null,helpHTML:"",app:null,drawToolbar:null,map:null,settingsNode:null,showSettings:!0,mapGraphics:null,checked:!1,_myConnects:null,constructor:function(b,d){var e=this;p.safeMixin(e,b);!b.widgetNode&&b.widgetType&&(e.widgetNode=h.create("div",{innerHTML:"Loading widget.."}),e.helpNode=new q({style:"overflow:visible;"}),e.loaded=
new k,require([b.widgetType.replace(/\./g,"/")],function(d){var g={mapGraphics:e.mapGraphics,app:e.app,map:e.map,drawToolbar:e.drawToolbar},h={},k;for(k in g)"undefined"!=typeof d.prototype[k]&&(h[k]=g[k]);c.createWidget(b.widgetType,f.mixin(h,b.widgetParams)).then(function(b){b.iconUrl&&!e.iconUrl&&e.set("iconUrl",b.iconUrl);e.widgetNode.innerHTML="";b.placeAt(e.widgetNode);e.widgetNode=b;e.widgetNode.startup&&e.widgetNode.startup();b.helpNode&&e.helpNode.set("content",b.helpNode);e.showSettings&&
b.settingsNode&&setTimeout(function(){e.set("settingsNode",b.settingsNode)},0);b.onSaveSettings&&l.after(b,"onSaveSettings",f.hitch(e,"onSaveSettings"));b.onClose&&l.after(b,"onClose",f.hitch(e,"onDeactivate"))})}));e._myConnects=[]},postCreate:function(){if(this.checked)this.onActivate();this.helpHTML&&(this.helpNode=new e({templateString:this.helpHTML,imagesUrl:require.toUrl("sixmaps/dijits/tools/Help/Images/"),baseUrl:require.toUrl("sixmaps//")}))},destroy:function(){this.settingsNode=this.helpNode=
this.widgetNode=null},onSaveSettings:function(b){},onActivate:function(){this.widgetNode&&this.widgetNode.activate&&this.widgetNode.activate()},onDeactivate:function(){this.widgetNode&&this.widgetNode.deactivate&&this.widgetNode.deactivate();m.forEach(this._myConnects,function(b){b.remove()});this._myConnects=[]}})})},"sixmaps/dijits/ImageViewer":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/json dojo/_base/lang dojo/_base/sniff dojo/aspect dojo/Deferred dojo/dom-attr dojo/dom-construct dojo/dom-style dojo/has dojo/on dojo/text!sixmaps/dijits/imageViewerHelp.html dijit/_WidgetBase esri/geometry/Point esri/geometry/screenUtils esri/graphic esri/InfoTemplate esri/SpatialReference sixmaps/dijits/DropTarget sixmaps/dijits/HelpTopic sixmaps/util/Projection sixmaps/lib/exif sixmaps/map/Graphics sixmaps/util/Analytics".split(" "),
function(m,p,f,l,k,h,q,g,e,c,b,d,r,v,u,t,x,w,y,z,B,A,C,F,E){return p("sixmaps.dijits.ImageViewer",[v],{mapGraphics:null,constructor:function(b,c){p.safeMixin(this,b)},handleFiles:function(b){var k=this;k.mapGraphics&&k.mapGraphics.clear();var l=new q;l.waitingCount=0;k.previewNode.innerHTML="";var p=[];m.forEach(b,function(b){if(b.type.match(/image.*/)){l.waitingCount++;var m=e.create("div",{title:b.name+" - Click to zoom to location",style:"width:auto;text-align:center;cursor:pointer;"}),q=e.create("img",
{style:"width:auto;max-width:100%;height:100px;"},m);q.file=b;k.previewNode.appendChild(m);var r,t=new FileReader;h.after(t,"onload",function(b){q.src=b.target.result},!0);t.readAsDataURL(b);C.getData(b,function(){var d=this.exifdata,h=d.GPSLatitude,t=d.GPSLongitude;if(h&&t){h=h[0]+h[1]/60+h[2]/3600;t=t[0]+t[1]/60+t[2]/3600;d.GPSLongitudeRef.match(/^W/i)&&(t*=-1);!d.GPSLatitudeRef.match(/^N/i)&&(h*=-1);var v=new y({wkid:4326}),h=new u([t,h],v);r=new x({attributes:{img:"\x3cimg src\x3d'"+q.src+"' style\x3d'width:100%;' title\x3d'"+
f.toJson(d,!0)+"'/\x3e",exif:d},geometry:h});r.infoTemplate=new w(b.name,"${img}");k.onImageDropped(r);p.push(r);l.progress(l.waitingCount,r)}else e.create("div",{"class":"dojoxGridError",innerHTML:"Error: image not geo-tagged",style:"width:auto;"},m,"first"),g.set(m,"title",""),c.set(m,"cursor","default");l.waitingCount--;l.waitingCount||(l.resolve(p),k.onImagesDropped(p))});d(q,"click",function(){k.onImageClick(r)});d(q,"mouseover",function(){k.onImageMouseover(r)});d(q,"mouseout",function(){k.onImageMouseout(r)});
d(q,"click",function(){k.onImageClick(r)})}else t=new FileReader,t.onload=function(c){k.previewNode.innerHTML+="\x3cbr\x3eFileName: "+b.name;k.previewNode.innerHTML+=" FileSize: "+b.size+"\x3cbr\x3eContent:\x3cbr\x3e";k.previewNode.appendChild(document.createTextNode(c.target.result));k.previewNode.innerHTML+="\x3cbr\x3e"},t.readAsText(b)});return l},onDrop:function(b){},onImageDropped:function(b){E("send","event","Tool - ImageViewer","Image Drop");this.mapGraphics&&this.mapGraphics.add(b)},onImagesDropped:function(b){E("send",
"event","Tool - ImageViewer","Multiple Image Drop");this.mapGraphics&&this.mapGraphics.zoomToFeatures(b)},onImageMouseover:function(b){this.mapGraphics&&this.mapGraphics.highlightFeature(b)},onImageMouseout:function(b){this.mapGraphics&&this.mapGraphics.clearHighlight()},onImageClick:function(b){this.mapGraphics&&this.mapGraphics.zoomToFeature(b)},postCreate:function(){this.inherited(arguments);this.mapGraphics&&(this.mapGraphics=new F({map:this.mapGraphics.map}));if(b("ie")||b("safari")){c.set(this.domNode,
"height","90px");var d="\x3cb\x3eThis tool is not supported in "+(b("ie")?"Internet Explorer":"Safari")+".\x3c/b\x3e\x3cbr/\x3eTry using one of these browsers instead:\x3cbr/\x3e\x3cbr/\x3e\x3cdiv class\x3d'welcomeSplash' style\x3d'text-align: center; width: 100%'\x3e\x3ctable style\x3d'width: 80%; margin: 0 auto;'\x3e\x3ctr\x3e\x3ctd style\x3d'text-align: center; padding: 0 10px 0 10px'\x3e\x3ca href\x3d'http://www.mozilla.com/' target\x3d'_blank'\x3e\x3cimg src\x3d'"+require.toUrl("sixmaps/dijits/images/")+
"firefox.png' title\x3d'Firefox' style\x3d'border:none;'/\x3e\x3cbr/\x3eFirefox\x3c/a\x3e\x3c/td\x3e\x3ctd style\x3d'text-align: center; padding: 0 10px 0 10px'\x3e\x3ca href\x3d'http://www.google.com/chrome/' target\x3d'_blank'\x3e\x3cimg src\x3d'"+require.toUrl("sixmaps/dijits/images/")+"chrome.png' title\x3d'Chrome' style\x3d'border:none;'/\x3e\x3cbr/\x3eChrome\x3c/a\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e";e.create("div",{style:{"float":"left",width:"auto"},"class":"dojoxGridError"},
this.domNode);e.create("div",{style:"float:right;",innerHTML:d},this.domNode)}else e.create("div",{innerHTML:"Drop Image Here",style:"width:auto;height:50px;text-align:center;padding-top:25%;background:#4D6895;border:1px solid white; border-radius:5px;"},this.domNode),new z({node:this.domNode,onDropFiles:l.hitch(this,"handleFiles")}),this.previewNode=e.create("div",{style:"padding-right:5px;margin-top:5px;max-height:210px;overflow-y:auto;overflow-x:hidden;"},this.domNode);this.helpNode=new sixmaps.dijits.HelpTopic({templateString:r,
imagesUrl:require.toUrl("sixmaps/dijits/images/"),baseUrl:require.toUrl("sixmaps//")})},activate:function(){E("send","event","Tool - ImageViewer","Activate");this.mapGraphics&&this.mapGraphics.show()},deactivate:function(){this.mapGraphics&&this.mapGraphics.hide()}})})},"sixmaps/lib/exif":function(){define(function(m,p,f){(function(){function l(b,c){c=c||b.match(/^data\:([^\;]+)\;base64,/mi)[1]||"";b=b.replace(/^data\:([^\;]+)\;base64,/gmi,"");for(var d=atob(b),e=d.length,f=new ArrayBuffer(e),g=new Uint8Array(f),
h=0;h<e;h++)g[h]=d.charCodeAt(h);return f}function k(b,c){var d=new XMLHttpRequest;d.open("GET",b,!0);d.responseType="blob";d.onload=function(b){200!=this.status&&0!==this.status||c(this.response)};d.send()}function h(b,d){function e(e){var f=m(e);a:{var g=new DataView(e);if(255!=g.getUint8(0)||216!=g.getUint8(1))e=!1;else{for(var h=2,k=e.byteLength;h<k;){var l=g,p=h;if(56===l.getUint8(p)&&66===l.getUint8(p+1)&&73===l.getUint8(p+2)&&77===l.getUint8(p+3)&&4===l.getUint8(p+4)&&4===l.getUint8(p+5)){l=
g.getUint8(h+7);0!==l%2&&(l+=1);0===l&&(l=4);k=h+8+l;h=g.getUint16(h+6+l);g=k;e=new DataView(e);for(var k={},q=void 0,p=q=p=void 0,l=g;l<g+h;)28===e.getUint8(l)&&2===e.getUint8(l+1)&&(p=e.getUint8(l+2),p in x&&(q=e.getInt16(l+3),p=x[p],q=c(e,l+5,q),k.hasOwnProperty(p)?k[p]instanceof Array?k[p].push(q):k[p]=[k[p],q]:k[p]=q)),l++;e=k;break a}h++}e=void 0}}b.exifdata=f||{};b.iptcdata=e||{};d&&d.call(b)}if(b.src)if(/^data\:/i.test(b.src)){var f=l(b.src);e(f)}else if(/^blob\:/i.test(b.src)){var g=new FileReader;
g.onload=function(b){e(b.target.result)};k(b.src,function(b){g.readAsArrayBuffer(b)})}else{var h=new XMLHttpRequest;h.onload=function(){if(200==this.status||0===this.status)e(h.response);else throw"Could not load image";h=null};h.open("GET",b.src,!0);h.responseType="arraybuffer";h.send(null)}else window.FileReader&&(b instanceof window.Blob||b instanceof window.File)&&(g=new FileReader,g.onload=function(b){e(b.target.result)},g.readAsArrayBuffer(b))}function m(c){var d=new DataView(c);if(255!=d.getUint8(0)||
216!=d.getUint8(1))return!1;var e=2;c=c.byteLength;for(var f;e<c;){if(255!=d.getUint8(e))return!1;f=d.getUint8(e+1);if(225==f)return b(d,e+4,d.getUint16(e+2)-2);e+=2+d.getUint16(e+2)}}function g(b,c,d,f,g){var h=b.getUint16(d,!g),k={},l,m,p;for(p=0;p<h;p++)l=d+12*p+2,m=f[b.getUint16(l,!g)],k[m]=e(b,l,c,d,g);return k}function e(b,d,e,f,g){var h=b.getUint16(d+2,!g);f=b.getUint32(d+4,!g);e=b.getUint32(d+8,!g)+e;var k,l;switch(h){case 1:case 7:if(1==f)return b.getUint8(d+8,!g);e=4<f?e:d+8;d=[];for(h=
0;h<f;h++)d[h]=b.getUint8(e+h);return d;case 2:return c(b,4<f?e:d+8,f-1);case 3:if(1==f)return b.getUint16(d+8,!g);e=2<f?e:d+8;d=[];for(h=0;h<f;h++)d[h]=b.getUint16(e+2*h,!g);return d;case 4:if(1==f)return b.getUint32(d+8,!g);d=[];for(h=0;h<f;h++)d[h]=b.getUint32(e+4*h,!g);return d;case 5:if(1==f)return k=b.getUint32(e,!g),l=b.getUint32(e+4,!g),b=new Number(k/l),b.numerator=k,b.denominator=l,b;d=[];for(h=0;h<f;h++)k=b.getUint32(e+8*h,!g),l=b.getUint32(e+4+8*h,!g),d[h]=new Number(k/l),d[h].numerator=
k,d[h].denominator=l;return d;case 9:if(1==f)return b.getInt32(d+8,!g);d=[];for(h=0;h<f;h++)d[h]=b.getInt32(e+4*h,!g);return d;case 10:if(1==f)return b.getInt32(e,!g)/b.getInt32(e+4,!g);d=[];for(h=0;h<f;h++)d[h]=b.getInt32(e+8*h,!g)/b.getInt32(e+4+8*h,!g);return d}}function c(b,c,d){var e="";for(n=c;n<c+d;n++)e+=String.fromCharCode(b.getUint8(n));return e}function b(b,d){if("Exif"!=c(b,d,4))return!1;var e,f,h,k,l=d+6;if(18761==b.getUint16(l))e=!1;else if(19789==b.getUint16(l))e=!0;else return!1;if(42!=
b.getUint16(l+2,!e))return!1;f=b.getUint32(l+4,!e);if(8>f)return!1;f=g(b,l,l+f,v,e);if(f.ExifIFDPointer)for(h in k=g(b,l,l+f.ExifIFDPointer,r,e),k){switch(h){case "LightSource":case "Flash":case "MeteringMode":case "ExposureProgram":case "SensingMethod":case "SceneCaptureType":case "SceneType":case "CustomRendered":case "WhiteBalance":case "GainControl":case "Contrast":case "Saturation":case "Sharpness":case "SubjectDistanceRange":case "FileSource":k[h]=t[h][k[h]];break;case "ExifVersion":case "FlashpixVersion":k[h]=
String.fromCharCode(k[h][0],k[h][1],k[h][2],k[h][3]);break;case "ComponentsConfiguration":k[h]=t.Components[k[h][0]]+t.Components[k[h][1]]+t.Components[k[h][2]]+t.Components[k[h][3]]}f[h]=k[h]}if(f.GPSInfoIFDPointer)for(h in e=g(b,l,l+f.GPSInfoIFDPointer,u,e),e){switch(h){case "GPSVersionID":e[h]=e[h][0]+"."+e[h][1]+"."+e[h][2]+"."+e[h][3]}f[h]=e[h]}return f}var d=function(b){if(b instanceof d)return b;if(!(this instanceof d))return new d(b);this.EXIFwrapped=b};"undefined"!==typeof p?("undefined"!==
typeof f&&f.exports&&(p=f.exports=d),p.EXIF=d):this.EXIF=d;var r=d.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",
34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",
41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},v=d.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",
258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",
271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},u=d.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",
23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},t=d.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},
LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",
5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",
69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",
95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},
GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}},x={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",
105:"headline",116:"copyright",15:"category"};d.getData=function(b,c){if((b instanceof Image||b instanceof HTMLImageElement)&&!b.complete)return!1;b.exifdata?c&&c.call(b):h(b,c);return!0};d.getTag=function(b,c){if(b.exifdata)return b.exifdata[c]};d.getAllTags=function(b){if(!b.exifdata)return{};var c;b=b.exifdata;var d={};for(c in b)b.hasOwnProperty(c)&&(d[c]=b[c]);return d};d.pretty=function(b){if(!b.exifdata)return"";var c;b=b.exifdata;var d="";for(c in b)b.hasOwnProperty(c)&&(d="object"==typeof b[c]?
b[c]instanceof Number?d+(c+" : "+b[c]+" ["+b[c].numerator+"/"+b[c].denominator+"]\r\n"):d+(c+" : ["+b[c].length+" values]\r\n"):d+(c+" : "+b[c]+"\r\n"));return d};d.readFromBinaryFile=function(b){return m(b)};"function"===typeof define&&define.amd&&define("exif-js",[],function(){return d})}).call(this)})},"url:sixmaps/app/App.html":'\x3cdiv style\x3d"position:relative; top:0px; left:0px; width: 100%; height: 100%; overflow: hidden;"\x3e\r\n\x3cdiv data-dojo-attach-point\x3d"mapNode" id\x3d"${id}_mapNode"\r\n\tstyle\x3d"position: absolute; background: white; top: 0px; left: 0px; height: 100%; width: 100%; z-index: 0;"\x3e\r\n\x3c/div\x3e\r\n\x3cdiv data-dojo-attach-point\x3d"printPreviewNode"\r\n\tstyle\x3d"position: absolute; top: 20px; right: 20px; display: none"\r\n\tclass\x3d"sixmaps_app_App_PrintPreview"\x3e\r\n\t\x3cdiv onclick\x3d"print()"\x3ePrint\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-event\x3d"onclick:closePrintPreview"\x3eClose\x3c/div\x3e\r\n\x3c/div\x3e\r\n\x3cdiv data-dojo-attach-point\x3d"closePrintPreviewNode" data-dojo-attach-event\x3d"onclick:closePrintPreview"\r\n\tstyle\x3d"position: absolute; top: 20px; right: 20px; display: none"\r\n\tclass\x3d"sixmaps_app_App_PrintPreview"\x3eClose\x3c/div\x3e\r\n\x3cdiv data-dojo-attach-point\x3d"mainWindowNode" class\x3d"sixmaps_app_App_mainWindow"\r\n\tstyle\x3d"width: 100%; height: 100%;"\x3e\r\n\x3cdiv class\x3d"brandingPane"\x3e\r\n\t\x3cdiv class\x3d"brandingLogoPane" data-dojo-attach-point\x3d"brandingLogoPane"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"channelNameNode" class\x3d"channelNamePane"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n\x3cdiv data-dojo-attach-point\x3d"sideBarMenuNode"\r\n\tdata-dojo-type\x3d"sixmaps.dijits.Toolbar"\x3e\x3c/div\x3e\r\n\x3cdiv data-dojo-attach-point\x3d"baseMapContainerNode"\r\n\tclass\x3d"baseMapContainer noFade"\x3e\x3c/div\x3e\r\n\x3cdiv data-dojo-attach-point\x3d"tocContainerNode" class\x3d"tocContainer noFade"\x3e\x3c/div\x3e\r\n\r\n\x3cdiv data-dojo-attach-point\x3d"toolHelpPaneNode" title\x3d"Tool Help"\r\n\tclass\x3d"resultsPane"\r\n\tdata-dojo-props\x3d"visible:false, style: {position: \'absolute\', bottom: \'100px\', right: \'20px\'}"\r\n\tdata-dojo-type\x3d"sixmaps.dijits.TitlePane"\r\n\x3e\x3c/div\x3e\r\n\r\n\x3cdiv data-dojo-attach-point\x3d"singleTakeMeToNode"\x3e\x3c/div\x3e\r\n\x3cdiv data-dojo-attach-point\x3d"miniSearchPane" style\x3d"visibility:hidden;" title\x3d"Open Searchbar" class\x3d"noFade glassPane miniSearchPane"\x3e\x3ci data-dojo-attach-point\x3d"miniSearch" class\x3d"icon-search miniSearch"\x3e\x3c/i\x3e\x3c/div\x3e\r\n\x3cdiv data-dojo-attach-point\x3d"miniDockEyeOpen" style\x3d"visibility:hidden;" title\x3d"Open Toolbar" class\x3d"noFade miniDockEye glassPane"\x3e\x3ci class\x3d"icon-wrench"\x3e\x3c/i\x3e\x3c/div\x3e\r\n\x3cdiv data-dojo-attach-point\x3d"miniSidebar" class\x3d"noFade glassPane miniSidebar" style\x3d"visibility:hidden;"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"miniMapContents" title\x3d"Open Map Contents" class\x3d"miniMapContents"\x3e\x3ci class\x3d"icon-reorder"\x3e\x3c/i\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"miniBasemaps" title\x3d"Open Basemaps" class\x3d"miniBasemaps"\x3e\x3ci class\x3d"icon-picture"\x3e\x3c/i\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n\x3cdiv data-dojo-attach-point\x3d"miniMapSlider" style\x3d"visibility:hidden;" class\x3d"miniMapSlider noFade glassPane"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"miniMapSliderUp" title\x3d"Zoom In" class\x3d"miniMapSliderUp"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"miniMapSliderDown" title\x3d"Zoom Out" class\x3d"miniMapSliderDown"\x3e\x3ci class\x3d"icon-minus"\x3e\x3c/i\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n\x3cdiv data-dojo-attach-point\x3d"dockToolbarPaneNode" class\x3d"noFade"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"dockeyeNode"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"miniDockEyeClose" title\x3d"Close Toolbar" class\x3d"noFade miniDockEyeClose glassPane"\x3e\x3ci class\x3d"icon-chevron-up"\x3e\x3c/i\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n\x3cdiv data-dojo-attach-point\x3d"mapScaleNode" class\x3d"mapScale noFade""\x3e\x3c/div\x3e\r\n\x3cdiv data-dojo-attach-point\x3d"mapUpdatingNode" class\x3d"noFade"\r\n\tstyle\x3d"display:none;position: absolute; bottom: 18px; left:0px;right:0px;text-align:center;"\x3e\x3cspan class\x3d\'dojoxGridLoading\'\x3e\x3c/span\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/form/templates/Button.html":'\x3cspan class\x3d"dijit dijitReset dijitInline" role\x3d"presentation"\r\n\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonNode"\r\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" role\x3d"presentation"\r\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode,focusNode"\r\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitToggleButtonIconChar"\x3e\x26#x25CF;\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tid\x3d"${id}_label"\r\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\x3e\x3c/span\r\n\t\x3e\x3c/span\r\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen"\r\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick"\r\n\t\ttabIndex\x3d"-1" aria-hidden\x3d"true" data-dojo-attach-point\x3d"valueNode"\r\n/\x3e\x3c/span\x3e\r\n',
"url:esri/core/request/iframe.html":'\x3c!DOCTYPE html\x3e\r\n\x3chtml\x3e\r\n\x3chead\x3e\r\n  \x3cmeta http-equiv\x3d"Content-Security-Policy" content\x3d"default-src \'none\'; script-src * \'unsafe-inline\'"\x3e\r\n\r\n  \x3cscript\x3e\r\n    var dojoConfig \x3d {\r\n      async: true,\r\n      baseUrl: "../../../dojo/",\r\n      has: {\r\n        "csp-restrictions": true,\r\n        "dojo-preload-i18n-Api": false\r\n      }\r\n    };\r\n  \x3c/script\x3e\r\n  \x3c!--\r\n  This src is relative to this page and assumes dojo is a sibling to esri.\r\n  It is updated when this file is set as the iframe\'s `srcdoc` value.\r\n  --\x3e\r\n  \x3cscript src\x3d"../../../dojo/dojo.js"\x3e\x3c/script\x3e\r\n\r\n  \x3cscript\x3e\r\n    function windowMessageHandler(event) {\r\n      window.removeEventListener("message", windowMessageHandler);\r\n\r\n      var port \x3d event.ports[0];\r\n\r\n      require([\r\n        "dojo/request/script"\r\n      ], function(script) {\r\n        port.postMessage("ready");\r\n\r\n        port.addEventListener("message", function(event) {\r\n          var data \x3d event.data;\r\n          script.get(data.url, data.options)\r\n              .then(function(response) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  response: response\r\n                });\r\n              })\r\n              .otherwise(function(error) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  isError: true,\r\n                  message: error.message\r\n                });\r\n              });\r\n        });\r\n        port.start();\r\n      });\r\n    }\r\n\r\n    window.addEventListener("message", windowMessageHandler);\r\n  \x3c/script\x3e\r\n\x3c/head\x3e\r\n\x3cbody\x3e\r\n\x3c/body\x3e\r\n\x3c/html\x3e\r\n',
"url:dijit/templates/Dialog.html":'\x3cdiv class\x3d"dijitDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n\t\t\t\trole\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\x3c/div\x3e\r\n\t${!actionBarTemplate}\r\n\x3c/div\x3e\r\n\r\n',
"url:dijit/form/templates/TextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft" id\x3d"widget_${id}" role\x3d"presentation"\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\r\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\r\n\t/\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',"url:dijit/templates/Tooltip.html":'\x3cdiv class\x3d"dijitTooltip dijitTooltipLeft" id\x3d"dojoTooltip" data-dojo-attach-event\x3d"mouseenter:onMouseEnter,mouseleave:onMouseLeave"\r\n\t\x3e\x3cdiv class\x3d"dijitTooltipConnector" data-dojo-attach-point\x3d"connectorNode"\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d"dijitTooltipContainer dijitTooltipContents" data-dojo-attach-point\x3d"containerNode" role\x3d\'alert\'\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
"url:dijit/form/templates/ValidationTextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tid\x3d"widget_${id}" role\x3d"presentation"\r\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t/\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\r\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\r\n\t/\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
"url:sixmaps/dijits/Help.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"tcInfo" style\x3d"display:block;" \x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"dijit.layout.TabContainer" controllerWidget\x3d"dijit.layout.TabController" doLayout\x3d"false" data-dojo-attach-point\x3d"embeddedTabContainer"\x3e\r\n\t\t\t\x3cdiv data-dojo-type\x3d"dijit.layout.ContentPane" title\x3d"Welcome" data-dojo-attach-point\x3d"welcomeTab" class\x3d"welcomeSplash"\x3e\r\n\t\t\t\t\x3cp\x3eWelcome to \x3cb\x3eSIX Maps\x3c/b\x3e, an online mapping tool for NSW.\x3c/p\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"serviceNotification" class\x3d"error" style\x3d"display:none;font-weight:bold;font-style:italic;color:orange"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"browserMsgTab"\x3eABC\x3c/div\x3e\r\n\t\t\t\t\x3cp data-dojo-attach-point\x3d"loadTermsAndConditions"\x3e\x3ca href\x3d"#"\x3e\x3cb\x3eSIX Maps\x3c/b\x3e Terms \x26 Conditions\x3c/a\x3e\x3c/p\x3e\r\n\t\t\t\t\x3cp\x3e\x3ca href\x3d"https://www.spatial.nsw.gov.au/__data/assets/pdf_file/0005/216383/SIXMapsFAQ.pdf" target\x3d"_blank"\x3e\x3cb\x3eSIX Maps\x3c/b\x3e Frequently Asked Questions\x3c/a\x3e\x3c/p\x3e\r\n\t\t\t\t\x3cp\x3e\x3cb\x3eStart-up preferences:\x3c/b\x3e\x3c/p\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"mapExtentConfig" data-dojo-type\x3d"sixmaps.map.MapExtentConfigStore"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cbr/\x3e\x3cinput class\x3d"showHelp" data-dojo-attach-point\x3d"checkboxNode" name\x3d"checkboxNode" id\x3d"${id}_checkboxNode" data-dojo-type\x3d"dijit.form.CheckBox"\r\n\t\t\t\t\tdata-dojo-attach-event\x3d"onChange:checkChanged"\x3e\r\n\t\t\t\t\x3clabel for\x3d"${id}_checkboxNode"\x3e\r\n\t\t\t\t\tDon\'t show help again on reload\r\n\t\t\t\t\x3c/label\x3e\x3cbr /\x3e\r\n\t\t\t\t\x3cbr /\x3e\r\n\t\t\t\t\x3cdiv class\x3d"LPI_Logo"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-type\x3d"dijit.layout.ContentPane" title\x3d"Help \x26 Tips" data-dojo-attach-point\x3d"helpTab" style\x3d"width:auto;"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-type\x3d"dijit.layout.BorderContainer" style\x3d"width:525px;height:350px;" gutters\x3d"false"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-type\x3d"dijit.layout.ContentPane" region\x3d"left" class\x3d"helpLeft"\x3e\r\n\t\t\t\t\t\t\x3cul type\x3d"circle" class\x3d"helpList" data-dojo-attach-point\x3d"helpList" data-dojo-attach-event\x3d"onclick:listItemClick"\x3e\r\n\t\t\t\t\t\t\t\x3cli data-helpTopic\x3d"browserCompat"\x3eBrowser Compatibility\x3c/li\x3e\r\n\t\t\t\t\t\t\t\x3cli data-helpTopic\x3d"singleSearch"\x3eSearch Bar\x3c/li\x3e\r\n\t\t\t\t\t\t\t\x3cli data-helpTopic\x3d"navHelp"\x3eNavigation\x3c/li\x3e\r\n\t\t\t\t\t\t\t\x3cli data-helpTopic\x3d"dockToolbarHelp"\x3eDock Toolbar\x3c/li\x3e\r\n\t\t\t\t\t\t\x3c/ul\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-type\x3d"dijit.layout.StackContainer" region\x3d"center" class\x3d"helpRight" data-dojo-attach-point\x3d"helpStackContainer"\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-type\x3d"dijit.layout.ContentPane" data-helpTopic\x3d"navHelp" class\x3d"help"\x3e\r\n\t\t\t\t\t\t\t\x3cdl\x3e\r\n\t\t\t\t\t\t\t\t\x3cdt\x3eZoom In/Out\x3c/dt\x3e\x3cdd\x3eRoll mouse wheel forward/back\x3c/dd\x3e\x3cbr /\x3e\r\n\t\t\t\t\t\t\t\t\x3cdt\x3eZoom Slider\x3c/dt\x3e\x3cdd\x3eClick the arrow at the top or left click and hold left mouse button down on the controller and drag up/down.\x3c/dd\x3e\x3cbr /\x3e\r\n\t\t\t\t\t\t\t\t\x3cdt\x3eZoom In with box\x3c/dt\x3e\x3cdd\x3eHold shift + left mouse click \x26 drag a box.\x3c/dd\x3e\x3cbr /\x3e\r\n\t\t\t\t\t\t\t\t\x3cdt\x3eZoom Out with box\x3c/dt\x3e\x3cdd\x3eHold shift + ctrl + left mouse click \x26 drag a box.\x3c/dd\x3e\x3cbr /\x3e\r\n\t\t\t\t\t\t\t\t\x3cdt\x3ePan\x3c/dt\x3e\x3cdd\x3eClick and hold left mouse button, then drag to pan. The mouse cursor will change to a 4 arrow pointer.\x3c/dd\x3e\x3cbr /\x3e\r\n\t\t\t\t\t\t\t\x3c/dl\x3e\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-type\x3d"dijit.layout.ContentPane" data-helpTopic\x3d"dockToolbarHelp" class\x3d"help"\x3e\r\n\t\t\t\t\t\t\t\x3cimg src\x3d"${imagesUrl}HelpContent/dockToolbar.png" class\x3d"helpToolImage" alt\x3d"" /\x3e\x3cbr /\x3e\r\n\t\t\t\t\t\t\t\x3cp\x3e When a tool is active, the tool\'s icon will have an orange light above it. To deactivate that tool, either click the icon again,close the tool pane, or activate another tool.\x3c/p\x3e\r\n\t\t\t\t\t\t\t\x3cimg src\x3d"${imagesUrl}HelpContent/dockToolbarToolActive.png" class\x3d"helpToolImage" alt\x3d"" /\x3e\x3cbr /\x3e\r\n\t\t\t\t\t\t\t\x3cdl\x3e\r\n\t\t\t\t\t\t\t\t\x3cdt\x3eZoom to NSW\x3c/dt\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cdd\x3e\x3cbr/\x3e\x3cimg src\x3d"${baseUrl}dijits/tools/images/nsw.png" style\x3d"width:45px;" alt\x3d"" /\x3e\x3cbr /\x3e\r\n\t\t\t\t\t\t\t\t\t\tLeft click on Zoom to NSW to change map extent to whole of NSW\r\n\t\t\t\t\t\t\t\t\t\x3c/dd\x3e\x3cbr/\x3e\r\n\t\t\t\t\t\t\t\t\x3cdt\x3eZoom to Prev/Next Extent\x3c/dt\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cdd\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3cul class\x3d"helpContentList"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3cli\x3e\x3cbr/\x3e\x3cimg src\x3d"${baseUrl}dijits/tools/images/extent_prev.png" style\x3d"width:45px;" alt\x3d"" /\x3e\x3cbr /\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\tLeft clicking on the Zoom to Previous Extent tool will return the map to the previous extent(if available).\r\n\t\t\t\t\t\t\t\t\t\t\t\tSubsequent clicks will continue to cycle through previous extents.\r\n\t\t\t\t\t\t\t\t\t\t\t\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3cli\x3e\x3cimg src\x3d"${baseUrl}dijits/tools/images/extent_next.png" style\x3d"width:45px;" alt\x3d"" /\x3e\x3cbr /\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\tLeft clicking on the Zoom to Next Extent tool will take the map to the next extent(if available).\r\n\t\t\t\t\t\t\t\t\t\t\t\tSubsequent clicks will continue to cycle through the next extents.\r\n\t\t\t\t\t\t\t\t\t\t\t\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3c/ul\x3e\r\n\t\t\t\t\t\t\t\t\t\x3c/dd\x3e\r\n\t\t\t\t\t\t\t\t\x3cdt\x3eHelp\x3c/dt\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cdd\x3e\x3cbr /\x3e\x3cimg src\x3d"${baseUrl}dijits/tools/images/question.png" style\x3d"width:45px;" alt\x3d"" /\x3e\x3cbr /\x3e\r\n\t\t\t\t\t\t\t\t\t\tLeft clicking on the Help tool will open this Welcome \x26 Help pane.\r\n\t\t\t\t\t\t\t\t\t\x3c/dd\x3e\r\n\t\t\t\t\t\t\t\x3c/dl\x3e\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-type\x3d"dijit.layout.ContentPane" data-helpTopic\x3d"singleSearch" class\x3d"help"\x3e\r\n\t\t\t\t\t\t\t\x3cul class\x3d"helpContentList"\x3e\r\n\t\t\t\t\t\t\t\t\x3cli\x3e\x3cimg src\x3d"${imagesUrl}HelpContent/searchBar.png" class\x3d"helpImage" alt\x3d"" /\x3e\x3cbr /\x3e\r\n\t\t\t\t\t\t\t\t\tTo perform a search, enter your query and hit enter, or click \'Search\'.\r\n\t\t\t\t\t\t\t\t\tYou can search using any of the following criteria:\r\n\t\t\t\t\t\t\t\t\t\x3cul\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3cli\x3eLot/DP (e.g. 1/1000)\x3c/li\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3cli\x3eSuburb (e.g. Wollstonecraft)\x3c/li\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3cli\x3eTown (e.g. Singleton)\x3c/li\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3cli\x3eAddress (e.g. 68 Pitt St Sydney)\x3c/li\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3cli\x3eSurvey Mark (e.g. PM100)\x3c/li\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3cli\x3eAny named topographic point of interest (e.g. Homebush Bay)\x3c/li\x3e\r\n\t\t\t\t\t\t\t\t\t\x3c/ul\x3e\r\n\t\t\t\t\t\t\t\t\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\t\t\t\t\t\t\x3cli\x3eIf the search finds a unique feature, the map will zoom directly to the location and highlight the feature.\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\t\t\t\t\t\t\x3cli\x3eIf multiple close matches are found, the Advanced Search pane will open with the results shown, and the map will zoom to the location and highlight the feature of the first record in the result list.\x3c/li\x3e\r\n\t\t\t\t\t\t\t\x3c/ul\x3e\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-type\x3d"dijit.layout.ContentPane" data-helpTopic\x3d"browserCompat" class\x3d"help"\x3e\r\n\t\t\t\t\t\t\t\x3cul class\x3d"helpContentList"\x3e\r\n\t\t\t\t\t\t\t\t\x3cli\x3eSIX Maps has been designed for modern browsers.\r\n\t\t\t\t\t\t\t\t\tThe recommended browsers are:\r\n\t\t\t\t\t\t\t\t\t\x3cul\x3e\x3cbr /\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3cli\x3e\x3ca href\x3d"//www.mozilla.org/en-US/firefox/new/" target\x3d"_blank"\x3e\x3cimg src\x3d"${imagesUrl}HelpContent/firefox.png" /\x3e Mozilla Firefox\x3c/a\x3e\x3c/li\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3cli\x3e\x3ca href\x3d"//www.google.com/chrome/" target\x3d"_blank"\x3e\x3cimg src\x3d"${imagesUrl}HelpContent/chrome.png" /\x3e Google Chrome\x3c/a\x3e\x3c/li\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3cli\x3e\x3ca href\x3d"//www.microsoft.com/en-au/download/internet-explorer.aspx" target\x3d"_blank"\x3e\x3cimg src\x3d"${imagesUrl}edge.png" /\x3e Internet Explorer 11 or Microsoft Edge\x3c/a\x3e\x3c/a\x3e\x3c/li\x3e\r\n\t\t\t\t\t\t\t\t\t\x3c/ul\x3e\r\n\t\t\t\t\t\t\t\t\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\t\t\t\t\t\t\x3cli\x3eSIX Maps is supported in Internet Explorer versions 8+, and Apple Safari. However, for best performance the use of the above browsers is recommended. \x3c/li\x3e\x3cbr /\x3e\r\n\t\t\t\t\t\t\t\x3c/ul\x3e\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-type\x3d"dijit.layout.ContentPane" title\x3d"Contact Us/Feedback" doLayout\x3d"false" data-dojo-attach-point\x3d"feedbackTab"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-type\x3d"dijit.layout.StackContainer" data-dojo-attach-point\x3d"stackContainer" doLayout\x3d"false"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-type\x3d"dijit.layout.ContentPane" doLayout\x3d"false"\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-type\x3d"dijit.form.Form" data-dojo-attach-point\x3d"feedbackForm" data-dojo-attach-event\x3d"onSubmit:formSubmit" action\x3d"" selected\x3d"true"\x3e\r\n\t\t\t\t\t\t\t\x3cp\x3e\r\n\t\t\t\t\t\t\t\tIf you require assistance using SIX Maps, or would like to\x3cbr/\x3e\r\n\t\t\t\t\t\t\t\tprovide feedback,\tplease contact us via the \x3ca href\x3d"https://customerhub.spatial.nsw.gov.au/servicedesk/customer/portals" target\x3d"_blank"\x3eSpatial Services\x3cbr/\x3eCustomer Hub\x3c/a\x3e.\r\n\t\t\t\t\t\t\t\x3c/p\x3e\r\n\t\t\t\t\t\t\t\x3cp\x3e\r\n\t\t\t\t\t\t\t\tTo use the Spatial Services Customer Hub, simply create a\x3cbr/\x3e\r\n\t\t\t\t\t\t\t\tfree individual user profile using a one-time username and\x3cbr/\x3e\r\n\t\t\t\t\t\t\t\tpassword, then submit a request. Through a ticketed system,\x3cbr/\x3e\r\n\t\t\t\t\t\t\t\tthis will allow customers to track the status of their requests\x3cbr/\x3e\r\n\t\t\t\t\t\t\t\tat any given point in time.\r\n\t\t\t\t\t\t\t\x3c/p\x3e\r\n\t\t\t\t\t\t\t\x3cdiv style\x3d"text-align: center;"\x3e\r\n\t\t\t\t\t\t\t\t\x3cbutton data-dojo-type\x3d"dijit.form.Button" type\x3d"button" name\x3d"ssHub" value\x3d"https://customerhub.spatial.nsw.gov.au/servicedesk/customer/portals"\r\n\t\t\t\t\t\t\t\t\tdata-dojo-attach-event\x3d"onClick:ssHubOnClick"\x3eVisit the Spatial Services Customer Hub\x3c/button\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"feedbackSubmitted" data-dojo-type\x3d"dijit.layout.ContentPane" doLayout\x3d"false"\x3e\r\n\t\t\t\t\t\t\x3cp data-dojo-attach-point\x3d"feedbackMessage"\x3eThankyou for your feedback...\x3c/p\x3e\r\n\t\t\t\t\t\t\x3cdiv style\x3d"text-align:center;"\x3e\r\n\t\t\t\t\t\t\x3cbutton data-dojo-type\x3d"dijit.form.Button" type\x3d"button" name\x3d"feedbackSubmitted"\r\n\t\t\t\t\t\t\tdata-dojo-attach-event\x3d"onClick:feedbackReset"\x3eOK\x3c/button\x3e\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-type\x3d"dijit.layout.ContentPane" title\x3d"Contributors"  style\x3d"padding-right: 0;" doLayout\x3d"false" data-dojo-attach-point\x3d"contributorsTab"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-type\x3d"dijit.layout.ContentPane" style\x3d"max-height: 400px; overflow-y: auto; display: block;" doLayout\x3d"false"\x3e\r\n\t\t\t\t\t\x3ch3\x3eCadastral And Imagery Data\x3c/h3\x3e\r\n\t\t\t\t\t\x3cp\x3e\x3cb\x3eDCS Spatial Services\x3c/b\x3e\x3cbr/\x3e\r\n\t\t\t\t\t\x3cb\x3eNSW Department of Customer Services\x3c/b\x3e\x3cbr/\x3e\r\n\t\t\t\t\t346 Panorama Ave, Bathurst NSW 2795 \x3cbr/\x3e\r\n\t\t\t\t\tCustomer Hub: \x3ca href\x3d"https://www.spatial.nsw.gov.au/contact_us" target\x3d"_blank" title\x3d"Contact us - DCS Spatial Services"\x3ehttps://www.spatial.nsw.gov.au/contact_us\x3c/a\x3e \x3cbr/\x3e\r\n\t\t\t\t\tT: 1300 789 866 \x3cbr/\x3e\r\n\t\t\t\t\t\x3c/p\x3e\r\n\t\t\t\t\t\x3cbr/\x3e\r\n\t\t\t\t\t\x3ch3\x3eAUSIMAGE Product\x3c/h3\x3e\r\n\t\t\t\t\t\x3cp\x3e\x3cb\x3eJacobs Group (Australia) Pty Ltd\x3c/b\x3e\x3cbr/\x3e\r\n\t\t\t\t\t7/177 Pacific Hwy, North Sydney, NSW 2060  \x3cbr/\x3e\r\n\t\t\t\t\tPO Box 632, North Sydney, NSW, 2059, Australia  \x3cbr/\x3e\r\n\t\t\t\t\tM: +61 0412 242 792  \x3cbr/\x3e\r\n\t\t\t\t\tE: richard.lemon@jacobs.com  \x3cbr/\x3e\r\n\t\t\t\t\tW: www.jacobs.com  \x3cbr/\x3e\r\n\t\t\t\t\tContact: Richard Lemon\x3cbr/\x3e\r\n\t\t\t\t\tPrincipal Spatial Consultant | Registered Surveyor\x3cbr/\x3e\r\n\t\t\t\t\t\x3c/p\x3e\r\n\t\t\t\t\t\x3cbr/\x3e\r\n\t\t\t\t\t\x3ch3\x3eSpot 5 Imagery\x3c/h3\x3e\r\n\t\t\t\t\t\x3cp\x3e\x3cb\x3eAstrium GEO-Information Services\x3c/b\x3e\x3cbr/\x3e\r\n\t\t\t\t\tContact :-  Rob Lees\x3cbr/\x3e\r\n\t\t\t\t\tManaging Director\x3cbr/\x3e\r\n\t\t\t\t\t23 Torrens Street \x3cbr/\x3e\r\n\t\t\t\t\tBraddon ACT 2612\x3cbr/\x3e\r\n\t\t\t\t\tPO Box 993\x3cbr/\x3e\r\n\t\t\t\t\tCivic Square, ACT 2608\x3cbr/\x3e\r\n\t\t\t\t\tT: +61 (0)2 6247 9667\x3cbr/\x3e\r\n\t\t\t\t\tF: +61 (0)2 6262 6676\x3cbr/\x3e\r\n\t\t\t\t\tE: sales@spotimage.com.au\x3cbr/\x3e\r\n\t\t\t\t\tW: www.spotimage.com.au\r\n\t\t\t\t\t\x3c/p\x3e\r\n\t\t\t\t\t\x3cbr/\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n \x3c/div\x3e\r\n ',
"url:dijit/form/templates/CheckBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline" role\x3d"presentation"\r\n\t\x3e\x3cinput\r\n\t \t${!nameAttrSetting} type\x3d"${type}" role\x3d"${type}" aria-checked\x3d"false" ${checkedAttrSetting}\r\n\t\tclass\x3d"dijitReset dijitCheckBoxInput"\r\n\t\tdata-dojo-attach-point\x3d"focusNode"\r\n\t \tdata-dojo-attach-event\x3d"ondijitclick:_onClick"\r\n/\x3e\x3c/div\x3e\r\n',"url:dijit/layout/templates/TabContainer.html":'\x3cdiv class\x3d"dijitTabContainer"\x3e\r\n\t\x3cdiv class\x3d"dijitTabListWrapper" data-dojo-attach-point\x3d"tablistNode"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"tablistSpacer" class\x3d"dijitTabSpacer ${baseClass}-spacer"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTabPaneWrapper ${baseClass}-container" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/Menu.html":'\x3ctable class\x3d"dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable" role\x3d"menu" tabIndex\x3d"${tabIndex}"\r\n\t   cellspacing\x3d"0"\x3e\r\n\t\x3ctbody class\x3d"dijitReset" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/tbody\x3e\r\n\x3c/table\x3e\r\n',"url:dijit/templates/MenuItem.html":'\x3ctr class\x3d"dijitReset" data-dojo-attach-point\x3d"focusNode" role\x3d"menuitem" tabIndex\x3d"-1"\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemIconCell" role\x3d"presentation"\x3e\r\n\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitMenuItemIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemLabel" colspan\x3d"2" data-dojo-attach-point\x3d"containerNode,textDirNode"\r\n\t\trole\x3d"presentation"\x3e\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemAccelKey" style\x3d"display: none" data-dojo-attach-point\x3d"accelKeyNode"\x3e\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuArrowCell" role\x3d"presentation"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"arrowWrapper" style\x3d"visibility: hidden"\x3e\r\n\t\t\t\x3cspan class\x3d"dijitInline dijitIcon dijitMenuExpand"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan class\x3d"dijitMenuExpandA11y"\x3e+\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/td\x3e\r\n\x3c/tr\x3e\r\n',
"url:dijit/layout/templates/_TabButton.html":'\x3cdiv role\x3d"presentation" data-dojo-attach-point\x3d"titleNode,innerDiv,tabContent" class\x3d"dijitTabInner dijitTabContent"\x3e\r\n\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTabButtonIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\x3cspan data-dojo-attach-point\x3d\'containerNode,focusNode\' class\x3d\'tabLabel\'\x3e\x3c/span\x3e\r\n\t\x3cspan class\x3d"dijitInline dijitTabCloseButton dijitTabCloseIcon" data-dojo-attach-point\x3d\'closeNode\'\r\n\t\t  role\x3d"presentation"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d\'closeText\' class\x3d\'dijitTabCloseText\'\x3e[x]\x3c/span\r\n\t\t\t\t\x3e\x3c/span\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/layout/templates/ScrollingTabController.html":'\x3cdiv class\x3d"dijitTabListContainer-${tabPosition}" style\x3d"visibility:hidden"\x3e\r\n\t\x3cdiv data-dojo-type\x3d"dijit.layout._ScrollingTabControllerMenuButton"\r\n\t\t class\x3d"tabStripButton-${tabPosition}"\r\n\t\t id\x3d"${id}_menuBtn"\r\n\t\t data-dojo-props\x3d"containerId: \'${containerId}\', iconClass: \'dijitTabStripMenuIcon\',\r\n\t\t\t\t\tdropDownPosition: [\'below-alt\', \'above-alt\']"\r\n\t\t data-dojo-attach-point\x3d"_menuBtn" showLabel\x3d"false" title\x3d""\x3e\x26#9660;\x3c/div\x3e\r\n\t\x3cdiv data-dojo-type\x3d"dijit.layout._ScrollingTabControllerButton"\r\n\t\t class\x3d"tabStripButton-${tabPosition}"\r\n\t\t id\x3d"${id}_leftBtn"\r\n\t\t data-dojo-props\x3d"iconClass:\'dijitTabStripSlideLeftIcon\', showLabel:false, title:\'\'"\r\n\t\t data-dojo-attach-point\x3d"_leftBtn" data-dojo-attach-event\x3d"onClick: doSlideLeft"\x3e\x26#9664;\x3c/div\x3e\r\n\t\x3cdiv data-dojo-type\x3d"dijit.layout._ScrollingTabControllerButton"\r\n\t\t class\x3d"tabStripButton-${tabPosition}"\r\n\t\t id\x3d"${id}_rightBtn"\r\n\t\t data-dojo-props\x3d"iconClass:\'dijitTabStripSlideRightIcon\', showLabel:false, title:\'\'"\r\n\t\t data-dojo-attach-point\x3d"_rightBtn" data-dojo-attach-event\x3d"onClick: doSlideRight"\x3e\x26#9654;\x3c/div\x3e\r\n\t\x3cdiv class\x3d\'dijitTabListWrapper\' data-dojo-attach-point\x3d\'tablistWrapper\'\x3e\r\n\t\t\x3cdiv role\x3d\'tablist\' data-dojo-attach-event\x3d\'onkeydown:onkeydown\'\r\n\t\t\t data-dojo-attach-point\x3d\'containerNode\' class\x3d\'nowrapTabStrip\'\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/layout/templates/_ScrollingTabControllerButton.html":'\x3cdiv data-dojo-attach-event\x3d"ondijitclick:_onClick" class\x3d"dijitTabInnerDiv dijitTabContent dijitButtonContents"  data-dojo-attach-point\x3d"focusNode" role\x3d"button"\x3e\r\n\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitTabStripIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\x3cspan data-dojo-attach-point\x3d"containerNode,titleNode" class\x3d"dijitButtonText"\x3e\x3c/span\x3e\r\n\x3c/div\x3e',
"url:sixmaps/map/MapExtentConfigStore.html":'\x3cdiv\x3e\r\n\t\x3cdiv dojoType\x3d"dijit.form.Form" dojoAttachPoint\x3d"paramsForm"\x3e\r\n\t\t\x3ci style\x3d"display:inline-block; margin-bottom:5px;"\x3eInitial Map Extent\x3c/i\x3e\x3cbr/\x3e\r\n\t\t\x3cinput dojoType\x3d"dijit.form.RadioButton" id\x3d"${id}_stateWide" name\x3d"extentRadios" checked value\x3d"full" dojoAttachEvent\x3d"onChange:paramsFormChanged"/\x3e\r\n\t    \x3clabel for\x3d"${id}_stateWide"\x3e\r\n\t        state-wide\r\n\t    \x3c/label \x3e\r\n\t    \x3cinput dojoType\x3d"dijit.form.RadioButton" id\x3d"${id}_lastViewed" name\x3d"extentRadios" value\x3d"last" style\x3d"margin-left: 8px" dojoAttachEvent\x3d"onChange:paramsFormChanged"/\x3e\r\n\t    \x3clabel for\x3d"${id}_lastViewed"\x3e\r\n\t        last viewed\r\n\t    \x3c/label\x3e\r\n\t    \x3cspan dojoAttachPoint\x3d"currentLocationRadio"\x3e\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:sixmaps/dijits/Terms.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-type\x3d"dijit.layout.ContentPane" title\x3d"Terms and Conditions"\r\n\t\tdata-dojo-attach-point\x3d"termsTab" class\x3d"termsAndConditionsSplash"\x3e\r\n\t\x3cdiv class\x3d"tcInfo" style\x3d"display:block;" \x3e\r\n\t\x3ch1\x3eSpatial Information eXchange\x3c/h1\x3e\r\n\t\r\n\t\x3cp\x3eWelcome to the Department of Customer Service Spatial\r\n\tInformation eXchange. This portal is the new access channel to spatial\r\n\tinformation related applications published by the Department of Customer Service. Included at this site are viewing applications for both\r\n\timagery and standard mapping data.\x3c/p\x3e\r\n\t\r\n\t\x3cp class\x3d"warningSign"\x3eBefore proceeding, please read the following\r\n\tterms and conditions so you are aware of what we expect from you and,\r\n\tmore importantly, what you may expect from us.\x3c/p\x3e\r\n\t\r\n\t\x3cp\x3e\x3ca href\x3d"${termsUrl}" target\x3d"_blank"\x3eClick here to view SIX Terms and Conditions\x3c/a\x3e\x3c/p\x3e\r\n\t\r\n\t\x3ca data-dojo-attach-point\x3d"termsTop"\x3e\x3c/a\x3e\r\n\t\x3cinput data-dojo-type\x3d"dijit.form.CheckBox" name\x3d"readTermsCheckbox" id\x3d"termsReadCheck"\r\n\t\tchecked data-dojo-attach-event\x3d"onChange:readTermsOnClick" /\x3e\r\n\t\x3clabel for\x3d"termsReadCheck"\x3eI have read and agree to these SIX Terms and Conditions\x3c/label\x3e\r\n\t\x3ccenter\x3e\r\n\t\x3cbutton data-dojo-type\x3d"dijit.form.Button" type\x3d"button" name\x3d"acceptButton" data-dojo-attach-point\x3d"acceptButton"\r\n\t\tvalue\x3d"Submit" data-dojo-attach-event\x3d"onClick:acceptOnClick"\x3eI Accept\x3c/button\x3e\r\n\t\x3cbutton dojoType\x3d"dijit.form.Button" type\x3d"button" name\x3d"declineButton"\r\n\t\tvalue\x3d"Submit" data-dojo-attach-event\x3d"onClick:declineOnClick"\x3eDecline\x3c/button\x3e\r\n\t\x3c/center\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"Terms_Logo"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t',
"url:dijit/form/templates/DropDownButton.html":'\x3cspan class\x3d"dijit dijitReset dijitInline"\r\n\t\x3e\x3cspan class\x3d\'dijitReset dijitInline dijitButtonNode\'\r\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" data-dojo-attach-point\x3d"_buttonNode"\r\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"focusNode,titleNode,_arrowWrapperNode,_popupStateNode"\r\n\t\t\trole\x3d"button" aria-haspopup\x3d"true" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon"\r\n\t\t\t\tdata-dojo-attach-point\x3d"iconNode"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\r\n\t\t\t\tid\x3d"${id}_label"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitArrowButtonInner"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitArrowButtonChar"\x3e\x26#9660;\x3c/span\r\n\t\t\x3e\x3c/span\r\n\t\x3e\x3c/span\r\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen" tabIndex\x3d"-1"\r\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick" data-dojo-attach-point\x3d"valueNode" aria-hidden\x3d"true"\r\n/\x3e\x3c/span\x3e\r\n',
"url:dijit/form/templates/ComboButton.html":'\x3ctable class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tcellspacing\x3d\'0\' cellpadding\x3d\'0\' role\x3d"presentation"\r\n\t\x3e\x3ctbody role\x3d"presentation"\x3e\x3ctr role\x3d"presentation"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitStretch dijitButtonNode" data-dojo-attach-point\x3d"buttonNode" data-dojo-attach-event\x3d"ondijitclick:__onClick,onkeydown:_onButtonKeyDown"\r\n\t\t\x3e\x3cdiv id\x3d"${id}_button" class\x3d"dijitReset dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode"\r\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInline dijitButtonText" id\x3d"${id}_label" data-dojo-attach-point\x3d"containerNode" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd id\x3d"${id}_arrow" class\x3d\'dijitReset dijitRight dijitButtonNode dijitArrowButton\'\r\n\t\t\tdata-dojo-attach-point\x3d"_popupStateNode,focusNode,_buttonNode"\r\n\t\t\tdata-dojo-attach-event\x3d"onkeydown:_onArrowKeyDown"\r\n\t\t\ttitle\x3d"${optionsTitle}"\r\n\t\t\trole\x3d"button" aria-haspopup\x3d"true"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitArrowButtonInner" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitArrowButtonChar" role\x3d"presentation"\x3e\x26#9660;\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd style\x3d"display:none !important;"\r\n\t\t\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" data-dojo-attach-point\x3d"valueNode"\r\n\t\t\t\tclass\x3d"dijitOffScreen" aria-hidden\x3d"true" data-dojo-attach-event\x3d"onclick:_onClick"\r\n\t\t/\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\r\n\x3e\x3c/table\x3e\r\n',
"url:sixmaps/dijits/basemapMenuHelp.html":'\x3cdiv\x3e\r\n\t\x3cul class\x3d"helpContentList"\x3e\r\n\t\t\x3cli\x3e\x3cimg src\x3d"${imagesUrl}HelpContent/sidebar.png" class\x3d"helpImage" alt\x3d"" /\x3e\x3cbr /\x3e\r\n\t\t\tClick on the Basemap button to open the Basemap Menu. The menu can be closed by clicking the Basemaps button or anywhere outside the Basemaps pane.\r\n\t\t\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\x3cli\x3e\x3cimg src\x3d"${imagesUrl}HelpContent/basemapMenu.png" class\x3d"helpImage" alt\x3d"" /\x3e\x3cbr /\x3e\r\n\t\t\x3cli\x3eThe basemap menu shows the currently selected foreground and background basemaps. You can transition between these two basemaps using the slider, or by clicking on either the foreground or background tile.\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\x3cli\x3e\x3cimg src\x3d"${imagesUrl}HelpContent/basemapGallery.png" class\x3d"helpImage" alt\x3d"" /\x3e\x3cbr /\x3e\r\n\t\t\x3cli\x3eTo open the basemap gallery, click the "spanner" icon for the basemap you would like to change. To select a new basemap from the gallery, click on the basemap tile.\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\x3cli\x3e\x3cimg src\x3d"${imagesUrl}HelpContent/basemapPopup.png" class\x3d"helpImage" alt\x3d"" /\x3e\x3cbr /\x3e\r\n\t\tTo view the basemap details, click the "info" icon. Hovering the mouse on the basemap tiles in the gallery will open a popup menu containing a preview image and description of that basemap. \x3c/li\x3e\x3cbr /\x3e\r\n\t\t\x3cli\x3e\x3cimg src\x3d"${imagesUrl}HelpContent/basemapNA.png" class\x3d"helpImage" alt\x3d"" /\x3e\x3cbr /\x3e\r\n\t\tIf the preview image shows a blank white tile or a grey tile stating "Map data not yet available", there is no data at this scale and extent for that basemap. Try zooming out to find data at a higher scale.\x3c/li\x3e\x3cbr /\x3e\r\n\t\x3c/ul\x3e\r\n\x3c/div\x3e',
"url:dijit/form/templates/HorizontalSlider.html":'\x3ctable class\x3d"dijit dijitReset dijitSlider dijitSliderH" cellspacing\x3d"0" cellpadding\x3d"0" border\x3d"0" rules\x3d"none" data-dojo-attach-event\x3d"onkeydown:_onKeyDown, onkeyup:_onKeyUp"\r\n\trole\x3d"presentation"\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\t\x3e\x3ctd data-dojo-attach-point\x3d"topDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationT dijitSliderDecorationH"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderDecrementIconH" style\x3d"display:none" data-dojo-attach-point\x3d"decrementButton"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e-\x3c/span\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper" data-dojo-attach-event\x3d"press:_onClkDecBumper"\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3cinput data-dojo-attach-point\x3d"valueNode" type\x3d"hidden" ${!nameAttrSetting}\r\n\t\t\t/\x3e\x3cdiv class\x3d"dijitReset dijitSliderBarContainerH" role\x3d"presentation" data-dojo-attach-point\x3d"sliderBarContainer"\r\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" data-dojo-attach-point\x3d"progressBar" class\x3d"dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH" data-dojo-attach-event\x3d"press:_onBarClick"\r\n\t\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderMoveable dijitSliderMoveableH"\r\n\t\t\t\t\t\t\x3e\x3cdiv data-dojo-attach-point\x3d"sliderHandle,focusNode" class\x3d"dijitSliderImageHandle dijitSliderImageHandleH" data-dojo-attach-event\x3d"press:_onHandleClick" role\x3d"slider"\x3e\x3c/div\r\n\t\t\t\t\t\x3e\x3c/div\r\n\t\t\t\t\x3e\x3c/div\r\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" data-dojo-attach-point\x3d"remainingBar" class\x3d"dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH" data-dojo-attach-event\x3d"press:_onBarClick"\x3e\x3c/div\r\n\t\t\t\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper" data-dojo-attach-event\x3d"press:_onClkIncBumper"\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderIncrementIconH" style\x3d"display:none" data-dojo-attach-point\x3d"incrementButton"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e+\x3c/span\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\t\x3e\x3ctd data-dojo-attach-point\x3d"containerNode,bottomDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationB dijitSliderDecorationH"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\x3e\x3c/table\x3e\r\n',
"url:dijit/form/templates/VerticalSlider.html":'\x3ctable class\x3d"dijit dijitReset dijitSlider dijitSliderV" cellspacing\x3d"0" cellpadding\x3d"0" border\x3d"0" rules\x3d"none" data-dojo-attach-event\x3d"onkeydown:_onKeyDown,onkeyup:_onKeyUp"\r\n\trole\x3d"presentation"\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerV"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderIncrementIconV" style\x3d"display:none" data-dojo-attach-point\x3d"decrementButton"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e+\x3c/span\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3ccenter\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperV dijitSliderTopBumper" data-dojo-attach-event\x3d"press:_onClkIncBumper"\x3e\x3c/div\x3e\x3c/center\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd data-dojo-attach-point\x3d"leftDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationL dijitSliderDecorationV"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderDecorationC" style\x3d"height:100%;"\r\n\t\t\t\x3e\x3cinput data-dojo-attach-point\x3d"valueNode" type\x3d"hidden" ${!nameAttrSetting}\r\n\t\t\t/\x3e\x3ccenter class\x3d"dijitReset dijitSliderBarContainerV" role\x3d"presentation" data-dojo-attach-point\x3d"sliderBarContainer"\r\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" data-dojo-attach-point\x3d"remainingBar" class\x3d"dijitSliderBar dijitSliderBarV dijitSliderRemainingBar dijitSliderRemainingBarV" data-dojo-attach-event\x3d"press:_onBarClick"\x3e\x3c!--#5629--\x3e\x3c/div\r\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" data-dojo-attach-point\x3d"progressBar" class\x3d"dijitSliderBar dijitSliderBarV dijitSliderProgressBar dijitSliderProgressBarV" data-dojo-attach-event\x3d"press:_onBarClick"\r\n\t\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderMoveable dijitSliderMoveableV" style\x3d"vertical-align:top;"\r\n\t\t\t\t\t\t\x3e\x3cdiv data-dojo-attach-point\x3d"sliderHandle,focusNode" class\x3d"dijitSliderImageHandle dijitSliderImageHandleV" data-dojo-attach-event\x3d"press:_onHandleClick" role\x3d"slider"\x3e\x3c/div\r\n\t\t\t\t\t\x3e\x3c/div\r\n\t\t\t\t\x3e\x3c/div\r\n\t\t\t\x3e\x3c/center\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd data-dojo-attach-point\x3d"containerNode,rightDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationR dijitSliderDecorationV"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3ccenter\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperV dijitSliderBottomBumper" data-dojo-attach-event\x3d"press:_onClkDecBumper"\x3e\x3c/div\x3e\x3c/center\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerV"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderDecrementIconV" style\x3d"display:none" data-dojo-attach-point\x3d"incrementButton"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e-\x3c/span\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\x3e\x3c/table\x3e\r\n',
"url:dijit/templates/TooltipDialog.html":'\x3cdiv role\x3d"alertdialog" tabIndex\x3d"-1"\x3e\r\n\t\x3cdiv class\x3d"dijitTooltipContainer" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"contentsNode" class\x3d"dijitTooltipContents dijitTooltipFocusNode"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\r\n\t\t\t${!actionBarTemplate}\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTooltipConnector" role\x3d"presentation" data-dojo-attach-point\x3d"connectorNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/MenuSeparator.html":'\x3ctr class\x3d"dijitMenuSeparator" role\x3d"separator"\x3e\r\n\t\x3ctd class\x3d"dijitMenuSeparatorIconCell"\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorTop"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorBottom"\x3e\x3c/div\x3e\r\n\t\x3c/td\x3e\r\n\t\x3ctd colspan\x3d"3" class\x3d"dijitMenuSeparatorLabelCell"\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorTop dijitMenuSeparatorLabel"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorBottom"\x3e\x3c/div\x3e\r\n\t\x3c/td\x3e\r\n\x3c/tr\x3e\r\n',
"url:dijit/form/templates/Select.html":'\x3ctable class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tdata-dojo-attach-point\x3d"_buttonNode,tableNode,focusNode,_popupStateNode" cellspacing\x3d\'0\' cellpadding\x3d\'0\'\r\n\trole\x3d"listbox" aria-haspopup\x3d"true"\r\n\t\x3e\x3ctbody role\x3d"presentation"\x3e\x3ctr role\x3d"presentation"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitStretch dijitButtonContents" role\x3d"presentation"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitButtonText"  data-dojo-attach-point\x3d"containerNode,textDirNode" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitValidationContainer"\r\n\t\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t\t\t/\x3e\x3c/div\r\n\t\t\t\x3e\x3cinput type\x3d"hidden" ${!nameAttrSetting} data-dojo-attach-point\x3d"valueNode" value\x3d"${value}" aria-hidden\x3d"true"\r\n\t\t/\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode" role\x3d"presentation"\r\n\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitArrowButtonInner" value\x3d"\x26#9660; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t\t\t\t${_buttonInputDisabled}\r\n\t\t/\x3e\x3c/td\r\n\t\x3e\x3c/tr\x3e\x3c/tbody\r\n\x3e\x3c/table\x3e\r\n',
"url:sixmaps/dijits/MiniHelp.html":'\x3cdiv data-dojo-type\x3d"dijit.layout.ContentPane" title\x3d"Help" data-dojo-attach-point\x3d"helpTab"\x3e\r\n\t\x3cdiv data-dojo-type\x3d"dijit.layout.ContentPane" data-dojo-attach-point\x3d"helpContent" class\x3d"toolHelpContent"\x3e\x3c/div\x3e\r\n\t\x3cdiv style\x3d"width:100%;text-align:center;"\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"dijit.form.Button"  title\x3d"Help Topics" data-dojo-attach-event\x3d"onClick:showHelpTopics"\x3eHelp Topics\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"dijit.form.Button" title\x3d"Tool Feedback" data-dojo-attach-event\x3d"onClick:showToolFeedback"\x3eTool Feedback\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:sixmaps/dijits/tocHelp.html":'\x3cdiv\x3e\r\n\t\x3cul class\x3d"helpContentList"\x3e\r\n\t\t\x3cli\x3e\x3cimg src\x3d"${imagesUrl}HelpContent/sidebar.png" class\x3d"helpImage" alt\x3d"" /\x3e\x3cbr /\x3e\r\n\t\t\tClick on the Map Contents button to open the Map Contents menu. The menu can be closed by clicking the button or anywhere outside the Map Contents pane.\r\n\t\t\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\x3cli\x3e\x3cimg src\x3d"${imagesUrl}HelpContent/mapContents.png" class\x3d"helpImage" alt\x3d"" /\x3e\x3cbr /\x3e\r\n\t\t\tCheck the box next to your chosen layer to turn on the layer features. If they do not appear there may be no features available at your current scale, try zooming in.\r\n\t\t\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\x3cli\x3e\x3cimg src\x3d"${imagesUrl}HelpContent/mapContentsGraphics.png" class\x3d"helpImage" alt\x3d"" /\x3e\x3cbr /\x3e\r\n\t\t\tBy default the Map Contents will only display the current "Map Layers". However "Graphics Layers" will also be displayed upon performing drag \x26 drop of a new graphics layer. Refer to the "Drag \x26 Drop" help section.\r\n\t\t\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\x3cli\x3e\x3cimg src\x3d"${imagesUrl}HelpContent/mapContentsContextMenu.png" class\x3d"helpImage" alt\x3d"" /\x3e\x3cbr/\x3e\r\n\t\t\tClick on the arrow next to the map layer to access a context menu, from which you can change the transparency, zoom to the layer, view layer details, or remove the layer.\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\x3cli\x3e\x3cimg src\x3d"${imagesUrl}HelpContent/mapContentsTransparency.png" class\x3d"helpImage" alt\x3d"" /\x3e\x3cbr/\x3e\r\n\t\t\tMouse over the transparency option in the context menu to access the slider, with which you can change the transparency of the layer.\r\n\t\t\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\x3cli\x3eClick the Zoom to Layer option to zoom to the full extent of the layer features.\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\x3cli\x3eClick the Details option to open a new tab with information about that layer.\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\x3cli\x3eClick the Remove Layer option to remove the layer from the map. The layer will be removed for the duration of the session only. On refreshing the browser the removed layers will be available again in the Map Contents menu.\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\x3cli\x3e\x3cimg src\x3d"${imagesUrl}HelpContent/mapContentsDragDrop.png" class\x3d"helpImage" alt\x3d"" /\x3e\x3cbr/\x3e\r\n\t\t\tTo re-order layers, click and hold the layer label and drag it to the desired position. When released, the position will change in the list and the layer\'s features on the map will have been reordered. The new order will be saved for the duration of the session only. On refreshing the browser the layers will return to their default order.\r\n\t\t\x3c/li\x3e\x3cbr /\x3e\r\n\t\x3c/ul\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\r\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"contentNode"\r\n\t\t\tclass\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem"\r\n\t\t\t\t   tabindex\x3d"-1" aria-selected\x3d"false" id\x3d"${id}_label"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\r\n\t\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation"\r\n\t\t style\x3d"display: none;" aria-labelledby\x3d"${id}_label"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/Tree.html":'\x3cdiv role\x3d"tree"\x3e\r\n\t\x3cdiv class\x3d"dijitInline dijitTreeIndent" style\x3d"position: absolute; top: -9999px" data-dojo-attach-point\x3d"indentDetector"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTreeExpando dijitTreeExpandoLoading" data-dojo-attach-point\x3d"rootLoadingIndicator"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeContainer" role\x3d"presentation"\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:sixmaps/dijits/TitlePane.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-attach-event\x3d"onclick:_onTitleClick, onkeypress:_onTitleKey"\r\n\t\t\tclass\x3d"dijitTitlePaneTitle" data-dojo-attach-point\x3d"titleBarNode"\x3e\r\n\t\t\x3cdiv class\x3d"dijitTitlePaneTitleFocus" data-dojo-attach-point\x3d"focusNode"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitTitlePaneTextNode"\x3e\x3c/span\x3e\r\n\t\t\t\x3cimg src\x3d"${_blankGif}" alt\x3d"" data-dojo-attach-point\x3d"arrowNode" class\x3d"dijitArrowNode" role\x3d"presentation"/\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"arrowNodeInner" class\x3d"dijitArrowNodeInner" visibility\x3d"none"\x3e\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cspan data-dojo-attach-point\x3d"iconNode" class\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\x3cdiv class\x3d"dijitTitlePaneContentOuter" data-dojo-attach-point\x3d"hideNode" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv class\x3d"dijitReset" data-dojo-attach-point\x3d"wipeNode" role\x3d"presentation"\x3e\r\n\t\t\t\x3cdiv class\x3d"dijitTitlePaneContentInner" data-dojo-attach-point\x3d"containerNode" role\x3d"region" id\x3d"${id}_pane"\x3e\r\n\t\t\t\t\x3c!-- nested divs because wipeIn()/wipeOut() doesn\'t work right on node w/padding etc.  Put padding on inner div. --\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/TitlePane.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-attach-event\x3d"ondijitclick:_onTitleClick, onkeydown:_onTitleKey"\r\n\t\t\tclass\x3d"dijitTitlePaneTitle" data-dojo-attach-point\x3d"titleBarNode" id\x3d"${id}_titleBarNode"\x3e\r\n\t\t\x3cdiv class\x3d"dijitTitlePaneTitleFocus" data-dojo-attach-point\x3d"focusNode"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"arrowNode" class\x3d"dijitInline dijitArrowNode" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"arrowNodeInner" class\x3d"dijitArrowNodeInner"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitTitlePaneTextNode"\x3e\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTitlePaneContentOuter" data-dojo-attach-point\x3d"hideNode" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv class\x3d"dijitReset" data-dojo-attach-point\x3d"wipeNode" role\x3d"presentation"\x3e\r\n\t\t\t\x3cdiv class\x3d"dijitTitlePaneContentInner" data-dojo-attach-point\x3d"containerNode" role\x3d"region" id\x3d"${id}_pane" aria-labelledby\x3d"${id}_titleBarNode"\x3e\r\n\t\t\t\t\x3c!-- nested divs because wipeIn()/wipeOut() doesn\'t work right on node w/padding etc.  Put padding on inner div. --\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:sixmaps/dijits/tools/Help/AdvancedSearchHelp.html":'\x3cdiv class\x3d"help"\x3e\r\n\t\x3cul class\x3d"helpContentList"\x3e\r\n\t\t\x3cli\x3e\x3cimg src\x3d"${imagesUrl}advancedSearch.png" class\x3d"helpImage" alt\x3d"" /\x3e\x3cbr /\x3e\r\n\t\t\tTo open the Advanced Search pane, click on the \'Search\' dropdown button and select \'Advanced\'\r\n\t\t\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\x3cli\x3eSelect the tab that corresponds with the search you would like to perform.\x3c/li\x3e\r\n\t\x3c/ul\x3e\r\n\x3c/div\x3e',
"url:sixmaps/dijits/tools/Help/printPDFHelp.html":'\x3cdiv\x3e\r\n\t\x3cul class\x3d"helpContentList"\x3e\r\n\t\t\x3cli\x3e\x3cimg src\x3d"${baseUrl}dijits/tools/images/printPreview.png" style\x3d"width:45px;" class\x3d"helpImage" alt\x3d"" /\x3e\x3cbr /\x3e\r\n\t\t\tWhen the tool is activated, the Print/PDF pane will display. \r\n\t\t\tTo move the pane, click + hold the blue title bar and drag the pane.\r\n\t\t\x3c/li\x3e\r\n\t\t\x3cli\x3e\x3cimg src\x3d"${imagesUrl}printPDF.png" class\x3d"helpImage" alt\x3d"" /\x3e\x3cbr /\x3e\r\n\t\t\tThe Print/PDF Tool provides the ability to generate a print preview, which you can then print or view/save as a PDF file.\r\n\t\t\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\x3cli\x3e\r\n\t\t\tSelect a template from the drop down menu. Enter any desired information you would like on your map in the fields available. \r\n\t\t\tClick the "Preview" button to generate the print preview. Click the "Reset" button to clear the text in Title and Subtitle fields.\r\n\t\t\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\x3cli\x3e\x3cimg src\x3d"${imagesUrl}printPDFMenu.png" class\x3d"helpImage" alt\x3d"" /\x3e\x3cbr /\x3e\r\n\t\t\tOnce the preview has been generated, you may print the page using the regular browser print menu.\r\n\t\t\tHowever, for best results we recommend clicking the "Generate PDF" button, which will generate and open a PDF version of your map in a new window.\r\n\t\t\tFrom here you may save or print the PDF file as required.\r\n\t\t\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\x3cli\x3e\r\n\t\t\tTo return back to the map view, close the PDF file and click the "Close" button on the top left corner in the SIX Maps window.\r\n\t\t\x3c/li\x3e\r\n\t\x3c/ul\x3e\r\n\x3c/div\x3e',
"url:dijit/form/templates/DropDownBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tid\x3d"widget_${id}"\r\n\trole\x3d"combobox"\r\n\taria-haspopup\x3d"true"\r\n\tdata-dojo-attach-point\x3d"_popupStateNode"\r\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer\'\r\n\t\tdata-dojo-attach-point\x3d"_buttonNode" role\x3d"presentation"\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitArrowButtonInner" value\x3d"\x26#9660; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"button presentation" aria-hidden\x3d"true"\r\n\t\t\t${_buttonInputDisabled}\r\n\t/\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t/\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\r\n\t\t\x3e\x3cinput class\x3d\'dijitReset dijitInputInner\' ${!nameAttrSetting} type\x3d"${type}" autocomplete\x3d"off"\r\n\t\t\tdata-dojo-attach-point\x3d"textbox,focusNode" role\x3d"textbox"\r\n\t/\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
"url:sixmaps/dijits/takeMeTo/Help/AddressHelp.html":'\x3cdl\x3e\r\n\t\x3cdt\x3eAddress\x3c/dt\x3e\x3cbr /\x3e\r\n\t\x3cdd\x3e\x3cimg src\x3d"${apiUrl}sixmaps/dijits/takeMeTo/Help/Images/Address.png" class\x3d"helpImage" alt\x3d"" /\x3e\x3cbr /\x3e\r\n\t\t\x3cul class\x3d"helpContentList"\x3e\r\n\t\t\t\x3cli\x3eEnter Number, Road Name, Road Type, and Suburb or Postcode (Tip - You must enter a Road Name and either the Suburb or Postcode).\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\t\x3cli\x3eClick \'Search\', and a table will be added to the bottom of the pane containing the search results.\r\n\t\t\t\tIf there are no suitable results, the table will display \'No matching records found\'.\r\n\t\t\t\x3c/li\x3e\r\n\t\t\x3c/ul\x3e\r\n\t\x3c/dd\x3e\r\n\x3c/dl\x3e\r\n\r\n\t\t',
"url:sixmaps/dijits/tools/Help/csvDropperHelp.html":'\x3cdiv\x3e\r\n\t\x3cul class\x3d"helpContentList"\x3e\r\n\t\t\x3cli\x3e\x3cimg src\x3d"${baseUrl}dijits/tools/images/csv.png" style\x3d"width:45px;" class\x3d"helpImage" alt\x3d"" /\x3e\r\n\t\t\tWhen the tool is activated, the CSV Dropper pane will display. \r\n\t\t\tTo move the pane, click + hold the blue title bar and drag the pane.\r\n\t\t\x3c/li\x3e\r\n\t\t\x3cli\x3e\x3cimg src\x3d"${imagesUrl}csvDropperTitle.png" class\x3d"helpImage" alt\x3d"" /\x3e\x3cbr /\x3e\r\n\t\t\tCreate a CSV file with one or more fields. The records will be matched on the fields propid (Property ID), Suburb, Lot, or LGA (Local Government Area).\r\n\t\t\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\x3cli\x3e\x3cimg src\x3d"${imagesUrl}sampleCSV.png" class\x3d"helpImage" alt\x3d"" /\x3e\x3cbr /\x3e\r\n\t\t\tTo load the CSV file, drag the file from a folder on your machine onto the pane. \r\n\t\t\tA loading message will appear, followed by the results when they are received.\r\n\t\t\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\x3cli\x3eRecords will be matched on the following fields and keywords:\r\n\t\t\t\x3cul style\x3d"list-style-type:disc;"\x3e\r\n\t\t\t\t\x3cli\x3eProperty ID ("propid")\x3c/li\x3e\r\n\t\t\t\t\x3cli\x3eSuburb ("suburb")\x3c/li\x3e\r\n\t\t\t\t\x3cli\x3eLot/Section/Plan ("lot","section","plan")\x3c/li\x3e\r\n\t\t\t\t\x3cli\x3eLocal Government Area ("lga")\x3c/li\x3e\r\n\t\t\t\x3c/ul\x3e\r\n\t\t\tNote that for a CSV file with 500+ records, only the first 500 will be matched and displayed.\r\n\t\t\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\x3cli\x3e\x3cimg src\x3d"${imagesUrl}csvDropperLoaded.png" class\x3d"helpImage" alt\x3d"" /\x3e\x3cbr /\x3e\r\n\t\t\tHovering your mouse over a record will show its geometry on the map, clicking the record will zoom to that geometry.\x3cbr /\x3e\r\n\t\t\tYou can adjust the width of a column by clicking the seperator between the column headings, and dragging to the desired width.\r\n\t\t\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\x3cli\x3e\r\n\t\t\tYou may clear the current results using the "Reset Tool" icon in the pane title bar.\r\n\t\t\tIt is also possible to drop a new CSV file over existing results, which will clear the existing results and load the new file.\r\n\t\t\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\x3cli\x3e\x3cimg src\x3d"${imagesUrl}csvDropperSettings.png" class\x3d"helpImage" alt\x3d"" /\x3e\x3cbr /\x3e\r\n\t\t\tClick on the "Settings" icon on the pane title bar to view the settings for the currently loaded CSV file.\x3cbr /\x3e \r\n\t\t\tYou can select which fields you want to show, and adjust the name of the heading. \x3cbr /\x3e\r\n\t\t\tWhen you have finished editing, click the Update Fields button to refresh with your changes, or click the "Back" button on the pane title bar to discard your changes.\r\n\t\t\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\x3cli\x3e\r\n\t\t\tTo deactivate the tool you can close the tool pane, click the tool icon on the toolbar, or activate another tool.\x3cbr /\x3e\r\n\t\t\x3c/li\x3e\r\n\t\x3c/ul\x3e\r\n\x3c/div\x3e',
"url:dojox/form/resources/Uploader.html":'\x3cspan class\x3d"dijit dijitReset dijitInline"\r\n\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonNode"\r\n\t\tdata-dojo-attach-event\x3d"ondijitclick:_onClick"\r\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode,focusNode"\r\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitToggleButtonIconChar"\x3e\x26#x25CF;\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tid\x3d"${id}_label"\r\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\x3e\x3c/span\r\n\t\x3e\x3c/span\r\n\t\x3e \r\n\t\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen" tabIndex\x3d"-1" data-dojo-attach-point\x3d"valueNode" /\x3e\r\n\x3c/span\x3e\r\n',
"url:sixmaps/dijits/dragDropHelp.html":'\x3cdiv dojo-data-Type\x3d"dijit.layout.ContentPane" class\x3d"help"\x3e\r\n\t\x3cul class\x3d"helpContentList"\x3e\r\n\t\t\x3cli\x3eSIX Maps supports drag \x26 drop functionality in Mozilla Firefox or Google Chrome. Drag \x26 Drop is not supported in current versions of Internet Explorer or Safari.\x3c/li\x3e\x3cbr/\x3e\r\n\t\t\x3cli\x3eThe drag \x26 drop functionality enables other data sources to be overlaid with the data provided in SIX Maps.\x3c/li\x3e\x3cbr/\x3e\r\n\t\t\x3cli\x3eClick the item you want to import, drag it and drop it anywhere on the map. If successful the new data will show on the map, and appear as an operational layer in the Map Contents under the "Graphics Layers" node.\x3c/li\x3e\x3cbr/\x3e\r\n\t\t\x3cli\x3e\x3cimg src\x3d"${imagesUrl}HelpContent/mapContentsGraphics.png" class\x3d"helpImage" alt\x3d"" /\x3e\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\x3cli\x3eThe following formats are currently supported by Drag \x26 Drop:\r\n\t\t\t\x3cul\x3e\r\n\t\t\t\t\x3cli\x3e- ArcGIS REST endpoint URL\x3c/li\x3e\r\n\t\t\t\t\x3cli\x3e- KML endpoint URL\x3c/li\x3e\r\n\t\t\t\t\x3cli\x3e- CSV file containing Lat/Long fields\x3c/li\x3e\r\n\t\t\t\t\x3cli\x3e- JSON file containing ESRI JSON formatted content\x3c/li\x3e\r\n\t\t\t\t\x3cli\x3e- Geo-tagged image files\x3c/li\x3e\r\n\t\t\t\x3c/ul\x3e\r\n\t\t\x3c/li\x3e\x3cbr/\x3e\r\n\t\x3c/ul\x3e\r\n\x3c/div\x3e',
"url:dojox/grid/resources/View.html":'\x3cdiv class\x3d"dojoxGridView" role\x3d"presentation"\x3e\r\n\t\x3cdiv class\x3d"dojoxGridHeader" dojoAttachPoint\x3d"headerNode" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv dojoAttachPoint\x3d"headerNodeContainer" style\x3d"width:9000em" role\x3d"presentation"\x3e\r\n\t\t\t\x3cdiv dojoAttachPoint\x3d"headerContentNode" role\x3d"row"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cinput type\x3d"checkbox" class\x3d"dojoxGridHiddenFocus" dojoAttachPoint\x3d"hiddenFocusNode" aria-hidden\x3d"true" /\x3e\r\n\t\x3cinput type\x3d"checkbox" class\x3d"dojoxGridHiddenFocus" aria-hidden\x3d"true" /\x3e\r\n\t\x3cdiv class\x3d"dojoxGridScrollbox" dojoAttachPoint\x3d"scrollboxNode" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv class\x3d"dojoxGridContent" dojoAttachPoint\x3d"contentNode" hidefocus\x3d"hidefocus" role\x3d"presentation"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/CheckedMenuItem.html":'\x3ctr class\x3d"dijitReset" data-dojo-attach-point\x3d"focusNode" role\x3d"${role}" tabIndex\x3d"-1" aria-checked\x3d"${checked}"\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemIconCell" role\x3d"presentation"\x3e\r\n\t\t\x3cspan class\x3d"dijitInline dijitIcon dijitMenuItemIcon dijitCheckedMenuItemIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\t\x3cspan class\x3d"dijitMenuItemIconChar dijitCheckedMenuItemIconChar"\x3e${!checkedChar}\x3c/span\x3e\r\n\t\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemLabel" colspan\x3d"2" data-dojo-attach-point\x3d"containerNode,labelNode,textDirNode"\x3e\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemAccelKey" style\x3d"display: none" data-dojo-attach-point\x3d"accelKeyNode"\x3e\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuArrowCell" role\x3d"presentation"\x3e\x26#160;\x3c/td\x3e\r\n\x3c/tr\x3e\r\n',
"url:dojox/grid/resources/_Grid.html":'\x3cdiv hidefocus\x3d"hidefocus" role\x3d"grid" dojoAttachEvent\x3d"onmouseout:_mouseOut"\x3e\r\n\t\x3cdiv class\x3d"dojoxGridMasterHeader" dojoAttachPoint\x3d"viewsHeaderNode" role\x3d"presentation"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dojoxGridMasterView" dojoAttachPoint\x3d"viewsNode" role\x3d"presentation"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dojoxGridMasterMessages" style\x3d"display: none;" dojoAttachPoint\x3d"messagesNode"\x3e\x3c/div\x3e\r\n\t\x3cspan dojoAttachPoint\x3d"lastFocusNode" tabindex\x3d"0"\x3e\x3c/span\x3e\r\n\x3c/div\x3e\r\n',
"url:sixmaps/dijits/takeMeTo/Help/LotHelp.html":'\x3cdl\x3e\r\n\t\x3cdt\x3eLot\x3c/dt\x3e\x3cbr /\x3e\r\n\t\x3cdd\x3e\x3cimg src\x3d"${apiUrl}sixmaps/dijits/takeMeTo/Help/Images/Lot.png" class\x3d"helpImage" alt\x3d"" /\x3e\x3cbr /\x3e\r\n\t\t\x3cul class\x3d"helpContentList"\x3e\r\n\t\t\t\t\t\x3cli\x3eEnter Lot (NA for Strata Plan), Section(optional), Plan Number, and Plan Type(Strata or Deposited Plan).\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\t\t\t\x3cli\x3eClick \'Search\'.\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\t\t\t\x3cli\x3eIf the Lot or Strata feature is found, the map will zoom directly to the location and highlight the feature.\x3c/li\x3e\r\n\t\t\x3c/ul\x3e\r\n\t\x3c/dd\x3e\r\n\x3c/dl\x3e\r\n\r\n\t\t',
"url:sixmaps/dijits/takeMeTo/Help/POIHelp.html":'\x3cdl\x3e\r\n\t\x3cdt\x3ePOI (Points of Interest)\x3c/dt\x3e\x3cbr /\x3e\r\n\t\x3cdd\x3e\x3cimg src\x3d"${apiUrl}sixmaps/dijits/takeMeTo/Help/Images/POI.png" class\x3d"helpImage" alt\x3d"" /\x3e\x3cbr /\x3e\r\n\t\t\x3cul class\x3d"helpContentList"\x3e\r\n\t\t\t\x3cli\x3eEnter a named topographic place of interest \x3cbr /\x3e(eg. \'Opera House\'). \x3c/li\x3e\x3cbr /\x3e\r\n\t\t\t\x3cli\x3eClick \'Search\'.\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\t\x3cli\x3eThe search will return anything containing the search query. The results are prioritised by City, Town, Suburb, with any other features following.\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\t\x3cli\x3eIf a point of interest is found, the map will zoom to the location and highlight the first feature in the list of results.\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\t\x3cli\x3eHovering your mouse cursor over a result in the list will highlight the feature on the map. Click on the result to zoom to that feature.\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\t\x3cli\x3eOnce you have zoomed into the approximate area of interest, selecting the \'Current Extent\' checkbox will restrict the search to find features within that extent.\x3c/li\x3e\r\n\t\t\x3c/ul\x3e\r\n\t\x3c/dd\x3e\r\n\x3c/dl\x3e\r\n\r\n\t\t',
"url:sixmaps/dijits/takeMeTo/Help/SuburbHelp.html":'\x3cdl\x3e\r\n\t\x3cdt\x3eSuburb\x3c/dt\x3e\x3cbr /\x3e\r\n\t\x3cdd\x3e\x3cimg src\x3d"${apiUrl}sixmaps/dijits/takeMeTo/Help/Images/Suburb.png" class\x3d"helpImage" alt\x3d"" /\x3e\x3cbr /\x3e\r\n\t\t\x3cul class\x3d"helpContentList"\x3e\r\n\t\t\t\x3cli\x3eEnter the Suburb or Town name.\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\t\x3cli\x3eClick \'Search\'.\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\t\x3cli\x3eIf the Suburb or Town is found, the map will zoom directly to the location and highlight the feature boundary.\r\n\t\t\t\tIf there is more than one, the Suburb name with Postcode will be available for selection.\r\n\t\t\t\tClick the row with the unique Postcode to zoom in and highlight.\r\n\t\t\t\x3c/li\x3e\r\n\t\t\x3c/ul\x3e\r\n\t\x3c/dd\x3e\r\n\x3c/dl\x3e\r\n',
"url:sixmaps/dijits/takeMeTo/Help/SurveyMarkHelp.html":'\x3cdl\x3e\r\n\t\x3cdt\x3eSurvey Mark\x3c/dt\x3e\x3cbr /\x3e\r\n\t\x3cdd\x3e\x3cimg src\x3d"${apiUrl}sixmaps/dijits/takeMeTo/Help/Images/SurveyMark.png" class\x3d"helpImage" alt\x3d"" /\x3e\x3cbr /\x3e\r\n\t\t\x3cul class\x3d"helpContentList"\x3e\r\n\t\t\t\x3cli\x3eEnter Mark Type, Mark Number, or Trig Name.\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\t\x3cli\x3eClick \'Search\'.\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\t\x3cli\x3eAny Survey Mark found matching that query will appear in the results list. The map will zoom directly to the location and highlight the Survey Mark feature.\x3c/li\x3e\r\n\t\t\x3c/ul\x3e\r\n\t\x3c/dd\x3e\r\n\x3c/dl\x3e\r\n\r\n\t\t',
"url:sixmaps/dijits/tools/Help/MeasureDistanceHelp.html":'\x3cdiv\x3e\r\n\t\x3cul class\x3d"helpContentList"\x3e\r\n\t\t\x3cli\x3e\x3cimg src\x3d"${baseUrl}dijits/tools/images/measure.png" style\x3d"width:45px;" class\x3d"helpImage" alt\x3d"" /\x3e\r\n\t\t\tWhen the tool is activated, the Distance Tool pane will display. \r\n\t\t\tTo move the pane, click + hold the blue title bar and drag the pane.\r\n\t\t\x3c/li\x3e\r\n\t\t\x3cli\x3e\x3cbr /\x3e\x3cimg src\x3d"${imagesUrl}distanceTitle.png" class\x3d"helpImage" alt\x3d"" /\x3e\x3cbr /\x3e\r\n\t\t\tLeft click on the map to start measuring. \r\n\t\t\tClicking again will end the current line segment, and the measurement will be displayed in the tool pane.\r\n\t\t\x3c/li\x3e\r\n\t\t\x3cli\x3e\x3cbr /\x3e\x3cimg src\x3d"${imagesUrl}distanceSegment.png" class\x3d"helpImage" alt\x3d"" /\x3e\r\n\t\t\tTo finish the measurement, double-click on the map.\r\n\t\t\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\x3cli\x3eTo deactivate the tool you can close the tool pane, click the tool icon on the toolbar, or activate another tool\r\n\t\t\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\x3cli\x3e\r\n\t\t\t\x3cb\x3eThe Distance Tool is provided for information purposes only and it is to be used as an approximation measurement tool only. Potential inaccuracies in the mapping registration of imagery and overlay datasets mean that the Distance Tool is for approximate measurement and not for any legal or quotation purposes.\x3cbr/\x3e\x3cbr/\x3eSpatial Services accepts no liability for loss, damage, or costs that you may incur relating to any use or reliance upon the information in this Distance Tool. Please read the full SIX Terms and Conditions of Use. \x3c/b\x3e\r\n\t\t\x3c/li\x3e\r\n\t\x3c/ul\x3e\r\n\x3c/div\x3e',
"url:sixmaps/dijits/tools/Help/MeasureAreaHelp.html":'\x3cdiv\x3e\r\n\t\x3cul class\x3d"helpContentList"\x3e\r\n\t\t\x3cli\x3e\x3cimg src\x3d"${baseUrl}dijits/tools/images/area.png" style\x3d"width:45px;" class\x3d"helpImage" alt\x3d"" /\x3e\r\n\t\t\tWhen the tool is activated, the Area Tool pane will display. \r\n\t\t\tTo move the pane, click + hold the blue title bar and drag the pane.\r\n\t\t\x3c/li\x3e\r\n\t\t\x3cli\x3e\x3cimg src\x3d"${imagesUrl}areaTitle.png" class\x3d"helpImage" alt\x3d"" /\x3e\x3cbr /\x3e\r\n\t\t\tLeft click on the map to start marking the boundary. \r\n\t\t\tClicking again will end the current line segment.\r\n\t\t\tDouble click to complete the boundary and calculate the area and perimeter of the polygon you have drawn.\r\n\t\t\x3c/li\x3e\x3cbr/\x3e\r\n\t\t\x3cli\x3e\x3cimg src\x3d"${imagesUrl}areaComplete.png" class\x3d"helpImage" alt\x3d"" /\x3e\r\n\t\t\tTo deactivate the tool you can close the tool pane, click the tool icon on the toolbar, or activate another tool\x3cbr /\x3e\r\n\t\t\x3c/li\x3e\x3cbr/\x3e\r\n\t\t\x3cli\x3e\r\n\t\t\t\x3cb\x3eThe Area tool is provided for information purposes only and it is to be used as an approximation measurement tool only. Potential inaccuracies in the mapping registration of imagery and overlay datasets mean that the Area Tool is for approximate measurement and not for any legal or quotation purposes. \x3cbr/\x3e\x3cbr/\x3eSpatial Services accepts no liability for loss, damage, or costs that you may incur relating to any use or reliance upon the information in this Area Tool. Please read the full SIX Terms and Conditions of Use.\x3c/b\x3e \r\n\t\t\x3c/li\x3e\r\n\t\x3c/ul\x3e\r\n\x3c/div\x3e',
"url:sixmaps/dijits/tools/Help/CoordinateHelp.html":'\x3cdiv\x3e \r\n\t\x3cul class\x3d"helpContentList"\x3e\r\n\t\t\x3cli\x3e\x3cimg src\x3d"${baseUrl}dijits/tools/images/xy.png" style\x3d"width:45px;" class\x3d"helpImage" alt\x3d"" /\x3e\r\n\t\t\tWhen the tool is activated, the Coordinate Tool pane will display. \r\n\t\t\tTo move the pane, click + hold the blue title bar and drag the pane.\r\n\t\t\x3c/li\x3e\r\n\t\t\x3cli\x3e\x3cbr /\x3e\x3cimg src\x3d"${imagesUrl}coordPan.png" class\x3d"helpImage" alt\x3d"" /\x3e\x3cbr /\x3e\r\n\t\t\tLeft click on the map to capture the coordinates for that point, which will display in the coordinate fields. \r\n\t\t\x3c/li\x3e\r\n\t\t\x3cli\x3e\x3cimg src\x3d"${imagesUrl}coordFields.png" class\x3d"helpImage" alt\x3d"" /\x3e\r\n\t\t\tYou may change the projection type using the projection dropdown button. \r\n\t\t\x3c/li\x3e\r\n\t\t\x3cli\x3e\x3cimg src\x3d"${imagesUrl}projDropDown.png" class\x3d"helpImage" alt\x3d"" /\x3e\r\n\t\t\tIf a valid set of coordinates are contained in the fields, the tool will attempt to convert the coordinates to the selected projection. \r\n\t\t\tIf the conversion is not successful an error message will be displayed.\r\n\t\t\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\x3cli\x3e\r\n\t\t\tTo pan/zoom to a location, enter the coordinates in the fields, and click the \'GO\' button. \r\n\t\t\tThe map will move to the point entered.\r\n\t\t\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\x3cli\x3eThe \'Reset\' button will clear the current coordinates.\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\x3cli\x3e\r\n\t\t\tIf you are using a mobile device (ie. iPad/smartphone), you will have an extra button, \'Current Location\'.\r\n\t\t\tThis will attempt to approximate your location using the device\'s built in GPS, or network signal.\x3cbr /\x3e\r\n\t\t\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\x3cli\x3eTo deactivate the tool you can close the tool pane, click the tool icon on the toolbar, or activate another tool\r\n\t\t\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\x3cli\x3e\r\n\t\t\t\x3cb\x3eThe Coordinate Tool is provided for information purposes only and it is to be used as an approximation measurement tool only. Potential inaccuracies in the mapping registration of imagery and overlay datasets mean that the Coordinate Tool is for approximate location identification and not for any legal or survey purposes.\x3cbr /\x3e\x3cbr /\x3eSpatial Services accepts no liability for loss, damage, or costs that you may incur relating to any use or reliance upon the information in this Coordinate Tool. Please read the full SIX Terms and Conditions of Use.\x3c/b\x3e\r\n\t\t\x3c/li\x3e\r\n\t\x3c/ul\x3e\r\n\x3c/div\x3e',
"url:sixmaps/dijits/tools/Help/IdentifyHelp.html":'\x3cdiv\x3e\r\n\t\x3cul class\x3d"helpContentList"\x3e\r\n\t\t\x3cli\x3e\x3cimg src\x3d"${baseUrl}dijits/tools/images/info.png" style\x3d"width:45px;" class\x3d"helpImage" alt\x3d"" /\x3e\r\n\t\t\tWhen the tool is activated, the Identify Tool pane will display. \r\n\t\t\tTo move the pane, click + hold the blue title bar and drag the pane.\r\n\t\t\x3c/li\x3e\r\n\t\t\x3cli\x3e\x3cimg src\x3d"${imagesUrl}identifyTitle.png" class\x3d"helpImage" alt\x3d"" /\x3e\x3cbr /\x3e\r\n\t\t\tLeft click on the map to perform an identify operation. \r\n\t\t\tA loading message will appear, which disappears once all results have been received.\r\n\t\t\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\x3cli class\x3d"help"\x3e\x3cimg src\x3d"${imagesUrl}identifyPane.png" class\x3d"helpImage" alt\x3d"" /\x3e\x3cbr /\x3e\r\n\t\t\tYou may choose one of three options when performing an identify operation:\r\n\t\t\t\x3cdl\x3e\x3cbr /\x3e\r\n\t\t\t\t\x3cdt\x3eIdentify features by point\x3c/dt\x3e\x3cdd\x3e\x3cimg src\x3d"${baseUrl}dijits/tools/images/crosshair.png" class\x3d"helpImage" alt\x3d"" /\x3eThis option is selected by default. Allows you to select one point at a time.\x3c/dd\x3e\x3cbr /\x3e\r\n\t\t\t\t\x3cdt\x3eIdentify features by rectangle\x3c/dt\x3e\x3cdd\x3e\x3cimg src\x3d"${baseUrl}dijits/tools/images/rectangle.png" class\x3d"helpImage" alt\x3d"" /\x3eAllows you to select one or more features at a time. Click and drag a rectangle on the map, all features within that area will be identified.\x3c/dd\x3e\x3cbr /\x3e\r\n\t\t\t\t\x3cdt\x3eIdentify features by polygon\x3c/dt\x3e\x3cdd\x3e\x3cimg src\x3d"${baseUrl}dijits/tools/images/polygon.png" class\x3d"helpImage" alt\x3d"" /\x3eAllows you to select one or more features at a time. Click a point on the map to start drawing the polygon. Continue clicking to add further points, then double click to complete the polygon. All features within that area will be identified.\x3c/dd\x3e\x3cbr /\x3e\r\n\t\t\t\t\x3cdt\x3eRemove Selection Graphic\x3c/dt\x3e\x3cdd\x3e\x3cimg src\x3d"${baseUrl}dijits/tools/images/clearSelections.png" class\x3d"helpImage" alt\x3d"" /\x3eClick this to button to remove the current selection graphic from the map.\x3c/dd\x3e\r\n\t\t\t\x3c/dl\x3e\r\n\t\t\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\x3cli\x3e\r\n\t\t\tIdentify results should include Suburb, LGA, Lot, Address, and Imagery. Each set of results is displayed as a separate category in the tool pane. Clicking on an individual result will zoom to its location and highlight the feature.\r\n\t\t\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\x3cli\x3e\r\n\t\t\tDifferent results may be available at different scales. For example, Lot results may not be available in some areas at scales beyond 1:144,448. Try zooming in closer before performing the identify to view these results.\r\n\t\t\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\x3cli\x3e\r\n\t\t\tClick the reset icon in the toolbar to clear the current set of results.\x3cbr /\x3e\r\n\t\t\tTo deactivate the tool you can close the tool pane, click the tool icon on the toolbar, or activate another tool.\x3cbr /\x3e\r\n\t\t\x3c/li\x3e\r\n\t\x3c/ul\x3e\r\n\x3c/div\x3e',
"url:sixmaps/dijits/imageViewerHelp.html":'\x3cdiv\x3e\r\n\t\x3cul class\x3d"helpContentList"\x3e\r\n\t\t\x3cli\x3e\x3cimg src\x3d"${imagesUrl}HelpContent/imageViewerTitle.png" class\x3d"helpImage" alt\x3d"" /\x3e\x3cbr /\x3e\r\n\t\t\tWhen the tool is activated, the Image Dropper pane will display. To move the pane, click + hold the blue title bar and drag the pane.\r\n\t\t\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\x3cli\x3eTo load an image, drag the file from a folder on your machine onto the pane. It is possible to drop multiple images at once, and a marker will be added for each one.\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\x3cli\x3e\x3cimg src\x3d"${imagesUrl}HelpContent/imageViewerPane.png" class\x3d"helpImage" alt\x3d"" /\x3eN.B. The tool accepts geo-tagged images taken with a GPS enabled mobile phone or camera.\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\x3cli\x3eOnce the image has been processed it will be displayed within the pane, and the map will zoom to the geo-tagged location.\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\x3cli\x3eYou can click the image in the pane to pan \x26 zoom to its location, and open a dialog window to view the image. You can also click on the location marker to display the image.\x3c/li\x3e\x3cbr /\x3e\r\n\t\t\x3cli\x3eTo deactivate the tool you can close the tool pane, click the tool icon on the toolbar, or activate another tool.\x3c/li\x3e\x3cbr /\x3e\r\n\t\x3c/ul\x3e\r\n\x3c/div\x3e',
"*now":function(m){m(['dojo/i18n!*preload*sixmaps/nls/main*["ar","ca","cs","da","de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])}}});(function(){var m=this.require;m({cache:{}});!m.async&&m(["dojo"]);m.boot&&m.apply(null,m.boot)})();
//# sourceMappingURL=main.js.map